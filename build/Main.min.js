!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("regenerator-runtime"),require("three"),require("tween")):"function"==typeof define&&define.amd?define(["exports","regenerator-runtime","three","tween"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).Main={},null,e.THREE$1,e.TWEEN$1)}(this,(function(e,t,i,s){"use strict";var n="undefined"!=typeof document?document.currentScript:null;function r(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(i){if("default"!==i){var s=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:function(){return e[i]}})}})),t.default=e,Object.freeze(t)}var o=r(i),a=r(s);const l={ui:[],debug:!1,dom:null,ID:null,lock:!1,wlock:!1,current:-1,needReZone:!0,needResize:!1,forceZone:!1,isEventsInit:!1,isLeave:!1,downTime:0,prevTime:0,prevDefault:["contextmenu"],pointerEvent:["pointerdown","pointermove","pointerup"],eventOut:["pointercancel","pointerout","pointerleave"],xmlserializer:null,tmpTime:null,tmpImage:null,oldCursor:"auto",input:null,parent:null,firstImput:!0,hiddenImput:null,hiddenSizer:null,hasFocus:!1,startInput:!1,inputRange:[0,0],cursorId:0,str:"",pos:0,startX:-1,moveX:-1,debugInput:!1,isLoop:!1,listens:[],e:{type:null,clientX:0,clientY:0,keyCode:NaN,key:null,delta:0},isMobile:!1,now:null,getTime:function(){return self.performance&&self.performance.now?self.performance.now.bind(performance):Date.now},testMobile:function(){let e=navigator.userAgent;return!!(e.match(/Android/i)||e.match(/webOS/i)||e.match(/iPhone/i)||e.match(/iPad/i)||e.match(/iPod/i)||e.match(/BlackBerry/i)||e.match(/Windows Phone/i))},add:function(e){l.ui.push(e),l.getZone(e),l.isEventsInit||l.initEvents()},remove:function(e){let t=l.ui.indexOf(e);-1!==t&&(l.removeListen(e),l.ui.splice(t,1)),0===l.ui.length&&l.removeEvents()},initEvents:function(){if(l.isEventsInit)return;let e=document.body;l.isMobile=l.testMobile(),l.now=l.getTime(),l.isMobile?e.style.touchAction="none":e.addEventListener("wheel",l,{passive:!1}),e.addEventListener("pointercancel",l),e.addEventListener("pointerleave",l),e.addEventListener("pointermove",l),e.addEventListener("pointerdown",l),e.addEventListener("pointerup",l),e.addEventListener("keydown",l,!1),e.addEventListener("keyup",l,!1),window.addEventListener("resize",l.resize,!1),l.isEventsInit=!0,l.dom=e},removeEvents:function(){if(!l.isEventsInit)return;let e=document.body;l.isMobile||e.removeEventListener("wheel",l),e.removeEventListener("pointercancel",l),e.removeEventListener("pointerleave",l),e.removeEventListener("pointermove",l),e.removeEventListener("pointerdown",l),e.removeEventListener("pointerup",l),e.removeEventListener("keydown",l),e.removeEventListener("keyup",l),window.removeEventListener("resize",l.resize),l.isEventsInit=!1},resize:function(){let e,t=l.ui.length;for(;t--;)e=l.ui[t],e.isGui&&!e.isCanvasOnly&&e.autoResize&&e.calc();l.needReZone=!0,l.needResize=!1},out:function(){console.log("im am out"),l.clearOldID()},in:function(){console.log("im am in")},fakeUp:function(){this.handleEvent({type:"pointerup"})},handleEvent:function(e){l.needResize&&l.resize(),l.findZone(l.forceZone);let t=l.e,i=!1;"keydown"===e.type&&l.keydown(e),"keyup"===e.type&&l.keyup(e),"wheel"===e.type?t.delta=e.deltaY>0?1:-1:t.delta=0;let s=e.pointerType;if(t.clientX=("touch"===s?e.pageX:e.clientX)||0,t.clientY=("touch"===s?e.pageY:e.clientY)||0,t.type=e.type,-1!==l.eventOut.indexOf(e.type)&&(i=!0,t.type="mouseup"),"pointerleave"===e.type&&(l.isLeave=!0),"pointerdown"===e.type&&(t.type="mousedown"),"pointerup"===e.type&&(t.type="mouseup"),"pointermove"===e.type&&(l.isLeave&&(l.isLeave=!1,l.resize()),t.type="mousemove"),"mousedown"===t.type){if(l.downTime=l.now(),l.downTime-l.prevTime<200)return l.selectAll(),!1;l.prevTime=l.downTime,l.forceZone=!1}"mousedown"===t.type&&l.clearInput(),"mousedown"===t.type&&(l.lock=!0),"mouseup"===t.type&&(l.lock=!1),l.isMobile&&"mousedown"===t.type&&l.findID(t),"mousemove"!==t.type||l.lock||l.findID(t),null!==l.ID&&(l.ID.isCanvasOnly&&(t.clientX=l.ID.mouse.x,t.clientY=l.ID.mouse.y),l.ID.handleEvent(t)),l.isMobile&&"mouseup"===t.type&&l.clearOldID(),i&&l.clearOldID()},findID:function(e){let t,i,s,n=l.ui.length,r=-1;for(;n--;)if(t=l.ui[n],t.isCanvasOnly?(i=t.mouse.x,s=t.mouse.y):(i=e.clientX,s=e.clientY),l.onZone(t,i,s)){r=n,r!==l.current&&(l.clearOldID(),l.current=r,l.ID=t);break}-1===r&&l.clearOldID()},clearOldID:function(){l.ID&&(l.current=-1,l.ID.reset(),l.ID=null,l.cursor())},calcUis:(e,t,i,s=!1)=>{l.debug&&console.log("calc_uis !!");let n,r,o=e.length,a=0,h=0,c=0;for(;o--;){n=e[h],h++,!s&&n.isGroup&&n.calcUis();let o=n.margin||0;n.zone.w=n.w,n.zone.h=n.h+o,n.autoWidth?(a=0,n.zone.x=t.x+n.dx,n.zone.y=i,i+=n.h+o,c+=n.h+o):(0===a&&(c+=n.h+o),n.zone.x=t.x+a,n.zone.y=i,r=l.getWidth(n),r?n.zone.w=n.w=r:n.fw&&(n.zone.w=n.w=n.fw),a+=n.zone.w,a>=t.w&&(i+=n.h+o,a=0))}return c},findTarget:function(e,t){let i=e.length;for(;i--;)if(l.onZone(e[i],t.clientX,t.clientY))return i;return-1},findZone:function(e=!1){if(e&&(l.needReZone=e),!l.needReZone)return;let t,i=l.ui.length;for(;i--;)t=l.ui[i],l.getZone(t);l.needReZone=!1},onZone:function(e,t,i){if(void 0===t||void 0===i)return!1;let s=e.zone,n=t-s.x,r=i-s.y,o=n>=0&&r>=0&&n<=s.w&&r<=s.h;return o?e.local.set(n,r):e.local.neg(),o},getWidth:function(e){return e.getDom().clientWidth},getZone:function(e){if(e.isCanvasOnly)return;if(e.isEmpty)return;const t=e.getDom().getBoundingClientRect();e.zone={x:t.left,y:t.top,w:t.width,h:t.height},e.isBottom&&(e.zone.y=e.realTop)},cursor:function(e){(e=e||"auto")!==l.oldCursor&&(document.body.style.cursor=e,l.oldCursor=e)},toCanvas:function(e,t,i,s){if(l.xmlserializer||(l.xmlserializer=new XMLSerializer),s&&null!==l.tmpTime&&(clearTimeout(l.tmpTime),l.tmpTime=null),null!==l.tmpTime)return;l.lock&&(l.tmpTime=setTimeout((function(){l.tmpTime=null}),10));let n=!1;t===e.canvas.width&&i===e.canvas.height||(n=!0),null===l.tmpImage&&(l.tmpImage=new Image);let r=l.tmpImage,o=l.xmlserializer.serializeToString(e.content),a='<svg xmlns="http://www.w3.org/2000/svg" width="'+t+'" height="'+i+'"><foreignObject style="pointer-events: none; left:0;" width="100%" height="100%">'+o+"</foreignObject></svg>";r.onload=function(){let s=e.canvas.getContext("2d");n?(e.canvas.width=t,e.canvas.height=i):s.clearRect(0,0,t,i),s.drawImage(this,0,0),e.onDraw()},r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(a),r.crossOrigin=""},setHidden:function(){null===l.hiddenImput&&(l.hiddenImput=document.createElement("input"),l.hiddenImput.type="text",l.hiddenSizer=document.createElement("div"),document.body.appendChild(l.hiddenImput),document.body.appendChild(l.hiddenSizer));let e=l.debugInput?"":"opacity:0; zIndex:0;",t=l.parent.css.txtselect+"padding:0; width:auto; height:auto; left:10px; top:auto; color:#FFF; background:#000;"+e;l.hiddenImput.style.cssText=t+"bottom:10px;"+(l.debugInput?"":"transform:scale(0);"),l.hiddenSizer.style.cssText=t+"bottom:40px;",l.hiddenImput.style.width=l.input.clientWidth+"px",l.hiddenImput.value=l.str,l.hiddenSizer.innerHTML=l.str,l.hasFocus=!0},clearHidden:function(e){null!==l.hiddenImput&&(l.hasFocus=!1)},clickPos:function(e){let t=l.str.length,i=0,s=0;for(;t--&&(i+=l.textWidth(l.str[s]),!(i>=e));)s++;return s},upInput:function(e,t){if(null===l.parent)return!1;let i=!1;if(t){let t=l.clickPos(e);l.moveX=t,-1===l.startX?(l.startX=t,l.cursorId=t,l.inputRange=[l.startX,l.startX]):l.moveX!==l.startX&&(l.startX>l.moveX?l.inputRange=[l.moveX,l.startX]:l.inputRange=[l.startX,l.moveX]),i=!0}else-1!==l.startX&&(l.hasFocus=!0,l.hiddenImput.focus(),l.hiddenImput.selectionStart=l.inputRange[0],l.hiddenImput.selectionEnd=l.inputRange[1],l.startX=-1,i=!0);return i&&l.selectParent(),i},selectAll:function(){l.parent&&(l.str=l.input.textContent,l.inputRange=[0,l.str.length],l.hasFocus=!0,l.hiddenImput.focus(),l.hiddenImput.selectionStart=l.inputRange[0],l.hiddenImput.selectionEnd=l.inputRange[1],l.cursorId=l.inputRange[1],l.selectParent())},selectParent:function(){var e=l.textWidth(l.str.substring(0,l.cursorId)),t=l.textWidth(l.str.substring(0,l.inputRange[0])),i=l.textWidth(l.str.substring(l.inputRange[0],l.inputRange[1]));l.parent.select(e,t,i,l.hiddenSizer.innerHTML)},textWidth:function(e){return null===l.hiddenSizer?0:(e=e.replace(/ /g,"&nbsp;"),l.hiddenSizer.innerHTML=e,l.hiddenSizer.clientWidth)},clearInput:function(){null!==l.parent&&(l.firstImput||l.parent.validate(!0),l.clearHidden(),l.parent.unselect(),l.input.style.background=l.parent.colors.back,l.input.style.borderColor=l.parent.colors.border,l.parent.isEdit=!1,l.input=null,l.parent=null,l.str="",l.firstImput=!0)},setInput:function(e,t){l.clearInput(),l.input=e,l.parent=t,l.input.style.background=l.parent.colors.backoff,l.input.style.borderColor=l.parent.colors.select,l.str=l.input.textContent,l.setHidden()},keydown:function(e){if(null===l.parent)return;let t=e.which;e.shiftKey,l.firstImput=!1,l.hasFocus&&(window.focus(),l.hiddenImput.focus()),l.parent.isEdit=!0,13===t?l.clearInput():l.input.isNum?e.keyCode>47&&e.keyCode<58||e.keyCode>95&&e.keyCode<106||190===e.keyCode||110===e.keyCode||8===e.keyCode||109===e.keyCode?l.hiddenImput.readOnly=!1:l.hiddenImput.readOnly=!0:l.hiddenImput.readOnly=!1},keyup:function(e){null!==l.parent&&(l.str=l.hiddenImput.value,l.parent.allEqual?l.parent.sameStr(l.str):l.input.textContent=l.str,l.cursorId=l.hiddenImput.selectionStart,l.inputRange=[l.hiddenImput.selectionStart,l.hiddenImput.selectionEnd],l.selectParent(),l.parent.validate())},loop:function(){l.isLoop&&requestAnimationFrame(l.loop),l.update()},update:function(){let e=l.listens.length;for(;e--;)l.listens[e].listening()},removeListen:function(e){let t=l.listens.indexOf(e);-1!==t&&l.listens.splice(t,1),0===l.listens.length&&(l.isLoop=!1)},addListen:function(e){return-1===l.listens.indexOf(e)&&(l.listens.push(e),l.isLoop||(l.isLoop=!0,l.loop()),!0)}},h=l,c={size:{w:320,h:24,p:30,s:8},texture:null,transition:.1,frag:document.createDocumentFragment(),colorRing:null,joystick_0:null,joystick_1:null,circular:null,knob:null,pad2d:null,svgns:"http://www.w3.org/2000/svg",links:"http://www.w3.org/1999/xlink",htmls:"http://www.w3.org/1999/xhtml",DOM_SIZE:["height","width","top","left","bottom","right","margin-left","margin-right","margin-top","margin-bottom"],SVG_TYPE_D:["pattern","defs","transform","stop","animate","radialGradient","linearGradient","animateMotion","use","filter","feColorMatrix"],SVG_TYPE_G:["svg","rect","circle","path","polygon","text","g","line","foreignObject"],PI:Math.PI,TwoPI:2*Math.PI,pi90:.5*Math.PI,pi60:Math.PI/3,torad:Math.PI/180,todeg:180/Math.PI,clamp:(e,t,i)=>(e=e<t?t:e)>i?i:e,isDivid:e=>.5*e===Math.floor(.5*e),defineColor:(e,t=c.colors)=>{let i={...t},s=["fontFamily","fontWeight","fontShadow","fontSize"],n=!1;e.font&&(e.fontFamily=e.font),e.shadow&&(e.fontShadow=e.shadow),e.weight&&(e.fontWeight=e.weight),e.fontColor&&(e.text=e.fontColor),e.color&&(e.text=e.color),e.text&&(i.text=e.text,e.fontColor||e.color||(i.title=c.ColorLuma(e.text,-.25),i.titleoff=c.ColorLuma(e.text,-.5)),i.textOver=c.ColorLuma(e.text,.25),i.textSelect=c.ColorLuma(e.text,.5)),e.button&&(i.button=e.button,i.border=c.ColorLuma(e.button,.1),i.overoff=c.ColorLuma(e.button,.2)),e.select&&(i.select=e.select,i.over=c.ColorLuma(e.select,-.1)),e.itemBg&&(e.back=e.itemBg),e.back&&(i.back=e.back,i.backoff=c.ColorLuma(e.back,-.1)),e.fontSelect&&(i.textSelect=e.fontSelect),e.groupBorder&&(i.gborder=e.groupBorder),e.bgOver&&(i.backgroundOver=e.bgOver);for(let t in i)void 0!==e[t]&&(i[t]=e[t]);for(let t in e)-1!==s.indexOf(t)&&(n=!0);return n&&c.defineText(i),i},colors:{sx:4,sy:0,radius:6,showOver:1,content:"#37383d",background:"#28292e",backgroundOver:"rgba(40,40,40,0)",title:"#CCC",titleoff:"#BBB",text:"#DDD",textOver:"#EEE",textSelect:"#FFF",back:"rgba(0,0,0,0.2)",backoff:"rgba(0,0,0,0.3)",border:"#4c4c4c",borderSize:1,gborder:"none",groups:"none",button:"#3c3c3c",overoff:"#5c5c5c",over:"#024699",select:"#308AFF",action:"#FF3300",fontFamily:"'SegoeUI', 'Segoe UI', 'Helvetica Neue', -apple-system, BlinkMacSystemFont, Roboto, Oxygen-Sans, Ubuntu, Cantarell, sans-serif",fontWeight:"normal",fontShadow:"none",fontSize:12,joyOver:"rgba(48,138,255,0.25)",joyOut:"rgba(100,100,100,0.5)",joySelect:"#308AFF",hide:"rgba(0,0,0,0)"},css:{basic:"position:absolute; pointer-events:none; box-sizing:border-box; margin:0; padding:0; overflow:hidden; -o-user-select:none; -ms-user-select:none; -khtml-user-select:none; -webkit-user-select:none; -moz-user-select:none;",button:"display:flex; align-items:center; justify-content:center; text-align:center;",middle:"display:flex; align-items:center; justify-content:left; text-align:left; flex-direction: row-reverse;"},svgs:{g1:"M 6 4 L 0 4 0 6 6 6 6 4 M 6 0 L 0 0 0 2 6 2 6 0 Z",g2:"M 6 0 L 4 0 4 6 6 6 6 0 M 2 0 L 0 0 0 6 2 6 2 0 Z",group:"M 7 7 L 7 8 8 8 8 7 7 7 M 5 7 L 5 8 6 8 6 7 5 7 M 3 7 L 3 8 4 8 4 7 3 7 M 7 5 L 7 6 8 6 8 5 7 5 M 6 6 L 6 5 5 5 5 6 6 6 M 7 3 L 7 4 8 4 8 3 7 3 M 6 4 L 6 3 5 3 5 4 6 4 M 3 5 L 3 6 4 6 4 5 3 5 M 3 3 L 3 4 4 4 4 3 3 3 Z",arrow:"M 3 8 L 8 5 3 2 3 8 Z",arrowDown:"M 5 8 L 8 3 2 3 5 8 Z",arrowUp:"M 5 2 L 2 7 8 7 5 2 Z",solid:"M 13 10 L 13 1 4 1 1 4 1 13 10 13 13 10 M 11 3 L 11 9 9 11 3 11 3 5 5 3 11 3 Z",body:"M 13 10 L 13 1 4 1 1 4 1 13 10 13 13 10 M 11 3 L 11 9 9 11 3 11 3 5 5 3 11 3 M 5 4 L 4 5 4 10 9 10 10 9 10 4 5 4 Z",vehicle:"M 13 6 L 11 1 3 1 1 6 1 13 3 13 3 11 11 11 11 13 13 13 13 6 M 2.4 6 L 4 2 10 2 11.6 6 2.4 6 M 12 8 L 12 10 10 10 10 8 12 8 M 4 8 L 4 10 2 10 2 8 4 8 Z",articulation:"M 13 9 L 12 9 9 2 9 1 5 1 5 2 2 9 1 9 1 13 5 13 5 9 4 9 6 5 8 5 10 9 9 9 9 13 13 13 13 9 Z",character:"M 13 4 L 12 3 9 4 5 4 2 3 1 4 5 6 5 8 4 13 6 13 7 9 8 13 10 13 9 8 9 6 13 4 M 6 1 L 6 3 8 3 8 1 6 1 Z",terrain:"M 13 8 L 12 7 Q 9.06 -3.67 5.95 4.85 4.04 3.27 2 7 L 1 8 7 13 13 8 M 3 8 Q 3.78 5.420 5.4 6.6 5.20 7.25 5 8 L 7 8 Q 8.39 -0.16 11 8 L 7 11 3 8 Z",joint:"M 7.7 7.7 Q 8 7.45 8 7 8 6.6 7.7 6.3 7.45 6 7 6 6.6 6 6.3 6.3 6 6.6 6 7 6 7.45 6.3 7.7 6.6 8 7 8 7.45 8 7.7 7.7 M 3.35 8.65 L 1 11 3 13 5.35 10.65 Q 6.1 11 7 11 8.28 11 9.25 10.25 L 7.8 8.8 Q 7.45 9 7 9 6.15 9 5.55 8.4 5 7.85 5 7 5 6.54 5.15 6.15 L 3.7 4.7 Q 3 5.712 3 7 3 7.9 3.35 8.65 M 10.25 9.25 Q 11 8.28 11 7 11 6.1 10.65 5.35 L 13 3 11 1 8.65 3.35 Q 7.9 3 7 3 5.7 3 4.7 3.7 L 6.15 5.15 Q 6.54 5 7 5 7.85 5 8.4 5.55 9 6.15 9 7 9 7.45 8.8 7.8 L 10.25 9.25 Z",ray:"M 9 11 L 5 11 5 12 9 12 9 11 M 12 5 L 11 5 11 9 12 9 12 5 M 11.5 10 Q 10.9 10 10.45 10.45 10 10.9 10 11.5 10 12.2 10.45 12.55 10.9 13 11.5 13 12.2 13 12.55 12.55 13 12.2 13 11.5 13 10.9 12.55 10.45 12.2 10 11.5 10 M 9 10 L 10 9 2 1 1 2 9 10 Z",collision:"M 11 12 L 13 10 10 7 13 4 11 2 7.5 5.5 9 7 7.5 8.5 11 12 M 3 2 L 1 4 4 7 1 10 3 12 8 7 3 2 Z",map:"M 13 1 L 1 1 1 13 13 13 13 1 M 12 2 L 12 7 7 7 7 12 2 12 2 7 7 7 7 2 12 2 Z",material:"M 13 1 L 1 1 1 13 13 13 13 1 M 12 2 L 12 7 7 7 7 12 2 12 2 7 7 7 7 2 12 2 Z",texture:"M 13 4 L 13 1 1 1 1 4 5 4 5 13 9 13 9 4 13 4 Z",object:"M 10 1 L 7 4 4 1 1 1 1 13 4 13 4 5 7 8 10 5 10 13 13 13 13 1 10 1 Z",none:"M 9 5 L 5 5 5 9 9 9 9 5 Z",cursor:"M 4 7 L 1 10 1 12 2 13 4 13 7 10 9 14 14 0 0 5 4 7 Z",load:"M 13 8 L 11.5 6.5 9 9 9 3 5 3 5 9 2.5 6.5 1 8 7 14 13 8 M 9 2 L 9 0 5 0 5 2 9 2 Z",save:"M 9 12 L 5 12 5 14 9 14 9 12 M 11.5 7.5 L 13 6 7 0 1 6 2.5 7.5 5 5 5 11 9 11 9 5 11.5 7.5 Z",extern:"M 14 14 L 14 0 0 0 0 14 14 14 M 12 6 L 12 12 2 12 2 6 12 6 M 12 2 L 12 4 2 4 2 2 12 2 Z"},setDebug(e){h.debug=e},rezone(){h.needReZone=!0},getImput:function(){return!!h.input},setStyle:function(e){for(var t in e)c.colors[t]&&(c.colors[t]=e[t]);c.setText()},defineText:function(e){c.setText(e.fontSize,e.text,e.fontFamily,e.fontShadow,e.fontWeight)},setText:function(e,t,i,s,n){let r=c.colors;void 0===i&&(i=r.fontFamily),void 0===e&&(e=r.fontSize),void 0===s&&(s=r.fontShadow),void 0===n&&(n=r.fontWeight),void 0===t&&(t=r.text),isNaN(e)?-1===e.search("em")&&(e+="px"):e+="px",c.css.txt=c.css.basic+c.css.middle+" font-family:"+i+"; font-weight:"+n+"; font-size:"+e+"; color:"+r.text+"; padding:0px 8px; left:0; top:2px; height:16px; width:100px; overflow:hidden; white-space: nowrap; letter-spacing: normal;","none"!==s&&(c.css.txt+=" text-shadow: 1px 1px 1px "+s+";"),c.css.txtselect=c.css.txt+"padding:0px 4px; border:1px dashed "+r.border+";",c.css.item=c.css.txt+"padding:0px 4px; position:relative; margin-bottom:1px; "},cloneCss:function(){return{...c.css}},clone:function(e){return e.cloneNode(!0)},setSvg:function(e,t,i,s,n){-1===s?e.setAttributeNS(null,t,i):void 0!==n?e.childNodes[s||0].childNodes[n||0].setAttributeNS(null,t,i):e.childNodes[s||0].setAttributeNS(null,t,i)},setCss:function(e,t){for(let i in t)-1!==c.DOM_SIZE.indexOf(i)?e.style[i]=t[i]+"px":e.style[i]=t[i]},set:function(e,t){for(let i in t)"txt"===i&&(e.textContent=t[i]),"link"===i?e.setAttributeNS(c.links,"xlink:href",t[i]):e.setAttributeNS(null,i,t[i])},get:function(e,t){if(void 0===t)return e;if(!isNaN(t))return e.childNodes[t];if(t instanceof Array){if(2===t.length)return e.childNodes[t[0]].childNodes[t[1]];if(3===t.length)return e.childNodes[t[0]].childNodes[t[1]].childNodes[t[2]]}},dom:function(e,t,i,s,n){return e=e||"div",-1!==c.SVG_TYPE_D.indexOf(e)||-1!==c.SVG_TYPE_G.indexOf(e)?"svg"===e?(s=document.createElementNS(c.svgns,"svg"),c.set(s,i)):(void 0===s&&(s=document.createElementNS(c.svgns,"svg")),c.addAttributes(s,e,i,n)):s=void 0===s?document.createElementNS(c.htmls,e):s.appendChild(document.createElementNS(c.htmls,e)),t&&(s.style.cssText=t),void 0===n?s:s.childNodes[n||0]},addAttributes:function(e,t,i,s){let n=document.createElementNS(c.svgns,t);return c.set(n,i),c.get(e,s).appendChild(n),-1!==c.SVG_TYPE_G.indexOf(t)&&(n.style.pointerEvents="none"),n},clear:function(e){for(c.purge(e);e.firstChild;)e.firstChild.firstChild&&c.clear(e.firstChild),e.removeChild(e.firstChild)},purge:function(e){let t,i,s=e.attributes;if(s)for(t=s.length;t--;)i=s[t].name,"function"==typeof e[i]&&(e[i]=null);if(s=e.childNodes,s)for(t=s.length;t--;)c.purge(e.childNodes[t])},addSVGGlowEffect:function(){if(null!==document.getElementById("UILGlow"))return;let e=c.initUILEffects(),t=c.addAttributes(e,"filter",{id:"UILGlow",x:"-20%",y:"-20%",width:"140%",height:"140%"});c.addAttributes(t,"feGaussianBlur",{in:"SourceGraphic",stdDeviation:"3",result:"uilBlur"});let i=c.addAttributes(t,"feMerge",{});for(let e=0;e<=3;e++)c.addAttributes(i,"feMergeNode",{in:"uilBlur"});c.addAttributes(i,"feMergeNode",{in:"SourceGraphic"})},initUILEffects:function(){let e=document.getElementById("UILSVGEffects");return null===e&&(e=c.dom("svg",void 0,{id:"UILSVGEffects",width:"0",height:"0"}),document.body.appendChild(e)),e},ColorLuma:function(e,t){"n"===e&&(e="#000"),(e=String(e).replace(/[^0-9a-f]/gi,"")).length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),t=t||0;let i,s,n="#";for(s=0;s<3;s++)i=parseInt(e.substr(2*s,2),16),i=Math.round(Math.min(Math.max(0,i+i*t),255)).toString(16),n+=("00"+i).substr(i.length);return n},findDeepInver:function(e){return.3*e[0]+.59*e[1]+.11*e[2]<=.6},lerpColor:function(e,t,i){let s={};for(let n=0;n<3;n++)s[n]=e[n]+(t[n]-e[n])*i;return s},hexToHtml:function(e){return"#"+("000000"+(e=void 0===e?0:e).toString(16)).substr(-6)},htmlToHex:function(e){return e.toUpperCase().replace("#","0x")},u255:function(e,t){return parseInt(e.substring(t,t+2),16)/255},u16:function(e,t){return parseInt(e.substring(t,t+1),16)/15},unpack:function(e){return 7==e.length?[c.u255(e,1),c.u255(e,3),c.u255(e,5)]:4==e.length?[c.u16(e,1),c.u16(e,2),c.u16(e,3)]:void 0},p255:function(e){let t=Math.round(255*e).toString(16);return t.length<2&&(t="0"+t),t},pack:function(e){return"#"+c.p255(e[0])+c.p255(e[1])+c.p255(e[2])},htmlRgba:function(e,t){return e=c.unpack(e),"rgba("+Math.round(255*e[0])+","+Math.round(255*e[1])+","+Math.round(255*e[2])+","+t+")"},htmlRgb:function(e,t){return"rgb("+Math.round(255*e[0])+","+Math.round(255*e[1])+","+Math.round(255*e[2])+")"},pad:function(e){return 1==e.length&&(e="0"+e),e},rgbToHex:function(e){let t=Math.round(255*e[0]).toString(16),i=Math.round(255*e[1]).toString(16),s=Math.round(255*e[2]).toString(16);return"#"+c.pad(t)+c.pad(i)+c.pad(s)},hueToRgb:function(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+6*(t-e)*i:i<.5?t:i<2/3?e+6*(t-e)*(2/3-i):e},rgbToHsl:function(e){let t=e[0],i=e[1],s=e[2],n=Math.min(t,i,s),r=Math.max(t,i,s),o=r-n,a=0,l=0,h=(n+r)/2;return h>0&&h<1&&(l=o/(h<.5?2*h:2-2*h)),o>0&&(r==t&&r!=i&&(a+=(i-s)/o),r==i&&r!=s&&(a+=2+(s-t)/o),r==s&&r!=t&&(a+=4+(t-i)/o),a/=6),[a,l,h]},hslToRgb:function(e){let t,i,s=e[0],n=e[1],r=e[2];return 0===n?[r,r,r]:(i=r<=.5?r*(n+1):r+n-r*n,t=2*r-i,[c.hueToRgb(t,i,s+.33333),c.hueToRgb(t,i,s),c.hueToRgb(t,i,s-.33333)])},makeGradiant:function(e,t,i,s){c.dom(e,null,t,i,0);let n,r=i.childNodes[0].childNodes.length-1;for(let e=0;e<s.length;e++)n=s[e],c.dom("stop",null,{offset:n[0]+"%","stop-color":n[1],"stop-opacity":n[2]},i,[0,r])},makePad:function(e){let t=c.dom("svg",c.css.basic+"position:relative;",{viewBox:"0 0 256 256",width:256,height:256,preserveAspectRatio:"none"});d.dom("rect","",{x:28,y:28,width:200,height:200,fill:c.colors.back},t),d.dom("rect","",{x:38,y:38,width:180,height:180,fill:c.colors.button},t),d.dom("line","",{x1:38,y1:128,x2:218,y2:128,stroke:c.colors.back,"stroke-width":2},t),d.dom("line","",{x1:128,x2:128,y1:38,y2:218,stroke:c.colors.back,"stroke-width":2},t),d.dom("circle","",{cx:128,cy:128,r:5,stroke:c.colors.text,"stroke-width":5,fill:"none"},t),c.pad2d=t},makeKnob:function(e){let t=c.dom("svg",c.css.basic+"position:relative;",{viewBox:"0 0 128 128",width:128,height:128,preserveAspectRatio:"none"});c.dom("circle","",{cx:64,cy:64,r:34,fill:c.colors.button,stroke:"rgba(0,0,0,0.3)","stroke-width":8},t),c.dom("path","",{d:"",stroke:c.colors.text,"stroke-width":4,fill:"none","stroke-linecap":"round"},t),c.dom("circle","",{cx:64,cy:64,r:41,stroke:"rgba(0,0,0,0.1)","stroke-width":7,fill:"none"},t),c.dom("path","",{d:"",stroke:"rgba(255,255,255,0.3)","stroke-width":2,fill:"none","stroke-linecap":"round","stroke-opacity":.5},t),c.knob=t},makeCircular:function(e){let t=c.dom("svg",c.css.basic+"position:relative;",{viewBox:"0 0 128 128",width:128,height:128,preserveAspectRatio:"none"});c.dom("circle","",{cx:64,cy:64,r:40,stroke:"rgba(0,0,0,0.1)","stroke-width":10,fill:"none"},t),c.dom("path","",{d:"",stroke:c.colors.text,"stroke-width":7,fill:"none","stroke-linecap":"butt"},t),c.circular=t},makeJoystick:function(e){let t,i=Math.floor(49),s=Math.floor(.6*i),n=c.dom("svg",c.css.basic+"position:relative;",{viewBox:"0 0 128 128",width:128,height:128,preserveAspectRatio:"none"});if(c.dom("defs",null,{},n),c.dom("g",null,{},n),0===e){t=[[40,"rgb(0,0,0)",.3],[80,"rgb(0,0,0)",0],[90,"rgb(50,50,50)",.4],[100,"rgb(50,50,50)",0]],c.makeGradiant("radialGradient",{id:"grad",cx:"50%",cy:"50%",r:"50%",fx:"50%",fy:"50%"},n,t),t=[[60,"rgb(0,0,0)",.5],[100,"rgb(0,0,0)",0]],c.makeGradiant("radialGradient",{id:"gradS",cx:"50%",cy:"50%",r:"50%",fx:"50%",fy:"50%"},n,t);let e=["rgb(40,40,40)","rgb(48,48,48)","rgb(30,30,30)"],r=["rgb(1,90,197)","rgb(3,95,207)","rgb(0,65,167)"];t=[[30,e[0],1],[60,e[1],1],[80,e[1],1],[100,e[2],1]],c.makeGradiant("radialGradient",{id:"gradIn",cx:"50%",cy:"50%",r:"50%",fx:"50%",fy:"50%"},n,t),t=[[30,r[0],1],[60,r[1],1],[80,r[1],1],[100,r[2],1]],c.makeGradiant("radialGradient",{id:"gradIn2",cx:"50%",cy:"50%",r:"50%",fx:"50%",fy:"50%"},n,t),c.dom("circle","",{cx:64,cy:64,r:i,fill:"url(#grad)"},n),c.dom("circle","",{cx:69,cy:74,r:s+10,fill:"url(#gradS)"},n),c.dom("circle","",{cx:64,cy:64,r:s,fill:"url(#gradIn)"},n),c.joystick_0=n}else t=[[69,"rgb(0,0,0)",0],[70,"rgb(0,0,0)",.3],[100,"rgb(0,0,0)",0]],c.makeGradiant("radialGradient",{id:"gradX",cx:"50%",cy:"50%",r:"50%",fx:"50%",fy:"50%"},n,t),c.dom("circle","",{cx:64,cy:64,r:i,fill:"none",stroke:"rgba(100,100,100,0.25)","stroke-width":"4"},n),c.dom("circle","",{cx:64,cy:64,r:s+14,fill:"url(#gradX)"},n),c.dom("circle","",{cx:64,cy:64,r:s,fill:"none",stroke:"rgb(100,100,100)","stroke-width":"4"},n),c.joystick_1=n},makeColorRing:function(){let e=c.dom("svg",c.css.basic+"position:relative;",{viewBox:"0 0 256 256",width:256,height:256,preserveAspectRatio:"none"});c.dom("defs",null,{},e),c.dom("g",null,{},e);let t,i,s,n,r,o,a,l,h,d=8/113/24*Math.PI,u=0,p=[];for(o=0;o<=24;++o){if(s=o/24,n=s*c.TwoPI,t=.5*(u+n),i=1/Math.cos(.5*(n-u)),r=[Math.sin(u),-Math.cos(u),Math.sin(t)*i,-Math.cos(t)*i,Math.sin(n),-Math.cos(n)],p[1]=c.rgbToHex(c.hslToRgb([s,1,.5])),o>0){for(a=6;a--;)r[a]=(113*r[a]+128).toFixed(2);l=" M"+r[0]+" "+r[1]+" Q"+r[2]+" "+r[3]+" "+r[4]+" "+r[5],h=[[0,p[0],1],[100,p[1],1]],c.makeGradiant("linearGradient",{id:"G"+o,x1:r[0],y1:r[1],x2:r[4],y2:r[5],gradientUnits:"userSpaceOnUse"},e,h),c.dom("path","",{d:l,"stroke-width":30,stroke:"url(#G"+o+")","stroke-linecap":"butt"},e,1)}u=n-d,p[0]=p[1]}h=[[0,"#FFFFFF",1],[50,"#FFFFFF",0],[50,"#000000",0],[100,"#000000",1]],c.makeGradiant("linearGradient",{id:"GL0",x1:0,y1:128-84.9,x2:0,y2:212.9,gradientUnits:"userSpaceOnUse"},e,h),h=[[0,"#7f7f7f",1],[50,"#7f7f7f",.5],[100,"#7f7f7f",0]],c.makeGradiant("linearGradient",{id:"GL1",x1:78.95,y1:0,x2:226,y2:0,gradientUnits:"userSpaceOnUse"},e,h),c.dom("g",null,{"transform-origin":"128px 128px",transform:"rotate(0)"},e),c.dom("polygon","",{points:"78.95 43.1 78.95 212.85 226 128",fill:"red"},e,2),c.dom("polygon","",{points:"78.95 43.1 78.95 212.85 226 128",fill:"url(#GL1)","stroke-width":1,stroke:"url(#GL1)"},e,2),c.dom("polygon","",{points:"78.95 43.1 78.95 212.85 226 128",fill:"url(#GL0)","stroke-width":1,stroke:"url(#GL0)"},e,2),c.dom("path","",{d:"M 255.75 136.5 Q 256 132.3 256 128 256 123.7 255.75 119.5 L 241 128 255.75 136.5 Z",fill:"none","stroke-width":2,stroke:"#000"},e,2),c.dom("circle","",{cx:128,cy:128,r:6,"stroke-width":2,stroke:"#000",fill:"none"},e),c.colorRing=e},icon:function(e,t,i){i=i||40;let s=["<svg xmlns='"+c.svgns+"' version='1.1' xmlns:xlink='"+c.htmls+"' style='pointer-events:none;' preserveAspectRatio='xMinYMax meet' x='0px' y='0px' width='"+i+"px' height='"+i+"px' viewBox='0 0 256 256'><g>"];switch(e){case"logo":s[1]="<path id='logoin' fill='"+t+"' stroke='none' d='"+c.logoFill_d+"'/>";break;case"donate":s[1]="<path id='logoin' fill='"+t+"' stroke='none' d='"+c.logo_donate+"'/>";break;case"neo":s[1]="<path id='logoin' fill='"+t+"' stroke='none' d='"+c.logo_neo+"'/>";break;case"phy":s[1]="<path id='logoin' stroke='"+t+"' stroke-width='49' stroke-linejoin='round' stroke-linecap='butt' fill='none' d='"+c.logo_phy+"'/>";break;case"config":s[1]="<path id='logoin' stroke='"+t+"' stroke-width='49' stroke-linejoin='round' stroke-linecap='butt' fill='none' d='"+c.logo_config+"'/>";break;case"github":s[1]="<path id='logoin' fill='"+t+"' stroke='none' d='"+c.logo_github+"'/>";break;case"save":s[1]="<path stroke='"+t+"' stroke-width='4' stroke-linejoin='round' stroke-linecap='round' fill='none' d='M 26.125 17 L 20 22.95 14.05 17 M 20 9.95 L 20 22.95'/><path stroke='"+t,s[1]+="' stroke-width='2.5' stroke-linejoin='round' stroke-linecap='round' fill='none' d='M 32.6 23 L 32.6 25.5 Q 32.6 28.5 29.6 28.5 L 10.6 28.5 Q 7.6 28.5 7.6 25.5 L 7.6 23'/>"}return s[2]="</g></svg>",s.join("\n")},logoFill_d:"\n    M 171 150.75 L 171 33.25 155.5 33.25 155.5 150.75 Q 155.5 162.2 147.45 170.2 139.45 178.25 128 178.25 116.6 178.25 108.55 170.2 100.5 162.2 100.5 150.75 \n    L 100.5 33.25 85 33.25 85 150.75 Q 85 168.65 97.55 181.15 110.15 193.75 128 193.75 145.9 193.75 158.4 181.15 171 168.65 171 150.75 \n    M 200 33.25 L 184 33.25 184 150.8 Q 184 174.1 167.6 190.4 151.3 206.8 128 206.8 104.75 206.8 88.3 190.4 72 174.1 72 150.8 L 72 33.25 56 33.25 56 150.75 \n    Q 56 180.55 77.05 201.6 98.2 222.75 128 222.75 157.8 222.75 178.9 201.6 200 180.55 200 150.75 L 200 33.25 Z\n    ",logo_github:"\n    M 180.5 70 Q 186.3 82.4 181.55 96.55 196.5 111.5 189.7 140.65 183.65 168.35 146 172.7 152.5 178.7 152.55 185.9 L 152.55 218.15 Q 152.84 224.56 159.15 223.3 \n    159.21 223.3 159.25 223.3 181.14 216.25 198.7 198.7 228 169.4 228 128 228 86.6 198.7 57.3 169.4 28 128 28 86.6 28 57.3 57.3 28 86.6 28 128 28 169.4 57.3 198.7 74.85 \n    216.25 96.75 223.3 96.78 223.3 96.8 223.3 103.16 224.54 103.45 218.15 L 103.45 200 Q 82.97 203.1 75.1 196.35 69.85 191.65 68.4 185.45 64.27 177.055 59.4 174.15 49.20 \n    166.87 60.8 167.8 69.85 169.61 75.7 180 81.13 188.09 90 188.55 98.18 188.86 103.45 185.9 103.49 178.67 110 172.7 72.33 168.33 66.3 140.65 59.48 111.49 74.45 96.55 69.7 \n    82.41 75.5 70 84.87 68.74 103.15 80 115.125 76.635 128 76.85 140.85 76.65 152.85 80 171.1 68.75 180.5 70 Z\n    ",logo_neo:"\n    M 219 52 L 206 52 206 166 Q 206 183.4 193.75 195.65 181.4 208 164 208 146.6 208 134.35 195.65 122 183.4 122 166 L 122 90 Q 122 77.6 113.15 68.85 104.4 60 92 60 79.55 \n    60 70.75 68.85 62 77.6 62 90 L 62 204 75 204 75 90 Q 75 83 79.95 78 84.95 73 92 73 99 73 104 78 109 83 109 90 L 109 166 Q 109 188.8 125.15 204.85 141.2 221 164 221 \n    186.75 221 202.95 204.85 219 188.8 219 166 L 219 52 M 194 52 L 181 52 181 166 Q 181 173 176.05 178 171.05 183 164 183 157 183 152 178 147 173 147 166 L 147 90 Q 147 \n    67.2 130.85 51.15 114.8 35 92 35 69.25 35 53.05 51.15 37 67.2 37 90 L 37 204 50 204 50 90 Q 50 72.6 62.25 60.35 74.6 48 92 48 109.4 48 121.65 60.35 134 72.6 134 90 L \n    134 166 Q 134 178.4 142.85 187.15 151.6 196 164 196 176.45 196 185.25 187.15 194 178.4 194 166 L 194 52 Z\n    ",logo_phy:"\n    M 103.55 37.95 L 127.95 37.95 Q 162.35 37.95 186.5 55 210.9 72.35 210.9 96.5 210.9 120.65 186.5 137.7 162.35 155 127.95 155 L 127.95 237.95 M 127.95 155 \n    Q 93.55 155 69.15 137.7 45 120.65 45 96.5 45 72.35 69.15 55 70.9 53.8 72.85 52.85 M 127.95 155 L 127.95 37.95\n    ",logo_config:"\n    M 204.35 51.65 L 173.25 82.75 Q 192 101.5 192 128 L 236 128 M 192 128 Q 192 154.55 173.25 173.25 L 204.4 204.4 M 51.65 51.65 L 82.75 82.75 Q 101.5 64 128 64 \n    L 128 20 M 51.6 204.4 L 82.75 173.25 Q 64 154.55 64 128 L 20 128 M 128 236 L 128 192 Q 101.5 192 82.75 173.25 M 64 128 Q 64 101.5 82.75 82.75 M 173.25 173.25 \n    Q 154.55 192 128 192 M 128 64 Q 154.55 64 173.25 82.75\n    ",logo_donate:"\n    M 171.3 80.3 Q 179.5 62.15 171.3 45.8 164.1 32.5 141.35 30.1 L 94.35 30.1 Q 89.35 30.4 88.3 35.15 L 70.5 148.05 Q 70.2 152.5 73.7 152.6 L 100.95 152.6 107 111.6 Q 108.75 \n    106.55 112.6 106.45 130.45 108.05 145.3 103.9 163.35 98.75 171.3 80.3 M 179.8 71.5 Q 178.6 79.75 174.9 87.85 168.45 102.9 151.9 109.15 140.65 113.95 117.55 113 113.15 \n    112.75 111 117.45 L 102.7 169.95 Q 102.45 173.8 105.5 173.85 L 128.95 173.85 Q 132.2 174.2 133.35 169.65 L 138.3 139.95 Q 139.75 135.6 143.1 135.5 146.6 135.75 150.6 135.65 \n    154.55 135.5 157.35 135.1 160.15 134.7 166.75 132.35 181.35 127.4 187.9 111.2 194.25 95.75 189.5 81.95 186.75 74.85 179.8 71.5 M 103.5 209.9 Q 103.5 202.85 99.7 198.85 95.95 \n    194.75 89.4 194.75 82.8 194.75 79.05 198.85 75.3 202.9 75.3 209.9 75.3 216.85 79.05 220.95 82.8 225.05 89.4 225.05 95.95 225.05 99.7 221 103.5 216.95 103.5 209.9 M 95.45 205.5 \n    Q 95.95 207.3 95.95 209.9 95.95 212.65 95.45 214.35 94.95 216 94 217.3 93.1 218.45 91.9 219 90.7 219.55 89.4 219.55 88.15 219.55 86.95 219.05 85.75 218.55 84.8 217.3 83.9 216.15 \n    83.4 214.35 82.85 212.6 82.85 209.9 82.85 207.3 83.4 205.45 83.95 203.55 84.85 202.45 85.9 201.2 86.95 200.75 88.05 200.25 89.4 200.25 90.7 200.25 91.85 200.8 93.05 201.3 94 202.5 \n    94.9 203.65 95.45 205.5 M 153.3 195.35 L 145.3 195.35 135.5 224.45 142.8 224.45 144.6 218.5 153.75 218.5 155.6 224.45 163.1 224.45 153.3 195.35 M 152.15 213.25 L 146.25 213.25 \n    149.2 203.65 152.15 213.25 M 116.75 195.35 L 107.8 195.35 107.8 224.45 114.5 224.45 114.5 204.2 125.7 224.45 132.75 224.45 132.75 195.35 126.05 195.35 126.05 212.05 116.75 195.35 M \n    66.5 197.65 Q 64.15 196.15 61.45 195.75 58.8 195.35 55.75 195.35 L 46.7 195.35 46.7 224.45 55.8 224.45 Q 58.8 224.45 61.5 224.05 64.15 223.6 66.4 222.15 69.15 220.45 70.9 217.2 \n    72.7 214 72.7 209.95 72.7 205.7 71 202.6 69.35 199.5 66.5 197.65 M 64.2 205 Q 65.2 207 65.2 209.9 65.2 212.75 64.25 214.75 63.3 216.75 61.5 217.85 60 218.85 58.3 218.9 56.6 219 \n    54.15 219 L 54 219 54 200.8 54.15 200.8 Q 56.4 200.8 58.05 200.9 59.7 200.95 61.15 201.75 63.2 202.95 64.2 205 M 210.2 195.35 L 190.5 195.35 190.5 224.45 210.2 224.45 210.2 218.9 \n    197.75 218.9 197.75 211.55 209.2 211.55 209.2 206 197.75 206 197.75 200.9 210.2 200.9 210.2 195.35 M 187.5 195.35 L 163 195.35 163 200.9 171.6 200.9 171.6 224.45 178.9 224.45 178.9 \n    200.9 187.5 200.9 187.5 195.35 Z\n    "};c.setText();const d=c;let u=class e{static autoTypes(e){let t=[];switch(e){case"svg":t=[{accept:{"image/svg+xml":".svg"}}];break;case"wav":t=[{accept:{"audio/wav":".wav"}}];break;case"mp3":t=[{accept:{"audio/mpeg":".mp3"}}];break;case"mp4":t=[{accept:{"video/mp4":".mp4"}}];break;case"bin":case"hex":t=[{description:"Binary Files",accept:{"application/octet-stream":[".bin",".hex"]}}];break;case"text":t=[{description:"Text Files",accept:{"text/plain":[".txt",".text"],"text/html":[".html",".htm"]}}];break;case"json":t=[{description:"JSON Files",accept:{"application/json":[".json"]}}];break;case"js":t=[{description:"JavaScript Files",accept:{"text/javascript":[".js"]}}];break;case"ktx2":t=[{description:"ktx2",accept:{"image/ktx2":[".ktx2"]}}];break;case"image":t=[{description:"Images",accept:{"image/*":[".png",".gif",".jpeg",".jpg",".hdr",".exr"]}}];break;case"gif":t=[{description:"Images",accept:{"image/*":[".gif"]}}];break;case"png":t=[{description:"Images",accept:{"image/*":[".png"]}}];break;case"exr":t=[{description:"Images",accept:{"image/exr":[".exr"]}}];break;case"hdr":t=[{description:"Images",accept:{"image/hdr":[".hdr"]}}];break;case"jpg":t=[{description:"Images",accept:{"image/*":[".jpg",".jpeg"]}}];break;case"icon":t=[{description:"Icons",accept:{"image/x-ico":[".ico"]}}];break;case"lut":t=[{description:"Lut",accept:{"text/plain":[".cube",".3dl"]}}]}return t}static async load(t={}){"function"!=typeof window.showOpenFilePicker&&(window.showOpenFilePicker=e.showOpenFilePickerPolyfill);try{let i=t.type||"";const s={excludeAcceptAllOption:!!i,multiple:!1};s.types=e.autoTypes(i);const n=await window.showOpenFilePicker(s),r=await n[0].getFile();if(!r)return null;let o=r.name,a=o.substring(o.lastIndexOf(".")+1,o.length);const l=["png","jpg","jpeg","mp4","webm","ogg","mp3"],h=["sea","z","hex","bvh","BVH","glb","gltf","exr","ktx2","hdr"],c=new FileReader;"ArrayBuffer"===t.forceType?(c.readAsArrayBuffer(r),i=""):-1!==l.indexOf(a)?c.readAsDataURL(r):-1!==h.indexOf(a)?c.readAsArrayBuffer(r):c.readAsText(r),c.onload=function(e){let s=e.target.result;switch(i){case"image":let e=new Image;e.onload=function(){e.width=e.width,e.height=e.height,t.callback&&t.callback(e,o,a,[e.width,e.height])},e.src=s;break;case"json":t.callback&&t.callback(JSON.parse(s),o,a);break;default:t.callback&&t.callback(s,o,a)}}}catch(e){console.log(e),t.always&&t.callback&&t.callback(null)}}static showOpenFilePickerPolyfill(e){return new Promise((t=>{const i=document.createElement("input");i.type="file",i.multiple=e.multiple,i.accept=e.types.map((e=>e.accept)).flatMap((e=>Object.keys(e).flatMap((t=>e[t])))).join(","),i.addEventListener("change",(()=>{t([...i.files].map((e=>({getFile:async()=>new Promise((t=>{t(e)}))}))))})),i.click()}))}static async save(t={}){let i=!1;"function"!=typeof window.showSaveFilePicker&&(window.showSaveFilePicker=e.showSaveFilePickerPolyfill,i=!0);try{let s=t.type||"";const n={suggestedName:t.name||"hello",data:t.data||""};n.types=e.autoTypes(s),n.finalType=Object.keys(n.types[0].accept)[0],n.suggestedName+=n.types[0].accept[n.finalType][0];const r=await window.showSaveFilePicker(n);if(i)return;const o=await r.createWritable();let a=new Blob([n.data],{type:n.finalType});await o.write(a),await o.close()}catch(t){console.log(t)}}static showSaveFilePickerPolyfill(e){return new Promise((t=>{const i=document.createElement("a");i.download=e.suggestedName||"my-file.txt";let s=new Blob([e.data],{type:e.finalType});i.href=URL.createObjectURL(s),i.addEventListener("click",(()=>{t(setTimeout((()=>URL.revokeObjectURL(i.href)),1e3))})),i.click()}))}static async getFolder(){try{const e=await window.showDirectoryPicker(),t=[];for await(const i of e.values()){const e=await i.getFile();t.push(e)}return console.log(t),t}catch(e){console.log(e)}}},p=class{constructor(e=0,t=0){this.x=e,this.y=t}set(e,t){return this.x=e,this.y=t,this}divide(e){return this.x/=e.x,this.y/=e.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divideScalar(e){return this.multiplyScalar(1/e)}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}angle(){var e=Math.atan2(this.y,this.x);return e<0&&(e+=2*Math.PI),e}addScalar(e){return this.x+=e,this.y+=e,this}negate(){return this.x*=-1,this.y*=-1,this}neg(){return this.x=-1,this.y=-1,this}isZero(){return 0===this.x&&0===this.y}copy(e){return this.x=e.x,this.y=e.y,this}equals(e){return e.x===this.x&&e.y===this.y}nearEquals(e,t){return e.x.toFixed(t)===this.x.toFixed(t)&&e.y.toFixed(t)===this.y.toFixed(t)}lerp(e,t){return null===e?(this.x-=this.x*t,this.y-=this.y*t):(this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t),this}},f=class{constructor(e={}){this.lock=e.lock||!1,this.neverlock=!1,this.isSpace=e.isSpace||!1,this.main=e.main||null,this.isUI=e.isUI||!1,this.group=e.group||null,this.isListen=!1,this.top=0,this.ytop=0,this.dx=e.dx||0,this.isSelectable=void 0!==e.selectable&&e.selectable,this.unselectable=void 0!==e.unselect?e.unselect:this.isSelectable,this.ontop=!!e.ontop&&e.ontop,this.css=this.main?this.main.css:d.css,this.colors=d.defineColor(e,this.main?this.group?this.group.colors:this.main.colors:d.colors),this.overEffect=this.colors.showOver,this.svgs=d.svgs,this.zone={x:0,y:0,w:0,h:0,d:0},this.local=(new p).neg(),this.isCanvasOnly=!1,this.isSelect=!1,this.p=void 0!==e.p?e.p:d.size.p,this.w=this.isUI?this.main.size.w:d.size.w,void 0!==e.w&&(this.w=e.w),this.h=this.isUI?this.main.size.h:d.size.h,void 0!==e.h&&(this.h=e.h),this.isSpace?this.lock=!0:this.h=this.h<11?11:this.h,this.fw=e.fw||0,this.autoWidth=e.auto||!0,this.isOpen=!1,this.radius=e.radius||this.colors.radius,this.transition=e.transition||d.transition,this.isNumber=!1,this.noNeg=e.noNeg||!1,this.allEqual=e.allEqual||!1,this.mono=!1,this.isEdit=!1,this.simple=e.simple||!1,this.simple&&(this.sa=0),this.setSize(this.w),void 0!==e.sa&&(this.sa=e.sa),void 0!==e.sb&&(this.sb=e.sb),this.simple&&(this.sb=this.w-this.sa),this.sc=void 0===e.sc?47:e.sc,this.objectLink=null,this.isSend=!1,this.objectKey=null,this.txt=e.name||"",this.name=e.rename||this.txt,this.target=e.target||null,this.callback=void 0===e.callback?null:e.callback,this.endCallback=null,this.openCallback=void 0===e.openCallback?null:e.openCallback,this.closeCallback=void 0===e.closeCallback?null:e.closeCallback,null===this.callback&&this.isUI&&null!==this.main.callback&&(this.callback=this.group?this.group.callback:this.main.callback),this.c=[],this.s=[],this.useFlex=!!this.isUI&&this.main.useFlex;let t=this.useFlex?"display:flex; justify-content:center; align-items:center; text-align:center; flex: 1 100%;":"float:left;";this.c[0]=d.dom("div",this.css.basic+t+"position:relative; height:20px;"),this.s[0]=this.c[0].style,this.margin=this.colors.sy,this.mtop=0;let i=d.isDivid(this.margin);if(this.isUI&&this.margin&&(this.s[0].boxSizing="content-box",i?(this.mtop=.5*this.margin,this.s[0].borderTop=this.mtop+"px solid transparent",this.s[0].borderBottom=this.mtop+"px solid transparent"):this.s[0].borderBottom=NaN),this.simple||(this.c[1]=d.dom("div",this.css.txt+this.css.middle),this.s[1]=this.c[1].style,this.c[1].textContent=this.name,this.s[1].color=this.lock?this.colors.titleoff:this.colors.title),e.pos){this.s[0].position="absolute";for(let t in e.pos)this.s[0][t]=e.pos[t];this.mono=!0}e.css&&(this.s[0].cssText=e.css)}init(){this.ytop=this.top+this.mtop,this.zone.h=this.h+this.margin,this.zone.w=this.w;let e=this.s,t=this.c;e[0].height=this.h+"px",this.isUI&&(e[0].background=this.colors.background),!this.autoWidth&&this.useFlex?(e[0].flex="1 0 auto",e[0].minWidth=this.minw+"px",e[0].textAlign="center"):this.isUI&&(e[0].width="100%"),void 0!==t[1]&&this.autoWidth&&(e[1]=t[1].style,e[1].top="1px",e[1].height=this.h-2+"px");let i=d.frag;for(let s=1,n=t.length;s!==n;s++)void 0!==t[s]&&(i.appendChild(t[s]),e[s]=t[s].style);let s=null!==this.target?this.target:this.isUI?this.main.inner:document.body;this.ontop?s.insertAdjacentElement("afterbegin",t[0]):s.appendChild(t[0]),t[0].appendChild(i),this.rSize(),this.isUI||(this.c[0].style.pointerEvents="auto",h.add(this))}addTransition(){this.baseH&&this.transition&&this.isUI&&(this.c[0].style.transition="height "+this.transition+"s ease-out")}dom(e,t,i,s,n){return d.dom(e,t,i,s,n)}setSvg(e,t,i,s,n){d.setSvg(e,t,i,s,n)}setCss(e,t){d.setCss(e,t)}clamp(e,t,i){return d.clamp(e,t,i)}getColorRing(){return d.colorRing||d.makeColorRing(),d.clone(d.colorRing)}getJoystick(e){return d["joystick_"+e]||d.makeJoystick(e),d.clone(d["joystick_"+e])}getCircular(e){return d.circular||d.makeCircular(e),d.clone(d.circular)}getKnob(e){return d.knob||d.makeKnob(e),d.clone(d.knob)}getPad2d(e){return d.pad2d||d.makePad(e),d.clone(d.pad2d)}cursor(e){h.cursor(e)}update(){}reset(){}appendChild(e){this.c[0].appendChild(e)}content(){return this.c[0]}getDom(){return this.c[0]}uiout(){this.lock||this.overEffect&&(this.isGroup||this.isTitle||this.s&&(this.s[0].background=this.colors.background))}uiover(){this.lock||this.overEffect&&(this.isGroup||this.isTitle||this.s&&(this.s[0].background=this.colors.backgroundOver))}rename(e){void 0!==this.c[1]&&(this.c[1].textContent=e)}listen(){return this.isListen=h.addListen(this),this}listening(){null!==this.objectLink&&(this.isSend||this.isEdit||this.setValue(this.objectLink[this.objectKey]))}setValue(e){this.isNumber?this.value=this.numValue(e):this.value=e,this.update()}onChange(e){if(!this.isSpace)return this.callback=e||null,this}onFinishChange(e){if(!this.isSpace)return this.callback=null,this.endCallback=e,this}onOpen(e){return this.openCallback=e,this}onClose(e){return this.closeCallback=e,this}send(e){(e=e||this.value)instanceof Array&&1===e.length&&(e=e[0]),this.isSend=!0,null!==this.objectLink&&(this.objectLink[this.objectKey]&&this.objectLink[this.objectKey].isColor?this.objectLink[this.objectKey].setHex(e):this.objectLink[this.objectKey]=e),this.callback&&this.callback(e,this.objectKey),this.isSend=!1}sendEnd(e){(e=e||this.value)instanceof Array&&1===e.length&&(e=e[0]),this.endCallback&&this.endCallback(e),null!==this.objectLink&&(this.objectLink[this.objectKey]=e)}dispose(){this.isListen&&h.removeListen(this),d.clear(this.c[0]),null!==this.target?null!==this.group?this.group.clearOne(this):this.target.removeChild(this.c[0]):this.isUI?this.main.clearOne(this):document.body.removeChild(this.c[0]),this.isUI||h.remove(this),this.c=null,this.s=null,this.callback=null,this.target=null,this.isListen=!1}clear(){}getWidth(){let e=h.getWidth(this);e&&(this.w=e)}setSize(e){if(this.autoWidth)if(this.w=e,this.simple)this.sb=this.w-this.sa;else{let e=this.w*(this.p/100);this.sa=Math.floor(e+8),this.sb=Math.floor(this.w-e-16)}}rSize(){this.autoWidth&&(this.isUI||(this.s[0].width=this.w+"px"),this.simple||(this.s[1].width=this.sa+"px"))}setTypeNumber(e){let t;switch(this.isNumber=!0,this.value=0,void 0!==e.value&&("string"==typeof e.value?this.value=1*e.value:this.value=e.value),this.min=void 0===e.min?-1/0:e.min,this.max=void 0===e.max?1/0:e.max,this.precision=void 0===e.precision?2:e.precision,this.precision){case 0:t=1;break;case 1:t=.1;break;case 2:t=.01;break;case 3:t=.001;break;case 4:t=1e-4;break;case 5:t=1e-5;break;case 6:t=1e-6}this.step=void 0===e.step?t:e.step,this.range=this.max-this.min,this.value=this.numValue(this.value)}numValue(e){return this.noNeg&&(e=Math.abs(e)),1*Math.min(this.max,Math.max(this.min,e)).toFixed(this.precision)}handleEvent(e){if(!this.lock)return this.neverlock&&(h.lock=!1),this[e.type]?this[e.type](e):console.error(e.type,"this type of event no existe !")}wheel(e){return!1}mousedown(e){return!1}mousemove(e){return!1}mouseup(e){return!1}keydown(e){return!1}keyup(e){return!1}setReferency(e,t){this.objectLink=e,this.objectKey=t}display(e=!1){this.s[0].visibility=e?"visible":"hidden"}open(){this.isOpen||(this.isOpen=!0,h.needResize=!0,this.openCallback&&this.openCallback())}close(){this.isOpen&&(this.isOpen=!1,h.needResize=!0,this.closeCallback&&this.closeCallback())}needZone(){h.needReZone=!0}rezone(){h.needReZone=!0}select(){}unselect(){}setInput(e){h.setInput(e,this)}upInput(e,t){return h.upInput(e,t)}selected(e){this.isSelect=e||!1}},g=class extends f{constructor(e={}){super(e),this.value=e.value||!1,this.model=void 0!==e.mode?e.mode:0,this.onName=e.rename||this.txt,e.onName&&(e.onname=e.onName),e.onname&&(this.onName=e.onname),this.inh=e.inh||Math.floor(.8*this.h),this.inw=e.inw||36;let t=this.colors;if(0===this.model){let e=Math.floor(.5*this.h)-.5*(this.inh-2);this.c[2]=this.dom("div",this.css.basic+"background:"+t.inputBg+"; height:"+(this.inh-2)+"px; width:"+this.inw+"px; top:"+e+"px; border-radius:10px; border:2px solid "+t.back),this.c[3]=this.dom("div",this.css.basic+"height:"+(this.inh-6)+"px; width:16px; top:"+(e+2)+"px; border-radius:10px; background:"+t.button+";")}else this.p=0,void 0!==this.c[1]&&(this.c[1].textContent=""),this.c[2]=this.dom("div",this.css.txt+this.css.button+"top:1px; background:"+t.button+"; height:"+(this.h-2)+"px; border:"+t.borderSize+"px solid "+t.border+"; border-radius:"+this.radius+"px;");this.stat=-1,this.init(),this.update()}mousedown(e){return this.value=!this.value,this.update(!0),this.mousemove(e)}mousemove(e){return this.cursor("pointer"),this.mode(!0)}reset(){return this.cursor(),this.mode()}mode(e){let t,i=!1,s=this.colors,n=this.s,r=this.value;if(t=e?r?4:3:r?2:1,this.stat!==t){if(this.stat=t,0!==this.model){switch(t){case 1:n[2].color=s.text,n[2].background=s.button;break;case 2:n[2].color=s.textSelect,n[2].background=s.select;break;case 3:n[2].color=s.textOver,n[2].background=s.overoff;break;case 4:n[2].color=s.textOver,n[2].background=s.over}this.c[2].innerHTML=r?this.onName:this.name}else{switch(t){case 1:n[2].background=n[2].borderColor=s.backoff,n[3].background=s.button;break;case 2:n[2].background=n[2].borderColor=s.back,n[3].background=s.textOver;break;case 3:n[2].background=n[2].borderColor=s.back,n[3].background=s.overoff;break;case 4:n[2].background=n[2].borderColor=s.backoff,n[3].background=s.textSelect}n[3].marginLeft=r?"17px":"2px",this.c[1].textContent=r?this.onName:this.name}i=!0}return i}update(e){this.mode(),e&&this.send()}rSize(){super.rSize();let e=this.s,t=this.w-10-this.inw;0===this.model?(e[2].left=t+"px",e[3].left=t+"px"):(e[2].left=this.sa+"px",e[2].width=this.sb+"px")}},A=class extends f{constructor(e={}){super(e),this.value="",void 0!==e.value&&(this.value=e.value),this.values=e.value||this.txt,e.values&&(this.values=e.values),e.values||e.value||(this.txt=""),this.onName=e.onName||null,this.on=!1,this.bw=e.forceWidth||0,e.bw&&(this.bw=e.bw),this.space=e.space||3,"string"==typeof this.values&&(this.values=[this.values]),this.isDown=!1,this.neverlock=!0,this.res=0,this.lng=this.values.length,this.tmp=[],this.stat=[];let t,i=this.colors;for(let e=0;e<this.lng;e++)t=!1,this.values[e]===this.value&&this.isSelectable&&(t=!0),this.c[e+2]=this.dom("div",this.css.txt+this.css.button+"top:1px; height:"+(this.h-2)+"px; border:"+i.borderSize+"px solid "+i.border+"; border-radius:"+this.radius+"px;"),this.c[e+2].style.background=t?i.select:i.button,this.c[e+2].style.color=t?i.textSelect:i.text,this.c[e+2].innerHTML=this.values[e],this.stat[e]=t?3:1;""===this.txt&&(this.p=0),(e.value||e.values)&&0!==this.p||void 0!==this.c[1]&&(this.c[1].textContent=""),this.init()}onOff(){this.on=!this.on,this.label(this.on?this.onName:this.value)}testZone(e){let t=this.local;if(-1===t.x&&-1===t.y)return-1;let i=this.lng,s=this.tmp;for(;i--;)if(t.x>s[i][0]&&t.x<s[i][2])return i;return-1}mouseup(e){return!!this.isDown&&(this.isDown=!1,-1!==this.res&&(this.value===this.values[this.res]&&this.unselectable?this.value="":this.value=this.values[this.res],null!==this.onName&&this.onOff(),this.send()),this.mousemove(e))}mousedown(e){return!this.isDown&&(this.isDown=!0,this.mousemove(e))}mousemove(e){let t=!1;return this.res=this.testZone(e),-1!==this.res?(this.cursor("pointer"),t=this.modes(this.isDown?3:2,this.res)):t=this.reset(),t}modes(e=1,t=-1){let i,s,n=this.lng,r=!1;for(;n--;)s=e,i=!!this.isSelectable&&this.values[n]===this.value,n===t?i&&2===s&&(s=3):(s=1,i&&(s=4)),r=this.mode(s,n);return r}mode(e,t){let i=!1,s=this.colors,n=this.s,r=t+2;if(this.stat[t]!==e){switch(this.stat[t]=e,e){case 1:n[r].color=s.text,n[r].background=s.button;break;case 2:n[r].color=s.textOver,n[r].background=s.overoff;break;case 3:n[r].color=s.textOver,n[r].background=s.over;break;case 4:n[r].color=s.textSelect,n[r].background=s.select}i=!0}return i}reset(){return this.res=-1,this.cursor(),this.modes()}label(e,t){t=t||2,this.c[t].textContent=e}switchValues(e,t){this.c[e+2].innerHTML=this.values[e]=t}icon(e,t=0,i=2){return this.s[i].padding=t+"px 0px",this.c[i].innerHTML=e,this}rSize(){super.rSize();let e=this.s,t=this.sb,i=this.sa,s=this.lng,n=this.colors.sx,r=(t-n*(s-1))/s;for(this.bw&&(r=this.bw<r?this.bw:r,i=.5*(this.w-(r*s+n*(s-1))));s--;)this.tmp[s]=[i+r*s+n*s,r],this.tmp[s][2]=this.tmp[s][0]+this.tmp[s][1],e[s+2].left=this.tmp[s][0]+"px",e[s+2].width=this.tmp[s][1]+"px"}},b=class extends f{constructor(e={}){super(e),this.isCyclic=e.cyclic||!1,this.model=e.stype||0,void 0!==e.mode&&(this.model=e.mode),this.autoWidth=!1,this.minw=this.w,this.diam=e.diam||this.w,this.setTypeNumber(e),this.twoPi=d.TwoPI,this.pi90=d.pi90,this.offset=new p,this.h=e.h||this.w+10,this.c[0].style.width=this.w+"px",this.c[0].style.display="block",void 0!==this.c[1]&&(this.c[1].style.width="100%",this.c[1].style.justifyContent="center",this.top=10,this.h+=10),this.percent=0,this.cmode=0;let t=this.colors;this.c[2]=this.dom("div",this.css.txt+"justify-content:center; top:"+(this.h-20)+"px; width:100%; color:"+t.text),this.c[3]=this.getCircular(),this.setSvg(this.c[3],"stroke",t.back,0),this.setSvg(this.c[3],"d",this.makePath(),1),this.setSvg(this.c[3],"stroke",t.text,1),this.setSvg(this.c[3],"viewBox","0 0 "+this.diam+" "+this.diam),this.setCss(this.c[3],{width:this.diam,height:this.diam,left:0,top:this.top}),this.init(),this.update()}mode(e){if(this.cmode===e)return!1;let t,i=this.colors;switch(e){case 0:this.s[2].color=i.text,this.setSvg(this.c[3],"stroke",i.back,0),t=this.model>0?d.pack(d.lerpColor(d.unpack(d.ColorLuma(i.text,-.75)),d.unpack(i.text),this.percent)):i.text,this.setSvg(this.c[3],"stroke",t,1);break;case 1:this.s[2].color=i.textOver,this.setSvg(this.c[3],"stroke",i.backoff,0),t=this.model>0?d.pack(d.lerpColor(d.unpack(d.ColorLuma(i.text,-.75)),d.unpack(i.text),this.percent)):i.textOver,this.setSvg(this.c[3],"stroke",t,1)}return this.cmode=e,!0}reset(){this.isDown=!1}testZone(e){let t=this.local;return-1===t.x&&-1===t.y?"":t.y<=this.c[1].offsetHeight?"title":t.y>this.h-this.c[2].offsetHeight?"text":"circular"}mouseup(e){return this.isDown=!1,this.sendEnd(),this.mode(0)}mousedown(e){return this.isDown=!0,this.old=this.value,this.oldr=null,this.mousemove(e),this.mode(1)}mousemove(e){if(!this.isDown)return;let t=this.offset;if(t.x=.5*this.w-(e.clientX-this.zone.x),t.y=.5*this.diam-(e.clientY-this.zone.y-this.ytop),this.r=t.angle()-this.pi90,this.r=(this.r%this.twoPi+this.twoPi)%this.twoPi,null!==this.oldr){let e=this.r-this.oldr;this.r=Math.abs(e)>Math.PI?this.oldr:this.r,e>6&&(this.r=0),e<-6&&(this.r=this.twoPi)}let i=1/this.twoPi,s=this.r*i,n=this.range*s+this.min-this.old;(n>=this.step||n<=this.step)&&(n=~~(n/this.step),this.value=this.numValue(this.old+n*this.step),this.update(!0),this.old=this.value,this.oldr=this.r)}wheel(e){if("circular"===this.testZone(e)){let t=this.value-this.step*e.delta;return t>this.max?t=this.isCyclic?this.min:this.max:t<this.min&&(t=this.isCyclic?this.max:this.min),this.setValue(t),this.old=t,this.update(!0),!0}return!1}makePath(){let e=this.percent*this.twoPi-.001,t=40+40*Math.sin(e)+24,i=40-40*Math.cos(e)+24;return"M 64,24 A 40,40 0 "+(e>Math.PI?1:0)+" 1 "+t+","+i}update(e){if(this.c[2].textContent=this.value,this.percent=(this.value-this.min)/this.range,this.setSvg(this.c[3],"d",this.makePath(),1),this.model>0){let e=this.colors,t=d.pack(d.lerpColor(d.unpack(d.ColorLuma(e.text,-.75)),d.unpack(e.text),this.percent));this.setSvg(this.c[3],"stroke",t,1)}e&&this.send()}},v=class extends f{constructor(e={}){super(e),this.ctype=e.ctype||"hex",this.wfixe=256,this.cw=this.sb>256?256:this.sb,null!=e.cw&&(this.cw=e.cw),this.side=e.side||"down",this.up="down"===this.side?0:1,this.baseH=this.h,this.offset=new p,this.decal=new p,this.pp=new p;let t=this.colors;this.c[2]=this.dom("div",`${this.css.txt} ${this.css.middle} top:1px; height:${this.h-2}px; border-radius:${this.radius}px; text-shadow:none; border:${t.borderSize}px solid ${t.border};`),this.c[0].style.display="block",this.c[3]=this.getColorRing(),this.c[3].style.visibility="hidden",this.hsl=null,this.value="#ffffff",void 0!==e.value&&(e.value.isColor?this.value="#"+e.value.getHexString():e.value instanceof Array?this.value=d.rgbToHex(e.value):isNaN(e.value)?this.value=e.value:this.value=d.hexToHtml(e.value)),this.bcolor=null,this.isDown=!1,this.fistDown=!1,this.notext=e.notext||!1,this.tr=98,this.tsl=Math.sqrt(3)*this.tr,this.hue=0,this.d=256,this.init(),this.setColor(this.value),void 0!==e.open&&this.open()}testZone(e,t){let i=this.local;return-1===i.x&&-1===i.y?"":this.up&&this.isOpen?i.y>this.wfixe?"title":"color":i.y<this.baseH+2?"title":this.isOpen?"color":void 0}mouseup(e){this.isDown=!1,this.d=256}mousedown(e){let t=this.testZone(e.clientX,e.clientY);if("title"===t)return this.isOpen?this.close():this.open(),!0;"color"===t&&(this.isDown=!0,this.fistDown=!0,this.mousemove(e))}mousemove(e){let t,i,s,n,r,o,a,l,h,c=this.testZone(e.clientX,e.clientY),u=d;if("title"===c&&this.cursor("pointer"),"color"===c&&(t=this.offset,t.x=e.clientX-(this.zone.x+this.decal.x+this.mid),t.y=e.clientY-(this.zone.y+this.decal.y+this.mid)-this.ytop,i=t.length()*this.ratio,h=t.angle(),h<0&&(h+=2*u.PI),i<128?this.cursor("crosshair"):this.isDown||this.cursor(),this.isDown&&(this.fistDown&&(this.d=i,this.fistDown=!1),this.d<128)))if(this.d>this.tr)s=(h+u.pi90)/u.TwoPI,this.hue=(s+1)%1,this.setHSL([(s+1)%1,this.hsl[1],this.hsl[2]]);else{a=t.x*this.ratio,l=t.y*this.ratio;let e=this.hue*u.TwoPI+u.PI;e<0&&(e+=2*u.PI),o=Math.atan2(-l,a),o<0&&(o+=2*u.PI);let i=(o+u.pi90+u.TwoPI+e)%u.TwoPI,s=i%(2/3*u.PI)-u.pi60,h=.5*this.tr,c=Math.tan(s)*h,d=Math.sqrt(a*a+l*l),p=Math.sqrt(h*h+c*c);if(d>p){let t=Math.tan(s)*d,n=Math.atan(t/p);n>u.pi60?n=u.pi60:n<-u.pi60&&(n=-u.pi60),o+=n-s,i=(o+u.pi90+u.TwoPI+e)%u.TwoPI,s=i%(2/3*u.PI)-u.pi60,c=Math.tan(s)*h,d=p=Math.sqrt(h*h+c*c)}r=Math.sin(i)*d/this.tsl+.5;let f=1-2*Math.abs(r-.5);n=(Math.cos(i)*d+this.tr/2)/(1.5*this.tr)/f,n=u.clamp(n,0,1),this.setHSL([this.hsl[0],n,r])}}setHeight(){this.h=this.isOpen?this.wfixe+this.baseH+5:this.baseH,this.s[0].height=this.h+"px",this.zone.h=this.h}parentHeight(e){null!==this.group?this.group.calc(e):this.isUI&&this.main.calc(e)}open(){super.open(),this.setHeight(),this.up&&(this.zone.y-=this.wfixe+5);let e=this.h-this.baseH;this.s[3].visibility="visible",this.parentHeight(e)}close(){super.close(),this.up&&(this.zone.y+=this.wfixe+5);let e=this.h-this.baseH;this.setHeight(),this.s[3].visibility="hidden",this.parentHeight(-e)}update(e){let t=d.rgbToHex(d.hslToRgb([this.hsl[0],1,.5]));this.moveMarkers(),this.value=this.bcolor,this.setSvg(this.c[3],"fill",t,2,0),this.s[2].background=this.bcolor,this.notext||(this.c[2].textContent=d.htmlToHex(this.bcolor)),this.invert=d.findDeepInver(this.rgb),this.s[2].color=this.invert?"#fff":"#000",e&&("array"===this.ctype&&this.send(this.rgb),"rgb"===this.ctype&&this.send(d.htmlRgb(this.rgb)),"hex"===this.ctype&&this.send(d.htmlToHex(this.value)),"html"===this.ctype&&this.send())}setValue(e){e instanceof Array?this.value=d.rgbToHex(e):isNaN(e)?this.value=e:this.value=d.hexToHtml(e),this.setColor(this.value),this.update()}setColor(e){let t=d.unpack(e);return this.bcolor!==e&&t&&(this.bcolor=e,this.rgb=t,this.hsl=d.rgbToHsl(this.rgb),this.hue=this.hsl[0],this.update()),this}setHSL(e){return this.hsl=e,this.rgb=d.hslToRgb(e),this.bcolor=d.rgbToHex(this.rgb),this.update(!0),this}moveMarkers(){let e=this.pp,t=d;this.invert;let i=this.hsl[0]*t.TwoPI,s=2/3*t.PI,n=this.tr,r=this.hsl[0],o=this.hsl[1],a=this.hsl[2],l=(i-t.pi90)*t.todeg;r=-i+t.pi90;let h=Math.cos(r)*n,c=-Math.sin(r)*n,u=Math.cos(r-s)*n,p=-Math.sin(r-s)*n,f=Math.cos(r+s)*n,m=-Math.sin(r+s)*n,g=(u+f)/2,A=(p+m)/2;i=(1-2*Math.abs(a-.5))*o;let b=u+(f-u)*a+(h-g)*i,v=p+(m-p)*a+(c-A)*i;e.set(b,v).addScalar(128),this.setSvg(this.c[3],"transform","rotate("+l+" )",2),this.setSvg(this.c[3],"cx",e.x,3),this.setSvg(this.c[3],"cy",e.y,3),this.setSvg(this.c[3],"stroke",this.invert?"#fff":"#000",2,3),this.setSvg(this.c[3],"stroke",this.invert?"#fff":"#000",3),this.setSvg(this.c[3],"fill",this.bcolor,3)}rSize(){super.rSize();let e=this.s;e[2].width=this.sb+"px",e[2].left=this.sa+"px",this.cw=this.sb>256?256:this.sb,this.rSizeColor(this.cw),this.decal.x=Math.floor(.5*(this.w-this.wfixe))}rSizeColor(e){if(e===this.wfixe)return;this.wfixe=e;let t=this.s;this.decal.y="up"===this.side?2:this.baseH+2,this.mid=Math.floor(.5*this.wfixe),this.setSvg(this.c[3],"viewBox","0 0 "+this.wfixe+" "+this.wfixe),t[3].width=this.wfixe+"px",t[3].height=this.wfixe+"px",t[3].top=this.decal.y+"px",this.ratio=256/this.wfixe,this.square=1/(this.wfixe/256*60),this.setHeight()}},y=class extends f{constructor(e={}){super(e),this.round=Math.round,this.baseH=this.h,this.hplus=e.hplus||50,this.res=e.res||40,this.l=1,this.precision=e.precision||0,this.custom=e.custom||!1,this.names=e.names||["FPS","MS"];let t=e.cc||["220,220,220","255,255,0"];this.adding=e.adding||!1,this.range=e.range||[165,100,100],this.alpha=e.alpha||.25,this.values=[],this.points=[],this.textDisplay=[],this.custom||(this.now=h.getTime(),this.startTime=0,this.prevTime=0,this.frames=0,this.ms=0,this.fps=0,this.mem=0,this.mm=0,this.isMem=!(!self.performance||!self.performance.memory),this.isMem&&(this.names.push("MEM"),t.push("0,255,255")),this.txt=e.name||"Fps");let i=Math.floor(.5*this.h)-3;const s=this.colors;this.c[1].textContent=this.txt,this.c[0].style.cursor="pointer",this.c[0].style.pointerEvents="auto";let n="display:none; left:10px; top:"+this.h+"px; height:"+(this.hplus-8)+"px; box-sizing:border-box; background: rgba(0, 0, 0, 0.2); border:1px solid "+s.border+";";0!==this.radius&&(n+="border-radius:"+this.radius+"px;"),this.c[2]=this.dom("path",this.css.basic+n,{}),this.c[2].setAttribute("viewBox","0 0 "+this.res+" 50"),this.c[2].setAttribute("height","100%"),this.c[2].setAttribute("width","100%"),this.c[2].setAttribute("preserveAspectRatio","none"),this.c[3]=this.dom("path",this.css.basic+"position:absolute; width:6px; height:6px; left:0; top:"+i+"px;",{d:this.svgs.g1,fill:s.text,stroke:"none"}),this.c[4]=this.dom("div",this.css.txt+"position:absolute; left:10px; top:"+(this.h+2)+"px; display:none; width:100%; text-align:center;"),e.bottomLine&&(this.c[4]=this.dom("div",this.css.basic+"width:100%; bottom:0px; height:1px; background: rgba(255, 255, 255, 0.2);")),this.isShow=!1;let r=this.s;r[1].lineHeight=this.h-4,r[1].color=s.text,0!==this.radius&&(r[0].borderRadius=this.radius+"px"),"none"!==this.colors.gborder&&(r[0].border="1px solid "+s.gborder);let o=0;for(o=0;o<this.names.length;o++){let e=[],i=this.res+1;for(;i--;)e.push(50);this.range[o]=1/this.range[o]*49,this.points.push(e),this.values.push(0),this.textDisplay.push("<span style='color:rgb("+t[o]+")'> "+this.names[o]+" ")}for(o=this.names.length;o--;)this.dom("path",null,{fill:"rgba("+t[o]+","+this.alpha+")","stroke-width":1,stroke:"rgba("+t[o]+",1)","vector-effect":"non-scaling-stroke"},this.c[2]);this.init()}mousedown(e){this.isShow?this.close():this.open()}tick(e){this.values=e,this.isShow&&(this.drawGraph(),this.upText())}makePath(e){let t="";t+="M -1 50";for(let i=0;i<this.res+1;i++)t+=" L "+i+" "+e[i];return t+=" L "+(this.res+1)+" 50",t}upText(e){let t=e||this.values,i="";for(let e=0,s=this.names.length;e<s;e++)i+=this.textDisplay[e]+t[e].toFixed(this.precision)+"</span>";this.c[4].innerHTML=i}drawGraph(){let e,t=this.c[2],i=this.names.length,s=0,n=0;for(;i--;)e=this.adding?(this.values[n]+s)*this.range[n]:this.values[n]*this.range[n],this.points[n].shift(),this.points[n].push(50-e),this.setSvg(t,"d",this.makePath(this.points[n]),i+1),s+=this.values[n],n++}open(){super.open(),this.h=this.hplus+this.baseH,this.setSvg(this.c[3],"d",this.svgs.g2),null!==this.group?this.group.calc(this.hplus):this.isUI&&this.main.calc(this.hplus),this.s[0].height=this.h+"px",this.s[2].display="block",this.s[4].display="block",this.isShow=!0,this.custom||h.addListen(this)}close(){super.close(),this.h=this.baseH,this.setSvg(this.c[3],"d",this.svgs.g1),null!==this.group?this.group.calc(-this.hplus):this.isUI&&this.main.calc(-this.hplus),this.s[0].height=this.h+"px",this.s[2].display="none",this.s[4].display="none",this.isShow=!1,this.custom||h.removeListen(this),this.c[4].innerHTML=""}begin(){this.startTime=this.now()}end(){let e=this.now();if(this.ms=e-this.startTime,this.frames++,e>this.prevTime+1e3&&(this.fps=this.round(1e3*this.frames/(e-this.prevTime)),this.prevTime=e,this.frames=0,this.isMem)){let e=performance.memory.usedJSHeapSize,t=performance.memory.jsHeapSizeLimit;this.mem=this.round(954e-9*e),this.mm=e/t}return this.values=[this.fps,this.ms,this.mm],this.drawGraph(),this.upText([this.fps,this.ms,this.mem]),e}listening(){this.custom||(this.startTime=this.end())}rSize(){let e=this.s,t=this.w;e[3].left=this.sa+this.sb-6+"px",e[0].width=t+"px",e[1].width=t+"px",e[2].left="10px",e[2].width=t-20+"px",e[4].width=t-20+"px"}},w=class extends f{constructor(e={}){super(e),this.value=void 0!==e.value?e.value:[0,0,0],this.lng=this.value.length,this.precision=void 0!==e.precision?e.precision:2,this.multiplicator=e.multiplicator||1,this.neg=e.neg||!1,this.line=void 0===e.line||e.line,this.autoWidth=void 0===e.autoWidth||e.autoWidth,this.isNumber=!1,this.isDown=!1,this.h=e.h||138,this.rh=this.h-10,this.top=0,this.c[0].style.width=this.w+"px",void 0!==this.c[1]&&(this.c[1].style.width=this.w+"px",this.autoWidth||(this.c[1].style.width="100%",this.c[1].style.justifyContent="center"),this.top=10,this.h+=10),this.gh=this.rh-28,this.gw=this.w-28,this.c[2]=this.dom("div",this.css.txt+"display:block; text-align:center; padding:0px 0px; top:"+(this.h-20)+"px; left:14px; width:"+this.gw+"px;  color:"+this.colors.text),this.c[2].innerHTML=this.valueToHtml();let t=this.dom("svg",this.css.basic,{viewBox:"0 0 "+this.w+" "+this.rh,width:this.w,height:this.rh,preserveAspectRatio:"none"});this.setCss(t,{width:this.w,height:this.rh,left:0,top:this.top}),this.dom("path","",{d:"",stroke:this.colors.text,"stroke-width":2,fill:"none","stroke-linecap":"butt"},t),this.dom("rect","",{x:10,y:10,width:this.gw+8,height:this.gh+8,stroke:"rgba(0,0,0,0.3)","stroke-width":1,fill:"none"},t),this.iw=(this.gw-4*(this.lng-1))/this.lng;let i=[];this.cMode=[],this.v=[];for(let e=0;e<this.lng;e++)i[e]=[14+e*this.iw+4*e,this.iw],i[e][2]=i[e][0]+i[e][1],this.cMode[e]=0,this.neg?this.v[e]=.5*(1+this.value[e]/this.multiplicator):this.v[e]=this.value[e]/this.multiplicator,this.dom("rect","",{x:i[e][0],y:14,width:i[e][1],height:1,fill:this.colors.text,"fill-opacity":.3},t);this.tmp=i,this.c[3]=t,this.init(),void 0!==this.c[1]&&(this.c[1].style.top="0px",this.c[1].style.height="20px",this.s[1].lineHeight="15px"),this.update(!1)}setValue(e){this.value=e,this.lng=this.value.length;for(var t=0;t<this.lng;t++)this.neg?this.v[t]=.5*(1+e[t]/this.multiplicator):this.v[t]=e[t]/this.multiplicator;this.update()}valueToHtml(){let e=this.lng,t=0,i='<table style="width:100%;"><tr>',s="width:"+100/this.lng+"%;";for(;e--;)t===this.lng-1?i+="<td style="+s+">"+this.value[t]+"</td></tr></table>":i+="<td style="+s+">"+this.value[t]+"</td>",t++;return i}updateSVG(){this.line&&this.setSvg(this.c[3],"d",this.makePath(),0);for(let e=0;e<this.lng;e++)this.setSvg(this.c[3],"height",this.v[e]*this.gh,e+2),this.setSvg(this.c[3],"y",this.gh-this.v[e]*this.gh+14,e+2),this.neg?this.value[e]=1*((2*this.v[e]-1)*this.multiplicator).toFixed(this.precision):this.value[e]=1*(this.v[e]*this.multiplicator).toFixed(this.precision);this.c[2].innerHTML=this.valueToHtml()}testZone(e){let t=this.local;if(-1===t.x&&-1===t.y)return"";let i=this.lng,s=this.tmp;if(t.y>this.top&&t.y<this.h-20)for(;i--;)if(t.x>s[i][0]&&t.x<s[i][2])return i;return""}mode(e,t){if(e===this.cMode[t])return!1;let i;switch(e){case 0:i=.3;break;case 1:i=.6;break;case 2:i=1}return this.reset(),this.setSvg(this.c[3],"fill-opacity",i,t+2),this.cMode[t]=e,!0}reset(){let e=!1,t=this.lng;for(;t--;)0!==this.cMode[t]&&(this.cMode[t]=0,this.setSvg(this.c[3],"fill-opacity",.3,t+2),e=!0);return e}mouseup(e){if(this.isDown=!1,-1!==this.current)return this.reset()}mousedown(e){return this.isDown=!0,this.mousemove(e)}mousemove(e){let t=!1,i=this.testZone(e);return""===i?t=this.reset():(t=this.mode(this.isDown?2:1,i),this.isDown&&(this.v[i]=this.clamp(1-(e.clientY-this.zone.y-this.ytop-10)/this.gh,0,1),this.update(!0))),t}update(e){this.updateSVG(),e&&this.send()}makePath(){let e,t,i,s,n,r,o="";for(let a=0;a<this.lng;a++)e=this.gh-this.v[a]*this.gh+14,t=14+a*this.iw+4*a,s=t+.5*this.iw,i=t+this.iw,o+=0===a?"M "+t+" "+e+" T "+s+" "+e:" C "+n+" "+r+","+t+" "+e+","+s+" "+e,a===this.lng-1&&(o+=" T "+i+" "+e),n=i,r=e;return o}rSize(){super.rSize();let e=this.s;void 0!==this.c[1]&&(e[1].width=this.w+"px"),e[3].width=this.w+"px";let t=this.w-28,i=(t-4*(this.lng-1))/this.lng,s=[];e[2].width=t+"px";for(let e=0;e<this.lng;e++)s[e]=[14+e*i+4*e,i],s[e][2]=s[e][0]+s[e][1];this.tmp=s}},x=class extends f{constructor(e={}){e.isSpace=!0,e.margin=0,e.h||(e.h=10),super(e),this.init()}},O=class extends f{constructor(e={}){super(e),this.isGroup=!0,this.ADD=e.add,this.autoHeight=!0,this.uis=[],this.current=-1,this.proto=null,this.isEmpty=!0,this.decal=e.group?8:0,this.baseH=this.h,this.radius=0;let t=Math.floor(.5*this.h)-3;const i=this.colors;this.useFlex=!0;let s=this.useFlex?"display:flex; flex-flow: row wrap;":"";this.c[2]=this.dom("div",this.css.basic+s+"width:100%; left:0;  overflow:hidden; top:"+this.h+"px"),this.c[3]=this.dom("path",this.css.basic+"position:absolute; width:6px; height:6px; left:0; top:"+t+"px;",{d:this.svgs.g1,fill:i.text,stroke:"none"}),0===this.mtop?this.margin:this.mtop,this.s,this.c[1].name="group",this.c[1].style.color=i.text,this.init(),this.setBG(e.bg),e.open&&this.open()}setBG(e){const t=this.colors,i=this.s;void 0!==e&&(t.groups=e),"none"===t.groups&&(t.groups=t.background),i[0].background=void 0!==e?"none":t.content,i[1].background=void 0!==e?t.groups:t.content,"none"!==t.gborder&&(i[1].border=t.borderSize+"px solid "+t.gborder),0!==this.radius&&(i[1].borderRadius=this.radius+"px",i[2].borderRadius=this.radius+"px")}testZone(e){let t=this.local;if(-1===t.x&&-1===t.y)return"";let i="";return t.y<this.baseH+this.margin?i="title":this.isOpen&&(i="content"),i}clearTarget(){return-1!==this.current&&(this.proto.s&&(this.proto.uiout(),this.proto.reset()),this.proto=null,this.current=-1,this.cursor(),!0)}reset(){this.clearTarget()}handleEvent(e){let t=e.type,i=!1,s=!1,n=this.testZone(e);if(n){switch(n){case"content":h.isMobile&&"mousedown"===t&&this.getNext(e,i),this.proto&&(s=this.proto.handleEvent(e)),h.lock||this.getNext(e,i);break;case"title":this.cursor("pointer"),"mousedown"===t&&(this.isOpen?this.close():this.open())}return this.isDown&&(i=!0),s&&(i=!0),i}}getNext(e,t){let i=h.findTarget(this.uis,e);i!==this.current&&(this.clearTarget(),this.current=i),-1!==i&&(this.proto=this.uis[this.current],this.proto.uiover())}add(){let e=arguments;"object"==typeof e[1]?(e[1].isUI=this.isUI,e[1].target=this.c[2],e[1].main=this.main,e[1].group=this):"string"==typeof arguments[1]&&(void 0===e[2]?[].push.call(e,{isUI:!0,target:this.c[2],main:this.main}):(e[2].isUI=!0,e[2].target=this.c[2],e[2].main=this.main,e[2].group=this));let t=this.ADD.apply(this,e);return t.isGroup&&(t.dx=8),h.forceZone=!0,this.uis.push(t),this.isEmpty=!1,t}remove(e){e.dispose&&e.dispose()}dispose(){this.clear(),this.isUI&&this.main.calc(),super.dispose()}clear(){this.empty()}empty(){this.close();let e,t=this.uis.length;for(;t--;)e=this.uis.pop(),this.c[2].removeChild(e.c[0]),e.clear(!0);this.isEmpty=!0,this.h=this.baseH}clearOne(e){let t=this.uis.indexOf(e);-1!==t&&(this.calc(-(this.uis[t].h+this.margin)),this.c[2].removeChild(this.uis[t].c[0]),this.uis.splice(t,1),0===this.uis.length&&(this.isEmpty=!0,this.close()))}open(){super.open(),this.setSvg(this.c[3],"d",this.svgs.g2),this.rSizeContent();const e=this.s,t=this.colors;e[2].top=this.h+this.mtop+"px",this.radius&&(e[1].borderRadius="0px",e[2].borderRadius="0px",e[1].borderTopLeftRadius=this.radius+"px",e[1].borderTopRightRadius=this.radius+"px",e[2].borderBottomLeftRadius=this.radius+"px",e[2].borderBottomRightRadius=this.radius+"px"),"none"!==t.gborder&&(e[4].borderLeft=t.borderSize+"px solid "+t.gborder,e[4].borderRight=t.borderSize+"px solid "+t.gborder,e[2].border=t.borderSize+"px solid "+t.gborder,e[2].borderTop="none",e[1].borderBottom=t.borderSize+"px solid rgba(0,0,0,0)"),this.parentHeight()}close(){super.close(),this.setSvg(this.c[3],"d",this.svgs.g1),this.h=this.baseH;const e=this.s,t=this.colors;e[0].height=this.h+"px",e[2].top=this.h+this.mtop+"px","none"!==t.gborder&&(e[4].border="none",e[2].border="none",e[1].border=t.borderSize+"px solid "+t.gborder),this.radius&&(e[1].borderRadius=this.radius+"px"),this.parentHeight()}calcUis(){!this.isOpen||this.isEmpty?this.h=this.baseH:this.h=h.calcUis([...this.uis],this.zone,this.zone.y+this.baseH+this.margin,!0)+this.baseH,this.s[0].height=this.h+"px",this.s[2].height=this.h-this.baseH+"px"}parentHeight(e){null!==this.group?this.group.calc(e):this.isUI&&this.main.calc(e)}calc(e){this.isOpen&&(this.isUI?this.main.calc():this.calcUis(),this.s[0].height=this.h+"px",this.s[2].height=this.h+"px")}rSizeContent(){let e=this.uis.length;for(;e--;)this.uis[e].setSize(this.w),this.uis[e].rSize()}rSize(){super.rSize();let e=this.s;this.w=this.w-this.decal,e[3].left=this.sa+this.sb-6+"px",e[1].width=this.w+"px",e[2].width=this.w+"px",e[1].left=this.decal+"px",e[2].left=this.decal+"px",this.isOpen&&this.rSizeContent()}},C=class extends f{constructor(e={}){super(e),this.autoWidth=!1,this.value=[0,0],this.minw=this.w,this.diam=e.diam||this.w,this.joyType="analogique",this.model=void 0!==e.mode?e.mode:0,this.precision=e.precision||2,this.multiplicator=e.multiplicator||1,this.pos=new p,this.tmp=new p,this.interval=null,this.c[0].style.display="block",this.haveText=void 0===e.text||e.text,this.distance=.5*this.diam*.25,this.h=e.h||this.w+(this.haveText?10:0),this.c[0].style.width=this.w+"px",void 0!==this.c[1]&&(this.c[1].style.width="100%",this.c[1].style.justifyContent="center",this.top=10,this.h+=10);let t=this.colors;this.c[2]=this.dom("div",this.css.txt+"justify-content:center; top:"+(this.h-20)+"px; width:100%; color:"+t.text),this.c[2].textContent=this.haveText?this.value:"",this.c[3]=this.getJoystick(this.model),this.setSvg(this.c[3],"viewBox","0 0 "+this.diam+" "+this.diam),this.setCss(this.c[3],{width:this.diam,height:this.diam,left:0,top:this.top}),this.mode(0),this.ratio=128/this.w,this.init(),this.update(!1)}mode(e){let t=this.colors;switch(e){case 0:0===this.model?(this.setSvg(this.c[3],"fill","url(#gradIn)",4),this.setSvg(this.c[3],"stroke","#000",4)):(this.setSvg(this.c[3],"stroke",t.joyOut,2),this.setSvg(this.c[3],"stroke",t.joyOut,4),this.setSvg(this.c[3],"fill","none",4));break;case 1:0===this.model?(this.setSvg(this.c[3],"fill","url(#gradIn2)",4),this.setSvg(this.c[3],"stroke","rgba(0,0,0,0)",4)):(this.setSvg(this.c[3],"stroke",t.joyOver,2),this.setSvg(this.c[3],"stroke",t.joySelect,4),this.setSvg(this.c[3],"fill",t.joyOver,4))}}addInterval(){null!==this.interval&&this.stopInterval(),this.pos.isZero()||(this.interval=setInterval(function(){this.update()}.bind(this),10))}stopInterval(){null!==this.interval&&(clearInterval(this.interval),this.interval=null)}reset(){this.addInterval(),this.mode(0)}mouseup(e){this.addInterval(),this.isDown=!1}mousedown(e){this.isDown=!0,this.mousemove(e),this.mode(2)}mousemove(e){if(this.mode(1),this.isDown){if(this.tmp.x=.5*this.w-(e.clientX-this.zone.x),this.tmp.y=.5*this.diam-(e.clientY-this.zone.y-this.ytop),this.tmp.length()>this.distance){let e=Math.atan2(this.tmp.x,this.tmp.y);this.tmp.x=Math.sin(e)*this.distance,this.tmp.y=Math.cos(e)*this.distance}this.pos.copy(this.tmp).divideScalar(this.distance).negate(),this.update()}}setValue(e){void 0===e&&(e=[0,0]),this.pos.set(e[0]||0,e[1]||0),this.updateSVG()}update(e){void 0===e&&(e=!0),null!==this.interval&&(this.isDown||(this.pos.lerp(null,.3),this.pos.x=Math.abs(this.pos.x)<.01?0:this.pos.x,this.pos.y=Math.abs(this.pos.y)<.01?0:this.pos.y,this.isUI&&this.main.isCanvas&&this.main.draw())),this.updateSVG(),e&&this.send(),this.pos.isZero()&&this.stopInterval()}updateSVG(){let e=.5*this.diam- -this.pos.x*this.distance,t=.5*this.diam- -this.pos.y*this.distance;if(0===this.model){let i=e+5*this.pos.x+5,s=t+5*this.pos.y+10;this.setSvg(this.c[3],"cx",i*this.ratio,3),this.setSvg(this.c[3],"cy",s*this.ratio,3)}else this.setSvg(this.c[3],"cx",e*this.ratio,3),this.setSvg(this.c[3],"cy",t*this.ratio,3);this.setSvg(this.c[3],"cx",e*this.ratio,4),this.setSvg(this.c[3],"cy",t*this.ratio,4),this.value[0]=1*(this.pos.x*this.multiplicator).toFixed(this.precision),this.value[1]=1*(this.pos.y*this.multiplicator).toFixed(this.precision),this.haveText&&(this.c[2].textContent=this.value)}clear(){this.stopInterval(),super.clear()}},S=class extends f{constructor(e={}){super(e),this.isCyclic=e.cyclic||!1,this.model=e.stype||0,void 0!==e.mode&&(this.model=e.mode),this.autoWidth=!1,this.setTypeNumber(e),this.minw=this.w,this.diam=e.diam||this.w,this.mPI=.8*Math.PI,this.toDeg=180/Math.PI,this.cirRange=2*this.mPI,this.offset=new p,this.h=e.h||this.w+10,this.c[0].style.width=this.w+"px",this.c[0].style.display="block",void 0!==this.c[1]&&(this.c[1].style.width="100%",this.c[1].style.justifyContent="center",this.top=10,this.h+=10),this.percent=0,this.cmode=0;let t=this.colors;this.c[2]=this.dom("div",this.css.txt+"justify-content:center; top:"+(this.h-20)+"px; width:100%; color:"+t.text),this.c[3]=this.getKnob(),this.setSvg(this.c[3],"fill",t.button,0),this.setSvg(this.c[3],"stroke",t.text,1),this.setSvg(this.c[3],"stroke",t.text,3),this.setSvg(this.c[3],"d",this.makeGrad(),3),this.setSvg(this.c[3],"viewBox","0 0 "+this.diam+" "+this.diam),this.setCss(this.c[3],{width:this.diam,height:this.diam,left:0,top:this.top}),this.model>0&&(d.dom("path","",{d:"",stroke:t.text,"stroke-width":2,fill:"none","stroke-linecap":"round"},this.c[3]),2==this.model&&(d.addSVGGlowEffect(),this.setSvg(this.c[3],"style",'filter: url("#UILGlow");',4))),this.r=0,this.init(),this.update()}mode(e){let t=this.colors;if(this.cmode===e)return!1;switch(e){case 0:this.s[2].color=t.text,this.setSvg(this.c[3],"fill",t.button,0),this.setSvg(this.c[3],"stroke",t.text,1);break;case 1:this.s[2].color=t.textOver,this.setSvg(this.c[3],"fill",t.select,0),this.setSvg(this.c[3],"stroke",t.textOver,1)}return this.cmode=e,!0}testZone(e){let t=this.local;return-1===t.x&&-1===t.y?"":t.y<=this.c[1].offsetHeight?"title":t.y>this.h-this.c[2].offsetHeight?"text":"knob"}mouseup(e){return this.isDown=!1,this.sendEnd(),this.mode(0)}mousedown(e){return this.isDown=!0,this.old=this.value,this.oldr=null,this.mousemove(e),this.mode(1)}mousemove(e){if(!this.isDown)return;let t=this.offset;t.x=.5*this.w-(e.clientX-this.zone.x),t.y=.5*this.diam-(e.clientY-this.zone.y-this.ytop),this.r=-Math.atan2(t.x,t.y),null!==this.oldr&&(this.r=Math.abs(this.r-this.oldr)>Math.PI?this.oldr:this.r),this.r=this.r>this.mPI?this.mPI:this.r,this.r=this.r<-this.mPI?-this.mPI:this.r;let i=1/this.cirRange,s=(this.r+this.mPI)*i,n=this.range*s+this.min-this.old;(n>=this.step||n<=this.step)&&(n=Math.floor(n/this.step),this.value=this.numValue(this.old+n*this.step),this.update(!0),this.old=this.value,this.oldr=this.r)}wheel(e){if("knob"===this.testZone(e)){let t=this.value-this.step*e.delta;return t>this.max?t=this.isCyclic?this.min:this.max:t<this.min&&(t=this.isCyclic?this.max:this.min),this.setValue(t),this.old=t,this.update(!0),!0}return!1}makeGrad(){let e,t,i,s,n,r,o,a="",l=Math.PI+this.mPI,h=Math.PI-this.mPI;this.step>5?(t=this.range/this.step,e=(l-h)/t):(e=(l-h)/64*2,t=32);for(let h=0;h<=t;++h)i=l-e*h,s=64+44*Math.sin(i),n=64+44*Math.cos(i),r=64+40*Math.sin(i),o=64+40*Math.cos(i),a+="M"+s+" "+n+" L"+r+" "+o+" ";return a}update(e){this.c[2].textContent=this.value,this.percent=(this.value-this.min)/this.range;let t=Math.PI+this.mPI,i=this.percent*this.cirRange-this.mPI,s=Math.sin(i),n=Math.cos(i),r=25*s+64,o=-25*n+64,a=20*s+64,l=-20*n+64;if(this.setSvg(this.c[3],"d","M "+r+" "+o+" L "+a+" "+l,1),this.model>0){let e=36*Math.sin(t)+64,r=36*Math.cos(t)+64,o=36*s+64,a=-36*n+64,l=i<=Math.PI-this.mPI?0:1;this.setSvg(this.c[3],"d","M "+e+","+r+" A 36,36 1 "+l+" 1 "+o+","+a,4);let h=d.pack(d.lerpColor(d.unpack(d.ColorLuma(this.colors.text,-.75)),d.unpack(this.colors.text),this.percent));this.setSvg(this.c[3],"stroke",h,4)}e&&this.send()}};class I extends f{constructor(e={}){super(e),this.hideCurrent=!1,this.path=e.path||"",this.format=e.format||"",this.isWithImage=""!==this.path,this.preLoadComplete=!1,this.tmpImage={},this.tmpUrl=[],this.m=void 0!==e.m?e.m:5;let t=e.align||"left",i=e.scrollSize||10;this.ss=i+1,this.sMode=0,this.tMode=0,this.listOnly=e.listOnly||!1,this.staticTop=e.staticTop||!1,this.isSelectable=this.listOnly,void 0!==e.select&&(e.selectable=e.select),void 0!==e.selectable&&(this.isSelectable=e.selectable),""===this.txt&&(this.p=0);let s=Math.floor(.5*this.h)-3,n=this.colors;if(this.c[2]=this.dom("div",this.css.basic+"top:0; display:none; border-radius:"+this.radius+"px;"),this.c[3]=this.dom("div",this.css.item+"padding:0px "+this.m+"px; margin-bottom:0px; position:absolute; justify-content:"+t+"; text-align:"+t+"; line-height:"+(this.h-4)+"px; top:1px; background:"+n.button+"; height:"+(this.h-2)+"px; border:1px solid "+n.border+"; border-radius:"+this.radius+"px;"),this.c[4]=this.dom("path",this.css.basic+"position:absolute; width:6px; height:6px; top:"+s+"px;",{d:this.svgs.g1,fill:n.text,stroke:"none"}),this.scrollerBack=this.dom("div",this.css.basic+"right:0px; width:"+i+"px; background:"+n.back+"; display:none;"),this.scroller=this.dom("div",this.css.basic+"right:"+.5*(i-.25*i)+"px; width:"+.25*i+"px; background:"+n.text+"; display:none; "),this.c[3].style.color=n.text,this.list=[],this.refObject=null,e.list)if(e.list instanceof Array)this.list=e.list;else if(e.list instanceof Object){this.refObject=e.list;for(let e in this.refObject)this.list.push(e)}this.items=[],this.prevName="",this.tmpId=0,this.baseH=this.h,this.itemHeight=e.itemHeight||this.h,this.full=e.full||!1,this.py=0,this.ww=this.sb,this.scroll=!1,this.isDown=!1,this.current=null,this.side=e.side||"down",this.up="down"===this.side?0:1,this.up?(this.c[2].style.top="auto",this.c[3].style.top="auto",this.c[4].style.top="auto",this.c[2].style.bottom=this.h-2+"px",this.c[3].style.bottom="1px",this.c[4].style.bottom=s+"px"):this.c[2].style.top=this.baseH+"px",this.listIn=this.dom("div",this.css.basic+"left:0; top:0; width:100%; background:none;"),this.listIn.name="list",this.topList=0,this.c[2].appendChild(this.listIn),this.c[2].appendChild(this.scrollerBack),this.c[2].appendChild(this.scroller),void 0!==e.value?isNaN(e.value)?this.value=e.value:this.value=this.list[e.value]:this.value=this.list[0],this.isOpenOnStart=e.open||!1,this.listOnly&&(this.baseH=5,this.c[3].style.display="none",this.c[4].style.display="none",this.c[2].style.top=this.baseH+"px",this.isOpenOnStart=!0),this.miniCanvas=e.miniCanvas||!1,this.canvasBg=e.canvasBg||"rgba(0,0,0,0)",this.imageSize=e.imageSize||[20,20],this.drag=e.drag||!1,this.dragout=e.dragout||!1,this.dragstart=e.dragstart||null,this.dragend=e.dragend||null,this.setList(this.list),this.init(),this.isWithImage&&this.preloadImage(),this.isOpenOnStart&&this.open(!0),this.baseH+=this.mtop}preloadImage(){this.preLoadComplete=!1,this.tmpImage={};for(let e=0;e<this.list.length;e++)this.tmpUrl.push(this.list[e]);this.loadOne()}nextImg(){null!==this.c&&(this.tmpUrl.shift(),0===this.tmpUrl.length?(this.preLoadComplete=!0,this.addImages()):this.loadOne())}loadOne(){let e=this,t=this.tmpUrl[0],i=document.createElement("img");i.style.cssText="position:absolute; width:"+e.imageSize[0]+"px; height:"+e.imageSize[1]+"px",i.setAttribute("src",this.path+t+this.format),i.addEventListener("load",(function(){e.imageSize[2]=i.width,e.imageSize[3]=i.height,e.tmpImage[t]=i,e.nextImg()}))}testZone(e){let t=this.local;if(-1===t.x&&-1===t.y)return"";if(this.up&&this.isOpen){if(t.y>this.h-this.baseH)return"title";if(this.scroll&&t.x>this.sa+this.sb-this.ss)return"scroll";if(t.x>this.sa)return this.testItems(t.y-this.baseH)}else{if(t.y<this.baseH+2)return"title";if(this.isOpen){if(this.scroll&&t.x>this.sa+this.sb-this.ss)return"scroll";if(t.x>this.sa)return this.testItems(t.y-this.baseH)}}return""}testItems(e){let t,i,s,n="",r=this.items,o=r.length;for(;o--;)if(t=r[o],i=t.posy+this.topList,s=t.posy+this.itemHeight+1+this.topList,e>=i&&e<=s)return n="item"+o,this.modeItem(0),this.current=t,this.modeItem(1),n;return n}modeItem(e){if(!this.current)return;this.current.select&&0===e&&(e=2);let t=this.colors;switch(e){case 0:this.current.style.background=t.back,this.current.style.color=t.text;break;case 1:this.current.style.background=t.over,this.current.style.color=t.textOver;break;case 2:this.current.style.background=t.select,this.current.style.color=t.textSelect}}unSelected(){this.current&&(this.modeItem(0),this.current=null)}selected(){this.current&&(this.resetItems(),this.modeItem(2),this.current.select=!0)}resetItems(){let e=this.items.length;for(;e--;)this.items[e].select=!1,this.items[e].style.background=this.colors.back,this.items[e].style.color=this.colors.text}hideActive(){this.hideCurrent&&(this.current&&(this.tmpId=this.current.id),this.resetHide())}resetHide(){console.log(this.tmpId);let e=this.items.length;for(;e--;)e===this.tmpId?(this.items[e].style.height="0px",this.items[e].posy=-1):(this.items[e].style.height=this.itemHeight+"px",this.items[e].posy=(this.itemHeight+1)*(e-1))}mouseup(e){this.isDown=!1}mousedown(e){let t=this.testZone(e);return!!t&&("scroll"===t?(this.isDown=!0,this.mousemove(e)):"title"===t?(this.modeTitle(2),this.listOnly||(this.hideActive(),this.isOpen?this.close():this.open())):this.current&&(this.value=this.list[this.current.id],this.isSelectable&&this.selected(),this.send(this.value),this.listOnly||(this.close(),this.setTopItem())),!0)}mousemove(e){let t=!1,i=this.testZone(e);if(!i)return t;if("title"===i)this.unSelected(),this.modeTitle(1),this.cursor("pointer");else if("scroll"===i){if(this.cursor("s-resize"),this.modeScroll(1),this.isDown){this.modeScroll(2);let t=this.zone.y+this.baseH-2;this.update(e.clientY-t-.5*this.sh)}}else this.modeTitle(0),this.modeScroll(0),this.cursor("pointer");return i!==this.prevName&&(t=!0),this.prevName=i,t}wheel(e){return"title"!==this.testZone(e)&&(this.py+=10*e.delta,this.update(this.py),!0)}reset(){this.prevName="",this.unSelected(),this.modeTitle(0),this.modeScroll(0)}modeScroll(e){if(e===this.sMode)return;let t=this.scroller.style,i=this.colors;switch(e){case 0:t.background=i.text;break;case 1:case 2:t.background=i.select}this.sMode=e}modeTitle(e){if(e===this.tMode)return;let t=this.s,i=this.colors;switch(e){case 0:t[3].color=i.text,t[3].background=i.button;break;case 1:t[3].color=i.textOver,t[3].background=i.overoff;break;case 2:t[3].color=i.textSelect,t[3].background=i.overoff}this.tMode=e}clearList(){for(;this.listIn.children.length;)this.listIn.removeChild(this.listIn.lastChild);this.items=[]}setList(e){this.clearList(),this.list=e,this.length=this.list.length;let t,i,s=this.hideCurrent?this.length-1:this.length;this.maxItem=this.full?s:5,this.maxItem=s<this.maxItem?s:this.maxItem,this.maxHeight=this.maxItem*(this.itemHeight+1)+2,this.max=s*(this.itemHeight+1)+2,this.ratio=this.maxHeight/this.max,this.sh=this.maxHeight*this.ratio,this.range=this.maxHeight-this.sh,this.c[2].style.height=this.maxHeight+"px",this.scrollerBack.style.height=this.maxHeight+"px",this.scroller.style.height=this.sh+"px",this.max>this.maxHeight&&(this.ww=this.sb-this.ss,this.scroll=!0),this.miniCanvas&&(this.tmpCanvas=document.createElement("canvas"),this.tmpCanvas.width=this.imageSize[0],this.tmpCanvas.height=this.imageSize[1],this.tmpCtx=this.tmpCanvas.getContext("2d"),this.tmpCtx.fillStyle=this.canvasBg,this.tmpCtx.fillRect(0,0,this.imageSize[0],this.imageSize[1]));for(let e=0;e<this.length;e++){if(i=this.list[e],t=this.dom("div",this.css.item+"padding:0px "+(this.m+1)+"px; width:"+this.ww+"px; height:"+this.itemHeight+"px; line-height:"+(this.itemHeight-2)+"px; color:"+this.colors.text+"; background:"+this.colors.back+";"),t.name="item"+e,t.id=e,t.select=!1,t.posy=(this.itemHeight+1)*e,this.listIn.appendChild(t),this.items.push(t),i===this.value&&(this.current=t),this.isWithImage||(t.textContent=i),this.miniCanvas){let e=new Image;e.src=this.tmpCanvas.toDataURL(),e.style.cssText="margin-right:4px;",t.appendChild(e),this.tmpImage[i]=e}this.dragout&&(t.img=this.tmpImage[i],t.style.pointerEvents="auto",t.draggable="true",t.addEventListener("dragstart",this.dragstart||function(){}),t.addEventListener("drag",this.drag||function(){}),t.addEventListener("dragleave",(function(){h.fakeUp()})),t.addEventListener("dragend",this.dragend||function(){}.bind(this)))}this.setTopItem(),this.isSelectable&&this.selected()}drawImage(e,t,i,s,n,r){this.tmpCtx.clearRect(0,0,this.imageSize[0],this.imageSize[1]),this.tmpCtx.drawImage(t,i,s,n,r,0,0,this.imageSize[0],this.imageSize[1]),this.tmpImage[e].src=this.tmpCanvas.toDataURL()}addImages(){let e=this.list.length;for(let t=0;t<e;t++)this.items[t].appendChild(this.tmpImage[this.list[t]]);this.setTopItem()}setValue(e){isNaN(e)?this.value=e:this.value=this.list[e],this.setTopItem()}setTopItem(){if(!this.staticTop){if(this.isWithImage){if(!this.preLoadComplete)return;this.c[3].children.length||(this.canvas=document.createElement("canvas"),this.canvas.width=this.imageSize[0],this.canvas.height=this.imageSize[1],this.canvas.style.cssText="margin-right:4px;",this.ctx=this.canvas.getContext("2d"),this.c[3].style.textAlign="left",this.c[3].style.justifyContent="left",this.c[3].appendChild(this.canvas)),this.tmpImage[this.value],this.ctx.drawImage(this.tmpImage[this.value],0,0,this.imageSize[2],this.imageSize[3],0,0,this.imageSize[0],this.imageSize[1])}else this.c[3].textContent=this.value;this.miniCanvas&&(this.c[3].children.length||(this.canvas=document.createElement("canvas"),this.canvas.width=this.imageSize[0],this.canvas.height=this.imageSize[1],this.canvas.style.cssText="margin-right:4px;",this.ctx=this.canvas.getContext("2d"),this.c[3].style.textAlign="left",this.c[3].style.justifyContent="left",this.c[3].appendChild(this.canvas)),this.ctx.drawImage(this.tmpImage[this.value],0,0))}}update(e){this.scroll&&(e=(e=e<0?0:e)>this.range?this.range:e,this.topList=-Math.floor(e/this.ratio),this.listIn.style.top=this.topList+"px",this.scroller.style.top=Math.floor(e)+"px",this.py=e)}parentHeight(e){null!==this.group?this.group.calc(e):this.isUI&&this.main.calc(e)}open(e){super.open(),this.update(0),this.h=this.maxHeight+this.baseH+5,this.scroll?(this.scroller.style.display="block",this.scrollerBack.style.display="block"):(this.topList=0,this.h=this.baseH+5+this.max,this.scroller.style.display="none",this.scrollerBack.style.display="none"),this.s[0].height=this.h+"px",this.s[2].display="block",this.up?(this.zone.y-=this.h-(this.baseH-10),this.setSvg(this.c[4],"d",this.svgs.g1)):this.setSvg(this.c[4],"d",this.svgs.g2),this.rSizeContent();let t=this.h-this.baseH;this.zone.h=this.h,e||this.parentHeight(t)}close(){super.close(),this.up&&(this.zone.y+=this.h-(this.baseH-10));let e=this.h-this.baseH;this.h=this.baseH,this.s[0].height=this.h+"px",this.s[2].display="none",this.setSvg(this.c[4],"d",this.svgs.g1),this.zone.h=this.h,this.parentHeight(-e)}text(e){this.c[3].textContent=e}rSizeContent(){let e=this.length;for(;e--;)this.listIn.children[e].style.width=this.ww+"px"}rSize(){super.rSize();let e=this.s,t=this.sb,i=this.sa;void 0!==e[2]&&(e[2].width=t+"px",e[2].left=i+"px",e[3].width=t+"px",e[3].left=i+"px",e[4].left=i+t-15+"px",this.ww=t,this.max>this.maxHeight&&(this.ww=t-this.ss),this.isOpen&&this.rSizeContent())}}let E=class extends f{constructor(e={}){super(e),this.setTypeNumber(e),this.allway=e.allway||!1,this.isDown=!1,this.value=[0],this.multy=1,this.invmulty=1,this.isSingle=!0,this.isAngle=!1,this.isVector=!1,e.isAngle&&(this.isAngle=!0,this.multy=d.torad,this.invmulty=d.todeg),this.isDrag=e.drag||!1,void 0!==e.value&&(isNaN(e.value)?e.value instanceof Array?(this.value=e.value,this.isSingle=!1):e.value instanceof Object&&(this.value=[],void 0!==e.value.x&&(this.value[0]=e.value.x),void 0!==e.value.y&&(this.value[1]=e.value.y),void 0!==e.value.z&&(this.value[2]=e.value.z),void 0!==e.value.w&&(this.value[3]=e.value.w),this.isSingle=!1,this.isVector=!0):this.value=[e.value]),this.lng=this.value.length,this.tmp=[],this.current=-1,this.prev={x:0,y:0,d:0,v:0};let t=this.colors;this.c[2]=this.dom("div",this.css.basic+" background:"+t.select+"; top:4px; width:0px; height:"+(this.h-8)+"px;"),this.cMode=[];let i=this.lng;for(;i--;)this.isAngle&&(this.value[i]=(180*this.value[i]/Math.PI).toFixed(this.precision)),this.c[3+i]=this.dom("div",this.css.txtselect+"top:1px; height:"+(this.h-2)+"px; color:"+t.text+"; background:"+t.back+"; borderColor:"+t.border+"; border-radius:"+this.radius+"px;"),e.center&&(this.c[2+i].style.textAlign="center"),this.c[3+i].textContent=this.value[i],this.c[3+i].style.color=this.colors.text,this.c[3+i].isNum=!0,this.cMode[i]=0;this.selectId=3+this.lng,this.c[this.selectId]=this.dom("div",this.css.txtselect+"position:absolute; top:2px; height:"+(this.h-4)+"px; padding:0px 0px; width:0px; color:"+t.textSelect+"; background:"+t.select+"; border:none; border-radius:0px;"),this.cursorId=4+this.lng,this.c[this.cursorId]=this.dom("div",this.css.basic+"top:2px; height:"+(this.h-4)+"px; width:0px; background:"+t.text+";"),this.init()}testZone(e){let t=this.local;if(-1===t.x&&-1===t.y)return"";let i=this.lng,s=this.tmp;for(;i--;)if(t.x>s[i][0]&&t.x<s[i][2])return i;return""}mousedown(e){let t=this.testZone(e);return!this.isDown&&(this.isDown=!0,""!==t&&(this.current=t,this.prev={x:e.clientX,y:e.clientY,d:0,v:this.isSingle?parseFloat(this.value):parseFloat(this.value[this.current])},this.setInput(this.c[3+this.current])),this.mousemove(e))}mouseup(e){return!!this.isDown&&(this.isDown=!1,this.prev={x:0,y:0,d:0,v:0},this.mousemove(e))}mousemove(e){let t=!1,i=0;if(""===this.testZone(e)?this.cursor():this.isDrag?this.cursor(-1!==this.current?"move":"pointer"):this.cursor("text"),!this.isDrag)return this.isDown&&(i=e.clientX-this.zone.x-3),-1!==this.current&&(i-=this.tmp[this.current][0]),this.upInput(i,this.isDown);if(-1!==this.current){this.prev.d+=e.clientX-this.prev.x-(e.clientY-this.prev.y);let i=this.prev.v+this.prev.d*this.step;this.value[this.current]=this.numValue(i),this.c[3+this.current].textContent=this.value[this.current],this.validate(),this.prev.x=e.clientX,this.prev.y=e.clientY,t=!0}return t}reset(){return!1}setValue(e){this.isVector?(void 0!==e.x&&(this.value[0]=e.x),void 0!==e.y&&(this.value[1]=e.y),void 0!==e.z&&(this.value[2]=e.z),void 0!==e.w&&(this.value[3]=e.w)):this.value=this.isSingle?[e]:e,this.update()}sameStr(e){let t=this.value.length;for(;t--;)this.c[3+t].textContent=e}update(e){let t=this.value.length;for(;t--;)this.value[t]=this.numValue(this.value[t]*this.invmulty),this.c[3+t].textContent=this.value[t];e&&this.send()}send(e){e=e||this.value,this.isSend=!0,null!==this.objectLink&&(this.isVector?this.objectLink[this.objectKey].fromArray(e):this.objectLink[this.objectKey]=e),this.callback&&this.callback(e,this.objectKey),this.isSend=!1}select(e,t,i,s){let n=this.s,r=-1!==this.current?this.tmp[this.current][0]+5:0;n[this.cursorId].width="1px",n[this.cursorId].left=r+e+"px",n[this.selectId].left=r+t+"px",n[this.selectId].width=i+"px",this.c[this.selectId].innerHTML=s}unselect(){let e=this.s;e&&(this.c[this.selectId].innerHTML="",e[this.selectId].width="0px",e[this.cursorId].width="0px")}validate(e){let t=[],i=this.lng;for(this.allway&&(e=!0);i--;){if(isNaN(this.c[3+i].textContent))this.c[3+i].textContent=this.value[i];else{let e=this.numValue(this.c[3+i].textContent);this.c[3+i].textContent=e,this.value[i]=e}t[i]=this.value[i]*this.multy}e&&this.send(this.isSingle?t[0]:t)}rSize(){super.rSize();let e=this.colors.sx,t=e*(this.lng-1),i=(this.sb-t)/this.lng,s=this.s,n=this.lng;for(;n--;)this.tmp[n]=[this.sa+i*n+e*n,i],this.tmp[n][2]=this.tmp[n][0]+this.tmp[n][1],s[3+n].left=this.tmp[n][0]+"px",s[3+n].width=this.tmp[n][1]+"px"}},k=class extends f{constructor(e={}){super(e),this.setTypeNumber(e),this.model=void 0!==e.stype?e.stype:2,void 0!==e.mode&&(this.model=e.mode),this.isDown=!1,this.isOver=!1,this.allway=e.allway||!1,this.autoValue=!0,void 0!==e.autoValue&&(this.autoValue=!1),this.isDeg=e.isDeg||!1,this.isCyclic=e.cyclic||!1,this.firstImput=!1;let t=this.colors;if(this.c[2]=this.dom("div",this.css.txtselect+"border:none; background:none; width:47px; color:"+t.text+";"),this.c[3]=this.dom("div",this.css.basic+" top:0; height:"+this.h+"px;"),this.c[4]=this.dom("div",this.css.basic+"background:"+t.back+"; top:2px; height:"+(this.h-4)+"px;"),this.c[5]=this.dom("div",this.css.basic+"left:4px; top:5px; height:"+(this.h-10)+"px; background:"+t.text+";"),this.c[2].isNum=!0,this.c[2].style.height=this.h-2+"px",this.c[2].style.lineHeight=this.h-10+"px",0!==this.model){let e=4,i=4,s=8,n=this.h-6,r=16;2===this.model&&(e=0,i=2,s=4,r=2,n=.5*(this.h-6)),3===this.model&&(this.c[5].style.visible="none"),this.c[4].style.borderRadius=e+"px",this.c[4].style.height=s+"px",this.c[4].style.top=.5*this.h-i+"px",this.c[5].style.borderRadius=.5*e+"px",this.c[5].style.height=i+"px",this.c[5].style.top=.5*this.h-.5*i+"px",this.c[6]=this.dom("div",this.css.basic+"border-radius:"+r+"px; margin-left:"+.5*-n+"px; background:"+t.text+"; left:4px; top:"+.5*(this.h-n)+"px; height:"+n+"px; width:"+n+"px;")}this.init()}testZone(e){let t=this.local;return-1===t.x&&-1===t.y?"":t.x>=this.txl?"text":t.x>=this.sa?"scroll":""}mouseup(e){this.isDown&&(this.isDown=!1)}mousedown(e){let t=this.testZone(e);return!!t&&("scroll"===t&&(this.isDown=!0,this.old=this.value,this.mousemove(e)),!0)}mousemove(e){let t=!1;if("scroll"===this.testZone(e)?(this.mode(1),this.cursor("w-resize")):this.cursor(),this.isDown){let i=(e.clientX-(this.zone.x+this.sa)-3)/this.ww*this.range+this.min-this.old;(i>=this.step||i<=this.step)&&(i=Math.floor(i/this.step),this.value=this.numValue(this.old+i*this.step),this.update(!0),this.old=this.value),t=!0}return t}wheel(e){if("scroll"===this.testZone(e)){let t=this.value-this.step*e.delta;return t>this.max?t=this.isCyclic?this.min:this.max:t<this.min&&(t=this.isCyclic?this.max:this.min),this.setValue(t),this.old=t,this.update(!0),!0}return!1}validate(){let e=this.c[2].textContent;isNaN(e)?this.autoValue&&(this.c[2].textContent=this.value+(this.isDeg?"°":"")):(this.value=this.numValue(e),this.update(!0))}reset(){this.isDown=!1,this.mode(0)}mode(e){let t=this.s,i=this.colors;switch(e){case 0:t[2].color=i.text,t[4].background=i.back,t[5].background=i.text,0!==this.model&&(t[6].background=i.text);break;case 1:t[2].color=i.textOver,t[4].background=i.back,t[5].background=i.textOver,0!==this.model&&(t[6].background=i.textOver)}}update(e){let t=Math.floor(this.ww*((this.value-this.min)/this.range));3!==this.model&&(this.s[5].width=t+"px"),this.s[6]&&(this.s[6].left=this.sa+t+3+"px"),this.autoValue&&(this.c[2].textContent=this.value+(this.isDeg?"°":"")),e&&this.send()}rSize(){super.rSize();let e=this.sb-this.sc;this.ww=e-6;let t=this.sc;!this.isUI&&this.simple||(t=this.sc+10),this.txl=this.w-t+2;let i=this.s;i[2].width=this.sc-6+"px",i[2].left=this.txl+4+"px",i[3].left=this.sa+"px",i[3].width=e+"px",i[4].left=this.sa+"px",i[4].width=e+"px",i[5].left=this.sa+3+"px",this.update()}};class B extends f{constructor(e={}){super(e),this.cmode=0,this.value=void 0!==e.value?e.value:"",this.placeHolder=e.placeHolder||"",this.allway=e.allway||!1,this.editable=void 0===e.edit||e.edit,this.isDown=!1;let t=this.colors;this.c[2]=this.dom("div",this.css.txtselect+"top:1px; height:"+(this.h-2)+"px; color:"+t.text+"; background:"+t.back+"; borderColor:"+t.border+"; border-radius:"+this.radius+"px;"),this.c[2].textContent=this.value,this.c[3]=this.dom("div",this.css.txtselect+"position:absolute; top:2px; height:"+(this.h-4)+"px; padding:0px 0px; width:0px; color:"+t.textSelect+"; background:"+t.select+"; border:none; border-radius:0px;"),this.c[4]=this.dom("div",this.css.basic+"top:2px; height:"+(this.h-4)+"px; width:0px; background:"+t.text+";"),this.c[5]=this.dom("div",this.css.txtselect+"top:1px; height:"+(this.h-2)+"px; border:none; justify-content: center; font-style: italic; color:"+t.border+";"),""===this.value&&(this.c[5].textContent=this.placeHolder),this.init()}testZone(e){let t=this.local;return-1===t.x&&-1===t.y?"":t.x>=this.sa?"text":""}mouseup(e){if(this.editable)return!!this.isDown&&(this.isDown=!1,this.mousemove(e))}mousedown(e){if(!this.editable)return;let t=this.testZone(e);return!this.isDown&&(this.isDown=!0,"text"===t&&this.setInput(this.c[2]),this.mousemove(e))}mousemove(e){if(!this.editable)return;let t=0;return"text"===this.testZone(e)?this.cursor("text"):this.cursor(),this.isDown&&(t=e.clientX-this.zone.x),this.upInput(t-this.sa-3,this.isDown)}update(){this.c[2].textContent=this.value}reset(){this.cursor()}select(e,t,i,s){let n=this.s,r=this.sa+5;n[4].width="1px",n[4].left=r+t+"px",n[3].left=r+t+"px",n[3].width=i+"px",this.c[3].innerHTML=s}unselect(){let e=this.s;e&&(e[3].width="0px",this.c[3].innerHTML="t",e[4].width="0px")}validate(e){this.allway&&(e=!0),this.value=this.c[2].textContent,""!==this.value?this.c[5].textContent="":this.c[5].textContent=this.placeHolder,e&&this.send()}rSize(){super.rSize();let e=this.s;e[2].left=this.sa+"px",e[2].width=this.sb+"px",e[5].left=this.sa+"px",e[5].width=this.sb+"px"}}class Q extends f{constructor(e={}){super(e),this.isTitle=!0;let t=e.prefix||"",i=e.color||this.colors.text;this.c[2]=this.dom("div",this.css.txt+"justify-content:right; width:60px; line-height:"+(this.h-8)+"px; color:"+i),31===this.h&&(this.s[0].height=this.h+"px",this.s[1].top="8px",this.c[2].style.top="8px");let s=this.s;s[1].justifyContent=e.align||"left",s[1].fontWeight=e.fontWeight||"bold",s[1].color=e.color||this.colors.text,this.c[1].textContent=this.txt.substring(0,1).toUpperCase()+this.txt.substring(1).replace("-"," "),this.c[2].textContent=t,this.init()}text(e){this.c[1].textContent=e}text2(e){this.c[2].textContent=e}rSize(){super.rSize(),this.s[1].width=this.w+"px",this.s[2].left=this.w+"px"}setColor(e){this.s[1].color=e,this.s[2].color=e}}class M extends f{constructor(e={}){super(e),this.value=e.value||"",this.isDown=!1,this.onActif=e.onActif||function(){};const t=this.colors;this.c[2]=this.dom("div",this.css.txt+this.css.button+" top:1px; background:"+t.button+"; height:"+(this.h-2)+"px; border:"+t.buttonBorder+"; border-radius:15px; width:30px; left:10px;"),this.c[3]=this.dom("div",this.css.txtselect+"height:"+(this.h-4)+"px; background:"+t.inputBg+"; borderColor:"+t.inputBorder+"; border-radius:"+this.radius+"px;"),this.c[3].textContent=this.value;let i=Math.floor(.5*this.h)-7;this.c[4]=this.dom("path",this.css.basic+"position:absolute; width:14px; height:14px; left:5px; top:"+i+"px;",{d:this.svgs.cursor,fill:t.text,stroke:"none"}),this.stat=1,this.isActif=!1,this.init()}testZone(e){let t=this.local;return-1===t.x&&-1===t.y?"":t.x>this.sa&&t.x<this.sa+30?"over":"0"}mouseup(e){return!!this.isDown&&(this.isDown=!1,this.mousemove(e))}mousedown(e){return!!this.testZone(e)&&(this.isDown=!0,this.mousemove(e))}mousemove(e){let t=!1;return"over"===this.testZone(e)?(this.cursor("pointer"),t=this.mode(this.isDown?3:2)):t=this.reset(),t}apply(e){(e=e||"")!==this.value&&(this.value=e,this.c[3].textContent=this.value,this.send()),this.mode(1)}update(){this.mode(3)}mode(e){let t=!1,i=this.colors;if(this.stat!==e){switch(1===e&&(this.isActif=!1),3===e&&(this.isActif?this.isActif=!1:(this.isActif=!0,e=4,this.onActif(this))),2===e&&this.isActif&&(e=4),this.stat=e,e){case 1:this.s[2].color=i.text,this.s[2].background=i.button;break;case 2:this.s[2].color=i.textOver,this.s[2].background=i.overoff;break;case 3:this.s[2].color=i.textOver,this.s[2].background=i.action;break;case 4:this.s[2].color=i.textSelect,this.s[2].background=i.action}t=!0}return t}reset(){return this.cursor(),this.mode(this.isActif?4:1)}text(e){this.c[3].textContent=e}rSize(){super.rSize();let e=this.s;e[2].left=this.sa+"px",e[3].left=this.sa+40+"px",e[3].width=this.sb-40+"px",e[4].left=this.sa+8+"px"}}let T=class extends f{constructor(e={}){super(e),this.value=e.value||"",this.colorSpace=e.colorSpace||"",this.img=null,this.value.isTexture&&this.value.image&&(this.img=this.value.image),this.isDown=!1,this.neverlock=!0;const t=this.colors;this.c[2]=this.dom("div",this.css.txt+this.css.button+" top:1px; background:"+t.button+"; height:"+(this.h-2)+"px; border:"+t.buttonBorder+"; border-radius:2px; width:30px; "),this.c[3]=this.dom("div",this.css.txtselect+"height:"+(this.h-4)+"px; background:"+t.back+"; borderColor:"+t.inputBorder+"; border-radius:"+this.radius+"px;"),this.img||(this.c[3].textContent="null");let i=Math.floor(.5*this.h)-7;this.c[4]=this.dom("path",this.css.basic+"position:absolute; width:14px; height:14px; left:5px; top:"+i+"px;",{d:this.svgs.load,fill:t.text,stroke:"none"}),this.stat=1,this.makePreview(),this.init()}testZone(e){let t=this.local;return-1===t.x&&-1===t.y?"":t.x>this.sa&&t.x<this.sa+30?"over":t.x>this.sa-30&&t.x<this.sa?"delete":"0"}mouseup(e){return!!this.isDown&&(this.isDown=!1,this.mousemove(e))}mousedown(e){let t=this.testZone(e);return!!t&&("over"===t&&(this.isDown=!0,u.load({callback:this.changeBitmap.bind(this),always:!0,type:"image"})),this.mousemove(e))}mousemove(e){let t=!1;return"over"===this.testZone(e)?(this.cursor("pointer"),t=this.mode(this.isDown?3:2)):t=this.reset(),t}makePreview(){this.img?(this.c[3].style.background="url("+this.img.src+")",this.c[3].style.backgroundSize=this.sb-40+"px "+(this.sb-40)+"px",this.c[3].style.backgroundPosition="center",this.c[3].style.backgroundRepeat="no-repeat"):(this.c[3].style.background=this.colors.back,this.c[3].style.backgroundImage="none")}changeBitmap(e,t,i){e?(this.img=e,this.apply(t)):(this.img=null,this.apply("null")),this.makePreview(),this.threeTexture()}threeTexture(){if(null===this.objectLink)return;let e=this.objectLink[this.objectKey];this.img?null!==e?(e.image=this.img,this.objectLink[this.objectKey]=e.clone(),e.dispose(),this.objectLink[this.objectKey].needsUpdate=!0):d.texture&&(e=new d.texture(this.img),this.colorSpace&&(e.colorSpace=this.colorSpace),this.objectLink[this.objectKey]=e,this.objectLink[this.objectKey].needsUpdate=!0):this.objectLink[this.objectKey]=null,this.objectLink.needsUpdate=!0}apply(e){e=e||"";let t=null!==this.objectLink?this.objectKey:this.name;e!==this.value&&(this.value=e,null!==this.img?(this.c[3].textContent="",this.callback&&this.callback(this.value,this.img,t)):(this.c[3].textContent="null",this.callback&&this.callback(null,null,t))),this.mode(1)}update(){this.mode(3)}mode(e,t){let i=!1,s=this.colors;if(this.stat!==e){switch(this.stat=e,e){case 1:this.s[2].color=s.text,this.s[2].background=s.button;break;case 2:this.s[2].color=s.textOver,this.s[2].background=s.overoff;break;case 3:this.s[2].color=s.textOver,this.s[2].background=s.over;break;case 4:this.s[2].color=s.textSelect,this.s[2].background=s.select}i=!0}return i}reset(){return this.cursor(),this.mode(this.isActif?4:1)}text(e){this.c[3].textContent=e}rSize(){super.rSize();let e=this.s;e[2].left=this.sa+"px",e[3].left=this.sa+40+"px",e[3].width=this.sb-40+"px",e[4].left=this.sa+8+"px"}},D=class extends A{constructor(e={}){void 0===e.selectable&&(e.selectable=!0),super(e)}},R=class extends f{constructor(e={}){super(e),this.p=100,this.value=this.txt,this.status=1,this.itype=e.itype||"none",this.val=this.itype,this.graph=this.svgs[this.itype];let t=Math.floor(.5*this.h)-7;this.c[2]=this.dom("path",this.css.basic+"position:absolute; width:14px; height:14px; left:5px; top:"+t+"px;",{d:this.graph,fill:this.colors.text,stroke:"none"}),this.s[1].marginLeft="20px",this.init()}mousemove(e){this.cursor("pointer")}mousedown(e){return this.isUI&&this.main.resetItem(),this.selected(!0),this.send(),!0}uiout(){this.isSelect?this.mode(3):this.mode(1)}uiover(){this.isSelect?this.mode(4):this.mode(2)}update(){}mode(e){let t=!1;if(this.status!==e){this.status=e;let i=this.s,s=this.colors;switch(e){case 1:this.status=1,i[1].color=s.text,i[0].background="none";break;case 2:this.status=2,i[1].color=s.textOver,i[0].background=s.back;break;case 3:this.status=3,i[1].color=s.textSelect,i[0].background=s.select;break;case 4:this.status=4,i[1].color=s.textOver,i[0].background=s.over}t=!0}return t}reset(){this.cursor()}selected(e){this.isSelect&&this.mode(1),this.isSelect=e||!1,this.isSelect&&this.mode(3)}};class P extends f{constructor(e={}){if(super(e),this.values=[],e.values)if(e.values instanceof Array)this.values=e.values;else if(e.values instanceof String)this.values=[e.values];else if(e.values instanceof Object){this.refObject=e.values;for(let e in this.refObject)this.values.push(e)}this.lng=this.values.length,this.value=e.value||null;let t=this.colors;this.isSelectable=e.selectable||!1,this.spaces=e.spaces||[t.sx,t.sy],this.bsize=e.bsize||[90,this.h],this.bsizeMax=this.bsize[0],this.tmp=[],this.stat=[],this.grid=[2,Math.round(.5*this.lng)],this.h=this.grid[1]*this.bsize[1]+this.grid[1]*this.spaces[1],this.c[1].textContent="",this.c[2]=this.dom("table",this.css.basic+"width:100%; border-spacing: "+(this.spaces[0]-2)+"px "+this.spaces[1]+"px; border:none;");let i,s,n,r,o=0;this.res=-1,this.isDown=!1,this.neverlock=!0,this.buttons=[],this.stat=[],this.tmpX=[],this.tmpY=[];for(let e=0;e<this.grid[1];e++){n=this.c[2].insertRow(),n.style.cssText="pointer-events:none;";for(let e=0;e<this.grid[0];e++)s=n.insertCell(),s.style.cssText="pointer-events:none;",this.values[o]?(r=!1,this.values[o]===this.value&&this.isSelectable&&(r=!0),i=document.createElement("div"),i.style.cssText=this.css.txt+this.css.button+"position:static; top:1px; width:"+this.bsize[0]+"px; height:"+(this.bsize[1]-2)+"px; border:"+t.borderSize+"px solid "+t.border+"; left:auto; right:auto; border-radius:"+this.radius+"px;",i.style.background=r?t.select:t.button,i.style.color=r?t.textSelect:t.text,i.innerHTML=this.values[o],s.appendChild(i),this.buttons.push(i),this.stat.push(1)):(i=document.createElement("div"),i.style.cssText=this.css.txt+"position:static; width:"+this.bsize[0]+"px; height:"+this.bsize[1]+"px; text-align:center; left:auto; right:auto; background:none;",s.appendChild(i)),i.style.cssText+=0===e?"float:right;":"float:left;",o++}this.s[0].border="none",this.init()}testZone(e){let t=this.local;if(-1===t.x&&-1===t.y)return-1;t.y+=this.mtop;let i=this.tmpX,s=this.tmpY,n=-1,r=-1,o=-1,a=this.grid[0];for(;a--;)t.x>i[a][0]&&t.x<i[a][1]&&(r=a);for(a=this.grid[1];a--;)t.y>s[a][0]&&t.y<s[a][1]&&(o=a);return-1!==r&&-1!==o&&(n=r+2*o,n>this.lng-1&&(n=-1)),n}mouseup(e){return!!this.isDown&&(this.isDown=!1,-1!==this.res&&(this.value=this.values[this.res],this.send()),this.mousemove(e))}mousedown(e){return!this.isDown&&(this.isDown=!0,this.mousemove(e))}mousemove(e){let t=!1;return this.res=this.testZone(e),-1!==this.res?(this.cursor("pointer"),t=this.modes(this.isDown?3:2,this.res)):t=this.reset(),t}update(){this.modes(2,this.values.indexOf(this.value))}modes(e=1,t=-1){let i,s,n=this.lng,r=!1;for(;n--;)s=e,i=!!this.isSelectable&&this.values[n]===this.value,n===t?i&&2===s&&(s=3):(s=1,i&&(s=4)),this.mode(s,n)&&(r=!0);return r}mode(e,t){let i=!1,s=this.colors,n=this.buttons,r=t;if(this.stat[t]!==e){switch(this.stat[t]=e,e){case 1:n[r].style.color=s.text,n[r].style.background=s.button;break;case 2:n[r].style.color=s.textOver,n[r].style.background=s.overoff;break;case 3:n[r].style.color=s.textOver,n[r].style.background=s.over;break;case 4:n[r].style.color=s.textSelect,n[r].style.background=s.select}i=!0}return i}reset(){return this.res=-1,this.cursor(),this.modes()}label(e,t){this.buttons[t].textContent=e}icon(e,t,i){this.buttons[i].style.padding=(t||0)+"px 0px",this.buttons[i].innerHTML=e}testW(){let e=!1;if(3*this.spaces[0]+2*this.bsizeMax>this.w?(this.bsize[0]=.5*(this.w-3*this.spaces[0]),e=!0):this.bsize[0]!==this.bsizeMax&&(this.bsize[0]=this.bsizeMax,e=!0),!e)return;let t=this.buttons.length;for(;t--;)this.buttons[t].style.width=this.bsize[0]+"px"}rSize(){let e;super.rSize(),this.testW(),this.tmpX=[],this.tmpY=[];for(let t=0;t<this.grid[0];t++)0===t?(e=.5*this.w-.5*this.spaces[0],this.tmpX.push([e-this.bsize[0],e])):(e=.5*this.w+.5*this.spaces[0],this.tmpX.push([e,e+this.bsize[0]]));e=this.spaces[1];for(let t=0;t<this.grid[1];t++)this.tmpY.push([e,e+this.bsize[1]]),e+=this.bsize[1]+this.spaces[1]}}let L=class extends f{constructor(e={}){super(e),this.autoWidth=!1,this.minw=this.w,this.diam=e.diam||this.w,this.pos=new p(0,0),this.maxPos=90,this.model=e.stype||0,void 0!==e.mode&&(this.model=e.mode),this.min=void 0===e.min?-1:e.min,this.max=void 0===e.max?1:e.max,this.range=.5*(this.max-this.min),this.cmode=0,this.c[0].style.display="block",this.precision=void 0===e.precision?2:e.precision,this.value=Array.isArray(e.value)&&2==e.value.length?e.value:[0,0],this.h=e.h||this.w+10,this.c[0].style.width=this.w+"px",void 0!==this.c[1]&&(this.c[1].style.width="100%",this.c[1].style.justifyContent="center",this.top=10,this.h+=10);let t=this.colors;this.c[2]=this.dom("div",this.css.txt+"justify-content:center; top:"+(this.h-20)+"px; width:100%; color:"+t.text),this.c[2].textContent=this.value;let i=this.getPad2d();this.setSvg(i,"fill",t.back,0),this.setSvg(i,"fill",t.button,1),this.setSvg(i,"stroke",t.back,2),this.setSvg(i,"stroke",t.back,3),this.setSvg(i,"stroke",t.text,4),this.setSvg(i,"viewBox","0 0 "+this.diam+" "+this.diam),this.setCss(i,{width:this.diam,height:this.diam,left:0,top:this.top}),this.c[3]=i,this.init(),this.setValue()}testZone(e){let t=this.local;return-1===t.x&&-1===t.y?"":t.y<=this.c[1].offsetHeight?"title":t.y>this.h-this.c[2].offsetHeight?"text":"pad"}mouseup(e){return this.isDown=!1,this.mode(0)}mousedown(e){if("pad"===this.testZone(e))return this.isDown=!0,this.mousemove(e),this.mode(1)}mousemove(e){if(!this.isDown)return;let t=.5*this.w-(e.clientX-this.zone.x),i=.5*this.diam-(e.clientY-this.zone.y-this.ytop),s=256/this.diam;t=-t*s,i=-i*s,t=d.clamp(t,-this.maxPos,this.maxPos),i=d.clamp(i,-this.maxPos,this.maxPos),this.setPos([t,i]),this.update(!0)}mode(e){if(this.cmode===e)return!1;let t=this.colors;switch(e){case 0:this.s[2].color=t.text,this.setSvg(this.c[3],"fill",t.back,0),this.setSvg(this.c[3],"fill",t.button,1),this.setSvg(this.c[3],"stroke",t.back,2),this.setSvg(this.c[3],"stroke",t.back,3),this.setSvg(this.c[3],"stroke",t.text,4);break;case 1:this.s[2].color=t.textSelect,this.setSvg(this.c[3],"fill",t.backoff,0),this.setSvg(this.c[3],"fill",t.overoff,1),this.setSvg(this.c[3],"stroke",t.backoff,2),this.setSvg(this.c[3],"stroke",t.backoff,3),this.setSvg(this.c[3],"stroke",t.textSelect,4)}return this.cmode=e,!0}update(e){this.c[2].textContent=this.value,this.updateSVG(),e&&this.send()}updateSVG(){1==this.model&&(this.setSvg(this.c[3],"y1",this.pos.y,2),this.setSvg(this.c[3],"y2",this.pos.y,2),this.setSvg(this.c[3],"x1",this.pos.x,3),this.setSvg(this.c[3],"x2",this.pos.x,3)),this.setSvg(this.c[3],"cx",this.pos.x,4),this.setSvg(this.c[3],"cy",this.pos.y,4)}setPos(e){this.pos.set(e[0]+128,e[1]+128);let t=1/this.maxPos;this.value[0]=(e[0]*t*this.range).toFixed(this.precision),this.value[1]=(e[1]*t*this.range).toFixed(this.precision)}setValue(e,t=!1){void 0===e&&(e=this.value),this.value[0]=1*Math.min(this.max,Math.max(this.min,e[0])).toFixed(this.precision),this.value[1]=1*Math.min(this.max,Math.max(this.min,e[1])).toFixed(this.precision),this.pos.set(this.value[0]/this.range*this.maxPos+128,this.value[1]/this.range*this.maxPos+128),this.update(t)}};const F=function(){let e,t,i=arguments,s=!1,n=null;"string"==typeof i[0]?(e=i[0],t=i[1]||{}):"object"==typeof i[0]&&(s=!0,void 0===i[2]&&[].push.call(i,{}),e=i[2].type?i[2].type:U(i[0][i[1]],i[2]),t=i[2],t.name=i[1],"list"!==e||t.list?t.value=i[0][i[1]]:t.list=i[0][i[1]]);let r=e.toLowerCase();switch("group"===r&&(t.add=F),r){case"bool":case"boolean":n=new g(t);break;case"button":n=new A(t);break;case"circular":n=new b(t);break;case"color":n=new v(t);break;case"fps":n=new y(t);break;case"graph":n=new w(t);break;case"group":n=new O(t);break;case"joystick":n=new C(t);break;case"knob":n=new S(t);break;case"list":n=new I(t);break;case"numeric":case"number":n=new E(t);break;case"slide":n=new k(t);break;case"textInput":case"string":n=new B(t);break;case"title":case"text":n=new Q(t);break;case"select":n=new M(t);break;case"bitmap":n=new T(t);break;case"selector":n=new D(t);break;case"empty":case"space":n=new x(t);break;case"item":n=new R(t);break;case"grid":n=new P(t);break;case"pad2d":case"pad":n=new L(t)}if(null!==n)return h.needResize=!0,s&&n.setReferency(i[0],i[1]),n},U=function(e,t){let i="slide";return e.isColor?i="color":e.isTexture?i="bitmap":"boolean"==typeof e?i="bool":"string"==typeof e?i="#"===e.substring(0,1)?"color":"string":"number"==typeof e?i=t.ctype?"color":"slide":"array"==typeof e&&e instanceof Array?"number"==typeof e[0]?i="number":"string"==typeof e[0]&&(i="list"):"object"==typeof e&&e instanceof Object&&(i=void 0!==e.x?"number":"list"),i};class z{constructor(e={}){this.isGui=!0,this.name="gui",this.canvas=null,this.screen=null,this.plane=e.plane||null,e.config&&(e.colors=e.config),e.colors?this.setConfig(e.colors):this.colors=d.defineColor(e),this.css=d.cloneCss(),this.isReset=!0,this.tmpAdd=null,this.isCanvas=e.isCanvas||!1,this.isCanvasOnly=!1,this.callback=void 0===e.callback?null:e.callback,this.forceHeight=e.maxHeight||0,this.lockHeight=e.lockHeight||!1,this.isItemMode=void 0!==e.itemMode&&e.itemMode,this.cn="",this.size=d.size,void 0!==e.p&&(this.size.p=e.p),void 0!==e.w&&(this.size.w=e.w),void 0!==e.h&&(this.size.h=e.h),void 0!==e.s&&(this.size.s=e.s),this.size.h=this.size.h<11?11:this.size.h,this.local=(new p).neg(),this.zone={x:0,y:0,w:this.size.w,h:0},this.mouse=(new p).neg(),this.h=0,this.sw=0,this.margin=this.colors.sy,this.marginDiv=d.isDivid(this.margin),this.isWithClose=void 0===e.close||e.close,this.bh=this.isWithClose?this.size.h:0,this.autoResize=void 0===e.autoResize||e.autoResize,this.isCenter=e.center||!1,this.isBottom=void 0!==e.bottom,this.realTop=0,this.bottomPosition=e.bottom||0,this.cssGui=void 0!==e.css?e.css:this.isCenter?"":"right:10px;",this.isOpen=void 0===e.open||e.open,this.isDown=!1,this.isScroll=!1,this.uis=[],this.current=-1,this.proto=null,this.isEmpty=!0,this.decal=0,this.ratio=1,this.oy=0,this.isNewTarget=!1;let t=this.colors,i="border: 2px solid "+t.content+"; ";this.content=d.dom("div",this.css.basic+" width:0px; height:auto; top:0px; background:"+t.content+"; "+this.cssGui+i),this.innerContent=d.dom("div",this.css.basic+"width:100%; top:0; left:0; height:auto; overflow:hidden;"),this.content.appendChild(this.innerContent),this.useFlex=!0;let s=this.useFlex?"display:flex; flex-flow: row wrap;":"";this.inner=d.dom("div",this.css.basic+s+"width:100%; left:0; "),this.innerContent.appendChild(this.inner),this.scrollBG=d.dom("div",this.css.basic+"right:0; top:0; width:"+(this.size.s-1)+"px; height:10px; display:none; background:"+t.background+";"),this.content.appendChild(this.scrollBG),this.scroll=d.dom("div",this.css.basic+"background:"+t.button+"; right:2px; top:0; width:"+(this.size.s-4)+"px; height:10px;"),this.scrollBG.appendChild(this.scroll),this.bottomText=e.bottomText||["open","close"];let n=t.radius;this.bottom=d.dom("div",this.css.txt+"width:100%; top:auto; bottom:0; left:0; border-bottom-right-radius:"+n+"px; border-bottom-left-radius:"+n+"px; justify-content:center; height:"+this.bh+"px; line-height:"+(this.bh-5)+"px; color:"+t.text+";"),this.content.appendChild(this.bottom),this.bottom.textContent=this.isOpen?this.bottomText[1]:this.bottomText[0],this.bottom.style.background=t.background,this.parent=void 0!==e.parent?e.parent:null,this.parent=void 0!==e.target?e.target:this.parent,null!==this.parent||this.isCanvas||(this.parent=document.body),null!==this.parent&&this.parent.appendChild(this.content),this.isCanvas&&null===this.parent&&(this.isCanvasOnly=!0),this.isCanvasOnly?(this.content.style.left="0px",this.content.style.right="auto",e.transition=0):this.content.style.pointerEvents="auto",this.transition=void 0!==e.transition?e.transition:d.transition,this.transition&&setTimeout(this.addTransition.bind(this),1e3),this.setWidth(),this.isCanvas&&this.makeCanvas(),h.add(this)}setLeft(e){this.content.style.left=e+"px",h.needReZone=!0}setTop(e,t){this.content.style.top=e+"px",void 0!==t&&(this.forceHeight=t),this.calc(),h.needReZone=!0}addTransition(){this.transition&&!this.isCanvas&&(this.innerContent.style.transition="height "+this.transition+"s ease-out",this.content.style.transition="height "+this.transition+"s ease-out",this.bottom.style.transition="top "+this.transition+"s ease-out");let e=this.uis.length;for(;e--;)this.uis[e].addTransition()}onDraw(){}makeCanvas(){this.canvas=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),this.canvas.width=this.zone.w,this.canvas.height=this.forceHeight?this.forceHeight:this.zone.h}draw(e){if(null===this.canvas)return;let t=this.zone.w,i=this.forceHeight?this.forceHeight:this.zone.h;h.toCanvas(this,t,i,e)}getDom(){return this.content}noMouse(){this.mouse.neg()}setMouse(e,t=!0){t?this.mouse.set(Math.round(e.x*this.canvas.width),this.canvas.height-Math.round(e.y*this.canvas.height)):this.mouse.set(Math.round(e.x*this.canvas.width),Math.round(e.y*this.canvas.height))}setConfig(e){d.setText(),this.colors=d.defineColor(e)}setColors(e){for(let t in e)this.colors[t]&&(this.colors[t]=e[t])}setText(e,t,i,s){d.setText(e,t,i,s)}hide(e){this.content.style.visibility=e?"hidden":"visible"}display(e=!1){this.content.style.visibility=e?"visible":"hidden"}onChange(e){return this.callback=e||null,this}mode(e){let t=!1,i=this.colors;if(e!==this.cn){switch(this.cn=e,e){case"def":h.cursor(),this.scroll.style.background=i.button,this.bottom.style.background=i.background,this.bottom.style.color=i.text;break;case"scrollOver":h.cursor("ns-resize"),this.scroll.style.background=i.select;break;case"scrollDown":this.scroll.style.background=i.select;break;case"bottomOver":h.cursor("pointer"),this.bottom.style.background=i.backgroundOver,this.bottom.style.color=i.textOver}t=!0}return t}clearTarget(){return-1!==this.current&&(this.proto.s&&(this.proto.uiout(),this.proto.reset()),this.proto=null,this.current=-1,h.cursor(),!0)}testZone(e){let t=this.local;if(-1===t.x&&-1===t.y)return"";this.isReset=!1;let i="",s=this.isScroll?this.zone.w-this.size.s:this.zone.w;return i=t.y>this.zone.h-this.bh&&t.y<this.zone.h?"bottom":t.x>s?"scroll":"content",i}handleEvent(e){let t=e.type,i=!1,s=!1,n=this.testZone(e);if("mouseup"===t&&this.isDown&&(this.isDown=!1),"mousedown"!==t||this.isDown||(this.isDown=!0),this.isDown&&this.isNewTarget&&(h.clearInput(),this.isNewTarget=!1),n){switch(n){case"content":e.clientY=this.isScroll?e.clientY+this.decal:e.clientY,h.isMobile&&"mousedown"===t&&this.getNext(e,i),this.proto&&(s=this.proto.handleEvent(e)),"mousemove"===t&&(i=this.mode("def")),"wheel"===t&&!s&&this.isScroll&&(i=this.onWheel(e)),h.lock||this.getNext(e,i);break;case"bottom":this.clearTarget(),"mousemove"===t&&(i=this.mode("bottomOver")),"mousedown"===t&&(this.isOpen=!this.isOpen,this.bottom.textContent=this.isOpen?this.bottomText[1]:this.bottomText[0],this.calc(),this.mode("def"),i=!0);break;case"scroll":this.clearTarget(),"mousemove"===t&&(i=this.mode("scrollOver")),"mousedown"===t&&(i=this.mode("scrollDown")),"wheel"===t&&(i=this.onWheel(e)),this.isDown&&this.update(e.clientY-this.zone.y-.5*this.sh)}this.isDown&&(i=!0),s&&(i=!0),"keyup"===t&&(i=!0),"keydown"===t&&(i=!0),i&&this.draw()}}getNext(e,t){let i=h.findTarget(this.uis,e);i!==this.current&&(this.clearTarget(),this.current=i,this.isNewTarget=!0),-1!==i&&(this.proto=this.uis[this.current],this.proto.uiover())}onWheel(e){return this.oy+=20*e.delta,this.update(this.oy),!0}reset(e){if(this.isReset)return;this.mouse.neg(),this.isDown=!1;let t=this.mode("def"),i=this.clearTarget();(t||i)&&this.draw(!0),this.isReset=!0}add(){let e=arguments,t=!1;"object"==typeof e[1]?(e[1].isUI=!0,e[1].main=this,t=!!e[1].ontop&&e[1].ontop):"string"==typeof e[1]&&(void 0===e[2]?[].push.call(e,{isUI:!0,main:this}):(e[2].isUI=!0,e[2].main=this,t=!!e[2].ontop&&e[2].ontop));let i=F.apply(this,e);if(null!==i)return t?this.uis.unshift(i):this.uis.push(i),this.calc(),this.isEmpty=!1,i}remove(e){e.dispose&&e.dispose()}clearOne(e){let t=this.uis.indexOf(e);-1!==t&&(this.inner.removeChild(this.uis[t].c[0]),this.uis.splice(t,1),this.calc())}empty(){let e,t=this.uis.length;for(;t--;)e=this.uis.pop(),this.inner.removeChild(e.c[0]),e.dispose();this.uis=[],this.isEmpty=!0,this.calc()}clear(){this.empty()}clear2(){setTimeout(this.empty.bind(this),0)}dispose(){this.clear(),null!==this.parent&&this.parent.removeChild(this.content),h.remove(this)}resetItem(){if(!this.isItemMode)return;let e=this.uis.length;for(;e--;)this.uis[e].selected()}setItem(e){if(!this.isItemMode)return;if(e=e||"",this.resetItem(),!e)return void this.update(0);let t=this.uis.length;for(;t--;)this.uis[t].value===e&&(this.uis[t].selected(!0),this.isScroll&&this.update(t*(this.uis[t].h+this.margin)*this.ratio))}upScroll(e){this.sw=e?this.size.s:0,this.oy=e?this.oy:0,this.scrollBG.style.display=e?"block":"none",e&&(this.total=this.h,this.maxView=this.maxHeight,this.ratio=this.maxView/this.total,this.sh=this.maxView*this.ratio,this.range=this.maxView-this.sh,this.oy=d.clamp(this.oy,0,this.range),this.scrollBG.style.height=this.maxView+"px",this.scroll.style.height=this.sh+"px"),this.setItemWidth(this.zone.w-this.sw),this.update(this.oy)}update(e){e=d.clamp(e,0,this.range),this.decal=Math.floor(e/this.ratio),this.inner.style.top=-this.decal+"px",this.scroll.style.top=Math.floor(e)+"px",this.oy=e}calcUis(){return h.calcUis(this.uis,this.zone,this.zone.y)}calc(){clearTimeout(this.tmp),this.tmp=setTimeout(this.setHeight.bind(this),10)}setHeight(){if(this.tmp&&clearTimeout(this.tmp),this.zone.h=this.bh,this.isScroll=!1,this.isOpen){this.h=this.calcUis();let e=this.forceHeight?this.forceHeight+this.zone.y:window.innerHeight,t=this.isBottom?this.bottomPosition:this.zone.y;this.maxHeight=e-t-this.bh,this.h-this.maxHeight>1?(this.isScroll=!0,this.zone.h=this.maxHeight+this.bh):this.zone.h=this.h+this.bh}this.upScroll(this.isScroll),this.innerContent.style.height=this.zone.h-this.bh+"px",this.content.style.height=this.zone.h+"px",this.bottom.style.top=this.zone.h-this.bh+"px",this.isBottom&&(this.realTop=window.innerHeight-this.zone.h-this.bottomPosition,this.zone.y=this.realTop,this.content.style.top=this.realTop+"px",this.calcUis()),this.forceHeight&&this.lockHeight&&(this.content.style.height=this.forceHeight+"px"),this.isCanvas&&this.draw(!0)}resizeRoot(){h.resize(),h.initEvents()}rezone(){h.needReZone=!0}getRoot(){return h}zoneReset(){}setWidth(e){e&&(this.zone.w=e),this.zone.w=Math.floor(this.zone.w),this.content.style.width=this.zone.w+"px",this.isCenter&&(this.content.style.marginLeft=-Math.floor(.5*this.zone.w)+"px"),this.setItemWidth(this.zone.w-this.sw)}setItemWidth(e){let t=this.uis.length;for(;t--;)this.uis[t].setSize(e),this.uis[t].rSize()}}var G;G=function(){const e=5121,t=5126,i=5131,s=36193;let n;function r(e,t,i){return function(s,n,r){return((s+e-1)/e|0)*((n+t-1)/t|0)*i*r}}function o(e,t,i){return function(s,n,r){return(Math.max(s,e)*Math.max(n,t)/i|0)*r}}const a=new Map([[33776,r(4,4,8)],[33777,r(4,4,8)],[33778,r(4,4,16)],[33779,r(4,4,16)],[36196,r(4,4,8)],[35840,o(8,8,2)],[35842,o(8,8,2)],[35841,o(16,8,4)],[35843,o(16,8,4)],[37488,r(4,4,8)],[37489,r(4,4,8)],[37492,r(4,4,8)],[37493,r(4,4,8)],[37494,r(4,4,8)],[37495,r(4,4,8)],[37490,r(4,4,16)],[37491,r(4,4,16)],[37496,r(4,4,16)],[37497,r(4,4,16)],[37808,r(4,4,16)],[37840,r(4,4,16)],[37809,r(5,4,16)],[37841,r(5,4,16)],[37810,r(5,5,16)],[37842,r(5,5,16)],[37811,r(6,5,16)],[37843,r(6,5,16)],[37812,r(6,6,16)],[37844,r(6,6,16)],[37813,r(8,5,16)],[37845,r(8,5,16)],[37814,r(8,6,16)],[37846,r(8,6,16)],[37815,r(8,8,16)],[37847,r(8,8,16)],[37816,r(10,5,16)],[37848,r(10,5,16)],[37817,r(10,6,16)],[37849,r(10,6,16)],[37818,r(10,8,16)],[37850,r(10,8,16)],[37819,r(10,10,16)],[37851,r(10,10,16)],[37820,r(12,10,16)],[37852,r(12,10,16)],[37821,r(12,12,16)],[37853,r(12,12,16)],[35916,r(4,4,8)],[35917,r(4,4,8)],[35918,r(4,4,16)],[35919,r(4,4,16)],[36492,r(4,4,16)],[36493,r(4,4,16)],[36494,r(4,4,16)],[36495,r(4,4,16)],[36283,r(4,4,8)],[36284,r(4,4,8)],[36285,r(4,4,16)],[36286,r(4,4,16)]]);function l(r,o){const a=function(r){if(!n){const r={};r[6406]={bytesPerElement:[1,2,2,4],type:[e,i,s,t]},r[6409]={bytesPerElement:[1,2,2,4],type:[e,i,s,t]},r[6410]={bytesPerElement:[2,4,4,8],type:[e,i,s,t]},r[6407]={bytesPerElement:[3,6,6,12,2],type:[e,i,s,t,33635]},r[6408]={bytesPerElement:[4,8,8,16,2,2],type:[e,i,s,t,32819,32820]},r[35906]={bytesPerElement:[4,8,8,16,2,2],type:[e,i,s,t,32819,32820]},r[6402]={bytesPerElement:[2,4],type:[5125,5123]},r[34041]={bytesPerElement:[4]},r[33321]={bytesPerElement:[1]},r[36756]={bytesPerElement:[1]},r[33325]={bytesPerElement:[2]},r[33326]={bytesPerElement:[4]},r[33330]={bytesPerElement:[1]},r[33329]={bytesPerElement:[1]},r[33332]={bytesPerElement:[2]},r[33331]={bytesPerElement:[2]},r[33334]={bytesPerElement:[4]},r[33333]={bytesPerElement:[4]},r[33323]={bytesPerElement:[2]},r[36757]={bytesPerElement:[2]},r[33327]={bytesPerElement:[4]},r[33328]={bytesPerElement:[8]},r[33336]={bytesPerElement:[2]},r[33335]={bytesPerElement:[2]},r[33338]={bytesPerElement:[4]},r[33337]={bytesPerElement:[4]},r[33340]={bytesPerElement:[8]},r[33339]={bytesPerElement:[8]},r[32849]={bytesPerElement:[3]},r[35905]={bytesPerElement:[3]},r[36194]={bytesPerElement:[2]},r[36758]={bytesPerElement:[3]},r[35898]={bytesPerElement:[4]},r[35901]={bytesPerElement:[4]},r[34843]={bytesPerElement:[6]},r[34837]={bytesPerElement:[12]},r[36221]={bytesPerElement:[3]},r[36239]={bytesPerElement:[3]},r[36215]={bytesPerElement:[6]},r[36233]={bytesPerElement:[6]},r[36209]={bytesPerElement:[12]},r[36227]={bytesPerElement:[12]},r[32856]={bytesPerElement:[4]},r[35907]={bytesPerElement:[4]},r[36759]={bytesPerElement:[4]},r[32855]={bytesPerElement:[2]},r[32854]={bytesPerElement:[2]},r[32857]={bytesPerElement:[4]},r[34842]={bytesPerElement:[8]},r[34836]={bytesPerElement:[16]},r[36220]={bytesPerElement:[4]},r[36238]={bytesPerElement:[4]},r[36975]={bytesPerElement:[4]},r[36214]={bytesPerElement:[8]},r[36232]={bytesPerElement:[8]},r[36226]={bytesPerElement:[16]},r[36208]={bytesPerElement:[16]},r[33189]={bytesPerElement:[2]},r[33190]={bytesPerElement:[4]},r[36012]={bytesPerElement:[4]},r[35056]={bytesPerElement:[4]},r[36013]={bytesPerElement:[4]},r[36168]={bytesPerElement:[1]},n=r}return n[r]}(r);if(!a)throw"unknown internal format";if(a.type){const e=a.type.indexOf(o);if(e<0)throw new Error(`unsupported type ${o} for internalformat ${r}`);return a.bytesPerElement[e]}return a.bytesPerElement[0]}function h(e,t,i,s,n){const r=a.get(e);return r?r(t,i,s):function(e,t,i,s,n){return t*i*s*l(e,n)}(e,t,i,s,n)}function c(e){return function(e){return e&&e.buffer&&e.buffer instanceof ArrayBuffer}(e)||e instanceof ArrayBuffer}function d(){const e=(new Error).stack.split("\n").slice(2).filter((e=>!e.includes("webgl-memory.js")));return e.join("\n")}const u=new Set;function p(e,t,i={}){if(u.has(e))return e;u.add(e);const s=i.origGLErrorFn||e.getError,n=i.sharedState||function(e){const t={samples:(s=e).getParameter(s.SAMPLES)||1,depthBits:s.getParameter(s.DEPTH_BITS),stencilBits:s.getParameter(s.STENCIL_BITS),contextAttributes:s.getContextAttributes()};var s;const n={baseContext:e,config:i,apis:{gman_webgl_memory:{ctx:{getMemoryInfo(){const i=function(e,t){if(e.isContextLost())return 0;const{samples:i}=t,s=e.drawingBufferWidth*e.drawingBufferHeight,n=function(e){const{depthBits:t,stencilBits:i}=e,s=(t+i+7)/8|0;return 3===s?4:s}(t);return 4*s+s*i*4+s*n}(e,t);return{memory:{...a,drawingbuffer:i,total:i+a.buffer+a.texture+a.renderbuffer},resources:{...l}}},getResourcesInfo:e=>function(e,t){return[...e.webglObjectToMemory.keys()].filter((e=>e instanceof t)).map((t=>e.webglObjectToMemory.get(t)))}(n,e)}}},resources:{},memory:{texture:0,buffer:0,renderbuffer:0},bindings:new Map,defaultVertexArray:{},webglObjectToMemory:new Map},o=new Set(["webgl","webgl2","webgl_lose_context"]);function h(){n.bindings.clear(),n.webglObjectToMemory.clear(),n.webglObjectToMemory.set(n.defaultVertexArray,{}),n.currentVertexArray=n.defaultVertexArray,[n.resources,n.memory].forEach((function(e){for(const t in e)e[t]=0}))}return e.canvas&&(e.canvas.addEventListener("webglcontextlost",(function(){h(),n.isContextLost=!0;for(const[e,{ctx:t,origFuncs:i}]of[...Object.entries(n.apis)])if(!o.has(e)&&i){u.delete(t);for(const[e,s]of Object.entries(i))t[e]=s;delete r[e]}})),e.canvas.addEventListener("webglcontextrestored",(function(){n.isContextLost=!1}))),h(),n}(e);i.sharedState=n;const{apis:r,bindings:o,memory:a,resources:l,webglObjectToMemory:f}=n,m={};function g(){}function A(e,t,i){return e[i||`create${t[0].toUpperCase()}${t.substr(1)}`]?(l[t]=0,function(e,i,s,r){n.isContextLost||(++l[t],f.set(r,{size:0,stackCreated:d()}))}):null}function b(t,i=g,s){const r=s||`delete${t[0].toUpperCase()}${t.substr(1)}`;return e[r]?function(e,s,r){if(n.isContextLost)return;const[o]=r,a=f.get(o);a&&(--l[t],i(o,a),f.delete(o))}:null}function v(e,t,i,s,r){if(n.isContextLost)return;const l=o.get(e);if(!l)throw new Error(`no renderbuffer bound to ${e}`);const c=f.get(l);if(!c)throw new Error(`unknown renderbuffer ${l}`);const u=h(i,s,r,1)*t;a.renderbuffer-=c.size,c.size=u,c.stackUpdated=d(),a.renderbuffer+=u}const y=5121,w=34067,x=35866,O=34069,C=new Set([O,34070,34071,34072,34073,34074]);function S(e){return C.has(e)}function I(e){e=S(e)?w:e;const t=o.get(e);if(!t)throw new Error(`no texture bound to ${e}`);const i=f.get(t);if(!i)throw new Error(`unknown texture ${t}`);return i}function E(e,t,i,s,n,r,o,l){const c=e.size,u=h(s,n,r,o,l),p=S(t)?t-O:0;e.mips=e.mips||[],e.mips[i]=e.mips[i]||[];const f=e.mips[i][p]||{};e.size-=f.size||0,f.size=u,f.internalFormat=s,f.type=l,f.width=n,f.height=r,f.depth=o,e.mips[i][p]=f,e.size+=u,a.texture-=c,a.texture+=e.size,e.stackUpdated=d()}function k(e,t,i,s,n,r){const o=I(e),a=e===w?6:1,l=e===w?O:e;for(let h=0;h<t;++h){for(let e=0;e<a;++e)E(o,l+e,h,i,s,n,r);s=Math.ceil(Math.max(s/2,1)),n=Math.ceil(Math.max(n/2,1)),r=e===x?r:Math.ceil(Math.max(r/2,1))}}function B(e,t,i){if(n.isContextLost)return;const[s]=i;n.currentVertexArray=s||n.defaultVertexArray}function Q(e,t){if(!n.isContextLost)if(34963===e)f.get(n.currentVertexArray).elementArrayBuffer=t;else o.set(e,t)}const M={},T={bufferData(e,t,i){if(n.isContextLost)return;const[s,r,,,l]=i;let h;if(h=34963===s?f.get(n.currentVertexArray).elementArrayBuffer:o.get(s),!h)throw new Error(`no buffer bound to ${s}`);let u=0;if(void 0!==l)u=l*r.BYTES_PER_ELEMENT;else if(c(r))u=r.byteLength;else{if(!function(e){return"number"==typeof e}(r))throw new Error(`unsupported bufferData src type ${r}`);u=r}const p=f.get(h);if(!p)throw new Error(`unknown buffer ${h}`);a.buffer-=p.size,p.size=u,p.stackUpdated=d(),a.buffer+=u},bindVertexArray:B,bindVertexArrayOES:B,bindBuffer(e,t,i){const[s,n]=i;Q(s,n)},bindBufferBase(e,t,i){const[s,,n]=i;Q(s,n)},bindBufferRange(e,t,i){const[s,,n,,]=i;Q(s,n)},bindRenderbuffer(e,t,i){if(n.isContextLost)return;const[s,r]=i;o.set(s,r)},bindTexture(e,t,i){if(n.isContextLost)return;const[s,r]=i;o.set(s,r)},copyTexImage2D(e,t,i){if(n.isContextLost)return;const[s,r,o,,,a,l]=i;E(I(s),s,r,o,a,l,1,y)},createBuffer:A(e,"buffer"),createFramebuffer:A(e,"framebuffer"),createRenderbuffer:A(e,"renderbuffer"),createProgram:A(e,"program"),createQuery:A(e,"query"),createShader:A(e,"shader"),createSampler:A(e,"sampler"),createTexture:A(e,"texture"),createTransformFeedback:A(e,"transformFeedback"),createVertexArray:A(e,"vertexArray"),createVertexArrayOES:A(e,"vertexArray","createVertexArrayOES"),compressedTexImage2D(e,t,i){if(n.isContextLost)return;const[s,r,o,a,l]=i;E(I(s),s,r,o,a,l,1,y)},compressedTexImage3D(e,t,i){if(n.isContextLost)return;const[s,r,o,a,l,h]=i;E(I(s),s,r,o,a,l,h,y)},deleteBuffer:b("buffer",(function(e,t){a.buffer-=t.size})),deleteFramebuffer:b("framebuffer"),deleteProgram:b("program"),deleteQuery:b("query"),deleteRenderbuffer:b("renderbuffer",(function(e,t){a.renderbuffer-=t.size})),deleteSampler:b("sampler"),deleteShader:b("shader"),deleteSync:b("sync"),deleteTexture:b("texture",(function(e,t){a.texture-=t.size})),deleteTransformFeedback:b("transformFeedback"),deleteVertexArray:b("vertexArray"),deleteVertexArrayOES:b("vertexArray",g,"deleteVertexArrayOES"),fenceSync:function(e){if(!n.isContextLost&&e.fenceSync)return l.sync=0,function(e,t,i,s){++l.sync,f.set(s,{size:0})}}(e),generateMipmap(e,t,i){if(n.isContextLost)return;const[s]=i,r=I(s),o=r.parameters&&r.parameters.get(33084)||0,a=r.parameters&&r.parameters.get(33085)||1024,l=r.mips[o][0];let{width:h,height:c,depth:d}=l;const{internalFormat:u,type:p}=l;let f=o+1;const m=s===w?6:1,g=s===w?O:s;for(;f<=a&&(1!==h||1!==c||1!==d&&s!==x);){h=Math.ceil(Math.max(h/2,1)),c=Math.ceil(Math.max(c/2,1)),d=s===x?d:Math.ceil(Math.max(d/2,1));for(let e=0;e<m;++e)E(r,g+e,f,u,h,c,d,p);++f}},getSupportedExtensions(e,t,i,s){n.isContextLost||s.push("GMAN_webgl_memory")},renderbufferStorage(e,t,i){const[s,n,r,o]=i;v(s,1,n,r,o)},renderbufferStorageMultisample(e,t,i){const[s,n,r,o,a]=i;v(s,n,r,o,a)},texImage2D(e,t,i){if(n.isContextLost)return;const[s,r,o]=i;let a,l,h;if(6===i.length){const e=i[5];a=e.width,l=e.height,h=i[4]}else a=i[3],l=i[4],h=i[7];E(I(s),s,r,o,a,l,1,h)},texImage3D(e,t,i){if(n.isContextLost)return;const[s,r,o,a,l,h,,,c]=i;E(I(s),s,r,o,a,l,h,c)},texParameteri(e,t,i){if(n.isContextLost)return;const[s,r,o]=i,a=I(s);a.parameters=a.parameters||new Map,a.parameters.set(r,o)},texStorage2D(e,t,i){const[s,n,r,o,a]=i;k(s,n,r,o,a,1)},texStorage3D(e,t,i){const[s,n,r,o,a,l]=i;k(s,n,r,o,a,l)}},D={getExtension(e,t){if(n.isContextLost)return;const o=e[t];e[t]=function(...t){const n=t[0].toLowerCase(),a=r[n];if(a)return a.ctx;const l=o.call(e,...t);return l&&p(l,n,{...i,origGLErrorFn:s}),l}}};function R(e,t){const i=e[t],n=M[t]||g,r=T[t]||g;if(n===g&&T===g)return;e[t]=function(...s){n(e,t,s);const o=i.call(e,...s);return r(e,t,s,o),o};const o=D[t];o&&o(e,t,s)}for(const t in e)"function"==typeof e[t]&&(m[t]=e[t],R(e,t));r[t.toLowerCase()]={ctx:e,origFuncs:m}}function f(e){const t=e.prototype.getContext;e.prototype.getContext=function(e,...i){const s=t.call(this,e,...i);return s&&s.bindTexture&&(p(s,e,{}),s.getExtension("GMAN_webgl_memory")),s}}"undefined"!=typeof HTMLCanvasElement&&f(HTMLCanvasElement),"undefined"!=typeof OffscreenCanvas&&f(OffscreenCanvas)},"function"==typeof define&&define.amd?define(G):G();class N{constructor(e){this.renderer=e,this.memo=this.renderer.getContext().getExtension("GMAN_webgl_memory")}get(){const e=this.memo.getMemoryInfo(),t=this.renderer.info;return e.engine={geometries:t.memory.geometries,textures:t.memory.textures,calls:t.render.calls,triangles:t.render.triangles,points:t.render.points,lines:t.render.lines},1===e.engine.geometries&&(e.engine.geometries=0),this.format(e)}format(e){let t=e;if(""!==e){for(let t in e.memory)e.memory[t]="drawingbuffer"===t||"total"===t?Math.round(1e-6*e.memory[t])+" Mb":Math.round(.001*e.memory[t])+" Kb";t=JSON.stringify(e,null,2),t=t.replace(/[",.*+?^${}()|[\]\\]/g,"")}return t}}function V(e,t,i,s){return new(i||(i=Promise))((function(t,n){function r(e){try{a(s.next(e))}catch(e){n(e)}}function o(e){try{a(s.throw(e))}catch(e){n(e)}}function a(e){var s;e.done?t(e.value):(s=e.value,s instanceof i?s:new i((function(e){e(s)}))).then(r,o)}a((s=s.apply(e,[])).next())}))}const j=["geforce 320m","geforce 8600","geforce 8600m gt","geforce 8800 gs","geforce 8800 gt","geforce 9400","geforce 9400m g","geforce 9400m","geforce 9600m gt","geforce 9600m","geforce fx go5200","geforce gt 120","geforce gt 130","geforce gt 330m","geforce gtx 285","google swiftshader","intel g41","intel g45","intel gma 4500mhd","intel gma x3100","intel hd 3000","intel q45","legacy","mali-2","mali-3","mali-4","quadro fx 1500","quadro fx 4","quadro fx 5","radeon hd 2400","radeon hd 2600","radeon hd 4670","radeon hd 4850","radeon hd 4870","radeon hd 5670","radeon hd 5750","radeon hd 6290","radeon hd 6300","radeon hd 6310","radeon hd 6320","radeon hd 6490m","radeon hd 6630m","radeon hd 6750m","radeon hd 6770m","radeon hd 6970m","sgx 543","sgx543"];function H(e){return e.toLowerCase().replace(/.*angle ?\((.+)\)(?: on vulkan [0-9.]+)?$/i,"$1").replace(/\s(\d{1,2}gb|direct3d.+$)|\(r\)| \([^)]+\)$/g,"").replace(/(?:vulkan|opengl) \d+\.\d+(?:\.\d+)?(?: \((.*)\))?/,"$1")}const q="undefined"==typeof window,X=(()=>{if(q)return;const{userAgent:e,platform:t,maxTouchPoints:i}=window.navigator,s=/(iphone|ipod|ipad)/i.test(e),n="iPad"===t||"MacIntel"===t&&i>0&&!window.MSStream;return{isIpad:n,isMobile:/android/i.test(e)||s||n,isSafari12:/Version\/12.+Safari/.test(e)}})();function W(e,t,i){if(!i)return[t];const s=function(e){const t=e.createShader(35633),i=e.createShader(35632),s=e.createProgram();if(!(i&&t&&s))return;e.shaderSource(t,"\n    precision highp float;\n    attribute vec3 aPosition;\n    varying float vvv;\n    void main() {\n      vvv = 0.31622776601683794;\n      gl_Position = vec4(aPosition, 1.0);\n    }\n  "),e.shaderSource(i,"\n    precision highp float;\n    varying float vvv;\n    void main() {\n      vec4 enc = vec4(1.0, 255.0, 65025.0, 16581375.0) * vvv;\n      enc = fract(enc);\n      enc -= enc.yzww * vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0, 0.0);\n      gl_FragColor = enc;\n    }\n  "),e.compileShader(t),e.compileShader(i),e.attachShader(s,t),e.attachShader(s,i),e.linkProgram(s),e.detachShader(s,t),e.detachShader(s,i),e.deleteShader(t),e.deleteShader(i),e.useProgram(s);const n=e.createBuffer();e.bindBuffer(34962,n),e.bufferData(34962,new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),35044);const r=e.getAttribLocation(s,"aPosition");e.vertexAttribPointer(r,3,5126,!1,0,0),e.enableVertexAttribArray(r),e.clearColor(1,1,1,1),e.clear(16384),e.viewport(0,0,1,1),e.drawArrays(4,0,3);const o=new Uint8Array(4);return e.readPixels(0,0,1,1,6408,5121,o),e.deleteProgram(s),e.deleteBuffer(n),o.join("")}(e),n="801621810",r="8016218135",o="80162181161",a=(null==X?void 0:X.isIpad)?[["a7",o,12],["a8",r,15],["a8x",r,15],["a9",r,15],["a9x",r,15],["a10",r,15],["a10x",r,15],["a12",n,15],["a12x",n,15],["a12z",n,15],["a14",n,15],["m1",n,15]]:[["a7",o,12],["a8",r,12],["a9",r,15],["a10",r,15],["a11",n,15],["a12",n,15],["a13",n,15],["a14",n,15]];let l;return"80162181255"===s?l=a.filter((([,,e])=>e>=14)):(l=a.filter((([,e])=>e===s)),l.length||(l=a)),l.map((([e])=>`apple ${e} gpu`))}let Z=class extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}};const Y=[],_=[];function K(e,t){if(e===t)return 0;const i=e;e.length>t.length&&(e=t,t=i);let s=e.length,n=t.length;for(;s>0&&e.charCodeAt(~-s)===t.charCodeAt(~-n);)s--,n--;let r,o=0;for(;o<s&&e.charCodeAt(o)===t.charCodeAt(o);)o++;if(s-=o,n-=o,0===s)return n;let a,l,h=0,c=0,d=0;for(;c<s;)_[c]=e.charCodeAt(o+c),Y[c]=++c;for(;d<n;)for(r=t.charCodeAt(o+d),a=d++,h=d,c=0;c<s;c++)l=r===_[c]?a:a+1,a=Y[c],h=Y[c]=a>h?l>h?h+1:l:l>a?a+1:l;return h}function J(e){return null!=e}const $=({mobileTiers:e=[0,15,30,60],desktopTiers:t=[0,15,30,60],override:i={},glContext:s,failIfMajorPerformanceCaveat:n=!1,benchmarksURL:r="https://unpkg.com/detect-gpu@5.0.15/dist/benchmarks"}={})=>V(void 0,void 0,void 0,(function*(){const o={};if(q)return{tier:0,type:"SSR"};const{isIpad:a=!!(null==X?void 0:X.isIpad),isMobile:l=!!(null==X?void 0:X.isMobile),screenSize:h=window.screen,loadBenchmarks:c=e=>V(void 0,void 0,void 0,(function*(){const t=yield fetch(`${r}/${e}`).then((e=>e.json()));if(parseInt(t.shift().split(".")[0],10)<4)throw new Z("Detect GPU benchmark data is out of date. Please update to version 4x");return t}))}=i;let{renderer:d}=i;const u=(e,t,i,s,n)=>({device:n,fps:s,gpu:i,isMobile:l,tier:e,type:t});let p,f="";if(d)d=H(d),p=[d];else{const e=s||function(e,t=!1){const i={alpha:!1,antialias:!1,depth:!1,failIfMajorPerformanceCaveat:t,powerPreference:"high-performance",stencil:!1};e&&delete i.powerPreference;const s=window.document.createElement("canvas"),n=s.getContext("webgl",i)||s.getContext("experimental-webgl",i);return null!=n?n:void 0}(null==X?void 0:X.isSafari12,n);if(!e)return u(0,"WEBGL_UNSUPPORTED");const t=e.getExtension("WEBGL_debug_renderer_info");if(t&&(d=e.getParameter(t.UNMASKED_RENDERER_WEBGL)),!d)return u(1,"FALLBACK");f=d,d=H(d),p=function(e,t,i){return"apple gpu"===t?W(e,t,i):[t]}(e,d,l)}const m=(yield Promise.all(p.map((function(e){var t;return V(this,void 0,void 0,(function*(){const i=(e=>{const t=l?["adreno","apple","mali-t","mali","nvidia","powervr","samsung"]:["intel","apple","amd","radeon","nvidia","geforce"];for(const i of t)if(e.includes(i))return i})(e);if(!i)return;const s=`${l?"m":"d"}-${i}${a?"-ipad":""}.json`,n=o[s]=null!==(t=o[s])&&void 0!==t?t:c(s);let r;try{r=yield n}catch(i){if(i instanceof Z)throw i;return}const d=function(e){var t;const i=(e=e.replace(/\([^)]+\)/,"")).match(/\d+/)||e.match(/(\W|^)([A-Za-z]{1,3})(\W|$)/g);return null!==(t=null==i?void 0:i.join("").replace(/\W|amd/g,""))&&void 0!==t?t:""}(e);let u=r.filter((([,e])=>e===d));u.length||(u=r.filter((([t])=>t.includes(e))));const p=u.length;if(0===p)return;const f=e.split(/[.,()\[\]/\s]/g).sort().filter(((e,t,i)=>0===t||e!==i[t-1])).join(" ");let m,[g,,,,A]=p>1?u.map((e=>[e,K(f,e[2])])).sort((([,e],[,t])=>e-t))[0][0]:u[0],b=Number.MAX_VALUE;const{devicePixelRatio:v}=window,y=h.width*v*h.height*v;for(const e of A){const[t,i]=e,s=t*i,n=Math.abs(y-s);n<b&&(b=n,m=e)}if(!m)return;const[,,w,x]=m;return[b,w,g,x]}))})))).filter(J).sort((([e=Number.MAX_VALUE,t],[i=Number.MAX_VALUE,s])=>e===i?t-s:e-i));if(!m.length){const e=j.find((e=>d.includes(e)));return e?u(0,"BLOCKLISTED",e):u(1,"FALLBACK",`${d} (${f})`)}const[,g,A,b]=m[0];if(-1===g)return u(0,"BLOCKLISTED",A,g,b);const v=l?e:t;let y=0;for(let e=0;e<v.length;e++)g>=v[e]&&(y=e);return u(y,"BENCHMARK",A,g,b)}));var ee=Object.freeze({Linear:Object.freeze({None:function(e){return e},In:function(e){return e},Out:function(e){return e},InOut:function(e){return e}}),Quadratic:Object.freeze({In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}}),Cubic:Object.freeze({In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}}),Quartic:Object.freeze({In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}}),Quintic:Object.freeze({In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}}),Sinusoidal:Object.freeze({In:function(e){return 1-Math.sin((1-e)*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.sin(Math.PI*(.5-e)))}}),Exponential:Object.freeze({In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}}),Circular:Object.freeze({In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}}),Elastic:Object.freeze({In:function(e){return 0===e?0:1===e?1:-Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)},Out:function(e){return 0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin(5*(e-.1)*Math.PI)+1},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?-.5*Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)+1}}),Back:Object.freeze({In:function(e){var t=1.70158;return 1===e?1:e*e*((t+1)*e-t)},Out:function(e){var t=1.70158;return 0===e?0:--e*e*((t+1)*e+t)+1},InOut:function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}}),Bounce:Object.freeze({In:function(e){return 1-ee.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?.5*ee.Bounce.In(2*e):.5*ee.Bounce.Out(2*e-1)+.5}}),generatePow:function(e){return void 0===e&&(e=4),e=(e=e<Number.EPSILON?Number.EPSILON:e)>1e4?1e4:e,{In:function(t){return Math.pow(t,e)},Out:function(t){return 1-Math.pow(1-t,e)},InOut:function(t){return t<.5?Math.pow(2*t,e)/2:(1-Math.pow(2-2*t,e))/2+.5}}}}),te=function(){return performance.now()},ie=function(){function e(){this._tweens={},this._tweensAddedDuringUpdate={}}return e.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map((function(t){return e._tweens[t]}))},e.prototype.removeAll=function(){this._tweens={}},e.prototype.add=function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},e.prototype.remove=function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},e.prototype.update=function(e,t){void 0===e&&(e=te()),void 0===t&&(t=!1);var i=Object.keys(this._tweens);if(0===i.length)return!1;for(;i.length>0;){this._tweensAddedDuringUpdate={};for(var s=0;s<i.length;s++){var n=this._tweens[i[s]],r=!t;n&&!1===n.update(e,r)&&!t&&delete this._tweens[i[s]]}i=Object.keys(this._tweensAddedDuringUpdate)}return!0},e}(),se={Linear:function(e,t){var i=e.length-1,s=i*t,n=Math.floor(s),r=se.Utils.Linear;return t<0?r(e[0],e[1],s):t>1?r(e[i],e[i-1],i-s):r(e[n],e[n+1>i?i:n+1],s-n)},Utils:{Linear:function(e,t,i){return(t-e)*i+e}}},ne=function(){function e(){}return e.nextId=function(){return e._nextId++},e._nextId=0,e}(),re=new ie,oe=function(){function e(e,t){void 0===t&&(t=re),this._object=e,this._group=t,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=ee.Linear.None,this._interpolationFunction=se.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=ne.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1}return e.prototype.getId=function(){return this._id},e.prototype.isPlaying=function(){return this._isPlaying},e.prototype.isPaused=function(){return this._isPaused},e.prototype.getDuration=function(){return this._duration},e.prototype.to=function(e,t){if(void 0===t&&(t=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=e,this._propertiesAreSetUp=!1,this._duration=t<0?0:t,this},e.prototype.duration=function(e){return void 0===e&&(e=1e3),this._duration=e<0?0:e,this},e.prototype.dynamic=function(e){return void 0===e&&(e=!1),this._isDynamic=e,this},e.prototype.start=function(e,t){if(void 0===e&&(e=te()),void 0===t&&(t=!1),this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed)for(var i in this._reversed=!1,this._valuesStartRepeat)this._swapEndStartRepeatValues(i),this._valuesStart[i]=this._valuesStartRepeat[i];if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=e,this._startTime+=this._delayTime,!this._propertiesAreSetUp||t){if(this._propertiesAreSetUp=!0,!this._isDynamic){var s={};for(var n in this._valuesEnd)s[n]=this._valuesEnd[n];this._valuesEnd=s}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,t)}return this},e.prototype.startFromCurrentValues=function(e){return this.start(e,!0)},e.prototype._setupProperties=function(e,t,i,s,n){for(var r in i){var o=e[r],a=Array.isArray(o),l=a?"array":typeof o,h=!a&&Array.isArray(i[r]);if("undefined"!==l&&"function"!==l){if(h){if(0===(g=i[r]).length)continue;for(var c=[o],d=0,u=g.length;d<u;d+=1){var p=this._handleRelativeValue(o,g[d]);if(isNaN(p)){h=!1,console.warn("Found invalid interpolation list. Skipping.");break}c.push(p)}h&&(i[r]=c)}if("object"!==l&&!a||!o||h)(void 0===t[r]||n)&&(t[r]=o),a||(t[r]*=1),s[r]=h?i[r].slice().reverse():t[r]||0;else{t[r]=a?[]:{};var f=o;for(var m in f)t[r][m]=f[m];s[r]=a?[]:{};var g=i[r];if(!this._isDynamic){var A={};for(var m in g)A[m]=g[m];i[r]=g=A}this._setupProperties(f,t[r],g,s[r],n)}}}},e.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},e.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},e.prototype.pause=function(e){return void 0===e&&(e=te()),this._isPaused||!this._isPlaying||(this._isPaused=!0,this._pauseStart=e,this._group&&this._group.remove(this)),this},e.prototype.resume=function(e){return void 0===e&&(e=te()),this._isPaused&&this._isPlaying?(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this):this},e.prototype.stopChainedTweens=function(){for(var e=0,t=this._chainedTweens.length;e<t;e++)this._chainedTweens[e].stop();return this},e.prototype.group=function(e){return void 0===e&&(e=re),this._group=e,this},e.prototype.delay=function(e){return void 0===e&&(e=0),this._delayTime=e,this},e.prototype.repeat=function(e){return void 0===e&&(e=0),this._initialRepeat=e,this._repeat=e,this},e.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},e.prototype.yoyo=function(e){return void 0===e&&(e=!1),this._yoyo=e,this},e.prototype.easing=function(e){return void 0===e&&(e=ee.Linear.None),this._easingFunction=e,this},e.prototype.interpolation=function(e){return void 0===e&&(e=se.Linear),this._interpolationFunction=e,this},e.prototype.chain=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._chainedTweens=e,this},e.prototype.onStart=function(e){return this._onStartCallback=e,this},e.prototype.onEveryStart=function(e){return this._onEveryStartCallback=e,this},e.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},e.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},e.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},e.prototype.onStop=function(e){return this._onStopCallback=e,this},e.prototype.update=function(e,t){var i;if(void 0===e&&(e=te()),void 0===t&&(t=!0),this._isPaused)return!0;var s=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(e>s)return!1;t&&this.start(e,!0)}if(this._goToEnd=!1,e<this._startTime)return!0;!1===this._onStartCallbackFired&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),!1===this._onEveryStartCallbackFired&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var n=e-this._startTime,r=this._duration+(null!==(i=this._repeatDelayTime)&&void 0!==i?i:this._delayTime),o=this._duration+this._repeat*r,a=this._calculateElapsedPortion(n,r,o),l=this._easingFunction(a),h=this._calculateCompletionStatus(n,r);if("repeat"===h&&this._processRepetition(n,r),this._updateProperties(this._object,this._valuesStart,this._valuesEnd,l),"about-to-repeat"===h&&this._processRepetition(n,r),this._onUpdateCallback&&this._onUpdateCallback(this._object,a),"repeat"===h||"about-to-repeat"===h)this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1;else if("completed"===h){this._isPlaying=!1,this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var c=0,d=this._chainedTweens.length;c<d;c++)this._chainedTweens[c].start(this._startTime+this._duration,!1)}return"completed"!==h},e.prototype._calculateElapsedPortion=function(e,t,i){if(0===this._duration||e>i)return 1;var s=e%t,n=Math.min(s/this._duration,1);return 0===n&&0!==e&&e%this._duration==0?1:n},e.prototype._calculateCompletionStatus=function(e,t){return 0!==this._duration&&e<this._duration?"playing":this._repeat<=0?"completed":e===this._duration?"about-to-repeat":"repeat"},e.prototype._processRepetition=function(e,t){var i=Math.min(Math.trunc((e-this._duration)/t)+1,this._repeat);for(var s in isFinite(this._repeat)&&(this._repeat-=i),this._valuesStartRepeat){var n=this._valuesEnd[s];this._yoyo||"string"!=typeof n||(this._valuesStartRepeat[s]=this._valuesStartRepeat[s]+parseFloat(n)),this._yoyo&&this._swapEndStartRepeatValues(s),this._valuesStart[s]=this._valuesStartRepeat[s]}this._yoyo&&(this._reversed=!this._reversed),this._startTime+=t*i},e.prototype._updateProperties=function(e,t,i,s){for(var n in i)if(void 0!==t[n]){var r=t[n]||0,o=i[n],a=Array.isArray(e[n]),l=Array.isArray(o);!a&&l?e[n]=this._interpolationFunction(o,s):"object"==typeof o&&o?this._updateProperties(e[n],r,o,s):"number"==typeof(o=this._handleRelativeValue(r,o))&&(e[n]=r+(o-r)*s)}},e.prototype._handleRelativeValue=function(e,t){return"string"!=typeof t?t:"+"===t.charAt(0)||"-"===t.charAt(0)?e+parseFloat(t):parseFloat(t)},e.prototype._swapEndStartRepeatValues=function(e){var t=this._valuesStartRepeat[e],i=this._valuesEnd[e];this._valuesStartRepeat[e]="string"==typeof i?this._valuesStartRepeat[e]+parseFloat(i):this._valuesEnd[e],this._valuesEnd[e]=t},e}();ne.nextId;var ae=re;ae.getAll.bind(ae),ae.removeAll.bind(ae),ae.add.bind(ae);var le=ae.remove.bind(ae);ae.update.bind(ae);const he={type:"change"},ce={type:"start"},de={type:"end"},ue=new i.Ray,pe=new i.Plane,fe=Math.cos(70*i.MathUtils.DEG2RAD);class me extends i.EventDispatcher{constructor(e,t){super(),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new i.Vector3,this.cursor=new i.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:i.MOUSE.ROTATE,MIDDLE:i.MOUSE.DOLLY,RIGHT:i.MOUSE.PAN},this.touches={ONE:i.TOUCH.ROTATE,TWO:i.TOUCH.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return a.phi},this.getAzimuthalAngle=function(){return a.theta},this.getSpherical=function(){return a},this.getState=function(){return r},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(e){e.addEventListener("keydown",_),this._domElementKeyEvents=e},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",_),this._domElementKeyEvents=null},this.saveState=function(){s.target0.copy(s.target),s.position0.copy(s.object.position),s.zoom0=s.object.zoom},this.reset=function(){s.target.copy(s.target0),s.object.position.copy(s.position0),s.object.zoom=s.zoom0,s.object.updateProjectionMatrix(),s.dispatchEvent(he),s.update(),r=n.NONE},this.update=function(){const t=new i.Vector3,d=(new i.Quaternion).setFromUnitVectors(e.up,new i.Vector3(0,1,0)),u=d.clone().invert(),p=new i.Vector3,f=new i.Quaternion,m=new i.Vector3,g=2*Math.PI;return function(A=null){const b=s.object.position;t.copy(b).sub(s.target),t.applyQuaternion(d),a.setFromVector3(t),s.autoRotate&&r===n.NONE&&E(function(e){return null!==e?2*Math.PI/60*s.autoRotateSpeed*e:2*Math.PI/60/60*s.autoRotateSpeed}(A)),s.enableDamping?(a.theta+=l.theta*s.dampingFactor,a.phi+=l.phi*s.dampingFactor):(a.theta+=l.theta,a.phi+=l.phi);let v=s.minAzimuthAngle,O=s.maxAzimuthAngle;isFinite(v)&&isFinite(O)&&(v<-Math.PI?v+=g:v>Math.PI&&(v-=g),O<-Math.PI?O+=g:O>Math.PI&&(O-=g),a.theta=v<=O?Math.max(v,Math.min(O,a.theta)):a.theta>(v+O)/2?Math.max(v,a.theta):Math.min(O,a.theta)),a.phi=Math.max(s.minPolarAngle,Math.min(s.maxPolarAngle,a.phi)),a.makeSafe(),!0===s.enableDamping?s.target.addScaledVector(c,s.dampingFactor):s.target.add(c),s.target.sub(s.cursor),s.target.clampLength(s.minTargetRadius,s.maxTargetRadius),s.target.add(s.cursor);let C=!1;if(s.zoomToCursor&&x||s.object.isOrthographicCamera)a.radius=P(a.radius);else{const e=a.radius;a.radius=P(a.radius*h),C=e!=a.radius}if(t.setFromSpherical(a),t.applyQuaternion(u),b.copy(s.target).add(t),s.object.lookAt(s.target),!0===s.enableDamping?(l.theta*=1-s.dampingFactor,l.phi*=1-s.dampingFactor,c.multiplyScalar(1-s.dampingFactor)):(l.set(0,0,0),c.set(0,0,0)),s.zoomToCursor&&x){let n=null;if(s.object.isPerspectiveCamera){const e=t.length();n=P(e*h);const i=e-n;s.object.position.addScaledVector(y,i),s.object.updateMatrixWorld(),C=!!i}else if(s.object.isOrthographicCamera){const e=new i.Vector3(w.x,w.y,0);e.unproject(s.object);const r=s.object.zoom;s.object.zoom=Math.max(s.minZoom,Math.min(s.maxZoom,s.object.zoom/h)),s.object.updateProjectionMatrix(),C=r!==s.object.zoom;const o=new i.Vector3(w.x,w.y,0);o.unproject(s.object),s.object.position.sub(o).add(e),s.object.updateMatrixWorld(),n=t.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),s.zoomToCursor=!1;null!==n&&(this.screenSpacePanning?s.target.set(0,0,-1).transformDirection(s.object.matrix).multiplyScalar(n).add(s.object.position):(ue.origin.copy(s.object.position),ue.direction.set(0,0,-1).transformDirection(s.object.matrix),Math.abs(s.object.up.dot(ue.direction))<fe?e.lookAt(s.target):(pe.setFromNormalAndCoplanarPoint(s.object.up,s.target),ue.intersectPlane(pe,s.target))))}else if(s.object.isOrthographicCamera){const e=s.object.zoom;s.object.zoom=Math.max(s.minZoom,Math.min(s.maxZoom,s.object.zoom/h)),e!==s.object.zoom&&(s.object.updateProjectionMatrix(),C=!0)}return h=1,x=!1,!!(C||p.distanceToSquared(s.object.position)>o||8*(1-f.dot(s.object.quaternion))>o||m.distanceToSquared(s.target)>o)&&(s.dispatchEvent(he),p.copy(s.object.position),f.copy(s.object.quaternion),m.copy(s.target),!0)}}(),this.dispose=function(){s.domElement.removeEventListener("contextmenu",J),s.domElement.removeEventListener("pointerdown",H),s.domElement.removeEventListener("pointercancel",X),s.domElement.removeEventListener("wheel",W),s.domElement.removeEventListener("pointermove",q),s.domElement.removeEventListener("pointerup",X);s.domElement.getRootNode().removeEventListener("keydown",Z,{capture:!0}),null!==s._domElementKeyEvents&&(s._domElementKeyEvents.removeEventListener("keydown",_),s._domElementKeyEvents=null)};const s=this,n={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let r=n.NONE;const o=1e-6,a=new i.Spherical,l=new i.Spherical;let h=1;const c=new i.Vector3,d=new i.Vector2,u=new i.Vector2,p=new i.Vector2,f=new i.Vector2,m=new i.Vector2,g=new i.Vector2,A=new i.Vector2,b=new i.Vector2,v=new i.Vector2,y=new i.Vector3,w=new i.Vector2;let x=!1;const O=[],C={};let S=!1;function I(e){const t=Math.abs(.01*e);return Math.pow(.95,s.zoomSpeed*t)}function E(e){l.theta-=e}function k(e){l.phi-=e}const B=function(){const e=new i.Vector3;return function(t,i){e.setFromMatrixColumn(i,0),e.multiplyScalar(-t),c.add(e)}}(),Q=function(){const e=new i.Vector3;return function(t,i){!0===s.screenSpacePanning?e.setFromMatrixColumn(i,1):(e.setFromMatrixColumn(i,0),e.crossVectors(s.object.up,e)),e.multiplyScalar(t),c.add(e)}}(),M=function(){const e=new i.Vector3;return function(t,i){const n=s.domElement;if(s.object.isPerspectiveCamera){const r=s.object.position;e.copy(r).sub(s.target);let o=e.length();o*=Math.tan(s.object.fov/2*Math.PI/180),B(2*t*o/n.clientHeight,s.object.matrix),Q(2*i*o/n.clientHeight,s.object.matrix)}else s.object.isOrthographicCamera?(B(t*(s.object.right-s.object.left)/s.object.zoom/n.clientWidth,s.object.matrix),Q(i*(s.object.top-s.object.bottom)/s.object.zoom/n.clientHeight,s.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),s.enablePan=!1)}}();function T(e){s.object.isPerspectiveCamera||s.object.isOrthographicCamera?h/=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),s.enableZoom=!1)}function D(e){s.object.isPerspectiveCamera||s.object.isOrthographicCamera?h*=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),s.enableZoom=!1)}function R(e,t){if(!s.zoomToCursor)return;x=!0;const i=s.domElement.getBoundingClientRect(),n=e-i.left,r=t-i.top,o=i.width,a=i.height;w.x=n/o*2-1,w.y=-r/a*2+1,y.set(w.x,w.y,1).unproject(s.object).sub(s.object.position).normalize()}function P(e){return Math.max(s.minDistance,Math.min(s.maxDistance,e))}function L(e){d.set(e.clientX,e.clientY)}function F(e){f.set(e.clientX,e.clientY)}function U(e){if(1===O.length)d.set(e.pageX,e.pageY);else{const t=ee(e),i=.5*(e.pageX+t.x),s=.5*(e.pageY+t.y);d.set(i,s)}}function z(e){if(1===O.length)f.set(e.pageX,e.pageY);else{const t=ee(e),i=.5*(e.pageX+t.x),s=.5*(e.pageY+t.y);f.set(i,s)}}function G(e){const t=ee(e),i=e.pageX-t.x,s=e.pageY-t.y,n=Math.sqrt(i*i+s*s);A.set(0,n)}function N(e){if(1==O.length)u.set(e.pageX,e.pageY);else{const t=ee(e),i=.5*(e.pageX+t.x),s=.5*(e.pageY+t.y);u.set(i,s)}p.subVectors(u,d).multiplyScalar(s.rotateSpeed);const t=s.domElement;E(2*Math.PI*p.x/t.clientHeight),k(2*Math.PI*p.y/t.clientHeight),d.copy(u)}function V(e){if(1===O.length)m.set(e.pageX,e.pageY);else{const t=ee(e),i=.5*(e.pageX+t.x),s=.5*(e.pageY+t.y);m.set(i,s)}g.subVectors(m,f).multiplyScalar(s.panSpeed),M(g.x,g.y),f.copy(m)}function j(e){const t=ee(e),i=e.pageX-t.x,n=e.pageY-t.y,r=Math.sqrt(i*i+n*n);b.set(0,r),v.set(0,Math.pow(b.y/A.y,s.zoomSpeed)),T(v.y),A.copy(b);R(.5*(e.pageX+t.x),.5*(e.pageY+t.y))}function H(e){!1!==s.enabled&&(0===O.length&&(s.domElement.setPointerCapture(e.pointerId),s.domElement.addEventListener("pointermove",q),s.domElement.addEventListener("pointerup",X)),function(e){for(let t=0;t<O.length;t++)if(O[t]==e.pointerId)return!0;return!1}(e)||(function(e){O.push(e.pointerId)}(e),"touch"===e.pointerType?K(e):function(e){let t;switch(e.button){case 0:t=s.mouseButtons.LEFT;break;case 1:t=s.mouseButtons.MIDDLE;break;case 2:t=s.mouseButtons.RIGHT;break;default:t=-1}switch(t){case i.MOUSE.DOLLY:if(!1===s.enableZoom)return;!function(e){R(e.clientX,e.clientX),A.set(e.clientX,e.clientY)}(e),r=n.DOLLY;break;case i.MOUSE.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===s.enablePan)return;F(e),r=n.PAN}else{if(!1===s.enableRotate)return;L(e),r=n.ROTATE}break;case i.MOUSE.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===s.enableRotate)return;L(e),r=n.ROTATE}else{if(!1===s.enablePan)return;F(e),r=n.PAN}break;default:r=n.NONE}r!==n.NONE&&s.dispatchEvent(ce)}(e)))}function q(e){!1!==s.enabled&&("touch"===e.pointerType?function(e){switch($(e),r){case n.TOUCH_ROTATE:if(!1===s.enableRotate)return;N(e),s.update();break;case n.TOUCH_PAN:if(!1===s.enablePan)return;V(e),s.update();break;case n.TOUCH_DOLLY_PAN:if(!1===s.enableZoom&&!1===s.enablePan)return;!function(e){s.enableZoom&&j(e),s.enablePan&&V(e)}(e),s.update();break;case n.TOUCH_DOLLY_ROTATE:if(!1===s.enableZoom&&!1===s.enableRotate)return;!function(e){s.enableZoom&&j(e),s.enableRotate&&N(e)}(e),s.update();break;default:r=n.NONE}}(e):function(e){switch(r){case n.ROTATE:if(!1===s.enableRotate)return;!function(e){u.set(e.clientX,e.clientY),p.subVectors(u,d).multiplyScalar(s.rotateSpeed);const t=s.domElement;E(2*Math.PI*p.x/t.clientHeight),k(2*Math.PI*p.y/t.clientHeight),d.copy(u),s.update()}(e);break;case n.DOLLY:if(!1===s.enableZoom)return;!function(e){b.set(e.clientX,e.clientY),v.subVectors(b,A),v.y>0?T(I(v.y)):v.y<0&&D(I(v.y)),A.copy(b),s.update()}(e);break;case n.PAN:if(!1===s.enablePan)return;!function(e){m.set(e.clientX,e.clientY),g.subVectors(m,f).multiplyScalar(s.panSpeed),M(g.x,g.y),f.copy(m),s.update()}(e)}}(e))}function X(e){switch(function(e){delete C[e.pointerId];for(let t=0;t<O.length;t++)if(O[t]==e.pointerId)return void O.splice(t,1)}(e),O.length){case 0:s.domElement.releasePointerCapture(e.pointerId),s.domElement.removeEventListener("pointermove",q),s.domElement.removeEventListener("pointerup",X),s.dispatchEvent(de),r=n.NONE;break;case 1:const t=O[0],i=C[t];K({pointerId:t,pageX:i.x,pageY:i.y})}}function W(e){!1!==s.enabled&&!1!==s.enableZoom&&r===n.NONE&&(e.preventDefault(),s.dispatchEvent(ce),function(e){R(e.clientX,e.clientY),e.deltaY<0?D(I(e.deltaY)):e.deltaY>0&&T(I(e.deltaY)),s.update()}(function(e){const t=e.deltaMode,i={clientX:e.clientX,clientY:e.clientY,deltaY:e.deltaY};switch(t){case 1:i.deltaY*=16;break;case 2:i.deltaY*=100}e.ctrlKey&&!S&&(i.deltaY*=10);return i}(e)),s.dispatchEvent(de))}function Z(e){if("Control"===e.key){S=!0;s.domElement.getRootNode().addEventListener("keyup",Y,{passive:!0,capture:!0})}}function Y(e){if("Control"===e.key){S=!1;s.domElement.getRootNode().removeEventListener("keyup",Y,{passive:!0,capture:!0})}}function _(e){!1!==s.enabled&&!1!==s.enablePan&&function(e){let t=!1;switch(e.code){case s.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?k(2*Math.PI*s.rotateSpeed/s.domElement.clientHeight):M(0,s.keyPanSpeed),t=!0;break;case s.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?k(-2*Math.PI*s.rotateSpeed/s.domElement.clientHeight):M(0,-s.keyPanSpeed),t=!0;break;case s.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?E(2*Math.PI*s.rotateSpeed/s.domElement.clientHeight):M(s.keyPanSpeed,0),t=!0;break;case s.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?E(-2*Math.PI*s.rotateSpeed/s.domElement.clientHeight):M(-s.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),s.update())}(e)}function K(e){switch($(e),O.length){case 1:switch(s.touches.ONE){case i.TOUCH.ROTATE:if(!1===s.enableRotate)return;U(e),r=n.TOUCH_ROTATE;break;case i.TOUCH.PAN:if(!1===s.enablePan)return;z(e),r=n.TOUCH_PAN;break;default:r=n.NONE}break;case 2:switch(s.touches.TWO){case i.TOUCH.DOLLY_PAN:if(!1===s.enableZoom&&!1===s.enablePan)return;!function(e){s.enableZoom&&G(e),s.enablePan&&z(e)}(e),r=n.TOUCH_DOLLY_PAN;break;case i.TOUCH.DOLLY_ROTATE:if(!1===s.enableZoom&&!1===s.enableRotate)return;!function(e){s.enableZoom&&G(e),s.enableRotate&&U(e)}(e),r=n.TOUCH_DOLLY_ROTATE;break;default:r=n.NONE}break;default:r=n.NONE}r!==n.NONE&&s.dispatchEvent(ce)}function J(e){!1!==s.enabled&&e.preventDefault()}function $(e){let t=C[e.pointerId];void 0===t&&(t=new i.Vector2,C[e.pointerId]=t),t.set(e.pageX,e.pageY)}function ee(e){const t=e.pointerId===O[0]?O[1]:O[0];return C[t]}s.domElement.addEventListener("contextmenu",J),s.domElement.addEventListener("pointerdown",H),s.domElement.addEventListener("pointercancel",X),s.domElement.addEventListener("wheel",W,{passive:!1});s.domElement.getRootNode().addEventListener("keydown",Z,{passive:!0,capture:!0}),this.update()}}const ge={torad:Math.PI/180,todeg:180/Math.PI,Pi:Math.PI,TwoPI:2*Math.PI,PI90:.5*Math.PI,PI45:.25*Math.PI,PI270:.5*Math.PI*3,inv255:.003921569,golden:1.618033,epsilon:Math.pow(2,-52),randomSign:()=>Math.random()<.5?-1:1,randSpread:e=>e*(.5-Math.random()),rand:(e=0,t=1)=>e+Math.random()*(t-e),randInt:(e,t)=>e+Math.floor(Math.random()*(t-e+1)),toFixed:(e,t=3)=>1*e.toFixed(t),int:e=>Math.floor(e),lerp:(e,t,i)=>(1-i)*e+i*t,clamp:(e,t,i)=>Math.max(t,Math.min(i,e)),nearEquals:(e,t,i)=>Math.abs(e-t)<=i,lerpAr:(e,t,i,s)=>{let n=e.length;for(;n--;)e[n]=ge.lerp(t[n],i[n],s)},unwrapDeg:e=>e-360*Math.floor((e+180)/360),unwrapRad:e=>Math.atan2(Math.sin(e),Math.cos(e)),scaleArray:(e,t)=>{for(var i=e.length;i--;)e[i]*=t;return e},addArray:(e,t)=>{for(var i=[],s=e.length;s--;)i[s]=e[s]+t[s];return i},angleDistance:(e,t)=>{var i=(e-t+180)%360-180;return i<-180?i+360:i},tmpE:new i.Euler,tmpM:new i.Matrix4,tmpM2:new i.Matrix4,tmpV:new i.Vector3,tmpQ:new i.Quaternion,fromTransformToQ:(e,t,i)=>(i=i||!1,ge.tmpM.compose(ge.tmpV.fromArray(e),ge.tmpQ.fromArray(t),{x:1,y:1,z:1}),ge.tmpM.decompose(ge.tmpV,ge.tmpQ,{x:1,y:1,z:1}),i&&ge.tmpQ.invert(),ge.tmpQ.toArray()),fromTransform:(e,t,i,s,n)=>(n=n||!1,s=s||[0,0,0,1],ge.tmpM.compose(ge.tmpV.fromArray(e),ge.tmpQ.fromArray(t),{x:1,y:1,z:1}),ge.tmpM2.compose(ge.tmpV.fromArray(i),ge.tmpQ.fromArray(s),{x:1,y:1,z:1}),n?(ge.tmpM.invert(),ge.tmpM.multiply(ge.tmpM2)):ge.tmpM.multiply(ge.tmpM2),ge.tmpM.decompose(ge.tmpV,ge.tmpQ,{x:1,y:1,z:1}),ge.tmpV.toArray()),arCopy:(e,t)=>{},axisToQuatArray:(e,t)=>(t=t||!1,ge.tmpQ.setFromAxisAngle(ge.tmpV.fromArray(e,1),t?e[0]*ge.torad:e[0]).normalize().toArray()),toQuatArray:e=>ge.tmpQ.setFromEuler(ge.tmpE.fromArray(ge.vectorad(e))).toArray(),vectorad:e=>{let t=3,i=[];for(;t--;)i[t]=e[t]*ge.torad;return i[3]=e[3],i},rgbToHex:e=>"0x"+("000000"+(255*e[0]<<16^255*e[1]<<8^255*e[2]).toString(16)).slice(-6),hexToRgb:e=>[((e=Math.floor(e))>>16&255)/255,(e>>8&255)/255,(255&e)/255],htmlToHex:e=>e.toUpperCase().replace("#","0x"),hexToHtml:e=>"#"+("000000"+(e=void 0===e?0:e).toString(16)).substr(-6),rgbToHtml:e=>"#"+("000000"+(255*e[0]<<16^255*e[1]<<8^255*e[2]).toString(16)).slice(-6),perlin:null,resetPerlin:()=>{null!==ge.perlin&&(ge.perlin=null)},noise:(e,t)=>{null===ge.perlin&&(ge.perlin=new Ae);let i,s,n=(t=t||{}).level||[1,.2,.05],r=t.frequency||[.016,.05,.2],o=0,a=0;for(i=0;i<n.length;i++)s=r[i],o+=n[i]*(.5+.5*ge.perlin.noise3d(e.x*s,e.y*s,e.z*s)),a+=n[i];return o/=a,o}};class Ae{constructor(e){null==e&&(e=Math),this.grad3=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]],this.grad4=[[0,1,1,1],[0,1,1,-1],[0,1,-1,1],[0,1,-1,-1],[0,-1,1,1],[0,-1,1,-1],[0,-1,-1,1],[0,-1,-1,-1],[1,0,1,1],[1,0,1,-1],[1,0,-1,1],[1,0,-1,-1],[-1,0,1,1],[-1,0,1,-1],[-1,0,-1,1],[-1,0,-1,-1],[1,1,0,1],[1,1,0,-1],[1,-1,0,1],[1,-1,0,-1],[-1,1,0,1],[-1,1,0,-1],[-1,-1,0,1],[-1,-1,0,-1],[1,1,1,0],[1,1,-1,0],[1,-1,1,0],[1,-1,-1,0],[-1,1,1,0],[-1,1,-1,0],[-1,-1,1,0],[-1,-1,-1,0]],this.p=[];for(var t=0;t<256;t++)this.p[t]=Math.floor(256*e.random());this.perm=[];for(t=0;t<512;t++)this.perm[t]=this.p[255&t];this.simplex=[[0,1,2,3],[0,1,3,2],[0,0,0,0],[0,2,3,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,3,0],[0,2,1,3],[0,0,0,0],[0,3,1,2],[0,3,2,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,3,2,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,0,3],[0,0,0,0],[1,3,0,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,3,0,1],[2,3,1,0],[1,0,2,3],[1,0,3,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,3,1],[0,0,0,0],[2,1,3,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,1,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,0,1,2],[3,0,2,1],[0,0,0,0],[3,1,2,0],[2,1,0,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,1,0,2],[0,0,0,0],[3,2,0,1],[3,2,1,0]]}dot(e,t,i){return e[0]*t+e[1]*i}dot3(e,t,i,s){return e[0]*t+e[1]*i+e[2]*s}dot4(e,t,i,s,n){return e[0]*t+e[1]*i+e[2]*s+e[3]*n}noise(e,t){var i,s,n=(e+t)*(.5*(Math.sqrt(3)-1)),r=Math.floor(e+n),o=Math.floor(t+n),a=(3-Math.sqrt(3))/6,l=(r+o)*a,h=e-(r-l),c=t-(o-l);h>c?(i=1,s=0):(i=0,s=1);var d=h-i+a,u=c-s+a,p=h-1+2*a,f=c-1+2*a,m=255&r,g=255&o,A=this.perm[m+this.perm[g]]%12,b=this.perm[m+i+this.perm[g+s]]%12,v=this.perm[m+1+this.perm[g+1]]%12,y=.5-h*h-c*c,w=.5-d*d-u*u,x=.5-p*p-f*f;return 70*((y<0?0:(y*=y)*y*this.dot(this.grad3[A],h,c))+(w<0?0:(w*=w)*w*this.dot(this.grad3[b],d,u))+(x<0?0:(x*=x)*x*this.dot(this.grad3[v],p,f)))}noise3d(e,t,i){var s,n,r,o,a,l,h=(e+t+i)*(1/3),c=Math.floor(e+h),d=Math.floor(t+h),u=Math.floor(i+h),p=1/6,f=(c+d+u)*p,m=e-(c-f),g=t-(d-f),A=i-(u-f);m>=g?g>=A?(s=1,n=0,r=0,o=1,a=1,l=0):m>=A?(s=1,n=0,r=0,o=1,a=0,l=1):(s=0,n=0,r=1,o=1,a=0,l=1):g<A?(s=0,n=0,r=1,o=0,a=1,l=1):m<A?(s=0,n=1,r=0,o=0,a=1,l=1):(s=0,n=1,r=0,o=1,a=1,l=0);var b=m-s+p,v=g-n+p,y=A-r+p,w=m-o+2*p,x=g-a+2*p,O=A-l+2*p,C=m-1+.5,S=g-1+.5,I=A-1+.5,E=255&c,k=255&d,B=255&u,Q=this.perm[E+this.perm[k+this.perm[B]]]%12,M=this.perm[E+s+this.perm[k+n+this.perm[B+r]]]%12,T=this.perm[E+o+this.perm[k+a+this.perm[B+l]]]%12,D=this.perm[E+1+this.perm[k+1+this.perm[B+1]]]%12,R=.6-m*m-g*g-A*A,P=.6-b*b-v*v-y*y,L=.6-w*w-x*x-O*O,F=.6-C*C-S*S-I*I;return 32*((R<0?0:(R*=R)*R*this.dot3(this.grad3[Q],m,g,A))+(P<0?0:(P*=P)*P*this.dot3(this.grad3[M],b,v,y))+(L<0?0:(L*=L)*L*this.dot3(this.grad3[T],w,x,O))+(F<0?0:(F*=F)*F*this.dot3(this.grad3[D],C,S,I)))}noise4d(e,t,i,s){var n,r,o,a,l,h,c,d,u,p,f,m,g=this.grad4,A=this.simplex,b=this.perm,v=(Math.sqrt(5)-1)/4,y=(5-Math.sqrt(5))/20,w=(e+t+i+s)*v,x=Math.floor(e+w),O=Math.floor(t+w),C=Math.floor(i+w),S=Math.floor(s+w),I=(x+O+C+S)*y,E=e-(x-I),k=t-(O-I),B=i-(C-I),Q=s-(S-I),M=(E>k?32:0)+(E>B?16:0)+(k>B?8:0)+(E>Q?4:0)+(k>Q?2:0)+(B>Q?1:0),T=E-(n=A[M][0]>=3?1:0)+y,D=k-(r=A[M][1]>=3?1:0)+y,R=B-(o=A[M][2]>=3?1:0)+y,P=Q-(a=A[M][3]>=3?1:0)+y,L=E-(l=A[M][0]>=2?1:0)+2*y,F=k-(h=A[M][1]>=2?1:0)+2*y,U=B-(c=A[M][2]>=2?1:0)+2*y,z=Q-(d=A[M][3]>=2?1:0)+2*y,G=E-(u=A[M][0]>=1?1:0)+3*y,N=k-(p=A[M][1]>=1?1:0)+3*y,V=B-(f=A[M][2]>=1?1:0)+3*y,j=Q-(m=A[M][3]>=1?1:0)+3*y,H=E-1+4*y,q=k-1+4*y,X=B-1+4*y,W=Q-1+4*y,Z=255&x,Y=255&O,_=255&C,K=255&S,J=b[Z+b[Y+b[_+b[K]]]]%32,$=b[Z+n+b[Y+r+b[_+o+b[K+a]]]]%32,ee=b[Z+l+b[Y+h+b[_+c+b[K+d]]]]%32,te=b[Z+u+b[Y+p+b[_+f+b[K+m]]]]%32,ie=b[Z+1+b[Y+1+b[_+1+b[K+1]]]]%32,se=.6-E*E-k*k-B*B-Q*Q,ne=.6-T*T-D*D-R*R-P*P,re=.6-L*L-F*F-U*U-z*z,oe=.6-G*G-N*N-V*V-j*j,ae=.6-H*H-q*q-X*X-W*W;return 27*((se<0?0:(se*=se)*se*this.dot4(g[J],E,k,B,Q))+(ne<0?0:(ne*=ne)*ne*this.dot4(g[$],T,D,R,P))+(re<0?0:(re*=re)*re*this.dot4(g[ee],L,F,U,z))+(oe<0?0:(oe*=oe)*oe*this.dot4(g[te],G,N,V,j))+(ae<0?0:(ae*=ae)*ae*this.dot4(g[ie],H,q,X,W)))}}const be=new i.Spherical;class ve extends me{constructor(e,t,s){super(e,t),this.followTarget=null,this.camTween=[],this.isDecal=!1,this.isInDecal=!1,this.tmpS=new i.Spherical,this.tmpP=new i.Vector3,this.tmpQ=new i.Quaternion,this.cam={stiffness:.15,stiffnessTarget:1,theta:180,phi:20,distance:10,maxDistance:10,height:.6,v:new i.Vector3,d:new i.Vector3,tmp:new i.Vector3,oldp:new i.Vector3,oldq:new i.Quaternion,offset:new i.Vector3,position:new i.Vector3,decal:new i.Vector3,multy:1,clipper:!0,forceFree:!1,simple:!1},this.reverse=!1,this.followGroup=s,this.tmpMatrix=new i.Matrix4,this.tmpE=new i.Euler,this.tmpV=new i.Vector3,this.tmpV2=new i.Vector3,this.info={x:0,y:0,z:0,distance:0,phi:0,theta:0,fov:0,zoom:0},this.getInfo(),this.isFree=!0,this.rayClipper=null,this.tmpV1=new i.Vector3}getSpherical(){return be.set(this.getDistance(),this.getPolarAngle(),this.getAzimuthalAngle()),be}up(e=null){this.enableDamping&&this.enabled&&this.update(),this.follow&&this.follow(e)}resetAll(){this.enableApply=!0,this.minDistance=.001,this.maxDistance=100,this.enablePan=!0,this.enableDamping=!0,this.dampingFactor=.05,this.screenSpacePanning=!0,this.zoomToCursor=!0,this.stopMoveCam(),this.resetFov(),this.resetFollow(),this.setLimite(),this.reverse=!1}upExtra(e){this.cam.distance*=e}startFollow(e,t){void 0!==t.d&&(t.distance=t.d),void 0!==t.h&&(t.theta=t.h),void 0!==t.v&&(t.phi=t.v),this.moveCam(t),this.reverse=t.reverse||!1;let i=this.cam;if(i.simple=void 0!==t.simple&&t.simple,i.stiffness=void 0!==t.stiffness?t.stiffness:.15,i.stiffnessTarget=void 0!==t.stiffnessTarget?t.stiffnessTarget:1,i.height=void 0!==t.height?t.height:.6,i.d.set(0,this.cam.height,0),i.theta=void 0!==t.theta?t.theta:180,i.phi=void 0!==t.phi?t.phi:20,i.distance=void 0!==t.distance?t.distance:10,i.maxDistance=i.distance,i.rotation=void 0===t.rotation||t.rotation,i.offset.set(0,0,0),i.decal.fromArray(void 0!==t.decal?t.decal:[0,0,0]),void 0!==t.dx&&(i.decal.x=t.dx),void 0!==t.dy&&(i.decal.y=t.dy),void 0!==t.dz&&(i.decal.z=t.dz),i.decalY=void 0!==t.decalY?t.decalY:0,i.zoomUp=t.zoomUp||!1,i.clipper=t.clipper||!1,i.exr=t.exr||0,i.forceFree=t.forceFree||!1,t.direct)return this.enablePan=!1,void this.initFollow(e,t);this.enableDamping=t.enableDamping||!1,void 0!==t.dampingFactor&&(this.dampingFactor=t.dampingFactor);let s=this.getTargetStart(e);t.target=s.p,t.theta=ge.unwrapDeg(t.theta+s.r);var n=t.callback;t.callback=function(){n&&n(),this.initFollow(e,t)}.bind(this)}getTargetStart(e){e.updateMatrix(),this.tmpMatrix.makeRotationFromQuaternion(e.quaternion);let t=this.cam,i=Math.atan2(this.tmpMatrix.elements[8],this.tmpMatrix.elements[10]);return 0===t.decal.x&&0===t.decal.z||t.offset.copy(t.position).add(t.decal).applyAxisAngle({x:0,y:1,z:0},i),{p:t.tmp.copy(e.position).add(t.offset).add(t.d).toArray(),r:i*ge.todeg}}initFollow(e,t){this.zoomToCursor=!1,this.screenSpacePanning=!1,this.enableApply=!1,this.cam.oldp.copy(e.position),this.cam.oldq.copy(e.quaternion),this.stopMoveCam(),this.followTarget=e}onRayClipper(e){e.hit?this.cam.distance=ge.clamp(e.distance,this.minDistance,this.cam.maxDistance):this.cam.distance<this.cam.maxDistance&&(this.cam.distance+=this.cam.maxDistance/16),this.maxDistance=this.cam.distance}setOption(e){for(let t in e)this[t]&&(this[t]=e[t])}setLimite(e){e=e||{},this.minPolarAngle=void 0!==e.minV?(90-e.minV)*ge.torad:0,this.maxPolarAngle=void 0!==e.maxV?(90-e.maxV)*ge.torad:Math.PI,this.minAzimuthAngle=void 0!==e.minH?e.minH*ge.torad:-1/0,this.maxAzimuthAngle=void 0!==e.maxH?e.maxH*ge.torad:1/0,this.minDistance=void 0!==e.minD?e.minD:.01,this.maxDistance=void 0!==e.maxD?e.maxD:1/0}resetFov(){this.object.fov=50,this.object.zoom=1,this.object.updateProjectionMatrix()}resetFollow(){this.followGroup.position.set(0,0,0),this.followTarget=null,this.enabled=!0}follow(e){if(!this.followTarget)return;const t=this.cam,i=this.object,s=this.target,n=this.getSpherical(),r=this.getState();this.followTarget.updateMatrix(),this.tmpP.copy(this.followTarget.position),this.tmpQ.copy(this.followTarget.quaternion);let o=this.tmpP,a=this.tmpQ,l=(90-t.phi)*ge.torad,h=this.getDistance();if(t.simple)return h<2&&(t.decalY=.5*(2-h)),this.tmpV.copy(t.decal),t.zoomUp&&(this.tmpV.y+=t.decalY),this.tmpV.applyAxisAngle({x:0,y:1,z:0},n.theta),this.reverse?(i.position.copy(o).add(this.tmpV),s.setFromSpherical(n).add(i.position),i.lookAt(s)):(s.copy(o).add(this.tmpV),i.position.setFromSpherical(n).add(s),i.lookAt(s)),void this.updateFollowGroup();this.tmpMatrix.makeRotationFromQuaternion(a);let c=Math.atan2(this.tmpMatrix.elements[8],this.tmpMatrix.elements[10]),d=t.theta*ge.torad+c;this.isFree=!1;var u=o.distanceTo(t.oldp),p=a.x-t.oldq.x,f=a.y-t.oldq.y,m=a.z-t.oldq.z,g=a.w-t.oldq.w,A=Math.sqrt(p*p+f*f+m*m+g*g);this.enabled?0===r||3===r||u<.01&&A<.001?this.isFree=!0:t.forceFree||n.set(h,l,d):n.set(h,l,d),this.tmpV.copy(t.decal).applyAxisAngle({x:1,y:0,z:0},l-ge.PI90),t.offset.copy(t.position).add(this.tmpV).applyAxisAngle({x:0,y:1,z:0},c),t.v.copy(o).add(t.offset).add(t.d),t.tmp.setFromSpherical(n).add(t.v),this.reverse?(1!==t.stiffnessTarget?i.position.lerp(t.v,t.stiffnessTarget):i.position.copy(t.v),this.isDecal?s.copy(t.tmp):s.lerp(t.tmp,t.stiffness)):(this.isDecal?i.position.copy(t.tmp):i.position.lerp(t.tmp,t.stiffness),1!==t.stiffnessTarget?s.lerp(t.v,t.stiffnessTarget):s.copy(t.v)),i.lookAt(s),this.updateFollowGroup(),t.oldp.copy(o),t.oldq.copy(a),this.isInDecal&&(this.isDecal=!1,this.isInDecal=!1),this.isDecal&&(this.isInDecal=!0),this.cam.clipper&&(this.rayClipper.start.copy(o).add(t.offset).add(t.d),this.tmpV1.set(0,0,-1).applyQuaternion(i.quaternion).normalize().multiplyScalar(t.maxDistance),this.rayClipper.end.copy(this.rayClipper.start).sub(this.tmpV1))}updateFollowGroup(){this.followGroup.position.copy(this.target)}getInfo(){this.update();const e=this.target,t=this.object;let i=this.getPolarAngle(),s=this.getAzimuthalAngle(),n=this.getDistance();this.info.x=e.x,this.info.y=e.y,this.info.z=e.z,this.object.dist=n,this.info.distance=n,this.info.phi=ge.unwrapDeg(90-Math.floor(i*ge.todeg)),this.info.theta=ge.unwrapDeg(Math.floor(s*ge.todeg)),this.info.fov=t.fov,this.info.zoom=t.zoom}stopMoveCam(){for(var e=this.camTween.length;e--;)le(this.camTween[e]),this.camTween[e]=null;this.camTween=[],this.getInfo()}moveCam(e={}){this.followTarget&&this.resetFollow();var t=this;this.getInfo();var i={};void 0!==e.phi&&(i.phi=e.phi),void 0!==e.theta&&(i.theta=e.theta),void 0!==e.distance&&(i.distance=e.distance),void 0!==e.v&&(i.phi=e.v),void 0!==e.h&&(i.theta=e.h),void 0!==e.d&&(i.distance=e.d),void 0!==e.fov&&(i.fov=e.fov),void 0!==e.zoom&&(i.zoom=e.zoom),void 0!==e.x&&(i.x=e.x),void 0!==e.y&&(i.y=e.y),void 0!==e.z&&(i.z=e.z);var s=void 0===e.shortest||e.shortest;if(void 0!==i.theta&&s){var n=this.getAzimuthalAngle()*ge.todeg;i.theta=n+ge.angleDistance(i.theta,n)}var r=void 0!==e.time?e.time:0,o=void 0!==e.tween?e.tween:ee.Quadratic.Out,a=void 0!==e.delay?e.delay:0;this.enabled=!1;var l=[];for(var h in i)l[h]=this.info[h];var c=e.callback||function(){};if(0===r){for(var h in i)l[h]=i[h];return this.stopMoveCam(),this.orbit(l),this.enabled=!0,void c()}var d=new oe(l).to(i,r).delay(a).easing(o).onUpdate((function(e){t.orbit(e)})).onComplete((function(){t.enabled=!0,c()})).start();this.camTween.push(d)}zommer(e,t,i){this.stopMoveCam();var s=this.cam,n=this.object,r={zoom:e.zoom,fov:e.fov,distance:e.distance,dx:void 0!==e.dx?e.dx:s.decal.x,dy:void 0!==e.dy?e.dy:s.decal.y,dz:void 0!==e.dz?e.dz:s.decal.z,exr:void 0!==e.exr?e.exr:s.exr,multy:void 0!==e.multy?e.multy:s.multy},o=new oe({zoom:n.zoom,fov:n.fov,distance:s.distance,dx:s.decal.x,dy:s.decal.y,dz:s.decal.z,exr:s.exr,multy:s.multy}).to(r,t||300).onUpdate((function(e){n.fov=e.fov,n.zoom=e.zoom,s.distance=e.distance,s.decal.x=e.dx,s.decal.y=e.dy,s.decal.z=e.dz,s.exr=e.exr,s.multy=e.multy,n.updateProjectionMatrix()})).onComplete((function(){i&&i()})).start();this.camTween.push(o)}orbit(e){var t=this.info;for(var i in e)t[i]=e[i];var s=this.object,n=this.target,r=this.getSpherical(),o=!1;s.fov!==t.fov&&(s.fov=t.fov,o=!0),s.zoom!==t.zoom&&(s.zoom=t.zoom,o=!0),o&&s.updateProjectionMatrix(),r.set(t.distance,(90-t.phi)*ge.torad,t.theta*ge.torad),r.makeSafe(),this.reverse?(s.position.set(t.x,t.y,t.z),n.setFromSpherical(r).add(s.position),s.lookAt(n)):(n.set(t.x,t.y,t.z),s.position.setFromSpherical(r).add(n),s.lookAt(n))}getDirection(){return ge.tmpV.subVectors(this.target,this.object.position).normalize().toArray()}}function ye(e,t=!1){const s=null!==e[0].index,n=new Set(Object.keys(e[0].attributes)),r=new Set(Object.keys(e[0].morphAttributes)),o={},a={},l=e[0].morphTargetsRelative,h=new i.BufferGeometry;let c=0;for(let i=0;i<e.length;++i){const d=e[i];let u=0;if(s!==(null!==d.index))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+i+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(const e in d.attributes){if(!n.has(e))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+i+'. All geometries must have compatible attributes; make sure "'+e+'" attribute exists among all geometries, or in none of them.'),null;void 0===o[e]&&(o[e]=[]),o[e].push(d.attributes[e]),u++}if(u!==n.size)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+i+". Make sure all geometries have the same number of attributes."),null;if(l!==d.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+i+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(const e in d.morphAttributes){if(!r.has(e))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+i+".  .morphAttributes must be consistent throughout all geometries."),null;void 0===a[e]&&(a[e]=[]),a[e].push(d.morphAttributes[e])}if(t){let e;if(s)e=d.index.count;else{if(void 0===d.attributes.position)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+i+". The geometry must have either an index or a position attribute"),null;e=d.attributes.position.count}h.addGroup(c,e,i),c+=e}}if(s){let t=0;const i=[];for(let s=0;s<e.length;++s){const n=e[s].index;for(let e=0;e<n.count;++e)i.push(n.getX(e)+t);t+=e[s].attributes.position.count}h.setIndex(i)}for(const e in o){const t=we(o[e]);if(!t)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+e+" attribute."),null;h.setAttribute(e,t)}for(const e in a){const t=a[e][0].length;if(0===t)break;h.morphAttributes=h.morphAttributes||{},h.morphAttributes[e]=[];for(let i=0;i<t;++i){const t=[];for(let s=0;s<a[e].length;++s)t.push(a[e][s][i]);const s=we(t);if(!s)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+e+" morphAttribute."),null;h.morphAttributes[e].push(s)}}return h}function we(e){let t,s,n,r=-1,o=0;for(let i=0;i<e.length;++i){const a=e[i];if(void 0===t&&(t=a.array.constructor),t!==a.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(void 0===s&&(s=a.itemSize),s!==a.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(void 0===n&&(n=a.normalized),n!==a.normalized)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;if(-1===r&&(r=a.gpuType),r!==a.gpuType)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.gpuType must be consistent across matching attributes."),null;o+=a.count*s}const a=new t(o),l=new i.BufferAttribute(a,s,n);let h=0;for(let t=0;t<e.length;++t){const i=e[t];if(i.isInterleavedBufferAttribute){const e=h/s;for(let t=0,n=i.count;t<n;t++)for(let n=0;n<s;n++){const s=i.getComponent(t,n);l.setComponent(t+e,n,s)}}else a.set(i.array,h);h+=i.count*s}return void 0!==r&&(l.gpuType=r),l}function xe(e,t=1e-4){t=Math.max(t,Number.EPSILON);const s={},n=e.getIndex(),r=e.getAttribute("position"),o=n?n.count:r.count;let a=0;const l=Object.keys(e.attributes),h={},c={},d=[],u=["getX","getY","getZ","getW"],p=["setX","setY","setZ","setW"];for(let t=0,s=l.length;t<s;t++){const s=l[t],n=e.attributes[s];h[s]=new i.BufferAttribute(new n.array.constructor(n.count*n.itemSize),n.itemSize,n.normalized);const r=e.morphAttributes[s];r&&(c[s]=new i.BufferAttribute(new r.array.constructor(r.count*r.itemSize),r.itemSize,r.normalized))}const f=.5*t,m=Math.log10(1/t),g=Math.pow(10,m),A=f*g;for(let t=0;t<o;t++){const i=n?n.getX(t):t;let r="";for(let t=0,s=l.length;t<s;t++){const s=l[t],n=e.getAttribute(s),o=n.itemSize;for(let e=0;e<o;e++)r+=~~(n[u[e]](i)*g+A)+","}if(r in s)d.push(s[r]);else{for(let t=0,s=l.length;t<s;t++){const s=l[t],n=e.getAttribute(s),r=e.morphAttributes[s],o=n.itemSize,d=h[s],f=c[s];for(let e=0;e<o;e++){const t=u[e],s=p[e];if(d[s](a,n[t](i)),r)for(let e=0,n=r.length;e<n;e++)f[e][s](a,r[e][t](i))}}s[r]=a,d.push(a),a++}}const b=e.clone();for(const t in e.attributes){const e=h[t];if(b.setAttribute(t,new i.BufferAttribute(e.array.slice(0,a*e.itemSize),e.itemSize,e.normalized)),t in c)for(let e=0;e<c[t].length;e++){const s=c[t][e];b.morphAttributes[t][e]=new i.BufferAttribute(s.array.slice(0,a*s.itemSize),s.itemSize,s.normalized)}}return b.setIndex(d),b}function Oe(e,t){if(t===i.TrianglesDrawMode)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),e;if(t===i.TriangleFanDrawMode||t===i.TriangleStripDrawMode){let s=e.getIndex();if(null===s){const t=[],i=e.getAttribute("position");if(void 0===i)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(let e=0;e<i.count;e++)t.push(e);e.setIndex(t),s=e.getIndex()}const n=s.count-2,r=[];if(t===i.TriangleFanDrawMode)for(let e=1;e<=n;e++)r.push(s.getX(0)),r.push(s.getX(e)),r.push(s.getX(e+1));else for(let e=0;e<n;e++)e%2==0?(r.push(s.getX(e)),r.push(s.getX(e+1)),r.push(s.getX(e+2))):(r.push(s.getX(e+2)),r.push(s.getX(e+1)),r.push(s.getX(e)));r.length/3!==n&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const o=e.clone();return o.setIndex(r),o.clearGroups(),o}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),e}class Ce extends i.Loader{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register((function(e){return new Qe(e)})),this.register((function(e){return new Me(e)})),this.register((function(e){return new Ge(e)})),this.register((function(e){return new Ne(e)})),this.register((function(e){return new Ve(e)})),this.register((function(e){return new De(e)})),this.register((function(e){return new Re(e)})),this.register((function(e){return new Pe(e)})),this.register((function(e){return new Le(e)})),this.register((function(e){return new Be(e)})),this.register((function(e){return new Fe(e)})),this.register((function(e){return new Te(e)})),this.register((function(e){return new ze(e)})),this.register((function(e){return new Ue(e)})),this.register((function(e){return new Ee(e)})),this.register((function(e){return new je(e)})),this.register((function(e){return new He(e)}))}load(e,t,s,n){const r=this;let o;if(""!==this.resourcePath)o=this.resourcePath;else if(""!==this.path){const t=i.LoaderUtils.extractUrlBase(e);o=i.LoaderUtils.resolveURL(t,this.path)}else o=i.LoaderUtils.extractUrlBase(e);this.manager.itemStart(e);const a=function(t){n?n(t):console.error(t),r.manager.itemError(e),r.manager.itemEnd(e)},l=new i.FileLoader(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,(function(i){try{r.parse(i,o,(function(i){t(i),r.manager.itemEnd(e)}),a)}catch(e){a(e)}}),s,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,s){let n;const r={},o={},a=new TextDecoder;if("string"==typeof e)n=JSON.parse(e);else if(e instanceof ArrayBuffer){if(a.decode(new Uint8Array(e,0,4))===qe){try{r[Ie.KHR_BINARY_GLTF]=new Ze(e)}catch(e){return void(s&&s(e))}n=JSON.parse(r[Ie.KHR_BINARY_GLTF].content)}else n=JSON.parse(a.decode(e))}else n=e;if(void 0===n.asset||n.asset.version[0]<2)return void(s&&s(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const l=new vt(n,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let e=0;e<this.pluginCallbacks.length;e++){const t=this.pluginCallbacks[e](l);t.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),o[t.name]=t,r[t.name]=!0}if(n.extensionsUsed)for(let e=0;e<n.extensionsUsed.length;++e){const t=n.extensionsUsed[e],i=n.extensionsRequired||[];switch(t){case Ie.KHR_MATERIALS_UNLIT:r[t]=new ke;break;case Ie.KHR_DRACO_MESH_COMPRESSION:r[t]=new Ye(n,this.dracoLoader);break;case Ie.KHR_TEXTURE_TRANSFORM:r[t]=new _e;break;case Ie.KHR_MESH_QUANTIZATION:r[t]=new Ke;break;default:i.indexOf(t)>=0&&void 0===o[t]&&console.warn('THREE.GLTFLoader: Unknown extension "'+t+'".')}}l.setExtensions(r),l.setPlugins(o),l.parse(i,s)}parseAsync(e,t){const i=this;return new Promise((function(s,n){i.parse(e,t,s,n)}))}}function Se(){let e={};return{get:function(t){return e[t]},add:function(t,i){e[t]=i},remove:function(t){delete e[t]},removeAll:function(){e={}}}}const Ie={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class Ee{constructor(e){this.parser=e,this.name=Ie.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,s=t.length;i<s;i++){const s=t[i];s.extensions&&s.extensions[this.name]&&void 0!==s.extensions[this.name].light&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,s="light:"+e;let n=t.cache.get(s);if(n)return n;const r=t.json,o=((r.extensions&&r.extensions[this.name]||{}).lights||[])[e];let a;const l=new i.Color(16777215);void 0!==o.color&&l.setRGB(o.color[0],o.color[1],o.color[2],i.LinearSRGBColorSpace);const h=void 0!==o.range?o.range:0;switch(o.type){case"directional":a=new i.DirectionalLight(l),a.target.position.set(0,0,-1),a.add(a.target);break;case"point":a=new i.PointLight(l),a.distance=h;break;case"spot":a=new i.SpotLight(l),a.distance=h,o.spot=o.spot||{},o.spot.innerConeAngle=void 0!==o.spot.innerConeAngle?o.spot.innerConeAngle:0,o.spot.outerConeAngle=void 0!==o.spot.outerConeAngle?o.spot.outerConeAngle:Math.PI/4,a.angle=o.spot.outerConeAngle,a.penumbra=1-o.spot.innerConeAngle/o.spot.outerConeAngle,a.target.position.set(0,0,-1),a.add(a.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+o.type)}return a.position.set(0,0,0),pt(a,o),void 0!==o.intensity&&(a.intensity=o.intensity),a.name=t.createUniqueName(o.name||"light_"+e),n=Promise.resolve(a),t.cache.add(s,n),n}getDependency(e,t){if("light"===e)return this._loadLight(t)}createNodeAttachment(e){const t=this,i=this.parser,s=i.json.nodes[e],n=(s.extensions&&s.extensions[this.name]||{}).light;return void 0===n?null:this._loadLight(n).then((function(e){return i._getNodeRef(t.cache,n,e)}))}}class ke{constructor(){this.name=Ie.KHR_MATERIALS_UNLIT}getMaterialType(){return i.MeshBasicMaterial}extendParams(e,t,s){const n=[];e.color=new i.Color(1,1,1),e.opacity=1;const r=t.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){const t=r.baseColorFactor;e.color.setRGB(t[0],t[1],t[2],i.LinearSRGBColorSpace),e.opacity=t[3]}void 0!==r.baseColorTexture&&n.push(s.assignTexture(e,"map",r.baseColorTexture,i.SRGBColorSpace))}return Promise.all(n)}}class Be{constructor(e){this.parser=e,this.name=Ie.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name].emissiveStrength;return void 0!==s&&(t.emissiveIntensity=s),Promise.resolve()}}class Qe{constructor(e){this.parser=e,this.name=Ie.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?i.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const s=this.parser,n=s.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=[],o=n.extensions[this.name];if(void 0!==o.clearcoatFactor&&(t.clearcoat=o.clearcoatFactor),void 0!==o.clearcoatTexture&&r.push(s.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),void 0!==o.clearcoatRoughnessFactor&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),void 0!==o.clearcoatRoughnessTexture&&r.push(s.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),void 0!==o.clearcoatNormalTexture&&(r.push(s.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),void 0!==o.clearcoatNormalTexture.scale)){const e=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new i.Vector2(e,e)}return Promise.all(r)}}class Me{constructor(e){this.parser=e,this.name=Ie.KHR_MATERIALS_DISPERSION}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?i.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name];return t.dispersion=void 0!==s.dispersion?s.dispersion:0,Promise.resolve()}}class Te{constructor(e){this.parser=e,this.name=Ie.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?i.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const n=[],r=s.extensions[this.name];return void 0!==r.iridescenceFactor&&(t.iridescence=r.iridescenceFactor),void 0!==r.iridescenceTexture&&n.push(i.assignTexture(t,"iridescenceMap",r.iridescenceTexture)),void 0!==r.iridescenceIor&&(t.iridescenceIOR=r.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==r.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=r.iridescenceThicknessMinimum),void 0!==r.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=r.iridescenceThicknessMaximum),void 0!==r.iridescenceThicknessTexture&&n.push(i.assignTexture(t,"iridescenceThicknessMap",r.iridescenceThicknessTexture)),Promise.all(n)}}class De{constructor(e){this.parser=e,this.name=Ie.KHR_MATERIALS_SHEEN}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?i.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const s=this.parser,n=s.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=[];t.sheenColor=new i.Color(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=n.extensions[this.name];if(void 0!==o.sheenColorFactor){const e=o.sheenColorFactor;t.sheenColor.setRGB(e[0],e[1],e[2],i.LinearSRGBColorSpace)}return void 0!==o.sheenRoughnessFactor&&(t.sheenRoughness=o.sheenRoughnessFactor),void 0!==o.sheenColorTexture&&r.push(s.assignTexture(t,"sheenColorMap",o.sheenColorTexture,i.SRGBColorSpace)),void 0!==o.sheenRoughnessTexture&&r.push(s.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(r)}}class Re{constructor(e){this.parser=e,this.name=Ie.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?i.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const n=[],r=s.extensions[this.name];return void 0!==r.transmissionFactor&&(t.transmission=r.transmissionFactor),void 0!==r.transmissionTexture&&n.push(i.assignTexture(t,"transmissionMap",r.transmissionTexture)),Promise.all(n)}}class Pe{constructor(e){this.parser=e,this.name=Ie.KHR_MATERIALS_VOLUME}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?i.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const s=this.parser,n=s.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=[],o=n.extensions[this.name];t.thickness=void 0!==o.thicknessFactor?o.thicknessFactor:0,void 0!==o.thicknessTexture&&r.push(s.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=(new i.Color).setRGB(a[0],a[1],a[2],i.LinearSRGBColorSpace),Promise.all(r)}}class Le{constructor(e){this.parser=e,this.name=Ie.KHR_MATERIALS_IOR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?i.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name];return t.ior=void 0!==s.ior?s.ior:1.5,Promise.resolve()}}class Fe{constructor(e){this.parser=e,this.name=Ie.KHR_MATERIALS_SPECULAR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?i.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const s=this.parser,n=s.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=[],o=n.extensions[this.name];t.specularIntensity=void 0!==o.specularFactor?o.specularFactor:1,void 0!==o.specularTexture&&r.push(s.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=(new i.Color).setRGB(a[0],a[1],a[2],i.LinearSRGBColorSpace),void 0!==o.specularColorTexture&&r.push(s.assignTexture(t,"specularColorMap",o.specularColorTexture,i.SRGBColorSpace)),Promise.all(r)}}class Ue{constructor(e){this.parser=e,this.name=Ie.EXT_MATERIALS_BUMP}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?i.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const n=[],r=s.extensions[this.name];return t.bumpScale=void 0!==r.bumpFactor?r.bumpFactor:1,void 0!==r.bumpTexture&&n.push(i.assignTexture(t,"bumpMap",r.bumpTexture)),Promise.all(n)}}class ze{constructor(e){this.parser=e,this.name=Ie.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?i.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const n=[],r=s.extensions[this.name];return void 0!==r.anisotropyStrength&&(t.anisotropy=r.anisotropyStrength),void 0!==r.anisotropyRotation&&(t.anisotropyRotation=r.anisotropyRotation),void 0!==r.anisotropyTexture&&n.push(i.assignTexture(t,"anisotropyMap",r.anisotropyTexture)),Promise.all(n)}}class Ge{constructor(e){this.parser=e,this.name=Ie.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,s=i.textures[e];if(!s.extensions||!s.extensions[this.name])return null;const n=s.extensions[this.name],r=t.options.ktx2Loader;if(!r){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,n.source,r)}}class Ne{constructor(e){this.parser=e,this.name=Ie.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,s=i.json,n=s.textures[e];if(!n.extensions||!n.extensions[t])return null;const r=n.extensions[t],o=s.images[r.source];let a=i.textureLoader;if(o.uri){const e=i.options.manager.getHandler(o.uri);null!==e&&(a=e)}return this.detectSupport().then((function(n){if(n)return i.loadTextureImage(e,r.source,a);if(s.extensionsRequired&&s.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}class Ve{constructor(e){this.parser=e,this.name=Ie.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,s=i.json,n=s.textures[e];if(!n.extensions||!n.extensions[t])return null;const r=n.extensions[t],o=s.images[r.source];let a=i.textureLoader;if(o.uri){const e=i.options.manager.getHandler(o.uri);null!==e&&(a=e)}return this.detectSupport().then((function(n){if(n)return i.loadTextureImage(e,r.source,a);if(s.extensionsRequired&&s.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}class je{constructor(e){this.name=Ie.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const e=i.extensions[this.name],s=this.parser.getDependency("buffer",e.buffer),n=this.parser.options.meshoptDecoder;if(!n||!n.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then((function(t){const i=e.byteOffset||0,s=e.byteLength||0,r=e.count,o=e.byteStride,a=new Uint8Array(t,i,s);return n.decodeGltfBufferAsync?n.decodeGltfBufferAsync(r,o,a,e.mode,e.filter).then((function(e){return e.buffer})):n.ready.then((function(){const t=new ArrayBuffer(r*o);return n.decodeGltfBuffer(new Uint8Array(t),r,o,a,e.mode,e.filter),t}))}))}return null}}class He{constructor(e){this.name=Ie.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,s=t.nodes[e];if(!s.extensions||!s.extensions[this.name]||void 0===s.mesh)return null;const n=t.meshes[s.mesh];for(const e of n.primitives)if(e.mode!==tt.TRIANGLES&&e.mode!==tt.TRIANGLE_STRIP&&e.mode!==tt.TRIANGLE_FAN&&void 0!==e.mode)return null;const r=s.extensions[this.name].attributes,o=[],a={};for(const e in r)o.push(this.parser.getDependency("accessor",r[e]).then((t=>(a[e]=t,a[e]))));return o.length<1?null:(o.push(this.parser.createNodeMesh(e)),Promise.all(o).then((e=>{const t=e.pop(),s=t.isGroup?t.children:[t],n=e[0].count,r=[];for(const e of s){const t=new i.Matrix4,s=new i.Vector3,o=new i.Quaternion,l=new i.Vector3(1,1,1),h=new i.InstancedMesh(e.geometry,e.material,n);for(let e=0;e<n;e++)a.TRANSLATION&&s.fromBufferAttribute(a.TRANSLATION,e),a.ROTATION&&o.fromBufferAttribute(a.ROTATION,e),a.SCALE&&l.fromBufferAttribute(a.SCALE,e),h.setMatrixAt(e,t.compose(s,o,l));for(const t in a)if("_COLOR_0"===t){const e=a[t];h.instanceColor=new i.InstancedBufferAttribute(e.array,e.itemSize,e.normalized)}else"TRANSLATION"!==t&&"ROTATION"!==t&&"SCALE"!==t&&e.geometry.setAttribute(t,a[t]);i.Object3D.prototype.copy.call(h,e),this.parser.assignFinalMaterial(h),r.push(h)}return t.isGroup?(t.clear(),t.add(...r),t):r[0]})))}}const qe="glTF",Xe=1313821514,We=5130562;class Ze{constructor(e){this.name=Ie.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,12),i=new TextDecoder;if(this.header={magic:i.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==qe)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const s=this.header.length-12,n=new DataView(e,12);let r=0;for(;r<s;){const t=n.getUint32(r,!0);r+=4;const s=n.getUint32(r,!0);if(r+=4,s===Xe){const s=new Uint8Array(e,12+r,t);this.content=i.decode(s)}else if(s===We){const i=12+r;this.body=e.slice(i,i+t)}r+=t}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Ye{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Ie.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const s=this.json,n=this.dracoLoader,r=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},h={};for(const e in o){const t=ot[e]||e.toLowerCase();a[t]=o[e]}for(const t in e.attributes){const i=ot[t]||t.toLowerCase();if(void 0!==o[t]){const n=s.accessors[e.attributes[t]],r=it[n.componentType];h[i]=r.name,l[i]=!0===n.normalized}}return t.getDependency("bufferView",r).then((function(e){return new Promise((function(t,s){n.decodeDracoFile(e,(function(e){for(const t in e.attributes){const i=e.attributes[t],s=l[t];void 0!==s&&(i.normalized=s)}t(e)}),a,h,i.LinearSRGBColorSpace,s)}))}))}}class _e{constructor(){this.name=Ie.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return void 0!==t.texCoord&&t.texCoord!==e.channel||void 0!==t.offset||void 0!==t.rotation||void 0!==t.scale?(e=e.clone(),void 0!==t.texCoord&&(e.channel=t.texCoord),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0,e):e}}class Ke{constructor(){this.name=Ie.KHR_MESH_QUANTIZATION}}class Je extends i.Interpolant{constructor(e,t,i,s){super(e,t,i,s)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,s=this.valueSize,n=e*s*3+s;for(let e=0;e!==s;e++)t[e]=i[n+e];return t}interpolate_(e,t,i,s){const n=this.resultBuffer,r=this.sampleValues,o=this.valueSize,a=2*o,l=3*o,h=s-t,c=(i-t)/h,d=c*c,u=d*c,p=e*l,f=p-l,m=-2*u+3*d,g=u-d,A=1-m,b=g-d+c;for(let e=0;e!==o;e++){const t=r[f+e+o],i=r[f+e+a]*h,s=r[p+e+o],l=r[p+e]*h;n[e]=A*t+b*i+m*s+g*l}return n}}const $e=new i.Quaternion;class et extends Je{interpolate_(e,t,i,s){const n=super.interpolate_(e,t,i,s);return $e.fromArray(n).normalize().toArray(n),n}}const tt={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},it={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},st={9728:i.NearestFilter,9729:i.LinearFilter,9984:i.NearestMipmapNearestFilter,9985:i.LinearMipmapNearestFilter,9986:i.NearestMipmapLinearFilter,9987:i.LinearMipmapLinearFilter},nt={33071:i.ClampToEdgeWrapping,33648:i.MirroredRepeatWrapping,10497:i.RepeatWrapping},rt={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},ot={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},at={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},lt={CUBICSPLINE:void 0,LINEAR:i.InterpolateLinear,STEP:i.InterpolateDiscrete},ht="OPAQUE",ct="MASK",dt="BLEND";function ut(e,t,i){for(const s in i.extensions)void 0===e[s]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[s]=i.extensions[s])}function pt(e,t){void 0!==t.extras&&("object"==typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function ft(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(let i=0,s=t.weights.length;i<s;i++)e.morphTargetInfluences[i]=t.weights[i];if(t.extras&&Array.isArray(t.extras.targetNames)){const i=t.extras.targetNames;if(e.morphTargetInfluences.length===i.length){e.morphTargetDictionary={};for(let t=0,s=i.length;t<s;t++)e.morphTargetDictionary[i[t]]=t}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function mt(e){let t;const i=e.extensions&&e.extensions[Ie.KHR_DRACO_MESH_COMPRESSION];if(t=i?"draco:"+i.bufferView+":"+i.indices+":"+gt(i.attributes):e.indices+":"+gt(e.attributes)+":"+e.mode,void 0!==e.targets)for(let i=0,s=e.targets.length;i<s;i++)t+=":"+gt(e.targets[i]);return t}function gt(e){let t="";const i=Object.keys(e).sort();for(let s=0,n=i.length;s<n;s++)t+=i[s]+":"+e[i[s]]+";";return t}function At(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}const bt=new i.Matrix4;class vt{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new Se,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let s=!1,n=-1,r=!1,o=-1;if("undefined"!=typeof navigator){const e=navigator.userAgent;s=!0===/^((?!chrome|android).)*safari/i.test(e);const t=e.match(/Version\/(\d+)/);n=s&&t?parseInt(t[1],10):-1,r=e.indexOf("Firefox")>-1,o=r?e.match(/Firefox\/([0-9]+)\./)[1]:-1}"undefined"==typeof createImageBitmap||s&&n<17||r&&o<98?this.textureLoader=new i.TextureLoader(this.options.manager):this.textureLoader=new i.ImageBitmapLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new i.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,s=this.json,n=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll((function(e){return e._markDefs&&e._markDefs()})),Promise.all(this._invokeAll((function(e){return e.beforeRoot&&e.beforeRoot()}))).then((function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])})).then((function(t){const r={scene:t[0][s.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:s.asset,parser:i,userData:{}};return ut(n,r,s),pt(r,s),Promise.all(i._invokeAll((function(e){return e.afterRoot&&e.afterRoot(r)}))).then((function(){for(const e of r.scenes)e.updateMatrixWorld();e(r)}))})).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let i=0,s=t.length;i<s;i++){const s=t[i].joints;for(let t=0,i=s.length;t<i;t++)e[s[t]].isBone=!0}for(let t=0,s=e.length;t<s;t++){const s=e[t];void 0!==s.mesh&&(this._addNodeRef(this.meshCache,s.mesh),void 0!==s.skin&&(i[s.mesh].isSkinnedMesh=!0)),void 0!==s.camera&&this._addNodeRef(this.cameraCache,s.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const s=i.clone(),n=(e,t)=>{const i=this.associations.get(e);null!=i&&this.associations.set(t,i);for(const[i,s]of e.children.entries())n(s,t.children[i])};return n(i,s),s.name+="_instance_"+e.uses[t]++,s}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const s=e(t[i]);if(s)return s}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let s=0;s<t.length;s++){const n=e(t[s]);n&&i.push(n)}return i}getDependency(e,t){const i=e+":"+t;let s=this.cache.get(i);if(!s){switch(e){case"scene":s=this.loadScene(t);break;case"node":s=this._invokeOne((function(e){return e.loadNode&&e.loadNode(t)}));break;case"mesh":s=this._invokeOne((function(e){return e.loadMesh&&e.loadMesh(t)}));break;case"accessor":s=this.loadAccessor(t);break;case"bufferView":s=this._invokeOne((function(e){return e.loadBufferView&&e.loadBufferView(t)}));break;case"buffer":s=this.loadBuffer(t);break;case"material":s=this._invokeOne((function(e){return e.loadMaterial&&e.loadMaterial(t)}));break;case"texture":s=this._invokeOne((function(e){return e.loadTexture&&e.loadTexture(t)}));break;case"skin":s=this.loadSkin(t);break;case"animation":s=this._invokeOne((function(e){return e.loadAnimation&&e.loadAnimation(t)}));break;case"camera":s=this.loadCamera(t);break;default:if(s=this._invokeOne((function(i){return i!=this&&i.getDependency&&i.getDependency(e,t)})),!s)throw new Error("Unknown type: "+e)}this.cache.add(i,s)}return s}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this,s=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(s.map((function(t,s){return i.getDependency(e,s)}))),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],s=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[Ie.KHR_BINARY_GLTF].body);const n=this.options;return new Promise((function(e,r){s.load(i.LoaderUtils.resolveURL(t.uri,n.path),e,void 0,(function(){r(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){const i=t.byteLength||0,s=t.byteOffset||0;return e.slice(s,s+i)}))}loadAccessor(e){const t=this,s=this.json,n=this.json.accessors[e];if(void 0===n.bufferView&&void 0===n.sparse){const e=rt[n.type],t=it[n.componentType],s=!0===n.normalized,r=new t(n.count*e);return Promise.resolve(new i.BufferAttribute(r,e,s))}const r=[];return void 0!==n.bufferView?r.push(this.getDependency("bufferView",n.bufferView)):r.push(null),void 0!==n.sparse&&(r.push(this.getDependency("bufferView",n.sparse.indices.bufferView)),r.push(this.getDependency("bufferView",n.sparse.values.bufferView))),Promise.all(r).then((function(e){const r=e[0],o=rt[n.type],a=it[n.componentType],l=a.BYTES_PER_ELEMENT,h=l*o,c=n.byteOffset||0,d=void 0!==n.bufferView?s.bufferViews[n.bufferView].byteStride:void 0,u=!0===n.normalized;let p,f;if(d&&d!==h){const e=Math.floor(c/d),s="InterleavedBuffer:"+n.bufferView+":"+n.componentType+":"+e+":"+n.count;let h=t.cache.get(s);h||(p=new a(r,e*d,n.count*d/l),h=new i.InterleavedBuffer(p,d/l),t.cache.add(s,h)),f=new i.InterleavedBufferAttribute(h,o,c%d/l,u)}else p=null===r?new a(n.count*o):new a(r,c,n.count*o),f=new i.BufferAttribute(p,o,u);if(void 0!==n.sparse){const t=rt.SCALAR,s=it[n.sparse.indices.componentType],l=n.sparse.indices.byteOffset||0,h=n.sparse.values.byteOffset||0,c=new s(e[1],l,n.sparse.count*t),d=new a(e[2],h,n.sparse.count*o);null!==r&&(f=new i.BufferAttribute(f.array.slice(),f.itemSize,f.normalized)),f.normalized=!1;for(let e=0,t=c.length;e<t;e++){const t=c[e];if(f.setX(t,d[e*o]),o>=2&&f.setY(t,d[e*o+1]),o>=3&&f.setZ(t,d[e*o+2]),o>=4&&f.setW(t,d[e*o+3]),o>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}f.normalized=u}return f}))}loadTexture(e){const t=this.json,i=this.options,s=t.textures[e].source,n=t.images[s];let r=this.textureLoader;if(n.uri){const e=i.manager.getHandler(n.uri);null!==e&&(r=e)}return this.loadTextureImage(e,s,r)}loadTextureImage(e,t,s){const n=this,r=this.json,o=r.textures[e],a=r.images[t],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const h=this.loadImageSource(t,s).then((function(t){t.flipY=!1,t.name=o.name||a.name||"",""===t.name&&"string"==typeof a.uri&&!1===a.uri.startsWith("data:image/")&&(t.name=a.uri);const s=(r.samplers||{})[o.sampler]||{};return t.magFilter=st[s.magFilter]||i.LinearFilter,t.minFilter=st[s.minFilter]||i.LinearMipmapLinearFilter,t.wrapS=nt[s.wrapS]||i.RepeatWrapping,t.wrapT=nt[s.wrapT]||i.RepeatWrapping,t.generateMipmaps=!t.isCompressedTexture&&t.minFilter!==i.NearestFilter&&t.minFilter!==i.LinearFilter,n.associations.set(t,{textures:e}),t})).catch((function(){return null}));return this.textureCache[l]=h,h}loadImageSource(e,t){const s=this,n=this.json,r=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then((e=>e.clone()));const o=n.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",h=!1;if(void 0!==o.bufferView)l=s.getDependency("bufferView",o.bufferView).then((function(e){h=!0;const t=new Blob([e],{type:o.mimeType});return l=a.createObjectURL(t),l}));else if(void 0===o.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const c=Promise.resolve(l).then((function(e){return new Promise((function(s,n){let o=s;!0===t.isImageBitmapLoader&&(o=function(e){const t=new i.Texture(e);t.needsUpdate=!0,s(t)}),t.load(i.LoaderUtils.resolveURL(e,r.path),o,void 0,n)}))})).then((function(e){var t;return!0===h&&a.revokeObjectURL(l),pt(e,o),e.userData.mimeType=o.mimeType||((t=o.uri).search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/)?"image/jpeg":t.search(/\.webp($|\?)/i)>0||0===t.search(/^data\:image\/webp/)?"image/webp":t.search(/\.ktx2($|\?)/i)>0||0===t.search(/^data\:image\/ktx2/)?"image/ktx2":"image/png"),e})).catch((function(e){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),e}));return this.sourceCache[e]=c,c}assignTexture(e,t,i,s){const n=this;return this.getDependency("texture",i.index).then((function(r){if(!r)return null;if(void 0!==i.texCoord&&i.texCoord>0&&((r=r.clone()).channel=i.texCoord),n.extensions[Ie.KHR_TEXTURE_TRANSFORM]){const e=void 0!==i.extensions?i.extensions[Ie.KHR_TEXTURE_TRANSFORM]:void 0;if(e){const t=n.associations.get(r);r=n.extensions[Ie.KHR_TEXTURE_TRANSFORM].extendTexture(r,e),n.associations.set(r,t)}}return void 0!==s&&(r.colorSpace=s),e[t]=r,r}))}assignFinalMaterial(e){const t=e.geometry;let s=e.material;const n=void 0===t.attributes.tangent,r=void 0!==t.attributes.color,o=void 0===t.attributes.normal;if(e.isPoints){const e="PointsMaterial:"+s.uuid;let t=this.cache.get(e);t||(t=new i.PointsMaterial,i.Material.prototype.copy.call(t,s),t.color.copy(s.color),t.map=s.map,t.sizeAttenuation=!1,this.cache.add(e,t)),s=t}else if(e.isLine){const e="LineBasicMaterial:"+s.uuid;let t=this.cache.get(e);t||(t=new i.LineBasicMaterial,i.Material.prototype.copy.call(t,s),t.color.copy(s.color),t.map=s.map,this.cache.add(e,t)),s=t}if(n||r||o){let e="ClonedMaterial:"+s.uuid+":";n&&(e+="derivative-tangents:"),r&&(e+="vertex-colors:"),o&&(e+="flat-shading:");let t=this.cache.get(e);t||(t=s.clone(),r&&(t.vertexColors=!0),o&&(t.flatShading=!0),n&&(t.normalScale&&(t.normalScale.y*=-1),t.clearcoatNormalScale&&(t.clearcoatNormalScale.y*=-1)),this.cache.add(e,t),this.associations.set(t,this.associations.get(s))),s=t}e.material=s}getMaterialType(){return i.MeshStandardMaterial}loadMaterial(e){const t=this,s=this.json,n=this.extensions,r=s.materials[e];let o;const a={},l=[];if((r.extensions||{})[Ie.KHR_MATERIALS_UNLIT]){const e=n[Ie.KHR_MATERIALS_UNLIT];o=e.getMaterialType(),l.push(e.extendParams(a,r,t))}else{const s=r.pbrMetallicRoughness||{};if(a.color=new i.Color(1,1,1),a.opacity=1,Array.isArray(s.baseColorFactor)){const e=s.baseColorFactor;a.color.setRGB(e[0],e[1],e[2],i.LinearSRGBColorSpace),a.opacity=e[3]}void 0!==s.baseColorTexture&&l.push(t.assignTexture(a,"map",s.baseColorTexture,i.SRGBColorSpace)),a.metalness=void 0!==s.metallicFactor?s.metallicFactor:1,a.roughness=void 0!==s.roughnessFactor?s.roughnessFactor:1,void 0!==s.metallicRoughnessTexture&&(l.push(t.assignTexture(a,"metalnessMap",s.metallicRoughnessTexture)),l.push(t.assignTexture(a,"roughnessMap",s.metallicRoughnessTexture))),o=this._invokeOne((function(t){return t.getMaterialType&&t.getMaterialType(e)})),l.push(Promise.all(this._invokeAll((function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,a)}))))}!0===r.doubleSided&&(a.side=i.DoubleSide);const h=r.alphaMode||ht;if(h===dt?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,h===ct&&(a.alphaTest=void 0!==r.alphaCutoff?r.alphaCutoff:.5)),void 0!==r.normalTexture&&o!==i.MeshBasicMaterial&&(l.push(t.assignTexture(a,"normalMap",r.normalTexture)),a.normalScale=new i.Vector2(1,1),void 0!==r.normalTexture.scale)){const e=r.normalTexture.scale;a.normalScale.set(e,e)}if(void 0!==r.occlusionTexture&&o!==i.MeshBasicMaterial&&(l.push(t.assignTexture(a,"aoMap",r.occlusionTexture)),void 0!==r.occlusionTexture.strength&&(a.aoMapIntensity=r.occlusionTexture.strength)),void 0!==r.emissiveFactor&&o!==i.MeshBasicMaterial){const e=r.emissiveFactor;a.emissive=(new i.Color).setRGB(e[0],e[1],e[2],i.LinearSRGBColorSpace)}return void 0!==r.emissiveTexture&&o!==i.MeshBasicMaterial&&l.push(t.assignTexture(a,"emissiveMap",r.emissiveTexture,i.SRGBColorSpace)),Promise.all(l).then((function(){const i=new o(a);return r.name&&(i.name=r.name),pt(i,r),t.associations.set(i,{materials:e}),r.extensions&&ut(n,i,r),i}))}createUniqueName(e){const t=i.PropertyBinding.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,s=this.extensions,n=this.primitiveCache;function r(e){return s[Ie.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then((function(i){return yt(i,e,t)}))}const o=[];for(let s=0,a=e.length;s<a;s++){const a=e[s],l=mt(a),h=n[l];if(h)o.push(h.promise);else{let e;e=a.extensions&&a.extensions[Ie.KHR_DRACO_MESH_COMPRESSION]?r(a):yt(new i.BufferGeometry,a,t),n[l]={primitive:a,promise:e},o.push(e)}}return Promise.all(o)}loadMesh(e){const t=this,s=this.json,n=this.extensions,r=s.meshes[e],o=r.primitives,a=[];for(let e=0,t=o.length;e<t;e++){const t=void 0===o[e].material?(void 0===(l=this.cache).DefaultMaterial&&(l.DefaultMaterial=new i.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:i.FrontSide})),l.DefaultMaterial):this.getDependency("material",o[e].material);a.push(t)}var l;return a.push(t.loadGeometries(o)),Promise.all(a).then((function(s){const a=s.slice(0,s.length-1),l=s[s.length-1],h=[];for(let s=0,c=l.length;s<c;s++){const c=l[s],d=o[s];let u;const p=a[s];if(d.mode===tt.TRIANGLES||d.mode===tt.TRIANGLE_STRIP||d.mode===tt.TRIANGLE_FAN||void 0===d.mode)u=!0===r.isSkinnedMesh?new i.SkinnedMesh(c,p):new i.Mesh(c,p),!0===u.isSkinnedMesh&&u.normalizeSkinWeights(),d.mode===tt.TRIANGLE_STRIP?u.geometry=Oe(u.geometry,i.TriangleStripDrawMode):d.mode===tt.TRIANGLE_FAN&&(u.geometry=Oe(u.geometry,i.TriangleFanDrawMode));else if(d.mode===tt.LINES)u=new i.LineSegments(c,p);else if(d.mode===tt.LINE_STRIP)u=new i.Line(c,p);else if(d.mode===tt.LINE_LOOP)u=new i.LineLoop(c,p);else{if(d.mode!==tt.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+d.mode);u=new i.Points(c,p)}Object.keys(u.geometry.morphAttributes).length>0&&ft(u,r),u.name=t.createUniqueName(r.name||"mesh_"+e),pt(u,r),d.extensions&&ut(n,u,d),t.assignFinalMaterial(u),h.push(u)}for(let i=0,s=h.length;i<s;i++)t.associations.set(h[i],{meshes:e,primitives:i});if(1===h.length)return r.extensions&&ut(n,h[0],r),h[0];const c=new i.Group;r.extensions&&ut(n,c,r),t.associations.set(c,{meshes:e});for(let e=0,t=h.length;e<t;e++)c.add(h[e]);return c}))}loadCamera(e){let t;const s=this.json.cameras[e],n=s[s.type];if(n)return"perspective"===s.type?t=new i.PerspectiveCamera(i.MathUtils.radToDeg(n.yfov),n.aspectRatio||1,n.znear||1,n.zfar||2e6):"orthographic"===s.type&&(t=new i.OrthographicCamera(-n.xmag,n.xmag,n.ymag,-n.ymag,n.znear,n.zfar)),s.name&&(t.name=this.createUniqueName(s.name)),pt(t,s),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){const t=this.json.skins[e],s=[];for(let e=0,i=t.joints.length;e<i;e++)s.push(this._loadNodeShallow(t.joints[e]));return void 0!==t.inverseBindMatrices?s.push(this.getDependency("accessor",t.inverseBindMatrices)):s.push(null),Promise.all(s).then((function(e){const s=e.pop(),n=e,r=[],o=[];for(let e=0,a=n.length;e<a;e++){const a=n[e];if(a){r.push(a);const t=new i.Matrix4;null!==s&&t.fromArray(s.array,16*e),o.push(t)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[e])}return new i.Skeleton(r,o)}))}loadAnimation(e){const t=this.json,s=this,n=t.animations[e],r=n.name?n.name:"animation_"+e,o=[],a=[],l=[],h=[],c=[];for(let e=0,t=n.channels.length;e<t;e++){const t=n.channels[e],i=n.samplers[t.sampler],s=t.target,r=s.node,d=void 0!==n.parameters?n.parameters[i.input]:i.input,u=void 0!==n.parameters?n.parameters[i.output]:i.output;void 0!==s.node&&(o.push(this.getDependency("node",r)),a.push(this.getDependency("accessor",d)),l.push(this.getDependency("accessor",u)),h.push(i),c.push(s))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(h),Promise.all(c)]).then((function(e){const t=e[0],n=e[1],o=e[2],a=e[3],l=e[4],h=[];for(let e=0,i=t.length;e<i;e++){const i=t[e],r=n[e],c=o[e],d=a[e],u=l[e];if(void 0===i)continue;i.updateMatrix&&i.updateMatrix();const p=s._createAnimationTracks(i,r,c,d,u);if(p)for(let e=0;e<p.length;e++)h.push(p[e])}return new i.AnimationClip(r,void 0,h)}))}createNodeMesh(e){const t=this.json,i=this,s=t.nodes[e];return void 0===s.mesh?null:i.getDependency("mesh",s.mesh).then((function(e){const t=i._getNodeRef(i.meshCache,s.mesh,e);return void 0!==s.weights&&t.traverse((function(e){if(e.isMesh)for(let t=0,i=s.weights.length;t<i;t++)e.morphTargetInfluences[t]=s.weights[t]})),t}))}loadNode(e){const t=this,i=this.json.nodes[e],s=t._loadNodeShallow(e),n=[],r=i.children||[];for(let e=0,i=r.length;e<i;e++)n.push(t.getDependency("node",r[e]));const o=void 0===i.skin?Promise.resolve(null):t.getDependency("skin",i.skin);return Promise.all([s,Promise.all(n),o]).then((function(e){const t=e[0],i=e[1],s=e[2];null!==s&&t.traverse((function(e){e.isSkinnedMesh&&e.bind(s,bt)}));for(let e=0,s=i.length;e<s;e++)t.add(i[e]);return t}))}_loadNodeShallow(e){const t=this.json,s=this.extensions,n=this;if(void 0!==this.nodeCache[e])return this.nodeCache[e];const r=t.nodes[e],o=r.name?n.createUniqueName(r.name):"",a=[],l=n._invokeOne((function(t){return t.createNodeMesh&&t.createNodeMesh(e)}));return l&&a.push(l),void 0!==r.camera&&a.push(n.getDependency("camera",r.camera).then((function(e){return n._getNodeRef(n.cameraCache,r.camera,e)}))),n._invokeAll((function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)})).forEach((function(e){a.push(e)})),this.nodeCache[e]=Promise.all(a).then((function(t){let a;if(a=!0===r.isBone?new i.Bone:t.length>1?new i.Group:1===t.length?t[0]:new i.Object3D,a!==t[0])for(let e=0,i=t.length;e<i;e++)a.add(t[e]);if(r.name&&(a.userData.name=r.name,a.name=o),pt(a,r),r.extensions&&ut(s,a,r),void 0!==r.matrix){const e=new i.Matrix4;e.fromArray(r.matrix),a.applyMatrix4(e)}else void 0!==r.translation&&a.position.fromArray(r.translation),void 0!==r.rotation&&a.quaternion.fromArray(r.rotation),void 0!==r.scale&&a.scale.fromArray(r.scale);return n.associations.has(a)||n.associations.set(a,{}),n.associations.get(a).nodes=e,a})),this.nodeCache[e]}loadScene(e){const t=this.extensions,s=this.json.scenes[e],n=this,r=new i.Group;s.name&&(r.name=n.createUniqueName(s.name)),pt(r,s),s.extensions&&ut(t,r,s);const o=s.nodes||[],a=[];for(let e=0,t=o.length;e<t;e++)a.push(n.getDependency("node",o[e]));return Promise.all(a).then((function(e){for(let t=0,i=e.length;t<i;t++)r.add(e[t]);return n.associations=(e=>{const t=new Map;for(const[e,s]of n.associations)(e instanceof i.Material||e instanceof i.Texture)&&t.set(e,s);return e.traverse((e=>{const i=n.associations.get(e);null!=i&&t.set(e,i)})),t})(r),r}))}_createAnimationTracks(e,t,s,n,r){const o=[],a=e.name?e.name:e.uuid,l=[];let h;switch(at[r.path]===at.weights?e.traverse((function(e){e.morphTargetInfluences&&l.push(e.name?e.name:e.uuid)})):l.push(a),at[r.path]){case at.weights:h=i.NumberKeyframeTrack;break;case at.rotation:h=i.QuaternionKeyframeTrack;break;case at.position:case at.scale:h=i.VectorKeyframeTrack;break;default:if(1===s.itemSize)h=i.NumberKeyframeTrack;else h=i.VectorKeyframeTrack}const c=void 0!==n.interpolation?lt[n.interpolation]:i.InterpolateLinear,d=this._getArrayFromAccessor(s);for(let e=0,i=l.length;e<i;e++){const i=new h(l[e]+"."+at[r.path],t.array,d,c);"CUBICSPLINE"===n.interpolation&&this._createCubicSplineTrackInterpolant(i),o.push(i)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const e=At(t.constructor),i=new Float32Array(t.length);for(let s=0,n=t.length;s<n;s++)i[s]=t[s]*e;t=i}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(e){return new(this instanceof i.QuaternionKeyframeTrack?et:Je)(this.times,this.values,this.getValueSize()/3,e)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function yt(e,t,s){const n=t.attributes,r=[];function o(t,i){return s.getDependency("accessor",t).then((function(t){e.setAttribute(i,t)}))}for(const t in n){const i=ot[t]||t.toLowerCase();i in e.attributes||r.push(o(n[t],i))}if(void 0!==t.indices&&!e.index){const i=s.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));r.push(i)}return i.ColorManagement.workingColorSpace!==i.LinearSRGBColorSpace&&"COLOR_0"in n&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${i.ColorManagement.workingColorSpace}" not supported.`),pt(e,t),function(e,t,s){const n=t.attributes,r=new i.Box3;if(void 0===n.POSITION)return;{const e=s.json.accessors[n.POSITION],t=e.min,o=e.max;if(void 0===t||void 0===o)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(r.set(new i.Vector3(t[0],t[1],t[2]),new i.Vector3(o[0],o[1],o[2])),e.normalized){const t=At(it[e.componentType]);r.min.multiplyScalar(t),r.max.multiplyScalar(t)}}const o=t.targets;if(void 0!==o){const e=new i.Vector3,t=new i.Vector3;for(let i=0,n=o.length;i<n;i++){const n=o[i];if(void 0!==n.POSITION){const i=s.json.accessors[n.POSITION],r=i.min,o=i.max;if(void 0!==r&&void 0!==o){if(t.setX(Math.max(Math.abs(r[0]),Math.abs(o[0]))),t.setY(Math.max(Math.abs(r[1]),Math.abs(o[1]))),t.setZ(Math.max(Math.abs(r[2]),Math.abs(o[2]))),i.normalized){const e=At(it[i.componentType]);t.multiplyScalar(e)}e.max(t)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(e)}e.boundingBox=r;const a=new i.Sphere;r.getCenter(a.center),a.radius=r.min.distanceTo(r.max)/2,e.boundingSphere=a}(e,t,s),Promise.all(r).then((function(){return void 0!==t.targets?function(e,t,i){let s=!1,n=!1,r=!1;for(let e=0,i=t.length;e<i;e++){const i=t[e];if(void 0!==i.POSITION&&(s=!0),void 0!==i.NORMAL&&(n=!0),void 0!==i.COLOR_0&&(r=!0),s&&n&&r)break}if(!s&&!n&&!r)return Promise.resolve(e);const o=[],a=[],l=[];for(let h=0,c=t.length;h<c;h++){const c=t[h];if(s){const t=void 0!==c.POSITION?i.getDependency("accessor",c.POSITION):e.attributes.position;o.push(t)}if(n){const t=void 0!==c.NORMAL?i.getDependency("accessor",c.NORMAL):e.attributes.normal;a.push(t)}if(r){const t=void 0!==c.COLOR_0?i.getDependency("accessor",c.COLOR_0):e.attributes.color;l.push(t)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then((function(t){const i=t[0],o=t[1],a=t[2];return s&&(e.morphAttributes.position=i),n&&(e.morphAttributes.normal=o),r&&(e.morphAttributes.color=a),e.morphTargetsRelative=!0,e}))}(e,t.targets,s):e}))}const wt=new WeakMap;class xt extends i.Loader{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,s,n){const r=new i.FileLoader(this.manager);r.setPath(this.path),r.setResponseType("arraybuffer"),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(e,(e=>{this.parse(e,t,n)}),s,n)}parse(e,t,s){this.decodeDracoFile(e,t,null,null,i.SRGBColorSpace).catch(s)}decodeDracoFile(e,t,s,n,r=i.LinearSRGBColorSpace){const o={attributeIDs:s||this.defaultAttributeIDs,attributeTypes:n||this.defaultAttributeTypes,useUniqueIDs:!!s,vertexColorSpace:r};return this.decodeGeometry(e,o).then(t)}decodeGeometry(e,t){const i=JSON.stringify(t);if(wt.has(e)){const t=wt.get(e);if(t.key===i)return t.promise;if(0===e.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let s;const n=this.workerNextTaskID++,r=e.byteLength,o=this._getWorker(n,r).then((i=>(s=i,new Promise(((i,r)=>{s._callbacks[n]={resolve:i,reject:r},s.postMessage({type:"decode",id:n,taskConfig:t,buffer:e},[e])}))))).then((e=>this._createGeometry(e.geometry)));return o.catch((()=>!0)).then((()=>{s&&n&&this._releaseTask(s,n)})),wt.set(e,{key:i,promise:o}),o}_createGeometry(e){const t=new i.BufferGeometry;e.index&&t.setIndex(new i.BufferAttribute(e.index.array,1));for(let s=0;s<e.attributes.length;s++){const n=e.attributes[s],r=n.name,o=n.array,a=n.itemSize,l=new i.BufferAttribute(o,a);"color"===r&&(this._assignVertexColorSpace(l,n.vertexColorSpace),l.normalized=o instanceof Float32Array==!1),t.setAttribute(r,l)}return t}_assignVertexColorSpace(e,t){if(t!==i.SRGBColorSpace)return;const s=new i.Color;for(let t=0,i=e.count;t<i;t++)s.fromBufferAttribute(e,t).convertSRGBToLinear(),e.setXYZ(t,s.r,s.g,s.b)}_loadLibrary(e,t){const s=new i.FileLoader(this.manager);return s.setPath(this.decoderPath),s.setResponseType(t),s.setWithCredentials(this.withCredentials),new Promise(((t,i)=>{s.load(e,t,void 0,i)}))}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=[];return"object"!=typeof WebAssembly||"js"===this.decoderConfig.type?e.push(this._loadLibrary("draco_decoder.js","text")):e.push(this._loadLibrary("draco_wasm_wrapper.js","text")),this.decoderPending=Promise.all(e).then((e=>{const t=e[0],i=Ot.toString(),s=["/* draco decoder */",t,"","/* worker */",i.substring(i.indexOf("{")+1,i.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([s]))})),this.decoderPending}_getWorker(e,t){return this._initDecoder().then((()=>{if(this.workerPool.length<this.workerLimit){const e=new Worker(this.workerSourceURL);e._callbacks={},e._taskCosts={},e._taskLoad=0,e.postMessage({type:"init",decoderConfig:this.decoderConfig}),e.onmessage=function(t){const i=t.data;switch(i.type){case"decode":e._callbacks[i.id].resolve(i);break;case"error":e._callbacks[i.id].reject(i);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+i.type+'"')}},this.workerPool.push(e)}else this.workerPool.sort((function(e,t){return e._taskLoad>t._taskLoad?-1:1}));const i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=t,i._taskLoad+=t,i}))}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map((e=>e._taskLoad)))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,""!==this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),this}}function Ot(){let e,t;function i(e,t,i,s,n,r){const o=r.num_components(),a=i.num_points()*o,l=a*n.BYTES_PER_ELEMENT,h=function(e,t){switch(t){case Float32Array:return e.DT_FLOAT32;case Int8Array:return e.DT_INT8;case Int16Array:return e.DT_INT16;case Int32Array:return e.DT_INT32;case Uint8Array:return e.DT_UINT8;case Uint16Array:return e.DT_UINT16;case Uint32Array:return e.DT_UINT32}}(e,n),c=e._malloc(l);t.GetAttributeDataArrayForAllPoints(i,r,h,l,c);const d=new n(e.HEAPF32.buffer,c,a).slice();return e._free(c),{name:s,array:d,itemSize:o}}onmessage=function(s){const n=s.data;switch(n.type){case"init":e=n.decoderConfig,t=new Promise((function(t){e.onModuleLoaded=function(e){t({draco:e})},DracoDecoderModule(e)}));break;case"decode":const s=n.buffer,r=n.taskConfig;t.then((e=>{const t=e.draco,o=new t.Decoder;try{const e=function(e,t,s,n){const r=n.attributeIDs,o=n.attributeTypes;let a,l;const h=t.GetEncodedGeometryType(s);if(h===e.TRIANGULAR_MESH)a=new e.Mesh,l=t.DecodeArrayToMesh(s,s.byteLength,a);else{if(h!==e.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");a=new e.PointCloud,l=t.DecodeArrayToPointCloud(s,s.byteLength,a)}if(!l.ok()||0===a.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+l.error_msg());const c={index:null,attributes:[]};for(const s in r){const l=self[o[s]];let h,d;if(n.useUniqueIDs)d=r[s],h=t.GetAttributeByUniqueId(a,d);else{if(d=t.GetAttributeId(a,e[r[s]]),-1===d)continue;h=t.GetAttribute(a,d)}const u=i(e,t,a,s,l,h);"color"===s&&(u.vertexColorSpace=n.vertexColorSpace),c.attributes.push(u)}h===e.TRIANGULAR_MESH&&(c.index=function(e,t,i){const s=i.num_faces(),n=3*s,r=4*n,o=e._malloc(r);t.GetTrianglesUInt32Array(i,r,o);const a=new Uint32Array(e.HEAPF32.buffer,o,n).slice();return e._free(o),{array:a,itemSize:1}}(e,t,a));return e.destroy(a),c}(t,o,new Int8Array(s),r),a=e.attributes.map((e=>e.array.buffer));e.index&&a.push(e.index.array.buffer),self.postMessage({type:"decode",id:n.id,geometry:e},a)}catch(e){console.error(e),self.postMessage({type:"error",id:n.id,error:e.message})}finally{t.destroy(o)}}))}}}
/*!
  fflate - fast JavaScript compression/decompression
  <https://101arrowz.github.io/fflate>
  Licensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE
  version 0.6.9
  */var Ct=function(e){return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))};try{URL.revokeObjectURL(Ct(""))}catch(V){Ct=function(e){return"data:application/javascript;charset=UTF-8,"+encodeURI(e)}}var St=Uint8Array,It=Uint16Array,Et=Uint32Array,kt=new St([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Bt=new St([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Qt=new St([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Mt=function(e,t){for(var i=new It(31),s=0;s<31;++s)i[s]=t+=1<<e[s-1];var n=new Et(i[30]);for(s=1;s<30;++s)for(var r=i[s];r<i[s+1];++r)n[r]=r-i[s]<<5|s;return[i,n]},Tt=Mt(kt,2),Dt=Tt[0],Rt=Tt[1];Dt[28]=258,Rt[258]=28;for(var Pt=Mt(Bt,0)[0],Lt=new It(32768),Ft=0;Ft<32768;++Ft){var Ut=(43690&Ft)>>>1|(21845&Ft)<<1;Ut=(61680&(Ut=(52428&Ut)>>>2|(13107&Ut)<<2))>>>4|(3855&Ut)<<4,Lt[Ft]=((65280&Ut)>>>8|(255&Ut)<<8)>>>1}var zt=function(e,t,i){for(var s=e.length,n=0,r=new It(t);n<s;++n)++r[e[n]-1];var o,a=new It(t);for(n=0;n<t;++n)a[n]=a[n-1]+r[n-1]<<1;if(i){o=new It(1<<t);var l=15-t;for(n=0;n<s;++n)if(e[n])for(var h=n<<4|e[n],c=t-e[n],d=a[e[n]-1]++<<c,u=d|(1<<c)-1;d<=u;++d)o[Lt[d]>>>l]=h}else for(o=new It(s),n=0;n<s;++n)e[n]&&(o[n]=Lt[a[e[n]-1]++]>>>15-e[n]);return o},Gt=new St(288);for(Ft=0;Ft<144;++Ft)Gt[Ft]=8;for(Ft=144;Ft<256;++Ft)Gt[Ft]=9;for(Ft=256;Ft<280;++Ft)Gt[Ft]=7;for(Ft=280;Ft<288;++Ft)Gt[Ft]=8;var Nt=new St(32);for(Ft=0;Ft<32;++Ft)Nt[Ft]=5;var Vt=zt(Gt,9,1),jt=zt(Nt,5,1),Ht=function(e){for(var t=e[0],i=1;i<e.length;++i)e[i]>t&&(t=e[i]);return t},qt=function(e,t,i){var s=t/8|0;return(e[s]|e[s+1]<<8)>>(7&t)&i},Xt=function(e,t){var i=t/8|0;return(e[i]|e[i+1]<<8|e[i+2]<<16)>>(7&t)},Wt=function(e){return(e/8|0)+(7&e&&1)},Zt=function(e,t,i){var s=e.length;if(!s||i&&!i.l&&s<5)return t||new St(0);var n=!t||i,r=!i||i.i;i||(i={}),t||(t=new St(3*s));var o=function(e){var i=t.length;if(e>i){var s=new St(Math.max(2*i,e));s.set(t),t=s}},a=i.f||0,l=i.p||0,h=i.b||0,c=i.l,d=i.d,u=i.m,p=i.n,f=8*s;do{if(!c){i.f=a=qt(e,l,1);var m=qt(e,l+1,3);if(l+=3,!m){var g=e[(E=Wt(l)+4)-4]|e[E-3]<<8,A=E+g;if(A>s){if(r)throw"unexpected EOF";break}n&&o(h+g),t.set(e.subarray(E,A),h),i.b=h+=g,i.p=l=8*A;continue}if(1==m)c=Vt,d=jt,u=9,p=5;else{if(2!=m)throw"invalid block type";var b=qt(e,l,31)+257,v=qt(e,l+10,15)+4,y=b+qt(e,l+5,31)+1;l+=14;for(var w=new St(y),x=new St(19),O=0;O<v;++O)x[Qt[O]]=qt(e,l+3*O,7);l+=3*v;var C=Ht(x),S=(1<<C)-1,I=zt(x,C,1);for(O=0;O<y;){var E,k=I[qt(e,l,S)];if(l+=15&k,(E=k>>>4)<16)w[O++]=E;else{var B=0,Q=0;for(16==E?(Q=3+qt(e,l,3),l+=2,B=w[O-1]):17==E?(Q=3+qt(e,l,7),l+=3):18==E&&(Q=11+qt(e,l,127),l+=7);Q--;)w[O++]=B}}var M=w.subarray(0,b),T=w.subarray(b);u=Ht(M),p=Ht(T),c=zt(M,u,1),d=zt(T,p,1)}if(l>f){if(r)throw"unexpected EOF";break}}n&&o(h+131072);for(var D=(1<<u)-1,R=(1<<p)-1,P=l;;P=l){var L=(B=c[Xt(e,l)&D])>>>4;if((l+=15&B)>f){if(r)throw"unexpected EOF";break}if(!B)throw"invalid length/literal";if(L<256)t[h++]=L;else{if(256==L){P=l,c=null;break}var F=L-254;if(L>264){var U=kt[O=L-257];F=qt(e,l,(1<<U)-1)+Dt[O],l+=U}var z=d[Xt(e,l)&R],G=z>>>4;if(!z)throw"invalid distance";l+=15&z;T=Pt[G];if(G>3){U=Bt[G];T+=Xt(e,l)&(1<<U)-1,l+=U}if(l>f){if(r)throw"unexpected EOF";break}n&&o(h+131072);for(var N=h+F;h<N;h+=4)t[h]=t[h-T],t[h+1]=t[h+1-T],t[h+2]=t[h+2-T],t[h+3]=t[h+3-T];h=N}}i.l=c,i.p=P,i.b=h,c&&(a=1,i.m=u,i.d=d,i.n=p)}while(!a);return h==t.length?t:function(e,t,i){(null==i||i>e.length)&&(i=e.length);var s=new(e instanceof It?It:e instanceof Et?Et:St)(i-t);return s.set(e.subarray(t,i)),s}(t,0,h)},Yt=new St(0);function _t(e,t){return Zt((function(e){if(8!=(15&e[0])||e[0]>>>4>7||(e[0]<<8|e[1])%31)throw"invalid zlib data";if(32&e[1])throw"invalid zlib data: preset dictionaries not supported"}(e),e.subarray(2,-4)),t)}var Kt="undefined"!=typeof TextDecoder&&new TextDecoder;try{Kt.decode(Yt,{stream:!0})}catch(V){}function Jt(e,t,i){const s=i.length-e-1;if(t>=i[s])return s-1;if(t<=i[e])return e;let n=e,r=s,o=Math.floor((n+r)/2);for(;t<i[o]||t>=i[o+1];)t<i[o]?r=o:n=o,o=Math.floor((n+r)/2);return o}function $t(e,t){let i=1;for(let t=2;t<=e;++t)i*=t;let s=1;for(let e=2;e<=t;++e)s*=e;for(let i=2;i<=e-t;++i)s*=i;return i/s}function ei(e,t,s,n,r){const o=function(e,t,s,n,r){const o=r<e?r:e,a=[],l=Jt(e,n,t),h=function(e,t,i,s,n){const r=[];for(let e=0;e<=i;++e)r[e]=0;const o=[];for(let e=0;e<=s;++e)o[e]=r.slice(0);const a=[];for(let e=0;e<=i;++e)a[e]=r.slice(0);a[0][0]=1;const l=r.slice(0),h=r.slice(0);for(let s=1;s<=i;++s){l[s]=t-n[e+1-s],h[s]=n[e+s]-t;let i=0;for(let e=0;e<s;++e){const t=h[e+1],n=l[s-e];a[s][e]=t+n;const r=a[e][s-1]/a[s][e];a[e][s]=i+t*r,i=n*r}a[s][s]=i}for(let e=0;e<=i;++e)o[0][e]=a[e][i];for(let e=0;e<=i;++e){let t=0,n=1;const l=[];for(let e=0;e<=i;++e)l[e]=r.slice(0);l[0][0]=1;for(let r=1;r<=s;++r){let s=0;const h=e-r,c=i-r;e>=r&&(l[n][0]=l[t][0]/a[c+1][h],s=l[n][0]*a[h][c]);const d=e-1<=c?r-1:i-e;for(let e=h>=-1?1:-h;e<=d;++e)l[n][e]=(l[t][e]-l[t][e-1])/a[c+1][h+e],s+=l[n][e]*a[h+e][c];e<=c&&(l[n][r]=-l[t][r-1]/a[c+1][e],s+=l[n][r]*a[e][c]),o[r][e]=s;const u=t;t=n,n=u}}let c=i;for(let e=1;e<=s;++e){for(let t=0;t<=i;++t)o[e][t]*=c;c*=i-e}return o}(l,n,e,o,t),c=[];for(let e=0;e<s.length;++e){const t=s[e].clone(),i=t.w;t.x*=i,t.y*=i,t.z*=i,c[e]=t}for(let t=0;t<=o;++t){const i=c[l-e].clone().multiplyScalar(h[t][0]);for(let s=1;s<=e;++s)i.add(c[l-e+s].clone().multiplyScalar(h[t][s]));a[t]=i}for(let e=o+1;e<=r+1;++e)a[e]=new i.Vector4(0,0,0);return a}(e,t,s,n,r);return function(e){const t=e.length,s=[],n=[];for(let r=0;r<t;++r){const t=e[r];s[r]=new i.Vector3(t.x,t.y,t.z),n[r]=t.w}const r=[];for(let e=0;e<t;++e){const t=s[e].clone();for(let i=1;i<=e;++i)t.sub(r[e-i].clone().multiplyScalar($t(e,i)*n[i]));r[e]=t.divideScalar(n[0])}return r}(o)}class ti extends i.Curve{constructor(e,t,s,n,r){super(),this.degree=e,this.knots=t,this.controlPoints=[],this.startKnot=n||0,this.endKnot=r||this.knots.length-1;for(let e=0;e<s.length;++e){const t=s[e];this.controlPoints[e]=new i.Vector4(t.x,t.y,t.z,t.w)}}getPoint(e,t=new i.Vector3){const s=t,n=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),r=function(e,t,s,n){const r=Jt(e,n,t),o=function(e,t,i,s){const n=[],r=[],o=[];n[0]=1;for(let a=1;a<=i;++a){r[a]=t-s[e+1-a],o[a]=s[e+a]-t;let i=0;for(let e=0;e<a;++e){const t=o[e+1],s=r[a-e],l=n[e]/(t+s);n[e]=i+t*l,i=s*l}n[a]=i}return n}(r,n,e,t),a=new i.Vector4(0,0,0,0);for(let t=0;t<=e;++t){const i=s[r-e+t],n=o[t],l=i.w*n;a.x+=i.x*l,a.y+=i.y*l,a.z+=i.z*l,a.w+=i.w*n}return a}(this.degree,this.knots,this.controlPoints,n);return 1!==r.w&&r.divideScalar(r.w),s.set(r.x,r.y,r.z)}getTangent(e,t=new i.Vector3){const s=t,n=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),r=ei(this.degree,this.knots,this.controlPoints,n,1);return s.copy(r[1]).normalize(),s}}let ii,si,ni;class ri extends i.Loader{constructor(e){super(e)}load(e,t,s,n){const r=this,o=""===r.path?i.LoaderUtils.extractUrlBase(e):r.path,a=new i.FileLoader(this.manager);a.setPath(r.path),a.setResponseType("arraybuffer"),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(e,(function(i){try{t(r.parse(i,o))}catch(t){n?n(t):console.error(t),r.manager.itemError(e)}}),s,n)}parse(e,t){if(function(e){const t="Kaydara FBX Binary  \0";return e.byteLength>=t.length&&t===xi(e,0,t.length)}(e))ii=(new ci).parse(e);else{const t=xi(e);if(!function(e){const t=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let i=0;function s(t){const s=e[t-1];return e=e.slice(i+t),i++,s}for(let e=0;e<t.length;++e){if(s(1)===t[e])return!1}return!0}(t))throw new Error("THREE.FBXLoader: Unknown format.");if(pi(t)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+pi(t));ii=(new hi).parse(t)}const s=new i.TextureLoader(this.manager).setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);return new oi(s,this.manager).parse(ii)}}class oi{constructor(e,t){this.textureLoader=e,this.manager=t}parse(){si=this.parseConnections();const e=this.parseImages(),t=this.parseTextures(e),i=this.parseMaterials(t),s=this.parseDeformers(),n=(new ai).parse(s);return this.parseScene(s,n,i),ni}parseConnections(){const e=new Map;if("Connections"in ii){ii.Connections.connections.forEach((function(t){const i=t[0],s=t[1],n=t[2];e.has(i)||e.set(i,{parents:[],children:[]});const r={ID:s,relationship:n};e.get(i).parents.push(r),e.has(s)||e.set(s,{parents:[],children:[]});const o={ID:i,relationship:n};e.get(s).children.push(o)}))}return e}parseImages(){const e={},t={};if("Video"in ii.Objects){const i=ii.Objects.Video;for(const s in i){const n=i[s];if(e[parseInt(s)]=n.RelativeFilename||n.Filename,"Content"in n){const e=n.Content instanceof ArrayBuffer&&n.Content.byteLength>0,r="string"==typeof n.Content&&""!==n.Content;if(e||r){const e=this.parseImage(i[s]);t[n.RelativeFilename||n.Filename]=e}}}}for(const i in e){const s=e[i];void 0!==t[s]?e[i]=t[s]:e[i]=e[i].split("\\").pop()}return e}parseImage(e){const t=e.Content,i=e.RelativeFilename||e.Filename,s=i.slice(i.lastIndexOf(".")+1).toLowerCase();let n;switch(s){case"bmp":n="image/bmp";break;case"jpg":case"jpeg":n="image/jpeg";break;case"png":n="image/png";break;case"tif":n="image/tiff";break;case"tga":null===this.manager.getHandler(".tga")&&console.warn("FBXLoader: TGA loader not found, skipping ",i),n="image/tga";break;default:return void console.warn('FBXLoader: Image type "'+s+'" is not supported.')}if("string"==typeof t)return"data:"+n+";base64,"+t;{const e=new Uint8Array(t);return window.URL.createObjectURL(new Blob([e],{type:n}))}}parseTextures(e){const t=new Map;if("Texture"in ii.Objects){const i=ii.Objects.Texture;for(const s in i){const n=this.parseTexture(i[s],e);t.set(parseInt(s),n)}}return t}parseTexture(e,t){const s=this.loadTexture(e,t);s.ID=e.id,s.name=e.attrName;const n=e.WrapModeU,r=e.WrapModeV,o=void 0!==n?n.value:0,a=void 0!==r?r.value:0;if(s.wrapS=0===o?i.RepeatWrapping:i.ClampToEdgeWrapping,s.wrapT=0===a?i.RepeatWrapping:i.ClampToEdgeWrapping,"Scaling"in e){const t=e.Scaling.value;s.repeat.x=t[0],s.repeat.y=t[1]}if("Translation"in e){const t=e.Translation.value;s.offset.x=t[0],s.offset.y=t[1]}return s}loadTexture(e,t){const s=new Set(["tga","tif","tiff","exr","dds","hdr","ktx2"]),n=e.FileName.split(".").pop().toLowerCase(),r=s.has(n)?this.manager.getHandler(`.${n}`):this.textureLoader;if(!r)return console.warn(`FBXLoader: ${n.toUpperCase()} loader not found, creating placeholder texture for`,e.RelativeFilename),new i.Texture;const o=r.path;o||r.setPath(this.textureLoader.path);const a=si.get(e.id).children;let l;void 0!==a&&a.length>0&&void 0!==t[a[0].ID]&&(l=t[a[0].ID],0!==l.indexOf("blob:")&&0!==l.indexOf("data:")||r.setPath(void 0));const h=r.load(l);return r.setPath(o),h}parseMaterials(e){const t=new Map;if("Material"in ii.Objects){const i=ii.Objects.Material;for(const s in i){const n=this.parseMaterial(i[s],e);null!==n&&t.set(parseInt(s),n)}}return t}parseMaterial(e,t){const s=e.id,n=e.attrName;let r=e.ShadingModel;if("object"==typeof r&&(r=r.value),!si.has(s))return null;const o=this.parseParameters(e,t,s);let a;switch(r.toLowerCase()){case"phong":a=new i.MeshPhongMaterial;break;case"lambert":a=new i.MeshLambertMaterial;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',r),a=new i.MeshPhongMaterial}return a.setValues(o),a.name=n,a}parseParameters(e,t,s){const n={};e.BumpFactor&&(n.bumpScale=e.BumpFactor.value),e.Diffuse?n.color=i.ColorManagement.toWorkingColorSpace((new i.Color).fromArray(e.Diffuse.value),i.SRGBColorSpace):!e.DiffuseColor||"Color"!==e.DiffuseColor.type&&"ColorRGB"!==e.DiffuseColor.type||(n.color=i.ColorManagement.toWorkingColorSpace((new i.Color).fromArray(e.DiffuseColor.value),i.SRGBColorSpace)),e.DisplacementFactor&&(n.displacementScale=e.DisplacementFactor.value),e.Emissive?n.emissive=i.ColorManagement.toWorkingColorSpace((new i.Color).fromArray(e.Emissive.value),i.SRGBColorSpace):!e.EmissiveColor||"Color"!==e.EmissiveColor.type&&"ColorRGB"!==e.EmissiveColor.type||(n.emissive=i.ColorManagement.toWorkingColorSpace((new i.Color).fromArray(e.EmissiveColor.value),i.SRGBColorSpace)),e.EmissiveFactor&&(n.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),n.opacity=1-(e.TransparencyFactor?parseFloat(e.TransparencyFactor.value):0),1!==n.opacity&&0!==n.opacity||(n.opacity=e.Opacity?parseFloat(e.Opacity.value):null,null===n.opacity&&(n.opacity=1-(e.TransparentColor?parseFloat(e.TransparentColor.value[0]):0))),n.opacity<1&&(n.transparent=!0),e.ReflectionFactor&&(n.reflectivity=e.ReflectionFactor.value),e.Shininess&&(n.shininess=e.Shininess.value),e.Specular?n.specular=i.ColorManagement.toWorkingColorSpace((new i.Color).fromArray(e.Specular.value),i.SRGBColorSpace):e.SpecularColor&&"Color"===e.SpecularColor.type&&(n.specular=i.ColorManagement.toWorkingColorSpace((new i.Color).fromArray(e.SpecularColor.value),i.SRGBColorSpace));const r=this;return si.get(s).children.forEach((function(e){const s=e.relationship;switch(s){case"Bump":n.bumpMap=r.getTexture(t,e.ID);break;case"Maya|TEX_ao_map":n.aoMap=r.getTexture(t,e.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":n.map=r.getTexture(t,e.ID),void 0!==n.map&&(n.map.colorSpace=i.SRGBColorSpace);break;case"DisplacementColor":n.displacementMap=r.getTexture(t,e.ID);break;case"EmissiveColor":n.emissiveMap=r.getTexture(t,e.ID),void 0!==n.emissiveMap&&(n.emissiveMap.colorSpace=i.SRGBColorSpace);break;case"NormalMap":case"Maya|TEX_normal_map":n.normalMap=r.getTexture(t,e.ID);break;case"ReflectionColor":n.envMap=r.getTexture(t,e.ID),void 0!==n.envMap&&(n.envMap.mapping=i.EquirectangularReflectionMapping,n.envMap.colorSpace=i.SRGBColorSpace);break;case"SpecularColor":n.specularMap=r.getTexture(t,e.ID),void 0!==n.specularMap&&(n.specularMap.colorSpace=i.SRGBColorSpace);break;case"TransparentColor":case"TransparencyFactor":n.alphaMap=r.getTexture(t,e.ID),n.transparent=!0;break;default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",s)}})),n}getTexture(e,t){return"LayeredTexture"in ii.Objects&&t in ii.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),t=si.get(t).children[0].ID),e.get(t)}parseDeformers(){const e={},t={};if("Deformer"in ii.Objects){const i=ii.Objects.Deformer;for(const s in i){const n=i[s],r=si.get(parseInt(s));if("Skin"===n.attrType){const t=this.parseSkeleton(r,i);t.ID=s,r.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),t.geometryID=r.parents[0].ID,e[s]=t}else if("BlendShape"===n.attrType){const e={id:s};e.rawTargets=this.parseMorphTargets(r,i),e.id=s,r.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),t[s]=e}}}return{skeletons:e,morphTargets:t}}parseSkeleton(e,t){const s=[];return e.children.forEach((function(e){const n=t[e.ID];if("Cluster"!==n.attrType)return;const r={ID:e.ID,indices:[],weights:[],transformLink:(new i.Matrix4).fromArray(n.TransformLink.a)};"Indexes"in n&&(r.indices=n.Indexes.a,r.weights=n.Weights.a),s.push(r)})),{rawBones:s,bones:[]}}parseMorphTargets(e,t){const i=[];for(let s=0;s<e.children.length;s++){const n=e.children[s],r=t[n.ID],o={name:r.attrName,initialWeight:r.DeformPercent,id:r.id,fullWeights:r.FullWeights.a};if("BlendShapeChannel"!==r.attrType)return;o.geoID=si.get(parseInt(n.ID)).children.filter((function(e){return void 0===e.relationship}))[0].ID,i.push(o)}return i}parseScene(e,t,s){ni=new i.Group;const n=this.parseModels(e.skeletons,t,s),r=ii.Objects.Model,o=this;n.forEach((function(e){const t=r[e.ID];o.setLookAtProperties(e,t);si.get(e.ID).parents.forEach((function(t){const i=n.get(t.ID);void 0!==i&&i.add(e)})),null===e.parent&&ni.add(e)})),this.bindSkeleton(e.skeletons,t,n),this.addGlobalSceneSettings(),ni.traverse((function(e){if(e.userData.transformData){e.parent&&(e.userData.transformData.parentMatrix=e.parent.matrix,e.userData.transformData.parentMatrixWorld=e.parent.matrixWorld);const t=vi(e.userData.transformData);e.applyMatrix4(t),e.updateWorldMatrix()}}));const a=(new li).parse();1===ni.children.length&&ni.children[0].isGroup&&(ni.children[0].animations=a,ni=ni.children[0]),ni.animations=a}parseModels(e,t,s){const n=new Map,r=ii.Objects.Model;for(const o in r){const a=parseInt(o),l=r[o],h=si.get(a);let c=this.buildSkeleton(h,e,a,l.attrName);if(!c){switch(l.attrType){case"Camera":c=this.createCamera(h);break;case"Light":c=this.createLight(h);break;case"Mesh":c=this.createMesh(h,t,s);break;case"NurbsCurve":c=this.createCurve(h,t);break;case"LimbNode":case"Root":c=new i.Bone;break;default:c=new i.Group}c.name=l.attrName?i.PropertyBinding.sanitizeNodeName(l.attrName):"",c.userData.originalName=l.attrName,c.ID=a}this.getTransformData(c,l),n.set(a,c)}return n}buildSkeleton(e,t,s,n){let r=null;return e.parents.forEach((function(e){for(const o in t){const a=t[o];a.rawBones.forEach((function(t,o){if(t.ID===e.ID){const e=r;r=new i.Bone,r.matrixWorld.copy(t.transformLink),r.name=n?i.PropertyBinding.sanitizeNodeName(n):"",r.userData.originalName=n,r.ID=s,a.bones[o]=r,null!==e&&r.add(e)}}))}})),r}createCamera(e){let t,s;if(e.children.forEach((function(e){const t=ii.Objects.NodeAttribute[e.ID];void 0!==t&&(s=t)})),void 0===s)t=new i.Object3D;else{let e=0;void 0!==s.CameraProjectionType&&1===s.CameraProjectionType.value&&(e=1);let n=1;void 0!==s.NearPlane&&(n=s.NearPlane.value/1e3);let r=1e3;void 0!==s.FarPlane&&(r=s.FarPlane.value/1e3);let o=window.innerWidth,a=window.innerHeight;void 0!==s.AspectWidth&&void 0!==s.AspectHeight&&(o=s.AspectWidth.value,a=s.AspectHeight.value);const l=o/a;let h=45;void 0!==s.FieldOfView&&(h=s.FieldOfView.value);const c=s.FocalLength?s.FocalLength.value:null;switch(e){case 0:t=new i.PerspectiveCamera(h,l,n,r),null!==c&&t.setFocalLength(c);break;case 1:console.warn("THREE.FBXLoader: Orthographic cameras not supported yet."),t=new i.Object3D;break;default:console.warn("THREE.FBXLoader: Unknown camera type "+e+"."),t=new i.Object3D}}return t}createLight(e){let t,s;if(e.children.forEach((function(e){const t=ii.Objects.NodeAttribute[e.ID];void 0!==t&&(s=t)})),void 0===s)t=new i.Object3D;else{let e;e=void 0===s.LightType?0:s.LightType.value;let n=16777215;void 0!==s.Color&&(n=i.ColorManagement.toWorkingColorSpace((new i.Color).fromArray(s.Color.value),i.SRGBColorSpace));let r=void 0===s.Intensity?1:s.Intensity.value/100;void 0!==s.CastLightOnObject&&0===s.CastLightOnObject.value&&(r=0);let o=0;void 0!==s.FarAttenuationEnd&&(o=void 0!==s.EnableFarAttenuation&&0===s.EnableFarAttenuation.value?0:s.FarAttenuationEnd.value);const a=1;switch(e){case 0:t=new i.PointLight(n,r,o,a);break;case 1:t=new i.DirectionalLight(n,r);break;case 2:let e=Math.PI/3;void 0!==s.InnerAngle&&(e=i.MathUtils.degToRad(s.InnerAngle.value));let l=0;void 0!==s.OuterAngle&&(l=i.MathUtils.degToRad(s.OuterAngle.value),l=Math.max(l,1)),t=new i.SpotLight(n,r,o,e,l,a);break;default:console.warn("THREE.FBXLoader: Unknown light type "+s.LightType.value+", defaulting to a PointLight."),t=new i.PointLight(n,r)}void 0!==s.CastShadows&&1===s.CastShadows.value&&(t.castShadow=!0)}return t}createMesh(e,t,s){let n,r=null,o=null;const a=[];return e.children.forEach((function(e){t.has(e.ID)&&(r=t.get(e.ID)),s.has(e.ID)&&a.push(s.get(e.ID))})),a.length>1?o=a:a.length>0?o=a[0]:(o=new i.MeshPhongMaterial({name:i.Loader.DEFAULT_MATERIAL_NAME,color:13421772}),a.push(o)),"color"in r.attributes&&a.forEach((function(e){e.vertexColors=!0})),r.FBX_Deformer?(n=new i.SkinnedMesh(r,o),n.normalizeSkinWeights()):n=new i.Mesh(r,o),n}createCurve(e,t){const s=e.children.reduce((function(e,i){return t.has(i.ID)&&(e=t.get(i.ID)),e}),null),n=new i.LineBasicMaterial({name:i.Loader.DEFAULT_MATERIAL_NAME,color:3342591,linewidth:1});return new i.Line(s,n)}getTransformData(e,t){const i={};"InheritType"in t&&(i.inheritType=parseInt(t.InheritType.value)),i.eulerOrder=yi("RotationOrder"in t?t.RotationOrder.value:0),"Lcl_Translation"in t&&(i.translation=t.Lcl_Translation.value),"PreRotation"in t&&(i.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(i.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(i.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(i.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(i.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(i.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(i.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(i.rotationPivot=t.RotationPivot.value),e.userData.transformData=i}setLookAtProperties(e,t){if("LookAtProperty"in t){si.get(e.ID).children.forEach((function(t){if("LookAtProperty"===t.relationship){const s=ii.Objects.Model[t.ID];if("Lcl_Translation"in s){const t=s.Lcl_Translation.value;void 0!==e.target?(e.target.position.fromArray(t),ni.add(e.target)):e.lookAt((new i.Vector3).fromArray(t))}}}))}}bindSkeleton(e,t,s){const n=this.parsePoseNodes();for(const r in e){const o=e[r];si.get(parseInt(o.ID)).parents.forEach((function(e){if(t.has(e.ID)){const t=e.ID;si.get(t).parents.forEach((function(e){if(s.has(e.ID)){s.get(e.ID).bind(new i.Skeleton(o.bones),n[e.ID])}}))}}))}}parsePoseNodes(){const e={};if("Pose"in ii.Objects){const t=ii.Objects.Pose;for(const s in t)if("BindPose"===t[s].attrType&&t[s].NbPoseNodes>0){const n=t[s].PoseNode;Array.isArray(n)?n.forEach((function(t){e[t.Node]=(new i.Matrix4).fromArray(t.Matrix.a)})):e[n.Node]=(new i.Matrix4).fromArray(n.Matrix.a)}}return e}addGlobalSceneSettings(){if("GlobalSettings"in ii){if("AmbientColor"in ii.GlobalSettings){const e=ii.GlobalSettings.AmbientColor.value,t=e[0],s=e[1],n=e[2];if(0!==t||0!==s||0!==n){const e=(new i.Color).setRGB(t,s,n,i.SRGBColorSpace);ni.add(new i.AmbientLight(e,1))}}"UnitScaleFactor"in ii.GlobalSettings&&(ni.userData.unitScaleFactor=ii.GlobalSettings.UnitScaleFactor.value)}}}class ai{constructor(){this.negativeMaterialIndices=!1}parse(e){const t=new Map;if("Geometry"in ii.Objects){const i=ii.Objects.Geometry;for(const s in i){const n=si.get(parseInt(s)),r=this.parseGeometry(n,i[s],e);t.set(parseInt(s),r)}}return!0===this.negativeMaterialIndices&&console.warn("THREE.FBXLoader: The FBX file contains invalid (negative) material indices. The asset might not render as expected."),t}parseGeometry(e,t,i){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,i);case"NurbsCurve":return this.parseNurbsGeometry(t)}}parseMeshGeometry(e,t,i){const s=i.skeletons,n=[],r=e.parents.map((function(e){return ii.Objects.Model[e.ID]}));if(0===r.length)return;const o=e.children.reduce((function(e,t){return void 0!==s[t.ID]&&(e=s[t.ID]),e}),null);e.children.forEach((function(e){void 0!==i.morphTargets[e.ID]&&n.push(i.morphTargets[e.ID])}));const a=r[0],l={};"RotationOrder"in a&&(l.eulerOrder=yi(a.RotationOrder.value)),"InheritType"in a&&(l.inheritType=parseInt(a.InheritType.value)),"GeometricTranslation"in a&&(l.translation=a.GeometricTranslation.value),"GeometricRotation"in a&&(l.rotation=a.GeometricRotation.value),"GeometricScaling"in a&&(l.scale=a.GeometricScaling.value);const h=vi(l);return this.genGeometry(t,o,n,h)}genGeometry(e,t,s,n){const r=new i.BufferGeometry;e.attrName&&(r.name=e.attrName);const o=this.parseGeoNode(e,t),a=this.genBuffers(o),l=new i.Float32BufferAttribute(a.vertex,3);if(l.applyMatrix4(n),r.setAttribute("position",l),a.colors.length>0&&r.setAttribute("color",new i.Float32BufferAttribute(a.colors,3)),t&&(r.setAttribute("skinIndex",new i.Uint16BufferAttribute(a.weightsIndices,4)),r.setAttribute("skinWeight",new i.Float32BufferAttribute(a.vertexWeights,4)),r.FBX_Deformer=t),a.normal.length>0){const e=(new i.Matrix3).getNormalMatrix(n),t=new i.Float32BufferAttribute(a.normal,3);t.applyNormalMatrix(e),r.setAttribute("normal",t)}if(a.uvs.forEach((function(e,t){const s=0===t?"uv":`uv${t}`;r.setAttribute(s,new i.Float32BufferAttribute(a.uvs[t],2))})),o.material&&"AllSame"!==o.material.mappingType){let e=a.materialIndex[0],t=0;if(a.materialIndex.forEach((function(i,s){i!==e&&(r.addGroup(t,s-t,e),e=i,t=s)})),r.groups.length>0){const t=r.groups[r.groups.length-1],i=t.start+t.count;i!==a.materialIndex.length&&r.addGroup(i,a.materialIndex.length-i,e)}0===r.groups.length&&r.addGroup(0,a.materialIndex.length,a.materialIndex[0])}return this.addMorphTargets(r,e,s,n),r}parseGeoNode(e,t){const i={};if(i.vertexPositions=void 0!==e.Vertices?e.Vertices.a:[],i.vertexIndices=void 0!==e.PolygonVertexIndex?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(i.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(i.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(i.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){i.uv=[];let t=0;for(;e.LayerElementUV[t];)e.LayerElementUV[t].UV&&i.uv.push(this.parseUVs(e.LayerElementUV[t])),t++}return i.weightTable={},null!==t&&(i.skeleton=t,t.rawBones.forEach((function(e,t){e.indices.forEach((function(s,n){void 0===i.weightTable[s]&&(i.weightTable[s]=[]),i.weightTable[s].push({id:t,weight:e.weights[n]})}))}))),i}genBuffers(e){const t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let i=0,s=0,n=!1,r=[],o=[],a=[],l=[],h=[],c=[];const d=this;return e.vertexIndices.forEach((function(u,p){let f,m=!1;u<0&&(u=~u,m=!0);let g=[],A=[];if(r.push(3*u,3*u+1,3*u+2),e.color){const t=gi(p,i,u,e.color);a.push(t[0],t[1],t[2])}if(e.skeleton){if(void 0!==e.weightTable[u]&&e.weightTable[u].forEach((function(e){A.push(e.weight),g.push(e.id)})),A.length>4){n||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),n=!0);const e=[0,0,0,0],t=[0,0,0,0];A.forEach((function(i,s){let n=i,r=g[s];t.forEach((function(t,i,s){if(n>t){s[i]=n,n=t;const o=e[i];e[i]=r,r=o}}))})),g=e,A=t}for(;A.length<4;)A.push(0),g.push(0);for(let e=0;e<4;++e)h.push(A[e]),c.push(g[e])}if(e.normal){const t=gi(p,i,u,e.normal);o.push(t[0],t[1],t[2])}e.material&&"AllSame"!==e.material.mappingType&&(f=gi(p,i,u,e.material)[0],f<0&&(d.negativeMaterialIndices=!0,f=0)),e.uv&&e.uv.forEach((function(e,t){const s=gi(p,i,u,e);void 0===l[t]&&(l[t]=[]),l[t].push(s[0]),l[t].push(s[1])})),s++,m&&(d.genFace(t,e,r,f,o,a,l,h,c,s),i++,s=0,r=[],o=[],a=[],l=[],h=[],c=[])})),t}getNormalNewell(e){const t=new i.Vector3(0,0,0);for(let i=0;i<e.length;i++){const s=e[i],n=e[(i+1)%e.length];t.x+=(s.y-n.y)*(s.z+n.z),t.y+=(s.z-n.z)*(s.x+n.x),t.z+=(s.x-n.x)*(s.y+n.y)}return t.normalize(),t}getNormalTangentAndBitangent(e){const t=this.getNormalNewell(e),s=(Math.abs(t.z)>.5?new i.Vector3(0,1,0):new i.Vector3(0,0,1)).cross(t).normalize(),n=t.clone().cross(s).normalize();return{normal:t,tangent:s,bitangent:n}}flattenVertex(e,t,s){return new i.Vector2(e.dot(t),e.dot(s))}genFace(e,t,s,n,r,o,a,l,h,c){let d;if(c>3){const e=[],n=t.baseVertexPositions||t.vertexPositions;for(let t=0;t<s.length;t+=3)e.push(new i.Vector3(n[s[t]],n[s[t+1]],n[s[t+2]]));const{tangent:r,bitangent:o}=this.getNormalTangentAndBitangent(e),a=[];for(const t of e)a.push(this.flattenVertex(t,r,o));d=i.ShapeUtils.triangulateShape(a,[])}else d=[[0,1,2]];for(const[i,c,u]of d)e.vertex.push(t.vertexPositions[s[3*i]]),e.vertex.push(t.vertexPositions[s[3*i+1]]),e.vertex.push(t.vertexPositions[s[3*i+2]]),e.vertex.push(t.vertexPositions[s[3*c]]),e.vertex.push(t.vertexPositions[s[3*c+1]]),e.vertex.push(t.vertexPositions[s[3*c+2]]),e.vertex.push(t.vertexPositions[s[3*u]]),e.vertex.push(t.vertexPositions[s[3*u+1]]),e.vertex.push(t.vertexPositions[s[3*u+2]]),t.skeleton&&(e.vertexWeights.push(l[4*i]),e.vertexWeights.push(l[4*i+1]),e.vertexWeights.push(l[4*i+2]),e.vertexWeights.push(l[4*i+3]),e.vertexWeights.push(l[4*c]),e.vertexWeights.push(l[4*c+1]),e.vertexWeights.push(l[4*c+2]),e.vertexWeights.push(l[4*c+3]),e.vertexWeights.push(l[4*u]),e.vertexWeights.push(l[4*u+1]),e.vertexWeights.push(l[4*u+2]),e.vertexWeights.push(l[4*u+3]),e.weightsIndices.push(h[4*i]),e.weightsIndices.push(h[4*i+1]),e.weightsIndices.push(h[4*i+2]),e.weightsIndices.push(h[4*i+3]),e.weightsIndices.push(h[4*c]),e.weightsIndices.push(h[4*c+1]),e.weightsIndices.push(h[4*c+2]),e.weightsIndices.push(h[4*c+3]),e.weightsIndices.push(h[4*u]),e.weightsIndices.push(h[4*u+1]),e.weightsIndices.push(h[4*u+2]),e.weightsIndices.push(h[4*u+3])),t.color&&(e.colors.push(o[3*i]),e.colors.push(o[3*i+1]),e.colors.push(o[3*i+2]),e.colors.push(o[3*c]),e.colors.push(o[3*c+1]),e.colors.push(o[3*c+2]),e.colors.push(o[3*u]),e.colors.push(o[3*u+1]),e.colors.push(o[3*u+2])),t.material&&"AllSame"!==t.material.mappingType&&(e.materialIndex.push(n),e.materialIndex.push(n),e.materialIndex.push(n)),t.normal&&(e.normal.push(r[3*i]),e.normal.push(r[3*i+1]),e.normal.push(r[3*i+2]),e.normal.push(r[3*c]),e.normal.push(r[3*c+1]),e.normal.push(r[3*c+2]),e.normal.push(r[3*u]),e.normal.push(r[3*u+1]),e.normal.push(r[3*u+2])),t.uv&&t.uv.forEach((function(t,s){void 0===e.uvs[s]&&(e.uvs[s]=[]),e.uvs[s].push(a[s][2*i]),e.uvs[s].push(a[s][2*i+1]),e.uvs[s].push(a[s][2*c]),e.uvs[s].push(a[s][2*c+1]),e.uvs[s].push(a[s][2*u]),e.uvs[s].push(a[s][2*u+1])}))}addMorphTargets(e,t,i,s){if(0===i.length)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];const n=this;i.forEach((function(i){i.rawTargets.forEach((function(i){const r=ii.Objects.Geometry[i.geoID];void 0!==r&&n.genMorphGeometry(e,t,r,s,i.name)}))}))}genMorphGeometry(e,t,s,n,r){const o=void 0!==t.Vertices?t.Vertices.a:[],a=void 0!==t.PolygonVertexIndex?t.PolygonVertexIndex.a:[],l=void 0!==s.Vertices?s.Vertices.a:[],h=void 0!==s.Indexes?s.Indexes.a:[],c=3*e.attributes.position.count,d=new Float32Array(c);for(let e=0;e<h.length;e++){const t=3*h[e];d[t]=l[3*e],d[t+1]=l[3*e+1],d[t+2]=l[3*e+2]}const u={vertexIndices:a,vertexPositions:d,baseVertexPositions:o},p=this.genBuffers(u),f=new i.Float32BufferAttribute(p.vertex,3);f.name=r||s.attrName,f.applyMatrix4(n),e.morphAttributes.position.push(f)}parseNormals(e){const t=e.MappingInformationType,i=e.ReferenceInformationType,s=e.Normals.a;let n=[];return"IndexToDirect"===i&&("NormalIndex"in e?n=e.NormalIndex.a:"NormalsIndex"in e&&(n=e.NormalsIndex.a)),{dataSize:3,buffer:s,indices:n,mappingType:t,referenceType:i}}parseUVs(e){const t=e.MappingInformationType,i=e.ReferenceInformationType,s=e.UV.a;let n=[];return"IndexToDirect"===i&&(n=e.UVIndex.a),{dataSize:2,buffer:s,indices:n,mappingType:t,referenceType:i}}parseVertexColors(e){const t=e.MappingInformationType,s=e.ReferenceInformationType,n=e.Colors.a;let r=[];"IndexToDirect"===s&&(r=e.ColorIndex.a);for(let e=0,t=new i.Color;e<n.length;e+=4)t.fromArray(n,e),i.ColorManagement.toWorkingColorSpace(t,i.SRGBColorSpace),t.toArray(n,e);return{dataSize:4,buffer:n,indices:r,mappingType:t,referenceType:s}}parseMaterialIndices(e){const t=e.MappingInformationType,i=e.ReferenceInformationType;if("NoMappingInformation"===t)return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:i};const s=e.Materials.a,n=[];for(let e=0;e<s.length;++e)n.push(e);return{dataSize:1,buffer:s,indices:n,mappingType:t,referenceType:i}}parseNurbsGeometry(e){const t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new i.BufferGeometry;const s=t-1,n=e.KnotVector.a,r=[],o=e.Points.a;for(let e=0,t=o.length;e<t;e+=4)r.push((new i.Vector4).fromArray(o,e));let a,l;if("Closed"===e.Form)r.push(r[0]);else if("Periodic"===e.Form){a=s,l=n.length-1-a;for(let e=0;e<s;++e)r.push(r[e])}const h=new ti(s,n,r,a,l).getPoints(12*r.length);return(new i.BufferGeometry).setFromPoints(h)}}class li{parse(){const e=[],t=this.parseClips();if(void 0!==t)for(const i in t){const s=t[i],n=this.addClip(s);e.push(n)}return e}parseClips(){if(void 0===ii.Objects.AnimationCurve)return;const e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);const t=this.parseAnimationLayers(e);return this.parseAnimStacks(t)}parseAnimationCurveNodes(){const e=ii.Objects.AnimationCurveNode,t=new Map;for(const i in e){const s=e[i];if(null!==s.attrName.match(/S|R|T|DeformPercent/)){const e={id:s.id,attr:s.attrName,curves:{}};t.set(e.id,e)}}return t}parseAnimationCurves(e){const t=ii.Objects.AnimationCurve;for(const i in t){const s={id:t[i].id,times:t[i].KeyTime.a.map(fi),values:t[i].KeyValueFloat.a},n=si.get(s.id);if(void 0!==n){const t=n.parents[0].ID,i=n.parents[0].relationship;i.match(/X/)?e.get(t).curves.x=s:i.match(/Y/)?e.get(t).curves.y=s:i.match(/Z/)?e.get(t).curves.z=s:i.match(/DeformPercent/)&&e.has(t)&&(e.get(t).curves.morph=s)}}}parseAnimationLayers(e){const t=ii.Objects.AnimationLayer,s=new Map;for(const n in t){const t=[],r=si.get(parseInt(n));if(void 0!==r){r.children.forEach((function(s,n){if(e.has(s.ID)){const r=e.get(s.ID);if(void 0!==r.curves.x||void 0!==r.curves.y||void 0!==r.curves.z){if(void 0===t[n]){const e=si.get(s.ID).parents.filter((function(e){return void 0!==e.relationship}))[0].ID;if(void 0!==e){const r=ii.Objects.Model[e.toString()];if(void 0===r)return void console.warn("THREE.FBXLoader: Encountered a unused curve.",s);const o={modelName:r.attrName?i.PropertyBinding.sanitizeNodeName(r.attrName):"",ID:r.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};ni.traverse((function(e){e.ID===r.id&&(o.transform=e.matrix,e.userData.transformData&&(o.eulerOrder=e.userData.transformData.eulerOrder))})),o.transform||(o.transform=new i.Matrix4),"PreRotation"in r&&(o.preRotation=r.PreRotation.value),"PostRotation"in r&&(o.postRotation=r.PostRotation.value),t[n]=o}}t[n]&&(t[n][r.attr]=r)}else if(void 0!==r.curves.morph){if(void 0===t[n]){const e=si.get(s.ID).parents.filter((function(e){return void 0!==e.relationship}))[0].ID,r=si.get(e).parents[0].ID,o=si.get(r).parents[0].ID,a=si.get(o).parents[0].ID,l=ii.Objects.Model[a],h={modelName:l.attrName?i.PropertyBinding.sanitizeNodeName(l.attrName):"",morphName:ii.Objects.Deformer[e].attrName};t[n]=h}t[n][r.attr]=r}}})),s.set(parseInt(n),t)}}return s}parseAnimStacks(e){const t=ii.Objects.AnimationStack,i={};for(const s in t){const n=si.get(parseInt(s)).children;n.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const r=e.get(n[0].ID);i[s]={name:t[s].attrName,layer:r}}return i}addClip(e){let t=[];const s=this;return e.layer.forEach((function(e){t=t.concat(s.generateTracks(e))})),new i.AnimationClip(e.name,-1,t)}generateTracks(e){const t=[];let s=new i.Vector3,n=new i.Vector3;if(e.transform&&e.transform.decompose(s,new i.Quaternion,n),s=s.toArray(),n=n.toArray(),void 0!==e.T&&Object.keys(e.T.curves).length>0){const i=this.generateVectorTrack(e.modelName,e.T.curves,s,"position");void 0!==i&&t.push(i)}if(void 0!==e.R&&Object.keys(e.R.curves).length>0){const i=this.generateRotationTrack(e.modelName,e.R.curves,e.preRotation,e.postRotation,e.eulerOrder);void 0!==i&&t.push(i)}if(void 0!==e.S&&Object.keys(e.S.curves).length>0){const i=this.generateVectorTrack(e.modelName,e.S.curves,n,"scale");void 0!==i&&t.push(i)}if(void 0!==e.DeformPercent){const i=this.generateMorphTrack(e);void 0!==i&&t.push(i)}return t}generateVectorTrack(e,t,s,n){const r=this.getTimesForAllAxes(t),o=this.getKeyframeTrackValues(r,t,s);return new i.VectorKeyframeTrack(e+"."+n,r,o)}generateRotationTrack(e,t,s,n,r){let o,a;if(void 0!==t.x&&void 0!==t.y&&void 0!==t.z){const e=this.interpolateRotations(t.x,t.y,t.z,r);o=e[0],a=e[1]}const l=yi(0);void 0!==s&&((s=s.map(i.MathUtils.degToRad)).push(l),s=(new i.Euler).fromArray(s),s=(new i.Quaternion).setFromEuler(s)),void 0!==n&&((n=n.map(i.MathUtils.degToRad)).push(l),n=(new i.Euler).fromArray(n),n=(new i.Quaternion).setFromEuler(n).invert());const h=new i.Quaternion,c=new i.Euler,d=[];if(!a||!o)return new i.QuaternionKeyframeTrack(e+".quaternion",[0],[0]);for(let e=0;e<a.length;e+=3){if(c.set(a[e],a[e+1],a[e+2],r),h.setFromEuler(c),void 0!==s&&h.premultiply(s),void 0!==n&&h.multiply(n),e>2){(new i.Quaternion).fromArray(d,(e-3)/3*4).dot(h)<0&&h.set(-h.x,-h.y,-h.z,-h.w)}h.toArray(d,e/3*4)}return new i.QuaternionKeyframeTrack(e+".quaternion",o,d)}generateMorphTrack(e){const t=e.DeformPercent.curves.morph,s=t.values.map((function(e){return e/100})),n=ni.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new i.NumberKeyframeTrack(e.modelName+".morphTargetInfluences["+n+"]",t.times,s)}getTimesForAllAxes(e){let t=[];if(void 0!==e.x&&(t=t.concat(e.x.times)),void 0!==e.y&&(t=t.concat(e.y.times)),void 0!==e.z&&(t=t.concat(e.z.times)),t=t.sort((function(e,t){return e-t})),t.length>1){let e=1,i=t[0];for(let s=1;s<t.length;s++){const n=t[s];n!==i&&(t[e]=n,i=n,e++)}t=t.slice(0,e)}return t}getKeyframeTrackValues(e,t,i){const s=i,n=[];let r=-1,o=-1,a=-1;return e.forEach((function(e){if(t.x&&(r=t.x.times.indexOf(e)),t.y&&(o=t.y.times.indexOf(e)),t.z&&(a=t.z.times.indexOf(e)),-1!==r){const e=t.x.values[r];n.push(e),s[0]=e}else n.push(s[0]);if(-1!==o){const e=t.y.values[o];n.push(e),s[1]=e}else n.push(s[1]);if(-1!==a){const e=t.z.values[a];n.push(e),s[2]=e}else n.push(s[2])})),n}interpolateRotations(e,t,s,n){const r=[],o=[];r.push(e.times[0]),o.push(i.MathUtils.degToRad(e.values[0])),o.push(i.MathUtils.degToRad(t.values[0])),o.push(i.MathUtils.degToRad(s.values[0]));for(let a=1;a<e.values.length;a++){const l=[e.values[a-1],t.values[a-1],s.values[a-1]];if(isNaN(l[0])||isNaN(l[1])||isNaN(l[2]))continue;const h=l.map(i.MathUtils.degToRad),c=[e.values[a],t.values[a],s.values[a]];if(isNaN(c[0])||isNaN(c[1])||isNaN(c[2]))continue;const d=c.map(i.MathUtils.degToRad),u=[c[0]-l[0],c[1]-l[1],c[2]-l[2]],p=[Math.abs(u[0]),Math.abs(u[1]),Math.abs(u[2])];if(p[0]>=180||p[1]>=180||p[2]>=180){const t=Math.max(...p)/180,s=new i.Euler(...h,n),l=new i.Euler(...d,n),c=(new i.Quaternion).setFromEuler(s),u=(new i.Quaternion).setFromEuler(l);c.dot(u)&&u.set(-u.x,-u.y,-u.z,-u.w);const f=e.times[a-1],m=e.times[a]-f,g=new i.Quaternion,A=new i.Euler;for(let e=0;e<1;e+=1/t)g.copy(c.clone().slerp(u.clone(),e)),r.push(f+e*m),A.setFromQuaternion(g,n),o.push(A.x),o.push(A.y),o.push(A.z)}else r.push(e.times[a]),o.push(i.MathUtils.degToRad(e.values[a])),o.push(i.MathUtils.degToRad(t.values[a])),o.push(i.MathUtils.degToRad(s.values[a]))}return[r,o]}}class hi{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,t){this.currentProp=e,this.currentPropName=t}parse(e){this.currentIndent=0,this.allNodes=new ui,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const t=this,i=e.split(/[\r\n]+/);return i.forEach((function(e,s){const n=e.match(/^[\s\t]*;/),r=e.match(/^[\s\t]*$/);if(n||r)return;const o=e.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),a=e.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),l=e.match("^\\t{"+(t.currentIndent-1)+"}}");o?t.parseNodeBegin(e,o):a?t.parseNodeProperty(e,a,i[++s]):l?t.popStack():e.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(e)})),this.allNodes}parseNodeBegin(e,t){const i=t[1].trim().replace(/^"/,"").replace(/"$/,""),s=t[2].split(",").map((function(e){return e.trim().replace(/^"/,"").replace(/"$/,"")})),n={name:i},r=this.parseNodeAttr(s),o=this.getCurrentNode();0===this.currentIndent?this.allNodes.add(i,n):i in o?("PoseNode"===i?o.PoseNode.push(n):void 0!==o[i].id&&(o[i]={},o[i][o[i].id]=o[i]),""!==r.id&&(o[i][r.id]=n)):"number"==typeof r.id?(o[i]={},o[i][r.id]=n):"Properties70"!==i&&(o[i]="PoseNode"===i?[n]:n),"number"==typeof r.id&&(n.id=r.id),""!==r.name&&(n.attrName=r.name),""!==r.type&&(n.attrType=r.type),this.pushStack(n)}parseNodeAttr(e){let t=e[0];""!==e[0]&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));let i="",s="";return e.length>1&&(i=e[1].replace(/^(\w+)::/,""),s=e[2]),{id:t,name:i,type:s}}parseNodeProperty(e,t,i){let s=t[1].replace(/^"/,"").replace(/"$/,"").trim(),n=t[2].replace(/^"/,"").replace(/"$/,"").trim();"Content"===s&&","===n&&(n=i.replace(/"/g,"").replace(/,$/,"").trim());const r=this.getCurrentNode();if("Properties70"!==r.name){if("C"===s){const e=n.split(",").slice(1),t=parseInt(e[0]),i=parseInt(e[1]);let o=n.split(",").slice(3);o=o.map((function(e){return e.trim().replace(/^"/,"")})),s="connections",n=[t,i],function(e,t){for(let i=0,s=e.length,n=t.length;i<n;i++,s++)e[s]=t[i]}(n,o),void 0===r[s]&&(r[s]=[])}"Node"===s&&(r.id=n),s in r&&Array.isArray(r[s])?r[s].push(n):"a"!==s?r[s]=n:r.a=n,this.setCurrentProp(r,s),"a"===s&&","!==n.slice(-1)&&(r.a=wi(n))}else this.parseNodeSpecialProperty(e,s,n)}parseNodePropertyContinued(e){const t=this.getCurrentNode();t.a+=e,","!==e.slice(-1)&&(t.a=wi(t.a))}parseNodeSpecialProperty(e,t,i){const s=i.split('",').map((function(e){return e.trim().replace(/^\"/,"").replace(/\s/,"_")})),n=s[0],r=s[1],o=s[2],a=s[3];let l=s[4];switch(r){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":l=parseFloat(l);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":l=wi(l)}this.getPrevNode()[n]={type:r,type2:o,flag:a,value:l},this.setCurrentProp(this.getPrevNode(),n)}}class ci{parse(e){const t=new di(e);t.skip(23);const i=t.getUint32();if(i<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+i);const s=new ui;for(;!this.endOfContent(t);){const e=this.parseNode(t,i);null!==e&&s.add(e.name,e)}return s}endOfContent(e){return e.size()%16==0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,t){const i={},s=t>=7500?e.getUint64():e.getUint32(),n=t>=7500?e.getUint64():e.getUint32();t>=7500?e.getUint64():e.getUint32();const r=e.getUint8(),o=e.getString(r);if(0===s)return null;const a=[];for(let t=0;t<n;t++)a.push(this.parseProperty(e));const l=a.length>0?a[0]:"",h=a.length>1?a[1]:"",c=a.length>2?a[2]:"";for(i.singleProperty=1===n&&e.getOffset()===s;s>e.getOffset();){const s=this.parseNode(e,t);null!==s&&this.parseSubNode(o,i,s)}return i.propertyList=a,"number"==typeof l&&(i.id=l),""!==h&&(i.attrName=h),""!==c&&(i.attrType=c),""!==o&&(i.name=o),i}parseSubNode(e,t,i){if(!0===i.singleProperty){const e=i.propertyList[0];Array.isArray(e)?(t[i.name]=i,i.a=e):t[i.name]=e}else if("Connections"===e&&"C"===i.name){const e=[];i.propertyList.forEach((function(t,i){0!==i&&e.push(t)})),void 0===t.connections&&(t.connections=[]),t.connections.push(e)}else if("Properties70"===i.name){Object.keys(i).forEach((function(e){t[e]=i[e]}))}else if("Properties70"===e&&"P"===i.name){let e=i.propertyList[0],s=i.propertyList[1];const n=i.propertyList[2],r=i.propertyList[3];let o;0===e.indexOf("Lcl ")&&(e=e.replace("Lcl ","Lcl_")),0===s.indexOf("Lcl ")&&(s=s.replace("Lcl ","Lcl_")),o="Color"===s||"ColorRGB"===s||"Vector"===s||"Vector3D"===s||0===s.indexOf("Lcl_")?[i.propertyList[4],i.propertyList[5],i.propertyList[6]]:i.propertyList[4],t[e]={type:s,type2:n,flag:r,value:o}}else void 0===t[i.name]?"number"==typeof i.id?(t[i.name]={},t[i.name][i.id]=i):t[i.name]=i:"PoseNode"===i.name?(Array.isArray(t[i.name])||(t[i.name]=[t[i.name]]),t[i.name].push(i)):void 0===t[i.name][i.id]&&(t[i.name][i.id]=i)}parseProperty(e){const t=e.getString(1);let i;switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return i=e.getUint32(),e.getArrayBuffer(i);case"S":return i=e.getUint32(),e.getString(i);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const s=e.getUint32(),n=e.getUint32(),r=e.getUint32();if(0===n)switch(t){case"b":case"c":return e.getBooleanArray(s);case"d":return e.getFloat64Array(s);case"f":return e.getFloat32Array(s);case"i":return e.getInt32Array(s);case"l":return e.getInt64Array(s)}const o=_t(new Uint8Array(e.getArrayBuffer(r))),a=new di(o.buffer);switch(t){case"b":case"c":return a.getBooleanArray(s);case"d":return a.getFloat64Array(s);case"f":return a.getFloat32Array(s);case"i":return a.getInt32Array(s);case"l":return a.getInt64Array(s)}break;default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}}class di{constructor(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=void 0===t||t,this._textDecoder=new TextDecoder}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return!(1&~this.getUint8())}getBooleanArray(e){const t=[];for(let i=0;i<e;i++)t.push(this.getBoolean());return t}getUint8(){const e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){const e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){const e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){const t=[];for(let i=0;i<e;i++)t.push(this.getInt32());return t}getUint32(){const e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),2147483648&t?(t=4294967295&~t,e=4294967295&~e,4294967295===e&&(t=t+1&4294967295),e=e+1&4294967295,-(4294967296*t+e)):4294967296*t+e}getInt64Array(e){const t=[];for(let i=0;i<e;i++)t.push(this.getInt64());return t}getUint64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),4294967296*t+e}getFloat32(){const e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){const t=[];for(let i=0;i<e;i++)t.push(this.getFloat32());return t}getFloat64(){const e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){const t=[];for(let i=0;i<e;i++)t.push(this.getFloat64());return t}getArrayBuffer(e){const t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}getString(e){const t=this.offset;let i=new Uint8Array(this.dv.buffer,t,e);this.skip(e);const s=i.indexOf(0);return s>=0&&(i=new Uint8Array(this.dv.buffer,t,s)),this._textDecoder.decode(i)}}class ui{add(e,t){this[e]=t}}function pi(e){const t=e.match(/FBXVersion: (\d+)/);if(t){return parseInt(t[1])}throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function fi(e){return e/46186158e3}const mi=[];function gi(e,t,i,s){let n;switch(s.mappingType){case"ByPolygonVertex":n=e;break;case"ByPolygon":n=t;break;case"ByVertice":n=i;break;case"AllSame":n=s.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+s.mappingType)}"IndexToDirect"===s.referenceType&&(n=s.indices[n]);const r=n*s.dataSize,o=r+s.dataSize;return function(e,t,i,s){for(let n=i,r=0;n<s;n++,r++)e[r]=t[n];return e}(mi,s.buffer,r,o)}const Ai=new i.Euler,bi=new i.Vector3;function vi(e){const t=new i.Matrix4,s=new i.Matrix4,n=new i.Matrix4,r=new i.Matrix4,o=new i.Matrix4,a=new i.Matrix4,l=new i.Matrix4,h=new i.Matrix4,c=new i.Matrix4,d=new i.Matrix4,u=new i.Matrix4,p=new i.Matrix4,f=e.inheritType?e.inheritType:0;e.translation&&t.setPosition(bi.fromArray(e.translation));const m=yi(0);if(e.preRotation){const t=e.preRotation.map(i.MathUtils.degToRad);t.push(m),s.makeRotationFromEuler(Ai.fromArray(t))}if(e.rotation){const t=e.rotation.map(i.MathUtils.degToRad);t.push(e.eulerOrder||m),n.makeRotationFromEuler(Ai.fromArray(t))}if(e.postRotation){const t=e.postRotation.map(i.MathUtils.degToRad);t.push(m),r.makeRotationFromEuler(Ai.fromArray(t)),r.invert()}e.scale&&o.scale(bi.fromArray(e.scale)),e.scalingOffset&&l.setPosition(bi.fromArray(e.scalingOffset)),e.scalingPivot&&a.setPosition(bi.fromArray(e.scalingPivot)),e.rotationOffset&&h.setPosition(bi.fromArray(e.rotationOffset)),e.rotationPivot&&c.setPosition(bi.fromArray(e.rotationPivot)),e.parentMatrixWorld&&(u.copy(e.parentMatrix),d.copy(e.parentMatrixWorld));const g=s.clone().multiply(n).multiply(r),A=new i.Matrix4;A.extractRotation(d);const b=new i.Matrix4;b.copyPosition(d);const v=b.clone().invert().multiply(d),y=A.clone().invert().multiply(v),w=o,x=new i.Matrix4;if(0===f)x.copy(A).multiply(g).multiply(y).multiply(w);else if(1===f)x.copy(A).multiply(y).multiply(g).multiply(w);else{const e=(new i.Matrix4).scale((new i.Vector3).setFromMatrixScale(u)).clone().invert(),t=y.clone().multiply(e);x.copy(A).multiply(g).multiply(t).multiply(w)}const O=c.clone().invert(),C=a.clone().invert();let S=t.clone().multiply(h).multiply(c).multiply(s).multiply(n).multiply(r).multiply(O).multiply(l).multiply(a).multiply(o).multiply(C);const I=(new i.Matrix4).copyPosition(S),E=d.clone().multiply(I);return p.copyPosition(E),S=p.clone().multiply(x),S.premultiply(d.invert()),S}function yi(e){const t=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return 6===(e=e||0)?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),t[0]):t[e]}function wi(e){return e.split(",").map((function(e){return parseFloat(e)}))}function xi(e,t,i){return void 0===t&&(t=0),void 0===i&&(i=e.byteLength),(new TextDecoder).decode(new Uint8Array(e,t,i))}var Oi=function(){var e=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),t=new Uint8Array([32,0,65,2,1,106,34,33,3,128,11,4,13,64,6,253,10,7,15,116,127,5,8,12,40,16,19,54,20,9,27,255,113,17,42,67,24,23,146,148,18,14,22,45,70,69,56,114,101,21,25,63,75,136,108,28,118,29,73,115]);if("object"!=typeof WebAssembly)return{supported:!1};var i,s=WebAssembly.validate(e)?"b9H79TebbbeKl9Gbb9Gvuuuuueu9Giuuub9Geueuikqbbebeedddilve9Weeeviebeoweuec:q;Aekr;leDo9TW9T9VV95dbH9F9F939H79T9F9J9H229F9Jt9VV7bb8A9TW79O9V9Wt9F9KW9J9V9KW9wWVtW949c919M9MWVbdY9TW79O9V9Wt9F9KW9J9V9KW69U9KW949c919M9MWVblE9TW79O9V9Wt9F9KW9J9V9KW69U9KW949tWG91W9U9JWbvL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9p9JtboK9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9r919HtbrL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWVT949Wbwl79IV9RbDq;t9tqlbzik9:evu8Jjjjjbcz9Rhbcbheincbhdcbhiinabcwfadfaicjuaead4ceGglE86bbaialfhiadcefgdcw9hmbkaec:q:yjjbfai86bbaecitc:q1jjbfab8Piw83ibaecefgecjd9hmbkk;h8JlHud97euo978Jjjjjbcj;kb9Rgv8Kjjjjbc9:hodnadcefal0mbcuhoaiRbbc:Ge9hmbavaialfgrad9Rad;8qbbcj;abad9UhoaicefhldnadTmbaoc;WFbGgocjdaocjd6EhwcbhDinaDae9pmeawaeaD9RaDawfae6Egqcsfgoc9WGgkci2hxakcethmaocl4cifcd4hPabaDad2fhscbhzdnincehHalhOcbhAdninaraO9RaP6miavcj;cbfaAak2fhCaOaPfhlcbhidnakc;ab6mbaral9Rc;Gb6mbcbhoinaCaofhidndndndndnaOaoco4fRbbgXciGPlbedibkaipxbbbbbbbbbbbbbbbbpklbxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaialpbbbpklbalczfhlkdndndndndnaXcd4ciGPlbedibkaipxbbbbbbbbbbbbbbbbpklzxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklzalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklzalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaialpbbbpklzalczfhlkdndndndndnaXcl4ciGPlbedibkaipxbbbbbbbbbbbbbbbbpklaxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklaalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklaalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaialpbbbpklaalczfhlkdndndndndnaXco4Plbedibkaipxbbbbbbbbbbbbbbbbpkl8WxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibaXc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spkl8WalclfaYpQbfaXc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibaXc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spkl8WalcwfaYpQbfaXc:q:yjjbfRbbfhlxekaialpbbbpkl8Walczfhlkaoc;abfhiaocjefak0meaihoaral9Rc;Fb0mbkkdndnaiak9pmbaici4hoinaral9RcK6mdaCaifhXdndndndndnaOaico4fRbbaocoG4ciGPlbedibkaXpxbbbbbbbbbbbbbbbbpklbxikaXalpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaXalpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaXalpbbbpklbalczfhlkaocdfhoaiczfgiak6mbkkalTmbaAci6hHalhOaAcefgohAaoclSmdxekkcbhlaHceGmdkdnakTmbavcjdfazfhiavazfpbdbhYcbhXinaiavcj;cbfaXfgopblbgLcep9TaLpxeeeeeeeeeeeeeeeegQp9op9Hp9rgLaoakfpblbg8Acep9Ta8AaQp9op9Hp9rg8ApmbzeHdOiAlCvXoQrLgEaoamfpblbg3cep9Ta3aQp9op9Hp9rg3aoaxfpblbg5cep9Ta5aQp9op9Hp9rg5pmbzeHdOiAlCvXoQrLg8EpmbezHdiOAlvCXorQLgQaQpmbedibedibedibediaYp9UgYp9AdbbaiadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfgoaYaEa8EpmwDKYqk8AExm35Ps8E8FgQaQpmbedibedibedibedip9UgYp9AdbbaoadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfgoaYaLa8ApmwKDYq8AkEx3m5P8Es8FgLa3a5pmwKDYq8AkEx3m5P8Es8Fg8ApmbezHdiOAlvCXorQLgQaQpmbedibedibedibedip9UgYp9AdbbaoadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfgoaYaLa8ApmwDKYqk8AExm35Ps8E8FgQaQpmbedibedibedibedip9UgYp9AdbbaoadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfhiaXczfgXak6mbkkazclfgzad6mbkasavcjdfaqad2;8qbbavavcjdfaqcufad2fad;8qbbaqaDfhDc9:hoalmexikkc9:hoxekcbc99aral9Radcaadca0ESEhokavcj;kbf8Kjjjjbaokwbz:bjjjbk;uzeHu8Jjjjjbc;ae9Rgv8Kjjjjbc9:hodnaeci9UgrcHfal0mbcuhoaiRbbgwc;WeGc;Ge9hmbawcsGgDce0mbavc;abfcFecje;8kbavcUf9cu83ibavc8Wf9cu83ibavcyf9cu83ibavcaf9cu83ibavcKf9cu83ibavczf9cu83ibav9cu83iwav9cu83ibaialfc9WfhqaicefgwarfhodnaeTmbcmcsaDceSEhkcbhxcbhmcbhDcbhicbhlindnaoaq9nmbc9:hoxikdndnawRbbgrc;Ve0mbavc;abfalarcl4cu7fcsGcitfgPydlhsaPydbhzdnarcsGgPak9pmbavaiarcu7fcsGcdtfydbaxaPEhraPThPdndnadcd9hmbabaDcetfgHaz87ebaHcdfas87ebaHclfar87ebxekabaDcdtfgHazBdbaHclfasBdbaHcwfarBdbkaxaPfhxavc;abfalcitfgHarBdbaHasBdlavaicdtfarBdbavc;abfalcefcsGglcitfgHazBdbaHarBdlaiaPfhialcefhlxdkdndnaPcsSmbamaPfaPc987fcefhmxekaocefhrao8SbbgPcFeGhHdndnaPcu9mmbarhoxekaocvfhoaHcFbGhHcrhPdninar8SbbgOcFbGaPtaHVhHaOcu9kmearcefhraPcrfgPc8J9hmbxdkkarcefhokaHce4cbaHceG9R7amfhmkdndnadcd9hmbabaDcetfgraz87ebarcdfas87ebarclfam87ebxekabaDcdtfgrazBdbarclfasBdbarcwfamBdbkavc;abfalcitfgramBdbarasBdlavaicdtfamBdbavc;abfalcefcsGglcitfgrazBdbaramBdlaicefhialcefhlxekdnarcpe0mbaxcefgOavaiaqarcsGfRbbgPcl49RcsGcdtfydbaPcz6gHEhravaiaP9RcsGcdtfydbaOaHfgsaPcsGgOEhPaOThOdndnadcd9hmbabaDcetfgzax87ebazcdfar87ebazclfaP87ebxekabaDcdtfgzaxBdbazclfarBdbazcwfaPBdbkavaicdtfaxBdbavc;abfalcitfgzarBdbazaxBdlavaicefgicsGcdtfarBdbavc;abfalcefcsGcitfgzaPBdbazarBdlavaiaHfcsGgicdtfaPBdbavc;abfalcdfcsGglcitfgraxBdbaraPBdlalcefhlaiaOfhiasaOfhxxekaxcbaoRbbgzEgAarc;:eSgrfhsazcsGhCazcl4hXdndnazcs0mbascefhOxekashOavaiaX9RcsGcdtfydbhskdndnaCmbaOcefhxxekaOhxavaiaz9RcsGcdtfydbhOkdndnarTmbaocefhrxekaocdfhrao8SbegHcFeGhPdnaHcu9kmbaocofhAaPcFbGhPcrhodninar8SbbgHcFbGaotaPVhPaHcu9kmearcefhraocrfgoc8J9hmbkaAhrxekarcefhrkaPce4cbaPceG9R7amfgmhAkdndnaXcsSmbarhPxekarcefhPar8SbbgocFeGhHdnaocu9kmbarcvfhsaHcFbGhHcrhodninaP8SbbgrcFbGaotaHVhHarcu9kmeaPcefhPaocrfgoc8J9hmbkashPxekaPcefhPkaHce4cbaHceG9R7amfgmhskdndnaCcsSmbaPhoxekaPcefhoaP8SbbgrcFeGhHdnarcu9kmbaPcvfhOaHcFbGhHcrhrdninao8SbbgPcFbGartaHVhHaPcu9kmeaocefhoarcrfgrc8J9hmbkaOhoxekaocefhokaHce4cbaHceG9R7amfgmhOkdndnadcd9hmbabaDcetfgraA87ebarcdfas87ebarclfaO87ebxekabaDcdtfgraABdbarclfasBdbarcwfaOBdbkavc;abfalcitfgrasBdbaraABdlavaicdtfaABdbavc;abfalcefcsGcitfgraOBdbarasBdlavaicefgicsGcdtfasBdbavc;abfalcdfcsGcitfgraABdbaraOBdlavaiazcz6aXcsSVfgicsGcdtfaOBdbaiaCTaCcsSVfhialcifhlkawcefhwalcsGhlaicsGhiaDcifgDae6mbkkcbc99aoaqSEhokavc;aef8Kjjjjbaok:llevu8Jjjjjbcz9Rhvc9:hodnaecvfal0mbcuhoaiRbbc;:eGc;qe9hmbav9cb83iwaicefhraialfc98fhwdnaeTmbdnadcdSmbcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcdtfaicd4cbaice4ceG9R7avcwfaiceGcdtVgoydbfglBdbaoalBdbaDcefgDae9hmbxdkkcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcetfaicd4cbaice4ceG9R7avcwfaiceGcdtVgoydbfgl87ebaoalBdbaDcefgDae9hmbkkcbc99arawSEhokaok:EPliuo97eue978Jjjjjbca9Rhidndnadcl9hmbdnaec98GglTmbcbhvabhdinadadpbbbgocKp:RecKp:Sep;6egraocwp:RecKp:Sep;6earp;Geaoczp:RecKp:Sep;6egwp;Gep;Kep;LegDpxbbbbbbbbbbbbbbbbp:2egqarpxbbbjbbbjbbbjbbbjgkp9op9rp;Kegrpxbb;:9cbb;:9cbb;:9cbb;:9cararp;MeaDaDp;Meawaqawakp9op9rp;Kegrarp;Mep;Kep;Kep;Jep;Negwp;Mepxbbn0bbn0bbn0bbn0gqp;KepxFbbbFbbbFbbbFbbbp9oaopxbbbFbbbFbbbFbbbFp9op9qarawp;Meaqp;Kecwp:RepxbFbbbFbbbFbbbFbbp9op9qaDawp;Meaqp;Keczp:RepxbbFbbbFbbbFbbbFbp9op9qpkbbadczfhdavclfgval6mbkkalae9pmeaiaeciGgvcdtgdVcbczad9R;8kbaiabalcdtfglad;8qbbdnavTmbaiaipblbgocKp:RecKp:Sep;6egraocwp:RecKp:Sep;6earp;Geaoczp:RecKp:Sep;6egwp;Gep;Kep;LegDpxbbbbbbbbbbbbbbbbp:2egqarpxbbbjbbbjbbbjbbbjgkp9op9rp;Kegrpxbb;:9cbb;:9cbb;:9cbb;:9cararp;MeaDaDp;Meawaqawakp9op9rp;Kegrarp;Mep;Kep;Kep;Jep;Negwp;Mepxbbn0bbn0bbn0bbn0gqp;KepxFbbbFbbbFbbbFbbbp9oaopxbbbFbbbFbbbFbbbFp9op9qarawp;Meaqp;Kecwp:RepxbFbbbFbbbFbbbFbbp9op9qaDawp;Meaqp;Keczp:RepxbbFbbbFbbbFbbbFbp9op9qpklbkalaiad;8qbbskdnaec98GgxTmbcbhvabhdinadczfglalpbbbgopxbbbbbbFFbbbbbbFFgkp9oadpbbbgDaopmlvorxmPsCXQL358E8FpxFubbFubbFubbFubbp9op;6eaDaopmbediwDqkzHOAKY8AEgoczp:Sep;6egrp;Geaoczp:Reczp:Sep;6egwp;Gep;Kep;Legopxb;:FSb;:FSb;:FSb;:FSawaopxbbbbbbbbbbbbbbbbp:2egqawpxbbbjbbbjbbbjbbbjgmp9op9rp;Kegwawp;Meaoaop;Mearaqaramp9op9rp;Kegoaop;Mep;Kep;Kep;Jep;Negrp;Mepxbbn0bbn0bbn0bbn0gqp;Keczp:Reawarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9op9qgwaoarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9ogopmwDKYqk8AExm35Ps8E8Fp9qpkbbadaDakp9oawaopmbezHdiOAlvCXorQLp9qpkbbadcafhdavclfgvax6mbkkaxae9pmbaiaeciGgvcitgdfcbcaad9R;8kbaiabaxcitfglad;8qbbdnavTmbaiaipblzgopxbbbbbbFFbbbbbbFFgkp9oaipblbgDaopmlvorxmPsCXQL358E8FpxFubbFubbFubbFubbp9op;6eaDaopmbediwDqkzHOAKY8AEgoczp:Sep;6egrp;Geaoczp:Reczp:Sep;6egwp;Gep;Kep;Legopxb;:FSb;:FSb;:FSb;:FSawaopxbbbbbbbbbbbbbbbbp:2egqawpxbbbjbbbjbbbjbbbjgmp9op9rp;Kegwawp;Meaoaop;Mearaqaramp9op9rp;Kegoaop;Mep;Kep;Kep;Jep;Negrp;Mepxbbn0bbn0bbn0bbn0gqp;Keczp:Reawarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9op9qgwaoarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9ogopmwDKYqk8AExm35Ps8E8Fp9qpklzaiaDakp9oawaopmbezHdiOAlvCXorQLp9qpklbkalaiad;8qbbkk;4wllue97euv978Jjjjjbc8W9Rhidnaec98GglTmbcbhvabhoinaiaopbbbgraoczfgwpbbbgDpmlvorxmPsCXQL358E8Fgqczp:Segkclp:RepklbaopxbbjZbbjZbbjZbbjZpx;Zl81Z;Zl81Z;Zl81Z;Zl81Zakpxibbbibbbibbbibbbp9qp;6ep;NegkaraDpmbediwDqkzHOAKY8AEgrczp:Reczp:Sep;6ep;MegDaDp;Meakarczp:Sep;6ep;Megxaxp;Meakaqczp:Reczp:Sep;6ep;Megqaqp;Mep;Kep;Kep;Lepxbbbbbbbbbbbbbbbbp:4ep;Jepxb;:FSb;:FSb;:FSb;:FSgkp;Mepxbbn0bbn0bbn0bbn0grp;KepxFFbbFFbbFFbbFFbbgmp9oaxakp;Mearp;Keczp:Rep9qgxaqakp;Mearp;Keczp:ReaDakp;Mearp;Keamp9op9qgkpmbezHdiOAlvCXorQLgrp5baipblbpEb:T:j83ibaocwfarp5eaipblbpEe:T:j83ibawaxakpmwDKYqk8AExm35Ps8E8Fgkp5baipblbpEd:T:j83ibaocKfakp5eaipblbpEi:T:j83ibaocafhoavclfgval6mbkkdnalae9pmbaiaeciGgvcitgofcbcaao9R;8kbaiabalcitfgwao;8qbbdnavTmbaiaipblbgraipblzgDpmlvorxmPsCXQL358E8Fgqczp:Segkclp:RepklaaipxbbjZbbjZbbjZbbjZpx;Zl81Z;Zl81Z;Zl81Z;Zl81Zakpxibbbibbbibbbibbbp9qp;6ep;NegkaraDpmbediwDqkzHOAKY8AEgrczp:Reczp:Sep;6ep;MegDaDp;Meakarczp:Sep;6ep;Megxaxp;Meakaqczp:Reczp:Sep;6ep;Megqaqp;Mep;Kep;Kep;Lepxbbbbbbbbbbbbbbbbp:4ep;Jepxb;:FSb;:FSb;:FSb;:FSgkp;Mepxbbn0bbn0bbn0bbn0grp;KepxFFbbFFbbFFbbFFbbgmp9oaxakp;Mearp;Keczp:Rep9qgxaqakp;Mearp;Keczp:ReaDakp;Mearp;Keamp9op9qgkpmbezHdiOAlvCXorQLgrp5baipblapEb:T:j83ibaiarp5eaipblapEe:T:j83iwaiaxakpmwDKYqk8AExm35Ps8E8Fgkp5baipblapEd:T:j83izaiakp5eaipblapEi:T:j83iKkawaiao;8qbbkk:Pddiue978Jjjjjbc;ab9Rhidnadcd4ae2glc98GgvTmbcbhdabheinaeaepbbbgocwp:Recwp:Sep;6eaocep:SepxbbjZbbjZbbjZbbjZp:UepxbbjFbbjFbbjFbbjFp9op;Mepkbbaeczfheadclfgdav6mbkkdnaval9pmbaialciGgdcdtgeVcbc;abae9R;8kbaiabavcdtfgvae;8qbbdnadTmbaiaipblbgocwp:Recwp:Sep;6eaocep:SepxbbjZbbjZbbjZbbjZp:UepxbbjFbbjFbbjFbbjFp9op;Mepklbkavaiae;8qbbkk9teiucbcbydj1jjbgeabcifc98GfgbBdj1jjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaikkkebcjwklz9Tbb":"b9H79Tebbbe8Fv9Gbb9Gvuuuuueu9Giuuub9Geueu9Giuuueuikqbeeedddillviebeoweuec:q;iekr;leDo9TW9T9VV95dbH9F9F939H79T9F9J9H229F9Jt9VV7bb8A9TW79O9V9Wt9F9KW9J9V9KW9wWVtW949c919M9MWVbeY9TW79O9V9Wt9F9KW9J9V9KW69U9KW949c919M9MWVbdE9TW79O9V9Wt9F9KW9J9V9KW69U9KW949tWG91W9U9JWbiL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9p9JtblK9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9r919HtbvL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWVT949Wbol79IV9Rbrq:P8Yqdbk;3sezu8Jjjjjbcj;eb9Rgv8Kjjjjbc9:hodnadcefal0mbcuhoaiRbbc:Ge9hmbavaialfgrad9Radz1jjjbhwcj;abad9UhoaicefhldnadTmbaoc;WFbGgocjdaocjd6EhDcbhqinaqae9pmeaDaeaq9RaqaDfae6Egkcsfgocl4cifcd4hxdndndndnaoc9WGgmTmbcbhPcehsawcjdfhzalhHinaraH9Rax6midnaraHaxfgl9RcK6mbczhoinawcj;cbfaogifgoc9WfhOdndndndndnaHaic9WfgAco4fRbbaAci4coG4ciGPlbedibkaO9cb83ibaOcwf9cb83ibxikaOalRblalRbbgAco4gCaCciSgCE86bbaocGfalclfaCfgORbbaAcl4ciGgCaCciSgCE86bbaocVfaOaCfgORbbaAcd4ciGgCaCciSgCE86bbaoc7faOaCfgORbbaAciGgAaAciSgAE86bbaoctfaOaAfgARbbalRbegOco4gCaCciSgCE86bbaoc91faAaCfgARbbaOcl4ciGgCaCciSgCE86bbaoc4faAaCfgARbbaOcd4ciGgCaCciSgCE86bbaoc93faAaCfgARbbaOciGgOaOciSgOE86bbaoc94faAaOfgARbbalRbdgOco4gCaCciSgCE86bbaoc95faAaCfgARbbaOcl4ciGgCaCciSgCE86bbaoc96faAaCfgARbbaOcd4ciGgCaCciSgCE86bbaoc97faAaCfgARbbaOciGgOaOciSgOE86bbaoc98faAaOfgORbbalRbiglco4gAaAciSgAE86bbaoc99faOaAfgORbbalcl4ciGgAaAciSgAE86bbaoc9:faOaAfgORbbalcd4ciGgAaAciSgAE86bbaocufaOaAfgoRbbalciGglalciSglE86bbaoalfhlxdkaOalRbwalRbbgAcl4gCaCcsSgCE86bbaocGfalcwfaCfgORbbaAcsGgAaAcsSgAE86bbaocVfaOaAfgORbbalRbegAcl4gCaCcsSgCE86bbaoc7faOaCfgORbbaAcsGgAaAcsSgAE86bbaoctfaOaAfgORbbalRbdgAcl4gCaCcsSgCE86bbaoc91faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc4faOaAfgORbbalRbigAcl4gCaCcsSgCE86bbaoc93faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc94faOaAfgORbbalRblgAcl4gCaCcsSgCE86bbaoc95faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc96faOaAfgORbbalRbvgAcl4gCaCcsSgCE86bbaoc97faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc98faOaAfgORbbalRbogAcl4gCaCcsSgCE86bbaoc99faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc9:faOaAfgORbbalRbrglcl4gAaAcsSgAE86bbaocufaOaAfgoRbbalcsGglalcsSglE86bbaoalfhlxekaOal8Pbb83bbaOcwfalcwf8Pbb83bbalczfhlkdnaiam9pmbaiczfhoaral9RcL0mekkaiam6mialTmidnakTmbawaPfRbbhOcbhoazhiinaiawcj;cbfaofRbbgAce4cbaAceG9R7aOfgO86bbaiadfhiaocefgoak9hmbkkazcefhzaPcefgPad6hsalhHaPad9hmexvkkcbhlasceGmdxikalaxad2fhCdnakTmbcbhHcehsawcjdfhminaral9Rax6mialTmdalaxfhlawaHfRbbhOcbhoamhiinaiawcj;cbfaofRbbgAce4cbaAceG9R7aOfgO86bbaiadfhiaocefgoak9hmbkamcefhmaHcefgHad6hsaHad9hmbkaChlxikcbhocehsinaral9Rax6mdalTmealaxfhlaocefgoad6hsadao9hmbkaChlxdkcbhlasceGTmekc9:hoxikabaqad2fawcjdfakad2z1jjjb8Aawawcjdfakcufad2fadz1jjjb8Aakaqfhqalmbkc9:hoxekcbc99aral9Radcaadca0ESEhokavcj;ebf8Kjjjjbaok;yzeHu8Jjjjjbc;ae9Rgv8Kjjjjbc9:hodnaeci9UgrcHfal0mbcuhoaiRbbgwc;WeGc;Ge9hmbawcsGgDce0mbavc;abfcFecjez:jjjjb8AavcUf9cu83ibavc8Wf9cu83ibavcyf9cu83ibavcaf9cu83ibavcKf9cu83ibavczf9cu83ibav9cu83iwav9cu83ibaialfc9WfhqaicefgwarfhodnaeTmbcmcsaDceSEhkcbhxcbhmcbhDcbhicbhlindnaoaq9nmbc9:hoxikdndnawRbbgrc;Ve0mbavc;abfalarcl4cu7fcsGcitfgPydlhsaPydbhzdnarcsGgPak9pmbavaiarcu7fcsGcdtfydbaxaPEhraPThPdndnadcd9hmbabaDcetfgHaz87ebaHcdfas87ebaHclfar87ebxekabaDcdtfgHazBdbaHclfasBdbaHcwfarBdbkaxaPfhxavc;abfalcitfgHarBdbaHasBdlavaicdtfarBdbavc;abfalcefcsGglcitfgHazBdbaHarBdlaiaPfhialcefhlxdkdndnaPcsSmbamaPfaPc987fcefhmxekaocefhrao8SbbgPcFeGhHdndnaPcu9mmbarhoxekaocvfhoaHcFbGhHcrhPdninar8SbbgOcFbGaPtaHVhHaOcu9kmearcefhraPcrfgPc8J9hmbxdkkarcefhokaHce4cbaHceG9R7amfhmkdndnadcd9hmbabaDcetfgraz87ebarcdfas87ebarclfam87ebxekabaDcdtfgrazBdbarclfasBdbarcwfamBdbkavc;abfalcitfgramBdbarasBdlavaicdtfamBdbavc;abfalcefcsGglcitfgrazBdbaramBdlaicefhialcefhlxekdnarcpe0mbaxcefgOavaiaqarcsGfRbbgPcl49RcsGcdtfydbaPcz6gHEhravaiaP9RcsGcdtfydbaOaHfgsaPcsGgOEhPaOThOdndnadcd9hmbabaDcetfgzax87ebazcdfar87ebazclfaP87ebxekabaDcdtfgzaxBdbazclfarBdbazcwfaPBdbkavaicdtfaxBdbavc;abfalcitfgzarBdbazaxBdlavaicefgicsGcdtfarBdbavc;abfalcefcsGcitfgzaPBdbazarBdlavaiaHfcsGgicdtfaPBdbavc;abfalcdfcsGglcitfgraxBdbaraPBdlalcefhlaiaOfhiasaOfhxxekaxcbaoRbbgzEgAarc;:eSgrfhsazcsGhCazcl4hXdndnazcs0mbascefhOxekashOavaiaX9RcsGcdtfydbhskdndnaCmbaOcefhxxekaOhxavaiaz9RcsGcdtfydbhOkdndnarTmbaocefhrxekaocdfhrao8SbegHcFeGhPdnaHcu9kmbaocofhAaPcFbGhPcrhodninar8SbbgHcFbGaotaPVhPaHcu9kmearcefhraocrfgoc8J9hmbkaAhrxekarcefhrkaPce4cbaPceG9R7amfgmhAkdndnaXcsSmbarhPxekarcefhPar8SbbgocFeGhHdnaocu9kmbarcvfhsaHcFbGhHcrhodninaP8SbbgrcFbGaotaHVhHarcu9kmeaPcefhPaocrfgoc8J9hmbkashPxekaPcefhPkaHce4cbaHceG9R7amfgmhskdndnaCcsSmbaPhoxekaPcefhoaP8SbbgrcFeGhHdnarcu9kmbaPcvfhOaHcFbGhHcrhrdninao8SbbgPcFbGartaHVhHaPcu9kmeaocefhoarcrfgrc8J9hmbkaOhoxekaocefhokaHce4cbaHceG9R7amfgmhOkdndnadcd9hmbabaDcetfgraA87ebarcdfas87ebarclfaO87ebxekabaDcdtfgraABdbarclfasBdbarcwfaOBdbkavc;abfalcitfgrasBdbaraABdlavaicdtfaABdbavc;abfalcefcsGcitfgraOBdbarasBdlavaicefgicsGcdtfasBdbavc;abfalcdfcsGcitfgraABdbaraOBdlavaiazcz6aXcsSVfgicsGcdtfaOBdbaiaCTaCcsSVfhialcifhlkawcefhwalcsGhlaicsGhiaDcifgDae6mbkkcbc99aoaqSEhokavc;aef8Kjjjjbaok:llevu8Jjjjjbcz9Rhvc9:hodnaecvfal0mbcuhoaiRbbc;:eGc;qe9hmbav9cb83iwaicefhraialfc98fhwdnaeTmbdnadcdSmbcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcdtfaicd4cbaice4ceG9R7avcwfaiceGcdtVgoydbfglBdbaoalBdbaDcefgDae9hmbxdkkcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcetfaicd4cbaice4ceG9R7avcwfaiceGcdtVgoydbfgl87ebaoalBdbaDcefgDae9hmbkkcbc99arawSEhokaok:Lvoeue99dud99eud99dndnadcl9hmbaeTmeindndnabcdfgd8Sbb:Yab8Sbbgi:Ygl:l:tabcefgv8Sbbgo:Ygr:l:tgwJbb;:9cawawNJbbbbawawJbbbb9GgDEgq:mgkaqaicb9iEalMgwawNakaqaocb9iEarMgqaqNMM:r:vglNJbbbZJbbb:;aDEMgr:lJbbb9p9DTmbar:Ohixekcjjjj94hikadai86bbdndnaqalNJbbbZJbbb:;aqJbbbb9GEMgq:lJbbb9p9DTmbaq:Ohdxekcjjjj94hdkavad86bbdndnawalNJbbbZJbbb:;awJbbbb9GEMgw:lJbbb9p9DTmbaw:Ohdxekcjjjj94hdkabad86bbabclfhbaecufgembxdkkaeTmbindndnabclfgd8Ueb:Yab8Uebgi:Ygl:l:tabcdfgv8Uebgo:Ygr:l:tgwJb;:FSawawNJbbbbawawJbbbb9GgDEgq:mgkaqaicb9iEalMgwawNakaqaocb9iEarMgqaqNMM:r:vglNJbbbZJbbb:;aDEMgr:lJbbb9p9DTmbar:Ohixekcjjjj94hikadai87ebdndnaqalNJbbbZJbbb:;aqJbbbb9GEMgq:lJbbb9p9DTmbaq:Ohdxekcjjjj94hdkavad87ebdndnawalNJbbbZJbbb:;awJbbbb9GEMgw:lJbbb9p9DTmbaw:Ohdxekcjjjj94hdkabad87ebabcwfhbaecufgembkkk;siliui99iue99dnaeTmbcbhiabhlindndnJ;Zl81Zalcof8UebgvciV:Y:vgoal8Ueb:YNgrJb;:FSNJbbbZJbbb:;arJbbbb9GEMgw:lJbbb9p9DTmbaw:OhDxekcjjjj94hDkalclf8Uebhqalcdf8UebhkabavcefciGaiVcetfaD87ebdndnaoak:YNgwJb;:FSNJbbbZJbbb:;awJbbbb9GEMgx:lJbbb9p9DTmbax:Ohkxekcjjjj94hkkabavcdfciGaiVcetfak87ebdndnaoaq:YNgoJb;:FSNJbbbZJbbb:;aoJbbbb9GEMgx:lJbbb9p9DTmbax:Ohqxekcjjjj94hqkabavcufciGaiVcetfaq87ebdndnJbbjZararN:tawawN:taoaoN:tgrJbbbbarJbbbb9GE:rJb;:FSNJbbbZMgr:lJbbb9p9DTmbar:Ohqxekcjjjj94hqkabavciGaiVcetfaq87ebalcwfhlaiclfhiaecufgembkkk9mbdnadcd4ae2geTmbinababydbgdcwtcw91:Yadce91cjjj;8ifcjjj98G::NUdbabclfhbaecufgembkkk9teiucbcbydj1jjbgeabcifc98GfgbBdj1jjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaik;LeeeudndnaeabVciGTmbabhixekdndnadcz9pmbabhixekabhiinaiaeydbBdbaiclfaeclfydbBdbaicwfaecwfydbBdbaicxfaecxfydbBdbaiczfhiaeczfheadc9Wfgdcs0mbkkadcl6mbinaiaeydbBdbaeclfheaiclfhiadc98fgdci0mbkkdnadTmbinaiaeRbb86bbaicefhiaecefheadcufgdmbkkabk;aeedudndnabciGTmbabhixekaecFeGc:b:c:ew2hldndnadcz9pmbabhixekabhiinaialBdbaicxfalBdbaicwfalBdbaiclfalBdbaiczfhiadc9Wfgdcs0mbkkadcl6mbinaialBdbaiclfhiadc98fgdci0mbkkdnadTmbinaiae86bbaicefhiadcufgdmbkkabkkkebcjwklz9Kbb",n=WebAssembly.instantiate(r(s),{}).then((function(e){(i=e.instance).exports.__wasm_call_ctors()}));function r(e){for(var i=new Uint8Array(e.length),s=0;s<e.length;++s){var n=e.charCodeAt(s);i[s]=n>96?n-97:n>64?n-39:n+4}var r=0;for(s=0;s<e.length;++s)i[r++]=i[s]<60?t[i[s]]:64*(i[s]-60)+i[++s];return i.buffer.slice(0,r)}function o(e,t,s,n,r,o){var a=i.exports.sbrk,l=s+3&-4,h=a(l*n),c=a(r.length),d=new Uint8Array(i.exports.memory.buffer);d.set(r,c);var u=e(h,s,n,c,r.length);if(0==u&&o&&o(h,l,n),t.set(d.subarray(h,h+s*n)),a(h-a(0)),0!=u)throw new Error("Malformed buffer data: "+u)}var a={NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},l={ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"},h=[],c=0;function d(e){var t={object:new Worker(e),pending:0,requests:{}};return t.object.onmessage=function(e){var i=e.data;t.pending-=i.count,t.requests[i.id][i.action](i.value),delete t.requests[i.id]},t}function u(e){for(var t="var instance; var ready = WebAssembly.instantiate(new Uint8Array(["+new Uint8Array(r(s))+"]), {}).then(function(result) { instance = result.instance; instance.exports.__wasm_call_ctors(); });self.onmessage = workerProcess;"+o.toString()+p.toString(),i=new Blob([t],{type:"text/javascript"}),n=URL.createObjectURL(i),a=0;a<e;++a)h[a]=d(n);URL.revokeObjectURL(n)}function p(e){n.then((function(){var t=e.data;try{var s=new Uint8Array(t.count*t.size);o(i.exports[t.mode],s,t.count,t.size,t.source,i.exports[t.filter]),self.postMessage({id:t.id,count:t.count,action:"resolve",value:s},[s.buffer])}catch(e){self.postMessage({id:t.id,count:t.count,action:"reject",value:e})}}))}return{ready:n,supported:!0,useWorkers:function(e){u(e)},decodeVertexBuffer:function(e,t,s,n,r){o(i.exports.meshopt_decodeVertexBuffer,e,t,s,n,i.exports[a[r]])},decodeIndexBuffer:function(e,t,s,n){o(i.exports.meshopt_decodeIndexBuffer,e,t,s,n)},decodeIndexSequence:function(e,t,s,n){o(i.exports.meshopt_decodeIndexSequence,e,t,s,n)},decodeGltfBuffer:function(e,t,s,n,r,h){o(i.exports[l[r]],e,t,s,n,i.exports[a[h]])},decodeGltfBufferAsync:function(e,t,s,r,d){return h.length>0?function(e,t,i,s,n){for(var r=h[0],o=1;o<h.length;++o)h[o].pending<r.pending&&(r=h[o]);return new Promise((function(o,a){var l=new Uint8Array(i),h=c++;r.pending+=e,r.requests[h]={resolve:o,reject:a},r.object.postMessage({id:h,count:e,size:t,source:l,mode:s,filter:n},[l.buffer])}))}(e,t,s,l[r],a[d]):n.then((function(){var n=new Uint8Array(e*t);return o(i.exports[l[r]],n,e,t,s,i.exports[a[d]]),n}))}}}();const Ci=/^[og]\s*(.+)?/,Si=/^mtllib /,Ii=/^usemtl /,Ei=/^usemap /,ki=/\s+/,Bi=new i.Vector3,Qi=new i.Vector3,Mi=new i.Vector3,Ti=new i.Vector3,Di=new i.Vector3,Ri=new i.Color;function Pi(){const e={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(e,t){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=e,void(this.object.fromDeclaration=!1!==t);const i=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:!1!==t,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(e,t){const i=this._finalize(!1);i&&(i.inherited||i.groupCount<=0)&&this.materials.splice(i.index,1);const s={index:this.materials.length,name:e||"",mtllib:Array.isArray(t)&&t.length>0?t[t.length-1]:"",smooth:void 0!==i?i.smooth:this.smooth,groupStart:void 0!==i?i.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(e){const t={index:"number"==typeof e?e:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return t.clone=this.clone.bind(t),t}};return this.materials.push(s),s},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(e){const t=this.currentMaterial();if(t&&-1===t.groupEnd&&(t.groupEnd=this.geometry.vertices.length/3,t.groupCount=t.groupEnd-t.groupStart,t.inherited=!1),e&&this.materials.length>1)for(let e=this.materials.length-1;e>=0;e--)this.materials[e].groupCount<=0&&this.materials.splice(e,1);return e&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),t}},i&&i.name&&"function"==typeof i.clone){const e=i.clone(0);e.inherited=!0,this.object.materials.push(e)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(e,t){const i=parseInt(e,10);return 3*(i>=0?i-1:i+t/3)},parseNormalIndex:function(e,t){const i=parseInt(e,10);return 3*(i>=0?i-1:i+t/3)},parseUVIndex:function(e,t){const i=parseInt(e,10);return 2*(i>=0?i-1:i+t/2)},addVertex:function(e,t,i){const s=this.vertices,n=this.object.geometry.vertices;n.push(s[e+0],s[e+1],s[e+2]),n.push(s[t+0],s[t+1],s[t+2]),n.push(s[i+0],s[i+1],s[i+2])},addVertexPoint:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,i){const s=this.normals,n=this.object.geometry.normals;n.push(s[e+0],s[e+1],s[e+2]),n.push(s[t+0],s[t+1],s[t+2]),n.push(s[i+0],s[i+1],s[i+2])},addFaceNormal:function(e,t,i){const s=this.vertices,n=this.object.geometry.normals;Bi.fromArray(s,e),Qi.fromArray(s,t),Mi.fromArray(s,i),Di.subVectors(Mi,Qi),Ti.subVectors(Bi,Qi),Di.cross(Ti),Di.normalize(),n.push(Di.x,Di.y,Di.z),n.push(Di.x,Di.y,Di.z),n.push(Di.x,Di.y,Di.z)},addColor:function(e,t,i){const s=this.colors,n=this.object.geometry.colors;void 0!==s[e]&&n.push(s[e+0],s[e+1],s[e+2]),void 0!==s[t]&&n.push(s[t+0],s[t+1],s[t+2]),void 0!==s[i]&&n.push(s[i+0],s[i+1],s[i+2])},addUV:function(e,t,i){const s=this.uvs,n=this.object.geometry.uvs;n.push(s[e+0],s[e+1]),n.push(s[t+0],s[t+1]),n.push(s[i+0],s[i+1])},addDefaultUV:function(){const e=this.object.geometry.uvs;e.push(0,0),e.push(0,0),e.push(0,0)},addUVLine:function(e){const t=this.uvs;this.object.geometry.uvs.push(t[e+0],t[e+1])},addFace:function(e,t,i,s,n,r,o,a,l){const h=this.vertices.length;let c=this.parseVertexIndex(e,h),d=this.parseVertexIndex(t,h),u=this.parseVertexIndex(i,h);if(this.addVertex(c,d,u),this.addColor(c,d,u),void 0!==o&&""!==o){const e=this.normals.length;c=this.parseNormalIndex(o,e),d=this.parseNormalIndex(a,e),u=this.parseNormalIndex(l,e),this.addNormal(c,d,u)}else this.addFaceNormal(c,d,u);if(void 0!==s&&""!==s){const e=this.uvs.length;c=this.parseUVIndex(s,e),d=this.parseUVIndex(n,e),u=this.parseUVIndex(r,e),this.addUV(c,d,u),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(e){this.object.geometry.type="Points";const t=this.vertices.length;for(let i=0,s=e.length;i<s;i++){const s=this.parseVertexIndex(e[i],t);this.addVertexPoint(s),this.addColor(s)}},addLineGeometry:function(e,t){this.object.geometry.type="Line";const i=this.vertices.length,s=this.uvs.length;for(let t=0,s=e.length;t<s;t++)this.addVertexLine(this.parseVertexIndex(e[t],i));for(let e=0,i=t.length;e<i;e++)this.addUVLine(this.parseUVIndex(t[e],s))}};return e.startObject("",!1),e}class Li extends i.Loader{constructor(e){super(e),this.materials=null}load(e,t,s,n){const r=this,o=new i.FileLoader(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(i){try{t(r.parse(i))}catch(t){n?n(t):console.error(t),r.manager.itemError(e)}}),s,n)}setMaterials(e){return this.materials=e,this}parse(e){const t=new Pi;-1!==e.indexOf("\r\n")&&(e=e.replace(/\r\n/g,"\n")),-1!==e.indexOf("\\\n")&&(e=e.replace(/\\\n/g,""));const s=e.split("\n");let n=[];for(let e=0,r=s.length;e<r;e++){const r=s[e].trimStart();if(0===r.length)continue;const o=r.charAt(0);if("#"!==o)if("v"===o){const e=r.split(ki);switch(e[0]){case"v":t.vertices.push(parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])),e.length>=7?(Ri.setRGB(parseFloat(e[4]),parseFloat(e[5]),parseFloat(e[6]),i.SRGBColorSpace),t.colors.push(Ri.r,Ri.g,Ri.b)):t.colors.push(void 0,void 0,void 0);break;case"vn":t.normals.push(parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]));break;case"vt":t.uvs.push(parseFloat(e[1]),parseFloat(e[2]))}}else if("f"===o){const e=r.slice(1).trim().split(ki),i=[];for(let t=0,s=e.length;t<s;t++){const s=e[t];if(s.length>0){const e=s.split("/");i.push(e)}}const s=i[0];for(let e=1,n=i.length-1;e<n;e++){const n=i[e],r=i[e+1];t.addFace(s[0],n[0],r[0],s[1],n[1],r[1],s[2],n[2],r[2])}}else if("l"===o){const e=r.substring(1).trim().split(" ");let i=[];const s=[];if(-1===r.indexOf("/"))i=e;else for(let t=0,n=e.length;t<n;t++){const n=e[t].split("/");""!==n[0]&&i.push(n[0]),""!==n[1]&&s.push(n[1])}t.addLineGeometry(i,s)}else if("p"===o){const e=r.slice(1).trim().split(" ");t.addPointGeometry(e)}else if(null!==(n=Ci.exec(r))){const e=(" "+n[0].slice(1).trim()).slice(1);t.startObject(e)}else if(Ii.test(r))t.object.startMaterial(r.substring(7).trim(),t.materialLibraries);else if(Si.test(r))t.materialLibraries.push(r.substring(7).trim());else if(Ei.test(r))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if("s"===o){if(n=r.split(" "),n.length>1){const e=n[1].trim().toLowerCase();t.object.smooth="0"!==e&&"off"!==e}else t.object.smooth=!0;const e=t.object.currentMaterial();e&&(e.smooth=t.object.smooth)}else{if("\0"===r)continue;console.warn('THREE.OBJLoader: Unexpected line: "'+r+'"')}}t.finalize();const r=new i.Group;r.materialLibraries=[].concat(t.materialLibraries);if(!0===!(1===t.objects.length&&0===t.objects[0].geometry.vertices.length))for(let e=0,s=t.objects.length;e<s;e++){const s=t.objects[e],n=s.geometry,o=s.materials,a="Line"===n.type,l="Points"===n.type;let h=!1;if(0===n.vertices.length)continue;const c=new i.BufferGeometry;c.setAttribute("position",new i.Float32BufferAttribute(n.vertices,3)),n.normals.length>0&&c.setAttribute("normal",new i.Float32BufferAttribute(n.normals,3)),n.colors.length>0&&(h=!0,c.setAttribute("color",new i.Float32BufferAttribute(n.colors,3))),!0===n.hasUVIndices&&c.setAttribute("uv",new i.Float32BufferAttribute(n.uvs,2));const d=[];for(let e=0,s=o.length;e<s;e++){const s=o[e],n=s.name+"_"+s.smooth+"_"+h;let r=t.materials[n];if(null!==this.materials)if(r=this.materials.create(s.name),!a||!r||r instanceof i.LineBasicMaterial){if(l&&r&&!(r instanceof i.PointsMaterial)){const e=new i.PointsMaterial({size:10,sizeAttenuation:!1});i.Material.prototype.copy.call(e,r),e.color.copy(r.color),e.map=r.map,r=e}}else{const e=new i.LineBasicMaterial;i.Material.prototype.copy.call(e,r),e.color.copy(r.color),r=e}void 0===r&&(r=a?new i.LineBasicMaterial:l?new i.PointsMaterial({size:1,sizeAttenuation:!1}):new i.MeshPhongMaterial,r.name=s.name,r.flatShading=!s.smooth,r.vertexColors=h,t.materials[n]=r),d.push(r)}let u;if(d.length>1){for(let e=0,t=o.length;e<t;e++){const t=o[e];c.addGroup(t.groupStart,t.groupCount,e)}u=a?new i.LineSegments(c,d):l?new i.Points(c,d):new i.Mesh(c,d)}else u=a?new i.LineSegments(c,d[0]):l?new i.Points(c,d[0]):new i.Mesh(c,d[0]);u.name=s.name,r.add(u)}else if(t.vertices.length>0){const e=new i.PointsMaterial({size:1,sizeAttenuation:!1}),s=new i.BufferGeometry;s.setAttribute("position",new i.Float32BufferAttribute(t.vertices,3)),t.colors.length>0&&void 0!==t.colors[0]&&(s.setAttribute("color",new i.Float32BufferAttribute(t.colors,3)),e.vertexColors=!0);const n=new i.Points(s,e);r.add(n)}return r}}class Fi extends i.Loader{constructor(e){super(e)}load(e,t,s,n){const r=this,o=new i.FileLoader(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(i){try{t(r.parse(i))}catch(t){n?n(t):console.error(t),r.manager.itemError(e)}}),s,n)}parse(e){function t(e,t,i){for(let s=0,n=e.length;s<n;s++)if(e[s]!==t.getUint8(i+s))return!1;return!0}const s=function(e){if("string"==typeof e){const t=new Uint8Array(e.length);for(let i=0;i<e.length;i++)t[i]=255&e.charCodeAt(i);return t.buffer||t}return e}(e);return function(e){const i=new DataView(e);if(84+50*i.getUint32(80,!0)===i.byteLength)return!0;const s=[115,111,108,105,100];for(let e=0;e<5;e++)if(t(s,i,e))return!1;return!0}(s)?function(e){const t=new DataView(e),s=t.getUint32(80,!0);let n,r,o,a,l,h,c,d,u=!1;for(let e=0;e<70;e++)1129270351==t.getUint32(e,!1)&&82==t.getUint8(e+4)&&61==t.getUint8(e+5)&&(u=!0,a=new Float32Array(3*s*3),l=t.getUint8(e+6)/255,h=t.getUint8(e+7)/255,c=t.getUint8(e+8)/255,d=t.getUint8(e+9)/255);const p=new i.BufferGeometry,f=new Float32Array(3*s*3),m=new Float32Array(3*s*3),g=new i.Color;for(let e=0;e<s;e++){const s=84+50*e,d=t.getFloat32(s,!0),p=t.getFloat32(s+4,!0),A=t.getFloat32(s+8,!0);if(u){const e=t.getUint16(s+48,!0);32768&e?(n=l,r=h,o=c):(n=(31&e)/31,r=(e>>5&31)/31,o=(e>>10&31)/31)}for(let l=1;l<=3;l++){const h=s+12*l,c=3*e*3+3*(l-1);f[c]=t.getFloat32(h,!0),f[c+1]=t.getFloat32(h+4,!0),f[c+2]=t.getFloat32(h+8,!0),m[c]=d,m[c+1]=p,m[c+2]=A,u&&(g.setRGB(n,r,o,i.SRGBColorSpace),a[c]=g.r,a[c+1]=g.g,a[c+2]=g.b)}}return p.setAttribute("position",new i.BufferAttribute(f,3)),p.setAttribute("normal",new i.BufferAttribute(m,3)),u&&(p.setAttribute("color",new i.BufferAttribute(a,3)),p.hasColors=!0,p.alpha=d),p}(s):function(e){const t=new i.BufferGeometry,s=/solid([\s\S]*?)endsolid/g,n=/facet([\s\S]*?)endfacet/g,r=/solid\s(.+)/;let o=0;const a=/[\s]+([+-]?(?:\d*)(?:\.\d*)?(?:[eE][+-]?\d+)?)/.source,l=new RegExp("vertex"+a+a+a,"g"),h=new RegExp("normal"+a+a+a,"g"),c=[],d=[],u=[],p=new i.Vector3;let f,m=0,g=0,A=0;for(;null!==(f=s.exec(e));){g=A;const e=f[0],i=null!==(f=r.exec(e))?f[1]:"";for(u.push(i);null!==(f=n.exec(e));){let e=0,t=0;const i=f[0];for(;null!==(f=h.exec(i));)p.x=parseFloat(f[1]),p.y=parseFloat(f[2]),p.z=parseFloat(f[3]),t++;for(;null!==(f=l.exec(i));)c.push(parseFloat(f[1]),parseFloat(f[2]),parseFloat(f[3])),d.push(p.x,p.y,p.z),e++,A++;1!==t&&console.error("THREE.STLLoader: Something isn't right with the normal of face number "+o),3!==e&&console.error("THREE.STLLoader: Something isn't right with the vertices of face number "+o),o++}const s=g,a=A-g;t.userData.groupNames=u,t.addGroup(s,a,m),m++}return t.setAttribute("position",new i.Float32BufferAttribute(c,3)),t.setAttribute("normal",new i.Float32BufferAttribute(d,3)),t}("string"!=typeof(n=e)?(new TextDecoder).decode(n):n);var n}}class Ui extends i.DataTextureLoader{constructor(e){super(e),this.type=i.HalfFloatType}parse(e){const t=function(e,t){switch(e){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(t||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(t||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(t||""));default:throw new Error("THREE.RGBELoader: Memory Error: "+(t||""))}},s=function(e,t,i){t=t||1024;let s=e.pos,n=-1,r=0,o="",a=String.fromCharCode.apply(null,new Uint16Array(e.subarray(s,s+128)));for(;0>(n=a.indexOf("\n"))&&r<t&&s<e.byteLength;)o+=a,r+=a.length,s+=128,a+=String.fromCharCode.apply(null,new Uint16Array(e.subarray(s,s+128)));return-1<n&&(e.pos+=r+n+1,o+a.slice(0,n))},n=function(e,t,i,s){const n=e[t+3],r=Math.pow(2,n-128)/255;i[s+0]=e[t+0]*r,i[s+1]=e[t+1]*r,i[s+2]=e[t+2]*r,i[s+3]=1},r=function(e,t,s,n){const r=e[t+3],o=Math.pow(2,r-128)/255;s[n+0]=i.DataUtils.toHalfFloat(Math.min(e[t+0]*o,65504)),s[n+1]=i.DataUtils.toHalfFloat(Math.min(e[t+1]*o,65504)),s[n+2]=i.DataUtils.toHalfFloat(Math.min(e[t+2]*o,65504)),s[n+3]=i.DataUtils.toHalfFloat(1)},o=new Uint8Array(e);o.pos=0;const a=function(e){const i=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,n=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,r=/^\s*FORMAT=(\S+)\s*$/,o=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,a={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let l,h;for((e.pos>=e.byteLength||!(l=s(e)))&&t(1,"no header found"),(h=l.match(/^#\?(\S+)/))||t(3,"bad initial token"),a.valid|=1,a.programtype=h[1],a.string+=l+"\n";l=s(e),!1!==l;)if(a.string+=l+"\n","#"!==l.charAt(0)){if((h=l.match(i))&&(a.gamma=parseFloat(h[1])),(h=l.match(n))&&(a.exposure=parseFloat(h[1])),(h=l.match(r))&&(a.valid|=2,a.format=h[1]),(h=l.match(o))&&(a.valid|=4,a.height=parseInt(h[1],10),a.width=parseInt(h[2],10)),2&a.valid&&4&a.valid)break}else a.comments+=l+"\n";return 2&a.valid||t(3,"missing format specifier"),4&a.valid||t(3,"missing image size specifier"),a}(o),l=a.width,h=a.height,c=function(e,i,s){const n=i;if(n<8||n>32767||2!==e[0]||2!==e[1]||128&e[2])return new Uint8Array(e);n!==(e[2]<<8|e[3])&&t(3,"wrong scanline width");const r=new Uint8Array(4*i*s);r.length||t(4,"unable to allocate buffer space");let o=0,a=0;const l=4*n,h=new Uint8Array(4),c=new Uint8Array(l);let d=s;for(;d>0&&a<e.byteLength;){a+4>e.byteLength&&t(1),h[0]=e[a++],h[1]=e[a++],h[2]=e[a++],h[3]=e[a++],2==h[0]&&2==h[1]&&(h[2]<<8|h[3])==n||t(3,"bad rgbe scanline format");let i,s=0;for(;s<l&&a<e.byteLength;){i=e[a++];const n=i>128;if(n&&(i-=128),(0===i||s+i>l)&&t(3,"bad scanline data"),n){const t=e[a++];for(let e=0;e<i;e++)c[s++]=t}else c.set(e.subarray(a,a+i),s),s+=i,a+=i}const u=n;for(let e=0;e<u;e++){let t=0;r[o]=c[e+t],t+=n,r[o+1]=c[e+t],t+=n,r[o+2]=c[e+t],t+=n,r[o+3]=c[e+t],o+=4}d--}return r}(o.subarray(o.pos),l,h);let d,u,p;switch(this.type){case i.FloatType:p=c.length/4;const e=new Float32Array(4*p);for(let t=0;t<p;t++)n(c,4*t,e,4*t);d=e,u=i.FloatType;break;case i.HalfFloatType:p=c.length/4;const t=new Uint16Array(4*p);for(let e=0;e<p;e++)r(c,4*e,t,4*e);d=t,u=i.HalfFloatType;break;default:throw new Error("THREE.RGBELoader: unsupported type: ",this.type)}return{width:l,height:h,data:d,header:a.string,gamma:a.gamma,exposure:a.exposure,type:u}}setDataType(e){return this.type=e,this}load(e,t,s,n){return super.load(e,(function(e,s){switch(e.type){case i.FloatType:case i.HalfFloatType:e.colorSpace=i.LinearSRGBColorSpace,e.minFilter=i.LinearFilter,e.magFilter=i.LinearFilter,e.generateMipmaps=!1,e.flipY=!0}t&&t(e,s)}),s,n)}}class zi extends i.DataTextureLoader{constructor(e){super(e),this.type=i.HalfFloatType}parse(e){const t=65536,s=14,n=65537,r=16384,o=Math.pow(2.7182818,2.2);const a={l:0,c:0,lc:0};function l(e,t,i,s,n){for(;i<e;)t=t<<8|V(s,n),i+=8;i-=e,a.l=t>>i&(1<<e)-1,a.c=t,a.lc=i}const h=new Array(59);function c(e,t,i,s,r,o){const c=t;let d=0,u=0;for(;s<=r;s++){if(c.value-t.value>i)return!1;l(6,d,u,e,c);const n=a.l;if(d=a.c,u=a.lc,o[s]=n,63==n){if(c.value-t.value>i)throw new Error("Something wrong with hufUnpackEncTable");l(8,d,u,e,c);let n=a.l+6;if(d=a.c,u=a.lc,s+n>r+1)throw new Error("Something wrong with hufUnpackEncTable");for(;n--;)o[s++]=0;s--}else if(n>=59){let e=n-59+2;if(s+e>r+1)throw new Error("Something wrong with hufUnpackEncTable");for(;e--;)o[s++]=0;s--}}!function(e){for(let e=0;e<=58;++e)h[e]=0;for(let t=0;t<n;++t)h[e[t]]+=1;let t=0;for(let e=58;e>0;--e){const i=t+h[e]>>1;h[e]=t,t=i}for(let t=0;t<n;++t){const i=e[t];i>0&&(e[t]=i|h[i]++<<6)}}(o)}function d(e){return 63&e}function u(e){return e>>6}const p={c:0,lc:0};function f(e,t,i,s){e=e<<8|V(i,s),t+=8,p.c=e,p.lc=t}const m={c:0,lc:0};function g(e,t,i,s,n,r,o,a,l){if(e==t){s<8&&(f(i,s,n,r),i=p.c,s=p.lc);let e=i>>(s-=8);if(e=new Uint8Array([e])[0],a.value+e>l)return!1;const t=o[a.value-1];for(;e-- >0;)o[a.value++]=t}else{if(!(a.value<l))return!1;o[a.value++]=e}m.c=i,m.lc=s}function A(e){return 65535&e}function b(e){const t=A(e);return t>32767?t-65536:t}const v={a:0,b:0};function y(e,t){const i=b(e),s=b(t),n=i+(1&s)+(s>>1),r=n,o=n-s;v.a=r,v.b=o}function w(e,t){const i=A(e),s=A(t),n=i-(s>>1)&65535,r=s+n-32768&65535;v.a=r,v.b=n}function x(e,t,i,s,n,r,o){const a=o<16384,l=i>n?n:i;let h,c,d=1;for(;d<=l;)d<<=1;for(d>>=1,h=d,d>>=1;d>=1;){c=0;const o=c+r*(n-h),l=r*d,u=r*h,p=s*d,f=s*h;let m,g,A,b;for(;c<=o;c+=u){let n=c;const r=c+s*(i-h);for(;n<=r;n+=f){const i=n+p,s=n+l,r=s+p;a?(y(e[n+t],e[s+t]),m=v.a,A=v.b,y(e[i+t],e[r+t]),g=v.a,b=v.b,y(m,g),e[n+t]=v.a,e[i+t]=v.b,y(A,b),e[s+t]=v.a,e[r+t]=v.b):(w(e[n+t],e[s+t]),m=v.a,A=v.b,w(e[i+t],e[r+t]),g=v.a,b=v.b,w(m,g),e[n+t]=v.a,e[i+t]=v.b,w(A,b),e[s+t]=v.a,e[r+t]=v.b)}if(i&d){const i=n+l;a?y(e[n+t],e[i+t]):w(e[n+t],e[i+t]),m=v.a,e[i+t]=v.b,e[n+t]=m}}if(n&d){let n=c;const r=c+s*(i-h);for(;n<=r;n+=f){const i=n+p;a?y(e[n+t],e[i+t]):w(e[n+t],e[i+t]),m=v.a,e[i+t]=v.b,e[n+t]=m}}h=d,d>>=1}return c}function O(e,t,i,o,a,l){const h=i.value,A=N(t,i),b=N(t,i);i.value+=4;const v=N(t,i);if(i.value+=4,A<0||A>=n||b<0||b>=n)throw new Error("Something wrong with HUF_ENCSIZE");const y=new Array(n),w=new Array(r);!function(e){for(let t=0;t<r;t++)e[t]={},e[t].len=0,e[t].lit=0,e[t].p=null}(w);if(c(e,i,o-(i.value-h),A,b,y),v>8*(o-(i.value-h)))throw new Error("Something wrong with hufUncompress");!function(e,t,i,n){for(;t<=i;t++){const i=u(e[t]),r=d(e[t]);if(i>>r)throw new Error("Invalid table entry");if(r>s){const e=n[i>>r-s];if(e.len)throw new Error("Invalid table entry");if(e.lit++,e.p){const t=e.p;e.p=new Array(e.lit);for(let i=0;i<e.lit-1;++i)e.p[i]=t[i]}else e.p=new Array(1);e.p[e.lit-1]=t}else if(r){let e=0;for(let o=1<<s-r;o>0;o--){const o=n[(i<<s-r)+e];if(o.len||o.p)throw new Error("Invalid table entry");o.len=r,o.lit=t,e++}}}}(y,A,b,w),function(e,t,i,n,r,o,a,l,h){let c=0,A=0;const b=a,v=Math.trunc(n.value+(r+7)/8);for(;n.value<v;)for(f(c,A,i,n),c=p.c,A=p.lc;A>=s;){const r=t[c>>A-s&16383];if(r.len)A-=r.len,g(r.lit,o,c,A,i,n,l,h,b),c=m.c,A=m.lc;else{if(!r.p)throw new Error("hufDecode issues");let t;for(t=0;t<r.lit;t++){const s=d(e[r.p[t]]);for(;A<s&&n.value<v;)f(c,A,i,n),c=p.c,A=p.lc;if(A>=s&&u(e[r.p[t]])==(c>>A-s&(1<<s)-1)){A-=s,g(r.p[t],o,c,A,i,n,l,h,b),c=m.c,A=m.lc;break}}if(t==r.lit)throw new Error("hufDecode issues")}}const y=8-r&7;for(c>>=y,A-=y;A>0;){const e=t[c<<s-A&16383];if(!e.len)throw new Error("hufDecode issues");A-=e.len,g(e.lit,o,c,A,i,n,l,h,b),c=m.c,A=m.lc}}(y,w,e,i,v,b,l,a,{value:0})}function C(e){for(let t=1;t<e.length;t++){const i=e[t-1]+e[t]-128;e[t]=i}}function S(e,t){let i=0,s=Math.floor((e.length+1)/2),n=0;const r=e.length-1;for(;!(n>r||(t[n++]=e[i++],n>r));)t[n++]=e[s++]}function I(e){let t=e.byteLength;const i=new Array;let s=0;const n=new DataView(e);for(;t>0;){const e=n.getInt8(s++);if(e<0){const r=-e;t-=r+1;for(let e=0;e<r;e++)i.push(n.getUint8(s++))}else{const r=e;t-=2;const o=n.getUint8(s++);for(let e=0;e<r+1;e++)i.push(o)}}return i}function E(e,t,i){let s,n=1;for(;n<64;)s=t[e.value],65280==s?n=64:s>>8==255?n+=255&s:(i[n]=s,n++),e.value++}function k(e,t){t[0]=W(e[0]),t[1]=W(e[1]),t[2]=W(e[5]),t[3]=W(e[6]),t[4]=W(e[14]),t[5]=W(e[15]),t[6]=W(e[27]),t[7]=W(e[28]),t[8]=W(e[2]),t[9]=W(e[4]),t[10]=W(e[7]),t[11]=W(e[13]),t[12]=W(e[16]),t[13]=W(e[26]),t[14]=W(e[29]),t[15]=W(e[42]),t[16]=W(e[3]),t[17]=W(e[8]),t[18]=W(e[12]),t[19]=W(e[17]),t[20]=W(e[25]),t[21]=W(e[30]),t[22]=W(e[41]),t[23]=W(e[43]),t[24]=W(e[9]),t[25]=W(e[11]),t[26]=W(e[18]),t[27]=W(e[24]),t[28]=W(e[31]),t[29]=W(e[40]),t[30]=W(e[44]),t[31]=W(e[53]),t[32]=W(e[10]),t[33]=W(e[19]),t[34]=W(e[23]),t[35]=W(e[32]),t[36]=W(e[39]),t[37]=W(e[45]),t[38]=W(e[52]),t[39]=W(e[54]),t[40]=W(e[20]),t[41]=W(e[22]),t[42]=W(e[33]),t[43]=W(e[38]),t[44]=W(e[46]),t[45]=W(e[51]),t[46]=W(e[55]),t[47]=W(e[60]),t[48]=W(e[21]),t[49]=W(e[34]),t[50]=W(e[37]),t[51]=W(e[47]),t[52]=W(e[50]),t[53]=W(e[56]),t[54]=W(e[59]),t[55]=W(e[61]),t[56]=W(e[35]),t[57]=W(e[36]),t[58]=W(e[48]),t[59]=W(e[49]),t[60]=W(e[57]),t[61]=W(e[58]),t[62]=W(e[62]),t[63]=W(e[63])}function B(e){const t=.5*Math.cos(.7853975),i=.5*Math.cos(3.14159/16),s=.5*Math.cos(3.14159/8),n=.5*Math.cos(3*3.14159/16),r=.5*Math.cos(.981746875),o=.5*Math.cos(3*3.14159/8),a=.5*Math.cos(1.374445625),l=new Array(4),h=new Array(4),c=new Array(4),d=new Array(4);for(let u=0;u<8;++u){const p=8*u;l[0]=s*e[p+2],l[1]=o*e[p+2],l[2]=s*e[p+6],l[3]=o*e[p+6],h[0]=i*e[p+1]+n*e[p+3]+r*e[p+5]+a*e[p+7],h[1]=n*e[p+1]-a*e[p+3]-i*e[p+5]-r*e[p+7],h[2]=r*e[p+1]-i*e[p+3]+a*e[p+5]+n*e[p+7],h[3]=a*e[p+1]-r*e[p+3]+n*e[p+5]-i*e[p+7],c[0]=t*(e[p+0]+e[p+4]),c[3]=t*(e[p+0]-e[p+4]),c[1]=l[0]+l[3],c[2]=l[1]-l[2],d[0]=c[0]+c[1],d[1]=c[3]+c[2],d[2]=c[3]-c[2],d[3]=c[0]-c[1],e[p+0]=d[0]+h[0],e[p+1]=d[1]+h[1],e[p+2]=d[2]+h[2],e[p+3]=d[3]+h[3],e[p+4]=d[3]-h[3],e[p+5]=d[2]-h[2],e[p+6]=d[1]-h[1],e[p+7]=d[0]-h[0]}for(let u=0;u<8;++u)l[0]=s*e[16+u],l[1]=o*e[16+u],l[2]=s*e[48+u],l[3]=o*e[48+u],h[0]=i*e[8+u]+n*e[24+u]+r*e[40+u]+a*e[56+u],h[1]=n*e[8+u]-a*e[24+u]-i*e[40+u]-r*e[56+u],h[2]=r*e[8+u]-i*e[24+u]+a*e[40+u]+n*e[56+u],h[3]=a*e[8+u]-r*e[24+u]+n*e[40+u]-i*e[56+u],c[0]=t*(e[u]+e[32+u]),c[3]=t*(e[u]-e[32+u]),c[1]=l[0]+l[3],c[2]=l[1]-l[2],d[0]=c[0]+c[1],d[1]=c[3]+c[2],d[2]=c[3]-c[2],d[3]=c[0]-c[1],e[0+u]=d[0]+h[0],e[8+u]=d[1]+h[1],e[16+u]=d[2]+h[2],e[24+u]=d[3]+h[3],e[32+u]=d[3]-h[3],e[40+u]=d[2]-h[2],e[48+u]=d[1]-h[1],e[56+u]=d[0]-h[0]}function Q(e){for(let t=0;t<64;++t){const i=e[0][t],s=e[1][t],n=e[2][t];e[0][t]=i+1.5747*n,e[1][t]=i-.1873*s-.4682*n,e[2][t]=i+1.8556*s}}function M(e,t,s){for(let n=0;n<64;++n)t[s+n]=i.DataUtils.toHalfFloat(T(e[n]))}function T(e){return e<=1?Math.sign(e)*Math.pow(Math.abs(e),2.2):Math.sign(e)*Math.pow(o,Math.abs(e)-1)}function D(e){return new DataView(e.array.buffer,e.offset.value,e.size)}function R(e){const t=e.viewer.buffer.slice(e.offset.value,e.offset.value+e.size),i=new Uint8Array(I(t)),s=new Uint8Array(i.length);return C(i),S(i,s),new DataView(s.buffer)}function P(e){const t=_t(e.array.slice(e.offset.value,e.offset.value+e.size)),i=new Uint8Array(t.length);return C(t),S(t,i),new DataView(i.buffer)}function L(e){const i=e.viewer,s={value:e.offset.value},n=new Uint16Array(e.columns*e.lines*(e.inputChannels.length*e.type)),r=new Uint8Array(8192);let o=0;const a=new Array(e.inputChannels.length);for(let t=0,i=e.inputChannels.length;t<i;t++)a[t]={},a[t].start=o,a[t].end=a[t].start,a[t].nx=e.columns,a[t].ny=e.lines,a[t].size=e.type,o+=a[t].nx*a[t].ny*a[t].size;const l=Z(i,s),h=Z(i,s);if(h>=8192)throw new Error("Something is wrong with PIZ_COMPRESSION BITMAP_SIZE");if(l<=h)for(let e=0;e<h-l+1;e++)r[e+l]=j(i,s);const c=new Uint16Array(t),d=function(e,i){let s=0;for(let n=0;n<t;++n)(0==n||e[n>>3]&1<<(7&n))&&(i[s++]=n);const n=s-1;for(;s<t;)i[s++]=0;return n}(r,c),u=N(i,s);O(e.array,i,s,u,n,o);for(let t=0;t<e.inputChannels.length;++t){const e=a[t];for(let i=0;i<a[t].size;++i)x(n,e.start+i,e.nx,e.size,e.ny,e.nx*e.size,d)}!function(e,t,i){for(let s=0;s<i;++s)t[s]=e[t[s]]}(c,n,o);let p=0;const f=new Uint8Array(n.buffer.byteLength);for(let t=0;t<e.lines;t++)for(let t=0;t<e.inputChannels.length;t++){const e=a[t],i=e.nx*e.size,s=new Uint8Array(n.buffer,2*e.end,2*i);f.set(s,p),p+=2*i,e.end+=i}return new DataView(f.buffer)}function F(e){const t=_t(e.array.slice(e.offset.value,e.offset.value+e.size)),i=e.inputChannels.length*e.lines*e.columns*e.totalBytes,s=new ArrayBuffer(i),n=new DataView(s);let r=0,o=0;const a=new Array(4);for(let i=0;i<e.lines;i++)for(let i=0;i<e.inputChannels.length;i++){let s=0;switch(e.inputChannels[i].pixelType){case 1:a[0]=r,a[1]=a[0]+e.columns,r=a[1]+e.columns;for(let i=0;i<e.columns;++i){s+=t[a[0]++]<<8|t[a[1]++],n.setUint16(o,s,!0),o+=2}break;case 2:a[0]=r,a[1]=a[0]+e.columns,a[2]=a[1]+e.columns,r=a[2]+e.columns;for(let i=0;i<e.columns;++i){s+=t[a[0]++]<<24|t[a[1]++]<<16|t[a[2]++]<<8,n.setUint32(o,s,!0),o+=4}}}return n}function U(e){const t=e.viewer,i={value:e.offset.value},s=new Uint8Array(e.columns*e.lines*(e.inputChannels.length*e.type*2)),n={version:H(t,i),unknownUncompressedSize:H(t,i),unknownCompressedSize:H(t,i),acCompressedSize:H(t,i),dcCompressedSize:H(t,i),rleCompressedSize:H(t,i),rleUncompressedSize:H(t,i),rleRawSize:H(t,i),totalAcUncompressedCount:H(t,i),totalDcUncompressedCount:H(t,i),acCompression:H(t,i)};if(n.version<2)throw new Error("EXRLoader.parse: "+ne.compression+" version "+n.version+" is unsupported");const r=new Array;let o=Z(t,i)-2;for(;o>0;){const e=z(t.buffer,i),s=j(t,i),n=s>>2&3,a=new Int8Array([(s>>4)-1])[0],l=j(t,i);r.push({name:e,index:a,type:l,compression:n}),o-=e.length+3}const a=ne.channels,l=new Array(e.inputChannels.length);for(let t=0;t<e.inputChannels.length;++t){const i=l[t]={},s=a[t];i.name=s.name,i.compression=0,i.decoded=!1,i.type=s.pixelType,i.pLinear=s.pLinear,i.width=e.columns,i.height=e.lines}const h={idx:new Array(3)};for(let t=0;t<e.inputChannels.length;++t){const e=l[t];for(let i=0;i<r.length;++i){const s=r[i];e.name==s.name&&(e.compression=s.compression,s.index>=0&&(h.idx[s.index]=t),e.offset=t)}}let c,d,u;if(n.acCompressedSize>0)switch(n.acCompression){case 0:c=new Uint16Array(n.totalAcUncompressedCount),O(e.array,t,i,n.acCompressedSize,c,n.totalAcUncompressedCount);break;case 1:const s=_t(e.array.slice(i.value,i.value+n.totalAcUncompressedCount));c=new Uint16Array(s.buffer),i.value+=n.totalAcUncompressedCount}if(n.dcCompressedSize>0){const t={array:e.array,offset:i,size:n.dcCompressedSize};d=new Uint16Array(P(t).buffer),i.value+=n.dcCompressedSize}if(n.rleRawSize>0){u=I(_t(e.array.slice(i.value,i.value+n.rleCompressedSize)).buffer),i.value+=n.rleCompressedSize}let p=0;const f=new Array(l.length);for(let e=0;e<f.length;++e)f[e]=new Array;for(let t=0;t<e.lines;++t)for(let t=0;t<l.length;++t)f[t].push(p),p+=l[t].width*e.type*2;!function(e,t,i,s,n,r){let o=new DataView(r.buffer);const a=i[e.idx[0]].width,l=i[e.idx[0]].height,h=Math.floor(a/8),c=Math.ceil(a/8),d=Math.ceil(l/8),u=a-8*(c-1),p=l-8*(d-1),f={value:0},m=new Array(3),g=new Array(3),A=new Array(3),b=new Array(3),v=new Array(3);for(let i=0;i<3;++i)v[i]=t[e.idx[i]],m[i]=i<1?0:m[i-1]+c*d,g[i]=new Float32Array(64),A[i]=new Uint16Array(64),b[i]=new Uint16Array(64*c);for(let t=0;t<d;++t){let r=8;t==d-1&&(r=p);let a=8;for(let e=0;e<c;++e){e==c-1&&(a=u);for(let e=0;e<3;++e)A[e].fill(0),A[e][0]=n[m[e]++],E(f,s,A[e]),k(A[e],g[e]),B(g[e]);Q(g);for(let t=0;t<3;++t)M(g[t],b[t],64*e)}let l=0;for(let s=0;s<3;++s){const n=i[e.idx[s]].type;for(let e=8*t;e<8*t+r;++e){l=v[s][e];for(let t=0;t<h;++t){const i=64*t+8*(7&e);o.setUint16(l+0*n,b[s][i+0],!0),o.setUint16(l+2*n,b[s][i+1],!0),o.setUint16(l+4*n,b[s][i+2],!0),o.setUint16(l+6*n,b[s][i+3],!0),o.setUint16(l+8*n,b[s][i+4],!0),o.setUint16(l+10*n,b[s][i+5],!0),o.setUint16(l+12*n,b[s][i+6],!0),o.setUint16(l+14*n,b[s][i+7],!0),l+=16*n}}if(h!=c)for(let e=8*t;e<8*t+r;++e){const t=v[s][e]+8*h*2*n,i=64*h+8*(7&e);for(let e=0;e<a;++e)o.setUint16(t+2*e*n,b[s][i+e],!0)}}}const y=new Uint16Array(a);o=new DataView(r.buffer);for(let t=0;t<3;++t){i[e.idx[t]].decoded=!0;const s=i[e.idx[t]].type;if(2==i[t].type)for(let e=0;e<l;++e){const i=v[t][e];for(let e=0;e<a;++e)y[e]=o.getUint16(i+2*e*s,!0);for(let e=0;e<a;++e)o.setFloat32(i+2*e*s,W(y[e]),!0)}}}(h,f,l,c,d,s);for(let t=0;t<l.length;++t){const i=l[t];if(!i.decoded){if(2!==i.compression)throw new Error("EXRLoader.parse: unsupported channel compression");{let n=0,r=0;for(let o=0;o<e.lines;++o){let e=f[t][n];for(let t=0;t<i.width;++t){for(let t=0;t<2*i.type;++t)s[e++]=u[r+t*i.width*i.height];r++}n++}}}}return new DataView(s.buffer)}function z(e,t){const i=new Uint8Array(e);let s=0;for(;0!=i[t.value+s];)s+=1;const n=(new TextDecoder).decode(i.slice(t.value,t.value+s));return t.value=t.value+s+1,n}function G(e,t){const i=e.getInt32(t.value,!0);return t.value=t.value+4,i}function N(e,t){const i=e.getUint32(t.value,!0);return t.value=t.value+4,i}function V(e,t){const i=e[t.value];return t.value=t.value+1,i}function j(e,t){const i=e.getUint8(t.value);return t.value=t.value+1,i}const H=function(e,t){let i;return i="getBigInt64"in DataView.prototype?Number(e.getBigInt64(t.value,!0)):e.getUint32(t.value+4,!0)+Number(e.getUint32(t.value,!0)<<32),t.value+=8,i};function q(e,t){const i=e.getFloat32(t.value,!0);return t.value+=4,i}function X(e,t){return i.DataUtils.toHalfFloat(q(e,t))}function W(e){const t=(31744&e)>>10,i=1023&e;return(e>>15?-1:1)*(t?31===t?i?NaN:1/0:Math.pow(2,t-15)*(1+i/1024):i/1024*6103515625e-14)}function Z(e,t){const i=e.getUint16(t.value,!0);return t.value+=2,i}function Y(e,t){return W(Z(e,t))}function _(e,t,i,s,n){return"string"===s||"stringvector"===s||"iccProfile"===s?function(e,t,i){const s=(new TextDecoder).decode(new Uint8Array(e).slice(t.value,t.value+i));return t.value=t.value+i,s}(t,i,n):"chlist"===s?function(e,t,i,s){const n=i.value,r=[];for(;i.value<n+s-1;){const s=z(t,i),n=G(e,i),o=j(e,i);i.value+=3;const a=G(e,i),l=G(e,i);r.push({name:s,pixelType:n,pLinear:o,xSampling:a,ySampling:l})}return i.value+=1,r}(e,t,i,n):"chromaticities"===s?function(e,t){return{redX:q(e,t),redY:q(e,t),greenX:q(e,t),greenY:q(e,t),blueX:q(e,t),blueY:q(e,t),whiteX:q(e,t),whiteY:q(e,t)}}(e,i):"compression"===s?function(e,t){return["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"][j(e,t)]}(e,i):"box2i"===s?function(e,t){return{xMin:G(e,t),yMin:G(e,t),xMax:G(e,t),yMax:G(e,t)}}(e,i):"envmap"===s?function(e,t){return["ENVMAP_LATLONG","ENVMAP_CUBE"][j(e,t)]}(e,i):"tiledesc"===s?function(e,t){const i=N(e,t),s=N(e,t),n=j(e,t);return{xSize:i,ySize:s,levelMode:["ONE_LEVEL","MIPMAP_LEVELS","RIPMAP_LEVELS"][15&n],roundingMode:["ROUND_DOWN","ROUND_UP"][n>>4]}}(e,i):"lineOrder"===s?function(e,t){return["INCREASING_Y","DECREASING_Y","RANDOM_Y"][j(e,t)]}(e,i):"float"===s?q(e,i):"v2f"===s?function(e,t){return[q(e,t),q(e,t)]}(e,i):"v3f"===s?function(e,t){return[q(e,t),q(e,t),q(e,t)]}(e,i):"int"===s?G(e,i):"rational"===s?function(e,t){return[G(e,t),N(e,t)]}(e,i):"timecode"===s?function(e,t){return[N(e,t),N(e,t)]}(e,i):"preview"===s?(i.value+=n,"skipped"):void(i.value+=n)}function K(e,t,i){let s=0;switch(e.levelMode){case"ONE_LEVEL":s=1;break;case"MIPMAP_LEVELS":s=function(e,t){const i=Math.log2(e);return"ROUND_DOWN"==t?Math.floor(i):Math.ceil(i)}(Math.max(t,i),e.roundingMode)+1;break;case"RIPMAP_LEVELS":throw new Error("THREE.EXRLoader: RIPMAP_LEVELS tiles currently unsupported.")}return s}function J(e,t,i,s){const n=new Array(e);for(let r=0;r<e;r++){const e=1<<r;let o=t/e|0;"ROUND_UP"==s&&o*e<t&&(o+=1);const a=Math.max(o,1);n[r]=(a+i-1)/i|0}return n}function $(){const e=this,t=e.offset,i={value:0};for(let s=0;s<e.tileCount;s++){const s=G(e.viewer,t),n=G(e.viewer,t);t.value+=8,e.size=N(e.viewer,t);const r=s*e.blockWidth,o=n*e.blockHeight;e.columns=r+e.blockWidth>e.width?e.width-r:e.blockWidth,e.lines=o+e.blockHeight>e.height?e.height-o:e.blockHeight;const a=e.columns*e.totalBytes,l=e.size<e.lines*a?e.uncompress(e):D(e);t.value+=e.size;for(let t=0;t<e.lines;t++){const s=t*e.columns*e.totalBytes;for(let n=0;n<e.inputChannels.length;n++){const a=ne.channels[n].name,h=e.channelByteOffsets[a]*e.columns,c=e.decodeChannels[a];if(void 0===c)continue;i.value=s+h;const d=(e.height-(1+o+t))*e.outLineWidth;for(let t=0;t<e.columns;t++){const s=d+(t+r)*e.outputChannels+c;e.byteArray[s]=e.getter(l,i)}}}}}function ee(){const e=this,t=e.offset,i={value:0};for(let s=0;s<e.height/e.blockHeight;s++){const n=G(e.viewer,t)-ne.dataWindow.yMin;e.size=N(e.viewer,t),e.lines=n+e.blockHeight>e.height?e.height-n:e.blockHeight;const r=e.columns*e.totalBytes,o=e.size<e.lines*r?e.uncompress(e):D(e);t.value+=e.size;for(let t=0;t<e.blockHeight;t++){const n=s*e.blockHeight,a=t+e.scanOrder(n);if(a>=e.height)continue;const l=t*r,h=(e.height-1-a)*e.outLineWidth;for(let t=0;t<e.inputChannels.length;t++){const s=ne.channels[t].name,n=e.channelByteOffsets[s]*e.columns,r=e.decodeChannels[s];if(void 0!==r){i.value=l+n;for(let t=0;t<e.columns;t++){const s=h+t*e.outputChannels+r;e.byteArray[s]=e.getter(o,i)}}}}}}const te={value:0},ie=new DataView(e),se=new Uint8Array(e),ne=function(e,t,i){const s={};if(20000630!=e.getUint32(0,!0))throw new Error("THREE.EXRLoader: Provided file doesn't appear to be in OpenEXR format.");s.version=e.getUint8(4);const n=e.getUint8(5);s.spec={singleTile:!!(2&n),longName:!!(4&n),deepFormat:!!(8&n),multiPart:!!(16&n)},i.value=8;let r=!0;for(;r;){const n=z(t,i);if(0==n)r=!1;else{const r=z(t,i),o=_(e,t,i,r,N(e,i));void 0===o?console.warn(`THREE.EXRLoader: Skipped unknown header attribute type '${r}'.`):s[n]=o}}if(-7&n)throw console.error("THREE.EXRHeader:",s),new Error("THREE.EXRLoader: Provided file is currently unsupported.");return s}(ie,e,te),re=function(e,t,s,n,r){const o={size:0,viewer:t,array:s,offset:n,width:e.dataWindow.xMax-e.dataWindow.xMin+1,height:e.dataWindow.yMax-e.dataWindow.yMin+1,inputChannels:e.channels,channelByteOffsets:{},scanOrder:null,totalBytes:null,columns:null,lines:null,type:null,uncompress:null,getter:null,format:null,colorSpace:i.LinearSRGBColorSpace};switch(e.compression){case"NO_COMPRESSION":o.blockHeight=1,o.uncompress=D;break;case"RLE_COMPRESSION":o.blockHeight=1,o.uncompress=R;break;case"ZIPS_COMPRESSION":o.blockHeight=1,o.uncompress=P;break;case"ZIP_COMPRESSION":o.blockHeight=16,o.uncompress=P;break;case"PIZ_COMPRESSION":o.blockHeight=32,o.uncompress=L;break;case"PXR24_COMPRESSION":o.blockHeight=16,o.uncompress=F;break;case"DWAA_COMPRESSION":o.blockHeight=32,o.uncompress=U;break;case"DWAB_COMPRESSION":o.blockHeight=256,o.uncompress=U;break;default:throw new Error("EXRLoader.parse: "+e.compression+" is unsupported")}const a={};for(const t of e.channels)switch(t.name){case"Y":case"R":case"G":case"B":case"A":a[t.name]=!0,o.type=t.pixelType}let l=!1;if(a.R&&a.G&&a.B)l=!a.A,o.outputChannels=4,o.decodeChannels={R:0,G:1,B:2,A:3};else{if(!a.Y)throw new Error("EXRLoader.parse: file contains unsupported data channels.");o.outputChannels=1,o.decodeChannels={Y:0}}if(1==o.type)switch(r){case i.FloatType:o.getter=Y;break;case i.HalfFloatType:o.getter=Z}else{if(2!=o.type)throw new Error("EXRLoader.parse: unsupported pixelType "+o.type+" for "+e.compression+".");switch(r){case i.FloatType:o.getter=q;break;case i.HalfFloatType:o.getter=X}}o.columns=o.width;const h=o.width*o.height*o.outputChannels;switch(r){case i.FloatType:o.byteArray=new Float32Array(h),l&&o.byteArray.fill(1,0,h);break;case i.HalfFloatType:o.byteArray=new Uint16Array(h),l&&o.byteArray.fill(15360,0,h);break;default:console.error("THREE.EXRLoader: unsupported type: ",r)}let c=0;for(const t of e.channels)void 0!==o.decodeChannels[t.name]&&(o.channelByteOffsets[t.name]=c),c+=2*t.pixelType;if(o.totalBytes=c,o.outLineWidth=o.width*o.outputChannels,"INCREASING_Y"===e.lineOrder?o.scanOrder=e=>e:o.scanOrder=e=>o.height-1-e,4==o.outputChannels?(o.format=i.RGBAFormat,o.colorSpace=i.LinearSRGBColorSpace):(o.format=i.RedFormat,o.colorSpace=i.NoColorSpace),e.spec.singleTile){o.blockHeight=e.tiles.ySize,o.blockWidth=e.tiles.xSize;const i=K(e.tiles,o.width,o.height),s=J(i,o.width,e.tiles.xSize,e.tiles.roundingMode),r=J(i,o.height,e.tiles.ySize,e.tiles.roundingMode);o.tileCount=s[0]*r[0];for(let e=0;e<i;e++)for(let i=0;i<r[e];i++)for(let i=0;i<s[e];i++)H(t,n);o.decode=$.bind(o)}else{o.blockWidth=o.width;const e=Math.ceil(o.height/o.blockHeight);for(let i=0;i<e;i++)H(t,n);o.decode=ee.bind(o)}return o}(ne,ie,se,te,this.type);return re.decode(),{header:ne,width:re.width,height:re.height,data:re.byteArray,format:re.format,colorSpace:re.colorSpace,type:this.type}}setDataType(e){return this.type=e,this}load(e,t,s,n){return super.load(e,(function(e,s){e.colorSpace=s.colorSpace,e.minFilter=i.LinearFilter,e.magFilter=i.LinearFilter,e.generateMipmaps=!1,e.flipY=!1,t&&t(e,s)}),s,n)}}class Gi{constructor(e=4){this.pool=e,this.queue=[],this.workers=[],this.workersResolve=[],this.workerStatus=0}_initWorker(e){if(!this.workers[e]){const t=this.workerCreator();t.addEventListener("message",this._onMessage.bind(this,e)),this.workers[e]=t}}_getIdleWorker(){for(let e=0;e<this.pool;e++)if(!(this.workerStatus&1<<e))return e;return-1}_onMessage(e,t){const i=this.workersResolve[e];if(i&&i(t),this.queue.length){const{resolve:t,msg:i,transfer:s}=this.queue.shift();this.workersResolve[e]=t,this.workers[e].postMessage(i,s)}else this.workerStatus^=1<<e}setWorkerCreator(e){this.workerCreator=e}setWorkerLimit(e){this.pool=e}postMessage(e,t){return new Promise((i=>{const s=this._getIdleWorker();-1!==s?(this._initWorker(s),this.workerStatus|=1<<s,this.workersResolve[s]=i,this.workers[s].postMessage(e,t)):this.queue.push({resolve:i,msg:e,transfer:t})}))}dispose(){this.workers.forEach((e=>e.terminate())),this.workersResolve.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0}}const Ni=9,Vi=15,ji=16,Hi=22,qi=37,Xi=43,Wi=76,Zi=83,Yi=97,_i=100,Ki=103,Ji=109,$i=165,es=166,ts=1000066e3;class is{constructor(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=0,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:0,descriptorBlockSize:0,versionNumber:2,colorModel:0,colorPrimaries:1,transferFunction:2,flags:0,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}}class ss{constructor(e,t,i,s){this._dataView=new DataView(e.buffer,e.byteOffset+t,i),this._littleEndian=s,this._offset=0}_nextUint8(){const e=this._dataView.getUint8(this._offset);return this._offset+=1,e}_nextUint16(){const e=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,e}_nextUint32(){const e=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,e}_nextUint64(){const e=this._dataView.getUint32(this._offset,this._littleEndian)+2**32*this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,e}_nextInt32(){const e=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,e}_skip(e){return this._offset+=e,this}_scan(e,t=0){const i=this._offset;let s=0;for(;this._dataView.getUint8(this._offset)!==t&&s<e;)s++,this._offset++;return s<e&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+i,s)}}const ns=[171,75,84,88,32,50,48,187,13,10,26,10];function rs(e){return"undefined"!=typeof TextDecoder?(new TextDecoder).decode(e):Buffer.from(e).toString("utf8")}let os,as,ls;const hs={env:{emscripten_notify_memory_growth:function(e){ls=new Uint8Array(as.exports.memory.buffer)}}};class cs{init(){return os||(os="undefined"!=typeof fetch?fetch("data:application/wasm;base64,"+ds).then((e=>e.arrayBuffer())).then((e=>WebAssembly.instantiate(e,hs))).then(this._init):WebAssembly.instantiate(Buffer.from(ds,"base64"),hs).then(this._init),os)}_init(e){as=e.instance,hs.env.emscripten_notify_memory_growth(0)}decode(e,t=0){if(!as)throw new Error("ZSTDDecoder: Await .init() before decoding.");const i=e.byteLength,s=as.exports.malloc(i);ls.set(e,s),t=t||Number(as.exports.ZSTD_findDecompressedSize(s,i));const n=as.exports.malloc(t),r=as.exports.ZSTD_decompress(n,t,s,i),o=ls.slice(n,n+r);return as.exports.free(s),as.exports.free(n),o}}const ds="AGFzbQEAAAABpQEVYAF/AX9gAn9/AGADf39/AX9gBX9/f39/AX9gAX8AYAJ/fwF/YAR/f39/AX9gA39/fwBgBn9/f39/fwF/YAd/f39/f39/AX9gAn9/AX5gAn5+AX5gAABgBX9/f39/AGAGf39/f39/AGAIf39/f39/f38AYAl/f39/f39/f38AYAABf2AIf39/f39/f38Bf2ANf39/f39/f39/f39/fwF/YAF/AX4CJwEDZW52H2Vtc2NyaXB0ZW5fbm90aWZ5X21lbW9yeV9ncm93dGgABANpaAEFAAAFAgEFCwACAQABAgIFBQcAAwABDgsBAQcAEhMHAAUBDAQEAAANBwQCAgYCBAgDAwMDBgEACQkHBgICAAYGAgQUBwYGAwIGAAMCAQgBBwUGCgoEEQAEBAEIAwgDBQgDEA8IAAcABAUBcAECAgUEAQCAAgYJAX8BQaCgwAILB2AHBm1lbW9yeQIABm1hbGxvYwAoBGZyZWUAJgxaU1REX2lzRXJyb3IAaBlaU1REX2ZpbmREZWNvbXByZXNzZWRTaXplAFQPWlNURF9kZWNvbXByZXNzAEoGX3N0YXJ0ACQJBwEAQQELASQKussBaA8AIAAgACgCBCABajYCBAsZACAAKAIAIAAoAgRBH3F0QQAgAWtBH3F2CwgAIABBiH9LC34BBH9BAyEBIAAoAgQiA0EgTQRAIAAoAggiASAAKAIQTwRAIAAQDQ8LIAAoAgwiAiABRgRAQQFBAiADQSBJGw8LIAAgASABIAJrIANBA3YiBCABIARrIAJJIgEbIgJrIgQ2AgggACADIAJBA3RrNgIEIAAgBCgAADYCAAsgAQsUAQF/IAAgARACIQIgACABEAEgAgv3AQECfyACRQRAIABCADcCACAAQQA2AhAgAEIANwIIQbh/DwsgACABNgIMIAAgAUEEajYCECACQQRPBEAgACABIAJqIgFBfGoiAzYCCCAAIAMoAAA2AgAgAUF/ai0AACIBBEAgAEEIIAEQFGs2AgQgAg8LIABBADYCBEF/DwsgACABNgIIIAAgAS0AACIDNgIAIAJBfmoiBEEBTQRAIARBAWtFBEAgACABLQACQRB0IANyIgM2AgALIAAgAS0AAUEIdCADajYCAAsgASACakF/ai0AACIBRQRAIABBADYCBEFsDwsgAEEoIAEQFCACQQN0ams2AgQgAgsWACAAIAEpAAA3AAAgACABKQAINwAICy8BAX8gAUECdEGgHWooAgAgACgCAEEgIAEgACgCBGprQR9xdnEhAiAAIAEQASACCyEAIAFCz9bTvtLHq9lCfiAAfEIfiUKHla+vmLbem55/fgsdAQF/IAAoAgggACgCDEYEfyAAKAIEQSBGBUEACwuCBAEDfyACQYDAAE8EQCAAIAEgAhBnIAAPCyAAIAJqIQMCQCAAIAFzQQNxRQRAAkAgAkEBSARAIAAhAgwBCyAAQQNxRQRAIAAhAgwBCyAAIQIDQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADTw0BIAJBA3ENAAsLAkAgA0F8cSIEQcAASQ0AIAIgBEFAaiIFSw0AA0AgAiABKAIANgIAIAIgASgCBDYCBCACIAEoAgg2AgggAiABKAIMNgIMIAIgASgCEDYCECACIAEoAhQ2AhQgAiABKAIYNgIYIAIgASgCHDYCHCACIAEoAiA2AiAgAiABKAIkNgIkIAIgASgCKDYCKCACIAEoAiw2AiwgAiABKAIwNgIwIAIgASgCNDYCNCACIAEoAjg2AjggAiABKAI8NgI8IAFBQGshASACQUBrIgIgBU0NAAsLIAIgBE8NAQNAIAIgASgCADYCACABQQRqIQEgAkEEaiICIARJDQALDAELIANBBEkEQCAAIQIMAQsgA0F8aiIEIABJBEAgACECDAELIAAhAgNAIAIgAS0AADoAACACIAEtAAE6AAEgAiABLQACOgACIAIgAS0AAzoAAyABQQRqIQEgAkEEaiICIARNDQALCyACIANJBEADQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADRw0ACwsgAAsMACAAIAEpAAA3AAALQQECfyAAKAIIIgEgACgCEEkEQEEDDwsgACAAKAIEIgJBB3E2AgQgACABIAJBA3ZrIgE2AgggACABKAAANgIAQQALDAAgACABKAIANgAAC/cCAQJ/AkAgACABRg0AAkAgASACaiAASwRAIAAgAmoiBCABSw0BCyAAIAEgAhALDwsgACABc0EDcSEDAkACQCAAIAFJBEAgAwRAIAAhAwwDCyAAQQNxRQRAIAAhAwwCCyAAIQMDQCACRQ0EIAMgAS0AADoAACABQQFqIQEgAkF/aiECIANBAWoiA0EDcQ0ACwwBCwJAIAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQh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ASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigC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C0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdB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IAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY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wOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEE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",us=new WeakMap;let ps,fs=0;class ms extends i.Loader{constructor(e){super(e),this.transcoderPath="",this.transcoderBinary=null,this.transcoderPending=null,this.workerPool=new Gi,this.workerSourceURL="",this.workerConfig=null,"undefined"!=typeof MSC_TRANSCODER&&console.warn('THREE.KTX2Loader: Please update to latest "basis_transcoder". "msc_basis_transcoder" is no longer supported in three.js r125+.')}setTranscoderPath(e){return this.transcoderPath=e,this}setWorkerLimit(e){return this.workerPool.setWorkerLimit(e),this}async detectSupportAsync(e){return this.workerConfig={astcSupported:await e.hasFeatureAsync("texture-compression-astc"),astcHDRSupported:!1,etc1Supported:await e.hasFeatureAsync("texture-compression-etc1"),etc2Supported:await e.hasFeatureAsync("texture-compression-etc2"),dxtSupported:await e.hasFeatureAsync("texture-compression-bc"),bptcSupported:await e.hasFeatureAsync("texture-compression-bptc"),pvrtcSupported:await e.hasFeatureAsync("texture-compression-pvrtc")},this}detectSupport(e){return!0===e.isWebGPURenderer?this.workerConfig={astcSupported:e.hasFeature("texture-compression-astc"),astcHDRSupported:!1,etc1Supported:e.hasFeature("texture-compression-etc1"),etc2Supported:e.hasFeature("texture-compression-etc2"),dxtSupported:e.hasFeature("texture-compression-bc"),bptcSupported:e.hasFeature("texture-compression-bptc"),pvrtcSupported:e.hasFeature("texture-compression-pvrtc")}:this.workerConfig={astcSupported:e.extensions.has("WEBGL_compressed_texture_astc"),astcHDRSupported:e.extensions.has("WEBGL_compressed_texture_astc")&&e.extensions.get("WEBGL_compressed_texture_astc").getSupportedProfiles().includes("hdr"),etc1Supported:e.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:e.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:e.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:e.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:e.extensions.has("WEBGL_compressed_texture_pvrtc")||e.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},this}init(){if(!this.transcoderPending){const e=new i.FileLoader(this.manager);e.setPath(this.transcoderPath),e.setWithCredentials(this.withCredentials);const t=e.loadAsync("basis_transcoder.js"),s=new i.FileLoader(this.manager);s.setPath(this.transcoderPath),s.setResponseType("arraybuffer"),s.setWithCredentials(this.withCredentials);const n=s.loadAsync("basis_transcoder.wasm");this.transcoderPending=Promise.all([t,n]).then((([e,t])=>{const i=ms.BasisWorker.toString(),s=["/* constants */","let _EngineFormat = "+JSON.stringify(ms.EngineFormat),"let _EngineType = "+JSON.stringify(ms.EngineType),"let _TranscoderFormat = "+JSON.stringify(ms.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(ms.BasisFormat),"/* basis_transcoder.js */",e,"/* worker */",i.substring(i.indexOf("{")+1,i.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([s])),this.transcoderBinary=t,this.workerPool.setWorkerCreator((()=>{const e=new Worker(this.workerSourceURL),t=this.transcoderBinary.slice(0);return e.postMessage({type:"init",config:this.workerConfig,transcoderBinary:t},[t]),e}))})),fs>0&&console.warn("THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues. Use a single KTX2Loader instance, or call .dispose() on old instances."),fs++}return this.transcoderPending}load(e,t,s,n){if(null===this.workerConfig)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");const r=new i.FileLoader(this.manager);r.setResponseType("arraybuffer"),r.setWithCredentials(this.withCredentials),r.load(e,(e=>{this.parse(e,t,n)}),s,n)}parse(e,t,i){if(null===this.workerConfig)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");if(us.has(e)){return us.get(e).promise.then(t).catch(i)}this._createTexture(e).then((e=>t?t(e):null)).catch(i)}_createTextureFrom(e,t){const{type:s,error:n,data:{faces:r,width:o,height:a,format:l,type:h,dfdFlags:c}}=e;if("error"===s)return Promise.reject(n);let d;if(6===t.faceCount)d=new i.CompressedCubeTexture(r,l,h);else{const e=r[0].mipmaps;d=t.layerCount>1?new i.CompressedArrayTexture(e,o,a,t.layerCount,l,h):new i.CompressedTexture(e,o,a,l,h)}return d.minFilter=1===r[0].mipmaps.length?i.LinearFilter:i.LinearMipmapLinearFilter,d.magFilter=i.LinearFilter,d.generateMipmaps=!1,d.needsUpdate=!0,d.colorSpace=vs(t),d.premultiplyAlpha=!!(1&c),d}async _createTexture(e,t={}){const s=function(e){const t=new Uint8Array(e.buffer,e.byteOffset,ns.length);if(t[0]!==ns[0]||t[1]!==ns[1]||t[2]!==ns[2]||t[3]!==ns[3]||t[4]!==ns[4]||t[5]!==ns[5]||t[6]!==ns[6]||t[7]!==ns[7]||t[8]!==ns[8]||t[9]!==ns[9]||t[10]!==ns[10]||t[11]!==ns[11])throw new Error("Missing KTX 2.0 identifier.");const i=new is,s=17*Uint32Array.BYTES_PER_ELEMENT,n=new ss(e,ns.length,s,!0);i.vkFormat=n._nextUint32(),i.typeSize=n._nextUint32(),i.pixelWidth=n._nextUint32(),i.pixelHeight=n._nextUint32(),i.pixelDepth=n._nextUint32(),i.layerCount=n._nextUint32(),i.faceCount=n._nextUint32();const r=n._nextUint32();i.supercompressionScheme=n._nextUint32();const o=n._nextUint32(),a=n._nextUint32(),l=n._nextUint32(),h=n._nextUint32(),c=n._nextUint64(),d=n._nextUint64(),u=new ss(e,ns.length+s,3*r*8,!0);for(let t=0;t<r;t++)i.levels.push({levelData:new Uint8Array(e.buffer,e.byteOffset+u._nextUint64(),u._nextUint64()),uncompressedByteLength:u._nextUint64()});const p=new ss(e,o,a,!0),f={vendorId:p._skip(4)._nextUint16(),descriptorType:p._nextUint16(),versionNumber:p._nextUint16(),descriptorBlockSize:p._nextUint16(),colorModel:p._nextUint8(),colorPrimaries:p._nextUint8(),transferFunction:p._nextUint8(),flags:p._nextUint8(),texelBlockDimension:[p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8()],bytesPlane:[p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8()],samples:[]},m=(f.descriptorBlockSize/4-6)/4;for(let e=0;e<m;e++){const t={bitOffset:p._nextUint16(),bitLength:p._nextUint8(),channelType:p._nextUint8(),samplePosition:[p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};64&t.channelType?(t.sampleLower=p._nextInt32(),t.sampleUpper=p._nextInt32()):(t.sampleLower=p._nextUint32(),t.sampleUpper=p._nextUint32()),f.samples[e]=t}i.dataFormatDescriptor.length=0,i.dataFormatDescriptor.push(f);const g=new ss(e,l,h,!0);for(;g._offset<h;){const e=g._nextUint32(),t=g._scan(e),s=rs(t),n=g._scan(e-t.byteLength);i.keyValue[s]=s.match(/^ktx/i)?rs(n):n,g._offset%4&&g._skip(4-g._offset%4)}if(d<=0)return i;const A=new ss(e,c,d,!0),b=A._nextUint16(),v=A._nextUint16(),y=A._nextUint32(),w=A._nextUint32(),x=A._nextUint32(),O=A._nextUint32(),C=[];for(let e=0;e<r;e++)C.push({imageFlags:A._nextUint32(),rgbSliceByteOffset:A._nextUint32(),rgbSliceByteLength:A._nextUint32(),alphaSliceByteOffset:A._nextUint32(),alphaSliceByteLength:A._nextUint32()});const S=c+A._offset,I=S+y,E=I+w,k=E+x,B=new Uint8Array(e.buffer,e.byteOffset+S,y),Q=new Uint8Array(e.buffer,e.byteOffset+I,w),M=new Uint8Array(e.buffer,e.byteOffset+E,x),T=new Uint8Array(e.buffer,e.byteOffset+k,O);return i.globalData={endpointCount:b,selectorCount:v,imageDescs:C,endpointsData:B,selectorsData:Q,tablesData:M,extendedData:T},i}(new Uint8Array(e)),n=s.vkFormat===ts&&167===s.dataFormatDescriptor[0].colorModel;if(!(0===s.vkFormat||n&&!this.workerConfig.astcHDRSupported))return async function(e){const{vkFormat:t}=e;if(void 0===As[t])throw new Error("THREE.KTX2Loader: Unsupported vkFormat.");let s;2===e.supercompressionScheme&&(ps||(ps=new Promise((async e=>{const t=new cs;await t.init(),e(t)}))),s=await ps);const n=[];for(let r=0;r<e.levels.length;r++){const o=Math.max(1,e.pixelWidth>>r),a=Math.max(1,e.pixelHeight>>r),l=e.pixelDepth?Math.max(1,e.pixelDepth>>r):0,h=e.levels[r];let c,d;if(0===e.supercompressionScheme)c=h.levelData;else{if(2!==e.supercompressionScheme)throw new Error("THREE.KTX2Loader: Unsupported supercompressionScheme.");c=s.decode(h.levelData,h.uncompressedByteLength)}d=bs[t]===i.FloatType?new Float32Array(c.buffer,c.byteOffset,c.byteLength/Float32Array.BYTES_PER_ELEMENT):bs[t]===i.HalfFloatType?new Uint16Array(c.buffer,c.byteOffset,c.byteLength/Uint16Array.BYTES_PER_ELEMENT):c,n.push({data:d,width:o,height:a,depth:l})}let r;if(gs.has(As[t]))r=0===e.pixelDepth?new i.DataTexture(n[0].data,e.pixelWidth,e.pixelHeight):new i.Data3DTexture(n[0].data,e.pixelWidth,e.pixelHeight,e.pixelDepth);else{if(e.pixelDepth>0)throw new Error("THREE.KTX2Loader: Unsupported pixelDepth.");r=new i.CompressedTexture(n,e.pixelWidth,e.pixelHeight),r.minFilter=1===n.length?i.LinearFilter:i.LinearMipmapLinearFilter,r.magFilter=i.LinearFilter}return r.mipmaps=n,r.type=bs[t],r.format=As[t],r.colorSpace=vs(e),r.needsUpdate=!0,Promise.resolve(r)}(s);const r=t,o=this.init().then((()=>this.workerPool.postMessage({type:"transcode",buffer:e,taskConfig:r},[e]))).then((e=>this._createTextureFrom(e.data,s)));return us.set(e,{promise:o}),o}dispose(){return this.workerPool.dispose(),this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),fs--,this}}ms.BasisFormat={ETC1S:0,UASTC:1,UASTC_HDR:2},ms.TranscoderFormat={ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16,BC6H:22,RGB_HALF:24,RGBA_HALF:25},ms.EngineFormat={RGBAFormat:i.RGBAFormat,RGBA_ASTC_4x4_Format:i.RGBA_ASTC_4x4_Format,RGB_BPTC_UNSIGNED_Format:i.RGB_BPTC_UNSIGNED_Format,RGBA_BPTC_Format:i.RGBA_BPTC_Format,RGBA_ETC2_EAC_Format:i.RGBA_ETC2_EAC_Format,RGBA_PVRTC_4BPPV1_Format:i.RGBA_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT5_Format:i.RGBA_S3TC_DXT5_Format,RGB_ETC1_Format:i.RGB_ETC1_Format,RGB_ETC2_Format:i.RGB_ETC2_Format,RGB_PVRTC_4BPPV1_Format:i.RGB_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT1_Format:i.RGBA_S3TC_DXT1_Format},ms.EngineType={UnsignedByteType:i.UnsignedByteType,HalfFloatType:i.HalfFloatType,FloatType:i.FloatType},ms.BasisWorker=function(){let e,t,i;const s=_EngineFormat,n=_EngineType,r=_TranscoderFormat,o=_BasisFormat;self.addEventListener("message",(function(s){const r=s.data;switch(r.type){case"init":e=r.config,a=r.transcoderBinary,t=new Promise((e=>{i={wasmBinary:a,onRuntimeInitialized:e},BASIS(i)})).then((()=>{i.initializeBasis(),void 0===i.KTX2File&&console.warn("THREE.KTX2Loader: Please update Basis Universal transcoder.")}));break;case"transcode":t.then((()=>{try{const{faces:t,buffers:s,width:a,height:d,hasAlpha:u,format:p,type:f,dfdFlags:m}=function(t){const s=new i.KTX2File(new Uint8Array(t));function r(){s.close(),s.delete()}if(!s.isValid())throw r(),new Error("THREE.KTX2Loader:\tInvalid or unsupported .ktx2 file");let a;if(s.isUASTC())a=o.UASTC;else if(s.isETC1S())a=o.ETC1S;else{if(!s.isHDR())throw new Error("THREE.KTX2Loader: Unknown Basis encoding");a=o.UASTC_HDR}const d=s.getWidth(),u=s.getHeight(),p=s.getLayers()||1,f=s.getLevels(),m=s.getFaces(),g=s.getHasAlpha(),A=s.getDFDFlags(),{transcoderFormat:b,engineFormat:v,engineType:y}=function(t,i,s,n){const r=l[t];for(let o=0;o<r.length;o++){const a=r[o];if(a.if&&!e[a.if])continue;if(!a.basisFormat.includes(t))continue;if(n&&a.transcoderFormat.length<2)continue;if(a.needsPowerOfTwo&&(!h(i)||!h(s)))continue;return{transcoderFormat:a.transcoderFormat[n?1:0],engineFormat:a.engineFormat[n?1:0],engineType:a.engineType[0]}}throw new Error("THREE.KTX2Loader: Failed to identify transcoding target.")}(a,d,u,g);if(!d||!u||!f)throw r(),new Error("THREE.KTX2Loader:\tInvalid texture");if(!s.startTranscoding())throw r(),new Error("THREE.KTX2Loader: .startTranscoding failed");const w=[],x=[];for(let e=0;e<m;e++){const t=[];for(let i=0;i<f;i++){const o=[];let a,l;for(let t=0;t<p;t++){const h=s.getImageLevelInfo(i,t,e);0!==e||0!==i||0!==t||h.origWidth%4==0&&h.origHeight%4==0||console.warn("THREE.KTX2Loader: ETC1S and UASTC textures should use multiple-of-four dimensions."),f>1?(a=h.origWidth,l=h.origHeight):(a=h.width,l=h.height);let c=new Uint8Array(s.getImageTranscodedSizeInBytes(i,t,0,b));const d=s.transcodeImage(c,i,t,e,b,0,-1,-1);if(y===n.HalfFloatType&&(c=new Uint16Array(c.buffer,c.byteOffset,c.byteLength/Uint16Array.BYTES_PER_ELEMENT)),!d)throw r(),new Error("THREE.KTX2Loader: .transcodeImage failed.");o.push(c)}const h=c(o);t.push({data:h,width:a,height:l}),x.push(h.buffer)}w.push({mipmaps:t,width:d,height:u,format:v,type:y})}return r(),{faces:w,buffers:x,width:d,height:u,hasAlpha:g,dfdFlags:A,format:v,type:y}}(r.buffer);self.postMessage({type:"transcode",id:r.id,data:{faces:t,width:a,height:d,hasAlpha:u,format:p,type:f,dfdFlags:m}},s)}catch(e){console.error(e),self.postMessage({type:"error",id:r.id,error:e.message})}}))}var a}));const a=[{if:"astcSupported",basisFormat:[o.UASTC],transcoderFormat:[r.ASTC_4x4,r.ASTC_4x4],engineFormat:[s.RGBA_ASTC_4x4_Format,s.RGBA_ASTC_4x4_Format],engineType:[n.UnsignedByteType],priorityETC1S:1/0,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[o.ETC1S,o.UASTC],transcoderFormat:[r.BC7_M5,r.BC7_M5],engineFormat:[s.RGBA_BPTC_Format,s.RGBA_BPTC_Format],engineType:[n.UnsignedByteType],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[o.ETC1S,o.UASTC],transcoderFormat:[r.BC1,r.BC3],engineFormat:[s.RGBA_S3TC_DXT1_Format,s.RGBA_S3TC_DXT5_Format],engineType:[n.UnsignedByteType],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[o.ETC1S,o.UASTC],transcoderFormat:[r.ETC1,r.ETC2],engineFormat:[s.RGB_ETC2_Format,s.RGBA_ETC2_EAC_Format],engineType:[n.UnsignedByteType],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[o.ETC1S,o.UASTC],transcoderFormat:[r.ETC1],engineFormat:[s.RGB_ETC1_Format],engineType:[n.UnsignedByteType],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[o.ETC1S,o.UASTC],transcoderFormat:[r.PVRTC1_4_RGB,r.PVRTC1_4_RGBA],engineFormat:[s.RGB_PVRTC_4BPPV1_Format,s.RGBA_PVRTC_4BPPV1_Format],engineType:[n.UnsignedByteType],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0},{if:"bptcSupported",basisFormat:[o.UASTC_HDR],transcoderFormat:[r.BC6H],engineFormat:[s.RGB_BPTC_UNSIGNED_Format],engineType:[n.HalfFloatType],priorityHDR:1,needsPowerOfTwo:!1},{basisFormat:[o.ETC1S,o.UASTC],transcoderFormat:[r.RGBA32,r.RGBA32],engineFormat:[s.RGBAFormat,s.RGBAFormat],engineType:[n.UnsignedByteType,n.UnsignedByteType],priorityETC1S:100,priorityUASTC:100,needsPowerOfTwo:!1},{basisFormat:[o.UASTC_HDR],transcoderFormat:[r.RGBA_HALF],engineFormat:[s.RGBAFormat],engineType:[n.HalfFloatType],priorityHDR:100,needsPowerOfTwo:!1}],l={[o.ETC1S]:a.filter((e=>e.basisFormat.includes(o.ETC1S))).sort(((e,t)=>e.priorityUASTC-t.priorityUASTC)),[o.UASTC]:a.filter((e=>e.basisFormat.includes(o.UASTC))).sort(((e,t)=>e.priorityUASTC-t.priorityUASTC)),[o.UASTC_HDR]:a.filter((e=>e.basisFormat.includes(o.UASTC_HDR))).sort(((e,t)=>e.priorityHDR-t.priorityHDR))};function h(e){return e<=2||!(e&e-1)&&0!==e}function c(e){if(1===e.length)return e[0];let t=0;for(let i=0;i<e.length;i++){t+=e[i].byteLength}const i=new Uint8Array(t);let s=0;for(let t=0;t<e.length;t++){const n=e[t];i.set(n,s),s+=n.byteLength}return i}};const gs=new Set([i.RGBAFormat,i.RGFormat,i.RedFormat]),As={[Ji]:i.RGBAFormat,[Yi]:i.RGBAFormat,[qi]:i.RGBAFormat,[Xi]:i.RGBAFormat,[Ki]:i.RGFormat,[Zi]:i.RGFormat,[ji]:i.RGFormat,[Hi]:i.RGFormat,[_i]:i.RedFormat,[Wi]:i.RedFormat,[Vi]:i.RedFormat,[Ni]:i.RedFormat,[ts]:i.RGBA_ASTC_4x4_Format,[es]:i.RGBA_ASTC_6x6_Format,[$i]:i.RGBA_ASTC_6x6_Format},bs={[Ji]:i.FloatType,[Yi]:i.HalfFloatType,[qi]:i.UnsignedByteType,[Xi]:i.UnsignedByteType,[Ki]:i.FloatType,[Zi]:i.HalfFloatType,[ji]:i.UnsignedByteType,[Hi]:i.UnsignedByteType,[_i]:i.FloatType,[Wi]:i.HalfFloatType,[Vi]:i.UnsignedByteType,[Ni]:i.UnsignedByteType,[ts]:i.HalfFloatType,[es]:i.UnsignedByteType,[$i]:i.UnsignedByteType};function vs(e){const t=e.dataFormatDescriptor[0];return 1===t.colorPrimaries?2===t.transferFunction?i.SRGBColorSpace:i.LinearSRGBColorSpace:10===t.colorPrimaries?2===t.transferFunction?"display-p3":"display-p3-linear":(0===t.colorPrimaries||console.warn(`THREE.KTX2Loader: Unsupported color primaries, "${t.colorPrimaries}"`),i.NoColorSpace)}var ys=function(){var e,t=0x10000000000000000,i=4294967295,s=2147483647;function n(e){var t=[];return t[e-1]=void 0,t}function r(e,t){return a(e[0]+t[0],e[1]+t[1])}function o(e,t){var i,s;return e[0]==t[0]&&e[1]==t[1]?0:(i=0>e[1],s=0>t[1],i&&!s?-1:!i&&s?1:function(e,t){return a(e[0]-t[0],e[1]-t[1])}(e,t)[1]<0?-1:1)}function a(e,s){var n,r;for(e%=t,s=(s%=t)-(n=s%L)+(r=Math.floor(e/L)*L),e=e-r+n;0>e;)e+=L,s-=L;for(;e>i;)e-=L,s+=L;for(s%=t;s>0x7fffffff00000000;)s-=t;for(;-0x10000000000000000>s;)s+=t;return[e,s]}function l(e){return e>=0?[e,0]:[e+L,-4294967296]}function h(e){return e[0]>=2147483648?~~Math.max(Math.min(e[0]-L,s),-2147483648):~~Math.max(Math.min(e[0],s),-2147483648)}function c(e){return e.cb>=e.O?-1:255&e.ab[e.cb++]}function d(e){var t=e.ab;return t.length=e.O,t}function u(e,t,s){var n,r,o,a,h="",d=[];for(r=0;5>r;++r){if(-1==(o=c(t)))throw Error("truncated input");d[r]=o<<24>>24}if(!function(e,t){var i,s,n,r,o,a,l;if(5>t.length)return 0;for(l=255&t[0],n=l%9,r=(a=~~(l/9))%5,o=~~(a/5),i=0,s=0;4>s;++s)i+=(255&t[1+s])<<8*s;return i>99999999||!function(e,t,i,s){if(t>8||i>4||s>4)return 0;C(e.k,i,t);var n=1<<s;return y(e.C,n),y(e.o,n),e.P=n-1,1}(e,n,r,o)?0:function(e,t){return 0>t?0:(e.z!=t&&(e.z=t,e.m=Math.max(e.z,1),f(e.b,Math.max(e.m,4096))),1)}(e,i)}(n=v({}),d))throw Error("corrupted input");for(r=0;64>r;r+=8){if(-1==(o=c(t)))throw Error("truncated input");1==(o=o.toString(16)).length&&(o="0"+o),h=o+""+h}/^0+$|^f+$/i.test(h)?e.N=F:(a=parseInt(h,16),e.N=a>i?F:l(a)),e.Q=function(e,t,i,s){return e.a.K=t,A(e.b),e.b.V=i,function(e){e.b.w=0,e.b.D=0,Q(e.q),Q(e.n),Q(e.E),Q(e.s),Q(e.u),Q(e.r),Q(e.J),function(e){var t,i;for(i=1<<e.g+e.y,t=0;i>t;++t)Q(e.F[t].v)}(e.k);for(var t=0;4>t;++t)Q(e.j[t].B);O(e.C),O(e.o),Q(e.t.B),function(e){e.p=0,e.i=-1;for(var t=0;5>t;++t)e.p=e.p<<8|c(e.K)}(e.a)}(e),e.f=0,e.l=0,e.T=0,e.R=0,e._=0,e.U=s,e.d=U,e.I=0,function(e,t){return e.h=t,e.bb=null,e.X=1,e}({},e)}(n,t,s,e.N)}function p(e,t){return e.S=function(e){return e.ab=n(32),e.O=0,e}({}),u(e,function(e,t){return e.ab=t,e.cb=0,e.O=t.length,e}({},t),e.S),e}function f(e,t){(null==e.x||e.c!=t)&&(e.x=n(t)),e.c=t,e.D=0,e.w=0}function m(e){var t=e.D-e.w;t&&(function(e,t,i,s){(function(e,t,i,s,n){for(var r=0;n>r;++r)i[s+r]=e[t+r]})(t,i,e.ab,e.O,s),e.O+=s}(e.V,e.x,e.w,t),e.D>=e.c&&(e.D=0),e.w=e.D)}function g(e,t){var i=e.D-t-1;return 0>i&&(i+=e.c),e.x[i]}function A(e){m(e),e.V=null}function b(e){if(!e.X)throw Error("bad state");if(e.bb)throw Error("No encoding");return function(e){var t=function(e){var t,i,s,n,a,c;if(c=h(e.d)&e.P,k(e.a,e.q,(e.f<<4)+c)){if(k(e.a,e.E,e.f))s=0,k(e.a,e.s,e.f)?(k(e.a,e.u,e.f)?(k(e.a,e.r,e.f)?(i=e._,e._=e.R):i=e.R,e.R=e.T):i=e.T,e.T=e.l,e.l=i):k(e.a,e.n,(e.f<<4)+c)||(e.f=7>e.f?9:11,s=1),s||(s=w(e.o,e.a,c)+2,e.f=7>e.f?8:11);else if(e._=e.R,e.R=e.T,e.T=e.l,s=2+w(e.C,e.a,c),e.f=7>e.f?7:10,a=E(e.j[function(e){return 4>(e-=2)?e:3}(s)],e.a),a>=4){if(n=(a>>1)-1,e.l=(2|1&a)<<n,14>a)e.l+=function(e,t,i,s){var n,r,o=1,a=0;for(r=0;s>r;++r)n=k(i,e,t+o),o<<=1,o+=n,a|=n<<r;return a}(e.J,e.l-a-1,e.a,n);else if(e.l+=B(e.a,n-4)<<4,e.l+=function(e,t){var i,s,n=1,r=0;for(s=0;e.A>s;++s)i=k(t,e.B,n),n<<=1,n+=i,r|=i<<s;return r}(e.t,e.a),0>e.l)return-1==e.l?1:-1}else e.l=a;if(o(l(e.l),e.d)>=0||e.l>=e.m)return-1;(function(e,t,i){var s=e.D-t-1;for(0>s&&(s+=e.c);0!=i;--i)s>=e.c&&(s=0),e.x[e.D++]=e.x[s++],e.D>=e.c&&m(e)})(e.b,e.l,s),e.d=r(e.d,l(s)),e.I=g(e.b,0)}else t=function(e,t,i){return e.F[((t&e.Y)<<e.g)+((255&i)>>>8-e.g)]}(e.k,h(e.d),e.I),e.I=7>e.f?function(e,t){var i=1;do{i=i<<1|k(t,e.v,i)}while(256>i);return i<<24>>24}(t,e.a):function(e,t,i){var s,n,r=1;do{if(n=i>>7&1,i<<=1,s=k(t,e.v,(1+n<<8)+r),r=r<<1|s,n!=s){for(;256>r;)r=r<<1|k(t,e.v,r);break}}while(256>r);return r<<24>>24}(t,e.a,g(e.b,e.l)),function(e,t){e.x[e.D++]=t,e.D>=e.c&&m(e)}(e.b,e.I),e.f=function(e){return 4>e?0:10>e?e-3:e-6}(e.f),e.d=r(e.d,z);return 0}(e.h);if(-1==t)throw Error("corrupted input");e.$=F,e.Z=e.h.d,(t||o(e.h.U,U)>=0&&o(e.h.d,e.h.U)>=0)&&(m(e.h.b),A(e.h.b),e.h.a.K=null,e.X=0)}(e),e.X}function v(e){e.b={},e.a={},e.q=n(192),e.E=n(12),e.s=n(12),e.u=n(12),e.r=n(12),e.n=n(192),e.j=n(4),e.J=n(114),e.t=I({},4),e.C=x({}),e.o=x({}),e.k={};for(var t=0;4>t;++t)e.j[t]=I({},6);return e}function y(e,t){for(;t>e.e;++e.e)e.G[e.e]=I({},3),e.H[e.e]=I({},3)}function w(e,t,i){return k(t,e.M,0)?8+(k(t,e.M,1)?8+E(e.L,t):E(e.H[i],t)):E(e.G[i],t)}function x(e){return e.M=n(2),e.G=n(16),e.H=n(16),e.L=I({},8),e.e=0,e}function O(e){Q(e.M);for(var t=0;e.e>t;++t)Q(e.G[t].B),Q(e.H[t].B);Q(e.L.B)}function C(e,t,i){var s,r;if(null==e.F||e.g!=i||e.y!=t)for(e.y=t,e.Y=(1<<t)-1,e.g=i,r=1<<e.g+e.y,e.F=n(r),s=0;r>s;++s)e.F[s]=S({})}function S(e){return e.v=n(768),e}function I(e,t){return e.A=t,e.B=n(1<<t),e}function E(e,t){var i,s=1;for(i=e.A;0!=i;--i)s=(s<<1)+k(t,e.B,s);return s-(1<<e.A)}function k(e,t,i){var s,n=t[i];return(-2147483648^(s=(e.i>>>11)*n))>(-2147483648^e.p)?(e.i=s,t[i]=n+(2048-n>>>5)<<16>>16,-16777216&e.i||(e.p=e.p<<8|c(e.K),e.i<<=8),0):(e.i-=s,e.p-=s,t[i]=n-(n>>>5)<<16>>16,-16777216&e.i||(e.p=e.p<<8|c(e.K),e.i<<=8),1)}function B(e,t){var i,s,n=0;for(i=t;0!=i;--i)e.i>>>=1,s=e.p-e.i>>>31,e.p-=e.i&s-1,n=n<<1|1-s,-16777216&e.i||(e.p=e.p<<8|c(e.K),e.i<<=8);return n}function Q(e){for(var t=e.length-1;t>=0;--t)e[t]=1024}function M(e){for(var t,i,s,n=0,r=0,o=e.length,a=[],l=[];o>n;++n,++r){if(128&(t=255&e[n]))if(192==(224&t)){if(n+1>=o)return e;if(128!=(192&(i=255&e[++n])))return e;l[r]=(31&t)<<6|63&i}else{if(224!=(240&t))return e;if(n+2>=o)return e;if(128!=(192&(i=255&e[++n])))return e;if(128!=(192&(s=255&e[++n])))return e;l[r]=(15&t)<<12|(63&i)<<6|63&s}else{if(!t)return e;l[r]=t}16383==r&&(a.push(String.fromCharCode.apply(String,l)),r=-1)}return r>0&&(l.length=r,a.push(String.fromCharCode.apply(String,l))),a.join("")}function T(e){return e[1]+e[0]}var D=2,R=3,P="function"==typeof setImmediate?setImmediate:setTimeout,L=4294967296,F=[i,-4294967296],U=[0,0],z=[1,0];return{decompress:function(t,i,s){var n,r,o,a,l={},h=void 0===i&&void 0===s;if("function"!=typeof i&&(r=i,i=s=0),s=s||function(t){return void 0!==r?function(t,i){e({action:R,cbn:i,result:t})}(o?t:-1,r):void 0},i=i||function(t,i){return void 0!==r?e({action:D,cbn:r,result:t,error:i}):void 0},h){for(l.d=p({},t);b(l.d.Q););return M(d(l.d.S))}try{l.d=p({},t),a=T(l.d.N),o=a>-1,s(0)}catch(e){return i(null,e)}P((function e(){try{for(var t,r=0,h=(new Date).getTime();b(l.d.Q);)if(++r%1e3==0&&(new Date).getTime()-h>200)return o&&(n=T(l.d.Q.h.d)/a,s(n)),P(e,0),0;s(1),t=M(d(l.d.S)),P(i.bind(null,t),0)}catch(e){i(null,e)}}),0)}}}();const ws={decompress:(e,t)=>{ys.decompress(new Uint8Array(e),t)}},xs={getMesh:(e,t)=>{let i={};if(t){let t=[],i=[],s={},n=[];e.traverse((e=>{if(e.isGroup){let r=xs.groupToMesh(e);r&&(t.push(e),n.push(e.name),r.applyMatrix4(e.matrix),i.push(r),s[r.name]=i)}}));let r,o,a=t.length;for(;a--;)r=t[a].parent,o=r.name,r.remove(t[a]),-1!==n.indexOf(o)&&(r=s[o]),r.add(i[a])}return e.traverse((e=>{e.isMesh&&(i[e.name]=e)})),i},getGroup:(e,t,i)=>{const s={};return e.traverse((e=>{e.isGroup&&(s[e.name]=t?xs.groupToMesh(e,mats):e)})),s},getMaterial:e=>{const t={};let i,s=[];return e.traverse((e=>{e.isMesh&&(i=e.material,-1===s.indexOf(i.name)&&(s.push(i.name),t[i.name]=i))})),t},groupToMesh:e=>{if(e.children[0].name!==e.name+"_1")return!1;if(!e.children[0].isMesh)return!1;let t=[],i=[],s=e.children.length;for(;s--;)i[s]=e.children[s].material,t[s]=e.children[s].geometry,t[s].group=s;let n=new THREE.Mesh(new ye(t,!0),i);return n.name=e.name,n},symetric:e=>{e.isMesh&&(e=e.geometry);let t=e.attributes.uv.array,i=.5*t.length;for(;i--;)t[2*i]<0&&(t[2*i]*=-1);e.attributes.uv.needsUpdate=!0},uv2:e=>{e.isMesh&&(e=e.geometry),e.setAttribute("uv2",e.attributes.uv)},autoMorph:(e,t,s=!0,n=!1)=>{let r,o,a,l,h,c,d,u,p,f,m,g={},A=[];e.traverse((e=>{e.isMesh&&-1!==e.name.search("__M__")&&(g[e.name]=e.geometry,A.push(e))}));for(let e in g)if(r=e.substring(0,e.indexOf("__")),o=e.substring(e.lastIndexOf("__")+2),a=t[r],a)if(h=a.geometry,c=g[e],h.morphTargetsRelative=n,h.attributes.position.count===c.attributes.position.count){if(h.morphAttributes.position||(h.morphAttributes.position=[],s&&(h.morphAttributes.normal=[]),a.morphTargetInfluences=[],a.morphTargetDictionary={}),l=h.morphAttributes.position.length,n){for(d=c.attributes.position.array.length,f=[];d--;)f[d]=c.attributes.position.array[d]-h.attributes.position.array[d];u=new i.Float32BufferAttribute(f,3)}else u=new i.Float32BufferAttribute(c.attributes.position.array,3);h.morphAttributes.position.push(u),s&&(p=new i.Float32BufferAttribute(c.attributes.normal.array,3),h.morphAttributes.normal.push(p)),a.morphTargetInfluences.push(0),a.morphTargetDictionary[o]=l}else console.warn("Morph "+o+" target is no good on "+a.name);for(g={},d=A.length;d--;)m=A[d],m.parent&&m.parent.remove(m),m.material&&m.material.dispose(),m.geometry&&m.geometry.dispose()}},Os={manager:new i.LoadingManager,renderer:null,msg:"",inLoad:!1,clip:[],data:new Map,tmp:[],lzma:null,dracoLoader:null,dracoPath:"./src/libs/draco/",basisPath:"./src/jsm/libs/basis/",formatGltf:{draco:!0,ktx2:!1,meshop:!1},setSupport:e=>{for(let t in e)Os.formatGltf[t]&&(Os.formatGltf[t]=e[t])},maxAnisotropy:1,onLoad:()=>{},onEnd:()=>{},log:e=>{},materialRoot:e=>{console.log(e)},setLoadEvent:(e,t)=>{Os.onLoad=e,Os.onEnd=t},prefix:e=>{let t="";switch(e){case"S":case"sound":case"mp3":case"wav":case"ogg":t="S_";break;case"I":case"image":case"jpg":case"png":t="I_";break;case"E":case"hdr":case"env":case"T":case"texture":t="T_";break;case"J":case"json":t="J_";break;case"JS":case"js":t="JS_";break;case"H":case"bin":case"hex":t="H_";break;case"O":case"object3d":t="O_";break;case"M":case"material":t="M_"}return t},dispose:()=>{Os.data.forEach((function(e,t){(e.isMaterial||e.isTexture)&&(e.dispose(),Os.data.delete(t)),e.isObject3D&&(e.traverse((function(e){e.isMesh&&(e.geometry&&e.geometry.dispose(),e.material&&e.material.dispose&&e.material.dispose())})),Os.data.delete(t))}))},createElementNS:e=>document.createElementNS("http://www.w3.org/1999/xhtml",e),exist:(e,t="")=>!!Os.get(e,t),delete:(e,t="")=>Os.data.delete(Os.prefix(t)+e),get:(e,t="")=>Os.data.get(Os.prefix(t)+e),set:(e,t,i="",s)=>{t?(t.isMaterial&&(i="material",t.name=e,Os.materialRoot(t,s)),t.isTexture&&(i="texture"),t.isObject3D&&(i="object3d"),Os.get(e,i)||Os.data.set(Os.prefix(i)+e,t)):console.log("Loading error on "+e)},getScript:e=>Os.data.get(Os.prefix("js")+e),getMaterials:e=>("string"==typeof e&&(e=Os.get(e,"O")),xs.getMaterial(e)),getGLB:(e,t)=>("string"==typeof e&&(e=Os.get(e,"O")),e?(t&&xs.getMesh(e,t),e):console.error("Not find Model ?")),getMesh:(e,t)=>("string"==typeof e&&(e=Os.get(e,"O")),e?xs.getMesh(e,t):console.error("Not find Model ?")),getGroup:(e,t,i)=>("string"==typeof e&&(e=Os.get(e,"O")),xs.getGroup(e,t,i)),applyMorph(e,t=null,i=!0,s=!0){let n;n=e.isObject3D?e:Os.get(e,"O"),t||(t=Os.getMesh(e)),n&&t&&xs.autoMorph(n,t,i,s)},uv2(e){xs.uv2(e)},symetric(e){xs.symetric(e)},objectSpaceNormal(e){e.material.normalMapType=i.ObjectSpaceNormalMap},add:(e,t,i)=>{Os.set(e,t,i),Os.next()},getMaterial:e=>Os.data.get("M_"+e),texture:(e={})=>{Os.loaderMap||(Os.loaderMap=new i.TextureLoader);let t=e.name||"";return e.url&&(t=-1!==e.url.lastIndexOf(".")?e.url.substring(e.url.lastIndexOf("/")+1,e.url.lastIndexOf(".")):e.url.substring(e.url.lastIndexOf("/")+1)),-1===t.search("_c")&&-1===t.search("_l")&&-1===t.search("_u")&&-1===t.search("_d")||(e.srgb=!0),Os.exist(t,"texture")?Os.get(t,"texture"):Os.exist(t,"image")?Os.getTexture(t,e):Os.loaderMap.load(e.url,(function(i){return Os.setTextureOption(i,e),Os.data.set("T_"+t,i),e.callback&&e.callback(),i}))},getTexture:(e,t={})=>{e=(t.quality?t.quality+"k_":"")+e;let s=Os.get(e,"texture");if(!s){let n=Os.get(e,"image");if(!n)return null;s=new i.Texture(n),-1===e.search("_c")&&-1===e.search("_d")&&-1===e.search("_l")&&-1===e.search("_u")||(t.srgb=!0),Os.data.set("T_"+e,s)}return Os.setTextureOption(s,t),s},setTextureOption:(e,t={})=>{t.encoding&&(e.colorSpace=i.SRGBColorSpace),t.srgb&&(e.colorSpace=i.SRGBColorSpace),e.flipY=(void 0!==t.flipY||void 0!==t.flip)&&t.flipY,t.anisotropy&&(e.anisotropy="max"===t.anisotropy?Os.maxAnisotropy:t.anisotropy),void 0!==t.generateMipmaps&&(e.generateMipmaps=t.generateMipmaps),t.repeat&&(e.repeat.fromArray(t.repeat),e.wrapS=e.wrapT=i.RepeatWrapping),t.center&&e.center.fromArray(t.center),t.offset&&e.offset.fromArray(t.offset),t.filter&&"near"===t.filter&&(e.minFilter=i.NearestFilter,e.magFilter=i.NearestFilter),t.channel&&(e.channel=t.channel),e.needsUpdate=!0},loadAsync:(e,t="",i="")=>new Promise(((s,n)=>{Os.waiting=!0,Os.load(e,(()=>{Os.waiting=!1}),t,i)})),load:(e,t,i="",s="",n=0)=>{Os.msg=s;let r=[],o=t||function(){},a=("undefined"==typeof performance?Date:performance).now();"string"==typeof e||e instanceof String?r.push(e):r=r.concat(e),Os.tmp.push({urls:r,path:i,callback:o,start:a,quality:n}),Os.inLoad||Os.loadOne()},loadOne:()=>{Os.inLoad=!0,Os.onLoad();let e=Os.tmp[0].path+Os.tmp[0].urls[0],t=e.substring(e.lastIndexOf("/")+1,e.lastIndexOf(".")),i=e.substring(e.lastIndexOf(".")+1).toLowerCase();"jpg"!==i&&"png"!==i||(t=(Os.tmp[0].quality?Os.tmp[0].quality+"k_":"")+t),Os.exist(t,i)?Os.next():Os.loading(e,t,i)},next:()=>{Os.tmp[0].urls.shift(),0===Os.tmp[0].urls.length?(Math.floor(("undefined"==typeof performance?Date:performance).now()-Os.tmp[0].start),Os.tmp[0].callback(),Os.tmp.shift(),Os.tmp.length>0?Os.loadOne():(Os.inLoad=!1,Os.clearDRACO(),Os.onEnd())):Os.loadOne()},loading:(e,t,i)=>{switch(Os.log(Os.msg),i){case"glb":case"gltf":Os.load_GLTF(e,t);break;case"fbx":case"FBX":Os.load_FBX(e,t);break;case"obj":Os.load_OBJ(e,t);break;case"stl":Os.load_STL(e,t);break;case"ktx2":Os.load_KTX2(e,t);break;case"hdr":Os.load_RGBE(e,t);break;case"exr":Os.load_EXR(e,t);break;default:Os.extand(e,t,i)}},extand:(e,t,i)=>{Os.XHTTP||(Os.XHTTP=new XMLHttpRequest);const s=Os.XHTTP;switch(s.open("GET",e,!0),"json"===i&&s.overrideMimeType("application/json"),i){case"bin":case"hex":case"wasm":case"mp3":case"wav":case"ogg":s.responseType="arraybuffer";break;case"jpg":case"png":s.responseType="blob";break;case"bvh":case"glsl":case"js":case"json":s.responseType="text"}s.onreadystatechange=function(){4===s.readyState&&(s.status>=300?console.log("Error, status code = "+s.status):Os.direct(s.response,t,i))},"onprogress"in s&&(s.onprogress=function(e){}),s.send(null)},direct:(e,t,i)=>{switch(i){case"jpg":case"png":let s=Os.createElementNS("img");s.onload=function(e){window.URL.revokeObjectURL(s.src),Os.add(t,s,"image")},s.src=window.URL.createObjectURL(e);break;case"mp3":case"wav":case"ogg":AudioContext.getContext().decodeAudioData(e.slice(0),(function(e){Os.add(t,e,"sound")}),(function(e){console.error("decodeAudioData error",e)}));break;case"hex":case"bin":ws.decompress(e,(e=>{Os.add(t,e,i)}));break;case"wasm":Os.add(t,new Uint8Array(e),i);break;case"json":Os.add(t,JSON.parse(e),i);break;default:Os.add(t,e,i)}},clearDRACO:()=>{Os.dracoLoader&&(Os.dracoLoader.dispose(),Os.dracoLoader=null),Os.GLTF&&(Os.GLTF=null)},loaderDRACO:()=>{if(Os.dracoLoader)return Os.dracoLoader;if(!Os.dracoLoaderType)if(navigator.userAgentData)Os.dracoLoaderType="wasm";else{let e=navigator.userAgent.toLowerCase();Os.dracoLoaderType=-1!==e.indexOf("safari")&&-1===e.indexOf("chrome")?"js":"wasm"}return Os.dracoLoader=(new xt).setDecoderPath(Os.dracoPath),Os.dracoLoader.setDecoderConfig({type:Os.dracoLoaderType}),Os.dracoLoader},loaderKTX2:()=>(Os.KTX2||(Os.KTX2=new ms(Os.manager).setTranscoderPath(Os.basisPath).detectSupport(Os.renderer)),Os.KTX2),loaderGLTF:()=>(Os.GLTF||(Os.GLTF=new Ce(Os.manager).setCrossOrigin("anonymous"),Os.formatGltf.draco&&Os.GLTF.setDRACOLoader(Os.loaderDRACO()),Os.formatGltf.ktx2&&Os.GLTF.setKTX2Loader(Os.loaderKTX2()),Os.formatGltf.meshop&&Os.GLTF.setMeshoptDecoder(Oi)),Os.GLTF),loaderFBX:()=>(Os.FBX||(Os.FBX=new ri(Os.manager)),Os.FBX),loaderSTL:()=>(Os.STL||(Os.STL=new Fi(Os.manager)),Os.STL),loaderOBJ:()=>(Os.OBJ||(Os.OBJ=new Li(Os.manager)),Os.OBJ),loaderRGBE:()=>(Os.RGBE||(Os.RGBE=new Ui(Os.manager)),Os.RGBE),loaderEXR:()=>(Os.EXR||(Os.EXR=new zi(Os.manager)),Os.EXR),load_GLTF:(e,t)=>{Os.loaderGLTF().load(e,(function(e){const s=e.scene;if(e.animations){const t=e.animations,n=new i.AnimationMixer(e.scene);s.mixer=n,s.actions={};for(let e=0;e<t.length;e++){let i=t[e];s.actions[i.name]=n.clipAction(i)}s.play=e=>{s.actions[e]&&(s.actions[e].paused=!1,s.actions[e].time=0,s.actions[e].play())},s.pause=(e,t=!0)=>{s.actions[e]&&(s.actions[e].paused=t)}}Os.add(t,s)}))},load_FBX:(e,t)=>{Os.loaderFBX().load(e,(function(e){Os.add(t,e)}))},load_OBJ:(e,t)=>{Os.loaderOBJ().load(e,(function(e){Os.add(t,e)}))},load_STL:(e,t)=>{Os.loaderSTL().load(e,(function(e){let s=new i.Mesh(e);Os.add(t,s)}))},load_KTX2:(e,t,i)=>{Os.loaderKTX2().load(e,(function(e){return Os.add(t,e),e}))},load_RGBE:(e,t)=>{Os.loaderRGBE().load(e,(function(e){e.mapping=i.EquirectangularReflectionMapping,Os.add(t,e)}))},load_EXR:(e,t,i)=>{Os.loaderEXR().load(e,(function(e){return i&&i(e),e}))},direct_EXR:(e,t)=>{Os.loaderEXR().parse(url,(function(e){return Os.add(t,e),e}))}},Cs="font-size:14px; font-weight:400; letter-spacing: -0.022em; text-shadow: 1px 1px 2px black;",Ss="font-size:14px; width:fit-content; font-weight:400; letter-spacing: -0.022em; text-shadow: 1px 1px 2px black;";let Is=null;const Es=[40,40];let ks,Bs,Qs,Ms,Ts,Ds,Rs,Ps,Ls,Fs,Us,zs,Gs,Ns,Vs,js,Hs,qs=d.dom,Xs=d.setSvg,Ws=d.makeGradiant,Zs=null,Ys="-o-user-select:none; -ms-user-select:none; -khtml-user-select:none; -webkit-user-select:none; -moz-user-select: none; pointer-events:none; ",_s=0,Ks=null,Js=0,$s=!1,en="";const tn={home:["Code","Worker","Github","Docs"],engine:[],demo:[],visited:[]};let sn=!1,nn=[1,0,0,1,0,1,-1,0,-1,0,0,-1,0,-1,1,0],rn=null,on=null,an=null,ln=!1,hn=!1,cn="",dn="",un="rgba(255,235,205,0.7)",pn="",fn=null,mn="blur(4px)",gn=["#000","#444","#feb","rgba(213,211,212,0.32)"],An=["#fff","#bee","#bfb","rgba(0,0,0,0.4)"],bn=null,vn=4,yn="#020206",wn="M 0.5 1.5 L 9.5 1.5 M 0.5 5.5 L 9.5 5.5 M 0.5 9.5 L 9.5 9.5";class xn{static setMain(e){Is=e}static setColors(e){cn=e?gn[0]:An[0],dn=e?gn[1]:An[1],un=e?gn[2]:An[2],pn=e?gn[3]:An[3],hn=e,Bs&&(Bs.style.color=cn,document.querySelector("#svgLogo").setAttributeNS(null,"stroke",cn),document.querySelector("#guiPath").setAttributeNS(null,"stroke",cn),document.querySelector("#svgLoader").setAttributeNS(null,"fill",cn))}static reset(){xn.log(),Zs&&Bs.removeChild(Zs),Zs=null}static resize(e){_s=e.left,Bs.style.left=_s+"px",Bs.style.width=0!==_s?"calc(100% - "+_s+"px)":"100%"}static init(e,t,i,s){sn||(xn.setColors(hn),ks=s||document.body,Bs=document.createElement("div"),Bs.style.cssText=Ys+"position:absolute; margin:0; padding:0; top:0px; left:0px; width:100%; height:100%; display:block; color:"+cn+";",ks.appendChild(Bs),Bs.addEventListener("contextmenu",(e=>{e.preventDefault()}),!1),Vs=document.createElement("div"),Vs.style.cssText=Ys+"position:absolute; margin:0; padding:0; top:0px; left:0px; width:1px; height:1px; display:block; background:none;",Bs.appendChild(Vs),Ms=document.createElement("div"),Ms.style.cssText=" color: #fff; font-size:16px; text-align:center; position:absolute; margin:0; padding:0; top:50%; left:50%; width:512px; height:20px; margin-left:-256px; margin-top:-38px; display:block; pointer-events:none; text-shadow: 2px 2px #000000;",Ms.textContent=i||"load...",Bs.appendChild(Ms),Ts=document.createElement("div"),Ts.style.cssText="position:absolute; top:50%; left:50%; width:60px; height:60px; margin-left:-30px; margin-top:-30px; display:block; ",Ts.innerHTML=this.miniLoader("#000"),Bs.appendChild(Ts),sn=!0)}static getCorner(){return Vs}static removeJoystick(){}static addJoystick(){}static snipperMode(e){}static log(e=""){null!==an&&(an.innerHTML=e)}static setFps(e){null!==rn&&(rn.innerHTML=e)}static showTimeTest(e){if(null===on)return;let t=JSON.stringify(e,null,2);t=t.replace(/[",*+?^${}()|[\]\\]/g,""),on.textContent=t}static setStats(e=""){on.textContent=e}static endLoading(){Ts.style.top=Es[1]-1+"px",Ts.style.left=Es[0]+20+"px",Bs.removeChild(Ms),Os.setLoadEvent((function(){Ts.style.display="block"}),(function(){Ts.style.display="none"}));let e="none";zs=document.createElement("div"),zs.style.cssText="position:absolute; top:20px; background:none; left:60px; pointer-events:auto;",zs.id="zone",Bs.appendChild(zs),fn=document.createElement("div"),fn.style.cssText="position:absolute; top:0px; left:0px; height:0px; width:100%; pointer-events:none; transition:all 0.12s allow-discrete ease-out; transition-property: height, opacity; ",fn.style.opacity=0,fn.style.background=pn,fn.style.backdropFilter=mn,Bs.appendChild(fn),Ds=document.createElement("div"),Ds.style.cssText="position:absolute; top:24px; background:none; left:"+Es[0]+"px; display:flex; align-self: stretch; justify-content: flex-start; gap: 0px 6px; align-items:baseline; ",Bs.appendChild(Ds),Fs=document.createElement("div"),Fs.style.cssText="position:absolute; top:60px; left:"+Es[0]+"px; overflow:hidden; background:"+e+"; height:0px; width:0px;",Bs.appendChild(Fs),Us=document.createElement("div"),Us.style.cssText="box-sizing: border-box; position:absolute; overflow:hidden; background:none; display:flex; flex-wrap:warp; opacity:0; transition-delay: 0.12s; transition:opacity 0.5s allow-discrete ease-out;",Fs.appendChild(Us),zs.addEventListener("pointerleave",(e=>{ln=!1,setTimeout((function(){ln||xn.hideMenu()}),100)})),zs.addEventListener("pointermove",xn.moving),Rs=document.createElement("div"),Ds.appendChild(Rs),Rs.id="home",Rs.innerHTML=xn.miniIcon("logo",cn),Ps=document.createElement("div"),Ps.style.cssText=Cs,Ps.id="engine",Ds.appendChild(Ps),Ls=document.createElement("div"),Ls.style.cssText=Cs,Ls.id="demo",Ds.appendChild(Ls),this.effect(Rs),this.effect(Ps),this.effect(Ls),an=document.createElement("div"),an.style.cssText="position:absolute; width:300px; bottom:15px; left:"+(Es[0]+8)+"px; font-size:12px; vertical-align:bottom; text-align:left;",Bs.appendChild(an),on=document.createElement("div"),on.style.cssText="position:absolute; bottom:25px; left:10px; font-size:14px; width:400px; white-space: pre; line-height:20px; margin-left:10px;",Bs.appendChild(on),Ks=document.createElement("div"),Ks.style.cssText=Ys+"position:absolute; top:0px; right:0px; width:260px; height:100%; background:"+pn+"; display:none;",Ks.style.backdropFilter=mn,Bs.appendChild(Ks),rn=document.createElement("div"),rn.style.cssText=Cs+"position:absolute; top:33px; right:"+(Es[0]+20)+"px; text-align:right; ",Bs.appendChild(rn),Gs=document.createElement("div"),Gs.style.cssText="position:absolute; right:"+Es[0]+"px;  top:31px; pointer-events:auto; cursor: pointer;",Bs.appendChild(Gs),Gs.innerHTML=`<svg xmlns='http://www.w3.org/2000/svg' version='1.1' xmlns:xlink='http://www.w3.org/1999/xlink' style='pointer-events:none;' \n        preserveAspectRatio='xMinYMax meet' x='0px' y='0px' width='10px' height='10px' viewBox='0 0 10 10'>\n        <path stroke='${cn}' id='guiPath' stroke-width='1' fill='none' d='${wn}'/></svg>`,Gs.addEventListener("pointerdown",Is.showGui)}static setTopColor(e="#000000"){}static harmony(e){let t="rgba(0,0,0,0.5)";e?js||Hs||(js=document.createElement("div"),js.style.cssText="position:absolute; top:33.33%; width:100%; height:33.33%; border-top:1px dashed "+t+"; border-bottom:1px dashed "+t+";",Bs.appendChild(js),Hs=document.createElement("div"),Hs.style.cssText="position:absolute; left:33.33%; height:100%; width:33.33%; border-left:1px dashed "+t+"; border-right:1px dashed "+t+";",Bs.appendChild(Hs)):js&&Hs&&(Bs.removeChild(js),Bs.removeChild(Hs),js=null,Hs=null)}static miniLoader(e){return`\n        <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n        viewBox="0 0 100 100" enable-background="new 0 0 0 0" xml:space="preserve">\n        <path id="svgLoader" fill="${e}" d="M73,50c0-12.7-10.3-23-23-23S27,37.3,27,50 M30.9,50c0-10.5,8.5-19.1,19.1-19.1S69.1,39.5,69.1,50">\n        <animateTransform attributeName="transform" attributeType="XML" type="rotate" dur="1s" from="0 50 50" to="360 50 50" repeatCount="indefinite" />\n        </path></svg>\n        `}static miniIcon(e,t){let i;switch(e){case"logo":i="M 11.2 7.3 Q 10.9 7.45 10.6 7.7 6.75 10.45 6.75 14.35 6.75 18.15 10.6 20.9 14.5 23.65 20 23.65 L 20 4.95 Q 25.5 4.95 29.4 7.7 33.25 10.45 33.25 14.35 33.25 18.15 29.4 20.9 25.5 23.65 20 23.65 L 20 35";break;case"drag":i="M 23.975 7.025 Q 21.93 5 19 5 L 5 5 M 12 19 L 5 19 M 19 12 L 19 35 35.15 28.9 19 12 Z";break;case"build":i="M 20 20 L 20 5 35 5 35 20 35 35 20 35 5 35 5 20 20 20 35 20 M 20 20 L 20 35";break;case"cible":i="M 27.05 12.95 Q 30 15.8 30 20 30 24.1 27.05 27.05 24.1 30 20 30 15.8 30 12.95 27.05 10 24.1 10 20 10 15.8 12.95 12.95 15.8 10 20 10 24.1 10 27.05 12.95 Z M 35 20 L 32 20 M 20 5 L 20 8 M 8 20 L 5 20 M 20 32 L 20 35"}return`<svg xmlns='http://www.w3.org/2000/svg' version='1.1' xmlns:xlink='http://www.w3.org/1999/xlink' style='pointer-events:none;' \n        preserveAspectRatio='xMinYMax meet' x='0px' y='0px' width='20px' height='20px' viewBox='0 0 40 40'>\n        <path id='svgLogo' stroke='${t}' stroke-width='3' transform='translate(0, 4)' stroke-linejoin='round' stroke-linecap='round' \n        fill='none' d='${i}''></svg>`}static switchGuiButton(e){fn.style.width=e?"calc(100% - 260px)":"100%",document.querySelector("#guiPath").setAttributeNS(null,"d",e?"M 1.5 0.5 L 1.5 9.5 M 5.5 0.5 L 5.5 9.5 M 9.5 0.5 L 9.5 9.5":wn),$s=e,Ks.style.display=e?"block":"none";let t=e?An[0]:cn;document.querySelector("#guiPath").setAttributeNS(null,"stroke",t),rn.style.color=t}static hideMenu(){xn.clearLogoImage(),Fs.style.height="0px",Us.innerHTML="",zs.style.width="0px",zs.style.height="0px",en="",fn.style.height="0px",fn.style.opacity=0,Us.style.opacity=0,xn.updatePad(null)}static showMenu(e){let t=e.id;if(en===t)return;xn.hideMenu(),en=t,Fs.style.left=Es[0]+"px","home"===t&&(Fs.style.left=Es[0]-10+"px"),"engine"===t?(Fs.style.left=Es[0]+36+"px",xn.addLogoImage()):xn.clearLogoImage();let i,s,n=tn[t],r=n.length,o=0,a=0;for(Us.style.padding="10px 0px",Us.style.top="0px",Us.style.width="auto",Us.style.display="flex",Us.style.flexDirection="column",Us.style.opacity=1;r--;)s=n[o],i=document.createElement("div"),Us.appendChild(i),i.classList.add("down"),i.style.cssText=Ss,i.id=s,i.textContent=s,-1!==tn.visited.indexOf(s)&&(i.style.color=dn),Is.devDemo[s]&&(i.style.color=un),"Worker"===s&&(i.style.color=Is.isWorker?cn:dn),"Code"===s&&(i.style.color=Is.isEditor?cn:dn),0===o&&(a=i.offsetHeight),this.effect(i,!0),o++;let l=Us.getBoundingClientRect(),h=10*a;if(Js=o*a>h?h:l.height,"demo"===t){Us.style.display="grid",Us.style.gridTemplateColumns="repeat(auto-fill, 120px)",Us.style.justifyContent="space-between";let e=$s?335:160;Fs.style.left="80px",Fs.style.width="calc(100% - "+e+"px)",Us.style.width="100%",l=Us.getBoundingClientRect(),Fs.style.height=l.height+"px"}else Fs.style.width=l.width+"px",Fs.style.height=Js+"px";zs.style.left=l.left-20+"px",zs.style.width=l.width+40+"px",zs.style.height=l.height+50+"px",fn.style.height=60+l.height+"px",fn.style.opacity=1}static upMenu(){Ps.textContent=this.reformat(Is.engineType),Ls.textContent=this.reformat(Is.currentDemo),tn.visited.push(Ls.textContent);let e=[...Is.demoList];e.splice(e.indexOf(Is.currentDemo),1),e.sort(),e=e.map((e=>xn.reformat(e))),tn.demo=e,e=[...Is.engineList],e.sort(),e.splice(e.indexOf(Is.engineType),1),e=e.map((e=>xn.reformat(e))),tn.engine=e}static reformat(e){return e.toUpperCase().substring(0,1)+e.substring(1).toLowerCase()}static effect(e,t){e.classList.add("menu"),Is.isMobile||e.addEventListener("pointermove",xn.moving),e.style.padding="4px 10px",e.addEventListener("pointerleave",(e=>{e.target.style.fontWeight=400})),e.addEventListener("pointerdown",(e=>{"home"===e.target.id||"engine"===e.target.id||"demo"===e.target.id?xn.showMenu(e.target):xn.onClick(e.target.id)}))}static onClick(e){ln=!1,xn.hideMenu(),setTimeout((function(){-1!==tn.engine.indexOf(e)?xn.swapEngine(e):-1!==tn.home.indexOf(e)?xn.homeLink(e):Is.loadDemo(e.toLowerCase())}),100)}static homeLink(e){switch(e){case"Github":window.open("https://github.com/lo-th/phy","_blank");break;case"Docs":window.open("./docs/index.html#manual/Welcome","_blank");break;case"Worker":xn.swapWorker();break;case"Code":xn.swapCode()}}static swapWorker(){Is.isWorker=!Is.isWorker,xn.swapEngine()}static swapCode(){Is.isEditor=!Is.isEditor,Is.showEditor(Is.isEditor)}static swapEngine(e){e||(e=Is.engineType);let t=e.toLowerCase(),i=location.hash,s="E=";Is.devMode&&(s+="dev_"),Is.isWorker&&(s+="w_"),s+=t,window.open("index.html?"+s+i,"_self")}static updatePad(e){if(e&&e.id){if("home"===e.id||"engine"===e.id||e.id,e.id===Ns)return!1;Ns=e.id}else Ns=null;return!0}static moving(e){if(ln=!0,"zone"===e.target.id)return;e.target.style.fontWeight=500,-1!==tn.engine.indexOf(e.target.id)&&xn.setLogoImage(e.target.id),"engine"===e.target.id&&xn.setLogoImage(),xn.updatePad(e.target)&&("home"!==e.target.id&&"engine"!==e.target.id&&"demo"!==e.target.id||xn.showMenu(e.target))}static count(e,t){return t&&(e.n--,e.t--),undefined.textContent=e.n+" / "+e.t,0===e.n?"reload":0===e.t?"empty":"fire"}static dispose(){if(sn){for(;Bs.firstChild;)Bs.removeChild(Bs.lastChild);ks.removeChild(Bs),sn=!1}}static clearLogoImage(){bn&&(Ds.removeChild(bn),bn=null)}static addLogoImage(){bn||(Is.engineType.toLowerCase(),bn=new Image(256,128),bn.style.cssText="position:absolute; top:40px; left:200px; width:256px; height: 128px;",Ds.appendChild(bn),xn.setLogoImage())}static setLogoImage(e){bn&&(e=e?e.toLowerCase():Is.engineType.toLowerCase(),bn.src="./assets/logo/"+e+".png")}static addBorder(){let e=[[68,yn,0],[75,yn,.08],[93,yn,.4],[100,yn,.6]];Qs=qs("svg","position:absolute; margin:0; padding:0; top:0; left:0; width:100%; height:100%; display:block; pointer-events:none;",{viewBox:"0 0 512 512",width:512,height:512,preserveAspectRatio:"none"}),qs("defs","",{},Qs),Ws("radialGradient",{id:"grad",cx:0,cy:0,r:338,fx:0,fy:0,gradientTransform:"matrix( 0, 1, -1, 0, 256, 256 )",gradientUnits:"userSpaceOnUse"},Qs,e),qs("rect","",{x:0,y:0,width:512,height:512,fill:"url(#grad)"},Qs),Bs.appendChild(Qs)}static hideCross(e){Zs.style.visibility=e?"hidden":"visible"}static addCross(){Zs=qs("svg","position:absolute; margin:0; padding:0; top:50%; left:50%; width:128px; height:128px; margin-left:-64px; margin-top:-64px; display:block;",{viewBox:"0 0 64 64",width:64,height:64,preserveAspectRatio:"none"}),qs("defs","",{},Zs),qs("path","",{id:"cc",d:"M 0 1.5 L 0 -1.5",stroke:"#FFFFFF","stroke-width":2,fill:"none","stroke-linecap":"butt","vector-effect":"non-scaling-stroke"},Zs,0),qs("g","",{},Zs);for(var e=Zs.childNodes[1],t=0;t<4;t++)qs("g","",{},e),qs("use","",{link:"#cc"},e,t);this.setCrossSize(vn),Bs.appendChild(Zs)}static setCross(e,t){}static setCrossSize(e){let t,i,s,n=nn,r=[32,32-e,32+e,32,32,32+e,32-e,32];for(t=0;t<4;t++)s=4*t,i=2*t,Xs(Zs,"transform","matrix( "+n[s]+" "+n[s+1]+" "+n[s+2]+" "+n[s+3]+" "+r[i]+" "+r[i+1]+" )",1,t)}}class On{constructor(e){this.renderer=e,this.isCapture=!1,this.ready=!1}update(){this.isCapture&&this.capturer.capture(this.renderer.domElement)}stop(){this.isCapture&&(this.capturer.stop(),this.capturer.save(),this.isCapture=!1)}start(){this.isCapture||(this.ready?(this.capturer=new CCapture({verbose:!1,display:!1,framerate:60,quality:50,format:"webm-mediarecorder",currentTime:0,timeLimit:60,frameLimit:0,autoSaveTime:0}),this.isCapture=!0,this.capturer.start()):this.loadCCapture())}loadCCapture(){var e=new XMLHttpRequest;e.open("GET","./src/libs/CCapture.all.min.js"),e.overrideMimeType("text/javascript"),e.onreadystatechange=function(){if(4===e.readyState)if(200===e.status||0===e.status){let t=document.createElement("script");t.type="text/javascript",t.async=!0,t.charset="utf-8",t.text=e.responseText,document.getElementsByTagName("head")[0].appendChild(t),this.ready=!0,this.start()}else console.error("Couldn't load [ccapture] ["+e.status+"]")}.bind(this),e.send()}}class Cn extends i.Mesh{constructor(e,t={}){const s=[e.isCubeTexture?"#define ENVMAP_TYPE_CUBE":""].join("\n")+"\n\n\t\t\t\tvarying vec3 vWorldPosition;\n\n\t\t\t\tuniform float radius;\n\t\t\t\tuniform float height;\n\t\t\t\tuniform float angle;\n\n\t\t\t\t#ifdef ENVMAP_TYPE_CUBE\n\n\t\t\t\t\tuniform samplerCube map;\n\n\t\t\t\t#else\n\n\t\t\t\t\tuniform sampler2D map;\n\n\t\t\t\t#endif\n\n\t\t\t\t// From: https://www.shadertoy.com/view/4tsBD7\n\t\t\t\tfloat diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) \n\t\t\t\t{\n\n\t\t\t\t\tfloat d = dot ( rd, n );\n\n\t\t\t\t\tif( d > 0.0 ) { return 1e6; }\n\n\t\t\t\t\tvec3 o = ro - c;\n\t\t\t\t\tfloat t = - dot( n, o ) / d;\n\t\t\t\t\tvec3 q = o + rd * t;\n\n\t\t\t\t\treturn ( dot( q, q ) < r * r ) ? t : 1e6;\n\n\t\t\t\t}\n\n\t\t\t\t// From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm\n\t\t\t\tfloat sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) {\n\n\t\t\t\t\tvec3 oc = ro - ce;\n\t\t\t\t\tfloat b = dot( oc, rd );\n\t\t\t\t\tfloat c = dot( oc, oc ) - ra * ra;\n\t\t\t\t\tfloat h = b * b - c;\n\n\t\t\t\t\tif( h < 0.0 ) { return -1.0; }\n\n\t\t\t\t\th = sqrt( h );\n\n\t\t\t\t\treturn - b + h;\n\n\t\t\t\t}\n\n\t\t\t\tvec3 project() {\n\n\t\t\t\t\tvec3 p = normalize( vWorldPosition );\n\t\t\t\t\tvec3 camPos = cameraPosition;\n\t\t\t\t\tcamPos.y -= height;\n\n\t\t\t\t\tfloat intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );\n\t\t\t\t\tif( intersection > 0.0 ) {\n\n\t\t\t\t\t\tvec3 h = vec3( 0.0, - height, 0.0 );\n\t\t\t\t\t\tfloat intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );\n\t\t\t\t\t\tp = ( camPos + min( intersection, intersection2 ) * p ) / radius;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tp = vec3( 0.0, 1.0, 0.0 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\treturn p;\n\n\t\t\t\t}\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 projectedWorldPosition = project();\n\n\t\t\t\t\t#ifdef ENVMAP_TYPE_CUBE\n\n\t\t\t\t\t\tvec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;\n\n\t\t\t\t\t#else\n\n\t\t\t\t\t\tvec3 direction = normalize( projectedWorldPosition );\n\t\t\t\t\t\tvec2 uv = equirectUv( direction );\n\t\t\t\t\t\tvec3 outcolor = texture2D( map, uv ).rgb;\n\n\t\t\t\t\t#endif\n\n\t\t\t\t\tgl_FragColor = vec4( outcolor, 1.0 );\n\n\t\t\t\t\t#include <tonemapping_fragment>\n\t\t\t\t\t#include <colorspace_fragment>\n\n\t\t\t\t}\n\t\t\t\t",n={map:{value:e},height:{value:t.height||15},radius:{value:t.radius||100}};super(new i.IcosahedronGeometry(1,16),new i.ShaderMaterial({uniforms:n,fragmentShader:s,vertexShader:"\n\t\t\tvarying vec3 vWorldPosition;\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );\n\t\t\t\tvWorldPosition = worldPosition.xyz;\n\n\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t\t}\n\t\t\t",side:i.DoubleSide}))}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}
/*! 
   * quantize.js Copyright 2008 Nick Rabinowitz.
   * Licensed under the MIT license: http://www.opensource.org/licenses/mit-license.php
   */
/*!
      * Block below copied from Protovis: http://mbostock.github.com/protovis/
      * Copyright 2010 Stanford Visualization Group
      * Licensed under the BSD License: http://www.opensource.org/licenses/bsd-license.php
      */const Sn={map:function(e,t){var i={};return t?e.map((function(e,s){return i.index=s,t.call(i,e)})):e.slice()},naturalOrder:function(e,t){return e<t?-1:e>t?1:0},sum:function(e,t){var i={};return e.reduce(t?function(e,s,n){return i.index=n,e+t.call(i,s)}:function(e,t){return e+t},0)},max:function(e,t){return Math.max.apply(null,t?Sn.map(e,t):e)}};function In(e,t,i){return(e<<10)+(t<<5)+i}function En(e){var t=[],i=!1;function s(){t.sort(e),i=!0}return{push:function(e){t.push(e),i=!1},peek:function(e){return i||s(),void 0===e&&(e=t.length-1),t[e]},pop:function(){return i||s(),t.pop()},size:function(){return t.length},map:function(e){return t.map(e)},debug:function(){return i||s(),t}}}function kn(e,t){if(t.count()){var i=t.r2-t.r1+1,s=t.g2-t.g1+1,n=t.b2-t.b1+1,r=Sn.max([i,s,n]);if(1==t.count())return[t.copy()];var o,a,l,h,c=0,d=[],u=[];if(r==i)for(o=t.r1;o<=t.r2;o++){for(h=0,a=t.g1;a<=t.g2;a++)for(l=t.b1;l<=t.b2;l++)h+=e[In(o,a,l)]||0;c+=h,d[o]=c}else if(r==s)for(o=t.g1;o<=t.g2;o++){for(h=0,a=t.r1;a<=t.r2;a++)for(l=t.b1;l<=t.b2;l++)h+=e[In(a,o,l)]||0;c+=h,d[o]=c}else for(o=t.b1;o<=t.b2;o++){for(h=0,a=t.r1;a<=t.r2;a++)for(l=t.g1;l<=t.g2;l++)h+=e[In(a,l,o)]||0;c+=h,d[o]=c}return d.forEach((function(e,t){u[t]=c-e})),p(r==i?"r":r==s?"g":"b")}function p(e){var i,s,n,r,a,l=e+"1",h=e+"2",p=0;for(o=t[l];o<=t[h];o++)if(d[o]>c/2){for(n=t.copy(),r=t.copy(),a=(i=o-t[l])<=(s=t[h]-o)?Math.min(t[h]-1,~~(o+s/2)):Math.max(t[l],~~(o-1-i/2));!d[a];)a++;for(p=u[a];!p&&d[a-1];)p=u[--a];return n[h]=a,r[l]=n[h]+1,[n,r]}}}function Bn(e,t){if(!e.length||t<2||t>256)return console.log("wrong number of maxcolors"),!1;var i=function(e){var t,i,s,n,r=new Array(32768);return e.forEach((function(e){i=e[0]>>3,s=e[1]>>3,n=e[2]>>3,t=In(i,s,n),r[t]=(r[t]||0)+1})),r}(e);i.forEach((function(){}));var s=function(e,t){var i,s,n,r=1e6,o=0,a=1e6,l=0,h=1e6,c=0;return e.forEach((function(e){i=e[0]>>3,s=e[1]>>3,n=e[2]>>3,i<r?r=i:i>o&&(o=i),s<a?a=s:s>l&&(l=s),n<h?h=n:n>c&&(c=n)})),new nr(r,o,a,l,h,c,t)}(e,i),n=new En((function(e,t){return Sn.naturalOrder(e.count(),t.count())}));function r(e,t){for(var s,n=1,r=0;r<1e3;)if((s=e.pop()).count()){var o=kn(i,s),a=o[0],l=o[1];if(!a)return void console.log("vbox1 not defined; shouldn't happen!");if(e.push(a),l&&(e.push(l),n++),n>=t)return;if(r++>1e3)return void console.log("infinite loop; perhaps too few pixels!")}else e.push(s),r++}n.push(s),r(n,.75*t);for(var o=new En((function(e,t){return Sn.naturalOrder(e.count()*e.volume(),t.count()*t.volume())}));n.size();)o.push(n.pop());r(o,t-o.size());for(var a=new rr;o.size();)a.push(o.pop());return a}var Qn,Mn,Tn,Dn=window.URL||window.webkitURL,Rn=null,Pn=[],Ln=0,Fn="",Un="",zn="",Gn="",Nn=.26,Vn=.45,jn=.55,Hn=.74,qn=.3,Xn=.5,Wn=.7,Zn=.3,Yn=.4,_n=3,Kn=6.5,Jn=.5,$n={},er={},tr=[].slice;const ir={format:"html",makeCanvasFromImage:function(e){null===Rn&&(Rn=document.createElement("canvas")),Qn=Rn.getContext("2d",{willReadFrequently:!0}),Mn=Rn.width=e.width,Tn=Rn.height=e.height,Qn.drawImage(e,0,0,Mn,Tn)},makeCanvasFromData:function(e){null===Rn&&(Rn=document.createElement("canvas")),Qn=Rn.getContext("2d",{willReadFrequently:!0}),Mn=Rn.width=e.w,Tn=Rn.height=e.h;let t=Qn.createImageData(Mn,Tn),i=t.data.length;for(;i--;)t.data[i]=e.data[i];Qn.putImageData(t,0,0)},clear:function(){Qn.clearRect(0,0,Mn,Tn)},getImageData:function(){return Qn.getImageData(0,0,Mn,Tn)},getPalette:function(e,t,i){this.makeCanvasFromData(e),t=t||64;var s=Math.round(Mn/256);void 0!==i&&(s=i);var n=this.getImageData(),r=Mn*Tn,o=Bn(this.createPixelArray(n.data,r,s),t);Pn=o.colors(),this.getRange();var a=er;return $n={vibrant:this.findColorVariation(a.lumTargetNormal,a.lumMinNormal,a.lumMaxNormal,a.satTargetVibrant,a.satMinVibrant,1),lightVibrant:this.findColorVariation(a.lumTargetLight,a.lumMinLight,1,a.satTargetVibrant,a.satMinVibrant,1),darkVibrant:this.findColorVariation(a.lumTargetDark,0,a.lumMaxDark,a.satTargetVibrant,a.satMinVibrant,1),muted:this.findColorVariation(a.lumTargetNormal,a.lumMinNormal,a.lumMaxNormal,a.satTargetMuted,0,a.satMaxMuted),lightMuted:this.findColorVariation(a.lumTargetLight,a.lumMinLight,1,a.satTargetMuted,0,a.satMaxMuted),darkMuted:this.findColorVariation(a.lumTargetDark,0,a.lumMaxDark,a.satTargetMuted,0,a.satMaxMuted,!0),highest:Fn,ambient:Un,maxLuma:zn,minLuma:Gn},this.clear(),$n},getHex:function(){let e={};for(var t in $n)void 0!==$n[t]&&(e[t]=sr.htmlToHex($n[t]));return e},getRange:function(){for(var e=0,t=1,i=0,s=1,n=0,r=Pn.length,o=[0,0,0],a=0,l=0;r--;)l=Pn[r].count,e=Math.max(e,l),t=Math.min(t,Pn[r].hsl[2]),i=Math.max(i,Pn[r].hsl[2]),s=Math.min(s,Pn[r].hsl[1]),n=Math.max(n,Pn[r].hsl[1]),o[0]+=Pn[r].rgb[0]*l,o[1]+=Pn[r].rgb[1]*l,o[2]+=Pn[r].rgb[2]*l,a+=l;o[0]/=a,o[1]/=a,o[2]/=a,Un=sr.getHtml(o);var h=i-t,c=n-s;er.lumTargetDark=0+Nn*h,er.lumMaxDark=0+Vn*h,er.lumMinLight=0+jn*h,er.lumTargetLight=0+Hn*h,er.lumMinNormal=0+qn*h,er.lumTargetNormal=0+Xn*h,er.lumMaxNormal=0+Wn*h,er.lumWeight=0+Kn*h,er.satTargetMuted=0+Zn*c,er.satMaxMuted=0+Yn*c,er.satTargetVibrant=n,er.satMinVibrant=s,er.satWeight=0+_n*c,Ln=e;for(r=Pn.length;r--;)Pn[r].count===Ln&&(Fn=Pn[r].hex),Pn[r].hsl[2]===i&&(zn=Pn[r].hex),Pn[r].hsl[2]===t&&(Gn=Pn[r].hex)},findColorVariation:function(e,t,i,s,n,r,o){let a,l,h,c,d,u,p,f=null;for(c=0,a=0,l=Pn.length;a<l;a++)u=Pn[a],d=u.hsl[1],h=u.hsl[2],d>=n&&d<=r&&h>=t&&h<=i&&!u.select&&(p=this.createComparisonValue(d,s,h,e,u.count),(null===f||p>c)&&(f=u,c=p));return null!==f?(f.select=!0,f.hex):"#000"},createComparisonValue:function(e,t,i,s,n){return this.weightedMean(this.invertDiff(e,t),er.satWeight,this.invertDiff(i,s),er.lumWeight,n/Ln,Jn)},invertDiff:function(e,t){return 1-Math.abs(e-t)},weightedMean:function(){var e,t,i,s,n;for(s=1<=arguments.length?tr.call(arguments,0):[],t=0,i=0,e=0;e<s.length;)t+=s[e]*(n=s[e+1]),i+=n,e+=2;return t/i},createPixelArray:function(e,t,i){for(var s,n,r,o,a,l=e,h=[],c=0;c<t;c+=i)n=l[(s=4*c)+0],r=l[s+1],o=l[s+2],(void 0===(a=l[s+3])||a>=125)&&(n>250&&r>250&&o>250||h.push([n,r,o]));return h},getColorFromUrl:function(e,t){var i=this,s=new XMLHttpRequest;s.open("GET",e,!0),s.responseType="blob",s.onload=function(){if(2===s.readyState);else if(3===s.readyState);else if(4===s.readyState)if(200===s.status||0===s.status){var e=new Image;e.onload=function(s){Dn.revokeObjectURL(e.src),t(i.getPalette(e),e)},e.src=Dn.createObjectURL(s.response)}else console.error("Couldn't load [image] ["+s.status+"]")},s.send()}},sr={getHtml:function(e){return"#"+((1<<24)+(e[0]<<16)+(e[1]<<8)+e[2]).toString(16).slice(1,7)},getHsl:function(e){var t,i,s,n,r,o,a=e[0]/255,l=e[1]/255,h=e[2]/255;if(i=0,o=0,s=((n=Math.max(a,l,h))+(r=Math.min(a,l,h)))/2,n===r)i=o=0;else{switch(t=n-r,o=s>.5?t/(2-n-r):t/(n+r),n){case a:i=(l-h)/t+(l<h?6:0);break;case l:i=(h-a)/t+2;break;case h:i=(a-l)/t+4}i/=6}return[i,o,s]},htmlToHex:function(e){return e.toUpperCase().replace("#","0x")},hexToHtml:function(e){return"#"+("000000"+(e=void 0===e?0:e).toString(16)).substr(-6)}};class nr{constructor(e,t,i,s,n,r,o){var a=this;a.r1=e,a.r2=t,a.g1=i,a.g2=s,a.b1=n,a.b2=r,a.histo=o}volume(e){var t=this;return t._volume&&!e||(t._volume=(t.r2-t.r1+1)*(t.g2-t.g1+1)*(t.b2-t.b1+1)),t._volume}count(e){var t=this,i=t.histo;if(!t._count_set||e){var s,n,r,o=0;for(s=t.r1;s<=t.r2;s++)for(n=t.g1;n<=t.g2;n++)for(r=t.b1;r<=t.b2;r++)o+=i[In(s,n,r)]||0;t._count=o,t._count_set=!0}return t._count}copy(){var e=this;return new nr(e.r1,e.r2,e.g1,e.g2,e.b1,e.b2,e.histo)}avg(e){var t=this,i=t.histo;if(!t._avg||e){var s,n,r,o,a=0,l=0,h=0,c=0;for(n=t.r1;n<=t.r2;n++)for(r=t.g1;r<=t.g2;r++)for(o=t.b1;o<=t.b2;o++)a+=s=i[In(n,r,o)]||0,l+=s*(n+.5)*8,h+=s*(r+.5)*8,c+=s*(o+.5)*8;t._avg=a?[~~(l/a),~~(h/a),~~(c/a)]:[~~(8*(t.r1+t.r2+1)/2),~~(8*(t.g1+t.g2+1)/2),~~(8*(t.b1+t.b2+1)/2)]}return t._avg}contains(e){var t=this,i=e[0]>>3,s=e[1]>>3,n=e[2]>>3;return i>=t.r1&&i<=t.r2&&s>=t.g1&&i<=t.g2&&n>=t.b1&&i<=t.b2}}class rr{constructor(){this.vboxes=new En((function(e,t){return Sn.naturalOrder(e.vbox.count()*e.vbox.volume(),t.vbox.count()*t.vbox.volume())}))}push(e){this.vboxes.push({vbox:e,color:e.avg()})}palette(){return this.vboxes.map((function(e){return e.color}))}colors(){var e=[];return this.vboxes.map((function(t){var i=t.vbox.count()||0,s=t.color;i&&e.push({rgb:s,hsl:sr.getHsl(s),hex:sr.getHtml(s),count:i,select:!1})})),e}size(){return this.vboxes.size()}map(e){for(var t=this.vboxes,i=0;i<t.size();i++)if(t.peek(i).vbox.contains(e))return t.peek(i).color;return this.nearest(e)}nearest(e){for(var t,i,s,n=this.vboxes,r=0;r<n.size();r++)((i=Math.sqrt(Math.pow(e[0]-n.peek(r).color[0],2)+Math.pow(e[1]-n.peek(r).color[1],2)+Math.pow(e[1]-n.peek(r).color[1],2)))<t||void 0===t)&&(t=i,s=n.peek(r).color);return s}forcebw(){var e=this.vboxes;e.sort((function(e,t){return Sn.naturalOrder(Sn.sum(e.color),Sn.sum(t.color))}));var t=e[0].color;t[0]<5&&t[1]<5&&t[2]<5&&(e[0].color=[0,0,0]);var i=e.length-1,s=e[i].color;s[0]>251&&s[1]>251&&s[2]>251&&(e[i].color=[255,255,255])}}class or{constructor(e){this.previewH=128,this.useHalfFloat=!0,this.gamma=1,this.renderer=e,this.sunSpherical=new i.Spherical,this.sunPosition=new i.Vector3(0,1,0),this.dataPreview=null,this.palette={},this.color={sun:new i.Color(1,1,1),fog:new i.Color(.5,.5,.5),sky:new i.Color(0,0,0),ground:new i.Color(0,0,0)}}init(e,t,s){this.target||(this.plane=new i.Mesh(new i.PlaneGeometry(1,1),new i.MeshBasicMaterial({map:s,toneMapped:!1})),this.plane.scale.y=-1,this.scene=new i.Scene,this.scene.add(this.plane),this.camera=new i.OrthographicCamera(-.5,.5,.5,-.5,0,1),this.target=new i.WebGLRenderTarget(e,t,{format:i.RGBAFormat,type:this.useHalfFloat?i.HalfFloatType:i.FloatType}),this.read=this.useHalfFloat?new Uint16Array(e*t*4):new Float32Array(e*t*4))}clear(){this.sunPosition.set(0,1,0),this.color.sun.set(1,1,1),this.color.fog.set(.5,.5,.5),this.color.sky.set(0,0,0),this.color.ground.set(0,0,0),this.dataPreview=null,this.palette={},this.target&&(this.target.texture&&this.target.texture.dispose(),this.target.dispose(),this.scene.remove(this.plane),this.plane.material.map.dispose(),this.plane.geometry.dispose(),this.plane.material.dispose(),this.plane=null,this.scene=null,this.camera=null,this.target=null,this.read=null)}render(e,t,i){this.init(t,i,e),this.renderer.setRenderTarget(this.target),this.renderer.render(this.scene,this.camera),this.renderer.setRenderTarget(null),this.renderer.readRenderTargetPixels(this.target,0,0,t,i,this.read);const s=[];if(this.useHalfFloat){let e,t=this.read.length/4;for(;t--;)e=4*t,s[e]=255*this.float16ToNumber(this.read[e]),s[e+1]=255*this.float16ToNumber(this.read[e+1]),s[e+2]=255*this.float16ToNumber(this.read[e+2]),s[e+3]=255*this.float16ToNumber(this.read[e+3])}else s=this.read.map((e=>Math.round(255*e)));return s}float16ToNumber(e){const t=new ArrayBuffer(4),i=new DataView(t);i.setUint16(2,e,!1);const s=i.getInt32(0,!1);let n=32767&s,r=32768&s;return n<<=13,r<<=16,n+=939524096,n=0===(31744&s)?0:n,n|=r,i.setInt32(0,n,!1),i.getFloat32(0,!1)}run(e){const t=e.image;let s=this.previewH/t.height;const n=t.width*s,r=t.height*s,o=this.render(e,n,r),a=o.length/4,l=new Uint8ClampedArray(4),h=new Uint8ClampedArray(o.length),c=1/this.gamma;let d,u,p,f,m,g,A,b,v=a,y=1/255,w=0,x=0,O=0,C=0,S=0,I=0,E=0,k=0,B=0,Q=0;for(;v--;)u=4*v,A=v%n,b=Math.floor((v-A)/n),p=255*Math.pow(o[u+0]/255,c),f=255*Math.pow(o[u+1]/255,c),m=255*Math.pow(o[u+2]/255,c),g=p+f+m,b===.5*r&&(w+=p,x+=f,O+=m),b===.25*r&&(E+=p,k+=f,B+=m),b===.75*r&&(C+=p,S+=f,I+=m),g>Q&&(l[0]=p,l[1]=f,l[2]=m,l[3]=255,d=v,Q=g),h[u]=p,h[u+1]=f,h[u+2]=m,h[u+3]=255;A=d%n,b=Math.floor((d-A)/n),this.color.sun.setRGB(l[0]*y,l[1]*y,l[1]*y,i.SRGBColorSpace),this.color.fog.setRGB(w/n*y,x/n*y,O/n*y,i.SRGBColorSpace),this.color.sky.setRGB(E/n*y,k/n*y,B/n*y,i.SRGBColorSpace),this.color.ground.setRGB(C/n*y,S/n*y,I/n*y,i.SRGBColorSpace),this.sunSpherical.set(1,b/r*Math.PI,-A/n*(2*Math.PI)-.5*Math.PI),this.sunPosition.setFromSpherical(this.sunSpherical),this.dataPreview={data:h,x:A,y:b,w:n,h:r},this.palette={sun:"#"+this.color.sun.getHexString(),m:void 0,sky:"#"+this.color.sky.getHexString(),fog:"#"+this.color.fog.getHexString(),ground:"#"+this.color.ground.getHexString(),...ir.getPalette(this.dataPreview)}}}class ar extends i.DirectionalLightHelper{constructor(e,t,s){super(e,t=t||1,s);let n=new i.PlaneGeometry(2*t,2*t),r=new i.MeshBasicMaterial({color:this.light.color,fog:!1,toneMapped:!1});this.m2=new i.Mesh(n,r),this.shadow=new i.CameraHelper(e.shadow.camera),this.shadow.setColors(e.color,new i.Color(2236962),new i.Color(2236962),e.color,new i.Color(6710886)),this.children[0].add(this.m2)}dispose(){super.dispose(),this.m2&&(this.m2.geometry.dispose(),this.m2.material.dispose())}update(){super.update(),this.m2&&this.m2.material.color.copy(this.light.color)}}let lr=[],hr={},cr=[],dr=!1;class ur{static define(e={},t,i=!1){let s="PCSS"===e.shadowType?-1:1;ur.add({type:"direct",name:"sun",intensity:e.direct,distance:30,parent:t,shadow:{range:30,near:5,far:70,bias:-5e-4*s,radius:4,quality:2048*e.quality,intensity:e.shadowIntensity}}),ur.add({type:"hemi",name:"hemi",intensity:e.hemiIntensity,skyColor:14544639,groundColor:986637,pos:[0,1,0],parent:t})}static update(e={}){let t=!1;void 0!==e.sunIntensity&&hr.sun&&(hr.sun.intensity=e.sunIntensity),void 0!==e.shadowIntensity&&hr.sun&&(hr.sun.shadow.intensity=e.shadowIntensity),e.sunPos&&(hr.sun&&(hr.sun.position.fromArray(e.sunPos).multiplyScalar(hr.sun.distance),hr.sun.target.position.set(0,1,0),t=!0),hr.sun2&&(hr.sun2.position.fromArray(e.sunPos).multiplyScalar(hr.sun2.distance),hr.sun2.target.position.set(0,1,0),t=!0)),e.sunColor&&(hr.sun&&ur.setColor(hr.sun.color,e.sunColor),hr.sun2&&ur.setColor(hr.sun2.color,e.sunColor),t=!0),hr.hemi&&(void 0!==e.hemiIntensity&&(hr.hemi.intensity=e.hemiIntensity),e.skyColor&&ur.setColor(hr.hemi.color,e.skyColor),e.groundColor&&ur.setColor(hr.hemi.groundColor,e.groundColor),t=!0),t&&ur.updateHelper()}static setColor(e,t){t.isColor?e.copy(t):e.setHex(t)}static adds(e){let t=e.length,i=0;for(;t--;)ur.add(e[i]),i++}static add(e={}){if(e.constructor===Array)return ur.adds(e);let t=null;switch(e.color||(e.color=16777215),e.type){case"direct":t=new i.DirectionalLight(e.color,e.intensity),t.distance=void 0!==e.distance?e.distance:2;break;case"spot":t=new i.SpotLight(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"point":t=new i.PointLight(e.color,e.intensity,e.distance,e.decay);break;case"ambient":t=new i.AmbientLight(e.color,e.intensity);break;case"rec":t=new i.RectAreaLight(e.color,e.intensity,e.width=10,e.height);break;case"hemi":t=new i.HemisphereLight(e.skyColor||0,e.groundColor||0,e.intensity)}return t?(t.name=e.name||"light"+lr.length,e.pos&&t.position.fromArray(e.pos),e.parent&&(t.target&&e.parent.add(t.target),e.parent.add(t)),t.shadow&&e.shadow&&ur.setShadow(t,e.shadow),lr.push(t),hr[t.name]=t,t):void 0}static setShadow(e,t){const i=e.shadow;if(!i)return;t.quality&&(i.mapSize.width=i.mapSize.height=t.quality);const s=i.camera;s.isOrthographicCamera&&(t.range&&(s.top=s.right=t.range,s.bottom=s.left=-t.range),t.near&&(s.near=t.near),t.far&&(s.far=t.far)),s.isPerspectiveCamera&&(t.near&&(s.near=t.near),t.far&&(s.far=t.far)),t.bias&&(i.bias=t.bias),t.radius&&(i.radius=t.radius),t.blurSamples&&(i.blurSamples=t.blurSamples),t.intensity&&(i.intensity=t.intensity),i.needsUpdate=!0,e.updateWorldMatrix(!0,!0),e.target.updateWorldMatrix(!0,!0),e.castShadow=!0}static byName(e){return hr[e]}static dispose(){ur.disposeHelper();let e,t=lr.length;for(;t--;)e=lr[t],e.parent&&e.parent.remove(e),e.target&&e.target.parent&&e.target.parent.remove(e.target),e.dispose();lr=[],hr={}}static castShadow(e){let t,i=lr.length;for(;i--;)t=lr[i],void 0!==t.shadow&&(t.castShadow=e,e||t.shadow.dispose())}static addHelper(e,t){if(e&&!dr){let e,s,n=lr.length;for(;n--;){switch(e=lr[n],e.type){case"DirectionalLight":s=new ar(e);break;case"PointLight":s=new i.PointLightHelper(e,.25,e.color);break;case"SpotLight":s=new i.SpotLightHelper(e,e.color);break;case"HemisphereLight":s=new i.HemisphereLightHelper(e,.25),s.material.wireframe=!1}s&&(cr.push(s),t.add(s),s.shadow&&(cr.push(s.shadow),t.add(s.shadow)))}dr=!0}return e||ur.disposeHelper(),dr}static updateHelper(){if(!dr)return;let e=cr.length;for(;e--;)cr[e].update()}static disposeHelper(){if(!dr)return;let e,t=cr.length;for(;t--;)e=cr[t],e.parent.remove(e),e.dispose();cr=[],dr=!1}}let pr="",fr=!0,mr=!0,gr=!1,Ar=null,br=null,vr=!1,yr=null,wr=null,xr=!1,Or=!1,Cr=null,Sr=null,Ir=null,Er=null,kr=null,Br=new i.Color,Qr=null,Mr=null,Tr=0;new i.Vector2;const Dr=new Ui,Rr=new zi;let Pr=!1,Lr=null;class Fr{static setMain(e){Lr=e}static get(){return Sr}static dispose(){Qr.background&&Qr.background.dispose&&Qr.background.dispose(),Qr.environment&&Qr.environment.dispose&&Qr.environment.dispose(),Qr.background=null,Qr.environment=null,Pr=!1,Ar&&Ar.clear(),br&&Fr.clearProject(),Sr&&Sr.dispose(),Ir&&Ir.dispose(),Cr&&Cr.dispose(),Sr=null,Ir=null}static reset(){Fr.clearProject(),vr=!1}static clearProject(){br&&(Qr.remove(br),br.geometry.dispose(),br=null)}static project(e=500,t=100){vr=!0,Ir&&(br&&Fr.clearProject(),br=new Cn(Ir),br.scale.setScalar(100),Qr.add(br),br.radius=e,br.height=t)}static set(e,t=()=>{}){Fr.dispose(),"string"==typeof e?"null"!==e?-1!==e.search("/")?this.load(e,t):(pr=e,-1!==pr.search("_4k")?this.load("./assets/textures/env/"+e+".jpg",t,"jpg"):this.load("./assets/textures/equirectangular/"+e+".hdr",t,"hdr")):(Qr.environment=null,Qr.background=null,t()):isNaN(e)||(this.setBackgroud(e),t())}static setFloorRadius(e){kr&&(kr.radius=e)}static setFloorHeight(e){kr&&(kr.height=e)}static setBlur(e){Qr&&(Qr.backgroundBlurriness=e)}static addFloor(e,t=2){console.log("addFloor",e),e?(kr=new GroundProjectedEnv(Sr),kr.scale.setScalar(100),kr.radius=100,kr.height=10,Qr.add(kr)):kr&&Qr.remove(kr)}static setBackgroud(e){void 0!==e?(Pr=!0,Qr.background=Br.setHex(e)):(Pr=!1,Qr.background=Sr)}static init(e,t,s=!0){e&&(Mr=e,gr=Mr.isWebGPURenderer||!1,mr=!gr&&mr),t&&(Qr=t),fr=void 0===s||s,gr&&(fr=!1),fr&&(Ar=new or(Mr)),mr&&(Er=new i.PMREMGenerator(Mr),Er.compileEquirectangularShader())}static async load(e,t,i="hdr"){"hdr"===i?Ir=await Dr.loadAsync(e):"exr"===i&&(Ir=await Rr.loadAsync(e)),Fr.process(),t&&t()}static process(){mr?(Cr=Er.fromEquirectangular(Ir),Sr=Cr.texture,Er.dispose()):(Sr=Ir,Sr.mapping=i.EquirectangularReflectionMapping),Qr&&(Qr.environment=Sr,kr?kr.map=Sr:Qr.background=Pr?Br:Sr),vr&&Fr.project(),Tr=0,fr&&Fr.up()}static up(){0===Tr&&(Fr.autoSun(),Fr.upLight()),Tr++,Tr<6&&(Tr=0),Tr=0}static getCanvas(){const e=Ar.dataPreview;null===yr&&(yr=document.createElement("canvas")),yr.style.cssText="position:absolute; left:10px; bottom:20px; width:"+e.w+"px; height:"+e.h+"px; border:1px solid #222;",yr.width=e.w,yr.height=e.h;let t=yr.getContext("2d"),i=t.createImageData(e.w,e.h),s=i.data.length;for(;s--;)i.data[s]=e.data[s];t.putImageData(i,0,0)}static getPalette(){return Ar.palette}static preview(e){Fr.palettePreview(e);const t=Ar.dataPreview;if(null!==t)if(e){null===yr&&(yr=document.createElement("canvas")),yr.style.cssText="position:absolute; left:10px; bottom:10px; width:"+t.w+"px; height:"+t.h+"px; border:1px solid #222;",yr.width=t.w,yr.height=t.h;let e=yr.getContext("2d"),i=e.createImageData(t.w,t.h),s=i.data.length;for(;s--;)i.data[s]=t.data[s];e.putImageData(i,0,0),e.lineWidth=2,e.strokeStyle="red",e.beginPath(),e.arc(t.x,t.y,5,0,2*Math.PI),e.stroke(),xr||(document.body.appendChild(yr),xr=!0)}else xr&&(document.body.removeChild(yr),xr=!1)}static palettePreview(e){let t=25.6,i=0,s=0,n=0,r=3*t+5,o=Ar.palette;if(e){null===wr&&(wr=document.createElement("canvas")),wr.style.cssText="position:absolute; left:271px; bottom:10px; width:"+r+"px; height:128px; border:1px solid #222;",wr.width=r,wr.height=128;const e=wr.getContext("2d");e.fillStyle="#000",e.fillRect(0,0,r,128);for(let r in o)void 0!==o[r]&&(n=Math.floor(i/5),s=i-5*n,e.fillStyle=o[r],e.fillRect(n*t+(n>0?5:0),s*t,t,t)),i++;Or||(document.body.appendChild(wr),Or=!0)}else Or&&(document.body.removeChild(wr),Or=!1)}static autoSun(){Ar.run(Ir),Lr&&Lr.setColors(Ar.palette),Fr.preview(xr)}static getFogColor(){return Ar.color.fog}static upLight(){let e=Ar;Qr.fog&&Qr.fog.color.copy(e.color.fog);const t={sunPos:e.sunPosition.toArray(),sunColor:e.color.sun,skyColor:e.color.sky,groundColor:e.color.ground};ur.update(t)}}const Ur=["ENV","PHY","CAM","POST","MAT","OBJ"];let zr=null;const Gr={tool:d,open:!1,isInit:!1,graph:null,ui:null,uix:null,gp:null,video:null,envui:null,CameraOptions:[],startMode:"ENV",mode:"",currentMat:"",matList:null,imageMap:["map","map1","map2","emissiveMap","sheenColorMap"],imageNormal:["normalMap","normalMap1","normalMap2","aoMap","metalnessMap","thicknessMap","roughnessMap","alphaMap","anisotropyMap","specularIntensityMap","displacementMap","bumpMap"],MaterialMesh:["Basic","Physical","Standard","Toon","Lambert","Phong","Shader"],joy:null,p0:"M 0.5 1.5 L 9.5 1.5 M 0.5 5.5 L 9.5 5.5 M 0.5 9.5 L 9.5 9.5",p1:"M 1.5 0.5 L 1.5 9.5 M 5.5 0.5 L 5.5 9.5 M 9.5 0.5 L 9.5 9.5",bg:"rgba(0,0,8,0.5)",colors:{over:"#025B18",overoff:"#025B18",select:"#023612",textSelect:"#1FC742",border:"none",fontShadow:"#000",radius:0,showOver:0,content:"none",background:"none",backgroundOver:"none",font:"'SegoeUI', 'Segoe UI', 'Helvetica Neue', -apple-system, BlinkMacSystemFont, Roboto, Oxygen-Sans, Ubuntu, Cantarell, sans-serif",fontSize:13,text:"#fff",title:"#eee",borderSize:2,joyOut:"rgba(255,255,255,0.1)",joyOver:"rgba(127,255,0,0.2)",joySelect:"#7fFF00"},setMain:e=>{zr=e},extraUi:(e=null)=>{if(Gr.uix&&(Gr.uix.dispose(),console.log("uix dispose")),Gr.uix=new z({parent:zr.getCorner(),w:200,h:24,open:!0,close:!1,css:"left:40px;",bottom:40,colors:Gr.colors,transition:0}),e){let t,i=e.length;for(let s=0;s<i;s++)t=e[s],Gr.uix.add(t.obj,t.name,t)}return Gr.uix},setTextureConstrutor:e=>{d.texture=e},showHide:()=>{Gr.isInit||Gr.init(),Gr.open?Gr.open=!1:Gr.open=!0,Gr.ui.isOpen=Gr.open,xn.switchGuiButton(Gr.open),Gr.menu.display(Gr.open),Gr.ui.display(Gr.open),Gr.ui.calc(),Gr.ui.mode("def")},init:()=>{d.setStyle(Gr.colors),Gr.menu=F("button",{type:"button",values:Ur,value:Gr.startMode,selectable:!0,unselect:!1,p:0,h:30,w:250,radius:0,pos:{right:"5px",top:"60px"}}).onChange(Gr.setMode),Gr.menu.icon(Nr("env"),0,2),Gr.menu.icon(Nr("phy"),0,3),Gr.menu.icon(Nr("cam"),0,4),Gr.menu.icon(Nr("post"),0,5),Gr.menu.icon(Nr("mat"),0,6),Gr.menu.icon(Nr("asset"),0,7),Gr.ui=new z({w:250,h:25,open:!1,close:!1,css:"right:5px; top:97px;",colors:Gr.colors,transition:0}),Gr.setMode(Gr.startMode),Gr.isInit=!0},setMode(e){if(Gr.mode!==e){switch(Gr.mode=e,Gr.graph=null,Gr.ui.clear(),Gr.mode){case"ENV":Gr.display();break;case"PHY":Gr.physics();break;case"CAM":Gr.camera();break;case"POST":Gr.postprocess();break;case"MAT":Gr.material()}Gr.ui.add("empty",{h:6})}},doReset:()=>{Gr.isInit&&Gr.open&&setTimeout(Gr.reset,0)},reset:()=>{if(!Gr.isInit)return;if(!Gr.open)return;let e=Gr.mode;Gr.mode="",Gr.currentMat="",e&&Gr.setMode(e)},resetExtra:()=>{Gr.uix&&(Gr.uix.dispose(),Gr.uix=null)},display:()=>{if("ENV"!==Gr.mode)return;const e=Gr.ui,t=zr.getOption(),i=zr.getRenderer();zr.getScene();const s=zr.getToneMappingOptions();e.add(t,"mode",{type:"button",values:["LOW","HIGH"],selectable:!0,unselect:!1,p:0}).onChange(zr.changeMode),e.add(t,"debug",{type:"bool"}).onChange(zr.debugMode),e.add(t,"harmony",{type:"bool"}).onChange(xn.harmony),e.add(t,"show_light",{type:"bool"}).onChange(zr.showDebugLight),e.add(t,"show_stat",{type:"bool"}).onChange(zr.showStatistic),e.add(t,"tone",{type:"list",list:s,full:!0}).onChange((function(e){i.toneMapping=s[t.tone]})),e.add(t,"exposure",{min:0,max:1,step:.001,pecision:3,mode:2}).onChange((function(e){i.toneMappingExposure=e})),e.add(t,"direct",{rename:"Light Direct",min:0,max:100,mode:2,color:"#ff0"}).onChange(zr.lightIntensity),e.add(t,"spherical",{rename:"Light Hemi",min:0,max:10,mode:2,color:"#ff0"}).onChange(zr.lightIntensity),e.add(t,"shadowIntensity",{rename:"shadow",min:0,max:1,mode:2,color:"#ff0"}).onChange(zr.shadowIntensity),e.add(t,"envIntensity",{min:0,max:20,mode:2,color:"#8ff"}).onChange(zr.envmapIntensity),e.add(t,"bgIntensity",{min:0,max:20,mode:2,color:"#8ff"}).onChange(zr.bgIntensity),e.add(t,"envBlur",{min:0,max:1,mode:2,color:"#8ff"}).onChange(zr.setBlur),e.add(t,"reflect",{min:0,max:1,mode:2,color:"#8ff"}).onChange(zr.setReflect),Gr.envui=e.add("list",{name:"Envmap",list:zr.envList,value:t.envmap,path:"assets/textures/equirectangular/mini/",format:".jpg",m:0,imageSize:[128,64],h:40}).onChange(zr.setEnv);const n=zr.getHub3d();if(n){let t=e.add("group",{name:"VIGNETTE",open:!1});t.add(n,"grain",{min:0,max:.5,mode:2,color:"#8ff"}),t.add(n,"offset",{min:0,max:2,mode:2,color:"#8ff"}),t.add(n,"darkness",{min:0,max:1,mode:2,color:"#8ff"}),t.add(n,"color",{type:"color"}).listen()}},objects:()=>{Gr.mode},physics:()=>{if("PHY"!==Gr.mode)return;const e=Gr.ui,t=zr.motor.getSetting();Gr.graph=e.add("fps",{name:"stat",h:22,hplus:180,custom:!0,alpha:.5,res:50,names:["three","phy"],cc:["200,200,200","50,120,220"],range:[25,25],precision:2,radius:4,color:"#EEEEEE",adding:!1}),Gr.graph.open(),e.add("bool",{name:"WORKER OFF",onName:"WORKER ON",value:zr.isWorker,mode:1}).onChange(Gr.swapWorker);let i=e.add("button",{type:"button",values:["REPLAY","PAUSE"],p:0}).onChange((e=>{"PAUSE"===e&&(phy.pause(!0),i.switchValues(1,"PLAY")),"PLAY"===e&&(phy.pause(!1),i.switchValues(1,"PAUSE")),"REPLAY"===e&&zr.injectCode(zr.getCode())}));e.add("empty",{h:6}),e.add("button",{type:"button",values:["DRAG","SHOOT","BUILD"],value:"DRAG",selectable:!0,unselect:!1,p:0}).onChange((e=>{phy.mouseMode(e.toLowerCase())})),e.add(t,"gravity",{type:"number"}).onChange(zr.motor.setGravity)},camera:()=>{if("CAM"!==Gr.mode)return;const e=Gr.ui,t=zr.getControler();zr.getRenderer(),zr.getOption();const i=function(){zr.setCamera({...t.info})};let s=e.add("group",{name:"CAMERA",open:!0});s.add(t.info,"phi",{min:-90,max:90,precision:1,mode:2,color:"#ff0"}).onChange(i).listen(),s.add(t.info,"theta",{min:-180,max:180,precision:1,mode:2,color:"#ff0"}).onChange(i).listen(),s.add("empty",{h:6}),s.add(t.info,"fov",{min:1,max:180,precision:1,mode:2,color:"#8ff"}).onChange(i).listen(),s.add(t.info,"zoom",{min:.1,max:10,precision:1,mode:2,color:"#8ff"}).onChange(i).listen(),s.add("empty",{h:6}),s.add(t.info,"distance",{type:"number",min:0,max:100,mode:2}).onChange(i).listen(),s.add(t.info,"x",{type:"number",min:-50,max:50,precision:2,mode:2}).onChange(i).listen(),s.add(t.info,"y",{type:"number",min:-50,max:50,precision:2,mode:2}).onChange(i).listen(),s.add(t.info,"z",{type:"number",min:-50,max:50,precision:2,mode:2}).onChange(i).listen(),s.add("button",{name:"SCREENSHOT"}).onChange((function(){zr.motor.screenshot()}))},postprocess:e=>{if("POST"!==Gr.mode)return;const t=Gr.ui,i=zr.getOption();e||(t.clear(),t.add(i,"composer",{type:"bool",rename:"POST PROCESS OFF",onName:"POST PROCESS ON",mode:1,h:40}).onChange(zr.setComposer),Gr.gp=t.add("group",{name:"OPTION"}));let s=Gr.gp;s.clear();const n=zr.getComposer();if(zr.getScene(),!n)return;let r=n.getPass(),o=r.length,a=0;for(;o--;)r[a],s.add(r[a],"enabled",{type:"bool",rename:r[a].name+" OFF",onName:r[a].name+" ON",mode:1,h:30}).onChange(zr.setComposer),a++;s.open()},gotoGithub:()=>{window.open("https://github.com/lo-th/phy","_blank")},swapWorker:e=>{zr.isWorker=e,Gr.swapEngine()},swapEngine:e=>{e||(e=zr.engineType);let t=e.toLowerCase(),i=location.hash,s="E=";zr.devMode&&(s+="dev_"),zr.isWorker&&(s+="w_"),s+=t,window.open("index.html?"+s+i,"_self")},capture:e=>{!Gr.video&&e?Gr.video=new On:e?Gr.video.start():(Gr.video.stop(),Gr.video=null)},update:()=>{Gr.video&&Gr.video.update(),Gr.graph&&Gr.graph.tick([1e3*zr.motor.getDelta(),1e3*zr.motor.getDelta2()])},material:()=>{if("MAT"!==Gr.mode)return;const e=Gr.ui;e.clear();let t=zr.motor.getMatRef().getList();const i=e.add("list",{name:"",list:t,p:0,value:Gr.currentMat,h:40}).onChange(Gr.materialEdit);if(!Gr.currentMat)return void i.text("Select Material");let s=t[Gr.currentMat],n=s.type;-1!==n.search("Mesh")&&(n=n.substring(4));let r=n.search("Material");n=n.substring(0,r),e.add("list",{name:"Type",list:Gr.MaterialMesh,value:n,h:30}).onChange(),void 0!==s.side&&e.add(s,"side",{type:"list",list:{front:0,back:1,double:2}}).onChange((function(e){s.side=this.list.indexOf(e)})),void 0!==s.shadowSide&&e.add(s,"shadowSide",{type:"list",list:{front:0,back:1,double:2}}).onChange((function(e){s.shadowSide=this.list.indexOf(e)}));let o=e.add("group",{name:"COLORS",color:"#FFaaaa",h:30});void 0!==s.color&&o.add(s,"color",{}),void 0!==s.specularColor&&o.add(s,"specularColor",{rename:"specular"}),void 0!==s.emissive&&o.add(s,"emissive",{}),void 0!==s.sheen&&o.add(s,"sheenColor",{rename:"sheen"});let a,l=e.add("group",{name:"IMAGES",color:"#FFFF88",h:30}),h=[...Gr.imageMap,...Gr.imageNormal];for(let e=0;e<h.length;e++)if(a=h[e],name="null",void 0!==s[a]){let e=a.substring(0,a.lastIndexOf("M")),t="";"displacement"===e&&(e="displace"),"map"!==a&&"emissive"!==e&&"sheen"!==e||(t="srgb"),l.add(s,a,{name:a,rename:e,colorSpace:t,type:"bitmap",h:30})}let c=e.add("group",{name:"OPTIONS",color:"#88FFFF",h:30});void 0!==s.randomUv&&c.add(s,"randomUv",{}),void 0!==s.wireframe&&c.add(s,"wireframe",{}),void 0!==s.vertexColors&&c.add(s,"vertexColors",{}),void 0!==s.forceSinglePass&&c.add(s,"forceSinglePass",{rename:"singlePass"}),void 0!==s.visible&&c.add(s,"visible",{}),void 0!==s.depthTest&&c.add(s,"depthTest",{}),void 0!==s.depthWrite&&c.add(s,"depthWrite",{}),void 0!==s.alphaToCoverage&&c.add(s,"alphaToCoverage",{}),void 0!==s.premultipliedAlpha&&c.add(s,"premultipliedAlpha",{}),void 0!==s.transparent&&c.add(s,"transparent",{});let d=e.add("group",{name:"VALUES",open:!0,h:30});void 0!==s.normalScale&&d.add(s,"normalScale",{rename:"normal",min:-10,max:10,precision:2}),void 0!==s.clearcoatNormalScale&&d.add(s,"clearcoatNormalScale",{rename:"clearcoat n",min:-10,max:10,precision:2});let u={min:0,max:1,mode:2};void 0!==s.metalness&&d.add(s,"metalness",{...u}),void 0!==s.roughness&&d.add(s,"roughness",{...u}),void 0!==s.envMapIntensity&&d.add(s,"envMapIntensity",{...u,rename:"envmap",max:3}),void 0!==s.opacity&&d.add(s,"opacity",{...u}),void 0!==s.reflectivity&&d.add(s,"reflectivity",{...u}),void 0!==s.specularIntensity&&d.add(s,"specularIntensity",{...u}),void 0!==s.aoMapIntensity&&d.add(s,"aoMapIntensity",{...u,rename:"ax"}),void 0!==s.emissiveIntensity&&d.add(s,"emissiveIntensity",{...u,rename:"emissive",max:3}),void 0!==s.displacementScale&&d.add(s,"displacementScale",{...u,min:-.1,max:.1}),void 0!==s.displacementBias&&d.add(s,"displacementBias",{...u,min:-.1,max:.1}),void 0!==s.bumpScale&&d.add(s,"bumpScale",{...u,rename:"bump",max:3}),void 0!==s.reflectif&&d.add(s,"reflectif",{...u}),void 0!==s.thickness&&d.add(s,"thickness",{...u,min:-4,max:4}),void 0!==s.clearcoat&&d.add(s,"clearcoat",{...u}),void 0!==s.clearcoatRoughness&&d.add(s,"clearcoatRoughness",{...u}),void 0!==s.sheen&&(d.add(s,"sheen",{...u,min:0,max:20}),d.add(s,"sheenRoughness",{...u})),void 0!==s.iridescence&&d.add(s,"iridescence",{...u}),void 0!==s.anisotropy&&d.add(s,"anisotropy",{...u}),void 0!==s.anisotropyRotation&&d.add(s,"anisotropyRotation",{...u}),void 0!==s.ior&&d.add(s,"ior",{...u,min:0,max:4}),void 0!==s.transmission&&d.add(s,"transmission",{...u})},setTexture:(e,t,i,s,n={})=>{if("displace"===i?i="displacementMap":"map"!==i&&(i+="Map"),null===e)return void(s[i]=null);let r=s[i];r&&(n.repeat=r.repeat.toArray()),n.encoding=-1!==Gr.imageMap.indexOf(i),n.flipY=!1;let o=e.substring(0,e.lastIndexOf("."));if("exr"===e.substring(e.lastIndexOf(".")+1))Os.load_EXR(e,o,(function(e){s[i]=e}));else{let e=new Image;e.src=t,e.onload=function(){Os.data.set("I_"+o,e),s[i]=Os.getTexture(o,n)}}},materialEdit:e=>{"MAT"===Gr.mode&&e!==Gr.currentMat&&(Gr.currentMat=e,setTimeout(Gr.material,0))},postprocessEdit:e=>{"POST"===Gr.mode&&Gr.postprocess(!0)}},Nr=function(e,t=!1){var i="",s=t?["#baabfb","#9e87fb","#7463b8","#221d36"]:["#E5E5E5","#D1D1D1","#999999","#383838"],n=["<svg xmlns='http://www.w3.org/2000/svg' version='1.1' xmlns:xlink='http://www.w3.org/1999/xlink' style='pointer-events:none; margin-top:0px;' preserveAspectRatio='none' x='0px' y='0px' width='30px' height='26px' viewBox='0 0 30 26'><g>"];switch(e){case"phy":i="M 22.2 11.35 Q 21.95 10.15 21.25 9.1 L 22.45 7.85 Q 21.95 7.2 21.4 6.65 20.8 6 20.1 5.55 L 18.95 6.75 Q 17.9 6.05 16.65 5.8 L 16.65 4.15 Q 15.9 4 15.05 4 14.2 4 13.4 4.2 L 13.4 5.8 Q 12.15 6.05 11.15 6.75 L 9.95 5.55 Q 9.25 6 8.65 6.65 8.1 7.2 7.65 7.9 L 8.8 9.05 Q 8.1 10.1 7.85 11.35 L 6.2 11.35 Q 6.1 12.15 6.1 13 6.1 13.85 6.2 14.65 L 7.85 14.65 Q 8.1 15.85 8.8 16.9 L 7.6 18.05 Q 8.1 18.7 8.7 19.3 9.25 19.9 9.95 20.4 L 11.1 19.25 Q 12.15 19.9 13.4 20.2 L 13.4 21.85 Q 14.2 21.95 15.05 21.95 15.9 21.95 16.65 21.85 L 16.65 20.2 Q 17.9 19.9 19 19.25 L 20.15 20.4 Q 20.8 19.95 21.4 19.35 22 18.75 22.45 18.05 L 21.25 16.85 Q 21.95 15.85 22.2 14.65 L 23.95 14.65 Q 24.05 13.85 24.05 13 24.05 12.15 23.95 11.35 L 22.2 11.35 M 13.25 11.3 Q 14 10.55 15.05 10.55 16 10.55 16.75 11.3 17.5 12 17.5 13 17.5 14.05 16.75 14.7 16 15.45 15.05 15.45 14 15.45 13.25 14.7 12.6 14.05 12.6 13 12.6 12 13.25 11.3 Z",n[1]="<path stroke="+s[3]+" stroke-width='2' stroke-linejoin='round' stroke-linecap='round' fill='none' d='"+i+"'/>",n[1]+="<path fill="+s[1]+" stroke='none' d='"+i+"'/>";break;case"env":i="M 7.95 18.65 L 9.35 20.05 10.75 18.65 9.35 17.25 7.95 18.65 M 9.35 5.95 L 7.95 7.35 9.35 8.75 10.75 7.35 9.35 5.95 M 20.65 20.05 L 22.05 18.65 20.65 17.25 19.25 18.65 20.65 20.05 M 20.65 8.75 L 22.05 7.35 20.65 5.95 19.25 7.35 20.65 8.75 M 14 22 L 16 22 16 20 14 20 14 22 M 16 6 L 16 4 14 4 14 6 16 6 M 24 12 L 22 12 22 14 24 14 24 12 M 8 12 L 6 12 6 14 8 14 8 12 M 19.3 17.3 Q 21.05 15.55 21.05 13.05 21.05 10.5 19.3 8.75 17.55 7.05 15.05 7.05 12.55 7.05 10.8 8.75 9.05 10.5 9.05 13.05 9.05 15.55 10.8 17.3 12.55 19.05 15.05 19.05 17.55 19.05 19.3 17.3 Z",n[1]="<path stroke="+s[3]+" stroke-width='2' stroke-linejoin='round' stroke-linecap='round' fill='none' d='"+i+"'/>",n[1]+="<path fill="+s[1]+" stroke='none' d='"+i+"'/>";break;case"post":i="M 24 22 L 24 8 20 8 20 4 6 4 6 18 10 18 10 22 24 22 Z",n[1]="<path stroke="+s[3]+" stroke-width='2' stroke-linejoin='round' stroke-linecap='round' fill='none' d='"+i+"'/>",n[1]+="<path fill="+s[1]+" stroke='none' d='"+i+"'/>",n[1]+="<path fill="+s[2]+" stroke='none' d='M 20 8 L 20 4 6 4 6 18 10 18 10 8 20 8 Z'/>";break;case"cam":i="M 23 20 L 24 20 24 6 23 6 19 10 18.05 10 18.05 6.05 6.05 6.05 6.05 20.3 18.05 20.3 18.05 16 19 16 23 20 Z",n[1]="<path stroke="+s[3]+" stroke-width='2' stroke-linejoin='round' stroke-linecap='round' fill='none' d='"+i+"'/>",n[1]+="<path fill="+s[2]+" stroke='none' d='"+i+"'/>",n[1]+="<path fill="+s[1]+" stroke='none' d='M 23 20 L 24 20 24 6 23 6 19 10 19 16 23 20 M 18 6.05 L 8 6.05 8 18.15 18 18.15 18 6.05 Z'/>";break;case"mat":i="M 24 4 L 6 4 6 22 24 22 24 4 Z",n[1]="<path stroke="+s[3]+" stroke-width='2' stroke-linejoin='round' stroke-linecap='round' fill='none' d='"+i+"'/>",n[1]+="<path fill="+s[2]+" stroke='none' d='"+i+"'/>",n[1]+="<path fill="+s[1]+" stroke='none' d='M 15 4 L 6 4 6 13 15 13 15 4 M 24 13 L 15 13 15 22 24 22 24 13 Z'/>";break;case"asset":i="M 24 19.8 L 24 14.2 19.5 11.95 19.5 6.3 15 4.05 10.5 6.3 10.5 11.95 6 14.2 6 19.8 10.5 22.05 15 19.8 19.5 22.05 24 19.8 Z",n[1]="<path stroke="+s[3]+" stroke-width='2' stroke-linejoin='round' stroke-linecap='round' fill='none' d='"+i+"'/>",n[1]+="<path fill="+s[2]+" stroke='none' d='"+i+"'/>",n[1]+="<path fill="+s[1]+" stroke='none' d='M 6 14.2 L 6 19.8 10.5 22.05 10.5 16.45 6 14.2 M 19.5 22.05 L 19.5 16.45 15 14.2 15 19.8 19.5 22.05 M 15 8.55 L 10.5 6.3 10.5 11.95 15 14.2 15 8.55 Z'/>",n[1]+="<path fill="+s[0]+" stroke='none' d='M 15 14.2 L 19.5 16.45 24 14.2 19.5 11.95 15 14.2 M 10.5 16.45 L 15 14.2 10.5 11.95 6 14.2 10.5 16.45 M 10.5 6.3 L 15 8.55 19.5 6.3 15 4.05 10.5 6.3 Z'/>"}return n[2]="</g></svg>",n.join("\n")};var Vr="#282923",jr="19px",Hr="15px",qr="\n.codeflask {\n  background: "+Vr+";\n  //color: rgba(0, 0, 0, 0);\n  color: #f8f8f2;\n  //border-radius: 12px;\n  //text-shadow: 1px 1px 1px black;\n  //resize: true;\n}\n\n.codeflask ::-webkit-scrollbar {\n  width: 15px;\n  height:15px;\n}\n\n.codeflask ::-webkit-scrollbar-track {\n  background:none;\n  /*background-clip: content-box;*/\n  \n}\n\n.codeflask ::-webkit-scrollbar-thumb {\n  background-color: #555652; \n  width: 7px;\n  //border-radius: 12px;\n  border: 4px solid "+Vr+";\n}\n\n.codeflask ::-webkit-scrollbar-corner {\n  background-color: rgba(0,0,0,0);\n}\n\n\n\n.codeflask ::selection {\n  color: transparent;\n  background-color: #47473d; //rgba(71, 71, 61, 0.5);\n}\n\n.codeflask ::-moz-selection{\n  color: transparent;\n  background-color: #47473d; //rgba(71, 71, 61, 0.5);\n}\n\n\n.codeflask .token.punctuation { color: #f8f8f2; /* white */ }\n\n.codeflask .token.function { color: #67d8ef; /* blue */ } \n.codeflask .token.keyword { color: #67d8ef; font-style: italic; /* blue */ }\n\n.codeflask .token.function-variable { color: #a6e22c; /* green */ }\n.codeflask .token.class-name { color: #a6e22c; /* green */ }\n.codeflask .token.function-extra { color: #a6e22c; /* green */ }\n\n.codeflask .token.keyword-variable { color: #f92672; font-style: normal; /* red */ }\n.codeflask .token.operator { color: #f92672; /* red */ }\n\n.codeflask .token.parameter { color: #fd9621;/* orange */}\n.codeflask .token.parameter-variable { color: #fd9621;/* orange */}\n\n.codeflask .token.string { color: #e7db75; /* yellow */ }\n\n.codeflask .token.comment { color: #75715e; /* grey */ }\n\n\n\n.codeflask .token.boolean { color: #ae81ff; /* purple */ }\n.codeflask .token.number { color: #ae81ff; /* purple */ }\n\n.codeflask .token-template-string { color: #000000; }\n.codeflask .token-class-name { color: #000000; }\n.codeflask .token-regex { color: #000000; }\n\n.codeflask .token.selector { color: #00FF00; }\n.codeflask .token.property { color: #ac80ff;}\n.codeflask .token.tag { color: #FFFF00; }\n.codeflask .token.attr-value { color: #0000FF;}\n\n";var Xr="Consolas, Menlo, Courier, monospace",Wr=function(e,t){return"undefined"!=typeof CSS?CSS.supports(e,t):"undefined"!=typeof document&&function(e){return(e=e.split("-").filter((function(e){return!!e})).map((function(e){return e[0].toUpperCase()+e.substr(1)})).join(""))[0].toLowerCase()+e.substr(1)}(e)in document.body.style}("caret-color","#F00")?Vr:"#ccc",Zr="40px",Yr="\n  .codeflask {\n    -o-user-select:none; -ms-user-select:none; -khtml-user-select:none; -webkit-user-select:none; -moz-user-select: none;\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n  }\n\n  .codeflask, .codeflask * {\n    box-sizing: border-box;\n    border: none;\n    resize: none;\n    outline: none;\n  }\n\n  .codeflask__pre {\n    -o-user-select:none; -ms-user-select:none; -khtml-user-select:none; -webkit-user-select:none; -moz-user-select: none; pointer-events:none;\n    z-index: 3;\n    transform:translate3d(0, 0, 0);\n    box-sizing: border-box;\n    //white-space: pre;\n    padding:0px;\n    word-wrap: normal;\n    box-sizing: border-box;\n    border: none;\n    resize: none;\n    outline: none;\n    overflow: visible; !important;\n  }\n\n  .codeflask__textarea {\n\n    background: none;\n    //background:red;\n    border: none;\n    color: "+Wr+";\n    color: rgba(0, 0, 0, 0);\n    z-index: 1;\n    resize: none;\n    //font-family: "+Xr+";\n    //text-rendering: optimizeSpeed;\n    //text-rendering: inherit;\n    //-webkit-appearance: pre;\n    caret-color: #fff;\n    z-index: 2;\n    width: 100%;\n    height: 100%;\n    -moz-box-sizing: border-box;\n    box-sizing: border-box;\n\n    border: none;\n    outline: none;\n    spellcheck:false;\n    //overflow: hidden;\n    overflow: scroll !important;\n\n  }\n\n  .codeflask--has-line-numbers .codeflask__textarea {\n    width: calc(100% - "+Zr+");\n  }\n\n  .codeflask__code {\n    //padding: 10px;\n    //background:black;\n    display:block;\n    font-size: "+Hr+";\n    line-height: "+jr+";\n    font-family: "+Xr+";\n    //overflow: hidden;\n    //overflow: scroll !important;\n    //left:3px;\n    //width: auto;\n    //position: absolute;\n    outline: none;\n    resize: none;\n    box-sizing: content-box;\n    display: inline-block;\n  }\n\n  .codeflask__flatten {\n\n    //background:grey;\n    padding: 10px;\n    font-size: "+Hr+";\n    line-height: "+jr+";\n    font-family: "+Xr+";\n    text-rendering: optimizeLegibility;\n    //letter-spacing: 1px;\n    white-space: pre;\n    word-wrap: normal;\n    box-sizing: border-box;\n    position: absolute;\n    top: 0;\n    left: 0;\n    margin: 0 !important;\n    outline: none;\n    text-align: left;\n    cursor:auto;\n    outline: none;\n    border-radius: 0;\n    border-width: 0;\n    background: transparent;\n    //-webkit-background-clip: padding-box;\n    background-clip: padding-box;\n    resize: none;\n\n  }\n\n  .codeflask--has-line-numbers .codeflask__flatten {\n    width: calc(100% - "+Zr+");\n    left: "+Zr+";\n    outline: none;\n  }\n\n  .codeflask__line-highlight {\n    position: absolute;\n    top: 10px;\n    left: 0;\n    width: 100%;\n    height: "+jr+";\n    background: rgba(0,0,0,0.1);\n\n    z-index: 1;\n    //visibility: hidden;\n    outline: none;\n  }\n\n  .codeflask__lines {\n    padding: 10px 4px;\n    font-size:  "+Hr+";\n    line-height: "+jr+";\n    font-family: "+Xr+";\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: "+Zr+";\n    height: 100%;\n    text-align: right;\n    color: #90918b;\n    z-index: 2;\n    outline: none;\n  }\n\n  .codeflask__lines__line {\n    display: block;\n    outline: none;\n  }\n\n  .codeflask.codeflask--has-line-numbers {\n    padding-left: "+Zr+";\n  }\n\n  .codeflask.codeflask--has-line-numbers:before {\n    content: '';\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: "+Zr+";\n    height: 100%;\n    //background: "+Vr+";\n    z-index: 1;\n    outline: none;\n  }\n\n  .codeflask__error {\n    padding: 0px 0px;\n    padding-right:4px;\n    font-size:  "+Hr+";\n    font-family: "+Xr+";\n    position: absolute;\n    left: 0;\n    width: "+Zr+";\n    height: "+jr+";\n    text-align: right;\n    color: #FF0000;\n    background:rgba(255,0,0,0.3);\n    outline: none;\n    z-index: 3;\n    display:none;\n  }\n";function _r(e,t,i){var s=t||"codeflask-style",n=i||document.head;if(!e)return!1;if(document.getElementById(s))return!0;var r=document.createElement("style");return r.innerHTML=e,r.id=s,n.appendChild(r),!0}var Kr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function Jr(e){return String(e).replace(/[&<>"'`=/]/g,(function(e){return Kr[e]}))}var $r=function(e){var t=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,i=0,s={},n={manual:e.Prism&&e.Prism.manual,disableWorkerMessageHandler:e.Prism&&e.Prism.disableWorkerMessageHandler,util:{encode:function e(t){return t instanceof r?new r(t.type,e(t.content),t.alias):Array.isArray(t)?t.map(e):t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).slice(8,-1)},objId:function(e){return e.__id||Object.defineProperty(e,"__id",{value:++i}),e.__id},clone:function e(t,i){var s,r;switch(i=i||{},n.util.type(t)){case"Object":if(r=n.util.objId(t),i[r])return i[r];for(var o in s={},i[r]=s,t)t.hasOwnProperty(o)&&(s[o]=e(t[o],i));return s;case"Array":return r=n.util.objId(t),i[r]?i[r]:(s=[],i[r]=s,t.forEach((function(t,n){s[n]=e(t,i)})),s);default:return t}},getLanguage:function(e){for(;e;){var i=t.exec(e.className);if(i)return i[1].toLowerCase();e=e.parentElement}return"none"},setLanguage:function(e,i){e.className=e.className.replace(RegExp(t,"gi"),""),e.classList.add("language-"+i)},currentScript:function(){if("undefined"==typeof document)return null;if("currentScript"in document)return document.currentScript;try{throw new Error}catch(s){var e=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(s.stack)||[])[1];if(e){var t=document.getElementsByTagName("script");for(var i in t)if(t[i].src==e)return t[i]}return null}},isActive:function(e,t,i){for(var s="no-"+t;e;){var n=e.classList;if(n.contains(t))return!0;if(n.contains(s))return!1;e=e.parentElement}return!!i}},languages:{plain:s,plaintext:s,text:s,txt:s,extend:function(e,t){var i=n.util.clone(n.languages[e]);for(var s in t)i[s]=t[s];return i},insertBefore:function(e,t,i,s){var r=(s=s||n.languages)[e],o={};for(var a in r)if(r.hasOwnProperty(a)){if(a==t)for(var l in i)i.hasOwnProperty(l)&&(o[l]=i[l]);i.hasOwnProperty(a)||(o[a]=r[a])}var h=s[e];return s[e]=o,n.languages.DFS(n.languages,(function(t,i){i===h&&t!=e&&(this[t]=o)})),o},DFS:function e(t,i,s,r){r=r||{};var o=n.util.objId;for(var a in t)if(t.hasOwnProperty(a)){i.call(t,a,t[a],s||a);var l=t[a],h=n.util.type(l);"Object"!==h||r[o(l)]?"Array"!==h||r[o(l)]||(r[o(l)]=!0,e(l,i,a,r)):(r[o(l)]=!0,e(l,i,null,r))}}},plugins:{},highlightAll:function(e,t){n.highlightAllUnder(document,e,t)},highlightAllUnder:function(e,t,i){var s={callback:i,container:e,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};n.hooks.run("before-highlightall",s),s.elements=Array.prototype.slice.apply(s.container.querySelectorAll(s.selector)),n.hooks.run("before-all-elements-highlight",s);for(var r,o=0;r=s.elements[o++];)n.highlightElement(r,!0===t,s.callback)},highlightElement:function(t,i,s){var r=n.util.getLanguage(t),o=n.languages[r];n.util.setLanguage(t,r);var a=t.parentElement;a&&"pre"===a.nodeName.toLowerCase()&&n.util.setLanguage(a,r);var l={element:t,language:r,grammar:o,code:t.textContent};function h(e){l.highlightedCode=e,n.hooks.run("before-insert",l),l.element.innerHTML=l.highlightedCode,n.hooks.run("after-highlight",l),n.hooks.run("complete",l),s&&s.call(l.element)}if(n.hooks.run("before-sanity-check",l),(a=l.element.parentElement)&&"pre"===a.nodeName.toLowerCase()&&!a.hasAttribute("tabindex")&&a.setAttribute("tabindex","0"),!l.code)return n.hooks.run("complete",l),void(s&&s.call(l.element));if(n.hooks.run("before-highlight",l),l.grammar)if(i&&e.Worker){var c=new Worker(n.filename);c.onmessage=function(e){h(e.data)},c.postMessage(JSON.stringify({language:l.language,code:l.code,immediateClose:!0}))}else h(n.highlight(l.code,l.grammar,l.language));else h(n.util.encode(l.code))},highlight:function(e,t,i){var s={code:e,grammar:t,language:i};if(n.hooks.run("before-tokenize",s),!s.grammar)throw new Error('The language "'+s.language+'" has no grammar.');return s.tokens=n.tokenize(s.code,s.grammar),n.hooks.run("after-tokenize",s),r.stringify(n.util.encode(s.tokens),s.language)},tokenize:function(e,t){var i=t.rest;if(i){for(var s in i)t[s]=i[s];delete t.rest}var h=new function(){var e={value:null,prev:null,next:null},t={value:null,prev:e,next:null};e.next=t,this.head=e,this.tail=t,this.length=0};return a(h,h.head,e),function e(t,i,s,h,c,d){for(var u in s)if(s.hasOwnProperty(u)&&s[u]){var p=s[u];p=Array.isArray(p)?p:[p];for(var f=0;f<p.length;++f){if(d&&d.cause==u+","+f)return;var m=p[f],g=m.inside,A=!!m.lookbehind,b=!!m.greedy,v=m.alias;if(b&&!m.pattern.global){var y=m.pattern.toString().match(/[imsuy]*$/)[0];m.pattern=RegExp(m.pattern.source,y+"g")}for(var w=m.pattern||m,x=h.next,O=c;x!==i.tail&&!(d&&O>=d.reach);O+=x.value.length,x=x.next){var C=x.value;if(i.length>t.length)return;if(!(C instanceof r)){var S,I=1;if(b){if(!(S=o(w,O,t,A))||S.index>=t.length)break;var E=S.index,k=S.index+S[0].length,B=O;for(B+=x.value.length;E>=B;)B+=(x=x.next).value.length;if(O=B-=x.value.length,x.value instanceof r)continue;for(var Q=x;Q!==i.tail&&(B<k||"string"==typeof Q.value);Q=Q.next)I++,B+=Q.value.length;I--,C=t.slice(O,B),S.index-=O}else if(!(S=o(w,0,C,A)))continue;E=S.index;var M=S[0],T=C.slice(0,E),D=C.slice(E+M.length),R=O+C.length;d&&R>d.reach&&(d.reach=R);var P=x.prev;if(T&&(P=a(i,P,T),O+=T.length),l(i,P,I),x=a(i,P,new r(u,g?n.tokenize(M,g):M,v,M)),D&&a(i,x,D),I>1){var L={cause:u+","+f,reach:R};e(t,i,s,x.prev,O,L),d&&L.reach>d.reach&&(d.reach=L.reach)}}}}}}(e,h,t,h.head,0),function(e){for(var t=[],i=e.head.next;i!==e.tail;)t.push(i.value),i=i.next;return t}(h)},hooks:{all:{},add:function(e,t){var i=n.hooks.all;i[e]=i[e]||[],i[e].push(t)},run:function(e,t){var i=n.hooks.all[e];if(i&&i.length)for(var s,r=0;s=i[r++];)s(t)}},Token:r};function r(e,t,i,s){this.type=e,this.content=t,this.alias=i,this.length=0|(s||"").length}function o(e,t,i,s){e.lastIndex=t;var n=e.exec(i);if(n&&s&&n[1]){var r=n[1].length;n.index+=r,n[0]=n[0].slice(r)}return n}function a(e,t,i){var s=t.next,n={value:i,prev:t,next:s};return t.next=n,s.prev=n,e.length++,n}function l(e,t,i){for(var s=t.next,n=0;n<i&&s!==e.tail;n++)s=s.next;t.next=s,s.prev=t,e.length-=n}if(e.Prism=n,r.stringify=function e(t,i){if("string"==typeof t)return t;if(Array.isArray(t)){var s="";return t.forEach((function(t){s+=e(t,i)})),s}var r={type:t.type,content:e(t.content,i),tag:"span",classes:["token",t.type],attributes:{},language:i},o=t.alias;o&&(Array.isArray(o)?Array.prototype.push.apply(r.classes,o):r.classes.push(o)),n.hooks.run("wrap",r);var a="";for(var l in r.attributes)a+=" "+l+'="'+(r.attributes[l]||"").replace(/"/g,"&quot;")+'"';return"<"+r.tag+' class="'+r.classes.join(" ")+'"'+a+">"+r.content+"</"+r.tag+">"},!e.document)return e.addEventListener?(n.disableWorkerMessageHandler||e.addEventListener("message",(function(t){var i=JSON.parse(t.data),s=i.language,r=i.code,o=i.immediateClose;e.postMessage(n.highlight(r,n.languages[s],s)),o&&e.close()}),!1),n):n;var h=n.util.currentScript();function c(){n.manual||n.highlightAll()}if(h&&(n.filename=h.src,h.hasAttribute("data-manual")&&(n.manual=!0)),!n.manual){var d=document.readyState;"loading"===d||"interactive"===d&&h&&h.defer?document.addEventListener("DOMContentLoaded",c):window.requestAnimationFrame?window.requestAnimationFrame(c):window.setTimeout(c,16)}return n}("undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{});"undefined"!=typeof module&&module.exports&&(module.exports=$r),"undefined"!=typeof global&&(global.Prism=$r),$r.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},$r.languages.markup.tag.inside["attr-value"].inside.entity=$r.languages.markup.entity,$r.languages.markup.doctype.inside["internal-subset"].inside=$r.languages.markup,$r.hooks.add("wrap",(function(e){"entity"===e.type&&(e.attributes.title=e.content.replace(/&amp;/,"&"))})),Object.defineProperty($r.languages.markup.tag,"addInlined",{value:function(e,t){var i={};i["language-"+t]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:$r.languages[t]},i.cdata=/^<!\[CDATA\[|\]\]>$/i;var s={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:i}};s["language-"+t]={pattern:/[\s\S]+/,inside:$r.languages[t]};var n={};n[e]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,(function(){return e})),"i"),lookbehind:!0,greedy:!0,inside:s},$r.languages.insertBefore("markup","cdata",n)}}),Object.defineProperty($r.languages.markup.tag,"addAttribute",{value:function(e,t){$r.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+e+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[t,"language-"+t],inside:$r.languages[t]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),$r.languages.html=$r.languages.markup,$r.languages.mathml=$r.languages.markup,$r.languages.svg=$r.languages.markup,$r.languages.xml=$r.languages.extend("markup",{}),$r.languages.ssml=$r.languages.xml,$r.languages.atom=$r.languages.xml,$r.languages.rss=$r.languages.xml,function(e){var t=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;e.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+t.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+t.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+t.source+"$"),alias:"url"}}},selector:{pattern:RegExp("(^|[{}\\s])[^{}\\s](?:[^{};\"'\\s]|\\s+(?![\\s{])|"+t.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:t,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},e.languages.css.atrule.inside.rest=e.languages.css;var i=e.languages.markup;i&&(i.tag.addInlined("style","css"),i.tag.addAttribute("style","css"))}($r),$r.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},$r.languages.javascript=$r.languages.extend("clike",{"class-name":[$r.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|window|document|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|of|package|private|protected|public|return|static|super|switch|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+/NaN|Infinity|null/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?/}),$r.languages.javascript["class-name"][0].pattern=/(\b(?:class|interface|extends|implements|instanceof|new|)\s+)[\w.\\]+/,$r.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:$r.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},"function-extra":{pattern:/(?:constructor)/,alias:"keyword"},"keyword-variable":{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|continue|debugger|default|delete|do|else|enum|export|default|extends|for|from|(?:get|set)(?=\s*[\[$\w\xA0-\uFFFF])|if|implements|import|in|instanceof|interface|new|of|package|private|protected|public|return|static|super|switch|throw|try|typeof|undefined|void|while|with|yield)\b/,alias:"keyword"},"parameter-variable":{pattern:/this/,alias:"keyword"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:$r.languages.javascript},{pattern:/(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,inside:$r.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:$r.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:$r.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),$r.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:$r.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),$r.languages.markup&&($r.languages.markup.tag.addInlined("script","javascript"),$r.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),$r.languages.js=$r.languages.javascript,$r.languages.c=$r.languages.extend("clike",{comment:{pattern:/\/\/(?:[^\r\n\\]|\\(?:\r\n?|\n|(?![\r\n])))*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},"class-name":{pattern:/(\b(?:enum|struct)\s+(?:__attribute__\s*\(\([\s\S]*?\)\)\s*)?)\w+|\b[a-z]\w*_t\b/,lookbehind:!0},keyword:/\b(?:_Alignas|_Alignof|_Atomic|_Bool|_Complex|_Generic|_Imaginary|_Noreturn|_Static_assert|_Thread_local|__attribute__|asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|inline|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|typeof|union|unsigned|void|volatile|while)\b/,function:/\b[a-z_]\w*(?=\s*\()/i,number:/(?:\b0x(?:[\da-f]+(?:\.[\da-f]*)?|\.[\da-f]+)(?:p[+-]?\d+)?|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)[ful]{0,4}/i,operator:/>>=?|<<=?|->|([-+&|:])\1|[?:~]|[-+*/%&|^!=<>]=?/}),$r.languages.insertBefore("c","string",{char:{pattern:/'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n]){0,32}'/,greedy:!0}}),$r.languages.insertBefore("c","string",{macro:{pattern:/(^[\t ]*)#\s*[a-z](?:[^\r\n\\/]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|\\(?:\r\n|[\s\S]))*/im,lookbehind:!0,greedy:!0,alias:"property",inside:{string:[{pattern:/^(#\s*include\s*)<[^>]+>/,lookbehind:!0},$r.languages.c.string],char:$r.languages.c.char,comment:$r.languages.c.comment,"macro-name":[{pattern:/(^#\s*define\s+)\w+\b(?!\()/i,lookbehind:!0},{pattern:/(^#\s*define\s+)\w+\b(?=\()/i,lookbehind:!0,alias:"function"}],directive:{pattern:/^(#\s*)[a-z]+/,lookbehind:!0,alias:"keyword"},"directive-hash":/^#/,punctuation:/##|\\(?=[\r\n])/,expression:{pattern:/\S[\s\S]*/,inside:$r.languages.c}}}}),$r.languages.insertBefore("c","function",{constant:/\b(?:EOF|NULL|SEEK_CUR|SEEK_END|SEEK_SET|__DATE__|__FILE__|__LINE__|__TIMESTAMP__|__TIME__|__func__|stderr|stdin|stdout)\b/}),delete $r.languages.c.boolean,$r.languages.glsl=$r.languages.extend("c",{keyword:/\b(?:active|asm|atomic_uint|attribute|[ibdu]?vec[234]|bool|break|buffer|case|cast|centroid|class|coherent|common|const|continue|d?mat[234](?:x[234])?|default|discard|do|double|else|enum|extern|external|false|filter|fixed|flat|float|for|fvec[234]|goto|half|highp|hvec[234]|[iu]?sampler2DMS(?:Array)?|[iu]?sampler2DRect|[iu]?samplerBuffer|[iu]?samplerCube|[iu]?samplerCubeArray|[iu]?sampler[123]D|[iu]?sampler[12]DArray|[iu]?image2DMS(?:Array)?|[iu]?image2DRect|[iu]?imageBuffer|[iu]?imageCube|[iu]?imageCubeArray|[iu]?image[123]D|[iu]?image[12]DArray|if|in|inline|inout|input|int|interface|invariant|layout|long|lowp|mediump|namespace|noinline|noperspective|out|output|partition|patch|precise|precision|public|readonly|resource|restrict|return|sample|sampler[12]DArrayShadow|sampler[12]DShadow|sampler2DRectShadow|sampler3DRect|samplerCubeArrayShadow|samplerCubeShadow|shared|short|sizeof|smooth|static|struct|subroutine|superp|switch|template|this|true|typedef|uint|uniform|union|unsigned|using|varying|void|volatile|while|writeonly)\b/});var eo=function(e,t){if(!e)throw Error("CodeFlask expects a parameter which is Element or a String selector");if(!t)throw Error("CodeFlask expects an object containing options as second parameter");if(e.nodeType)this.editorRoot=e;else{var i=document.querySelector(e);i&&(this.editorRoot=i)}this.opts=t,this.startEditor()};eo.prototype.clear=function(){this.elPre.removeChild(this.elCode),this.opts.lineNumbers&&this.elWrapper.removeChild(this.elLineNumbers),this.elWrapper.removeChild(this.elPre),this.elWrapper.removeChild(this.elTextarea),this.editorRoot.removeChild(this.elWrapper),this.code="",this.editorRoot.innerHTML=""},eo.prototype.startEditor=function(){if(!_r(Yr,null,this.opts.styleParent))throw Error("Failed to inject CodeFlask CSS.");this.isEdit=!1,this.createWrapper(),this.createTextarea(),this.createPre(),this.createCode(),this.runOptions(),this.listenTextarea(),this.populateDefault(),this.updateCode(this.code)},eo.prototype.getDom=function(){return this.elWrapper},eo.prototype.getText=function(){return this.elTextarea},eo.prototype.createWrapper=function(){this.code=this.editorRoot.innerHTML,this.editorRoot.innerHTML="",this.elWrapper=this.createElement("div",this.editorRoot),this.elWrapper.classList.add("codeflask")},eo.prototype.createTextarea=function(){this.elTextarea=this.createElement("textarea",this.elWrapper),this.elTextarea.classList.add("codeflask__textarea","codeflask__flatten")},eo.prototype.createPre=function(){this.elPre=this.createElement("pre",this.elWrapper),this.elPre.classList.add("codeflask__pre","codeflask__flatten")},eo.prototype.createCode=function(){this.elCode=this.createElement("code",this.elPre),this.elCode.classList.add("codeflask__code","language-"+(this.opts.language||"html"))},eo.prototype.createLineNumbers=function(){this.elLineNumbers=this.createElement("div",this.elWrapper),this.elLineNumbers.classList.add("codeflask__lines"),this.setLineNumber()},eo.prototype.createError=function(){this.elError=this.createElement("div",this.elWrapper),this.elError.classList.add("codeflask__error")},eo.prototype.createElement=function(e,t){var i=document.createElement(e);return t.appendChild(i),i},eo.prototype.runOptions=function(){this.opts.rtl=this.opts.rtl||!1,this.opts.tabSize=this.opts.tabSize||4,this.opts.enableAutocorrect=this.opts.enableAutocorrect||!1,this.opts.lineNumbers=this.opts.lineNumbers||!1,this.opts.defaultTheme=!1!==this.opts.defaultTheme,this.opts.areaId=this.opts.areaId||null,this.opts.ariaLabelledby=this.opts.ariaLabelledby||null,this.opts.readonly=this.opts.readonly||null,"boolean"!=typeof this.opts.handleTabs&&(this.opts.handleTabs=!0),"boolean"!=typeof this.opts.handleSelfClosingCharacters&&(this.opts.handleSelfClosingCharacters=!0),"boolean"!=typeof this.opts.handleNewLineIndentation&&(this.opts.handleNewLineIndentation=!0),!0===this.opts.rtl&&(this.elTextarea.setAttribute("dir","rtl"),this.elPre.setAttribute("dir","rtl")),!1===this.opts.enableAutocorrect&&(this.elTextarea.setAttribute("spellcheck","false"),this.elTextarea.setAttribute("autocapitalize","off"),this.elTextarea.setAttribute("autocomplete","off"),this.elTextarea.setAttribute("autocorrect","off")),this.opts.lineNumbers&&(this.elWrapper.classList.add("codeflask--has-line-numbers"),this.createLineNumbers(),this.createError()),this.opts.defaultTheme&&_r(qr,"theme-default",this.opts.styleParent),this.opts.areaId&&this.elTextarea.setAttribute("id",this.opts.areaId),this.opts.ariaLabelledby&&this.elTextarea.setAttribute("aria-labelledby",this.opts.ariaLabelledby),this.opts.readonly&&this.enableReadonlyMode()},eo.prototype.updateLineNumbersCount=function(){for(var e="",t=1;t<=this.lineNumber;t++)e=e+'<span class="codeflask__lines__line">'+t+"</span>";this.elLineNumbers.innerHTML=e},eo.prototype.listenTextarea=function(){var e=this;this.elTextarea.addEventListener("input",(function(t){e.code=t.target.value,e.elCode.innerHTML=Jr(t.target.value),e.highlight(),setTimeout((function(){e.runUpdate(),e.setLineNumber()}),1)})),this.elTextarea.addEventListener("keydown",(function(t){e.opts.readonly||(e.handleTabs(t),e.handleSelfClosingCharacters(t),e.handleNewLineIndentation(t),e.isEdit=!0)})),this.elTextarea.addEventListener("scroll",(function(t){e.scroll(t)}))},eo.prototype.wheel=function(e){var t=e.deltaY>0?1:-1;this.elTextarea.scrollTop+=100*t,this.elPre.style.transform="translate3d(0, -"+this.elTextarea.scrollTop+"px, 0)",this.elLineNumbers&&(this.elLineNumbers.style.transform="translate3d(0, -"+this.elTextarea.scrollTop+"px, 0)"),this.elError&&(this.elError.style.transform="translate3d(0, -"+this.elTextarea.scrollTop+"px, 0)")},eo.prototype.scroll=function(e){this.elPre.style.transform="translate3d(-"+e.target.scrollLeft+"px, -"+e.target.scrollTop+"px, 0)",this.elLineNumbers&&(this.elLineNumbers.style.transform="translate3d(-"+this.elTextarea.scrollLeft+"px, -"+e.target.scrollTop+"px, 0)"),this.elError&&(this.elError.style.transform="translate3d(-"+this.elTextarea.scrollLeft+"px, -"+e.target.scrollTop+"px, 0)")},eo.prototype.handleTabs=function(e){if(this.opts.handleTabs){if(9!==e.keyCode)return!1;e.preventDefault();var t=this.elTextarea,i=t.selectionDirection,s=t.selectionStart,n=t.selectionEnd,r=t.value,o=r.substr(0,s),a=r.substring(s,n),l=r.substring(n),h=" ".repeat(this.opts.tabSize);if(s!==n&&a.length>=h.length){var c=s-o.split("\n").pop().length,d=h.length,u=h.length;e.shiftKey?(r.substr(c,h.length)===h?(d=-d,c>s?(a=a.substring(0,c)+a.substring(c+h.length),u=0):c===s?(d=0,u=0,a=a.substring(h.length)):(u=-u,o=o.substring(0,c)+o.substring(c+h.length))):(d=0,u=0),a=a.replace(new RegExp("\n"+h.split("").join("\\"),"g"),"\n")):(o=o.substr(0,c)+h+o.substring(c,s),a=a.replace(/\n/g,"\n"+h)),t.value=o+a+l,t.selectionStart=s+d,t.selectionEnd=s+a.length+u,t.selectionDirection=i}else t.value=o+h+l,t.selectionStart=s+h.length,t.selectionEnd=s+h.length;var p=t.value;this.updateCode(p),this.elTextarea.selectionEnd=n+this.opts.tabSize}return!0},eo.prototype.handleSelfClosingCharacters=function(e){if(this.opts.handleSelfClosingCharacters){var t=e.key;if(!["(","[","{","<","'",'"'].includes(t)&&![")","]","}",">","'",'"'].includes(t))return!1;switch(t){case"(":case")":case"[":case"]":case"{":case"}":case"<":case">":case"'":case'"':this.closeCharacter(t)}return!0}},eo.prototype.setLineNumber=function(){this.lineNumber=this.code.split("\n").length,this.opts.lineNumbers&&this.updateLineNumbersCount()},eo.prototype.handleNewLineIndentation=function(e){if(!this.opts.handleNewLineIndentation)return!1;if(13!==e.keyCode)return!1;e.preventDefault();var t=this.elTextarea,i=t.selectionStart,s=t.selectionEnd,n=t.value,r=n.substr(0,i),o=n.substring(s),a=n.lastIndexOf("\n",i-1),l=a+n.slice(a+1).search(/[^ ]|$/),h=l>a?l-a:0,c=r+"\n"+" ".repeat(h)+o;return t.value=c,t.selectionStart=i+h+1,t.selectionEnd=i+h+1,this.updateCode(t.value),!0},eo.prototype.closeCharacter=function(e){var t=this.elTextarea.selectionStart,i=this.elTextarea.selectionEnd;if(this.skipCloseChar(e)){var s=this.code.substr(i,1)===e,n=s?i+1:i,r=!s&&["'",'"'].includes(e)?e:"",o=""+this.code.substring(0,t)+r+this.code.substring(n);this.updateCode(o),this.elTextarea.selectionEnd=++this.elTextarea.selectionStart}else{var a=e;switch(e){case"(":a=String.fromCharCode(e.charCodeAt()+1);break;case"<":case"{":case"[":a=String.fromCharCode(e.charCodeAt()+2)}var l=this.code.substring(t,i),h=""+this.code.substring(0,t)+l+a+this.code.substring(i);this.updateCode(h)}this.elTextarea.selectionEnd=t},eo.prototype.skipCloseChar=function(e){var t=this.elTextarea.selectionStart,i=this.elTextarea.selectionEnd,s=Math.abs(i-t)>0;return[")","}","]",">"].includes(e)||["'",'"'].includes(e)&&!s},eo.prototype.updateCode=function(e){this.isEdit=!1,this.code=e,this.elTextarea.value=e,this.elCode.innerHTML=Jr(e),this.highlight(),this.setLineNumber(),setTimeout(this.runUpdate.bind(this),1)},eo.prototype.updateLanguage=function(e){var t=this.opts.language;this.elCode.classList.remove("language-"+t),this.elCode.classList.add("language-"+e),this.opts.language=e,this.highlight()},eo.prototype.addLanguage=function(e,t){$r.languages[e]=t},eo.prototype.populateDefault=function(){this.updateCode(this.code)},eo.prototype.highlight=function(){$r.highlightElement(this.elCode,!1)},eo.prototype.onUpdate=function(e){if(e&&"[object Function]"!=={}.toString.call(e))throw Error("CodeFlask expects callback of type Function");this.updateCallBack=e},eo.prototype.getCode=function(){return this.code},eo.prototype.runUpdate=function(){this.updateCallBack&&this.updateCallBack(this.code)},eo.prototype.enableReadonlyMode=function(){this.elTextarea.setAttribute("readonly",!0)},eo.prototype.disableReadonlyMode=function(){this.elTextarea.removeAttribute("readonly")},eo.prototype.noError=function(){this.elError&&(this.elError.innerHTML="",this.elError.style.display="none")},eo.prototype.addError=function(e,t,i){this.elError&&(this.elError.style.display="block",this.elError.innerHTML=t,this.elError.style.marginTop=19*t-9+"px")};class to{constructor(){}lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,i){let s=[];return this.decompose(0,e,s,2),i.length&&i.decompose(0,i.length,s,3),this.decompose(t,this.length,s,1),so.from(s,this.length-(t-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){let i=[];return this.decompose(e,t,i,0),so.from(i,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),s=new oo(this),n=new oo(e);for(let e=t,r=t;;){if(s.next(e),n.next(e),e=0,s.lineBreak!=n.lineBreak||s.done!=n.done||s.value!=n.value)return!1;if(r+=s.value.length,s.done||r>=i)return!0}}iter(e=1){return new oo(this,e)}iterRange(e,t=this.length){return new ao(this,e,t)}iterLines(e,t){let i;if(null==e)i=this.iter();else{null==t&&(t=this.lines+1);let s=this.line(e).from;i=this.iterRange(s,Math.max(s,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new lo(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}static of(e){if(0==e.length)throw new RangeError("A document must have at least one line");return 1!=e.length||e[0]?e.length<=32?new io(e):so.from(io.split(e,[])):to.empty}}class io extends to{constructor(e,t=function(e){let t=-1;for(let i of e)t+=i.length+1;return t}(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,i,s){for(let n=0;;n++){let r=this.text[n],o=s+r.length;if((t?i:o)>=e)return new ho(s,o,i,r);s=o+1,i++}}decompose(e,t,i,s){let n=e<=0&&t>=this.length?this:new io(ro(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(1&s){let e=i.pop(),t=no(n.text,e.text.slice(),0,n.length);if(t.length<=32)i.push(new io(t,e.length+n.length));else{let e=t.length>>1;i.push(new io(t.slice(0,e)),new io(t.slice(e)))}}else i.push(n)}replace(e,t,i){if(!(i instanceof io))return super.replace(e,t,i);let s=no(this.text,no(i.text,ro(this.text,0,e)),t),n=this.length+i.length-(t-e);return s.length<=32?new io(s,n):so.from(io.split(s,[]),n)}sliceString(e,t=this.length,i="\n"){let s="";for(let n=0,r=0;n<=t&&r<this.text.length;r++){let o=this.text[r],a=n+o.length;n>e&&r&&(s+=i),e<a&&t>n&&(s+=o.slice(Math.max(0,e-n),t-n)),n=a+1}return s}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let i=[],s=-1;for(let n of e)i.push(n),s+=n.length+1,32==i.length&&(t.push(new io(i,s)),i=[],s=-1);return s>-1&&t.push(new io(i,s)),t}}class so extends to{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let t of e)this.lines+=t.lines}lineInner(e,t,i,s){for(let n=0;;n++){let r=this.children[n],o=s+r.length,a=i+r.lines-1;if((t?a:o)>=e)return r.lineInner(e,t,i,s);s=o+1,i=a+1}}decompose(e,t,i,s){for(let n=0,r=0;r<=t&&n<this.children.length;n++){let o=this.children[n],a=r+o.length;if(e<=a&&t>=r){let n=s&((r<=e?1:0)|(a>=t?2:0));r>=e&&a<=t&&!n?i.push(o):o.decompose(e-r,t-r,i,n)}r=a+1}}replace(e,t,i){if(i.lines<this.lines)for(let s=0,n=0;s<this.children.length;s++){let r=this.children[s],o=n+r.length;if(e>=n&&t<=o){let a=r.replace(e-n,t-n,i),l=this.lines-r.lines+a.lines;if(a.lines<l>>4&&a.lines>l>>6){let n=this.children.slice();return n[s]=a,new so(n,this.length-(t-e)+i.length)}return super.replace(n,o,a)}n=o+1}return super.replace(e,t,i)}sliceString(e,t=this.length,i="\n"){let s="";for(let n=0,r=0;n<this.children.length&&r<=t;n++){let o=this.children[n],a=r+o.length;r>e&&n&&(s+=i),e<a&&t>r&&(s+=o.sliceString(e-r,t-r,i)),r=a+1}return s}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof so))return 0;let i=0,[s,n,r,o]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;s+=t,n+=t){if(s==r||n==o)return i;let a=this.children[s],l=e.children[n];if(a!=l)return i+a.scanIdentical(l,t);i+=a.length+1}}static from(e,t=e.reduce(((e,t)=>e+t.length+1),-1)){let i=0;for(let t of e)i+=t.lines;if(i<32){let i=[];for(let t of e)t.flatten(i);return new io(i,t)}let s=Math.max(32,i>>5),n=s<<1,r=s>>1,o=[],a=0,l=-1,h=[];function c(e){let t;if(e.lines>n&&e instanceof so)for(let t of e.children)c(t);else e.lines>r&&(a>r||!a)?(d(),o.push(e)):e instanceof io&&a&&(t=h[h.length-1])instanceof io&&e.lines+t.lines<=32?(a+=e.lines,l+=e.length+1,h[h.length-1]=new io(t.text.concat(e.text),t.length+1+e.length)):(a+e.lines>s&&d(),a+=e.lines,l+=e.length+1,h.push(e))}function d(){0!=a&&(o.push(1==h.length?h[0]:so.from(h,l)),l=-1,a=h.length=0)}for(let t of e)c(t);return d(),1==o.length?o[0]:new so(o,t)}}function no(e,t,i=0,s=1e9){for(let n=0,r=0,o=!0;r<e.length&&n<=s;r++){let a=e[r],l=n+a.length;l>=i&&(l>s&&(a=a.slice(0,s-n)),n<i&&(a=a.slice(i-n)),o?(t[t.length-1]+=a,o=!1):t.push(a)),n=l+1}return t}function ro(e,t,i){return no(e,[""],t,i)}to.empty=new io([""],0);class oo{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof io?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,s=this.nodes[i],n=this.offsets[i],r=n>>1,o=s instanceof io?s.text.length:s.children.length;if(r==(t>0?o:0)){if(0==i)return this.done=!0,this.value="",this;t>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((1&n)==(t>0?0:1)){if(this.offsets[i]+=t,0==e)return this.lineBreak=!0,this.value="\n",this;e--}else if(s instanceof io){let n=s.text[r+(t<0?-1:0)];if(this.offsets[i]+=t,n.length>Math.max(0,e))return this.value=0==e?n:t>0?n.slice(e):n.slice(0,n.length-e),this;e-=n.length}else{let n=s.children[r+(t<0?-1:0)];e>n.length?(e-=n.length,this.offsets[i]+=t):(t<0&&this.offsets[i]--,this.nodes.push(n),this.offsets.push(t>0?1:(n instanceof io?n.text.length:n.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class ao{constructor(e,t,i){this.value="",this.done=!1,this.cursor=new oo(e,t>i?-1:1),this.pos=t>i?e.length:0,this.from=Math.min(t,i),this.to=Math.max(t,i)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let i=t<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:s}=this.cursor.next(e);return this.pos+=(s.length+e)*t,this.value=s.length<=i?s:t<0?s.slice(s.length-i):s.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&""!=this.value}}class lo{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:i,value:s}=this.inner.next(e);return t?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=s,this.afterBreak=!1),this}get lineBreak(){return!1}}"undefined"!=typeof Symbol&&(to.prototype[Symbol.iterator]=function(){return this.iter()},oo.prototype[Symbol.iterator]=ao.prototype[Symbol.iterator]=lo.prototype[Symbol.iterator]=function(){return this});class ho{constructor(e,t,i,s){this.from=e,this.to=t,this.number=i,this.text=s}get length(){return this.to-this.from}}let co="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map((e=>e?parseInt(e,36):1));for(let e=1;e<co.length;e++)co[e]+=co[e-1];function uo(e){for(let t=1;t<co.length;t+=2)if(co[t]>e)return co[t-1]<=e;return!1}function po(e){return e>=127462&&e<=127487}function fo(e,t,i=!0,s=!0){return(i?mo:go)(e,t,s)}function mo(e,t,i){if(t==e.length)return t;t&&Ao(e.charCodeAt(t))&&bo(e.charCodeAt(t-1))&&t--;let s=vo(e,t);for(t+=wo(s);t<e.length;){let n=vo(e,t);if(8205==s||8205==n||i&&uo(n))t+=wo(n),s=n;else{if(!po(n))break;{let i=0,s=t-2;for(;s>=0&&po(vo(e,s));)i++,s-=2;if(i%2==0)break;t+=2}}}return t}function go(e,t,i){for(;t>0;){let s=mo(e,t-2,i);if(s<t)return s;t--}return 0}function Ao(e){return e>=56320&&e<57344}function bo(e){return e>=55296&&e<56320}function vo(e,t){let i=e.charCodeAt(t);if(!bo(i)||t+1==e.length)return i;let s=e.charCodeAt(t+1);return Ao(s)?s-56320+(i-55296<<10)+65536:i}function yo(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}function wo(e){return e<65536?1:2}const xo=/\r\n?|\n/;var Oo=function(e){return e[e.Simple=0]="Simple",e[e.TrackDel=1]="TrackDel",e[e.TrackBefore=2]="TrackBefore",e[e.TrackAfter=3]="TrackAfter",e}(Oo||(Oo={}));class Co{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t+1];e+=i<0?this.sections[t]:i}return e}get empty(){return 0==this.sections.length||2==this.sections.length&&this.sections[1]<0}iterGaps(e){for(let t=0,i=0,s=0;t<this.sections.length;){let n=this.sections[t++],r=this.sections[t++];r<0?(e(i,s,n),s+=n):s+=r,i+=n}}iterChangedRanges(e,t=!1){ko(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let i=this.sections[t++],s=this.sections[t++];s<0?e.push(i,s):e.push(s,i)}return new Co(e)}composeDesc(e){return this.empty?e:e.empty?this:Qo(this,e)}mapDesc(e,t=!1){return e.empty?this:Bo(this,e,t)}mapPos(e,t=-1,i=Oo.Simple){let s=0,n=0;for(let r=0;r<this.sections.length;){let o=this.sections[r++],a=this.sections[r++],l=s+o;if(a<0){if(l>e)return n+(e-s);n+=o}else{if(i!=Oo.Simple&&l>=e&&(i==Oo.TrackDel&&s<e&&l>e||i==Oo.TrackBefore&&s<e||i==Oo.TrackAfter&&l>e))return null;if(l>e||l==e&&t<0&&!o)return e==s||t<0?n:n+a;n+=a}s=l}if(e>s)throw new RangeError(`Position ${e} is out of range for changeset of length ${s}`);return n}touchesRange(e,t=e){for(let i=0,s=0;i<this.sections.length&&s<=t;){let n=s+this.sections[i++];if(this.sections[i++]>=0&&s<=t&&n>=e)return!(s<e&&n>t)||"cover";s=n}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let i=this.sections[t++],s=this.sections[t++];e+=(e?" ":"")+i+(s>=0?":"+s:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some((e=>"number"!=typeof e)))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Co(e)}static create(e){return new Co(e)}}class So extends Co{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return ko(this,((t,i,s,n,r)=>e=e.replace(s,s+(i-t),r)),!1),e}mapDesc(e,t=!1){return Bo(this,e,t,!0)}invert(e){let t=this.sections.slice(),i=[];for(let s=0,n=0;s<t.length;s+=2){let r=t[s],o=t[s+1];if(o>=0){t[s]=o,t[s+1]=r;let a=s>>1;for(;i.length<a;)i.push(to.empty);i.push(r?e.slice(n,n+r):to.empty)}n+=r}return new So(t,i)}compose(e){return this.empty?e:e.empty?this:Qo(this,e,!0)}map(e,t=!1){return e.empty?this:Bo(this,e,t,!0)}iterChanges(e,t=!1){ko(this,e,t)}get desc(){return Co.create(this.sections)}filter(e){let t=[],i=[],s=[],n=new Mo(this);e:for(let r=0,o=0;;){let a=r==e.length?1e9:e[r++];for(;o<a||o==a&&0==n.len;){if(n.done)break e;let e=Math.min(n.len,a-o);Io(s,e,-1);let r=-1==n.ins?-1:0==n.off?n.ins:0;Io(t,e,r),r>0&&Eo(i,t,n.text),n.forward(e),o+=e}let l=e[r++];for(;o<l;){if(n.done)break e;let e=Math.min(n.len,l-o);Io(t,e,-1),Io(s,e,-1==n.ins?-1:0==n.off?n.ins:0),n.forward(e),o+=e}}return{changes:new So(t,i),filtered:Co.create(s)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t],s=this.sections[t+1];s<0?e.push(i):0==s?e.push([i]):e.push([i].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,i){let s=[],n=[],r=0,o=null;function a(e=!1){if(!e&&!s.length)return;r<t&&Io(s,t-r,-1);let i=new So(s,n);o=o?o.compose(i.map(o)):i,s=[],n=[],r=0}return function e(l){if(Array.isArray(l))for(let t of l)e(t);else if(l instanceof So){if(l.length!=t)throw new RangeError(`Mismatched change set length (got ${l.length}, expected ${t})`);a(),o=o?o.compose(l.map(o)):l}else{let{from:e,to:o=e,insert:h}=l;if(e>o||e<0||o>t)throw new RangeError(`Invalid change range ${e} to ${o} (in doc of length ${t})`);let c=h?"string"==typeof h?to.of(h.split(i||xo)):h:to.empty,d=c.length;if(e==o&&0==d)return;e<r&&a(),e>r&&Io(s,e-r,-1),Io(s,o-e,d),Eo(n,s,c),r=o}}(e),a(!o),o}static empty(e){return new So(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],i=[];for(let s=0;s<e.length;s++){let n=e[s];if("number"==typeof n)t.push(n,-1);else{if(!Array.isArray(n)||"number"!=typeof n[0]||n.some(((e,t)=>t&&"string"!=typeof e)))throw new RangeError("Invalid JSON representation of ChangeSet");if(1==n.length)t.push(n[0],0);else{for(;i.length<s;)i.push(to.empty);i[s]=to.of(n.slice(1)),t.push(n[0],i[s].length)}}}return new So(t,i)}static createSet(e,t){return new So(e,t)}}function Io(e,t,i,s=!1){if(0==t&&i<=0)return;let n=e.length-2;n>=0&&i<=0&&i==e[n+1]?e[n]+=t:0==t&&0==e[n]?e[n+1]+=i:s?(e[n]+=t,e[n+1]+=i):e.push(t,i)}function Eo(e,t,i){if(0==i.length)return;let s=t.length-2>>1;if(s<e.length)e[e.length-1]=e[e.length-1].append(i);else{for(;e.length<s;)e.push(to.empty);e.push(i)}}function ko(e,t,i){let s=e.inserted;for(let n=0,r=0,o=0;o<e.sections.length;){let a=e.sections[o++],l=e.sections[o++];if(l<0)n+=a,r+=a;else{let h=n,c=r,d=to.empty;for(;h+=a,c+=l,l&&s&&(d=d.append(s[o-2>>1])),!(i||o==e.sections.length||e.sections[o+1]<0);)a=e.sections[o++],l=e.sections[o++];t(n,h,r,c,d),n=h,r=c}}}function Bo(e,t,i,s=!1){let n=[],r=s?[]:null,o=new Mo(e),a=new Mo(t);for(let e=-1;;)if(-1==o.ins&&-1==a.ins){let e=Math.min(o.len,a.len);Io(n,e,-1),o.forward(e),a.forward(e)}else if(a.ins>=0&&(o.ins<0||e==o.i||0==o.off&&(a.len<o.len||a.len==o.len&&!i))){let t=a.len;for(Io(n,a.ins,-1);t;){let i=Math.min(o.len,t);o.ins>=0&&e<o.i&&o.len<=i&&(Io(n,0,o.ins),r&&Eo(r,n,o.text),e=o.i),o.forward(i),t-=i}a.next()}else{if(!(o.ins>=0)){if(o.done&&a.done)return r?So.createSet(n,r):Co.create(n);throw new Error("Mismatched change set lengths")}{let t=0,i=o.len;for(;i;)if(-1==a.ins){let e=Math.min(i,a.len);t+=e,i-=e,a.forward(e)}else{if(!(0==a.ins&&a.len<i))break;i-=a.len,a.next()}Io(n,t,e<o.i?o.ins:0),r&&e<o.i&&Eo(r,n,o.text),e=o.i,o.forward(o.len-i)}}}function Qo(e,t,i=!1){let s=[],n=i?[]:null,r=new Mo(e),o=new Mo(t);for(let e=!1;;){if(r.done&&o.done)return n?So.createSet(s,n):Co.create(s);if(0==r.ins)Io(s,r.len,0,e),r.next();else if(0!=o.len||o.done){if(r.done||o.done)throw new Error("Mismatched change set lengths");{let t=Math.min(r.len2,o.len),i=s.length;if(-1==r.ins){let i=-1==o.ins?-1:o.off?0:o.ins;Io(s,t,i,e),n&&i&&Eo(n,s,o.text)}else-1==o.ins?(Io(s,r.off?0:r.len,t,e),n&&Eo(n,s,r.textBit(t))):(Io(s,r.off?0:r.len,o.off?0:o.ins,e),n&&!o.off&&Eo(n,s,o.text));e=(r.ins>t||o.ins>=0&&o.len>t)&&(e||s.length>i),r.forward2(t),o.forward(t)}}else Io(s,0,o.ins,e),n&&Eo(n,s,o.text),o.next()}}class Mo{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return-2==this.ins}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?to.empty:e[t]}textBit(e){let{inserted:t}=this.set,i=this.i-2>>1;return i>=t.length&&!e?to.empty:t[i].slice(this.off,null==e?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){-1==this.ins?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class To{constructor(e,t,i){this.from=e,this.to=t,this.flags=i}get anchor(){return 16&this.flags?this.to:this.from}get head(){return 16&this.flags?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return 4&this.flags?-1:8&this.flags?1:0}get bidiLevel(){let e=3&this.flags;return 3==e?null:e}get goalColumn(){let e=this.flags>>5;return 33554431==e?void 0:e}map(e,t=-1){let i,s;return this.empty?i=s=e.mapPos(this.from,t):(i=e.mapPos(this.from,1),s=e.mapPos(this.to,-1)),i==this.from&&s==this.to?this:new To(i,s,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return Do.range(e,t);let i=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return Do.range(this.anchor,i)}eq(e){return this.anchor==e.anchor&&this.head==e.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||"number"!=typeof e.anchor||"number"!=typeof e.head)throw new RangeError("Invalid JSON representation for SelectionRange");return Do.range(e.anchor,e.head)}static create(e,t,i){return new To(e,t,i)}}class Do{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:Do.create(this.ranges.map((i=>i.map(e,t))),this.mainIndex)}eq(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let t=0;t<this.ranges.length;t++)if(!this.ranges[t].eq(e.ranges[t]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return 1==this.ranges.length?this:new Do([this.main],0)}addRange(e,t=!0){return Do.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let i=this.ranges.slice();return i[t]=e,Do.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map((e=>e.toJSON())),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||"number"!=typeof e.main||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new Do(e.ranges.map((e=>To.fromJSON(e))),e.main)}static single(e,t=e){return new Do([Do.range(e,t)],0)}static create(e,t=0){if(0==e.length)throw new RangeError("A selection needs at least one range");for(let i=0,s=0;s<e.length;s++){let n=e[s];if(n.empty?n.from<=i:n.from<i)return Do.normalized(e.slice(),t);i=n.to}return new Do(e,t)}static cursor(e,t=0,i,s){return To.create(e,e,(0==t?0:t<0?4:8)|(null==i?3:Math.min(2,i))|(null!=s?s:33554431)<<5)}static range(e,t,i){let s=(null!=i?i:33554431)<<5;return t<e?To.create(t,e,24|s):To.create(e,t,s|(t>e?4:0))}static normalized(e,t=0){let i=e[t];e.sort(((e,t)=>e.from-t.from)),t=e.indexOf(i);for(let i=1;i<e.length;i++){let s=e[i],n=e[i-1];if(s.empty?s.from<=n.to:s.from<n.to){let r=n.from,o=Math.max(s.to,n.to);i<=t&&t--,e.splice(--i,2,s.anchor>s.head?Do.range(o,r):Do.range(r,o))}}return new Do(e,t)}}function Ro(e,t){for(let i of e.ranges)if(i.to>t)throw new RangeError("Selection points outside of document")}let Po=0;class Lo{constructor(e,t,i,s,n){this.combine=e,this.compareInput=t,this.compare=i,this.isStatic=s,this.id=Po++,this.default=e([]),this.extensions="function"==typeof n?n(this):n}static define(e={}){return new Lo(e.combine||(e=>e),e.compareInput||((e,t)=>e===t),e.compare||(e.combine?(e,t)=>e===t:Fo),!!e.static,e.enables)}of(e){return new Uo([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Uo(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Uo(e,this,2,t)}from(e,t){return t||(t=e=>e),this.compute([e],(i=>t(i.field(e))))}}function Fo(e,t){return e==t||e.length==t.length&&e.every(((e,i)=>e===t[i]))}class Uo{constructor(e,t,i,s){this.dependencies=e,this.facet=t,this.type=i,this.value=s,this.id=Po++}dynamicSlot(e){var t;let i=this.value,s=this.facet.compareInput,n=this.id,r=e[n]>>1,o=2==this.type,a=!1,l=!1,h=[];for(let i of this.dependencies)"doc"==i?a=!0:"selection"==i?l=!0:!(1&(null!==(t=e[i.id])&&void 0!==t?t:1))&&h.push(e[i.id]);return{create:e=>(e.values[r]=i(e),1),update(e,t){if(a&&t.docChanged||l&&(t.docChanged||t.selection)||Go(e,h)){let t=i(e);if(o?!zo(t,e.values[r],s):!s(t,e.values[r]))return e.values[r]=t,1}return 0},reconfigure:(e,t)=>{let a,l=t.config.address[n];if(null!=l){let n=ta(t,l);if(this.dependencies.every((i=>i instanceof Lo?t.facet(i)===e.facet(i):!(i instanceof jo)||t.field(i,!1)==e.field(i,!1)))||(o?zo(a=i(e),n,s):s(a=i(e),n)))return e.values[r]=n,0}else a=i(e);return e.values[r]=a,1}}}}function zo(e,t,i){if(e.length!=t.length)return!1;for(let s=0;s<e.length;s++)if(!i(e[s],t[s]))return!1;return!0}function Go(e,t){let i=!1;for(let s of t)1&ea(e,s)&&(i=!0);return i}function No(e,t,i){let s=i.map((t=>e[t.id])),n=i.map((e=>e.type)),r=s.filter((e=>!(1&e))),o=e[t.id]>>1;function a(e){let i=[];for(let t=0;t<s.length;t++){let r=ta(e,s[t]);if(2==n[t])for(let e of r)i.push(e);else i.push(r)}return t.combine(i)}return{create(e){for(let t of s)ea(e,t);return e.values[o]=a(e),1},update(e,i){if(!Go(e,r))return 0;let s=a(e);return t.compare(s,e.values[o])?0:(e.values[o]=s,1)},reconfigure(e,n){let r=Go(e,s),l=n.config.facets[t.id],h=n.facet(t);if(l&&!r&&Fo(i,l))return e.values[o]=h,0;let c=a(e);return t.compare(c,h)?(e.values[o]=h,0):(e.values[o]=c,1)}}}const Vo=Lo.define({static:!0});class jo{constructor(e,t,i,s,n){this.id=e,this.createF=t,this.updateF=i,this.compareF=s,this.spec=n,this.provides=void 0}static define(e){let t=new jo(Po++,e.create,e.update,e.compare||((e,t)=>e===t),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(Vo).find((e=>e.field==this));return((null==t?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:e=>(e.values[t]=this.create(e),1),update:(e,i)=>{let s=e.values[t],n=this.updateF(s,i);return this.compareF(s,n)?0:(e.values[t]=n,1)},reconfigure:(e,i)=>null!=i.config.address[this.id]?(e.values[t]=i.field(this),0):(e.values[t]=this.create(e),1)}}init(e){return[this,Vo.of({field:this,create:e})]}get extension(){return this}}const Ho=4,qo=3,Xo=2,Wo=1;function Zo(e){return t=>new _o(t,e)}const Yo={highest:Zo(0),high:Zo(Wo),default:Zo(Xo),low:Zo(qo),lowest:Zo(Ho)};class _o{constructor(e,t){this.inner=e,this.prec=t}}class Ko{of(e){return new Jo(this,e)}reconfigure(e){return Ko.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class Jo{constructor(e,t){this.compartment=e,this.inner=t}}class $o{constructor(e,t,i,s,n,r){for(this.base=e,this.compartments=t,this.dynamicSlots=i,this.address=s,this.staticValues=n,this.facets=r,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return null==t?e.default:this.staticValues[t>>1]}static resolve(e,t,i){let s=[],n=Object.create(null),r=new Map;for(let i of function(e,t,i){let s=[[],[],[],[],[]],n=new Map;return function e(r,o){let a=n.get(r);if(null!=a){if(a<=o)return;let e=s[a].indexOf(r);e>-1&&s[a].splice(e,1),r instanceof Jo&&i.delete(r.compartment)}if(n.set(r,o),Array.isArray(r))for(let t of r)e(t,o);else if(r instanceof Jo){if(i.has(r.compartment))throw new RangeError("Duplicate use of compartment in extensions");let s=t.get(r.compartment)||r.inner;i.set(r.compartment,s),e(s,o)}else if(r instanceof _o)e(r.inner,r.prec);else if(r instanceof jo)s[o].push(r),r.provides&&e(r.provides,o);else if(r instanceof Uo)s[o].push(r),r.facet.extensions&&e(r.facet.extensions,Xo);else{let t=r.extension;if(!t)throw new Error(`Unrecognized extension value in extension set (${r}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);e(t,o)}}(e,Xo),s.reduce(((e,t)=>e.concat(t)))}(e,t,r))i instanceof jo?s.push(i):(n[i.facet.id]||(n[i.facet.id]=[])).push(i);let o=Object.create(null),a=[],l=[];for(let e of s)o[e.id]=l.length<<1,l.push((t=>e.slot(t)));let h=null==i?void 0:i.config.facets;for(let e in n){let t=n[e],s=t[0].facet,r=h&&h[e]||[];if(t.every((e=>0==e.type)))if(o[s.id]=a.length<<1|1,Fo(r,t))a.push(i.facet(s));else{let e=s.combine(t.map((e=>e.value)));a.push(i&&s.compare(e,i.facet(s))?i.facet(s):e)}else{for(let e of t)0==e.type?(o[e.id]=a.length<<1|1,a.push(e.value)):(o[e.id]=l.length<<1,l.push((t=>e.dynamicSlot(t))));o[s.id]=l.length<<1,l.push((e=>No(e,s,t)))}}let c=l.map((e=>e(o)));return new $o(e,r,c,o,a,n)}}function ea(e,t){if(1&t)return 2;let i=t>>1,s=e.status[i];if(4==s)throw new Error("Cyclic dependency between fields and/or facets");if(2&s)return s;e.status[i]=4;let n=e.computeSlot(e,e.config.dynamicSlots[i]);return e.status[i]=2|n}function ta(e,t){return 1&t?e.config.staticValues[t>>1]:e.values[t>>1]}const ia=Lo.define(),sa=Lo.define({combine:e=>e.some((e=>e)),static:!0}),na=Lo.define({combine:e=>e.length?e[0]:void 0,static:!0}),ra=Lo.define(),oa=Lo.define(),aa=Lo.define(),la=Lo.define({combine:e=>!!e.length&&e[0]});class ha{constructor(e,t){this.type=e,this.value=t}static define(){return new ca}}class ca{of(e){return new ha(this,e)}}class da{constructor(e){this.map=e}of(e){return new ua(this,e)}}class ua{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return void 0===t?void 0:t==this.value?this:new ua(this.type,t)}is(e){return this.type==e}static define(e={}){return new da(e.map||(e=>e))}static mapEffects(e,t){if(!e.length)return e;let i=[];for(let s of e){let e=s.map(t);e&&i.push(e)}return i}}ua.reconfigure=ua.define(),ua.appendConfig=ua.define();class pa{constructor(e,t,i,s,n,r){this.startState=e,this.changes=t,this.selection=i,this.effects=s,this.annotations=n,this.scrollIntoView=r,this._doc=null,this._state=null,i&&Ro(i,t.newLength),n.some((e=>e.type==pa.time))||(this.annotations=n.concat(pa.time.of(Date.now())))}static create(e,t,i,s,n,r){return new pa(e,t,i,s,n,r)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(pa.userEvent);return!(!t||!(t==e||t.length>e.length&&t.slice(0,e.length)==e&&"."==t[e.length]))}}function fa(e,t){let i=[];for(let s=0,n=0;;){let r,o;if(s<e.length&&(n==t.length||t[n]>=e[s]))r=e[s++],o=e[s++];else{if(!(n<t.length))return i;r=t[n++],o=t[n++]}!i.length||i[i.length-1]<r?i.push(r,o):i[i.length-1]<o&&(i[i.length-1]=o)}}function ma(e,t,i){var s;let n,r,o;return i?(n=t.changes,r=So.empty(t.changes.length),o=e.changes.compose(t.changes)):(n=t.changes.map(e.changes),r=e.changes.mapDesc(t.changes,!0),o=e.changes.compose(n)),{changes:o,selection:t.selection?t.selection.map(r):null===(s=e.selection)||void 0===s?void 0:s.map(n),effects:ua.mapEffects(e.effects,n).concat(ua.mapEffects(t.effects,r)),annotations:e.annotations.length?e.annotations.concat(t.annotations):t.annotations,scrollIntoView:e.scrollIntoView||t.scrollIntoView}}function ga(e,t,i){let s=t.selection,n=va(t.annotations);return t.userEvent&&(n=n.concat(pa.userEvent.of(t.userEvent))),{changes:t.changes instanceof So?t.changes:So.of(t.changes||[],i,e.facet(na)),selection:s&&(s instanceof Do?s:Do.single(s.anchor,s.head)),effects:va(t.effects),annotations:n,scrollIntoView:!!t.scrollIntoView}}function Aa(e,t,i){let s=ga(e,t.length?t[0]:{},e.doc.length);t.length&&!1===t[0].filter&&(i=!1);for(let n=1;n<t.length;n++){!1===t[n].filter&&(i=!1);let r=!!t[n].sequential;s=ma(s,ga(e,t[n],r?s.changes.newLength:e.doc.length),r)}let n=pa.create(e,s.changes,s.selection,s.effects,s.annotations,s.scrollIntoView);return function(e){let t=e.startState,i=t.facet(aa),s=e;for(let n=i.length-1;n>=0;n--){let r=i[n](e);r&&Object.keys(r).length&&(s=ma(s,ga(t,r,e.changes.newLength),!0))}return s==e?e:pa.create(t,e.changes,e.selection,s.effects,s.annotations,s.scrollIntoView)}(i?function(e){let t=e.startState,i=!0;for(let s of t.facet(ra)){let t=s(e);if(!1===t){i=!1;break}Array.isArray(t)&&(i=!0===i?t:fa(i,t))}if(!0!==i){let s,n;if(!1===i)n=e.changes.invertedDesc,s=So.empty(t.doc.length);else{let t=e.changes.filter(i);s=t.changes,n=t.filtered.mapDesc(t.changes).invertedDesc}e=pa.create(t,s,e.selection&&e.selection.map(n),ua.mapEffects(e.effects,n),e.annotations,e.scrollIntoView)}let s=t.facet(oa);for(let i=s.length-1;i>=0;i--){let n=s[i](e);e=n instanceof pa?n:Array.isArray(n)&&1==n.length&&n[0]instanceof pa?n[0]:Aa(t,va(n),!1)}return e}(n):n)}pa.time=ha.define(),pa.userEvent=ha.define(),pa.addToHistory=ha.define(),pa.remote=ha.define();const ba=[];function va(e){return null==e?ba:Array.isArray(e)?e:[e]}var ya=function(e){return e[e.Word=0]="Word",e[e.Space=1]="Space",e[e.Other=2]="Other",e}(ya||(ya={}));const wa=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let xa;try{xa=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(V){}function Oa(e){return t=>{if(!/\S/.test(t))return ya.Space;if(function(e){if(xa)return xa.test(e);for(let t=0;t<e.length;t++){let i=e[t];if(/\w/.test(i)||i>""&&(i.toUpperCase()!=i.toLowerCase()||wa.test(i)))return!0}return!1}(t))return ya.Word;for(let i=0;i<e.length;i++)if(t.indexOf(e[i])>-1)return ya.Word;return ya.Other}}class Ca{constructor(e,t,i,s,n,r){this.config=e,this.doc=t,this.selection=i,this.values=s,this.status=e.statusTemplate.slice(),this.computeSlot=n,r&&(r._state=this);for(let e=0;e<this.config.dynamicSlots.length;e++)ea(this,e<<1);this.computeSlot=null}field(e,t=!0){let i=this.config.address[e.id];if(null!=i)return ea(this,i),ta(this,i);if(t)throw new RangeError("Field is not present in this state")}update(...e){return Aa(this,e,!0)}applyTransaction(e){let t,i=this.config,{base:s,compartments:n}=i;for(let t of e.effects)t.is(Ko.reconfigure)?(i&&(n=new Map,i.compartments.forEach(((e,t)=>n.set(t,e))),i=null),n.set(t.value.compartment,t.value.extension)):t.is(ua.reconfigure)?(i=null,s=t.value):t.is(ua.appendConfig)&&(i=null,s=va(s).concat(t.value));i?t=e.startState.values.slice():(i=$o.resolve(s,n,this),t=new Ca(i,this.doc,this.selection,i.dynamicSlots.map((()=>null)),((e,t)=>t.reconfigure(e,this)),null).values),new Ca(i,e.newDoc,e.newSelection,t,((t,i)=>i.update(t,e)),e)}replaceSelection(e){return"string"==typeof e&&(e=this.toText(e)),this.changeByRange((t=>({changes:{from:t.from,to:t.to,insert:e},range:Do.cursor(t.from+e.length)})))}changeByRange(e){let t=this.selection,i=e(t.ranges[0]),s=this.changes(i.changes),n=[i.range],r=va(i.effects);for(let i=1;i<t.ranges.length;i++){let o=e(t.ranges[i]),a=this.changes(o.changes),l=a.map(s);for(let e=0;e<i;e++)n[e]=n[e].map(l);let h=s.mapDesc(a,!0);n.push(o.range.map(h)),s=s.compose(l),r=ua.mapEffects(r,l).concat(ua.mapEffects(va(o.effects),h))}return{changes:s,selection:Do.create(n,t.mainIndex),effects:r}}changes(e=[]){return e instanceof So?e:So.of(e,this.doc.length,this.facet(Ca.lineSeparator))}toText(e){return to.of(e.split(this.facet(Ca.lineSeparator)||xo))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return null==t?e.default:(ea(this,t),ta(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let s=e[i];s instanceof jo&&null!=this.config.address[s.id]&&(t[i]=s.spec.toJSON(this.field(e[i]),this))}return t}static fromJSON(e,t={},i){if(!e||"string"!=typeof e.doc)throw new RangeError("Invalid JSON representation for EditorState");let s=[];if(i)for(let t in i)if(Object.prototype.hasOwnProperty.call(e,t)){let n=i[t],r=e[t];s.push(n.init((e=>n.spec.fromJSON(r,e))))}return Ca.create({doc:e.doc,selection:Do.fromJSON(e.selection),extensions:t.extensions?s.concat([t.extensions]):s})}static create(e={}){let t=$o.resolve(e.extensions||[],new Map),i=e.doc instanceof to?e.doc:to.of((e.doc||"").split(t.staticFacet(Ca.lineSeparator)||xo)),s=e.selection?e.selection instanceof Do?e.selection:Do.single(e.selection.anchor,e.selection.head):Do.single(0);return Ro(s,i.length),t.staticFacet(sa)||(s=s.asSingle()),new Ca(t,i,s,t.dynamicSlots.map((()=>null)),((e,t)=>t.create(e)),null)}get tabSize(){return this.facet(Ca.tabSize)}get lineBreak(){return this.facet(Ca.lineSeparator)||"\n"}get readOnly(){return this.facet(la)}phrase(e,...t){for(let t of this.facet(Ca.phrases))if(Object.prototype.hasOwnProperty.call(t,e)){e=t[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,((e,i)=>{if("$"==i)return"$";let s=+(i||1);return!s||s>t.length?e:t[s-1]}))),e}languageDataAt(e,t,i=-1){let s=[];for(let n of this.facet(ia))for(let r of n(this,t,i))Object.prototype.hasOwnProperty.call(r,e)&&s.push(r[e]);return s}charCategorizer(e){return Oa(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:i,length:s}=this.doc.lineAt(e),n=this.charCategorizer(e),r=e-i,o=e-i;for(;r>0;){let e=fo(t,r,!1);if(n(t.slice(e,r))!=ya.Word)break;r=e}for(;o<s;){let e=fo(t,o);if(n(t.slice(o,e))!=ya.Word)break;o=e}return r==o?null:Do.range(r+i,o+i)}}function Sa(e,t,i={}){let s={};for(let t of e)for(let e of Object.keys(t)){let n=t[e],r=s[e];if(void 0===r)s[e]=n;else if(r===n||void 0===n);else{if(!Object.hasOwnProperty.call(i,e))throw new Error("Config merge conflict for field "+e);s[e]=i[e](r,n)}}for(let e in t)void 0===s[e]&&(s[e]=t[e]);return s}Ca.allowMultipleSelections=sa,Ca.tabSize=Lo.define({combine:e=>e.length?e[0]:4}),Ca.lineSeparator=na,Ca.readOnly=la,Ca.phrases=Lo.define({compare(e,t){let i=Object.keys(e),s=Object.keys(t);return i.length==s.length&&i.every((i=>e[i]==t[i]))}}),Ca.languageData=ia,Ca.changeFilter=ra,Ca.transactionFilter=oa,Ca.transactionExtender=aa,Ko.reconfigure=ua.define();class Ia{eq(e){return this==e}range(e,t=e){return Ea.create(e,t,this)}}Ia.prototype.startSide=Ia.prototype.endSide=0,Ia.prototype.point=!1,Ia.prototype.mapMode=Oo.TrackDel;class Ea{constructor(e,t,i){this.from=e,this.to=t,this.value=i}static create(e,t,i){return new Ea(e,t,i)}}function ka(e,t){return e.from-t.from||e.value.startSide-t.value.startSide}class Ba{constructor(e,t,i,s){this.from=e,this.to=t,this.value=i,this.maxPoint=s}get length(){return this.to[this.to.length-1]}findIndex(e,t,i,s=0){let n=i?this.to:this.from;for(let r=s,o=n.length;;){if(r==o)return r;let s=r+o>>1,a=n[s]-e||(i?this.value[s].endSide:this.value[s].startSide)-t;if(s==r)return a>=0?r:o;a>=0?o=s:r=s+1}}between(e,t,i,s){for(let n=this.findIndex(t,-1e9,!0),r=this.findIndex(i,1e9,!1,n);n<r;n++)if(!1===s(this.from[n]+e,this.to[n]+e,this.value[n]))return!1}map(e,t){let i=[],s=[],n=[],r=-1,o=-1;for(let a=0;a<this.value.length;a++){let l,h,c=this.value[a],d=this.from[a]+e,u=this.to[a]+e;if(d==u){let e=t.mapPos(d,c.startSide,c.mapMode);if(null==e)continue;if(l=h=e,c.startSide!=c.endSide&&(h=t.mapPos(d,c.endSide))<l)continue}else if((l=t.mapPos(d,c.startSide))>(h=t.mapPos(u,c.endSide))||l==h&&c.startSide>0&&c.endSide<=0)continue;(h-l||c.endSide-c.startSide)<0||(r<0&&(r=l),c.point&&(o=Math.max(o,h-l)),i.push(c),s.push(l-r),n.push(h-r))}return{mapped:i.length?new Ba(s,n,i,o):null,pos:r}}}class Qa{constructor(e,t,i,s){this.chunkPos=e,this.chunk=t,this.nextLayer=i,this.maxPoint=s}static create(e,t,i,s){return new Qa(e,t,i,s)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:i=!1,filterFrom:s=0,filterTo:n=this.length}=e,r=e.filter;if(0==t.length&&!r)return this;if(i&&(t=t.slice().sort(ka)),this.isEmpty)return t.length?Qa.of(t):this;let o=new Da(this,null,-1).goto(0),a=0,l=[],h=new Ma;for(;o.value||a<t.length;)if(a<t.length&&(o.from-t[a].from||o.startSide-t[a].value.startSide)>=0){let e=t[a++];h.addInner(e.from,e.to,e.value)||l.push(e)}else 1==o.rangeIndex&&o.chunkIndex<this.chunk.length&&(a==t.length||this.chunkEnd(o.chunkIndex)<t[a].from)&&(!r||s>this.chunkEnd(o.chunkIndex)||n<this.chunkPos[o.chunkIndex])&&h.addChunk(this.chunkPos[o.chunkIndex],this.chunk[o.chunkIndex])?o.nextChunk():((!r||s>o.to||n<o.from||r(o.from,o.to,o.value))&&(h.addInner(o.from,o.to,o.value)||l.push(Ea.create(o.from,o.to,o.value))),o.next());return h.finishInner(this.nextLayer.isEmpty&&!l.length?Qa.empty:this.nextLayer.update({add:l,filter:r,filterFrom:s,filterTo:n}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],i=[],s=-1;for(let n=0;n<this.chunk.length;n++){let r=this.chunkPos[n],o=this.chunk[n],a=e.touchesRange(r,r+o.length);if(!1===a)s=Math.max(s,o.maxPoint),t.push(o),i.push(e.mapPos(r));else if(!0===a){let{mapped:n,pos:a}=o.map(r,e);n&&(s=Math.max(s,n.maxPoint),t.push(n),i.push(a))}}let n=this.nextLayer.map(e);return 0==t.length?n:new Qa(i,t,n||Qa.empty,s)}between(e,t,i){if(!this.isEmpty){for(let s=0;s<this.chunk.length;s++){let n=this.chunkPos[s],r=this.chunk[s];if(t>=n&&e<=n+r.length&&!1===r.between(n,e-n,t-n,i))return}this.nextLayer.between(e,t,i)}}iter(e=0){return Ra.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return Ra.from(e).goto(t)}static compare(e,t,i,s,n=-1){let r=e.filter((e=>e.maxPoint>0||!e.isEmpty&&e.maxPoint>=n)),o=t.filter((e=>e.maxPoint>0||!e.isEmpty&&e.maxPoint>=n)),a=Ta(r,o,i),l=new La(r,a,n),h=new La(o,a,n);i.iterGaps(((e,t,i)=>Fa(l,e,h,t,i,s))),i.empty&&0==i.length&&Fa(l,0,h,0,0,s)}static eq(e,t,i=0,s){null==s&&(s=999999999);let n=e.filter((e=>!e.isEmpty&&t.indexOf(e)<0)),r=t.filter((t=>!t.isEmpty&&e.indexOf(t)<0));if(n.length!=r.length)return!1;if(!n.length)return!0;let o=Ta(n,r),a=new La(n,o,0).goto(i),l=new La(r,o,0).goto(i);for(;;){if(a.to!=l.to||!Ua(a.active,l.active)||a.point&&(!l.point||!a.point.eq(l.point)))return!1;if(a.to>s)return!0;a.next(),l.next()}}static spans(e,t,i,s,n=-1){let r=new La(e,null,n).goto(t),o=t,a=r.openStart;for(;;){let e=Math.min(r.to,i);if(r.point){let i=r.activeForPoint(r.to),n=r.pointFrom<t?i.length+1:Math.min(i.length,a);s.point(o,e,r.point,i,n,r.pointRank),a=Math.min(r.openEnd(e),i.length)}else e>o&&(s.span(o,e,r.active,a),a=r.openEnd(e));if(r.to>i)return a+(r.point&&r.to>i?1:0);o=r.to,r.next()}}static of(e,t=!1){let i=new Ma;for(let s of e instanceof Ea?[e]:t?function(e){if(e.length>1)for(let t=e[0],i=1;i<e.length;i++){let s=e[i];if(ka(t,s)>0)return e.slice().sort(ka);t=s}return e}(e):e)i.add(s.from,s.to,s.value);return i.finish()}}Qa.empty=new Qa([],[],null,-1),Qa.empty.nextLayer=Qa.empty;class Ma{constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}finishChunk(e){this.chunks.push(new Ba(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}add(e,t,i){this.addInner(e,t,i)||(this.nextLayer||(this.nextLayer=new Ma)).add(e,t,i)}addInner(e,t,i){let s=e-this.lastTo||i.startSide-this.last.endSide;if(s<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return!(s<0||(250==this.from.length&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=t,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),0))}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let i=t.value.length-1;return this.last=t.value[i],this.lastFrom=t.from[i]+e,this.lastTo=t.to[i]+e,!0}finish(){return this.finishInner(Qa.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),0==this.chunks.length)return e;let t=Qa.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function Ta(e,t,i){let s=new Map;for(let t of e)for(let e=0;e<t.chunk.length;e++)t.chunk[e].maxPoint<=0&&s.set(t.chunk[e],t.chunkPos[e]);let n=new Set;for(let e of t)for(let t=0;t<e.chunk.length;t++){let r=s.get(e.chunk[t]);null==r||(i?i.mapPos(r):r)!=e.chunkPos[t]||(null==i?void 0:i.touchesRange(r,r+e.chunk[t].length))||n.add(e.chunk[t])}return n}class Da{constructor(e,t,i,s=0){this.layer=e,this.skip=t,this.minPoint=i,this.rank=s}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,i){for(;this.chunkIndex<this.layer.chunk.length;){let t=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(t)||this.layer.chunkEnd(this.chunkIndex)<e||t.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let s=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!i||this.rangeIndex<s)&&this.setRangeIndex(s)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;){if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],i=e+t.from[this.rangeIndex];if(this.from=i,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Ra{constructor(e){this.heap=e}static from(e,t=null,i=-1){let s=[];for(let n=0;n<e.length;n++)for(let r=e[n];!r.isEmpty;r=r.nextLayer)r.maxPoint>=i&&s.push(new Da(r,t,i,n));return 1==s.length?s[0]:new Ra(s)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let i of this.heap)i.goto(e,t);for(let e=this.heap.length>>1;e>=0;e--)Pa(this.heap,e);return this.next(),this}forward(e,t){for(let i of this.heap)i.forward(e,t);for(let e=this.heap.length>>1;e>=0;e--)Pa(this.heap,e);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(0==this.heap.length)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Pa(this.heap,0)}}}function Pa(e,t){for(let i=e[t];;){let s=1+(t<<1);if(s>=e.length)break;let n=e[s];if(s+1<e.length&&n.compare(e[s+1])>=0&&(n=e[s+1],s++),i.compare(n)<0)break;e[s]=i,e[t]=n,t=s}}class La{constructor(e,t,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Ra.from(e,t,i)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){za(this.active,e),za(this.activeTo,e),za(this.activeRank,e),this.minActive=Na(this.active,this.activeTo)}addActive(e){let t=0,{value:i,to:s,rank:n}=this.cursor;for(;t<this.activeRank.length&&this.activeRank[t]<=n;)t++;Ga(this.active,t,i),Ga(this.activeTo,t,s),Ga(this.activeRank,t,n),e&&Ga(e,t,this.cursor.from),this.minActive=Na(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let s=this.minActive;if(s>-1&&(this.activeTo[s]-this.cursor.from||this.active[s].endSide-this.cursor.startSide)<0){if(this.activeTo[s]>e){this.to=this.activeTo[s],this.endSide=this.active[s].endSide;break}this.removeActive(s),i&&za(i,s)}else{if(!this.cursor.value){this.to=this.endSide=1e9;break}if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}{let e=this.cursor.value;if(e.point){if(!(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)){this.point=e,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=e.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}this.cursor.next()}else this.addActive(i),this.cursor.next()}}}if(i){this.openStart=0;for(let t=i.length-1;t>=0&&i[t]<e;t--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&t.push(this.active[i]);return t.reverse()}openEnd(e){let t=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)t++;return t}}function Fa(e,t,i,s,n,r){e.goto(t),i.goto(s);let o=s+n,a=s,l=s-t;for(;;){let t=e.to+l-i.to||e.endSide-i.endSide,s=t<0?e.to+l:i.to,n=Math.min(s,o);if(e.point||i.point?e.point&&i.point&&(e.point==i.point||e.point.eq(i.point))&&Ua(e.activeForPoint(e.to+l),i.activeForPoint(i.to))||r.comparePoint(a,n,e.point,i.point):n>a&&!Ua(e.active,i.active)&&r.compareRange(a,n,e.active,i.active),s>o)break;a=s,t<=0&&e.next(),t>=0&&i.next()}}function Ua(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++)if(e[i]!=t[i]&&!e[i].eq(t[i]))return!1;return!0}function za(e,t){for(let i=t,s=e.length-1;i<s;i++)e[i]=e[i+1];e.pop()}function Ga(e,t,i){for(let i=e.length-1;i>=t;i--)e[i+1]=e[i];e[t]=i}function Na(e,t){let i=-1,s=1e9;for(let n=0;n<t.length;n++)(t[n]-s||e[n].endSide-e[i].endSide)<0&&(i=n,s=t[n]);return i}function Va(e,t,i=e.length){let s=0;for(let n=0;n<i;)9==e.charCodeAt(n)?(s+=t-s%t,n++):(s++,n=fo(e,n));return s}const ja="undefined"==typeof Symbol?"__ͼ":Symbol.for("ͼ"),Ha="undefined"==typeof Symbol?"__styleSet"+Math.floor(1e8*Math.random()):Symbol("styleSet"),qa="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:{};class Xa{constructor(e,t){this.rules=[];let{finish:i}=t||{};function s(e){return/^@/.test(e)?[e]:e.split(/,\s*/)}function n(e,t,r,o){let a=[],l=/^@(\w+)\b/.exec(e[0]),h=l&&"keyframes"==l[1];if(l&&null==t)return r.push(e[0]+";");for(let i in t){let o=t[i];if(/&/.test(i))n(i.split(/,\s*/).map((t=>e.map((e=>t.replace(/&/,e))))).reduce(((e,t)=>e.concat(t))),o,r);else if(o&&"object"==typeof o){if(!l)throw new RangeError("The value of a property ("+i+") should be a primitive value.");n(s(i),o,a,h)}else null!=o&&a.push(i.replace(/_.*/,"").replace(/[A-Z]/g,(e=>"-"+e.toLowerCase()))+": "+o+";")}(a.length||h)&&r.push((!i||l||o?e:e.map(i)).join(", ")+" {"+a.join(" ")+"}")}for(let t in e)n(s(t),e[t],this.rules)}getRules(){return this.rules.join("\n")}static newName(){let e=qa[ja]||1;return qa[ja]=e+1,"ͼ"+e.toString(36)}static mount(e,t){(e[Ha]||new Za(e)).mount(Array.isArray(t)?t:[t])}}let Wa=null;class Za{constructor(e){if(!e.head&&e.adoptedStyleSheets&&"undefined"!=typeof CSSStyleSheet){if(Wa)return e.adoptedStyleSheets=[Wa.sheet].concat(e.adoptedStyleSheets),e[Ha]=Wa;this.sheet=new CSSStyleSheet,e.adoptedStyleSheets=[this.sheet].concat(e.adoptedStyleSheets),Wa=this}else{this.styleTag=(e.ownerDocument||e).createElement("style");let t=e.head||e;t.insertBefore(this.styleTag,t.firstChild)}this.modules=[],e[Ha]=this}mount(e){let t=this.sheet,i=0,s=0;for(let n=0;n<e.length;n++){let r=e[n],o=this.modules.indexOf(r);if(o<s&&o>-1&&(this.modules.splice(o,1),s--,o=-1),-1==o){if(this.modules.splice(s++,0,r),t)for(let e=0;e<r.rules.length;e++)t.insertRule(r.rules[e],i++)}else{for(;s<o;)i+=this.modules[s++].rules.length;i+=r.rules.length,s++}}if(!t){let e="";for(let t=0;t<this.modules.length;t++)e+=this.modules[t].getRules()+"\n";this.styleTag.textContent=e}}}for(var Ya={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},_a={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Ka="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),Ja=("undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),"undefined"!=typeof navigator&&/Mac/.test(navigator.platform)),$a="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),el=Ja||Ka&&+Ka[1]<57,tl=0;tl<10;tl++)Ya[48+tl]=Ya[96+tl]=String(tl);for(tl=1;tl<=24;tl++)Ya[tl+111]="F"+tl;for(tl=65;tl<=90;tl++)Ya[tl]=String.fromCharCode(tl+32),_a[tl]=String.fromCharCode(tl);for(var il in Ya)_a.hasOwnProperty(il)||(_a[il]=Ya[il]);function sl(e){return(11==e.nodeType?e.getSelection?e:e.ownerDocument:e).getSelection()}function nl(e,t){return!!t&&(e==t||e.contains(1!=t.nodeType?t.parentNode:t))}function rl(e,t){if(!t.anchorNode)return!1;try{return nl(e,t.anchorNode)}catch(e){return!1}}function ol(e){return 3==e.nodeType?bl(e,0,e.nodeValue.length).getClientRects():1==e.nodeType?e.getClientRects():[]}function al(e,t,i,s){return!!i&&(hl(e,t,i,s,-1)||hl(e,t,i,s,1))}function ll(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t}function hl(e,t,i,s,n){for(;;){if(e==i&&t==s)return!0;if(t==(n<0?0:cl(e))){if("DIV"==e.nodeName)return!1;let i=e.parentNode;if(!i||1!=i.nodeType)return!1;t=ll(e)+(n<0?0:1),e=i}else{if(1!=e.nodeType)return!1;if(1==(e=e.childNodes[t+(n<0?-1:0)]).nodeType&&"false"==e.contentEditable)return!1;t=n<0?cl(e):0}}}function cl(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}const dl={left:0,right:0,top:0,bottom:0};function ul(e,t){let i=t?e.left:e.right;return{left:i,right:i,top:e.top,bottom:e.bottom}}function pl(e){return{left:0,right:e.innerWidth,top:0,bottom:e.innerHeight}}class fl{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){this.set(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)}set(e,t,i,s){this.anchorNode=e,this.anchorOffset=t,this.focusNode=i,this.focusOffset=s}}let ml,gl=null;function Al(e){if(e.setActive)return e.setActive();if(gl)return e.focus(gl);let t=[];for(let i=e;i&&(t.push(i,i.scrollTop,i.scrollLeft),i!=i.ownerDocument);i=i.parentNode);if(e.focus(null==gl?{get preventScroll(){return gl={preventScroll:!0},!0}}:void 0),!gl){gl=!1;for(let e=0;e<t.length;){let i=t[e++],s=t[e++],n=t[e++];i.scrollTop!=s&&(i.scrollTop=s),i.scrollLeft!=n&&(i.scrollLeft=n)}}}function bl(e,t,i=t){let s=ml||(ml=document.createRange());return s.setEnd(e,i),s.setStart(e,t),s}function vl(e,t,i){let s={key:t,code:t,keyCode:i,which:i,cancelable:!0},n=new KeyboardEvent("keydown",s);n.synthetic=!0,e.dispatchEvent(n);let r=new KeyboardEvent("keyup",s);return r.synthetic=!0,e.dispatchEvent(r),n.defaultPrevented||r.defaultPrevented}function yl(e){for(;e.attributes.length;)e.removeAttributeNode(e.attributes[0])}class wl{constructor(e,t,i=!0){this.node=e,this.offset=t,this.precise=i}static before(e,t){return new wl(e.parentNode,ll(e),t)}static after(e,t){return new wl(e.parentNode,ll(e)+1,t)}}const xl=[];class Ol{constructor(){this.parent=null,this.dom=null,this.dirty=2}get editorView(){if(!this.parent)throw new Error("Accessing view in orphan content view");return this.parent.editorView}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let i of this.children){if(i==e)return t;t+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}coordsAt(e,t){return null}sync(e){if(2&this.dirty){let t,i=this.dom,s=null;for(let n of this.children){if(n.dirty){if(!n.dom&&(t=s?s.nextSibling:i.firstChild)){let e=Ol.get(t);(!e||!e.parent&&e.canReuseDOM(n))&&n.reuseDOM(t)}n.sync(e),n.dirty=0}if(t=s?s.nextSibling:i.firstChild,e&&!e.written&&e.node==i&&t!=n.dom&&(e.written=!0),n.dom.parentNode==i)for(;t&&t!=n.dom;)t=Cl(t);else i.insertBefore(n.dom,t);s=n.dom}for((t=s?s.nextSibling:i.firstChild)&&e&&e.node==i&&(e.written=!0);t;)t=Cl(t)}else if(1&this.dirty)for(let t of this.children)t.dirty&&(t.sync(e),t.dirty=0)}reuseDOM(e){}localPosFromDOM(e,t){let i;if(e==this.dom)i=this.dom.childNodes[t];else{let s=0==cl(e)?0:0==t?-1:1;for(;;){let t=e.parentNode;if(t==this.dom)break;0==s&&t.firstChild!=t.lastChild&&(s=e==t.firstChild?-1:1),e=t}i=s<0?e:e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!Ol.get(i);)i=i.nextSibling;if(!i)return this.length;for(let e=0,t=0;;e++){let s=this.children[e];if(s.dom==i)return t;t+=s.length+s.breakAfter}}domBoundsAround(e,t,i=0){let s=-1,n=-1,r=-1,o=-1;for(let a=0,l=i,h=i;a<this.children.length;a++){let i=this.children[a],c=l+i.length;if(l<e&&c>t)return i.domBoundsAround(e,t,l);if(c>=e&&-1==s&&(s=a,n=l),l>t&&i.dom.parentNode==this.dom){r=a,o=h;break}h=c,l=c+i.breakAfter}return{from:n,to:o<0?i+this.length:o,startDOM:(s?this.children[s-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:r<this.children.length&&r>=0?this.children[r].dom:null}}markDirty(e=!1){this.dirty|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.dirty|=2),1&t.dirty)return;t.dirty|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.dirty&&this.markParentsDirty(!0))}setDOM(e){this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,i=xl){this.markDirty();for(let i=e;i<t;i++){let e=this.children[i];e.parent==this&&e.destroy()}this.children.splice(e,t-e,...i);for(let e=0;e<i.length;e++)i[e].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new Sl(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+("Text"==e?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}merge(e,t,i,s,n,r){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor}getSide(){return 0}destroy(){this.parent=null}}function Cl(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}Ol.prototype.breakAfter=0;class Sl{constructor(e,t,i){this.children=e,this.pos=t,this.i=i,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||0==this.i||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function Il(e,t,i,s,n,r,o,a,l){let{children:h}=e,c=h.length?h[t]:null,d=r.length?r[r.length-1]:null,u=d?d.breakAfter:o;if(!(t==s&&c&&!o&&!u&&r.length<2&&c.merge(i,n,r.length?d:null,0==i,a,l))){if(s<h.length){let e=h[s];e&&n<e.length?(t==s&&(e=e.split(n),n=0),!u&&d&&e.merge(0,n,d,!0,0,l)?r[r.length-1]=e:(n&&e.merge(0,n,null,!1,0,l),r.push(e))):(null==e?void 0:e.breakAfter)&&(d?d.breakAfter=1:o=1),s++}for(c&&(c.breakAfter=o,i>0&&(!o&&r.length&&c.merge(i,c.length,r[0],!1,a,0)?c.breakAfter=r.shift().breakAfter:(i<c.length||c.children.length&&0==c.children[c.children.length-1].length)&&c.merge(i,c.length,null,!1,a,0),t++));t<s&&r.length;)if(h[s-1].become(r[r.length-1]))s--,r.pop(),l=r.length?0:a;else{if(!h[t].become(r[0]))break;t++,r.shift(),a=r.length?0:l}!r.length&&t&&s<h.length&&!h[t-1].breakAfter&&h[s].merge(0,0,h[t-1],!1,a,l)&&t--,(t<s||r.length)&&e.replaceChildren(t,s,r)}}function El(e,t,i,s,n,r){let o=e.childCursor(),{i:a,off:l}=o.findPos(i,1),{i:h,off:c}=o.findPos(t,-1),d=t-i;for(let e of s)d+=e.length;e.length+=d,Il(e,h,c,a,l,s,0,n,r)}let kl="undefined"!=typeof navigator?navigator:{userAgent:"",vendor:"",platform:""},Bl="undefined"!=typeof document?document:{documentElement:{style:{}}};const Ql=/Edge\/(\d+)/.exec(kl.userAgent),Ml=/MSIE \d/.test(kl.userAgent),Tl=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(kl.userAgent),Dl=!!(Ml||Tl||Ql),Rl=!Dl&&/gecko\/(\d+)/i.test(kl.userAgent),Pl=!Dl&&/Chrome\/(\d+)/.exec(kl.userAgent),Ll="webkitFontSmoothing"in Bl.documentElement.style,Fl=!Dl&&/Apple Computer/.test(kl.vendor),Ul=Fl&&(/Mobile\/\w+/.test(kl.userAgent)||kl.maxTouchPoints>2);var zl={mac:Ul||/Mac/.test(kl.platform),windows:/Win/.test(kl.platform),linux:/Linux|X11/.test(kl.platform),ie:Dl,ie_version:Ml?Bl.documentMode||6:Tl?+Tl[1]:Ql?+Ql[1]:0,gecko:Rl,gecko_version:Rl?+(/Firefox\/(\d+)/.exec(kl.userAgent)||[0,0])[1]:0,chrome:!!Pl,chrome_version:Pl?+Pl[1]:0,ios:Ul,android:/Android\b/.test(kl.userAgent),safari:Fl,webkit_version:Ll?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:null!=Bl.documentElement.style.tabSize?"tab-size":"-moz-tab-size"};class Gl extends Ol{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){3==e.nodeType&&this.createDOM(e)}merge(e,t,i){return(!i||i instanceof Gl&&!(this.length-(t-e)+i.length>256))&&(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new Gl(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new wl(this.dom,e)}domBoundsAround(e,t,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return Vl(this.dom,e,t)}}class Nl extends Ol{constructor(e,t=[],i=0){super(),this.mark=e,this.children=t,this.length=i;for(let e of t)e.setParent(this)}setAttrs(e){if(yl(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.dirty|=6)}sync(e){this.dom?4&this.dirty&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e)}merge(e,t,i,s,n,r){return!(i&&(!(i instanceof Nl&&i.mark.eq(this.mark))||e&&n<=0||t<this.length&&r<=0)||(El(this,e,t,i?i.children:[],n-1,r-1),this.markDirty(),0))}split(e){let t=[],i=0,s=-1,n=0;for(let r of this.children){let o=i+r.length;o>e&&t.push(i<e?r.split(e-i):r),s<0&&i>=e&&(s=n),i=o,n++}let r=this.length-e;return this.length=e,s>-1&&(this.children.length=s,this.markDirty()),new Nl(this.mark,t,r)}domAtPos(e){return Zl(this,e)}coordsAt(e,t){return _l(this,e,t)}}function Vl(e,t,i){let s=e.nodeValue.length;t>s&&(t=s);let n=t,r=t,o=0;0==t&&i<0||t==s&&i>=0?zl.chrome||zl.gecko||(t?(n--,o=1):r<s&&(r++,o=-1)):i<0?n--:r<s&&r++;let a=bl(e,n,r).getClientRects();if(!a.length)return dl;let l=a[(o?o<0:i>=0)?0:a.length-1];return zl.safari&&!o&&0==l.width&&(l=Array.prototype.find.call(a,(e=>e.width))||l),o?ul(l,o<0):l||null}class jl extends Ol{constructor(e,t,i){super(),this.widget=e,this.length=t,this.side=i,this.prevWidget=null}static create(e,t,i){return new(e.customView||jl)(e,t,i)}split(e){let t=jl.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(){this.dom&&this.widget.updateDOM(this.dom)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,t,i,s,n,r){return!(i&&(!(i instanceof jl&&this.widget.compare(i.widget))||e>0&&n<=0||t<this.length&&r<=0)||(this.length=e+(i?i.length:0)+(this.length-t),0))}become(e){return e.length==this.length&&e instanceof jl&&e.side==this.side&&this.widget.constructor==e.widget.constructor&&(this.widget.eq(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,!0)}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(0==this.length)return to.empty;let e=this;for(;e.parent;)e=e.parent;let t=e.editorView,i=t&&t.state.doc,s=this.posAtStart;return i?i.slice(s,s+this.length):to.empty}domAtPos(e){return 0==e?wl.before(this.dom):wl.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let i=this.dom.getClientRects(),s=null;if(!i.length)return dl;for(let t=e>0?i.length-1:0;s=i[t],!(e>0?0==t:t==i.length-1||s.top<s.bottom);t+=e>0?-1:1);return this.length?s:ul(s,this.side>0)}get isEditable(){return!1}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Hl extends jl{domAtPos(e){let{topView:t,text:i}=this.widget;return t?ql(e,0,t,i,((e,t)=>e.domAtPos(t)),(e=>new wl(i,Math.min(e,i.nodeValue.length)))):new wl(i,Math.min(e,i.nodeValue.length))}sync(){this.setDOM(this.widget.toDOM())}localPosFromDOM(e,t){let{topView:i,text:s}=this.widget;return i?Xl(e,t,i,s):Math.min(t,this.length)}ignoreMutation(){return!1}get overrideDOMText(){return null}coordsAt(e,t){let{topView:i,text:s}=this.widget;return i?ql(e,t,i,s,((e,t,i)=>e.coordsAt(t,i)),((e,t)=>Vl(s,e,t))):Vl(s,e,t)}destroy(){var e;super.destroy(),null===(e=this.widget.topView)||void 0===e||e.destroy()}get isEditable(){return!0}canReuseDOM(){return!0}}function ql(e,t,i,s,n,r){if(i instanceof Nl){for(let o=i.dom.firstChild;o;o=o.nextSibling){let i=Ol.get(o);if(!i)return r(e,t);let a=nl(o,s),l=i.length+(a?s.nodeValue.length:0);if(e<l||e==l&&i.getSide()<=0)return a?ql(e,t,i,s,n,r):n(i,e,t);e-=l}return n(i,i.length,-1)}return i.dom==s?r(e,t):n(i,e,t)}function Xl(e,t,i,s){if(i instanceof Nl)for(let n of i.children){let i=0,r=nl(n.dom,s);if(nl(n.dom,e))return i+(r?Xl(e,t,n,s):n.localPosFromDOM(e,t));i+=r?s.nodeValue.length:n.length}else if(i.dom==s)return Math.min(t,s.nodeValue.length);return i.localPosFromDOM(e,t)}class Wl extends Ol{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof Wl&&e.side==this.side}split(){return new Wl(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return wl.before(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){let t=this.dom.getBoundingClientRect(),i=function(e,t){let i=e.parent,s=i?i.children.indexOf(e):-1;for(;i&&s>=0;)if(t<0?s>0:s<i.children.length){let e=i.children[s+t];if(e instanceof Gl){let i=e.coordsAt(t<0?e.length:0,t);if(i)return i}s+=t}else{if(!(i instanceof Nl&&i.parent)){let e=i.dom.lastChild;if(e&&"BR"==e.nodeName)return e.getClientRects()[0];break}s=i.parent.children.indexOf(i)+(t<0?0:1),i=i.parent}}(this,this.side>0?-1:1);return i&&i.top<t.bottom&&i.bottom>t.top?{left:t.left,right:t.right,top:i.top,bottom:i.bottom}:t}get overrideDOMText(){return to.empty}}function Zl(e,t){let i=e.dom,{children:s}=e,n=0;for(let e=0;n<s.length;n++){let r=s[n],o=e+r.length;if(!(o==e&&r.getSide()<=0)){if(t>e&&t<o&&r.dom.parentNode==i)return r.domAtPos(t-e);if(t<=e)break;e=o}}for(let e=n;e>0;e--){let t=s[e-1];if(t.dom.parentNode==i)return t.domAtPos(t.length)}for(let e=n;e<s.length;e++){let t=s[e];if(t.dom.parentNode==i)return t.domAtPos(0)}return new wl(i,0)}function Yl(e,t,i){let s,{children:n}=e;i>0&&t instanceof Nl&&n.length&&(s=n[n.length-1])instanceof Nl&&s.mark.eq(t.mark)?Yl(s,t.children[0],i-1):(n.push(t),t.setParent(e)),e.length+=t.length}function _l(e,t,i){let s=null,n=-1,r=null,o=-1;!function e(t,i){for(let a=0,l=0;a<t.children.length&&l<=i;a++){let h=t.children[a],c=l+h.length;c>=i&&(h.children.length?e(h,i-l):!r&&(c>i||l==c&&h.getSide()>0)?(r=h,o=i-l):(l<i||l==c&&h.getSide()<0)&&(s=h,n=i-l)),l=c}}(e,t);let a=(i<0?s:r)||s||r;return a?a.coordsAt(Math.max(0,a==s?n:o),i):function(e){let t=e.dom.lastChild;if(!t)return e.dom.getBoundingClientRect();let i=ol(t);return i[i.length-1]||null}(e)}function Kl(e,t){for(let i in e)"class"==i&&t.class?t.class+=" "+e.class:"style"==i&&t.style?t.style+=";"+e.style:t[i]=e[i];return t}function Jl(e,t){if(e==t)return!0;if(!e||!t)return!1;let i=Object.keys(e),s=Object.keys(t);if(i.length!=s.length)return!1;for(let n of i)if(-1==s.indexOf(n)||e[n]!==t[n])return!1;return!0}function $l(e,t,i){let s=null;if(t)for(let n in t)i&&n in i||e.removeAttribute(s=n);if(i)for(let n in i)t&&t[n]==i[n]||e.setAttribute(s=n,i[n]);return!!s}Gl.prototype.children=jl.prototype.children=Wl.prototype.children=xl;class eh{eq(e){return!1}updateDOM(e){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}ignoreEvent(e){return!0}get customView(){return null}destroy(e){}}var th=function(e){return e[e.Text=0]="Text",e[e.WidgetBefore=1]="WidgetBefore",e[e.WidgetAfter=2]="WidgetAfter",e[e.WidgetRange=3]="WidgetRange",e}(th||(th={}));class ih extends Ia{constructor(e,t,i,s){super(),this.startSide=e,this.endSide=t,this.widget=i,this.spec=s}get heightRelevant(){return!1}static mark(e){return new sh(e)}static widget(e){let t=e.side||0,i=!!e.block;return new rh(e,t+=i?t>0?3e8:-4e8:t>0?1e8:-1e8,t,i,e.widget||null,!1)}static replace(e){let t,i,s=!!e.block;if(e.isBlockGap)t=-5e8,i=4e8;else{let{start:n,end:r}=oh(e,s);t=(n?s?-3e8:-1:5e8)-1,i=1+(r?s?2e8:1:-6e8)}return new rh(e,t,i,s,e.widget||null,!0)}static line(e){return new nh(e)}static set(e,t=!1){return Qa.of(e,t)}hasHeight(){return!!this.widget&&this.widget.estimatedHeight>-1}}ih.none=Qa.empty;class sh extends ih{constructor(e){let{start:t,end:i}=oh(e);super(t?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){return this==e||e instanceof sh&&this.tagName==e.tagName&&this.class==e.class&&Jl(this.attrs,e.attrs)}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}sh.prototype.point=!1;class nh extends ih{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof nh&&Jl(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}nh.prototype.mapMode=Oo.TrackBefore,nh.prototype.point=!0;class rh extends ih{constructor(e,t,i,s,n,r){super(t,i,n,e),this.block=s,this.isReplace=r,this.mapMode=s?t<=0?Oo.TrackBefore:Oo.TrackAfter:Oo.TrackDel}get type(){return this.startSide<this.endSide?th.WidgetRange:this.startSide<=0?th.WidgetBefore:th.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5}eq(e){return e instanceof rh&&function(e,t){return e==t||!!(e&&t&&e.compare(t))}(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}function oh(e,t=!1){let{inclusiveStart:i,inclusiveEnd:s}=e;return null==i&&(i=e.inclusive),null==s&&(s=e.inclusive),{start:null!=i?i:t,end:null!=s?s:t}}function ah(e,t,i,s=0){let n=i.length-1;n>=0&&i[n]+s>=e?i[n]=Math.max(i[n],t):i.push(e,t)}rh.prototype.point=!0;class lh extends Ol{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,i,s,n,r){if(i){if(!(i instanceof lh))return!1;this.dom||i.transferDOM(this)}return s&&this.setDeco(i?i.attrs:null),El(this,e,t,i?i.children:[],n,r),!0}split(e){let t=new lh;if(t.breakAfter=this.breakAfter,0==this.length)return t;let{i:i,off:s}=this.childPos(e);s&&(t.append(this.children[i].split(s),0),this.children[i].merge(s,this.children[i].length,null,!1,0,0),i++);for(let e=i;e<this.children.length;e++)t.append(this.children[e],0);for(;i>0&&0==this.children[i-1].length;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=void 0===this.prevAttrs?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){Jl(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){Yl(this,e,t)}addLineDeco(e){let t=e.spec.attributes,i=e.spec.class;t&&(this.attrs=Kl(t,this.attrs||{})),i&&(this.attrs=Kl({class:i},this.attrs||{}))}domAtPos(e){return Zl(this,e)}reuseDOM(e){"DIV"==e.nodeName&&(this.setDOM(e),this.dirty|=6)}sync(e){var t;this.dom?4&this.dirty&&(yl(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),void 0!==this.prevAttrs&&($l(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e);let i=this.dom.lastChild;for(;i&&Ol.get(i)instanceof Nl;)i=i.lastChild;if(!(i&&this.length&&("BR"==i.nodeName||0!=(null===(t=Ol.get(i))||void 0===t?void 0:t.isEditable)||zl.ios&&this.children.some((e=>e instanceof Gl))))){let e=document.createElement("BR");e.cmIgnore=!0,this.dom.appendChild(e)}}measureTextSize(){if(0==this.children.length||this.length>20)return null;let e=0;for(let t of this.children){if(!(t instanceof Gl)||/[^ -~]/.test(t.text))return null;let i=ol(t.dom);if(1!=i.length)return null;e+=i[0].width}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length}:null}coordsAt(e,t){return _l(this,e,t)}become(e){return!1}get type(){return th.Text}static find(e,t){for(let i=0,s=0;i<e.children.length;i++){let n=e.children[i],r=s+n.length;if(r>=t){if(n instanceof lh)return n;if(r>t)break}s=r+n.breakAfter}return null}}class hh extends Ol{constructor(e,t,i){super(),this.widget=e,this.length=t,this.type=i,this.breakAfter=0,this.prevWidget=null}merge(e,t,i,s,n,r){return!(i&&(!(i instanceof hh&&this.widget.compare(i.widget))||e>0&&n<=0||t<this.length&&r<=0)||(this.length=e+(i?i.length:0)+(this.length-t),0))}domAtPos(e){return 0==e?wl.before(this.dom):wl.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let i=new hh(this.widget,t,this.type);return i.breakAfter=this.breakAfter,i}get children(){return xl}sync(){this.dom&&this.widget.updateDOM(this.dom)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):to.empty}domBoundsAround(){return null}become(e){return e instanceof hh&&e.type==this.type&&e.widget.constructor==this.widget.constructor&&(e.widget.eq(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.breakAfter=e.breakAfter,!0)}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class ch{constructor(e,t,i,s){this.doc=e,this.pos=t,this.end=i,this.disallowBlockEffectsFor=s,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(0==this.content.length)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof hh&&e.type==th.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new lh),this.atCursorPos=!0),this.curLine}flushBuffer(e){this.pendingBuffer&&(this.curLine.append(dh(new Wl(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer([]),this.curLine=null,this.content.push(e)}finish(e){e?this.pendingBuffer=0:this.flushBuffer([]),this.posCovered()||this.getLine()}buildText(e,t,i){for(;e>0;){if(this.textOff==this.text.length){let{value:t,lineBreak:i,done:s}=this.cursor.next(this.skip);if(this.skip=0,s)throw new Error("Ran out of text content when drawing inline views");if(i){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer([]),this.curLine=null,e--;continue}this.text=t,this.textOff=0}let s=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(t.length-i)),this.getLine().append(dh(new Gl(this.text.slice(this.textOff,this.textOff+s)),t),i),this.atCursorPos=!0,this.textOff+=s,e-=s,i=0}}span(e,t,i,s){this.buildText(t-e,i,s),this.pos=t,this.openStart<0&&(this.openStart=s)}point(e,t,i,s,n,r){if(this.disallowBlockEffectsFor[r]&&i instanceof rh){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let o=t-e;if(i instanceof rh)if(i.block){let{type:e}=i;e!=th.WidgetAfter||this.posCovered()||this.getLine(),this.addBlockWidget(new hh(i.widget||new uh("div"),o,e))}else{let r=jl.create(i.widget||new uh("span"),o,o?0:i.startSide),a=this.atCursorPos&&!r.isEditable&&n<=s.length&&(e<t||i.startSide>0),l=!r.isEditable&&(e<t||i.startSide<=0),h=this.getLine();2!=this.pendingBuffer||a||(this.pendingBuffer=0),this.flushBuffer(s),a&&(h.append(dh(new Wl(1),s),n),n=s.length+Math.max(0,n-s.length)),h.append(dh(r,s),n),this.atCursorPos=l,this.pendingBuffer=l?e<t?1:2:0}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);o&&(this.textOff+o<=this.text.length?this.textOff+=o:(this.skip+=o-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=n)}static build(e,t,i,s,n){let r=new ch(e,t,i,n);return r.openEnd=Qa.spans(s,t,i,r),r.openStart<0&&(r.openStart=r.openEnd),r.finish(r.openEnd),r}}function dh(e,t){for(let i of t)e=new Nl(i,[e],e.length);return e}class uh extends eh{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}}const ph=Lo.define(),fh=Lo.define(),mh=Lo.define(),gh=Lo.define(),Ah=Lo.define(),bh=Lo.define(),vh=Lo.define({combine:e=>e.some((e=>e))}),yh=Lo.define({combine:e=>e.some((e=>e))});class wh{constructor(e,t="nearest",i="nearest",s=5,n=5){this.range=e,this.y=t,this.x=i,this.yMargin=s,this.xMargin=n}map(e){return e.empty?this:new wh(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin)}}const xh=ua.define({map:(e,t)=>e.map(t)});function Oh(e,t,i){let s=e.facet(gh);s.length?s[0](t):window.onerror?window.onerror(String(t),i,void 0,void 0,t):i?console.error(i+":",t):console.error(t)}const Ch=Lo.define({combine:e=>!e.length||e[0]});let Sh=0;const Ih=Lo.define();class Eh{constructor(e,t,i,s){this.id=e,this.create=t,this.domEventHandlers=i,this.extension=s(this)}static define(e,t){const{eventHandlers:i,provide:s,decorations:n}=t||{};return new Eh(Sh++,e,i,(e=>{let t=[Ih.of(e)];return n&&t.push(Mh.of((t=>{let i=t.plugin(e);return i?n(i):ih.none}))),s&&t.push(s(e)),t}))}static fromClass(e,t){return Eh.define((t=>new e(t)),t)}}class kh{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(i){if(Oh(t.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch(e){}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){Oh(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(null===(t=this.value)||void 0===t?void 0:t.destroy)try{this.value.destroy()}catch(t){Oh(e.state,t,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const Bh=Lo.define(),Qh=Lo.define(),Mh=Lo.define(),Th=Lo.define(),Dh=Lo.define(),Rh=Lo.define();class Ph{constructor(e,t,i,s){this.fromA=e,this.toA=t,this.fromB=i,this.toB=s}join(e){return new Ph(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,i=this;for(;t>0;t--){let s=e[t-1];if(!(s.fromA>i.toA)){if(s.toA<i.fromA)break;i=i.join(s),e.splice(t-1,1)}}return e.splice(t,0,i),e}static extendWithRanges(e,t){if(0==t.length)return e;let i=[];for(let s=0,n=0,r=0,o=0;;s++){let a=s==e.length?null:e[s],l=r-o,h=a?a.fromB:1e9;for(;n<t.length&&t[n]<h;){let e=t[n],s=t[n+1],r=Math.max(o,e),a=Math.min(h,s);if(r<=a&&new Ph(r+l,a+l,r,a).addToSet(i),s>h)break;n+=2}if(!a)return i;new Ph(a.fromA,a.toA,a.fromB,a.toB).addToSet(i),r=a.toA,o=a.toB}}}class Lh{constructor(e,t,i){this.view=e,this.state=t,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=So.empty(this.startState.doc.length);for(let e of i)this.changes=this.changes.compose(e.changes);let s=[];this.changes.iterChangedRanges(((e,t,i,n)=>s.push(new Ph(e,t,i,n)))),this.changedRanges=s;let n=e.hasFocus;n!=e.inputState.notifiedFocused&&(e.inputState.notifiedFocused=n,this.flags|=1)}static create(e,t,i){return new Lh(e,t,i)}get viewportChanged(){return(4&this.flags)>0}get heightChanged(){return(2&this.flags)>0}get geometryChanged(){return this.docChanged||(10&this.flags)>0}get focusChanged(){return(1&this.flags)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some((e=>e.selection))}get empty(){return 0==this.flags&&0==this.transactions.length}}var Fh=function(e){return e[e.LTR=0]="LTR",e[e.RTL=1]="RTL",e}(Fh||(Fh={}));const Uh=Fh.LTR,zh=Fh.RTL;function Gh(e){let t=[];for(let i=0;i<e.length;i++)t.push(1<<+e[i]);return t}const Nh=Gh("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),Vh=Gh("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),jh=Object.create(null),Hh=[];for(let e of["()","[]","{}"]){let t=e.charCodeAt(0),i=e.charCodeAt(1);jh[t]=i,jh[i]=-t}function qh(e){return e<=247?Nh[e]:1424<=e&&e<=1524?2:1536<=e&&e<=1785?Vh[e-1536]:1774<=e&&e<=2220?4:8192<=e&&e<=8203?256:64336<=e&&e<=65023?4:8204==e?256:1}const Xh=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Wh{constructor(e,t,i){this.from=e,this.to=t,this.level=i}get dir(){return this.level%2?zh:Uh}side(e,t){return this.dir==t==e?this.to:this.from}static find(e,t,i,s){let n=-1;for(let r=0;r<e.length;r++){let o=e[r];if(o.from<=t&&o.to>=t){if(o.level==i)return r;(n<0||(0!=s?s<0?o.from<t:o.to>t:e[n].level>o.level))&&(n=r)}}if(n<0)throw new RangeError("Index out of range");return n}}const Zh=[];function Yh(e){return[new Wh(0,e,0)]}let _h="";function Kh(e,t,i,s,n){var r;let o=s.head-e.from,a=-1;if(0==o){if(!n||!e.length)return null;t[0].level!=i&&(o=t[0].side(!1,i),a=0)}else if(o==e.length){if(n)return null;let e=t[t.length-1];e.level!=i&&(o=e.side(!0,i),a=t.length-1)}a<0&&(a=Wh.find(t,o,null!==(r=s.bidiLevel)&&void 0!==r?r:-1,s.assoc));let l=t[a];o==l.side(n,i)&&(o=(l=t[a+=n?1:-1]).side(!n,i));let h=n==(l.dir==i),c=fo(e.text,o,h);if(_h=e.text.slice(Math.min(o,c),Math.max(o,c)),c!=l.side(n,i))return Do.cursor(c+e.from,h?-1:1,l.level);let d=a==(n?t.length-1:0)?null:t[a+(n?1:-1)];return d||l.level==i?d&&d.level<l.level?Do.cursor(d.side(!n,i)+e.from,n?1:-1,d.level):Do.cursor(c+e.from,n?-1:1,l.level):Do.cursor(n?e.to:e.from,n?-1:1,i)}const Jh="￿";class $h{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(Ca.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Jh}readRange(e,t){if(!e)return this;let i=e.parentNode;for(let s=e;;){this.findPointBefore(i,s),this.readNode(s);let e=s.nextSibling;if(e==t)break;let n=Ol.get(s),r=Ol.get(e);(n&&r?n.breakAfter:(n?n.breakAfter:ec(s))||ec(e)&&("BR"!=s.nodeName||s.cmIgnore))&&this.lineBreak(),s=e}return this.findPointBefore(i,t),this}readTextNode(e){let t=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,t.length));for(let i=0,s=this.lineSeparator?null:/\r\n?|\n/g;;){let n,r=-1,o=1;if(this.lineSeparator?(r=t.indexOf(this.lineSeparator,i),o=this.lineSeparator.length):(n=s.exec(t))&&(r=n.index,o=n[0].length),this.append(t.slice(i,r<0?t.length:r)),r<0)break;if(this.lineBreak(),o>1)for(let t of this.points)t.node==e&&t.pos>this.text.length&&(t.pos-=o-1);i=r+o}}readNode(e){if(e.cmIgnore)return;let t=Ol.get(e),i=t&&t.overrideDOMText;if(null!=i){this.findPointInside(e,i.length);for(let e=i.iter();!e.next().done;)e.lineBreak?this.lineBreak():this.append(e.value)}else 3==e.nodeType?this.readTextNode(e):"BR"==e.nodeName?e.nextSibling&&this.lineBreak():1==e.nodeType&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==t&&(i.pos=this.text.length)}findPointInside(e,t){for(let i of this.points)(3==e.nodeType?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+Math.min(t,i.offset))}}function ec(e){return 1==e.nodeType&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(e.nodeName)}class tc{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class ic extends Ol{constructor(e){super(),this.view=e,this.compositionDeco=ih.none,this.decorations=[],this.dynamicDecorationMap=[],this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new lh],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Ph(0,0,0,e.state.doc.length)],0)}get editorView(){return this.view}get length(){return this.view.state.doc.length}update(e){let t=e.changedRanges;this.minWidth>0&&t.length&&(t.every((({fromA:e,toA:t})=>t<this.minWidthFrom||e>this.minWidthTo))?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.view.inputState.composing<0?this.compositionDeco=ih.none:(e.transactions.length||this.dirty)&&(this.compositionDeco=function(e,t){let i=nc(e);if(!i)return ih.none;let{from:s,to:n,node:r,text:o}=i,a=t.mapPos(s,1),l=Math.max(a,t.mapPos(n,-1)),{state:h}=e,c=3==r.nodeType?r.nodeValue:new $h([],h).readRange(r.firstChild,null).text;if(l-a<c.length)if(h.doc.sliceString(a,Math.min(h.doc.length,a+c.length),Jh)==c)l=a+c.length;else{if(h.doc.sliceString(Math.max(0,l-c.length),l,Jh)!=c)return ih.none;a=l-c.length}else if(h.doc.sliceString(a,l,Jh)!=c)return ih.none;let d=Ol.get(r);return d instanceof Hl?d=d.widget.topView:d&&(d.parent=null),ih.set(ih.replace({widget:new rc(r,o,d),inclusive:!0}).range(a,l))}(this.view,e.changes)),(zl.ie||zl.chrome)&&!this.compositionDeco.size&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let i=function(e,t,i){let s=new ac;return Qa.compare(e,t,i,s),s.changes}(this.decorations,this.updateDeco(),e.changes);return t=Ph.extendWithRanges(t,i),(0!=this.dirty||0!=t.length)&&(this.updateInner(t,e.startState.doc.length),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t);let{observer:i}=this.view;i.ignore((()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let e=zl.chrome||zl.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(e),this.dirty=0,e&&(e.written||i.selectionRange.focusNode!=e.node)&&(this.forceSelection=!0),this.dom.style.height=""}));let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let e of this.children)e instanceof hh&&e.widget instanceof sc&&s.push(e.dom);i.updateGaps(s)}updateChildren(e,t){let i=this.childCursor(t);for(let t=e.length-1;;t--){let s=t>=0?e[t]:null;if(!s)break;let{fromA:n,toA:r,fromB:o,toB:a}=s,{content:l,breakAtStart:h,openStart:c,openEnd:d}=ch.build(this.view.state.doc,o,a,this.decorations,this.dynamicDecorationMap),{i:u,off:p}=i.findPos(r,1),{i:f,off:m}=i.findPos(n,-1);Il(this,f,m,u,p,l,h,c,d)}}updateSelection(e=!1,t=!1){if(!e&&this.view.observer.selectionRange.focusNode||this.view.observer.readSelectionRange(),!t&&!this.mayControlSelection())return;let i=this.forceSelection;this.forceSelection=!1;let s=this.view.state.selection.main,n=this.domAtPos(s.anchor),r=s.empty?n:this.domAtPos(s.head);if(zl.gecko&&s.empty&&function(e){return 1==e.node.nodeType&&e.node.firstChild&&(0==e.offset||"false"==e.node.childNodes[e.offset-1].contentEditable)&&(e.offset==e.node.childNodes.length||"false"==e.node.childNodes[e.offset].contentEditable)}(n)){let e=document.createTextNode("");this.view.observer.ignore((()=>n.node.insertBefore(e,n.node.childNodes[n.offset]||null))),n=r=new wl(e,0),i=!0}let o=this.view.observer.selectionRange;!i&&o.focusNode&&al(n.node,n.offset,o.anchorNode,o.anchorOffset)&&al(r.node,r.offset,o.focusNode,o.focusOffset)||(this.view.observer.ignore((()=>{zl.android&&zl.chrome&&this.dom.contains(o.focusNode)&&function(e,t){for(let i=e;i&&i!=t;i=i.assignedSlot||i.parentNode)if(1==i.nodeType&&"false"==i.contentEditable)return!0;return!1}(o.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let e=sl(this.view.root);if(e)if(s.empty){if(zl.gecko){let e=function(e,t){return 1!=e.nodeType?0:(t&&"false"==e.childNodes[t-1].contentEditable?1:0)|(t<e.childNodes.length&&"false"==e.childNodes[t].contentEditable?2:0)}(n.node,n.offset);if(e&&3!=e){let t=oc(n.node,n.offset,1==e?1:-1);t&&(n=new wl(t,1==e?0:t.nodeValue.length))}}e.collapse(n.node,n.offset),null!=s.bidiLevel&&null!=o.cursorBidiLevel&&(o.cursorBidiLevel=s.bidiLevel)}else if(e.extend){e.collapse(n.node,n.offset);try{e.extend(r.node,r.offset)}catch(e){}}else{let t=document.createRange();s.anchor>s.head&&([n,r]=[r,n]),t.setEnd(r.node,r.offset),t.setStart(n.node,n.offset),e.removeAllRanges(),e.addRange(t)}})),this.view.observer.setSelectionRange(n,r)),this.impreciseAnchor=n.precise?null:new wl(o.anchorNode,o.anchorOffset),this.impreciseHead=r.precise?null:new wl(o.focusNode,o.focusOffset)}enforceCursorAssoc(){if(this.compositionDeco.size)return;let{view:e}=this,t=e.state.selection.main,i=sl(e.root),{anchorNode:s,anchorOffset:n}=e.observer.selectionRange;if(!(i&&t.empty&&t.assoc&&i.modify))return;let r=lh.find(this,t.head);if(!r)return;let o=r.posAtStart;if(t.head==o||t.head==o+r.length)return;let a=this.coordsAt(t.head,-1),l=this.coordsAt(t.head,1);if(!a||!l||a.bottom>l.top)return;let h=this.domAtPos(t.head+t.assoc);i.collapse(h.node,h.offset),i.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let c=e.observer.selectionRange;e.docView.posFromDOM(c.anchorNode,c.anchorOffset)!=t.from&&i.collapse(s,n)}mayControlSelection(){let e=this.view.root.activeElement;return e==this.dom||rl(this.dom,this.view.observer.selectionRange)&&!(e&&this.dom.contains(e))}nearest(e){for(let t=e;t;){let e=Ol.get(t);if(e&&e.rootView==this)return e;t=t.parentNode}return null}posFromDOM(e,t){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,t)+i.posAtStart}domAtPos(e){let{i:t,off:i}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let e=this.children[t];if(i<e.length||e instanceof lh)break;t++,i=0}return this.children[t].domAtPos(i)}coordsAt(e,t){for(let i=this.length,s=this.children.length-1;;s--){let n=this.children[s],r=i-n.breakAfter-n.length;if(e>r||e==r&&n.type!=th.WidgetBefore&&n.type!=th.WidgetAfter&&(!s||2==t||this.children[s-1].breakAfter||this.children[s-1].type==th.WidgetBefore&&t>-2))return n.coordsAt(e-r,t);i=r}}measureVisibleLineHeights(e){let t=[],{from:i,to:s}=e,n=this.view.contentDOM.clientWidth,r=n>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,o=-1,a=this.view.textDirection==Fh.LTR;for(let e=0,l=0;l<this.children.length;l++){let h=this.children[l],c=e+h.length;if(c>s)break;if(e>=i){let i=h.dom.getBoundingClientRect();if(t.push(i.height),r){let t=h.dom.lastChild,s=t?ol(t):[];if(s.length){let t=s[s.length-1],r=a?t.right-i.left:i.right-t.left;r>o&&(o=r,this.minWidth=n,this.minWidthFrom=e,this.minWidthTo=c)}}}e=c+h.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return"rtl"==getComputedStyle(this.children[t].dom).direction?Fh.RTL:Fh.LTR}measureTextSize(){for(let e of this.children)if(e instanceof lh){let t=e.measureTextSize();if(t)return t}let e,t,i=document.createElement("div");return i.className="cm-line",i.style.width="99999px",i.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore((()=>{this.dom.appendChild(i);let s=ol(i.firstChild)[0];e=i.getBoundingClientRect().height,t=s?s.width/27:7,i.remove()})),{lineHeight:e,charWidth:t}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new Sl(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let i=0,s=0;;s++){let n=s==t.viewports.length?null:t.viewports[s],r=n?n.from-1:this.length;if(r>i){let s=t.lineBlockAt(r).bottom-t.lineBlockAt(i).top;e.push(ih.replace({widget:new sc(s),block:!0,inclusive:!0,isBlockGap:!0}).range(i,r))}if(!n)break;i=n.to+1}return ih.set(e)}updateDeco(){let e=this.view.state.facet(Mh).map(((e,t)=>(this.dynamicDecorationMap[t]="function"==typeof e)?e(this.view):e));for(let t=e.length;t<e.length+3;t++)this.dynamicDecorationMap[t]=!1;return this.decorations=[...e,this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){let t,{range:i}=e,s=this.coordsAt(i.head,i.empty?i.assoc:i.head>i.anchor?-1:1);if(!s)return;!i.empty&&(t=this.coordsAt(i.anchor,i.anchor>i.head?-1:1))&&(s={left:Math.min(s.left,t.left),top:Math.min(s.top,t.top),right:Math.max(s.right,t.right),bottom:Math.max(s.bottom,t.bottom)});let n=0,r=0,o=0,a=0;for(let e of this.view.state.facet(Dh).map((e=>e(this.view))))if(e){let{left:t,right:i,top:s,bottom:l}=e;null!=t&&(n=Math.max(n,t)),null!=i&&(r=Math.max(r,i)),null!=s&&(o=Math.max(o,s)),null!=l&&(a=Math.max(a,l))}let l={left:s.left-n,top:s.top-o,right:s.right+r,bottom:s.bottom+a};!function(e,t,i,s,n,r,o,a){let l=e.ownerDocument,h=l.defaultView||window;for(let c=e;c;)if(1==c.nodeType){let e,d=c==l.body;if(d)e=pl(h);else{if(c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.assignedSlot||c.parentNode;continue}let t=c.getBoundingClientRect();e={left:t.left,right:t.left+c.clientWidth,top:t.top,bottom:t.top+c.clientHeight}}let u=0,p=0;if("nearest"==n)t.top<e.top?(p=-(e.top-t.top+o),i>0&&t.bottom>e.bottom+p&&(p=t.bottom-e.bottom+p+o)):t.bottom>e.bottom&&(p=t.bottom-e.bottom+o,i<0&&t.top-p<e.top&&(p=-(e.top+p-t.top+o)));else{let s=t.bottom-t.top,r=e.bottom-e.top;p=("center"==n&&s<=r?t.top+s/2-r/2:"start"==n||"center"==n&&i<0?t.top-o:t.bottom-r+o)-e.top}if("nearest"==s?t.left<e.left?(u=-(e.left-t.left+r),i>0&&t.right>e.right+u&&(u=t.right-e.right+u+r)):t.right>e.right&&(u=t.right-e.right+r,i<0&&t.left<e.left+u&&(u=-(e.left+u-t.left+r))):u=("center"==s?t.left+(t.right-t.left)/2-(e.right-e.left)/2:"start"==s==a?t.left-r:t.right-(e.right-e.left)+r)-e.left,u||p)if(d)h.scrollBy(u,p);else{let e=0,i=0;if(p){let e=c.scrollTop;c.scrollTop+=p,i=c.scrollTop-e}if(u){let t=c.scrollLeft;c.scrollLeft+=u,e=c.scrollLeft-t}t={left:t.left-e,top:t.top-i,right:t.right-e,bottom:t.bottom-i},e&&Math.abs(e-u)<1&&(s="nearest"),i&&Math.abs(i-p)<1&&(n="nearest")}if(d)break;c=c.assignedSlot||c.parentNode}else{if(11!=c.nodeType)break;c=c.host}}(this.view.scrollDOM,l,i.head<i.anchor?-1:1,e.x,e.y,e.xMargin,e.yMargin,this.view.textDirection==Fh.LTR)}}class sc extends eh{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function nc(e){let t=e.observer.selectionRange,i=t.focusNode&&oc(t.focusNode,t.focusOffset,0);if(!i)return null;let s=e.docView.nearest(i);if(!s)return null;if(s instanceof lh){let e=i;for(;e.parentNode!=s.dom;)e=e.parentNode;let t=e.previousSibling;for(;t&&!Ol.get(t);)t=t.previousSibling;let n=t?Ol.get(t).posAtEnd:s.posAtStart;return{from:n,to:n,node:e,text:i}}{for(;;){let{parent:e}=s;if(!e)return null;if(e instanceof lh)break;s=e}let e=s.posAtStart;return{from:e,to:e+s.length,node:s.dom,text:i}}}class rc extends eh{constructor(e,t,i){super(),this.top=e,this.text=t,this.topView=i}eq(e){return this.top==e.top&&this.text==e.text}toDOM(){return this.top}ignoreEvent(){return!1}get customView(){return Hl}}function oc(e,t,i){for(;;){if(3==e.nodeType)return e;if(1==e.nodeType&&t>0&&i<=0)t=cl(e=e.childNodes[t-1]);else{if(!(1==e.nodeType&&t<e.childNodes.length&&i>=0))return null;e=e.childNodes[t],t=0}}}class ac{constructor(){this.changes=[]}compareRange(e,t){ah(e,t,this.changes)}comparePoint(e,t){ah(e,t,this.changes)}}function lc(e,t){return t.left>e?t.left-e:Math.max(0,e-t.right)}function hc(e,t){return t.top>e?t.top-e:Math.max(0,e-t.bottom)}function cc(e,t){return e.top<t.bottom-1&&e.bottom>t.top+1}function dc(e,t){return t<e.top?{top:t,left:e.left,right:e.right,bottom:e.bottom}:e}function uc(e,t){return t>e.bottom?{top:e.top,left:e.left,right:e.right,bottom:t}:e}function pc(e,t,i){let s,n,r,o,a,l,h,c,d=!1;for(let u=e.firstChild;u;u=u.nextSibling){let e=ol(u);for(let p=0;p<e.length;p++){let f=e[p];n&&cc(n,f)&&(f=dc(uc(f,n.bottom),n.top));let m=lc(t,f),g=hc(i,f);if(0==m&&0==g)return 3==u.nodeType?fc(u,t,i):pc(u,t,i);(!s||o>g||o==g&&r>m)&&(s=u,n=f,r=m,o=g,d=!m||(m>0?p<e.length-1:p>0)),0==m?i>f.bottom&&(!h||h.bottom<f.bottom)?(a=u,h=f):i<f.top&&(!c||c.top>f.top)&&(l=u,c=f):h&&cc(h,f)?h=uc(h,f.bottom):c&&cc(c,f)&&(c=dc(c,f.top))}}if(h&&h.bottom>=i?(s=a,n=h):c&&c.top<=i&&(s=l,n=c),!s)return{node:e,offset:0};let u=Math.max(n.left,Math.min(n.right,t));return 3==s.nodeType?fc(s,u,i):d&&"false"!=s.contentEditable?pc(s,u,i):{node:e,offset:Array.prototype.indexOf.call(e.childNodes,s)+(t>=(n.left+n.right)/2?1:0)}}function fc(e,t,i){let s=e.nodeValue.length,n=-1,r=1e9,o=0;for(let a=0;a<s;a++){let s=bl(e,a,a+1).getClientRects();for(let l=0;l<s.length;l++){let h=s[l];if(h.top==h.bottom)continue;o||(o=t-h.left);let c=(h.top>i?h.top-i:i-h.bottom)-1;if(h.left-1<=t&&h.right+1>=t&&c<r){let i=t>=(h.left+h.right)/2,s=i;if((zl.chrome||zl.gecko)&&bl(e,a).getBoundingClientRect().left==h.right&&(s=!i),c<=0)return{node:e,offset:a+(s?1:0)};n=a+(s?1:0),r=c}}}return{node:e,offset:n>-1?n:o>0?e.nodeValue.length:0}}function mc(e,{x:t,y:i},s,n=-1){var r;let o,a=e.contentDOM.getBoundingClientRect(),l=a.top+e.viewState.paddingTop,{docHeight:h}=e.viewState,c=i-l;if(c<0)return 0;if(c>h)return e.state.doc.length;for(let t=e.defaultLineHeight/2,i=!1;(o=e.elementAtHeight(c)).type!=th.Text;)for(;!((c=n>0?o.bottom+t:o.top-t)>=0&&c<=h);){if(i)return s?null:0;i=!0,n=-n}i=l+c;let d=o.from;if(d<e.viewport.from)return 0==e.viewport.from?0:s?null:gc(e,a,o,t,i);if(d>e.viewport.to)return e.viewport.to==e.state.doc.length?e.state.doc.length:s?null:gc(e,a,o,t,i);let u=e.dom.ownerDocument,p=e.root.elementFromPoint?e.root:u,f=p.elementFromPoint(t,i);f&&!e.contentDOM.contains(f)&&(f=null),f||(t=Math.max(a.left+1,Math.min(a.right-1,t)),(f=p.elementFromPoint(t,i))&&!e.contentDOM.contains(f)&&(f=null));let m,g=-1;if(f&&0!=(null===(r=e.docView.nearest(f))||void 0===r?void 0:r.isEditable))if(u.caretPositionFromPoint){let e=u.caretPositionFromPoint(t,i);e&&({offsetNode:m,offset:g}=e)}else if(u.caretRangeFromPoint){let s=u.caretRangeFromPoint(t,i);s&&(({startContainer:m,startOffset:g}=s),(!e.contentDOM.contains(m)||zl.safari&&function(e,t,i){let s;if(3!=e.nodeType||t!=(s=e.nodeValue.length))return!1;for(let t=e.nextSibling;t;t=t.nextSibling)if(1!=t.nodeType||"BR"!=t.nodeName)return!1;return bl(e,s-1,s).getBoundingClientRect().left>i}(m,g,t)||zl.chrome&&function(e,t,i){if(0!=t)return!1;for(let t=e;;){let e=t.parentNode;if(!e||1!=e.nodeType||e.firstChild!=t)return!1;if(e.classList.contains("cm-line"))break;t=e}return i-(1==e.nodeType?e.getBoundingClientRect():bl(e,0,Math.max(e.nodeValue.length,1)).getBoundingClientRect()).left>5}(m,g,t))&&(m=void 0))}if(!m||!e.docView.dom.contains(m)){let s=lh.find(e.docView,d);if(!s)return c>o.top+o.height/2?o.to:o.from;({node:m,offset:g}=pc(s.dom,t,i))}return e.docView.posFromDOM(m,g)}function gc(e,t,i,s,n){let r=Math.round((s-t.left)*e.defaultCharacterWidth);e.lineWrapping&&i.height>1.5*e.defaultLineHeight&&(r+=Math.floor((n-i.top)/e.defaultLineHeight)*e.viewState.heightOracle.lineLength);let o=e.state.sliceDoc(i.from,i.to);return i.from+function(e,t,i){for(let s=0,n=0;;){if(n>=t)return s;if(s==e.length)break;n+=9==e.charCodeAt(s)?i-n%i:1,s=fo(e,s)}return e.length}(o,r,e.state.tabSize)}function Ac(e,t,i,s){let n=e.state.doc.lineAt(t.head),r=e.bidiSpans(n),o=e.textDirectionAt(n.from);for(let a=t,l=null;;){let t=Kh(n,r,o,a,i),h=_h;if(!t){if(n.number==(i?e.state.doc.lines:1))return a;h="\n",n=e.state.doc.line(n.number+(i?1:-1)),r=e.bidiSpans(n),t=Do.cursor(i?n.from:n.to)}if(l){if(!l(h))return a}else{if(!s)return t;l=s(h)}a=t}}function bc(e,t,i){let s=e.state.facet(Th).map((t=>t(e)));for(;;){let e=!1;for(let n of s)n.between(i.from-1,i.from+1,((s,n,r)=>{i.from>s&&i.from<n&&(i=t.head>i.from?Do.cursor(s,1):Do.cursor(n,-1),e=!0)}));if(!e)return i}}class vc{constructor(e){this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.mouseSelection=null;for(let t in Sc){let i=Sc[t];e.contentDOM.addEventListener(t,(s=>{Cc(e,s)&&!this.ignoreDuringComposition(s)&&("keydown"==t&&this.keydown(e,s)||(this.mustFlushObserver(s)&&e.observer.forceFlush(),this.runCustomHandlers(t,e,s)?s.preventDefault():i(e,s)))}),Ic[t]),this.registeredEvents.push(t)}zl.chrome&&102==zl.chrome_version&&e.scrollDOM.addEventListener("wheel",(()=>{this.chromeScrollHack<0?e.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout((()=>{this.chromeScrollHack=-1,e.contentDOM.style.pointerEvents=""}),100)}),{passive:!0}),this.notifiedFocused=e.hasFocus,zl.safari&&e.contentDOM.addEventListener("input",(()=>null))}setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}ensureHandlers(e,t){var i;let s;this.customHandlers=[];for(let n of t)if(s=null===(i=n.update(e).spec)||void 0===i?void 0:i.domEventHandlers){this.customHandlers.push({plugin:n.value,handlers:s});for(let t in s)this.registeredEvents.indexOf(t)<0&&"scroll"!=t&&(this.registeredEvents.push(t),e.contentDOM.addEventListener(t,(i=>{Cc(e,i)&&this.runCustomHandlers(t,e,i)&&i.preventDefault()})))}}runCustomHandlers(e,t,i){for(let s of this.customHandlers){let n=s.handlers[e];if(n)try{if(n.call(s.plugin,i,t)||i.defaultPrevented)return!0}catch(e){Oh(t.state,e)}}return!1}runScrollHandlers(e,t){this.lastScrollTop=e.scrollDOM.scrollTop,this.lastScrollLeft=e.scrollDOM.scrollLeft;for(let i of this.customHandlers){let s=i.handlers.scroll;if(s)try{s.call(i.plugin,t,e)}catch(t){Oh(e.state,t)}}}keydown(e,t){if(this.lastKeyCode=t.keyCode,this.lastKeyTime=Date.now(),9==t.keyCode&&Date.now()<this.lastEscPress+2e3)return!0;if(zl.android&&zl.chrome&&!t.synthetic&&(13==t.keyCode||8==t.keyCode))return e.observer.delayAndroidKey(t.key,t.keyCode),!0;let i;return!(!zl.ios||t.synthetic||t.altKey||t.metaKey||!((i=yc.find((e=>e.keyCode==t.keyCode)))&&!t.ctrlKey||wc.indexOf(t.key)>-1&&t.ctrlKey&&!t.shiftKey)||(this.pendingIOSKey=i||t,setTimeout((()=>this.flushIOSKey(e)),250),0))}flushIOSKey(e){let t=this.pendingIOSKey;return!!t&&(this.pendingIOSKey=void 0,vl(e.contentDOM,t.key,t.keyCode))}ignoreDuringComposition(e){return!!/^key/.test(e.type)&&(this.composing>0||!!(zl.safari&&!zl.ios&&Date.now()-this.compositionEndedAt<100)&&(this.compositionEndedAt=0,!0))}mustFlushObserver(e){return"keydown"==e.type&&229!=e.keyCode}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const yc=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],wc="dthko",xc=[16,17,18,20,91,92,224,225];class Oc{constructor(e,t,i,s){this.view=e,this.style=i,this.mustSelect=s,this.lastEvent=t;let n=e.contentDOM.ownerDocument;n.addEventListener("mousemove",this.move=this.move.bind(this)),n.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(Ca.allowMultipleSelections)&&function(e,t){let i=e.state.facet(ph);return i.length?i[0](t):zl.mac?t.metaKey:t.ctrlKey}(e,t),this.dragMove=function(e,t){let i=e.state.facet(fh);return i.length?i[0](t):zl.mac?!t.altKey:!t.ctrlKey}(e,t),this.dragging=!(!function(e,t){let{main:i}=e.state.selection;if(i.empty)return!1;let s=sl(e.root);if(!s||0==s.rangeCount)return!0;let n=s.getRangeAt(0).getClientRects();for(let e=0;e<n.length;e++){let i=n[e];if(i.left<=t.clientX&&i.right>=t.clientX&&i.top<=t.clientY&&i.bottom>=t.clientY)return!0}return!1}(e,t)||1!=Uc(t))&&null,!1===this.dragging&&(t.preventDefault(),this.select(t))}move(e){if(0==e.buttons)return this.destroy();!1===this.dragging&&this.select(this.lastEvent=e)}up(e){null==this.dragging&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}select(e){let t=this.style.get(e,this.extend,this.multiple);!this.mustSelect&&t.eq(this.view.state.selection)&&t.main.assoc==this.view.state.selection.main.assoc||this.view.dispatch({selection:t,userEvent:"select.pointer",scrollIntoView:!0}),this.mustSelect=!1}update(e){e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)&&setTimeout((()=>this.select(this.lastEvent)),20)}}function Cc(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let i,s=t.target;s!=e.contentDOM;s=s.parentNode)if(!s||11==s.nodeType||(i=Ol.get(s))&&i.ignoreEvent(t))return!1;return!0}const Sc=Object.create(null),Ic=Object.create(null),Ec=zl.ie&&zl.ie_version<15||zl.ios&&zl.webkit_version<604;function kc(e,t){let i,{state:s}=e,n=1,r=s.toText(t),o=r.lines==s.selection.ranges.length;if(null!=Gc&&s.selection.ranges.every((e=>e.empty))&&Gc==r.toString()){let e=-1;i=s.changeByRange((i=>{let a=s.doc.lineAt(i.from);if(a.from==e)return{range:i};e=a.from;let l=s.toText((o?r.line(n++).text:t)+s.lineBreak);return{changes:{from:a.from,insert:l},range:Do.cursor(i.from+l.length)}}))}else i=o?s.changeByRange((e=>{let t=r.line(n++);return{changes:{from:e.from,to:e.to,insert:t.text},range:Do.cursor(e.from+t.length)}})):s.replaceSelection(r);e.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}function Bc(e,t,i,s){if(1==s)return Do.cursor(t,i);if(2==s)return function(e,t,i=1){let s=e.charCategorizer(t),n=e.doc.lineAt(t),r=t-n.from;if(0==n.length)return Do.cursor(t);0==r?i=1:r==n.length&&(i=-1);let o=r,a=r;i<0?o=fo(n.text,r,!1):a=fo(n.text,r);let l=s(n.text.slice(o,a));for(;o>0;){let e=fo(n.text,o,!1);if(s(n.text.slice(e,o))!=l)break;o=e}for(;a<n.length;){let e=fo(n.text,a);if(s(n.text.slice(a,e))!=l)break;a=e}return Do.range(o+n.from,a+n.from)}(e.state,t,i);{let i=lh.find(e.docView,t),s=e.state.doc.lineAt(i?i.posAtEnd:t),n=i?i.posAtStart:s.from,r=i?i.posAtEnd:s.to;return r<e.state.doc.length&&r==s.to&&r++,Do.range(n,r)}}Sc.keydown=(e,t)=>{e.inputState.setSelectionOrigin("select"),27==t.keyCode?e.inputState.lastEscPress=Date.now():xc.indexOf(t.keyCode)<0&&(e.inputState.lastEscPress=0)},Sc.touchstart=(e,t)=>{e.inputState.lastTouchTime=Date.now(),e.inputState.setSelectionOrigin("select.pointer")},Sc.touchmove=e=>{e.inputState.setSelectionOrigin("select.pointer")},Ic.touchstart=Ic.touchmove={passive:!0},Sc.mousedown=(e,t)=>{if(e.observer.flush(),e.inputState.lastTouchTime>Date.now()-2e3)return;let i=null;for(let s of e.state.facet(mh))if(i=s(e,t))break;if(i||0!=t.button||(i=function(e,t){let i=Dc(e,t),s=Uc(t),n=e.state.selection,r=i,o=t;return{update(e){e.docChanged&&(i.pos=e.changes.mapPos(i.pos),n=n.map(e.changes),o=null)},get(t,a,l){let h;o&&t.clientX==o.clientX&&t.clientY==o.clientY?h=r:(h=r=Dc(e,t),o=t);let c=Bc(e,h.pos,h.bias,s);if(i.pos!=h.pos&&!a){let t=Bc(e,i.pos,i.bias,s),n=Math.min(t.from,c.from),r=Math.max(t.to,c.to);c=n<c.from?Do.range(n,r):Do.range(r,n)}return a?n.replaceRange(n.main.extend(c.from,c.to)):l&&n.ranges.length>1&&n.ranges.some((e=>e.eq(c)))?function(e,t){for(let i=0;;i++)if(e.ranges[i].eq(t))return Do.create(e.ranges.slice(0,i).concat(e.ranges.slice(i+1)),e.mainIndex==i?0:e.mainIndex-(e.mainIndex>i?1:0))}(n,c):l?n.addRange(c):Do.create([c])}}}(e,t)),i){let s=e.root.activeElement!=e.contentDOM;s&&e.observer.ignore((()=>Al(e.contentDOM))),e.inputState.startMouseSelection(new Oc(e,t,i,s))}};let Qc=(e,t)=>e>=t.top&&e<=t.bottom,Mc=(e,t,i)=>Qc(t,i)&&e>=i.left&&e<=i.right;function Tc(e,t,i,s){let n=lh.find(e.docView,t);if(!n)return 1;let r=t-n.posAtStart;if(0==r)return 1;if(r==n.length)return-1;let o=n.coordsAt(r,-1);if(o&&Mc(i,s,o))return-1;let a=n.coordsAt(r,1);return a&&Mc(i,s,a)?1:o&&Qc(s,o)?-1:1}function Dc(e,t){let i=e.posAtCoords({x:t.clientX,y:t.clientY},!1);return{pos:i,bias:Tc(e,i,t.clientX,t.clientY)}}const Rc=zl.ie&&zl.ie_version<=11;let Pc=null,Lc=0,Fc=0;function Uc(e){if(!Rc)return e.detail;let t=Pc,i=Fc;return Pc=e,Fc=Date.now(),Lc=!t||i>Date.now()-400&&Math.abs(t.clientX-e.clientX)<2&&Math.abs(t.clientY-e.clientY)<2?(Lc+1)%3:1}function zc(e,t,i,s){if(!i)return;let n=e.posAtCoords({x:t.clientX,y:t.clientY},!1);t.preventDefault();let{mouseSelection:r}=e.inputState,o=s&&r&&r.dragging&&r.dragMove?{from:r.dragging.from,to:r.dragging.to}:null,a={from:n,insert:i},l=e.state.changes(o?[o,a]:a);e.focus(),e.dispatch({changes:l,selection:{anchor:l.mapPos(n,-1),head:l.mapPos(n,1)},userEvent:o?"move.drop":"input.drop"})}Sc.dragstart=(e,t)=>{let{selection:{main:i}}=e.state,{mouseSelection:s}=e.inputState;s&&(s.dragging=i),t.dataTransfer&&(t.dataTransfer.setData("Text",e.state.sliceDoc(i.from,i.to)),t.dataTransfer.effectAllowed="copyMove")},Sc.drop=(e,t)=>{if(!t.dataTransfer)return;if(e.state.readOnly)return t.preventDefault();let i=t.dataTransfer.files;if(i&&i.length){t.preventDefault();let s=Array(i.length),n=0,r=()=>{++n==i.length&&zc(e,t,s.filter((e=>null!=e)).join(e.state.lineBreak),!1)};for(let e=0;e<i.length;e++){let t=new FileReader;t.onerror=r,t.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(t.result)||(s[e]=t.result),r()},t.readAsText(i[e])}}else zc(e,t,t.dataTransfer.getData("Text"),!0)},Sc.paste=(e,t)=>{if(e.state.readOnly)return t.preventDefault();e.observer.flush();let i=Ec?null:t.clipboardData;i?(kc(e,i.getData("text/plain")),t.preventDefault()):function(e){let t=e.dom.parentNode;if(!t)return;let i=t.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.focus(),setTimeout((()=>{e.focus(),i.remove(),kc(e,i.value)}),50)}(e)};let Gc=null;function Nc(e){setTimeout((()=>{e.hasFocus!=e.inputState.notifiedFocused&&e.update([])}),10)}Sc.copy=Sc.cut=(e,t)=>{let{text:i,ranges:s,linewise:n}=function(e){let t=[],i=[],s=!1;for(let s of e.selection.ranges)s.empty||(t.push(e.sliceDoc(s.from,s.to)),i.push(s));if(!t.length){let n=-1;for(let{from:s}of e.selection.ranges){let r=e.doc.lineAt(s);r.number>n&&(t.push(r.text),i.push({from:r.from,to:Math.min(e.doc.length,r.to+1)})),n=r.number}s=!0}return{text:t.join(e.lineBreak),ranges:i,linewise:s}}(e.state);if(!i&&!n)return;Gc=n?i:null;let r=Ec?null:t.clipboardData;r?(t.preventDefault(),r.clearData(),r.setData("text/plain",i)):function(e,t){let i=e.dom.parentNode;if(!i)return;let s=i.appendChild(document.createElement("textarea"));s.style.cssText="position: fixed; left: -10000px; top: 10px",s.value=t,s.focus(),s.selectionEnd=t.length,s.selectionStart=0,setTimeout((()=>{s.remove(),e.focus()}),50)}(e,i),"cut"!=t.type||e.state.readOnly||e.dispatch({changes:s,scrollIntoView:!0,userEvent:"delete.cut"})},Sc.focus=e=>{e.inputState.lastFocusTime=Date.now(),e.scrollDOM.scrollTop||!e.inputState.lastScrollTop&&!e.inputState.lastScrollLeft||(e.scrollDOM.scrollTop=e.inputState.lastScrollTop,e.scrollDOM.scrollLeft=e.inputState.lastScrollLeft),Nc(e)},Sc.blur=e=>{e.observer.clearSelectionRange(),Nc(e)},Sc.compositionstart=Sc.compositionupdate=e=>{null==e.inputState.compositionFirstChange&&(e.inputState.compositionFirstChange=!0),e.inputState.composing<0&&(e.inputState.composing=0)},Sc.compositionend=e=>{e.inputState.composing=-1,e.inputState.compositionEndedAt=Date.now(),e.inputState.compositionFirstChange=null,zl.chrome&&zl.android&&e.observer.flushSoon(),setTimeout((()=>{e.inputState.composing<0&&e.docView.compositionDeco.size&&e.update([])}),50)},Sc.contextmenu=e=>{e.inputState.lastContextMenu=Date.now()},Sc.beforeinput=(e,t)=>{var i;let s;if(zl.chrome&&zl.android&&(s=yc.find((e=>e.inputType==t.inputType)))&&(e.observer.delayAndroidKey(s.key,s.keyCode),"Backspace"==s.key||"Delete"==s.key)){let t=(null===(i=window.visualViewport)||void 0===i?void 0:i.height)||0;setTimeout((()=>{var i;((null===(i=window.visualViewport)||void 0===i?void 0:i.height)||0)>t+10&&e.hasFocus&&(e.contentDOM.blur(),e.focus())}),100)}};const Vc=["pre-wrap","normal","pre-line","break-spaces"];class jc{constructor(e){this.lineWrapping=e,this.doc=to.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.lineLength=30,this.heightChanged=!1}heightForGap(e,t){let i=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.ceil((t-e-i*this.lineLength*.5)/this.lineLength)),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return Vc.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let i=0;i<e.length;i++){let s=e[i];s<0?i++:this.heightSamples[Math.floor(10*s)]||(t=!0,this.heightSamples[Math.floor(10*s)]=!0)}return t}refresh(e,t,i,s,n){let r=Vc.indexOf(e)>-1,o=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=r;if(this.lineWrapping=r,this.lineHeight=t,this.charWidth=i,this.lineLength=s,o){this.heightSamples={};for(let e=0;e<n.length;e++){let t=n[e];t<0?e++:this.heightSamples[Math.floor(10*t)]=!0}}return o}}class Hc{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class qc{constructor(e,t,i,s,n){this.from=e,this.length=t,this.top=i,this.height=s,this.type=n}get to(){return this.from+this.length}get bottom(){return this.top+this.height}join(e){let t=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(e.type)?e.type:[e]);return new qc(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var Xc=function(e){return e[e.ByPos=0]="ByPos",e[e.ByHeight=1]="ByHeight",e[e.ByPosNoHeight=2]="ByPosNoHeight",e}(Xc||(Xc={}));const Wc=.001;class Zc{constructor(e,t,i=2){this.length=e,this.height=t,this.flags=i}get outdated(){return(2&this.flags)>0}set outdated(e){this.flags=(e?2:0)|-3&this.flags}setHeight(e,t){this.height!=t&&(Math.abs(this.height-t)>Wc&&(e.heightChanged=!0),this.height=t)}replace(e,t,i){return Zc.of(i)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,i,s){let n=this;for(let r=s.length-1;r>=0;r--){let{fromA:o,toA:a,fromB:l,toB:h}=s[r],c=n.lineAt(o,Xc.ByPosNoHeight,t,0,0),d=c.to>=a?c:n.lineAt(a,Xc.ByPosNoHeight,t,0,0);for(h+=d.to-a,a=d.to;r>0&&c.from<=s[r-1].toA;)o=s[r-1].fromA,l=s[r-1].fromB,r--,o<c.from&&(c=n.lineAt(o,Xc.ByPosNoHeight,t,0,0));l+=c.from-o,o=c.from;let u=ed.build(i,e,l,h);n=n.replace(o,a,u)}return n.updateHeight(i,0)}static empty(){return new _c(0,0)}static of(e){if(1==e.length)return e[0];let t=0,i=e.length,s=0,n=0;for(;;)if(t==i)if(s>2*n){let n=e[t-1];n.break?e.splice(--t,1,n.left,null,n.right):e.splice(--t,1,n.left,n.right),i+=1+n.break,s-=n.size}else{if(!(n>2*s))break;{let t=e[i];t.break?e.splice(i,1,t.left,null,t.right):e.splice(i,1,t.left,t.right),i+=2+t.break,n-=t.size}}else if(s<n){let i=e[t++];i&&(s+=i.size)}else{let t=e[--i];t&&(n+=t.size)}let r=0;return null==e[t-1]?(r=1,t--):null==e[t]&&(r=1,i++),new Jc(Zc.of(e.slice(0,t)),r,Zc.of(e.slice(i)))}}Zc.prototype.size=1;class Yc extends Zc{constructor(e,t,i){super(e,t),this.type=i}blockAt(e,t,i,s){return new qc(s,this.length,i,this.height,this.type)}lineAt(e,t,i,s,n){return this.blockAt(0,i,s,n)}forEachLine(e,t,i,s,n,r){e<=n+this.length&&t>=n&&r(this.blockAt(0,i,s,n))}updateHeight(e,t=0,i=!1,s){return s&&s.from<=t&&s.more&&this.setHeight(e,s.heights[s.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class _c extends Yc{constructor(e,t){super(e,t,th.Text),this.collapsed=0,this.widgetHeight=0}replace(e,t,i){let s=i[0];return 1==i.length&&(s instanceof _c||s instanceof Kc&&4&s.flags)&&Math.abs(this.length-s.length)<10?(s instanceof Kc?s=new _c(s.length,this.height):s.height=this.height,this.outdated||(s.outdated=!1),s):Zc.of(i)}updateHeight(e,t=0,i=!1,s){return s&&s.from<=t&&s.more?this.setHeight(e,s.heights[s.index++]):(i||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Kc extends Zc{constructor(e){super(e,0)}lines(e,t){let i=e.lineAt(t).number,s=e.lineAt(t+this.length).number;return{firstLine:i,lastLine:s,lineHeight:this.height/(s-i+1)}}blockAt(e,t,i,s){let{firstLine:n,lastLine:r,lineHeight:o}=this.lines(t,s),a=Math.max(0,Math.min(r-n,Math.floor((e-i)/o))),{from:l,length:h}=t.line(n+a);return new qc(l,h,i+o*a,o,th.Text)}lineAt(e,t,i,s,n){if(t==Xc.ByHeight)return this.blockAt(e,i,s,n);if(t==Xc.ByPosNoHeight){let{from:t,to:s}=i.lineAt(e);return new qc(t,s-t,0,0,th.Text)}let{firstLine:r,lineHeight:o}=this.lines(i,n),{from:a,length:l,number:h}=i.lineAt(e);return new qc(a,l,s+o*(h-r),o,th.Text)}forEachLine(e,t,i,s,n,r){let{firstLine:o,lineHeight:a}=this.lines(i,n);for(let l=Math.max(e,n),h=Math.min(n+this.length,t);l<=h;){let t=i.lineAt(l);l==e&&(s+=a*(t.number-o)),r(new qc(t.from,t.length,s,a,th.Text)),s+=a,l=t.to+1}}replace(e,t,i){let s=this.length-t;if(s>0){let e=i[i.length-1];e instanceof Kc?i[i.length-1]=new Kc(e.length+s):i.push(null,new Kc(s-1))}if(e>0){let t=i[0];t instanceof Kc?i[0]=new Kc(e+t.length):i.unshift(new Kc(e-1),null)}return Zc.of(i)}decomposeLeft(e,t){t.push(new Kc(e-1),null)}decomposeRight(e,t){t.push(null,new Kc(this.length-e-1))}updateHeight(e,t=0,i=!1,s){let n=t+this.length;if(s&&s.from<=t+this.length&&s.more){let i=[],r=Math.max(t,s.from),o=-1,a=e.heightChanged;for(s.from>t&&i.push(new Kc(s.from-t-1).updateHeight(e,t));r<=n&&s.more;){let t=e.doc.lineAt(r).length;i.length&&i.push(null);let n=s.heights[s.index++];-1==o?o=n:Math.abs(n-o)>=Wc&&(o=-2);let a=new _c(t,n);a.outdated=!1,i.push(a),r+=t+1}r<=n&&i.push(null,new Kc(n-r).updateHeight(e,r));let l=Zc.of(i);return e.heightChanged=a||o<0||Math.abs(l.height-this.height)>=Wc||Math.abs(o-this.lines(e.doc,t).lineHeight)>=Wc,l}return(i||this.outdated)&&(this.setHeight(e,e.heightForGap(t,t+this.length)),this.outdated=!1),this}toString(){return`gap(${this.length})`}}class Jc extends Zc{constructor(e,t,i){super(e.length+t+i.length,e.height+i.height,t|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return 1&this.flags}blockAt(e,t,i,s){let n=i+this.left.height;return e<n?this.left.blockAt(e,t,i,s):this.right.blockAt(e,t,n,s+this.left.length+this.break)}lineAt(e,t,i,s,n){let r=s+this.left.height,o=n+this.left.length+this.break,a=t==Xc.ByHeight?e<r:e<o,l=a?this.left.lineAt(e,t,i,s,n):this.right.lineAt(e,t,i,r,o);if(this.break||(a?l.to<o:l.from>o))return l;let h=t==Xc.ByPosNoHeight?Xc.ByPosNoHeight:Xc.ByPos;return a?l.join(this.right.lineAt(o,h,i,r,o)):this.left.lineAt(o,h,i,s,n).join(l)}forEachLine(e,t,i,s,n,r){let o=s+this.left.height,a=n+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,t,i,s,n,r),t>=a&&this.right.forEachLine(e,t,i,o,a,r);else{let l=this.lineAt(a,Xc.ByPos,i,s,n);e<l.from&&this.left.forEachLine(e,l.from-1,i,s,n,r),l.to>=e&&l.from<=t&&r(l),t>l.to&&this.right.forEachLine(l.to+1,t,i,o,a,r)}}replace(e,t,i){let s=this.left.length+this.break;if(t<s)return this.balanced(this.left.replace(e,t,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-s,t-s,i));let n=[];e>0&&this.decomposeLeft(e,n);let r=n.length;for(let e of i)n.push(e);if(e>0&&$c(n,r-1),t<this.length){let e=n.length;this.decomposeRight(t,n),$c(n,e)}return Zc.of(n)}decomposeLeft(e,t){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&e>=++i&&t.push(null),e>i&&this.right.decomposeLeft(e-i,t)}decomposeRight(e,t){let i=this.left.length,s=i+this.break;if(e>=s)return this.right.decomposeRight(e-s,t);e<i&&this.left.decomposeRight(e,t),this.break&&e<s&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?Zc.of(this.break?[e,null,t]:[e,t]):(this.left=e,this.right=t,this.height=e.height+t.height,this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,i=!1,s){let{left:n,right:r}=this,o=t+n.length+this.break,a=null;return s&&s.from<=t+n.length&&s.more?a=n=n.updateHeight(e,t,i,s):n.updateHeight(e,t,i),s&&s.from<=o+r.length&&s.more?a=r=r.updateHeight(e,o,i,s):r.updateHeight(e,o,i),a?this.balanced(n,r):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function $c(e,t){let i,s;null==e[t]&&(i=e[t-1])instanceof Kc&&(s=e[t+1])instanceof Kc&&e.splice(t-1,3,new Kc(i.length+1+s.length))}class ed{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let e=Math.min(t,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof _c?i.length+=e-this.pos:(e>this.pos||!this.isCovered)&&this.nodes.push(new _c(e-this.pos,-1)),this.writtenTo=e,t>e&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,i){if(e<t||i.heightRelevant){let s=i.widget?i.widget.estimatedHeight:0;s<0&&(s=this.oracle.lineHeight);let n=t-e;i.block?this.addBlock(new Yc(n,s,i.type)):(n||s>=5)&&this.addLineDeco(s,n)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||null==this.nodes[this.nodes.length-1])&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new _c(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let i=new Kc(t-e);return this.oracle.doc.lineAt(e).to==t&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof _c)return e;let t=new _c(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine(),e.type!=th.WidgetAfter||this.isCovered||this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,e.type!=th.WidgetBefore&&(this.covering=e)}addLineDeco(e,t){let i=this.ensureLine();i.length+=t,i.collapsed+=t,i.widgetHeight=Math.max(i.widgetHeight,e),this.writtenTo=this.pos=this.pos+t}finish(e){let t=0==this.nodes.length?null:this.nodes[this.nodes.length-1];!(this.lineStart>-1)||t instanceof _c||this.isCovered?(this.writtenTo<this.pos||null==t)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos)):this.nodes.push(new _c(0,-1));let i=e;for(let e of this.nodes)e instanceof _c&&e.updateHeight(this.oracle,i),i+=e?e.length:1;return this.nodes}static build(e,t,i,s){let n=new ed(i,e);return Qa.spans(t,i,s,n,0),n.finish(i)}}class td{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,i,s){(e<t||i&&i.heightRelevant||s&&s.heightRelevant)&&ah(e,t,this.changes,5)}}function id(e,t){let i=e.getBoundingClientRect(),s=e.ownerDocument,n=s.defaultView||window,r=Math.max(0,i.left),o=Math.min(n.innerWidth,i.right),a=Math.max(0,i.top),l=Math.min(n.innerHeight,i.bottom);for(let t=e.parentNode;t&&t!=s.body;)if(1==t.nodeType){let i=t,s=window.getComputedStyle(i);if((i.scrollHeight>i.clientHeight||i.scrollWidth>i.clientWidth)&&"visible"!=s.overflow){let s=i.getBoundingClientRect();r=Math.max(r,s.left),o=Math.min(o,s.right),a=Math.max(a,s.top),l=t==e.parentNode?s.bottom:Math.min(l,s.bottom)}t="absolute"==s.position||"fixed"==s.position?i.offsetParent:i.parentNode}else{if(11!=t.nodeType)break;t=t.host}return{left:r-i.left,right:Math.max(r,o)-i.left,top:a-(i.top+t),bottom:Math.max(a,l)-(i.top+t)}}function sd(e,t){let i=e.getBoundingClientRect();return{left:0,right:i.right-i.left,top:t,bottom:i.bottom-(i.top+t)}}class nd{constructor(e,t,i){this.from=e,this.to=t,this.size=i}static same(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++){let s=e[i],n=t[i];if(s.from!=n.from||s.to!=n.to||s.size!=n.size)return!1}return!0}draw(e){return ih.replace({widget:new rd(this.size,e)}).range(this.from,this.to)}}class rd extends eh{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class od{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scaler=dd,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Fh.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(Qh).some((e=>"function"!=typeof e&&"cm-lineWrapping"==e.class));this.heightOracle=new jc(t),this.stateDeco=e.facet(Mh).filter((e=>"function"!=typeof e)),this.heightMap=Zc.empty().applyChanges(this.stateDeco,to.empty,this.heightOracle.setDoc(e.doc),[new Ph(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=ih.set(this.lineGaps.map((e=>e.draw(!1)))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let i=0;i<=1;i++){let s=i?t.head:t.anchor;if(!e.some((({from:e,to:t})=>s>=e&&s<=t))){let{from:t,to:i}=this.lineBlockAt(s);e.push(new ad(t,i))}}this.viewports=e.sort(((e,t)=>e.from-t.from)),this.scaler=this.heightMap.height<=7e6?dd:new ud(this.heightOracle.doc,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.state.doc,0,0,(e=>{this.viewportLines.push(1==this.scaler.scale?e:pd(e,this.scaler))}))}update(e,t=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(Mh).filter((e=>"function"!=typeof e));let s=e.changedRanges,n=Ph.extendWithRanges(s,function(e,t,i){let s=new td;return Qa.compare(e,t,i,s,0),s.changes}(i,this.stateDeco,e?e.changes:So.empty(this.state.doc.length))),r=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),n),this.heightMap.height!=r&&(e.flags|=2);let o=n.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<o.from||t.range.head>o.to)||!this.viewportIsAppropriate(o))&&(o=this.getViewport(0,t));let a=!e.changes.empty||2&e.flags||o.from!=this.viewport.from||o.to!=this.viewport.to;this.viewport=o,this.updateForViewport(),a&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(yh)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,i=window.getComputedStyle(t),s=this.heightOracle,n=i.whiteSpace;this.defaultTextDirection="rtl"==i.direction?Fh.RTL:Fh.LTR;let r=this.heightOracle.mustRefreshForWrapping(n),o=r||this.mustMeasureContent||this.contentDOMHeight!=t.clientHeight;this.contentDOMHeight=t.clientHeight,this.mustMeasureContent=!1;let a=0,l=0,h=parseInt(i.paddingTop)||0,c=parseInt(i.paddingBottom)||0;this.paddingTop==h&&this.paddingBottom==c||(this.paddingTop=h,this.paddingBottom=c,a|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(s.lineWrapping&&(o=!0),this.editorWidth=e.scrollDOM.clientWidth,a|=8);let d=(this.printing?sd:id)(t,this.paddingTop),u=d.top-this.pixelViewport.top,p=d.bottom-this.pixelViewport.bottom;this.pixelViewport=d;let f=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(f!=this.inView&&(this.inView=f,f&&(o=!0)),!this.inView&&!this.scrollTarget)return 0;let m=t.clientWidth;if(this.contentDOMWidth==m&&this.editorHeight==e.scrollDOM.clientHeight||(this.contentDOMWidth=m,this.editorHeight=e.scrollDOM.clientHeight,a|=8),o){let t=e.docView.measureVisibleLineHeights(this.viewport);if(s.mustRefreshForHeights(t)&&(r=!0),r||s.lineWrapping&&Math.abs(m-this.contentDOMWidth)>s.charWidth){let{lineHeight:i,charWidth:o}=e.docView.measureTextSize();(r=i>0&&s.refresh(n,i,o,m/o,t))&&(e.docView.minWidth=0,a|=8)}u>0&&p>0?l=Math.max(u,p):u<0&&p<0&&(l=Math.min(u,p)),s.heightChanged=!1;for(let i of this.viewports){let n=i.from==this.viewport.from?t:e.docView.measureVisibleLineHeights(i);this.heightMap=(r?Zc.empty().applyChanges(this.stateDeco,to.empty,this.heightOracle,[new Ph(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(s,0,r,new Hc(i.from,n))}s.heightChanged&&(a|=2)}let g=!this.viewportIsAppropriate(this.viewport,l)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return g&&(this.viewport=this.getViewport(l,this.scrollTarget)),this.updateForViewport(),(2&a||g)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(r?[]:this.lineGaps,e)),a|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),a}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),s=this.heightMap,n=this.state.doc,{visibleTop:r,visibleBottom:o}=this,a=new ad(s.lineAt(r-1e3*i,Xc.ByHeight,n,0,0).from,s.lineAt(o+1e3*(1-i),Xc.ByHeight,n,0,0).to);if(t){let{head:e}=t.range;if(e<a.from||e>a.to){let i,r=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),o=s.lineAt(e,Xc.ByPos,n,0,0);i="center"==t.y?(o.top+o.bottom)/2-r/2:"start"==t.y||"nearest"==t.y&&e<a.from?o.top:o.bottom-r,a=new ad(s.lineAt(i-500,Xc.ByHeight,n,0,0).from,s.lineAt(i+r+500,Xc.ByHeight,n,0,0).to)}}return a}mapViewport(e,t){let i=t.mapPos(e.from,-1),s=t.mapPos(e.to,1);return new ad(this.heightMap.lineAt(i,Xc.ByPos,this.state.doc,0,0).from,this.heightMap.lineAt(s,Xc.ByPos,this.state.doc,0,0).to)}viewportIsAppropriate({from:e,to:t},i=0){if(!this.inView)return!0;let{top:s}=this.heightMap.lineAt(e,Xc.ByPos,this.state.doc,0,0),{bottom:n}=this.heightMap.lineAt(t,Xc.ByPos,this.state.doc,0,0),{visibleTop:r,visibleBottom:o}=this;return(0==e||s<=r-Math.max(10,Math.min(-i,250)))&&(t==this.state.doc.length||n>=o+Math.max(10,Math.min(i,250)))&&s>r-2e3&&n<o+2e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let i=[];for(let s of e)t.touchesRange(s.from,s.to)||i.push(new nd(t.mapPos(s.from),t.mapPos(s.to),s.size));return i}ensureLineGaps(e,t){let i=this.heightOracle.lineWrapping,s=i?1e4:2e3,n=s>>1,r=s<<1;if(this.defaultTextDirection!=Fh.LTR&&!i)return[];let o=[],a=(s,r,l,h)=>{if(r-s<n)return;let c=this.state.selection.main,d=[c.from];c.empty||d.push(c.to);for(let e of d)if(e>s&&e<r)return a(s,e-10,l,h),void a(e+10,r,l,h);let u=function(e,t){for(let i of e)if(t(i))return i}(e,(e=>e.from>=l.from&&e.to<=l.to&&Math.abs(e.from-s)<n&&Math.abs(e.to-r)<n&&!d.some((t=>e.from<t&&e.to>t))));if(!u){if(r<l.to&&t&&i&&t.visibleRanges.some((e=>e.from<=r&&e.to>=r))){let e=t.moveToLineBoundary(Do.cursor(r),!1,!0).head;e>s&&(r=e)}u=new nd(s,r,this.gapSize(l,s,r,h))}o.push(u)};for(let e of this.viewportLines){if(e.length<r)continue;let t=ld(e.from,e.to,this.stateDeco);if(t.total<r)continue;let n,o,l=this.scrollTarget?this.scrollTarget.range.head:null;if(i){let i,r,a=s/this.heightOracle.lineLength*this.heightOracle.lineHeight;if(null!=l){let s=cd(t,l),n=((this.visibleBottom-this.visibleTop)/2+a)/e.height;i=s-n,r=s+n}else i=(this.visibleTop-e.top-a)/e.height,r=(this.visibleBottom-e.top+a)/e.height;n=hd(t,i),o=hd(t,r)}else{let e,i,r=t.total*this.heightOracle.charWidth,a=s*this.heightOracle.charWidth;if(null!=l){let s=cd(t,l),n=((this.pixelViewport.right-this.pixelViewport.left)/2+a)/r;e=s-n,i=s+n}else e=(this.pixelViewport.left-a)/r,i=(this.pixelViewport.right+a)/r;n=hd(t,e),o=hd(t,i)}n>e.from&&a(e.from,n,e,t),o<e.to&&a(o,e.to,e,t)}return o}gapSize(e,t,i,s){let n=cd(s,i)-cd(s,t);return this.heightOracle.lineWrapping?e.height*n:s.total*this.heightOracle.charWidth*n}updateLineGaps(e){nd.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=ih.set(e.map((e=>e.draw(this.heightOracle.lineWrapping)))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];Qa.spans(e,this.viewport.from,this.viewport.to,{span(e,i){t.push({from:e,to:i})},point(){}},20);let i=t.length!=this.visibleRanges.length||this.visibleRanges.some(((e,i)=>e.from!=t[i].from||e.to!=t[i].to));return this.visibleRanges=t,i?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find((t=>t.from<=e&&t.to>=e))||pd(this.heightMap.lineAt(e,Xc.ByPos,this.state.doc,0,0),this.scaler)}lineBlockAtHeight(e){return pd(this.heightMap.lineAt(this.scaler.fromDOM(e),Xc.ByHeight,this.state.doc,0,0),this.scaler)}elementAtHeight(e){return pd(this.heightMap.blockAt(this.scaler.fromDOM(e),this.state.doc,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class ad{constructor(e,t){this.from=e,this.to=t}}function ld(e,t,i){let s=[],n=e,r=0;return Qa.spans(i,e,t,{span(){},point(e,t){e>n&&(s.push({from:n,to:e}),r+=e-n),n=t}},20),n<t&&(s.push({from:n,to:t}),r+=t-n),{total:r,ranges:s}}function hd({total:e,ranges:t},i){if(i<=0)return t[0].from;if(i>=1)return t[t.length-1].to;let s=Math.floor(e*i);for(let e=0;;e++){let{from:i,to:n}=t[e],r=n-i;if(s<=r)return i+s;s-=r}}function cd(e,t){let i=0;for(let{from:s,to:n}of e.ranges){if(t<=n){i+=t-s;break}i+=n-s}return i/e.total}const dd={toDOM:e=>e,fromDOM:e=>e,scale:1};class ud{constructor(e,t,i){let s=0,n=0,r=0;this.viewports=i.map((({from:i,to:n})=>{let r=t.lineAt(i,Xc.ByPos,e,0,0).top,o=t.lineAt(n,Xc.ByPos,e,0,0).bottom;return s+=o-r,{from:i,to:n,top:r,bottom:o,domTop:0,domBottom:0}})),this.scale=(7e6-s)/(t.height-s);for(let e of this.viewports)e.domTop=r+(e.top-n)*this.scale,r=e.domBottom=e.domTop+(e.bottom-e.top),n=e.bottom}toDOM(e){for(let t=0,i=0,s=0;;t++){let n=t<this.viewports.length?this.viewports[t]:null;if(!n||e<n.top)return s+(e-i)*this.scale;if(e<=n.bottom)return n.domTop+(e-n.top);i=n.bottom,s=n.domBottom}}fromDOM(e){for(let t=0,i=0,s=0;;t++){let n=t<this.viewports.length?this.viewports[t]:null;if(!n||e<n.domTop)return i+(e-s)/this.scale;if(e<=n.domBottom)return n.top+(e-n.domTop);i=n.bottom,s=n.domBottom}}}function pd(e,t){if(1==t.scale)return e;let i=t.toDOM(e.top),s=t.toDOM(e.bottom);return new qc(e.from,e.length,i,s-i,Array.isArray(e.type)?e.type.map((e=>pd(e,t))):e.type)}const fd=Lo.define({combine:e=>e.join(" ")}),md=Lo.define({combine:e=>e.indexOf(!0)>-1}),gd=Xa.newName(),Ad=Xa.newName(),bd=Xa.newName(),vd={"&light":"."+Ad,"&dark":"."+bd};function yd(e,t,i){return new Xa(t,{finish:t=>/&/.test(t)?t.replace(/&\w*/,(t=>{if("&"==t)return e;if(!i||!i[t])throw new RangeError(`Unsupported selector: ${t}`);return i[t]})):e+" "+t})}const wd=yd("."+gd,{"&.cm-editor":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,minHeight:"100%",display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},"&.cm-focused .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},vd);class xd{constructor(e,t,i,s){this.typeOver=s,this.bounds=null,this.text="";let{impreciseHead:n,impreciseAnchor:r}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,i,0))){let t=n||r?[]:function(e){let t=[];if(e.root.activeElement!=e.contentDOM)return t;let{anchorNode:i,anchorOffset:s,focusNode:n,focusOffset:r}=e.observer.selectionRange;return i&&(t.push(new tc(i,s)),n==i&&r==s||t.push(new tc(n,r))),t}(e),i=new $h(t,e.state);i.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=i.text,this.newSel=function(e,t){if(0==e.length)return null;let i=e[0].pos,s=2==e.length?e[1].pos:i;return i>-1&&s>-1?Do.single(i+t,s+t):null}(t,this.bounds.from)}else{let t=e.observer.selectionRange,i=n&&n.node==t.focusNode&&n.offset==t.focusOffset||!nl(e.contentDOM,t.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(t.focusNode,t.focusOffset),s=r&&r.node==t.anchorNode&&r.offset==t.anchorOffset||!nl(e.contentDOM,t.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(t.anchorNode,t.anchorOffset);this.newSel=Do.single(s,i)}}}function Od(e,t){let i,{newSel:s}=t,n=e.state.selection.main;if(t.bounds){let{from:s,to:r}=t.bounds,o=n.from,a=null;(8===e.inputState.lastKeyCode&&e.inputState.lastKeyTime>Date.now()-100||zl.android&&t.text.length<r-s)&&(o=n.to,a="end");let l=function(e,t,i,s){let n=Math.min(e.length,t.length),r=0;for(;r<n&&e.charCodeAt(r)==t.charCodeAt(r);)r++;if(r==n&&e.length==t.length)return null;let o=e.length,a=t.length;for(;o>0&&a>0&&e.charCodeAt(o-1)==t.charCodeAt(a-1);)o--,a--;"end"==s&&(i-=o+Math.max(0,r-Math.min(o,a))-r);o<r&&e.length<t.length?(a=(r-=i<=r&&i>=o?r-i:0)+(a-o),o=r):a<r&&(o=(r-=i<=r&&i>=a?r-i:0)+(o-a),a=r);return{from:r,toA:o,toB:a}}(e.state.doc.sliceString(s,r,Jh),t.text,o-s,a);l&&(zl.chrome&&13==e.inputState.lastKeyCode&&l.toB==l.from+2&&t.text.slice(l.from,l.toB)==Jh+Jh&&l.toB--,i={from:s+l.from,to:s+l.toA,insert:to.of(t.text.slice(l.from,l.toB).split(Jh))})}else!s||e.hasFocus&&e.state.facet(Ch)&&!s.main.eq(n)||(s=null);if(!i&&!s)return!1;if(!i&&t.typeOver&&!n.empty&&s&&s.main.empty?i={from:n.from,to:n.to,insert:e.state.doc.slice(n.from,n.to)}:i&&i.from>=n.from&&i.to<=n.to&&(i.from!=n.from||i.to!=n.to)&&n.to-n.from-(i.to-i.from)<=4?i={from:n.from,to:n.to,insert:e.state.doc.slice(n.from,i.from).append(i.insert).append(e.state.doc.slice(i.to,n.to))}:(zl.mac||zl.android)&&i&&i.from==i.to&&i.from==n.head-1&&/^\. ?$/.test(i.insert.toString())?(s&&2==i.insert.length&&(s=Do.single(s.main.anchor-1,s.main.head-1)),i={from:n.from,to:n.to,insert:to.of([" "])}):zl.chrome&&i&&i.from==i.to&&i.from==n.head&&"\n "==i.insert.toString()&&e.lineWrapping&&(s&&(s=Do.single(s.main.anchor-1,s.main.head-1)),i={from:n.from,to:n.to,insert:to.of([" "])}),i){let t=e.state;if(zl.ios&&e.inputState.flushIOSKey(e))return!0;if(zl.android&&(i.from==n.from&&i.to==n.to&&1==i.insert.length&&2==i.insert.lines&&vl(e.contentDOM,"Enter",13)||i.from==n.from-1&&i.to==n.to&&0==i.insert.length&&vl(e.contentDOM,"Backspace",8)||i.from==n.from&&i.to==n.to+1&&0==i.insert.length&&vl(e.contentDOM,"Delete",46)))return!0;let r,o=i.insert.toString();if(e.state.facet(bh).some((t=>t(e,i.from,i.to,o))))return!0;if(e.inputState.composing>=0&&e.inputState.composing++,i.from>=n.from&&i.to<=n.to&&i.to-i.from>=(n.to-n.from)/3&&(!s||s.main.empty&&s.main.from==i.from+i.insert.length)&&e.inputState.composing<0){let s=n.from<i.from?t.sliceDoc(n.from,i.from):"",o=n.to>i.to?t.sliceDoc(i.to,n.to):"";r=t.replaceSelection(e.state.toText(s+i.insert.sliceString(0,void 0,e.state.lineBreak)+o))}else{let o=t.changes(i),a=s&&!t.selection.main.eq(s.main)&&s.main.to<=o.newLength?s.main:void 0;if(t.selection.ranges.length>1&&e.inputState.composing>=0&&i.to<=n.to&&i.to>=n.to-10){let s=e.state.sliceDoc(i.from,i.to),l=nc(e)||e.state.doc.lineAt(n.head),h=n.to-i.to,c=n.to-n.from;r=t.changeByRange((r=>{if(r.from==n.from&&r.to==n.to)return{changes:o,range:a||r.map(o)};let d=r.to-h,u=d-s.length;if(r.to-r.from!=c||e.state.sliceDoc(u,d)!=s||l&&r.to>=l.from&&r.from<=l.to)return{range:r};let p=t.changes({from:u,to:d,insert:i.insert}),f=r.to-n.to;return{changes:p,range:a?Do.range(Math.max(0,a.anchor+f),Math.max(0,a.head+f)):r.map(p)}}))}else r={changes:o,selection:a&&t.selection.replaceRange(a)}}let a="input.type";return e.composing&&(a+=".compose",e.inputState.compositionFirstChange&&(a+=".start",e.inputState.compositionFirstChange=!1)),e.dispatch(r,{scrollIntoView:!0,userEvent:a}),!0}if(s&&!s.main.eq(n)){let t=!1,i="select";return e.inputState.lastSelectionTime>Date.now()-50&&("select"==e.inputState.lastSelectionOrigin&&(t=!0),i=e.inputState.lastSelectionOrigin),e.dispatch({selection:s,scrollIntoView:t,userEvent:i}),!0}return!1}const Cd={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Sd=zl.ie&&zl.ie_version<=11;class Id{constructor(e){this.view=e,this.active=!1,this.selectionRange=new fl,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resize=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver((t=>{for(let e of t)this.queue.push(e);(zl.ie&&zl.ie_version<=11||zl.ios&&e.composing)&&t.some((e=>"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length))?this.flushSoon():this.flush()})),Sd&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),"function"==typeof ResizeObserver&&(this.resize=new ResizeObserver((()=>{var e;(null===(e=this.view.docView)||void 0===e?void 0:e.lastUpdate)<Date.now()-75&&this.onResize()})),this.resize.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),"function"==typeof IntersectionObserver&&(this.intersection=new IntersectionObserver((e=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),e.length>0&&e[e.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))}),{}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver((e=>{e.length>0&&e[e.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))}),{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runScrollHandlers(this.view,e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout((()=>{this.resizeTimeout=-1,this.view.requestMeasure()}),50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout((()=>{this.view.viewState.printing=!1,this.view.requestMeasure()}),500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some(((t,i)=>t!=e[i])))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,s=this.selectionRange;if(i.state.facet(Ch)?i.root.activeElement!=this.dom:!rl(i.dom,s))return;let n=s.anchorNode&&i.docView.nearest(s.anchorNode);n&&n.ignoreEvent(e)?t||(this.selectionChanged=!1):(zl.ie&&zl.ie_version<=11||zl.android&&zl.chrome)&&!i.state.selection.main.empty&&s.focusNode&&al(s.focusNode,s.focusOffset,s.anchorNode,s.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=zl.safari&&11==e.root.nodeType&&function(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}(this.dom.ownerDocument)==this.dom&&function(e){let t=null;function i(e){e.preventDefault(),e.stopImmediatePropagation(),t=e.getTargetRanges()[0]}if(e.contentDOM.addEventListener("beforeinput",i,!0),e.dom.ownerDocument.execCommand("indent"),e.contentDOM.removeEventListener("beforeinput",i,!0),!t)return null;let s=t.startContainer,n=t.startOffset,r=t.endContainer,o=t.endOffset,a=e.docView.domAtPos(e.state.selection.main.anchor);return al(a.node,a.offset,r,o)&&([s,n,r,o]=[r,o,s,n]),{anchorNode:s,anchorOffset:n,focusNode:r,focusOffset:o}}(this.view)||sl(e.root);if(!t||this.selectionRange.eq(t))return!1;let i=rl(this.dom,t);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&function(e,t){let i=t.focusNode,s=t.focusOffset;if(!i||t.anchorNode!=i||t.anchorOffset!=s)return!1;for(;;)if(s){if(1!=i.nodeType)return!1;let e=i.childNodes[s-1];"false"==e.contentEditable?s--:s=cl(i=e)}else{if(i==e)return!0;s=ll(i),i=i.parentNode}}(this.dom,t)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(t),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let i=this.dom;i;)if(1==i.nodeType)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(i),i=i.assignedSlot||i.parentNode;else{if(11!=i.nodeType)break;i=i.host}if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let e of this.scrollTargets)e.removeEventListener("scroll",this.onScroll);for(let e of this.scrollTargets=t)e.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,Cd),Sd&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Sd&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var i;if(!this.delayedAndroidKey){let e=()=>{let e=this.delayedAndroidKey;e&&(this.clearDelayedAndroidKey(),!this.flush()&&e.force&&vl(this.dom,e.key,e.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(e)}this.delayedAndroidKey&&"Enter"!=e||(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(null===(i=this.delayedAndroidKey)||void 0===i?void 0:i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame((()=>{this.delayedFlush=-1,this.flush()})))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}processRecords(){let e=this.queue;for(let t of this.observer.takeRecords())e.push(t);e.length&&(this.queue=[]);let t=-1,i=-1,s=!1;for(let n of e){let e=this.readMutation(n);e&&(e.typeOver&&(s=!0),-1==t?({from:t,to:i}=e):(t=Math.min(e.from,t),i=Math.max(e.to,i)))}return{from:t,to:i,typeOver:s}}readChange(){let{from:e,to:t,typeOver:i}=this.processRecords(),s=this.selectionChanged&&rl(this.dom,this.selectionRange);return e<0&&!s?null:(e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1,new xd(this.view,e,t,i))}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return!1;let i=this.view.state,s=Od(this.view,t);return this.view.state==i&&this.view.update([]),s}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty("attributes"==e.type),"attributes"==e.type&&(t.dirty|=4),"childList"==e.type){let i=Ed(t,e.previousSibling||e.target.previousSibling,-1),s=Ed(t,e.nextSibling||e.target.nextSibling,1);return{from:i?t.posAfter(i):t.posAtStart,to:s?t.posBefore(s):t.posAtEnd,typeOver:!1}}return"characterData"==e.type?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var e,t,i;this.stop(),null===(e=this.intersection)||void 0===e||e.disconnect(),null===(t=this.gapIntersection)||void 0===t||t.disconnect(),null===(i=this.resize)||void 0===i||i.disconnect();for(let e of this.scrollTargets)e.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function Ed(e,t,i){for(;t;){let s=Ol.get(t);if(s&&s.parent==e)return s;let n=t.parentNode;t=n!=e.dom?n:i>0?t.nextSibling:t.previousSibling}return null}class kd{constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: absolute; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=e.dispatch||(e=>this.update([e])),this.dispatch=this.dispatch.bind(this),this._root=e.root||function(e){for(;e;){if(e&&(9==e.nodeType||11==e.nodeType&&e.host))return e;e=e.assignedSlot||e.parentNode}return null}(e.parent)||document,this.viewState=new od(e.state||Ca.create(e)),this.plugins=this.state.facet(Ih).map((e=>new kh(e)));for(let e of this.plugins)e.update(this);this.observer=new Id(this),this.inputState=new vc(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new ic(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),e.parent&&e.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}dispatch(...e){this._dispatch(1==e.length&&e[0]instanceof pa?e[0]:this.state.update(...e))}update(e){if(0!=this.updateState)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t,i=!1,s=!1,n=this.state;for(let t of e){if(t.startState!=n)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");n=t.state}if(this.destroyed)return void(this.viewState.state=n);let r=this.observer.delayedAndroidKey,o=null;if(r?(this.observer.clearDelayedAndroidKey(),((o=this.observer.readChange())&&!this.state.doc.eq(n.doc)||!this.state.selection.eq(n.selection))&&(o=null)):this.observer.clear(),n.facet(Ca.phrases)!=this.state.facet(Ca.phrases))return this.setState(n);t=Lh.create(this,n,e);let a=this.viewState.scrollTarget;try{this.updateState=2;for(let t of e){if(a&&(a=a.map(t.changes)),t.scrollIntoView){let{main:e}=t.state.selection;a=new wh(e.empty?e:Do.cursor(e.head,e.head>e.anchor?-1:1))}for(let e of t.effects)e.is(xh)&&(a=e.value)}this.viewState.update(t,a),this.bidiCache=Md.update(this.bidiCache,t.changes),t.empty||(this.updatePlugins(t),this.inputState.update(t)),i=this.docView.update(t),this.state.facet(Rh)!=this.styleModules&&this.mountStyles(),s=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(i,e.some((e=>e.isUserEvent("select.pointer"))))}finally{this.updateState=0}if(t.startState.facet(fd)!=t.state.facet(fd)&&(this.viewState.mustMeasureContent=!0),(i||s||a||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!t.empty)for(let e of this.state.facet(Ah))e(t);o&&!Od(this,o)&&r.force&&vl(this.contentDOM,r.key,r.keyCode)}setState(e){if(0!=this.updateState)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed)return void(this.viewState.state=e);this.updateState=2;let t=this.hasFocus;try{for(let e of this.plugins)e.destroy(this);this.viewState=new od(e),this.plugins=e.facet(Ih).map((e=>new kh(e))),this.pluginMap.clear();for(let e of this.plugins)e.update(this);this.docView=new ic(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(Ih),i=e.state.facet(Ih);if(t!=i){let s=[];for(let n of i){let i=t.indexOf(n);if(i<0)s.push(new kh(n));else{let t=this.plugins[i];t.mustUpdate=e,s.push(t)}}for(let t of this.plugins)t.mustUpdate!=e&&t.destroy(this);this.plugins=s,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let t of this.plugins)t.mustUpdate=e;for(let e=0;e<this.plugins.length;e++)this.plugins[e].update(this)}measure(e=!0){if(this.destroyed)return;this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,{scrollHeight:i,scrollTop:s,clientHeight:n}=this.scrollDOM,r=s>i-n-4?i:s;try{for(let i=0;;i++){this.updateState=1;let s=this.viewport,n=this.viewState.lineBlockAtHeight(r),o=this.viewState.measure(this);if(!o&&!this.measureRequests.length&&null==this.viewState.scrollTarget)break;if(i>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let a=[];4&o||([this.measureRequests,a]=[a,this.measureRequests]);let l=a.map((e=>{try{return e.read(this)}catch(e){return Oh(this.state,e),Qd}})),h=Lh.create(this,this.state,[]),c=!1,d=!1;h.flags|=o,t?t.flags|=o:t=h,this.updateState=2,h.empty||(this.updatePlugins(h),this.inputState.update(h),this.updateAttrs(),c=this.docView.update(h));for(let t=0;t<a.length;t++)if(l[t]!=Qd)try{let e=a[t];e.write&&e.write(l[t],this)}catch(e){Oh(this.state,e)}if(this.viewState.editorHeight)if(this.viewState.scrollTarget)this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,d=!0;else{let e=this.viewState.lineBlockAt(n.from).top-n.top;(e>1||e<-1)&&(this.scrollDOM.scrollTop+=e,d=!0)}if(c&&this.docView.updateSelection(!0),this.viewport.from==s.from&&this.viewport.to==s.to&&!d&&0==this.measureRequests.length)break}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let e of this.state.facet(Ah))e(t)}get themeClasses(){return gd+" "+(this.state.facet(md)?bd:Ad)+" "+this.state.facet(fd)}updateAttrs(){let e=Td(this,Bh,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(Ch)?"true":"false",class:"cm-content",style:`${zl.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),Td(this,Qh,t);let i=this.observer.ignore((()=>{let i=$l(this.contentDOM,this.contentAttrs,t),s=$l(this.dom,this.editorAttrs,e);return i||s}));return this.editorAttrs=e,this.contentAttrs=t,i}showAnnouncements(e){let t=!0;for(let i of e)for(let e of i.effects)e.is(kd.announce)&&(t&&(this.announceDOM.textContent=""),t=!1,this.announceDOM.appendChild(document.createElement("div")).textContent=e.value)}mountStyles(){this.styleModules=this.state.facet(Rh),Xa.mount(this.root,this.styleModules.concat(wd).reverse())}readMeasured(){if(2==this.updateState)throw new Error("Reading the editor layout isn't allowed during an update");0==this.updateState&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame((()=>this.measure()))),e){if(null!=e.key)for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key)return void(this.measureRequests[t]=e);this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(void 0===t||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find((t=>t.spec==e))||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,i){return bc(this,e,Ac(this,e,t,i))}moveByGroup(e,t){return bc(this,e,Ac(this,e,t,(t=>function(e,t,i){let s=e.state.charCategorizer(t),n=s(i);return e=>{let t=s(e);return n==ya.Space&&(n=t),n==t}}(this,e.head,t))))}moveToLineBoundary(e,t,i=!0){return function(e,t,i,s){let n=e.state.doc.lineAt(t.head),r=s&&e.lineWrapping?e.coordsAtPos(t.assoc<0&&t.head>n.from?t.head-1:t.head):null;if(r){let t=e.dom.getBoundingClientRect(),s=e.textDirectionAt(n.from),o=e.posAtCoords({x:i==(s==Fh.LTR)?t.right-1:t.left+1,y:(r.top+r.bottom)/2});if(null!=o)return Do.cursor(o,i?-1:1)}let o=lh.find(e.docView,t.head),a=o?i?o.posAtEnd:o.posAtStart:i?n.to:n.from;return Do.cursor(a,i?-1:1)}(this,e,t,i)}moveVertically(e,t,i){return bc(this,e,function(e,t,i,s){let n=t.head,r=i?1:-1;if(n==(i?e.state.doc.length:0))return Do.cursor(n,t.assoc);let o,a=t.goalColumn,l=e.contentDOM.getBoundingClientRect(),h=e.coordsAtPos(n),c=e.documentTop;if(h)null==a&&(a=h.left-l.left),o=r<0?h.top:h.bottom;else{let t=e.viewState.lineBlockAt(n);null==a&&(a=Math.min(l.right-l.left,e.defaultCharacterWidth*(n-t.from))),o=(r<0?t.top:t.bottom)+c}let d=l.left+a,u=null!=s?s:e.defaultLineHeight>>1;for(let i=0;;i+=10){let s=o+(u+i)*r,h=mc(e,{x:d,y:s},!1,r);if(s<l.top||s>l.bottom||(r<0?h<n:h>n))return Do.cursor(h,t.assoc,void 0,a)}}(this,e,t,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),mc(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let i=this.docView.coordsAt(e,t);if(!i||i.left==i.right)return i;let s=this.state.doc.lineAt(e),n=this.bidiSpans(s);return ul(i,n[Wh.find(n,e-s.from,-1,t)].dir==Fh.LTR==t>0)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(vh)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>Bd)return Yh(e.length);let t=this.textDirectionAt(e.from);for(let i of this.bidiCache)if(i.from==e.from&&i.dir==t)return i.order;let i=function(e,t){let i=e.length,s=t==Uh?1:2,n=t==Uh?2:1;if(!e||1==s&&!Xh.test(e))return Yh(i);for(let t=0,n=s,r=s;t<i;t++){let i=qh(e.charCodeAt(t));512==i?i=n:8==i&&4==r&&(i=16),Zh[t]=4==i?2:i,7&i&&(r=i),n=i}for(let e=0,t=s,n=s;e<i;e++){let s=Zh[e];if(128==s)e<i-1&&t==Zh[e+1]&&24&t?s=Zh[e]=t:Zh[e]=256;else if(64==s){let s=e+1;for(;s<i&&64==Zh[s];)s++;let r=e&&8==t||s<i&&8==Zh[s]?1==n?1:8:256;for(let t=e;t<s;t++)Zh[t]=r;e=s-1}else 8==s&&1==n&&(Zh[e]=1);t=s,7&s&&(n=s)}for(let t,r,o,a=0,l=0,h=0;a<i;a++)if(r=jh[t=e.charCodeAt(a)])if(r<0){for(let e=l-3;e>=0;e-=3)if(Hh[e+1]==-r){let t=Hh[e+2],i=2&t?s:4&t?1&t?n:s:0;i&&(Zh[a]=Zh[Hh[e]]=i),l=e;break}}else{if(189==Hh.length)break;Hh[l++]=a,Hh[l++]=t,Hh[l++]=h}else if(2==(o=Zh[a])||1==o){let e=o==s;h=e?0:1;for(let t=l-3;t>=0;t-=3){let i=Hh[t+2];if(2&i)break;if(e)Hh[t+2]|=2;else{if(4&i)break;Hh[t+2]|=4}}}for(let e=0;e<i;e++)if(256==Zh[e]){let t=e+1;for(;t<i&&256==Zh[t];)t++;let n=1==(e?Zh[e-1]:s),r=n==(1==(t<i?Zh[t]:s))?n?1:2:s;for(let i=e;i<t;i++)Zh[i]=r;e=t-1}let r=[];if(1==s)for(let e=0;e<i;){let t=e,s=1!=Zh[e++];for(;e<i&&s==(1!=Zh[e]);)e++;if(s)for(let i=e;i>t;){let e=i,s=2!=Zh[--i];for(;i>t&&s==(2!=Zh[i-1]);)i--;r.push(new Wh(i,e,s?2:1))}else r.push(new Wh(t,e,0))}else for(let e=0;e<i;){let t=e,s=2==Zh[e++];for(;e<i&&s==(2==Zh[e]);)e++;r.push(new Wh(t,e,s?1:2))}return r}(e.text,t);return this.bidiCache.push(new Md(e.from,e.to,t,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||zl.safari&&(null===(e=this.inputState)||void 0===e?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore((()=>{Al(this.contentDOM),this.docView.updateSelection()}))}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((9==e.nodeType?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return xh.of(new wh("number"==typeof e?Do.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}static domEventHandlers(e){return Eh.define((()=>({})),{eventHandlers:e})}static theme(e,t){let i=Xa.newName(),s=[fd.of(i),Rh.of(yd(`.${i}`,e))];return t&&t.dark&&s.push(md.of(!0)),s}static baseTheme(e){return Yo.lowest(Rh.of(yd("."+gd,e,vd)))}static findFromDOM(e){var t;let i=e.querySelector(".cm-content"),s=i&&Ol.get(i)||Ol.get(e);return(null===(t=null==s?void 0:s.rootView)||void 0===t?void 0:t.view)||null}}kd.styleModule=Rh,kd.inputHandler=bh,kd.perLineTextDirection=vh,kd.exceptionSink=gh,kd.updateListener=Ah,kd.editable=Ch,kd.mouseSelectionStyle=mh,kd.dragMovesSelection=fh,kd.clickAddsSelectionRange=ph,kd.decorations=Mh,kd.atomicRanges=Th,kd.scrollMargins=Dh,kd.darkTheme=md,kd.contentAttributes=Qh,kd.editorAttributes=Bh,kd.lineWrapping=kd.contentAttributes.of({class:"cm-lineWrapping"}),kd.announce=ua.define();const Bd=4096,Qd={};class Md{constructor(e,t,i,s){this.from=e,this.to=t,this.dir=i,this.order=s}static update(e,t){if(t.empty)return e;let i=[],s=e.length?e[e.length-1].dir:Fh.LTR;for(let n=Math.max(0,e.length-10);n<e.length;n++){let r=e[n];r.dir!=s||t.touchesRange(r.from,r.to)||i.push(new Md(t.mapPos(r.from,1),t.mapPos(r.to,-1),r.dir,r.order))}return i}}function Td(e,t,i){for(let s=e.state.facet(t),n=s.length-1;n>=0;n--){let t=s[n],r="function"==typeof t?t(e):t;r&&Kl(r,i)}return i}const Dd=zl.mac?"mac":zl.windows?"win":zl.linux?"linux":"key";function Rd(e,t,i){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),!1!==i&&t.shiftKey&&(e="Shift-"+e),e}const Pd=Yo.default(kd.domEventHandlers({keydown:(e,t)=>function(e,t,i,s){let n=function(e){var t=!(el&&(e.ctrlKey||e.altKey||e.metaKey)||$a&&e.shiftKey&&e.key&&1==e.key.length||"Unidentified"==e.key)&&e.key||(e.shiftKey?_a:Ya)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}(t),r=wo(vo(n,0))==n.length&&" "!=n,o="",a=!1;Ud&&Ud.view==i&&Ud.scope==s&&(o=Ud.prefix+" ",(a=xc.indexOf(t.keyCode)<0)&&(Ud=null));let l,h,c=new Set,d=e=>{if(e){for(let s of e.run)if(!c.has(s)&&(c.add(s),s(i,t)))return!0;e.preventDefault&&(a=!0)}return!1},u=e[s];if(u){if(d(u[o+Rd(n,t,!r)]))return!0;if(r&&(t.altKey||t.metaKey||t.ctrlKey)&&(l=Ya[t.keyCode])&&l!=n){if(d(u[o+Rd(l,t,!0)]))return!0;if(t.shiftKey&&(h=_a[t.keyCode])!=n&&h!=l&&d(u[o+Rd(h,t,!1)]))return!0}else if(r&&t.shiftKey&&d(u[o+Rd(n,t,!0)]))return!0;if(d(u._any))return!0}return a}(function(e){let t=e.facet(Ld),i=Fd.get(t);return i||Fd.set(t,i=function(e,t=Dd){let i=Object.create(null),s=Object.create(null),n=(e,t)=>{let i=s[e];if(null==i)s[e]=t;else if(i!=t)throw new Error("Key binding "+e+" is used both as a regular binding and as a multi-stroke prefix")},r=(e,s,r,o)=>{var a,l;let h=i[e]||(i[e]=Object.create(null)),c=s.split(/ (?!$)/).map((e=>function(e,t){const i=e.split(/-(?!$)/);let s,n,r,o,a=i[i.length-1];"Space"==a&&(a=" ");for(let e=0;e<i.length-1;++e){const a=i[e];if(/^(cmd|meta|m)$/i.test(a))o=!0;else if(/^a(lt)?$/i.test(a))s=!0;else if(/^(c|ctrl|control)$/i.test(a))n=!0;else if(/^s(hift)?$/i.test(a))r=!0;else{if(!/^mod$/i.test(a))throw new Error("Unrecognized modifier name: "+a);"mac"==t?o=!0:n=!0}}return s&&(a="Alt-"+a),n&&(a="Ctrl-"+a),o&&(a="Meta-"+a),r&&(a="Shift-"+a),a}(e,t)));for(let t=1;t<c.length;t++){let i=c.slice(0,t).join(" ");n(i,!0),h[i]||(h[i]={preventDefault:!0,run:[t=>{let s=Ud={view:t,prefix:i,scope:e};return setTimeout((()=>{Ud==s&&(Ud=null)}),zd),!0}]})}let d=c.join(" ");n(d,!1);let u=h[d]||(h[d]={preventDefault:!1,run:(null===(l=null===(a=h._any)||void 0===a?void 0:a.run)||void 0===l?void 0:l.slice())||[]});r&&u.run.push(r),o&&(u.preventDefault=!0)};for(let s of e){let e=s.scope?s.scope.split(" "):["editor"];if(s.any)for(let t of e){let e=i[t]||(i[t]=Object.create(null));e._any||(e._any={preventDefault:!1,run:[]});for(let t in e)e[t].run.push(s.any)}let n=s[t]||s.key;if(n)for(let t of e)r(t,n,s.run,s.preventDefault),s.shift&&r(t,"Shift-"+n,s.shift,s.preventDefault)}return i}(t.reduce(((e,t)=>e.concat(t)),[]))),i}(t.state),e,t,"editor")})),Ld=Lo.define({enables:Pd}),Fd=new WeakMap;let Ud=null;const zd=4e3;class Gd{constructor(e,t,i,s,n){this.className=e,this.left=t,this.top=i,this.width=s,this.height=n}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className==this.className&&(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width>=0&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}}class Nd{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(Vd)!=e.state.facet(Vd)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&e.view.requestMeasure(this.measureReq)}setOrder(e){let t=0,i=e.facet(Vd);for(;t<i.length&&i[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}draw(e){if(e.length!=this.drawn.length||e.some(((e,t)=>!function(e,t){return e.constructor==t.constructor&&e.eq(t)}(e,this.drawn[t])))){let t=this.dom.firstChild,i=0;for(let s of e)s.update&&t&&s.constructor&&this.drawn[i].constructor&&s.update(t,this.drawn[i])?(t=t.nextSibling,i++):this.dom.insertBefore(s.draw(),t);for(;t;){let e=t.nextSibling;t.remove(),t=e}this.drawn=e}}destroy(){this.dom.remove()}}const Vd=Lo.define();function jd(e){return[Eh.define((t=>new Nd(t,e))),Vd.of(e)]}const Hd=!zl.ios,qd=Lo.define({combine:e=>Sa(e,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})});function Xd(e={}){return[qd.of(e),Zd,_d,Jd,yh.of(!0)]}function Wd(e){return e.startState.facet(qd)!=e.startState.facet(qd)}const Zd=jd({above:!0,markers(e){let{state:t}=e,i=t.facet(qd),s=[];for(let n of t.selection.ranges){let r=n==t.selection.main;if(n.empty?!r||Hd:i.drawRangeCursor){let t=iu(e,n,r);t&&s.push(t)}}return s},update(e,t){e.transactions.some((e=>e.scrollIntoView))&&(t.style.animationName="cm-blink"==t.style.animationName?"cm-blink2":"cm-blink");let i=Wd(e);return i&&Yd(e.state,t),e.docChanged||e.selectionSet||i},mount(e,t){Yd(t.state,e)},class:"cm-cursorLayer"});function Yd(e,t){t.style.animationDuration=e.facet(qd).cursorBlinkRate+"ms"}const _d=jd({above:!1,markers:e=>e.state.selection.ranges.map((t=>t.empty?[]:function(e,t){if(t.to<=e.viewport.from||t.from>=e.viewport.to)return[];let i=Math.max(t.from,e.viewport.from),s=Math.min(t.to,e.viewport.to),n=e.textDirection==Fh.LTR,r=e.contentDOM,o=r.getBoundingClientRect(),a=$d(e),l=window.getComputedStyle(r.firstChild),h=o.left+parseInt(l.paddingLeft)+Math.min(0,parseInt(l.textIndent)),c=o.right-parseInt(l.paddingRight),d=tu(e,i),u=tu(e,s),p=d.type==th.Text?d:null,f=u.type==th.Text?u:null;if(e.lineWrapping&&(p&&(p=eu(e,i,p)),f&&(f=eu(e,s,f))),p&&f&&p.from==f.from)return g(A(t.from,t.to,p));{let i=p?A(t.from,null,p):b(d,!1),s=f?A(null,t.to,f):b(u,!0),n=[];return(p||d).to<(f||u).from-1?n.push(m(h,i.bottom,c,s.top)):i.bottom<s.top&&e.elementAtHeight((i.bottom+s.top)/2).type==th.Text&&(i.bottom=s.top=(i.bottom+s.top)/2),g(i).concat(n).concat(g(s))}function m(e,t,i,s){return new Gd("cm-selectionBackground",e-a.left,t-a.top-.01,i-e,s-t+.01)}function g({top:e,bottom:t,horizontal:i}){let s=[];for(let n=0;n<i.length;n+=2)s.push(m(i[n],e,i[n+1],t));return s}function A(t,i,s){let r=1e9,o=-1e9,a=[];function l(t,i,l,d,u){let p=e.coordsAtPos(t,t==s.to?-2:2),f=e.coordsAtPos(l,l==s.from?2:-2);r=Math.min(p.top,f.top,r),o=Math.max(p.bottom,f.bottom,o),u==Fh.LTR?a.push(n&&i?h:p.left,n&&d?c:f.right):a.push(!n&&d?h:f.left,!n&&i?c:p.right)}let d=null!=t?t:s.from,u=null!=i?i:s.to;for(let s of e.visibleRanges)if(s.to>d&&s.from<u)for(let n=Math.max(s.from,d),r=Math.min(s.to,u);;){let s=e.state.doc.lineAt(n);for(let o of e.bidiSpans(s)){let e=o.from+s.from,a=o.to+s.from;if(e>=r)break;a>n&&l(Math.max(e,n),null==t&&e<=d,Math.min(a,r),null==i&&a>=u,o.dir)}if((n=s.to+1)>=r)break}return 0==a.length&&l(d,null==t,u,null==i,e.textDirection),{top:r,bottom:o,horizontal:a}}function b(e,t){let i=o.top+(t?e.top:e.bottom);return{top:i,bottom:i,horizontal:[]}}}(e,t))).reduce(((e,t)=>e.concat(t))),update:(e,t)=>e.docChanged||e.selectionSet||e.viewportChanged||Wd(e),class:"cm-selectionLayer"}),Kd={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};Hd&&(Kd[".cm-line"].caretColor="transparent !important");const Jd=Yo.highest(kd.theme(Kd));function $d(e){let t=e.scrollDOM.getBoundingClientRect();return{left:(e.textDirection==Fh.LTR?t.left:t.right-e.scrollDOM.clientWidth)-e.scrollDOM.scrollLeft,top:t.top-e.scrollDOM.scrollTop}}function eu(e,t,i){let s=Do.cursor(t);return{from:Math.max(i.from,e.moveToLineBoundary(s,!1,!0).from),to:Math.min(i.to,e.moveToLineBoundary(s,!0,!0).from),type:th.Text}}function tu(e,t){let i=e.lineBlockAt(t);if(Array.isArray(i.type))for(let e of i.type)if(e.to>t||e.to==t&&(e.to==i.to||e.type==th.Text))return e;return i}function iu(e,t,i){let s=e.coordsAtPos(t.head,t.assoc||1);if(!s)return null;let n=$d(e);return new Gd(i?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",s.left-n.left,s.top-n.top,-1,s.bottom-s.top)}const su=ua.define({map:(e,t)=>null==e?null:t.mapPos(e)}),nu=jo.define({create:()=>null,update:(e,t)=>(null!=e&&(e=t.changes.mapPos(e)),t.effects.reduce(((e,t)=>t.is(su)?t.value:e),e))});function ru(e,t,i,s,n){t.lastIndex=0;for(let r,o=e.iterRange(i,s),a=i;!o.next().done;a+=o.value.length)if(!o.lineBreak)for(;r=t.exec(o.value);)n(a+r.index,r)}Eh.fromClass(class{constructor(e){this.view=e,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(e){var t;let i=e.state.field(nu);null==i?null!=this.cursor&&(null===(t=this.cursor)||void 0===t||t.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(e.startState.field(nu)!=i||e.docChanged||e.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let e=this.view.state.field(nu),t=null!=e&&this.view.coordsAtPos(e);if(!t)return null;let i=this.view.scrollDOM.getBoundingClientRect();return{left:t.left-i.left+this.view.scrollDOM.scrollLeft,top:t.top-i.top+this.view.scrollDOM.scrollTop,height:t.bottom-t.top}}drawCursor(e){this.cursor&&(e?(this.cursor.style.left=e.left+"px",this.cursor.style.top=e.top+"px",this.cursor.style.height=e.height+"px"):this.cursor.style.left="-100000px")}destroy(){this.cursor&&this.cursor.remove()}setDropPos(e){this.view.state.field(nu)!=e&&this.view.dispatch({effects:su.of(e)})}},{eventHandlers:{dragover(e){this.setDropPos(this.view.posAtCoords({x:e.clientX,y:e.clientY}))},dragleave(e){e.target!=this.view.contentDOM&&this.view.contentDOM.contains(e.relatedTarget)||this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});class ou{constructor(e){const{regexp:t,decoration:i,decorate:s,boundary:n,maxLength:r=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,s)this.addMatch=(e,t,i,n)=>s(n,i,i+e[0].length,e,t);else if("function"==typeof i)this.addMatch=(e,t,s,n)=>{let r=i(e,t,s);r&&n(s,s+e[0].length,r)};else{if(!i)throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.addMatch=(e,t,s,n)=>n(s,s+e[0].length,i)}this.boundary=n,this.maxLength=r}createDeco(e){let t=new Ma,i=t.add.bind(t);for(let{from:t,to:s}of function(e,t){let i=e.visibleRanges;if(1==i.length&&i[0].from==e.viewport.from&&i[0].to==e.viewport.to)return i;let s=[];for(let{from:n,to:r}of i)n=Math.max(e.state.doc.lineAt(n).from,n-t),r=Math.min(e.state.doc.lineAt(r).to,r+t),s.length&&s[s.length-1].to>=n?s[s.length-1].to=r:s.push({from:n,to:r});return s}(e,this.maxLength))ru(e.state.doc,this.regexp,t,s,((t,s)=>this.addMatch(s,e,t,i)));return t.finish()}updateDeco(e,t){let i=1e9,s=-1;return e.docChanged&&e.changes.iterChanges(((t,n,r,o)=>{o>e.view.viewport.from&&r<e.view.viewport.to&&(i=Math.min(r,i),s=Math.max(o,s))})),e.viewportChanged||s-i>1e3?this.createDeco(e.view):s>-1?this.updateRange(e.view,t.map(e.changes),i,s):t}updateRange(e,t,i,s){for(let n of e.visibleRanges){let r=Math.max(n.from,i),o=Math.min(n.to,s);if(o>r){let i=e.state.doc.lineAt(r),s=i.to<o?e.state.doc.lineAt(o):i,a=Math.max(n.from,i.from),l=Math.min(n.to,s.to);if(this.boundary){for(;r>i.from;r--)if(this.boundary.test(i.text[r-1-i.from])){a=r;break}for(;o<s.to;o++)if(this.boundary.test(s.text[o-s.from])){l=o;break}}let h,c=[],d=(e,t,i)=>c.push(i.range(e,t));if(i==s)for(this.regexp.lastIndex=a-i.from;(h=this.regexp.exec(i.text))&&h.index<l-i.from;)this.addMatch(h,e,h.index+i.from,d);else ru(e.state.doc,this.regexp,a,l,((t,i)=>this.addMatch(i,e,t,d)));t=t.update({filterFrom:a,filterTo:l,filter:(e,t)=>e<a||t>l,add:c})}}return t}}const au=null!=/x/.unicode?"gu":"g",lu=new RegExp("[\0-\b\n--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\ufeff￹-￼]",au),hu={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let cu=null;const du=Lo.define({combine(e){let t=Sa(e,{render:null,specialChars:lu,addSpecialChars:null});return(t.replaceTabs=!function(){var e;if(null==cu&&"undefined"!=typeof document&&document.body){let t=document.body.style;cu=null!=(null!==(e=t.tabSize)&&void 0!==e?e:t.MozTabSize)}return cu||!1}())&&(t.specialChars=new RegExp("\t|"+t.specialChars.source,au)),t.addSpecialChars&&(t.specialChars=new RegExp(t.specialChars.source+"|"+t.addSpecialChars.source,au)),t}});function uu(e={}){return[du.of(e),pu||(pu=Eh.fromClass(class{constructor(e){this.view=e,this.decorations=ih.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(e.state.facet(du)),this.decorations=this.decorator.createDeco(e)}makeDecorator(e){return new ou({regexp:e.specialChars,decoration:(t,i,s)=>{let{doc:n}=i.state,r=vo(t[0],0);if(9==r){let e=n.lineAt(s),t=i.state.tabSize,r=Va(e.text,t,s-e.from);return ih.replace({widget:new mu((t-r%t)*this.view.defaultCharacterWidth)})}return this.decorationCache[r]||(this.decorationCache[r]=ih.replace({widget:new fu(e,r)}))},boundary:e.replaceTabs?void 0:/[^]/})}update(e){let t=e.state.facet(du);e.startState.facet(du)!=t?(this.decorator=this.makeDecorator(t),this.decorations=this.decorator.createDeco(e.view)):this.decorations=this.decorator.updateDeco(e,this.decorations)}},{decorations:e=>e.decorations}))]}let pu=null;class fu extends eh{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=function(e){return e>=32?"•":10==e?"␤":String.fromCharCode(9216+e)}(this.code),i=e.state.phrase("Control character")+" "+(hu[this.code]||"0x"+this.code.toString(16)),s=this.options.render&&this.options.render(this.code,i,t);if(s)return s;let n=document.createElement("span");return n.textContent=t,n.title=i,n.setAttribute("aria-label",i),n.className="cm-specialChar",n}ignoreEvent(){return!1}}class mu extends eh{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="\t",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}Eh.fromClass(class{constructor(){this.height=1e3,this.attrs={style:"padding-bottom: 1000px"}}update(e){let{view:t}=e,i=t.viewState.editorHeight-t.defaultLineHeight-t.documentPadding.top-.5;i!=this.height&&(this.height=i,this.attrs={style:`padding-bottom: ${i}px`})}});const gu=ih.line({class:"cm-activeLine"});Eh.fromClass(class{constructor(e){this.decorations=this.getDeco(e)}update(e){(e.docChanged||e.selectionSet)&&(this.decorations=this.getDeco(e.view))}getDeco(e){let t=-1,i=[];for(let s of e.state.selection.ranges){let n=e.lineBlockAt(s.head);n.from>t&&(i.push(gu.range(n.from)),t=n.from)}return ih.set(i)}},{decorations:e=>e.decorations});const Au="-10000px";class bu{constructor(e,t,i){this.facet=t,this.createTooltipView=i,this.input=e.state.facet(t),this.tooltips=this.input.filter((e=>e)),this.tooltipViews=this.tooltips.map(i)}update(e){var t;let i=e.state.facet(this.facet),s=i.filter((e=>e));if(i===this.input){for(let t of this.tooltipViews)t.update&&t.update(e);return!1}let n=[];for(let t=0;t<s.length;t++){let i=s[t],r=-1;if(i){for(let e=0;e<this.tooltips.length;e++){let t=this.tooltips[e];t&&t.create==i.create&&(r=e)}if(r<0)n[t]=this.createTooltipView(i);else{let i=n[t]=this.tooltipViews[r];i.update&&i.update(e)}}}for(let e of this.tooltipViews)n.indexOf(e)<0&&(e.dom.remove(),null===(t=e.destroy)||void 0===t||t.call(e));return this.input=i,this.tooltips=s,this.tooltipViews=n,!0}}function vu(e){let{win:t}=e;return{top:0,left:0,bottom:t.innerHeight,right:t.innerWidth}}const yu=Lo.define({combine:e=>{var t,i,s;return{position:zl.ios?"absolute":(null===(t=e.find((e=>e.position)))||void 0===t?void 0:t.position)||"fixed",parent:(null===(i=e.find((e=>e.parent)))||void 0===i?void 0:i.parent)||null,tooltipSpace:(null===(s=e.find((e=>e.tooltipSpace)))||void 0===s?void 0:s.tooltipSpace)||vu}}}),wu=Eh.fromClass(class{constructor(e){this.view=e,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let t=e.state.facet(yu);this.position=t.position,this.parent=t.parent,this.classes=e.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new bu(e,Cu,(e=>this.createTooltip(e))),this.intersectionObserver="function"==typeof IntersectionObserver?new IntersectionObserver((e=>{Date.now()>this.lastTransaction-50&&e.length>0&&e[e.length-1].intersectionRatio<1&&this.measureSoon()}),{threshold:[1]}):null,this.observeIntersection(),e.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let e of this.manager.tooltipViews)this.intersectionObserver.observe(e.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout((()=>{this.measureTimeout=-1,this.maybeMeasure()}),50))}update(e){e.transactions.length&&(this.lastTransaction=Date.now());let t=this.manager.update(e);t&&this.observeIntersection();let i=t||e.geometryChanged,s=e.state.facet(yu);if(s.position!=this.position){this.position=s.position;for(let e of this.manager.tooltipViews)e.dom.style.position=this.position;i=!0}if(s.parent!=this.parent){this.parent&&this.container.remove(),this.parent=s.parent,this.createContainer();for(let e of this.manager.tooltipViews)this.container.appendChild(e.dom);i=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);i&&this.maybeMeasure()}createTooltip(e){let t=e.create(this.view);if(t.dom.classList.add("cm-tooltip"),e.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let e=document.createElement("div");e.className="cm-tooltip-arrow",t.dom.appendChild(e)}return t.dom.style.position=this.position,t.dom.style.top=Au,this.container.appendChild(t.dom),t.mount&&t.mount(this.view),t}destroy(){var e,t;this.view.win.removeEventListener("resize",this.measureSoon);for(let t of this.manager.tooltipViews)t.dom.remove(),null===(e=t.destroy)||void 0===e||e.call(t);null===(t=this.intersectionObserver)||void 0===t||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let e=this.view.dom.getBoundingClientRect();return{editor:e,parent:this.parent?this.container.getBoundingClientRect():e,pos:this.manager.tooltips.map(((e,t)=>{let i=this.manager.tooltipViews[t];return i.getCoords?i.getCoords(e.pos):this.view.coordsAtPos(e.pos)})),size:this.manager.tooltipViews.map((({dom:e})=>e.getBoundingClientRect())),space:this.view.state.facet(yu).tooltipSpace(this.view)}}writeMeasure(e){let{editor:t,space:i}=e,s=[];for(let n=0;n<this.manager.tooltips.length;n++){let r=this.manager.tooltips[n],o=this.manager.tooltipViews[n],{dom:a}=o,l=e.pos[n],h=e.size[n];if(!l||l.bottom<=Math.max(t.top,i.top)||l.top>=Math.min(t.bottom,i.bottom)||l.right<Math.max(t.left,i.left)-.1||l.left>Math.min(t.right,i.right)+.1){a.style.top=Au;continue}let c=r.arrow?o.dom.querySelector(".cm-tooltip-arrow"):null,d=c?7:0,u=h.right-h.left,p=h.bottom-h.top,f=o.offset||Ou,m=this.view.textDirection==Fh.LTR,g=h.width>i.right-i.left?m?i.left:i.right-h.width:m?Math.min(l.left-(c?14:0)+f.x,i.right-u):Math.max(i.left,l.left-u+(c?14:0)-f.x),A=!!r.above;!r.strictSide&&(A?l.top-(h.bottom-h.top)-f.y<i.top:l.bottom+(h.bottom-h.top)+f.y>i.bottom)&&A==i.bottom-l.bottom>l.top-i.top&&(A=!A);let b=(A?l.top-i.top:i.bottom-l.bottom)-d;if(b<p&&!1!==o.resize){if(b<this.view.defaultLineHeight){a.style.top=Au;continue}a.style.height=(p=b)+"px"}else a.style.height&&(a.style.height="");let v=A?l.top-p-d-f.y:l.bottom+d+f.y,y=g+u;if(!0!==o.overlap)for(let e of s)e.left<y&&e.right>g&&e.top<v+p&&e.bottom>v&&(v=A?e.top-p-2-d:e.bottom+d+2);"absolute"==this.position?(a.style.top=v-e.parent.top+"px",a.style.left=g-e.parent.left+"px"):(a.style.top=v+"px",a.style.left=g+"px"),c&&(c.style.left=l.left+(m?f.x:-f.x)-(g+14-7)+"px"),!0!==o.overlap&&s.push({left:g,top:v,right:y,bottom:v+p}),a.classList.toggle("cm-tooltip-above",A),a.classList.toggle("cm-tooltip-below",!A),o.positioned&&o.positioned(e.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let e of this.manager.tooltipViews)e.dom.style.top=Au}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),xu=kd.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),Ou={x:0,y:0},Cu=Lo.define({enables:[wu,xu]}),Su=Lo.define();class Iu{constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new bu(e,Su,(e=>this.createHostedView(e)))}static create(e){return new Iu(e)}createHostedView(e){let t=e.create(this.view);return t.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(t.dom),this.mounted&&t.mount&&t.mount(this.view),t}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}}const Eu=Cu.compute([Su],(e=>{let t=e.facet(Su).filter((e=>e));return 0===t.length?null:{pos:Math.min(...t.map((e=>e.pos))),end:Math.max(...t.filter((e=>null!=e.end)).map((e=>e.end))),create:Iu.create,above:t[0].above,arrow:t.some((e=>e.arrow))}}));class ku{constructor(e,t,i,s,n){this.view=e,this.source=t,this.field=i,this.setHover=s,this.hoverTime=n,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout((()=>this.startHover()),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{lastMove:e}=this,t=this.view.contentDOM.contains(e.target)?this.view.posAtCoords(e):null;if(null==t)return;let i=this.view.coordsAtPos(t);if(null==i||e.y<i.top||e.y>i.bottom||e.x<i.left-this.view.defaultCharacterWidth||e.x>i.right+this.view.defaultCharacterWidth)return;let s=this.view.bidiSpans(this.view.state.doc.lineAt(t)).find((e=>e.from<=t&&e.to>=t)),n=s&&s.dir==Fh.RTL?-1:1,r=this.source(this.view,t,e.x<i.left?-n:n);if(null==r?void 0:r.then){let e=this.pending={pos:t};r.then((t=>{this.pending==e&&(this.pending=null,t&&this.view.dispatch({effects:this.setHover.of(t)}))}),(e=>Oh(this.view.state,e,"hover tooltip")))}else r&&this.view.dispatch({effects:this.setHover.of(r)})}mousemove(e){var t;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let i=this.active;if(i&&!Bu(this.lastMove.target)||this.pending){let{pos:s}=i||this.pending,n=null!==(t=null==i?void 0:i.end)&&void 0!==t?t:s;(s==n?this.view.posAtCoords(this.lastMove)==s:function(e,t,i,s,n,r){let o=document.createRange(),a=e.domAtPos(t),l=e.domAtPos(i);o.setEnd(l.node,l.offset),o.setStart(a.node,a.offset);let h=o.getClientRects();o.detach();for(let e=0;e<h.length;e++){let t=h[e];if(Math.max(t.top-n,n-t.bottom,t.left-s,s-t.right)<=r)return!0}return!1}(this.view,s,n,e.clientX,e.clientY,6))||(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&!Bu(e.relatedTarget)&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function Bu(e){for(let t=e;t;t=t.parentNode)if(1==t.nodeType&&t.classList.contains("cm-tooltip"))return!0;return!1}function Qu(e,t={}){let i=ua.define(),s=jo.define({create:()=>null,update(e,s){if(e&&(t.hideOnChange&&(s.docChanged||s.selection)||t.hideOn&&t.hideOn(s,e)))return null;if(e&&s.docChanged){let t=s.changes.mapPos(e.pos,-1,Oo.TrackDel);if(null==t)return null;let i=Object.assign(Object.create(null),e);i.pos=t,null!=e.end&&(i.end=s.changes.mapPos(e.end)),e=i}for(let t of s.effects)t.is(i)&&(e=t.value),t.is(Mu)&&(e=null);return e},provide:e=>Su.from(e)});return[s,Eh.define((n=>new ku(n,e,s,i,t.hoverTime||300))),Eu]}const Mu=ua.define();Mu.of(null);const Tu=Lo.define({combine(e){let t,i;for(let s of e)t=t||s.topContainer,i=i||s.bottomContainer;return{topContainer:t,bottomContainer:i}}}),Du=Eh.fromClass(class{constructor(e){this.input=e.state.facet(Lu),this.specs=this.input.filter((e=>e)),this.panels=this.specs.map((t=>t(e)));let t=e.state.facet(Tu);this.top=new Ru(e,!0,t.topContainer),this.bottom=new Ru(e,!1,t.bottomContainer),this.top.sync(this.panels.filter((e=>e.top))),this.bottom.sync(this.panels.filter((e=>!e.top)));for(let e of this.panels)e.dom.classList.add("cm-panel"),e.mount&&e.mount()}update(e){let t=e.state.facet(Tu);this.top.container!=t.topContainer&&(this.top.sync([]),this.top=new Ru(e.view,!0,t.topContainer)),this.bottom.container!=t.bottomContainer&&(this.bottom.sync([]),this.bottom=new Ru(e.view,!1,t.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let i=e.state.facet(Lu);if(i!=this.input){let t=i.filter((e=>e)),s=[],n=[],r=[],o=[];for(let i of t){let t,a=this.specs.indexOf(i);a<0?(t=i(e.view),o.push(t)):(t=this.panels[a]).update&&t.update(e),s.push(t),(t.top?n:r).push(t)}this.specs=t,this.panels=s,this.top.sync(n),this.bottom.sync(r);for(let e of o)e.dom.classList.add("cm-panel"),e.mount&&e.mount()}else for(let t of this.panels)t.update&&t.update(e)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:e=>kd.scrollMargins.of((t=>{let i=t.plugin(e);return i&&{top:i.top.scrollMargin(),bottom:i.bottom.scrollMargin()}}))});class Ru{constructor(e,t,i){this.view=e,this.top=t,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(0==this.panels.length)return void(this.dom&&(this.dom.remove(),this.dom=void 0));if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let e=this.container||this.view.dom;e.insertBefore(this.dom,this.top?e.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=Pu(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=Pu(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(this.container&&this.classes!=this.view.themeClasses){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function Pu(e){let t=e.nextSibling;return e.remove(),t}const Lu=Lo.define({enables:Du});class Fu extends Ia{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Fu.prototype.elementClass="",Fu.prototype.toDOM=void 0,Fu.prototype.mapMode=Oo.TrackBefore,Fu.prototype.startSide=Fu.prototype.endSide=-1,Fu.prototype.point=!0;const Uu=Lo.define(),zu={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Qa.empty,lineMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},Gu=Lo.define();function Nu(e){return[ju(),Gu.of(Object.assign(Object.assign({},zu),e))]}const Vu=Lo.define({combine:e=>e.some((e=>e))});function ju(e){return[Hu]}const Hu=Eh.fromClass(class{constructor(e){this.view=e,this.prevViewport=e.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=e.state.facet(Gu).map((t=>new Zu(e,t)));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!e.state.facet(Vu),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),e.scrollDOM.insertBefore(this.dom,e.contentDOM)}update(e){if(this.updateGutters(e)){let t=this.prevViewport,i=e.view.viewport,s=Math.min(t.to,i.to)-Math.max(t.from,i.from);this.syncGutters(s<.8*(i.to-i.from))}e.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(Vu)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=e.view.viewport}syncGutters(e){let t=this.dom.nextSibling;e&&this.dom.remove();let i=Qa.iter(this.view.state.facet(Uu),this.view.viewport.from),s=[],n=this.gutters.map((e=>new Wu(e,this.view.viewport,-this.view.documentPadding.top)));for(let e of this.view.viewportLineBlocks){let t;if(Array.isArray(e.type)){for(let i of e.type)if(i.type==th.Text){t=i;break}}else t=e.type==th.Text?e:void 0;if(t){s.length&&(s=[]),Xu(i,s,e.from);for(let e of n)e.line(this.view,t,s)}}for(let e of n)e.finish();e&&this.view.scrollDOM.insertBefore(this.dom,t)}updateGutters(e){let t=e.startState.facet(Gu),i=e.state.facet(Gu),s=e.docChanged||e.heightChanged||e.viewportChanged||!Qa.eq(e.startState.facet(Uu),e.state.facet(Uu),e.view.viewport.from,e.view.viewport.to);if(t==i)for(let t of this.gutters)t.update(e)&&(s=!0);else{s=!0;let n=[];for(let s of i){let i=t.indexOf(s);i<0?n.push(new Zu(this.view,s)):(this.gutters[i].update(e),n.push(this.gutters[i]))}for(let e of this.gutters)e.dom.remove(),n.indexOf(e)<0&&e.destroy();for(let e of n)this.dom.appendChild(e.dom);this.gutters=n}return s}destroy(){for(let e of this.gutters)e.destroy();this.dom.remove()}},{provide:e=>kd.scrollMargins.of((t=>{let i=t.plugin(e);return i&&0!=i.gutters.length&&i.fixed?t.textDirection==Fh.LTR?{left:i.dom.offsetWidth}:{right:i.dom.offsetWidth}:null}))});function qu(e){return Array.isArray(e)?e:[e]}function Xu(e,t,i){for(;e.value&&e.from<=i;)e.from==i&&t.push(e.value),e.next()}class Wu{constructor(e,t,i){this.gutter=e,this.height=i,this.localMarkers=[],this.i=0,this.cursor=Qa.iter(e.markers,t.from)}line(e,t,i){this.localMarkers.length&&(this.localMarkers=[]),Xu(this.cursor,this.localMarkers,t.from);let s=i.length?this.localMarkers.concat(i):this.localMarkers,n=this.gutter.config.lineMarker(e,t,s);n&&s.unshift(n);let r=this.gutter;if(0==s.length&&!r.config.renderEmptyElements)return;let o=t.top-this.height;if(this.i==r.elements.length){let i=new Yu(e,t.height,o,s);r.elements.push(i),r.dom.appendChild(i.dom)}else r.elements[this.i].update(e,t.height,o,s);this.height=t.bottom,this.i++}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class Zu{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in t.domEventHandlers)this.dom.addEventListener(i,(s=>{let n=e.lineBlockAtHeight(s.clientY-e.documentTop);t.domEventHandlers[i](e,n,s)&&s.preventDefault()}));this.markers=qu(t.markers(e)),t.initialSpacer&&(this.spacer=new Yu(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=qu(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let t=this.config.updateSpacer(this.spacer.markers[0],e);t!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[t])}let i=e.view.viewport;return!Qa.eq(this.markers,t,i.from,i.to)||!!this.config.lineMarkerChange&&this.config.lineMarkerChange(e)}destroy(){for(let e of this.elements)e.destroy()}}class Yu{constructor(e,t,i,s){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,i,s)}update(e,t,i,s){this.height!=t&&(this.dom.style.height=(this.height=t)+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),function(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++)if(!e[i].compare(t[i]))return!1;return!0}(this.markers,s)||this.setMarkers(e,s)}setMarkers(e,t){let i="cm-gutterElement",s=this.dom.firstChild;for(let n=0,r=0;;){let o=r,a=n<t.length?t[n++]:null,l=!1;if(a){let e=a.elementClass;e&&(i+=" "+e);for(let e=r;e<this.markers.length;e++)if(this.markers[e].compare(a)){o=e,l=!0;break}}else o=this.markers.length;for(;r<o;){let e=this.markers[r++];if(e.toDOM){e.destroy(s);let t=s.nextSibling;s.remove(),s=t}}if(!a)break;a.toDOM&&(l?s=s.nextSibling:this.dom.insertBefore(a.toDOM(e),s)),l&&r++}this.dom.className=i,this.markers=t}destroy(){this.setMarkers(null,[])}}const _u=Lo.define(),Ku=Lo.define({combine:e=>Sa(e,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let i=Object.assign({},e);for(let e in t){let s=i[e],n=t[e];i[e]=s?(e,t,i)=>s(e,t,i)||n(e,t,i):n}return i}})});class Ju extends Fu{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function $u(e,t){return e.state.facet(Ku).formatNumber(t,e.state)}const ep=Gu.compute([Ku],(e=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers:e=>e.state.facet(_u),lineMarker:(e,t,i)=>i.some((e=>e.toDOM))?null:new Ju($u(e,e.state.doc.lineAt(t.from).number)),lineMarkerChange:e=>e.startState.facet(Ku)!=e.state.facet(Ku),initialSpacer:e=>new Ju($u(e,ip(e.state.doc.lines))),updateSpacer(e,t){let i=$u(t.view,ip(t.view.state.doc.lines));return i==e.number?e:new Ju(i)},domEventHandlers:e.facet(Ku).domEventHandlers})));function tp(e={}){return[Ku.of(e),ju(),ep]}function ip(e){let t=9;for(;t<e;)t=10*t+9;return t}const sp=new class extends Fu{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},np=Uu.compute(["selection"],(e=>{let t=[],i=-1;for(let s of e.selection.ranges){let n=e.doc.lineAt(s.head).from;n>i&&(i=n,t.push(sp.range(n)))}return Qa.of(t)}));const rp=1024;let op=0;class ap{constructor(e,t){this.from=e,this.to=t}}class lp{constructor(e={}){this.id=op++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return"function"!=typeof e&&(e=cp.match(e)),t=>{let i=e(t);return void 0===i?null:[this,i]}}}lp.closedBy=new lp({deserialize:e=>e.split(" ")}),lp.openedBy=new lp({deserialize:e=>e.split(" ")}),lp.group=new lp({deserialize:e=>e.split(" ")}),lp.contextHash=new lp({perNode:!0}),lp.lookAhead=new lp({perNode:!0}),lp.mounted=new lp({perNode:!0});const hp=Object.create(null);class cp{constructor(e,t,i,s=0){this.name=e,this.props=t,this.id=i,this.flags=s}static define(e){let t=e.props&&e.props.length?Object.create(null):hp,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(null==e.name?8:0),s=new cp(e.name||"",t,e.id,i);if(e.props)for(let i of e.props)if(Array.isArray(i)||(i=i(s)),i){if(i[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[i[0].id]=i[1]}return s}prop(e){return this.props[e.id]}get isTop(){return(1&this.flags)>0}get isSkipped(){return(2&this.flags)>0}get isError(){return(4&this.flags)>0}get isAnonymous(){return(8&this.flags)>0}is(e){if("string"==typeof e){if(this.name==e)return!0;let t=this.prop(lp.group);return!!t&&t.indexOf(e)>-1}return this.id==e}static match(e){let t=Object.create(null);for(let i in e)for(let s of i.split(" "))t[s]=e[i];return e=>{for(let i=e.prop(lp.group),s=-1;s<(i?i.length:0);s++){let n=t[s<0?e.name:i[s]];if(n)return n}}}}cp.none=new cp("",Object.create(null),0,8);class dp{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let i of this.types){let s=null;for(let t of e){let e=t(i);e&&(s||(s=Object.assign({},i.props)),s[e[0].id]=e[1])}t.push(s?new cp(i.name,s,i.id,i.flags):i)}return new dp(t)}}const up=new WeakMap,pp=new WeakMap;var fp;!function(e){e[e.ExcludeBuffers=1]="ExcludeBuffers",e[e.IncludeAnonymous=2]="IncludeAnonymous",e[e.IgnoreMounts=4]="IgnoreMounts",e[e.IgnoreOverlays=8]="IgnoreOverlays"}(fp||(fp={}));class mp{constructor(e,t,i,s,n){if(this.type=e,this.children=t,this.positions=i,this.length=s,this.props=null,n&&n.length){this.props=Object.create(null);for(let[e,t]of n)this.props["number"==typeof e?e:e.id]=t}}toString(){let e=this.prop(lp.mounted);if(e&&!e.overlay)return e.tree.toString();let t="";for(let e of this.children){let i=e.toString();i&&(t&&(t+=","),t+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new Ip(this.topNode,e)}cursorAt(e,t=0,i=0){let s=up.get(this)||this.topNode,n=new Ip(s);return n.moveTo(e,t),up.set(this,n._tree),n}get topNode(){return new wp(this,0,0,null)}resolve(e,t=0){let i=yp(up.get(this)||this.topNode,e,t,!1);return up.set(this,i),i}resolveInner(e,t=0){let i=yp(pp.get(this)||this.topNode,e,t,!0);return pp.set(this,i),i}iterate(e){let{enter:t,leave:i,from:s=0,to:n=this.length}=e;for(let r=this.cursor((e.mode||0)|fp.IncludeAnonymous);;){let e=!1;if(r.from<=n&&r.to>=s&&(r.type.isAnonymous||!1!==t(r))){if(r.firstChild())continue;e=!0}for(;e&&i&&!r.type.isAnonymous&&i(r),!r.nextSibling();){if(!r.parent())return;e=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:Qp(cp.none,this.children,this.positions,0,this.children.length,0,this.length,((e,t,i)=>new mp(this.type,e,t,i,this.propValues)),e.makeTree||((e,t,i)=>new mp(cp.none,e,t,i)))}static build(e){return function(e){var t;let{buffer:i,nodeSet:s,maxBufferLength:n=rp,reused:r=[],minRepeatType:o=s.types.length}=e,a=Array.isArray(i)?new gp(i,i.length):i,l=s.types,h=0,c=0;function d(e,t,i,m,g){let{id:A,start:b,end:v,size:y}=a,w=c;for(;y<0;){if(a.next(),-1==y){let t=r[A];return i.push(t),void m.push(b-e)}if(-3==y)return void(h=A);if(-4==y)return void(c=A);throw new RangeError(`Unrecognized record size: ${y}`)}let x,O,C=l[A],S=b-e;if(v-b<=n&&(O=function(e,t){let i=a.fork(),s=0,r=0,l=0,h=i.end-n,c={size:0,start:0,skip:0};e:for(let n=i.pos-e;i.pos>n;){let e=i.size;if(i.id==t&&e>=0){c.size=s,c.start=r,c.skip=l,l+=4,s+=4,i.next();continue}let a=i.pos-e;if(e<0||a<n||i.start<h)break;let d=i.id>=o?4:0,u=i.start;for(i.next();i.pos>a;){if(i.size<0){if(-3!=i.size)break e;d+=4}else i.id>=o&&(d+=4);i.next()}r=u,s+=e,l+=d}return(t<0||s==e)&&(c.size=s,c.start=r,c.skip=l),c.size>4?c:void 0}(a.pos-t,g))){let t=new Uint16Array(O.size-O.skip),i=a.pos-O.size,n=t.length;for(;a.pos>i;)n=f(O.start,t,n);x=new Ap(t,v-O.start,s),S=O.start-e}else{let e=a.pos-y;a.next();let t=[],i=[],s=A>=o?A:-1,r=0,l=v;for(;a.pos>e;)s>=0&&a.id==s&&a.size>=0?(a.end<=l-n&&(u(t,i,b,r,a.end,l,s,w),r=t.length,l=a.end),a.next()):d(b,e,t,i,s);if(s>=0&&r>0&&r<t.length&&u(t,i,b,r,b,l,s,w),t.reverse(),i.reverse(),s>-1&&r>0){let e=function(e){return(t,i,s)=>{let n,r,o=0,a=t.length-1;if(a>=0&&(n=t[a])instanceof mp){if(!a&&n.type==e&&n.length==s)return n;(r=n.prop(lp.lookAhead))&&(o=i[a]+n.length+r)}return p(e,t,i,s,o)}}(C);x=Qp(C,t,i,0,t.length,0,v-b,e,e)}else x=p(C,t,i,v-b,w-v)}i.push(x),m.push(S)}function u(e,t,i,n,r,o,a,l){let h=[],c=[];for(;e.length>n;)h.push(e.pop()),c.push(t.pop()+i-r);e.push(p(s.types[a],h,c,o-r,l-o)),t.push(r-i)}function p(e,t,i,s,n=0,r){if(h){let e=[lp.contextHash,h];r=r?[e].concat(r):[e]}if(n>25){let e=[lp.lookAhead,n];r=r?[e].concat(r):[e]}return new mp(e,t,i,s,r)}function f(e,t,i){let{id:s,start:n,end:r,size:l}=a;if(a.next(),l>=0&&s<o){let o=i;if(l>4){let s=a.pos-(l-4);for(;a.pos>s;)i=f(e,t,i)}t[--i]=o,t[--i]=r-e,t[--i]=n-e,t[--i]=s}else-3==l?h=s:-4==l&&(c=s);return i}let m=[],g=[];for(;a.pos>0;)d(e.start||0,e.bufferStart||0,m,g,-1);let A=null!==(t=e.length)&&void 0!==t?t:m.length?g[0]+m[0].length:0;return new mp(l[e.topID],m.reverse(),g.reverse(),A)}(e)}}mp.empty=new mp(cp.none,[],[],0);class gp{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new gp(this.buffer,this.index)}}class Ap{constructor(e,t,i){this.buffer=e,this.length=t,this.set=i}get type(){return cp.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],i=this.buffer[e+3],s=this.set.types[t],n=s.name;if(/\W/.test(n)&&!s.isError&&(n=JSON.stringify(n)),i==(e+=4))return n;let r=[];for(;e<i;)r.push(this.childString(e)),e=this.buffer[e+3];return n+"("+r.join(",")+")"}findChild(e,t,i,s,n){let{buffer:r}=this,o=-1;for(let a=e;a!=t&&!(bp(n,s,r[a+1],r[a+2])&&(o=a,i>0));a=r[a+3]);return o}slice(e,t,i){let s=this.buffer,n=new Uint16Array(t-e),r=0;for(let o=e,a=0;o<t;){n[a++]=s[o++],n[a++]=s[o++]-i;let t=n[a++]=s[o++]-i;n[a++]=s[o++]-e,r=Math.max(r,t)}return new Ap(n,r,this.set)}}function bp(e,t,i,s){switch(e){case-2:return i<t;case-1:return s>=t&&i<t;case 0:return i<t&&s>t;case 1:return i<=t&&s>t;case 2:return s>t;case 4:return!0}}function vp(e,t){let i=e.childBefore(t);for(;i;){let t=i.lastChild;if(!t||t.to!=i.to)break;t.type.isError&&t.from==t.to?(e=i,i=t.prevSibling):i=t}return e}function yp(e,t,i,s){for(var n;e.from==e.to||(i<1?e.from>=t:e.from>t)||(i>-1?e.to<=t:e.to<t);){let t=!s&&e instanceof wp&&e.index<0?null:e.parent;if(!t)return e;e=t}let r=s?0:fp.IgnoreOverlays;if(s)for(let s=e,o=s.parent;o;o=(s=o).parent)s instanceof wp&&s.index<0&&(null===(n=o.enter(t,i,r))||void 0===n?void 0:n.from)!=s.from&&(e=o);for(;;){let s=e.enter(t,i,r);if(!s)return e;e=s}}class wp{constructor(e,t,i,s){this._tree=e,this.from=t,this.index=i,this._parent=s}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,i,s,n=0){for(let r=this;;){for(let{children:o,positions:a}=r._tree,l=t>0?o.length:-1;e!=l;e+=t){let l=o[e],h=a[e]+r.from;if(bp(s,i,h,h+l.length))if(l instanceof Ap){if(n&fp.ExcludeBuffers)continue;let o=l.findChild(0,l.buffer.length,t,i-h,s);if(o>-1)return new Sp(new Cp(r,l,e,h),null,o)}else if(n&fp.IncludeAnonymous||!l.type.isAnonymous||Ep(l)){let o;if(!(n&fp.IgnoreMounts)&&l.props&&(o=l.prop(lp.mounted))&&!o.overlay)return new wp(o.tree,h,e,r);let a=new wp(l,h,e,r);return n&fp.IncludeAnonymous||!a.type.isAnonymous?a:a.nextChild(t<0?l.children.length-1:0,t,i,s)}}if(n&fp.IncludeAnonymous||!r.type.isAnonymous)return null;if(e=r.index>=0?r.index+t:t<0?-1:r._parent._tree.children.length,!(r=r._parent))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,i=0){let s;if(!(i&fp.IgnoreOverlays)&&(s=this._tree.prop(lp.mounted))&&s.overlay){let i=e-this.from;for(let{from:e,to:n}of s.overlay)if((t>0?e<=i:e<i)&&(t<0?n>=i:n>i))return new wp(s.tree,s.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new Ip(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,t=0){return yp(this,e,t,!1)}resolveInner(e,t=0){return yp(this,e,t,!0)}enterUnfinishedNodesBefore(e){return vp(this,e)}getChild(e,t=null,i=null){let s=xp(this,e,t,i);return s.length?s[0]:null}getChildren(e,t=null,i=null){return xp(this,e,t,i)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return Op(this,e)}}function xp(e,t,i,s){let n=e.cursor(),r=[];if(!n.firstChild())return r;if(null!=i)for(;!n.type.is(i);)if(!n.nextSibling())return r;for(;;){if(null!=s&&n.type.is(s))return r;if(n.type.is(t)&&r.push(n.node),!n.nextSibling())return null==s?r:[]}}function Op(e,t,i=t.length-1){for(let s=e.parent;i>=0;s=s.parent){if(!s)return!1;if(!s.type.isAnonymous){if(t[i]&&t[i]!=s.name)return!1;i--}}return!0}class Cp{constructor(e,t,i,s){this.parent=e,this.buffer=t,this.index=i,this.start=s}}class Sp{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,i){this.context=e,this._parent=t,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,t,i){let{buffer:s}=this.context,n=s.findChild(this.index+4,s.buffer[this.index+3],e,t-this.context.start,i);return n<0?null:new Sp(this.context,this,n)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,i=0){if(i&fp.ExcludeBuffers)return null;let{buffer:s}=this.context,n=s.findChild(this.index+4,s.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return n<0?null:new Sp(this.context,this,n)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Sp(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new Sp(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}cursor(e=0){return new Ip(this,e)}get tree(){return null}toTree(){let e=[],t=[],{buffer:i}=this.context,s=this.index+4,n=i.buffer[this.index+3];if(n>s){let r=i.buffer[this.index+1];e.push(i.slice(s,n,r)),t.push(0)}return new mp(this.type,e,t,this.to-this.from)}resolve(e,t=0){return yp(this,e,t,!1)}resolveInner(e,t=0){return yp(this,e,t,!0)}enterUnfinishedNodesBefore(e){return vp(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,t=null,i=null){let s=xp(this,e,t,i);return s.length?s[0]:null}getChildren(e,t=null,i=null){return xp(this,e,t,i)}get node(){return this}matchContext(e){return Op(this,e)}}class Ip{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof wp)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let t=e._parent;t;t=t._parent)this.stack.unshift(t.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return!!e&&(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0)}yieldBuf(e,t){this.index=e;let{start:i,buffer:s}=this.buffer;return this.type=t||s.set.types[s.buffer[e]],this.from=i+s.buffer[e+1],this.to=i+s.buffer[e+2],!0}yield(e){return!!e&&(e instanceof wp?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)))}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,i,this.mode));let{buffer:s}=this.buffer,n=s.findChild(this.index+4,s.buffer[this.index+3],e,t-this.buffer.start,i);return!(n<0)&&(this.stack.push(this.index),this.yieldBuf(n))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,i=this.mode){return this.buffer?!(i&fp.ExcludeBuffers)&&this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&fp.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&fp.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return!!this._tree._parent&&this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode));let{buffer:t}=this.buffer,i=this.stack.length-1;if(e<0){let e=i<0?0:this.stack[i]+4;if(this.index!=e)return this.yieldBuf(t.findChild(e,this.index,-1,0,4))}else{let e=t.buffer[this.index+3];if(e<(i<0?t.buffer.length:t.buffer[this.stack[i]+3]))return this.yieldBuf(e)}return i<0&&this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode))}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,i,{buffer:s}=this;if(s){if(e>0){if(this.index<s.buffer.buffer.length)return!1}else for(let e=0;e<this.index;e++)if(s.buffer.buffer[e+3]<this.index)return!1;({index:t,parent:i}=s)}else({index:t,_parent:i}=this._tree);for(;i;({index:t,_parent:i}=i))if(t>-1)for(let s=t+e,n=e<0?-1:i._tree.children.length;s!=n;s+=e){let e=i._tree.children[s];if(this.mode&fp.IncludeAnonymous||e instanceof Ap||!e.type.isAnonymous||Ep(e))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,i=0;if(e&&e.context==this.buffer)e:for(let s=this.index,n=this.stack.length;n>=0;){for(let r=e;r;r=r._parent)if(r.index==s){if(s==this.index)return r;t=r,i=n+1;break e}s=this.stack[--n]}for(let e=i;e<this.stack.length;e++)t=new Sp(this.buffer,t,this.stack[e]);return this.bufferNode=new Sp(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let i=0;;){let s=!1;if(this.type.isAnonymous||!1!==e(this)){if(this.firstChild()){i++;continue}this.type.isAnonymous||(s=!0)}for(;s&&t&&t(this),s=this.type.isAnonymous,!this.nextSibling();){if(!i)return;this.parent(),i--,s=!0}}}matchContext(e){if(!this.buffer)return Op(this.node,e);let{buffer:t}=this.buffer,{types:i}=t.set;for(let s=e.length-1,n=this.stack.length-1;s>=0;n--){if(n<0)return Op(this.node,e,s);let r=i[t.buffer[this.stack[n]]];if(!r.isAnonymous){if(e[s]&&e[s]!=r.name)return!1;s--}}return!0}}function Ep(e){return e.children.some((e=>e instanceof Ap||!e.type.isAnonymous||Ep(e)))}const kp=new WeakMap;function Bp(e,t){if(!e.isAnonymous||t instanceof Ap||t.type!=e)return 1;let i=kp.get(t);if(null==i){i=1;for(let s of t.children){if(s.type!=e||!(s instanceof mp)){i=1;break}i+=Bp(e,s)}kp.set(t,i)}return i}function Qp(e,t,i,s,n,r,o,a,l){let h=0;for(let i=s;i<n;i++)h+=Bp(e,t[i]);let c=Math.ceil(1.5*h/8),d=[],u=[];return function t(i,s,n,o,a){for(let h=n;h<o;){let n=h,p=s[h],f=Bp(e,i[h]);for(h++;h<o;h++){let t=Bp(e,i[h]);if(f+t>=c)break;f+=t}if(h==n+1){if(f>c){let e=i[n];t(e.children,e.positions,0,e.children.length,s[n]+a);continue}d.push(i[n])}else{let t=s[h-1]+i[h-1].length-p;d.push(Qp(e,i,s,n,h,p,t,null,l))}u.push(p+a-r)}}(t,i,s,n,0),(a||l)(d,u,o)}class Mp{constructor(e,t,i,s,n=!1,r=!1){this.from=e,this.to=t,this.tree=i,this.offset=s,this.open=(n?1:0)|(r?2:0)}get openStart(){return(1&this.open)>0}get openEnd(){return(2&this.open)>0}static addTree(e,t=[],i=!1){let s=[new Mp(0,e.length,e,0,!1,i)];for(let i of t)i.to>e.length&&s.push(i);return s}static applyChanges(e,t,i=128){if(!t.length)return e;let s=[],n=1,r=e.length?e[0]:null;for(let o=0,a=0,l=0;;o++){let h=o<t.length?t[o]:null,c=h?h.fromA:1e9;if(c-a>=i)for(;r&&r.from<c;){let t=r;if(a>=t.from||c<=t.to||l){let e=Math.max(t.from,a)-l,i=Math.min(t.to,c)-l;t=e>=i?null:new Mp(e,i,t.tree,t.offset+l,o>0,!!h)}if(t&&s.push(t),r.to>c)break;r=n<e.length?e[n++]:null}if(!h)break;a=h.toA,l=h.toA-h.toB}return s}}class Tp{startParse(e,t,i){return"string"==typeof e&&(e=new Dp(e)),i=i?i.length?i.map((e=>new ap(e.from,e.to))):[new ap(0,0)]:[new ap(0,e.length)],this.createParse(e,t||[],i)}parse(e,t,i){let s=this.startParse(e,t,i);for(;;){let e=s.advance();if(e)return e}}}class Dp{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new lp({perNode:!0});let Rp=0;class Pp{constructor(e,t,i){this.set=e,this.base=t,this.modified=i,this.id=Rp++}static define(e){if(null==e?void 0:e.base)throw new Error("Can not derive from a modified tag");let t=new Pp([],null,[]);if(t.set.push(t),e)for(let i of e.set)t.set.push(i);return t}static defineModifier(){let e=new Fp;return t=>t.modified.indexOf(e)>-1?t:Fp.get(t.base||t,t.modified.concat(e).sort(((e,t)=>e.id-t.id)))}}let Lp=0;class Fp{constructor(){this.instances=[],this.id=Lp++}static get(e,t){if(!t.length)return e;let i=t[0].instances.find((i=>i.base==e&&function(e,t){return e.length==t.length&&e.every(((e,i)=>e==t[i]))}(t,i.modified)));if(i)return i;let s=[],n=new Pp(s,e,t);for(let e of t)e.instances.push(n);let r=function(e){let t=[[]];for(let i=0;i<e.length;i++)for(let s=0,n=t.length;s<n;s++)t.push(t[s].concat(e[i]));return t.sort(((e,t)=>t.length-e.length))}(t);for(let t of e.set)if(!t.modified.length)for(let e of r)s.push(Fp.get(t,e));return n}}function Up(e){let t=Object.create(null);for(let i in e){let s=e[i];Array.isArray(s)||(s=[s]);for(let e of i.split(" "))if(e){let i=[],n=2,r=e;for(let t=0;;){if("..."==r&&t>0&&t+3==e.length){n=1;break}let s=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(r);if(!s)throw new RangeError("Invalid path: "+e);if(i.push("*"==s[0]?"":'"'==s[0][0]?JSON.parse(s[0]):s[0]),(t+=s[0].length)==e.length)break;let o=e[t++];if(t==e.length&&"!"==o){n=0;break}if("/"!=o)throw new RangeError("Invalid path: "+e);r=e.slice(t)}let o=i.length-1,a=i[o];if(!a)throw new RangeError("Invalid path: "+e);let l=new Gp(s,n,o>0?i.slice(0,o):null);t[a]=l.sort(t[a])}}return zp.add(t)}const zp=new lp;class Gp{constructor(e,t,i,s){this.tags=e,this.mode=t,this.context=i,this.next=s}get opaque(){return 0==this.mode}get inherit(){return 1==this.mode}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}function Np(e,t){let i=Object.create(null);for(let t of e)if(Array.isArray(t.tag))for(let e of t.tag)i[e.id]=t.class;else i[t.tag.id]=t.class;let{scope:s,all:n=null}=t||{};return{style:e=>{let t=n;for(let s of e)for(let e of s.set){let s=i[e.id];if(s){t=t?t+" "+s:s;break}}return t},scope:s}}function Vp(e,t,i,s=0,n=e.length){let r=new jp(s,Array.isArray(t)?t:[t],i);r.highlightRange(e.cursor(),s,n,"",r.highlighters),r.flush(n)}Gp.empty=new Gp([],2,null);class jp{constructor(e,t,i){this.at=e,this.highlighters=t,this.span=i,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,i,s,n){let{type:r,from:o,to:a}=e;if(o>=i||a<=t)return;r.isTop&&(n=this.highlighters.filter((e=>!e.scope||e.scope(r))));let l=s,h=function(e){let t=e.type.prop(zp);for(;t&&t.context&&!e.matchContext(t.context);)t=t.next;return t||null}(e)||Gp.empty,c=function(e,t){let i=null;for(let s of e){let e=s.style(t);e&&(i=i?i+" "+e:e)}return i}(n,h.tags);if(c&&(l&&(l+=" "),l+=c,1==h.mode&&(s+=(s?" ":"")+c)),this.startSpan(e.from,l),h.opaque)return;let d=e.tree&&e.tree.prop(lp.mounted);if(d&&d.overlay){let r=e.node.enter(d.overlay[0].from+o,1),h=this.highlighters.filter((e=>!e.scope||e.scope(d.tree.type))),c=e.firstChild();for(let u=0,p=o;;u++){let f=u<d.overlay.length?d.overlay[u]:null,m=f?f.from+o:a,g=Math.max(t,p),A=Math.min(i,m);if(g<A&&c)for(;e.from<A&&(this.highlightRange(e,g,A,s,n),this.startSpan(Math.min(A,e.to),l),!(e.to>=m)&&e.nextSibling()););if(!f||m>i)break;(p=f.to+o)>t&&(this.highlightRange(r.cursor(),Math.max(t,f.from+o),Math.min(i,p),s,h),this.startSpan(p,l))}c&&e.parent()}else if(e.firstChild()){do{if(!(e.to<=t)){if(e.from>=i)break;this.highlightRange(e,t,i,s,n),this.startSpan(Math.min(i,e.to),l)}}while(e.nextSibling());e.parent()}}}const Hp=Pp.define,qp=Hp(),Xp=Hp(),Wp=Hp(Xp),Zp=Hp(Xp),Yp=Hp(),_p=Hp(Yp),Kp=Hp(Yp),Jp=Hp(),$p=Hp(Jp),ef=Hp(),tf=Hp(),sf=Hp(),nf=Hp(sf),rf=Hp(),of={comment:qp,lineComment:Hp(qp),blockComment:Hp(qp),docComment:Hp(qp),name:Xp,variableName:Hp(Xp),typeName:Wp,tagName:Hp(Wp),propertyName:Zp,attributeName:Hp(Zp),className:Hp(Xp),labelName:Hp(Xp),namespace:Hp(Xp),macroName:Hp(Xp),literal:Yp,string:_p,docString:Hp(_p),character:Hp(_p),attributeValue:Hp(_p),number:Kp,integer:Hp(Kp),float:Hp(Kp),bool:Hp(Yp),regexp:Hp(Yp),escape:Hp(Yp),color:Hp(Yp),url:Hp(Yp),keyword:ef,self:Hp(ef),null:Hp(ef),atom:Hp(ef),unit:Hp(ef),modifier:Hp(ef),operatorKeyword:Hp(ef),controlKeyword:Hp(ef),definitionKeyword:Hp(ef),moduleKeyword:Hp(ef),operator:tf,derefOperator:Hp(tf),arithmeticOperator:Hp(tf),logicOperator:Hp(tf),bitwiseOperator:Hp(tf),compareOperator:Hp(tf),updateOperator:Hp(tf),definitionOperator:Hp(tf),typeOperator:Hp(tf),controlOperator:Hp(tf),punctuation:sf,separator:Hp(sf),bracket:nf,angleBracket:Hp(nf),squareBracket:Hp(nf),paren:Hp(nf),brace:Hp(nf),content:Jp,heading:$p,heading1:Hp($p),heading2:Hp($p),heading3:Hp($p),heading4:Hp($p),heading5:Hp($p),heading6:Hp($p),contentSeparator:Hp(Jp),list:Hp(Jp),quote:Hp(Jp),emphasis:Hp(Jp),strong:Hp(Jp),link:Hp(Jp),monospace:Hp(Jp),strikethrough:Hp(Jp),inserted:Hp(),deleted:Hp(),changed:Hp(),invalid:Hp(),meta:rf,documentMeta:Hp(rf),annotation:Hp(rf),processingInstruction:Hp(rf),definition:Pp.defineModifier(),constant:Pp.defineModifier(),function:Pp.defineModifier(),standard:Pp.defineModifier(),local:Pp.defineModifier(),special:Pp.defineModifier()};var af;Np([{tag:of.link,class:"tok-link"},{tag:of.heading,class:"tok-heading"},{tag:of.emphasis,class:"tok-emphasis"},{tag:of.strong,class:"tok-strong"},{tag:of.keyword,class:"tok-keyword"},{tag:of.atom,class:"tok-atom"},{tag:of.bool,class:"tok-bool"},{tag:of.url,class:"tok-url"},{tag:of.labelName,class:"tok-labelName"},{tag:of.inserted,class:"tok-inserted"},{tag:of.deleted,class:"tok-deleted"},{tag:of.literal,class:"tok-literal"},{tag:of.string,class:"tok-string"},{tag:of.number,class:"tok-number"},{tag:[of.regexp,of.escape,of.special(of.string)],class:"tok-string2"},{tag:of.variableName,class:"tok-variableName"},{tag:of.local(of.variableName),class:"tok-variableName tok-local"},{tag:of.definition(of.variableName),class:"tok-variableName tok-definition"},{tag:of.special(of.variableName),class:"tok-variableName2"},{tag:of.definition(of.propertyName),class:"tok-propertyName tok-definition"},{tag:of.typeName,class:"tok-typeName"},{tag:of.namespace,class:"tok-namespace"},{tag:of.className,class:"tok-className"},{tag:of.macroName,class:"tok-macroName"},{tag:of.propertyName,class:"tok-propertyName"},{tag:of.operator,class:"tok-operator"},{tag:of.comment,class:"tok-comment"},{tag:of.meta,class:"tok-meta"},{tag:of.invalid,class:"tok-invalid"},{tag:of.punctuation,class:"tok-punctuation"}]);const lf=new lp;class hf{constructor(e,t,i=[],s=""){this.data=e,this.name=s,Ca.prototype.hasOwnProperty("tree")||Object.defineProperty(Ca.prototype,"tree",{get(){return uf(this)}}),this.parser=t,this.extension=[wf.of(this),Ca.languageData.of(((e,t,i)=>e.facet(cf(e,t,i))))].concat(i)}isActiveAt(e,t,i=-1){return cf(e,t,i)==this.data}findRegions(e){let t=e.facet(wf);if((null==t?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let i=[],s=(e,t)=>{if(e.prop(lf)==this.data)return void i.push({from:t,to:t+e.length});let n=e.prop(lp.mounted);if(n){if(n.tree.prop(lf)==this.data){if(n.overlay)for(let e of n.overlay)i.push({from:e.from+t,to:e.to+t});else i.push({from:t,to:t+e.length});return}if(n.overlay){let e=i.length;if(s(n.tree,n.overlay[0].from+t),i.length>e)return}}for(let i=0;i<e.children.length;i++){let n=e.children[i];n instanceof mp&&s(n,e.positions[i]+t)}};return s(uf(e),0),i}get allowsNesting(){return!0}}function cf(e,t,i){let s=e.facet(wf);if(!s)return null;let n=s.data;if(s.allowsNesting)for(let s=uf(e).topNode;s;s=s.enter(t,i,fp.ExcludeBuffers))n=s.type.prop(lf)||n;return n}hf.setState=ua.define();class df extends hf{constructor(e,t,i){super(e,t,[],i),this.parser=t}static define(e){let t=function(e){return Lo.define({combine:e?t=>t.concat(e):void 0})}(e.languageData);return new df(t,e.parser.configure({props:[lf.add((e=>e.isTop?t:void 0))]}),e.name)}configure(e,t){return new df(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function uf(e){let t=e.field(hf.state,!1);return t?t.tree:mp.empty}class pf{constructor(e,t=e.length){this.doc=e,this.length=t,this.cursorPos=0,this.string="",this.cursor=e.iter()}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let i=this.cursorPos-this.string.length;return e<i||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-i,t-i)}}let ff=null;class mf{constructor(e,t,i=[],s,n,r,o,a){this.parser=e,this.state=t,this.fragments=i,this.tree=s,this.treeLen=n,this.viewport=r,this.skipped=o,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,t,i){return new mf(e,t,[],mp.empty,0,i,[],null)}startParse(){return this.parser.startParse(new pf(this.state.doc),this.fragments)}work(e,t){return null!=t&&t>=this.state.doc.length&&(t=void 0),this.tree!=mp.empty&&this.isDone(null!=t?t:this.state.doc.length)?(this.takeTree(),!0):this.withContext((()=>{var i;if("number"==typeof e){let t=Date.now()+e;e=()=>Date.now()>t}for(this.parse||(this.parse=this.startParse()),null!=t&&(null==this.parse.stoppedAt||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let s=this.parse.advance();if(s){if(this.fragments=this.withoutTempSkipped(Mp.addTree(s,this.fragments,null!=this.parse.stoppedAt)),this.treeLen=null!==(i=this.parse.stoppedAt)&&void 0!==i?i:this.state.doc.length,this.tree=s,this.parse=null,!(this.treeLen<(null!=t?t:this.state.doc.length)))return!0;this.parse=this.startParse()}if(e())return!1}}))}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((null==this.parse.stoppedAt||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext((()=>{for(;!(t=this.parse.advance()););})),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(Mp.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=ff;ff=this;try{return e()}finally{ff=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=gf(e,t.from,t.to);return e}changes(e,t){let{fragments:i,tree:s,treeLen:n,viewport:r,skipped:o}=this;if(this.takeTree(),!e.empty){let t=[];if(e.iterChangedRanges(((e,i,s,n)=>t.push({fromA:e,toA:i,fromB:s,toB:n}))),i=Mp.applyChanges(i,t),s=mp.empty,n=0,r={from:e.mapPos(r.from,-1),to:e.mapPos(r.to,1)},this.skipped.length){o=[];for(let t of this.skipped){let i=e.mapPos(t.from,1),s=e.mapPos(t.to,-1);i<s&&o.push({from:i,to:s})}}}return new mf(this.parser,t,i,s,n,r,o,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let t=0;t<this.skipped.length;t++){let{from:i,to:s}=this.skipped[t];i<e.to&&s>e.from&&(this.fragments=gf(this.fragments,i,s),this.skipped.splice(t--,1))}return!(this.skipped.length>=t||(this.reset(),0))}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends Tp{createParse(t,i,s){let n=s[0].from,r=s[s.length-1].to;return{parsedPos:n,advance(){let t=ff;if(t){for(let e of s)t.tempSkipped.push(e);e&&(t.scheduleOn=t.scheduleOn?Promise.all([t.scheduleOn,e]):e)}return this.parsedPos=r,new mp(cp.none,[],[],r-n)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&0==t[0].from&&t[0].to>=e}static get(){return ff}}function gf(e,t,i){return Mp.applyChanges(e,[{fromA:t,toA:i,fromB:t,toB:i}])}class Af{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,i)||t.takeTree(),new Af(t)}static init(e){let t=Math.min(3e3,e.doc.length),i=mf.create(e.facet(wf).parser,e,{from:0,to:t});return i.work(20,t)||i.takeTree(),new Af(i)}}hf.state=jo.define({create:Af.init,update(e,t){for(let e of t.effects)if(e.is(hf.setState))return e.value;return t.startState.facet(wf)!=t.state.facet(wf)?Af.init(t.state):e.apply(t)}});let bf=e=>{let t=setTimeout((()=>e()),500);return()=>clearTimeout(t)};"undefined"!=typeof requestIdleCallback&&(bf=e=>{let t=-1,i=setTimeout((()=>{t=requestIdleCallback(e,{timeout:400})}),100);return()=>t<0?clearTimeout(i):cancelIdleCallback(t)});const vf="undefined"!=typeof navigator&&(null===(af=navigator.scheduling)||void 0===af?void 0:af.isInputPending)?()=>navigator.scheduling.isInputPending():null,yf=Eh.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(hf.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),e.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(hf.state);t.tree==t.context.tree&&t.context.isDone(e.doc.length)||(this.working=bf(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:s}}=this.view,n=i.field(hf.state);if(n.tree==n.context.tree&&n.context.isDone(s+1e5))return;let r=Date.now()+Math.min(this.chunkBudget,100,e&&!vf?Math.max(25,e.timeRemaining()-5):1e9),o=n.context.treeLen<s&&i.doc.length>s+1e3,a=n.context.work((()=>vf&&vf()||Date.now()>r),s+(o?0:1e5));this.chunkBudget-=Date.now()-t,(a||this.chunkBudget<=0)&&(n.context.takeTree(),this.view.dispatch({effects:hf.setState.of(new Af(n.context))})),this.chunkBudget>0&&(!a||o)&&this.scheduleWork(),this.checkAsyncSchedule(n.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then((()=>this.scheduleWork())).catch((e=>Oh(this.view.state,e))).then((()=>this.workScheduled--)),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),wf=Lo.define({combine:e=>e.length?e[0]:null,enables:e=>[hf.state,yf,kd.contentAttributes.compute([e],(t=>{let i=t.facet(e);return i&&i.name?{"data-language":i.name}:{}}))]}),xf=Lo.define(),Of=Lo.define({combine:e=>{if(!e.length)return"  ";if(!/^(?: +|\t+)$/.test(e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(e[0]));return e[0]}});function Cf(e){let t=e.facet(Of);return 9==t.charCodeAt(0)?e.tabSize*t.length:t.length}function Sf(e,t){let i="",s=e.tabSize;if(9==e.facet(Of).charCodeAt(0))for(;t>=s;)i+="\t",t-=s;for(let e=0;e<t;e++)i+=" ";return i}function If(e,t){e instanceof Ca&&(e=new Ef(e));for(let i of e.state.facet(xf)){let s=i(e,t);if(void 0!==s)return s}let i=uf(e.state);return i?function(e,t,i){return Qf(t.resolveInner(i).enterUnfinishedNodesBefore(i),i,e)}(e,i,t):null}class Ef{constructor(e,t={}){this.state=e,this.options=t,this.unit=Cf(e)}lineAt(e,t=1){let i=this.state.doc.lineAt(e),{simulateBreak:s,simulateDoubleBreak:n}=this.options;return null!=s&&s>=i.from&&s<=i.to?n&&s==e?{text:"",from:e}:(t<0?s<e:s<=e)?{text:i.text.slice(s-i.from),from:s}:{text:i.text.slice(0,s-i.from),from:i.from}:i}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:s}=this.lineAt(e,t);return i.slice(e-s,Math.min(i.length,e+100-s))}column(e,t=1){let{text:i,from:s}=this.lineAt(e,t),n=this.countColumn(i,e-s),r=this.options.overrideIndentation?this.options.overrideIndentation(s):-1;return r>-1&&(n+=r-this.countColumn(i,i.search(/\S|$/))),n}countColumn(e,t=e.length){return Va(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:i,from:s}=this.lineAt(e,t),n=this.options.overrideIndentation;if(n){let e=n(s);if(e>-1)return e}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const kf=new lp;function Bf(e){let t=e.type.prop(kf);if(t)return t;let i,s=e.firstChild;if(s&&(i=s.type.prop(lp.closedBy))){let t=e.lastChild,s=t&&i.indexOf(t.name)>-1;return e=>Rf(e,!0,1,void 0,s&&!function(e){return e.pos==e.options.simulateBreak&&e.options.simulateDoubleBreak}(e)?t.from:void 0)}return null==e.parent?Mf:null}function Qf(e,t,i){for(;e;e=e.parent){let s=Bf(e);if(s)return s(Tf.create(i,t,e))}return null}function Mf(){return 0}class Tf extends Ef{constructor(e,t,i){super(e.state,e.options),this.base=e,this.pos=t,this.node=i}static create(e,t,i){return new Tf(e,t,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){let e=this.state.doc.lineAt(this.node.from);for(;;){let t=this.node.resolve(e.from);for(;t.parent&&t.parent.from==t.from;)t=t.parent;if(Df(t,this.node))break;e=this.state.doc.lineAt(t.from)}return this.lineIndent(e.from)}continue(){let e=this.node.parent;return e?Qf(e,this.pos,this.base):0}}function Df(e,t){for(let i=t;i;i=i.parent)if(e==i)return!0;return!1}function Rf(e,t,i,s,n){let r=e.textAfter,o=r.match(/^\s*/)[0].length,a=s&&r.slice(o,o+s.length)==s||n==e.pos+o,l=t?function(e){let t=e.node,i=t.childAfter(t.from),s=t.lastChild;if(!i)return null;let n=e.options.simulateBreak,r=e.state.doc.lineAt(i.from),o=null==n||n<=r.from?r.to:Math.min(r.to,n);for(let e=i.to;;){let n=t.childAfter(e);if(!n||n==s)return null;if(!n.type.isSkipped)return n.from<o?i:null;e=n.to}}(e):null;return l?a?e.column(l.from):e.column(l.to):e.baseIndent+(a?0:e.unit*i)}function Pf({except:e,units:t=1}={}){return i=>{let s=e&&e.test(i.textAfter);return i.baseIndent+(s?0:t*i.unit)}}const Lf=Lo.define(),Ff=new lp;function Uf(e){let t=e.lastChild;return t&&t.to==e.to&&t.type.isError}function zf(e,t,i){for(let s of e.facet(Lf)){let n=s(e,t,i);if(n)return n}return function(e,t,i){let s=uf(e);if(s.length<i)return null;let n=null;for(let r=s.resolveInner(i,1);r;r=r.parent){if(r.to<=i||r.from>i)continue;if(n&&r.from<t)break;let o=r.type.prop(Ff);if(o&&(r.to<s.length-50||s.length==e.doc.length||!Uf(r))){let s=o(r,e);s&&s.from<=i&&s.from>=t&&s.to>i&&(n=s)}}return n}(e,t,i)}function Gf(e,t){let i=t.mapPos(e.from,1),s=t.mapPos(e.to,-1);return i>=s?void 0:{from:i,to:s}}const Nf=ua.define({map:Gf}),Vf=ua.define({map:Gf});function jf(e){let t=[];for(let{head:i}of e.state.selection.ranges)t.some((e=>e.from<=i&&e.to>=i))||t.push(e.lineBlockAt(i));return t}const Hf=jo.define({create:()=>ih.none,update(e,t){e=e.map(t.changes);for(let i of t.effects)i.is(Nf)&&!Xf(e,i.value.from,i.value.to)?e=e.update({add:[$f.range(i.value.from,i.value.to)]}):i.is(Vf)&&(e=e.update({filter:(e,t)=>i.value.from!=e||i.value.to!=t,filterFrom:i.value.from,filterTo:i.value.to}));if(t.selection){let i=!1,{head:s}=t.selection.main;e.between(s,s,((e,t)=>{e<s&&t>s&&(i=!0)})),i&&(e=e.update({filterFrom:s,filterTo:s,filter:(e,t)=>t<=s||e>=s}))}return e},provide:e=>kd.decorations.from(e),toJSON(e,t){let i=[];return e.between(0,t.doc.length,((e,t)=>{i.push(e,t)})),i},fromJSON(e){if(!Array.isArray(e)||e.length%2)throw new RangeError("Invalid JSON for fold state");let t=[];for(let i=0;i<e.length;){let s=e[i++],n=e[i++];if("number"!=typeof s||"number"!=typeof n)throw new RangeError("Invalid JSON for fold state");t.push($f.range(s,n))}return ih.set(t,!0)}});function qf(e,t,i){var s;let n=null;return null===(s=e.field(Hf,!1))||void 0===s||s.between(t,i,((e,t)=>{(!n||n.from>e)&&(n={from:e,to:t})})),n}function Xf(e,t,i){let s=!1;return e.between(t,t,((e,n)=>{e==t&&n==i&&(s=!0)})),s}function Wf(e,t){return e.field(Hf,!1)?t:t.concat(ua.appendConfig.of(Jf()))}function Zf(e,t,i=!0){let s=e.state.doc.lineAt(t.from).number,n=e.state.doc.lineAt(t.to).number;return kd.announce.of(`${e.state.phrase(i?"Folded lines":"Unfolded lines")} ${s} ${e.state.phrase("to")} ${n}.`)}const Yf=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:e=>{for(let t of jf(e)){let i=zf(e.state,t.from,t.to);if(i)return e.dispatch({effects:Wf(e.state,[Nf.of(i),Zf(e,i)])}),!0}return!1}},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:e=>{if(!e.state.field(Hf,!1))return!1;let t=[];for(let i of jf(e)){let s=qf(e.state,i.from,i.to);s&&t.push(Vf.of(s),Zf(e,s,!1))}return t.length&&e.dispatch({effects:t}),t.length>0}},{key:"Ctrl-Alt-[",run:e=>{let{state:t}=e,i=[];for(let s=0;s<t.doc.length;){let n=e.lineBlockAt(s),r=zf(t,n.from,n.to);r&&i.push(Nf.of(r)),s=(r?e.lineBlockAt(r.to):n).to+1}return i.length&&e.dispatch({effects:Wf(e.state,i)}),!!i.length}},{key:"Ctrl-Alt-]",run:e=>{let t=e.state.field(Hf,!1);if(!t||!t.size)return!1;let i=[];return t.between(0,e.state.doc.length,((e,t)=>{i.push(Vf.of({from:e,to:t}))})),e.dispatch({effects:i}),!0}}],_f={placeholderDOM:null,placeholderText:"…"},Kf=Lo.define({combine:e=>Sa(e,_f)});function Jf(e){return[Hf,sm]}const $f=ih.replace({widget:new class extends eh{toDOM(e){let{state:t}=e,i=t.facet(Kf),s=t=>{let i=e.lineBlockAt(e.posAtDOM(t.target)),s=qf(e.state,i.from,i.to);s&&e.dispatch({effects:Vf.of(s)}),t.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(e,s);let n=document.createElement("span");return n.textContent=i.placeholderText,n.setAttribute("aria-label",t.phrase("folded code")),n.title=t.phrase("unfold"),n.className="cm-foldPlaceholder",n.onclick=s,n}}}),em={openText:"⌄",closedText:"›",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class tm extends Fu{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function im(e={}){let t=Object.assign(Object.assign({},em),e),i=new tm(t,!0),s=new tm(t,!1),n=Eh.fromClass(class{constructor(e){this.from=e.viewport.from,this.markers=this.buildMarkers(e)}update(e){(e.docChanged||e.viewportChanged||e.startState.facet(wf)!=e.state.facet(wf)||e.startState.field(Hf,!1)!=e.state.field(Hf,!1)||uf(e.startState)!=uf(e.state)||t.foldingChanged(e))&&(this.markers=this.buildMarkers(e.view))}buildMarkers(e){let t=new Ma;for(let n of e.viewportLineBlocks){let r=qf(e.state,n.from,n.to)?s:zf(e.state,n.from,n.to)?i:null;r&&t.add(n.from,n.from,r)}return t.finish()}}),{domEventHandlers:r}=t;return[n,Nu({class:"cm-foldGutter",markers(e){var t;return(null===(t=e.plugin(n))||void 0===t?void 0:t.markers)||Qa.empty},initialSpacer:()=>new tm(t,!1),domEventHandlers:Object.assign(Object.assign({},r),{click:(e,t,i)=>{if(r.click&&r.click(e,t,i))return!0;let s=qf(e.state,t.from,t.to);if(s)return e.dispatch({effects:Vf.of(s)}),!0;let n=zf(e.state,t.from,t.to);return!!n&&(e.dispatch({effects:Nf.of(n)}),!0)}})}),Jf()]}const sm=kd.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class nm{constructor(e,t){let i;function s(e){let t=Xa.newName();return(i||(i=Object.create(null)))["."+t]=e,t}this.specs=e;const n="string"==typeof t.all?t.all:t.all?s(t.all):void 0,r=t.scope;this.scope=r instanceof hf?e=>e.prop(lf)==r.data:r?e=>e==r:void 0,this.style=Np(e.map((e=>({tag:e.tag,class:e.class||s(Object.assign({},e,{tag:null}))}))),{all:n}).style,this.module=i?new Xa(i):null,this.themeType=t.themeType}static define(e,t){return new nm(e,t||{})}}const rm=Lo.define(),om=Lo.define({combine:e=>e.length?[e[0]]:null});function am(e){let t=e.facet(rm);return t.length?t:e.facet(om)}function lm(e,t){let i,s=[hm];return e instanceof nm&&(e.module&&s.push(kd.styleModule.of(e.module)),i=e.themeType),(null==t?void 0:t.fallback)?s.push(om.of(e)):i?s.push(rm.computeN([kd.darkTheme],(t=>t.facet(kd.darkTheme)==("dark"==i)?[e]:[]))):s.push(rm.of(e)),s}const hm=Yo.high(Eh.fromClass(class{constructor(e){this.markCache=Object.create(null),this.tree=uf(e.state),this.decorations=this.buildDeco(e,am(e.state))}update(e){let t=uf(e.state),i=am(e.state),s=i!=am(e.startState);t.length<e.view.viewport.to&&!s&&t.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(t!=this.tree||e.viewportChanged||s)&&(this.tree=t,this.decorations=this.buildDeco(e.view,i))}buildDeco(e,t){if(!t||!this.tree.length)return ih.none;let i=new Ma;for(let{from:s,to:n}of e.visibleRanges)Vp(this.tree,t,((e,t,s)=>{i.add(e,t,this.markCache[s]||(this.markCache[s]=ih.mark({class:s})))}),s,n);return i.finish()}},{decorations:e=>e.decorations})),cm=nm.define([{tag:of.meta,color:"#7a757a"},{tag:of.link,textDecoration:"underline"},{tag:of.heading,textDecoration:"underline",fontWeight:"bold"},{tag:of.emphasis,fontStyle:"italic"},{tag:of.strong,fontWeight:"bold"},{tag:of.strikethrough,textDecoration:"line-through"},{tag:of.keyword,color:"#708"},{tag:[of.atom,of.bool,of.url,of.contentSeparator,of.labelName],color:"#219"},{tag:[of.literal,of.inserted],color:"#164"},{tag:[of.string,of.deleted],color:"#a11"},{tag:[of.regexp,of.escape,of.special(of.string)],color:"#e40"},{tag:of.definition(of.variableName),color:"#00f"},{tag:of.local(of.variableName),color:"#30a"},{tag:[of.typeName,of.namespace],color:"#085"},{tag:of.className,color:"#167"},{tag:[of.special(of.variableName),of.macroName],color:"#256"},{tag:of.definition(of.propertyName),color:"#00c"},{tag:of.comment,color:"#940"},{tag:of.invalid,color:"#f00"}]),dm=kd.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),um="()[]{}",pm=Lo.define({combine:e=>Sa(e,{afterCursor:!0,brackets:um,maxScanDistance:1e4,renderMatch:gm})}),fm=ih.mark({class:"cm-matchingBracket"}),mm=ih.mark({class:"cm-nonmatchingBracket"});function gm(e){let t=[],i=e.matched?fm:mm;return t.push(i.range(e.start.from,e.start.to)),e.end&&t.push(i.range(e.end.from,e.end.to)),t}const Am=jo.define({create:()=>ih.none,update(e,t){if(!t.docChanged&&!t.selection)return e;let i=[],s=t.state.facet(pm);for(let e of t.state.selection.ranges){if(!e.empty)continue;let n=wm(t.state,e.head,-1,s)||e.head>0&&wm(t.state,e.head-1,1,s)||s.afterCursor&&(wm(t.state,e.head,1,s)||e.head<t.state.doc.length&&wm(t.state,e.head+1,-1,s));n&&(i=i.concat(s.renderMatch(n,t.state)))}return ih.set(i,!0)},provide:e=>kd.decorations.from(e)}),bm=[Am,dm];function vm(e={}){return[pm.of(e),bm]}function ym(e,t,i){let s=e.prop(t<0?lp.openedBy:lp.closedBy);if(s)return s;if(1==e.name.length){let s=i.indexOf(e.name);if(s>-1&&s%2==(t<0?1:0))return[i[s+t]]}return null}function wm(e,t,i,s={}){let n=s.maxScanDistance||1e4,r=s.brackets||um,o=uf(e),a=o.resolveInner(t,i);for(let s=a;s;s=s.parent){let n=ym(s.type,i,r);if(n&&s.from<s.to)return xm(e,t,i,s,n,r)}return function(e,t,i,s,n,r,o){let a=i<0?e.sliceDoc(t-1,t):e.sliceDoc(t,t+1),l=o.indexOf(a);if(l<0||l%2==0!=i>0)return null;let h={from:i<0?t-1:t,to:i>0?t+1:t},c=e.doc.iterRange(t,i>0?e.doc.length:0),d=0;for(let e=0;!c.next().done&&e<=r;){let r=c.value;i<0&&(e+=r.length);let a=t+e*i;for(let e=i>0?0:r.length-1,t=i>0?r.length:-1;e!=t;e+=i){let t=o.indexOf(r[e]);if(!(t<0||s.resolveInner(a+e,1).type!=n))if(t%2==0==i>0)d++;else{if(1==d)return{start:h,end:{from:a+e,to:a+e+1},matched:t>>1==l>>1};d--}}i>0&&(e+=r.length)}return c.done?{start:h,matched:!1}:null}(e,t,i,o,a.type,n,r)}function xm(e,t,i,s,n,r){let o=s.parent,a={from:s.from,to:s.to},l=0,h=null==o?void 0:o.cursor();if(h&&(i<0?h.childBefore(s.from):h.childAfter(s.to)))do{if(i<0?h.to<=s.from:h.from>=s.to){if(0==l&&n.indexOf(h.type.name)>-1&&h.from<h.to)return{start:a,end:{from:h.from,to:h.to},matched:!0};if(ym(h.type,i,r))l++;else if(ym(h.type,-i,r)){if(0==l)return{start:a,end:h.from==h.to?void 0:{from:h.from,to:h.to},matched:!1};l--}}}while(i<0?h.prevSibling():h.nextSibling());return{start:a,matched:!1}}const Om=Object.create(null),Cm=[cp.none];new dp(Cm);const Sm=[],Im=Object.create(null);for(let[e,t]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])Im[e]=km(Om,t);function Em(e,t){Sm.indexOf(e)>-1||(Sm.push(e),console.warn(t))}function km(e,t){let i=null;for(let s of t.split(".")){let t=e[s]||of[s];t?"function"==typeof t?i?i=t(i):Em(s,`Modifier ${s} used at start of tag`):i?Em(s,`Tag ${s} used as modifier`):i=t:Em(s,`Unknown highlighting tag ${s}`)}if(!i)return 0;let s=t.replace(/ /g,"_"),n=cp.define({id:Cm.length,name:s,props:[Up({[s]:i})]});return Cm.push(n),n.id}new class{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),Im)}resolve(e){return e?this.table[e]||(this.table[e]=km(this.extra,e)):0}}(Om);function Bm(e,t){return({state:i,dispatch:s})=>{if(i.readOnly)return!1;let n=e(t,i);return!!n&&(s(i.update(n)),!0)}}const Qm=Bm((function(e,t,i=t.selection.ranges){let s=[],n=-1;for(let{from:e,to:r}of i){let i=s.length,o=1e9;for(let i=e;i<=r;){let a=t.doc.lineAt(i);if(a.from>n&&(e==r||r>a.from)){n=a.from;let e=Dm(t,i).line;if(!e)continue;let r=/^\s*/.exec(a.text)[0].length,l=r==a.length,h=a.text.slice(r,r+e.length)==e?r:-1;r<a.text.length&&r<o&&(o=r),s.push({line:a,comment:h,token:e,indent:r,empty:l,single:!1})}i=a.to+1}if(o<1e9)for(let e=i;e<s.length;e++)s[e].indent<s[e].line.text.length&&(s[e].indent=o);s.length==i+1&&(s[i].single=!0)}if(2!=e&&s.some((e=>e.comment<0&&(!e.empty||e.single)))){let e=[];for(let{line:t,token:i,indent:n,empty:r,single:o}of s)!o&&r||e.push({from:t.from+n,insert:i+" "});let i=t.changes(e);return{changes:i,selection:t.selection.map(i,1)}}if(1!=e&&s.some((e=>e.comment>=0))){let e=[];for(let{line:t,comment:i,token:n}of s)if(i>=0){let s=t.from+i,r=s+n.length;" "==t.text[r-t.from]&&r++,e.push({from:s,to:r})}return{changes:e}}return null}),0),Mm=Bm(Pm,0),Tm=Bm(((e,t)=>Pm(e,t,function(e){let t=[];for(let i of e.selection.ranges){let s=e.doc.lineAt(i.from),n=i.to<=s.to?s:e.doc.lineAt(i.to),r=t.length-1;r>=0&&t[r].to>s.from?t[r].to=n.to:t.push({from:s.from,to:n.to})}return t}(t))),0);function Dm(e,t=e.selection.main.head){let i=e.languageDataAt("commentTokens",t);return i.length?i[0]:{}}const Rm=50;function Pm(e,t,i=t.selection.ranges){let s=i.map((e=>Dm(t,e.from).block));if(!s.every((e=>e)))return null;let n=i.map(((e,i)=>function(e,{open:t,close:i},s,n){let r,o,a=e.sliceDoc(s-Rm,s),l=e.sliceDoc(n,n+Rm),h=/\s*$/.exec(a)[0].length,c=/^\s*/.exec(l)[0].length,d=a.length-h;if(a.slice(d-t.length,d)==t&&l.slice(c,c+i.length)==i)return{open:{pos:s-h,margin:h&&1},close:{pos:n+c,margin:c&&1}};n-s<=2*Rm?r=o=e.sliceDoc(s,n):(r=e.sliceDoc(s,s+Rm),o=e.sliceDoc(n-Rm,n));let u=/^\s*/.exec(r)[0].length,p=/\s*$/.exec(o)[0].length,f=o.length-p-i.length;return r.slice(u,u+t.length)==t&&o.slice(f,f+i.length)==i?{open:{pos:s+u+t.length,margin:/\s/.test(r.charAt(u+t.length))?1:0},close:{pos:n-p-i.length,margin:/\s/.test(o.charAt(f-1))?1:0}}:null}(t,s[i],e.from,e.to)));if(2!=e&&!n.every((e=>e)))return{changes:t.changes(i.map(((e,t)=>n[t]?[]:[{from:e.from,insert:s[t].open+" "},{from:e.to,insert:" "+s[t].close}])))};if(1!=e&&n.some((e=>e))){let e=[];for(let t,i=0;i<n.length;i++)if(t=n[i]){let n=s[i],{open:r,close:o}=t;e.push({from:r.pos-n.open.length,to:r.pos+r.margin},{from:o.pos-o.margin,to:o.pos+n.close.length})}return{changes:e}}return null}const Lm=ha.define(),Fm=ha.define(),Um=Lo.define(),zm=Lo.define({combine:e=>Sa(e,{minDepth:100,newGroupDelay:500},{minDepth:Math.max,newGroupDelay:Math.min})});const Gm=jo.define({create:()=>sg.empty,update(e,t){let i=t.state.facet(zm),s=t.annotation(Lm);if(s){let n=t.docChanged?Do.single(function(e){let t=0;return e.iterChangedRanges(((e,i)=>t=i)),t}(t.changes)):void 0,r=Wm.fromTransaction(t,n),o=s.side,a=0==o?e.undone:e.done;return a=r?Zm(a,a.length,i.minDepth,r):Jm(a,t.startState.selection),new sg(0==o?s.rest:a,0==o?a:s.rest)}let n=t.annotation(Fm);if("full"!=n&&"before"!=n||(e=e.isolate()),!1===t.annotation(pa.addToHistory))return t.changes.empty?e:e.addMapping(t.changes.desc);let r=Wm.fromTransaction(t),o=t.annotation(pa.time),a=t.annotation(pa.userEvent);return r?e=e.addChanges(r,o,a,i.newGroupDelay,i.minDepth):t.selection&&(e=e.addSelection(t.startState.selection,o,a,i.newGroupDelay)),"full"!=n&&"after"!=n||(e=e.isolate()),e},toJSON:e=>({done:e.done.map((e=>e.toJSON())),undone:e.undone.map((e=>e.toJSON()))}),fromJSON:e=>new sg(e.done.map(Wm.fromJSON),e.undone.map(Wm.fromJSON))});function Nm(e={}){return[Gm,zm.of(e),kd.domEventHandlers({beforeinput(e,t){let i="historyUndo"==e.inputType?jm:"historyRedo"==e.inputType?Hm:null;return!!i&&(e.preventDefault(),i(t))}})]}function Vm(e,t){return function({state:i,dispatch:s}){if(!t&&i.readOnly)return!1;let n=i.field(Gm,!1);if(!n)return!1;let r=n.pop(e,i,t);return!!r&&(s(r),!0)}}const jm=Vm(0,!1),Hm=Vm(1,!1),qm=Vm(0,!0),Xm=Vm(1,!0);class Wm{constructor(e,t,i,s,n){this.changes=e,this.effects=t,this.mapped=i,this.startSelection=s,this.selectionsAfter=n}setSelAfter(e){return new Wm(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,i;return{changes:null===(e=this.changes)||void 0===e?void 0:e.toJSON(),mapped:null===(t=this.mapped)||void 0===t?void 0:t.toJSON(),startSelection:null===(i=this.startSelection)||void 0===i?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map((e=>e.toJSON()))}}static fromJSON(e){return new Wm(e.changes&&So.fromJSON(e.changes),[],e.mapped&&Co.fromJSON(e.mapped),e.startSelection&&Do.fromJSON(e.startSelection),e.selectionsAfter.map(Do.fromJSON))}static fromTransaction(e,t){let i=_m;for(let t of e.startState.facet(Um)){let s=t(e);s.length&&(i=i.concat(s))}return!i.length&&e.changes.empty?null:new Wm(e.changes.invert(e.startState.doc),i,void 0,t||e.startState.selection,_m)}static selection(e){return new Wm(void 0,_m,void 0,void 0,e)}}function Zm(e,t,i,s){let n=t+1>i+20?t-i-1:0,r=e.slice(n,t);return r.push(s),r}function Ym(e,t){return e.length?t.length?e.concat(t):e:t}const _m=[],Km=200;function Jm(e,t){if(e.length){let i=e[e.length-1],s=i.selectionsAfter.slice(Math.max(0,i.selectionsAfter.length-Km));return s.length&&s[s.length-1].eq(t)?e:(s.push(t),Zm(e,e.length-1,1e9,i.setSelAfter(s)))}return[Wm.selection([t])]}function $m(e){let t=e[e.length-1],i=e.slice();return i[e.length-1]=t.setSelAfter(t.selectionsAfter.slice(0,t.selectionsAfter.length-1)),i}function eg(e,t){if(!e.length)return e;let i=e.length,s=_m;for(;i;){let n=tg(e[i-1],t,s);if(n.changes&&!n.changes.empty||n.effects.length){let t=e.slice(0,i);return t[i-1]=n,t}t=n.mapped,i--,s=n.selectionsAfter}return s.length?[Wm.selection(s)]:_m}function tg(e,t,i){let s=Ym(e.selectionsAfter.length?e.selectionsAfter.map((e=>e.map(t))):_m,i);if(!e.changes)return Wm.selection(s);let n=e.changes.map(t),r=t.mapDesc(e.changes,!0),o=e.mapped?e.mapped.composeDesc(r):r;return new Wm(n,ua.mapEffects(e.effects,t),o,e.startSelection.map(r),s)}const ig=/^(input\.type|delete)($|\.)/;class sg{constructor(e,t,i=0,s){this.done=e,this.undone=t,this.prevTime=i,this.prevUserEvent=s}isolate(){return this.prevTime?new sg(this.done,this.undone):this}addChanges(e,t,i,s,n){let r=this.done,o=r[r.length-1];return r=o&&o.changes&&!o.changes.empty&&e.changes&&(!i||ig.test(i))&&(!o.selectionsAfter.length&&t-this.prevTime<s&&function(e,t){let i=[],s=!1;return e.iterChangedRanges(((e,t)=>i.push(e,t))),t.iterChangedRanges(((e,t,n,r)=>{for(let e=0;e<i.length;){let t=i[e++],o=i[e++];r>=t&&n<=o&&(s=!0)}})),s}(o.changes,e.changes)||"input.type.compose"==i)?Zm(r,r.length-1,n,new Wm(e.changes.compose(o.changes),Ym(e.effects,o.effects),o.mapped,o.startSelection,_m)):Zm(r,r.length,n,e),new sg(r,_m,t,i)}addSelection(e,t,i,s){let n=this.done.length?this.done[this.done.length-1].selectionsAfter:_m;return n.length>0&&t-this.prevTime<s&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&function(e,t){return e.ranges.length==t.ranges.length&&0===e.ranges.filter(((e,i)=>e.empty!=t.ranges[i].empty)).length}(n[n.length-1],e)?this:new sg(Jm(this.done,e),this.undone,t,i)}addMapping(e){return new sg(eg(this.done,e),eg(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,i){let s=0==e?this.done:this.undone;if(0==s.length)return null;let n=s[s.length-1];if(i&&n.selectionsAfter.length)return t.update({selection:n.selectionsAfter[n.selectionsAfter.length-1],annotations:Lm.of({side:e,rest:$m(s)}),userEvent:0==e?"select.undo":"select.redo",scrollIntoView:!0});if(n.changes){let i=1==s.length?_m:s.slice(0,s.length-1);return n.mapped&&(i=eg(i,n.mapped)),t.update({changes:n.changes,selection:n.startSelection,effects:n.effects,annotations:Lm.of({side:e,rest:i}),filter:!1,userEvent:0==e?"undo":"redo",scrollIntoView:!0})}return null}}sg.empty=new sg(_m,_m);const ng=[{key:"Mod-z",run:jm,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:Hm,preventDefault:!0},{linux:"Ctrl-Shift-z",run:Hm,preventDefault:!0},{key:"Mod-u",run:qm,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:Xm,preventDefault:!0}];function rg(e,t){return Do.create(e.ranges.map(t),e.mainIndex)}function og(e,t){return e.update({selection:t,scrollIntoView:!0,userEvent:"select"})}function ag({state:e,dispatch:t},i){let s=rg(e.selection,i);return!s.eq(e.selection)&&(t(og(e,s)),!0)}function lg(e,t){return Do.cursor(t?e.to:e.from)}function hg(e,t){return ag(e,(i=>i.empty?e.moveByChar(i,t):lg(i,t)))}function cg(e){return e.textDirectionAt(e.state.selection.main.head)==Fh.LTR}const dg=e=>hg(e,!cg(e)),ug=e=>hg(e,cg(e));function pg(e,t){return ag(e,(i=>i.empty?e.moveByGroup(i,t):lg(i,t)))}function fg(e,t,i){if(t.type.prop(i))return!0;let s=t.to-t.from;return s&&(s>2||/[^\s,.;:]/.test(e.sliceDoc(t.from,t.to)))||t.firstChild}function mg(e,t,i){let s,n,r=uf(e).resolveInner(t.head),o=i?lp.closedBy:lp.openedBy;for(let s=t.head;;){let t=i?r.childAfter(s):r.childBefore(s);if(!t)break;fg(e,t,o)?r=t:s=i?t.to:t.from}return n=r.type.prop(o)&&(s=i?wm(e,r.from,1):wm(e,r.to,-1))&&s.matched?i?s.end.to:s.end.from:i?r.to:r.from,Do.cursor(n,i?-1:1)}function gg(e,t){return ag(e,(i=>{if(!i.empty)return lg(i,t);let s=e.moveVertically(i,t);return s.head!=i.head?s:e.moveToLineBoundary(i,t)}))}const Ag=e=>gg(e,!1),bg=e=>gg(e,!0);function vg(e){return Math.max(e.defaultLineHeight,Math.min(e.dom.clientHeight,innerHeight)-5)}function yg(e,t){let{state:i}=e,s=rg(i.selection,(i=>i.empty?e.moveVertically(i,t,vg(e)):lg(i,t)));if(s.eq(i.selection))return!1;let n,r=e.coordsAtPos(i.selection.main.head),o=e.scrollDOM.getBoundingClientRect();return r&&r.top>o.top&&r.bottom<o.bottom&&r.top-o.top<=e.scrollDOM.scrollHeight-e.scrollDOM.scrollTop-e.scrollDOM.clientHeight&&(n=kd.scrollIntoView(s.main.head,{y:"start",yMargin:r.top-o.top})),e.dispatch(og(i,s),{effects:n}),!0}const wg=e=>yg(e,!1),xg=e=>yg(e,!0);function Og(e,t,i){let s=e.lineBlockAt(t.head),n=e.moveToLineBoundary(t,i);if(n.head==t.head&&n.head!=(i?s.to:s.from)&&(n=e.moveToLineBoundary(t,i,!1)),!i&&n.head==s.from&&s.length){let i=/^\s*/.exec(e.state.sliceDoc(s.from,Math.min(s.from+100,s.to)))[0].length;i&&t.head!=s.from+i&&(n=Do.cursor(s.from+i))}return n}function Cg(e,t){let i=rg(e.state.selection,(e=>{let i=t(e);return Do.range(e.anchor,i.head,i.goalColumn)}));return!i.eq(e.state.selection)&&(e.dispatch(og(e.state,i)),!0)}function Sg(e,t){return Cg(e,(i=>e.moveByChar(i,t)))}const Ig=e=>Sg(e,!cg(e)),Eg=e=>Sg(e,cg(e));function kg(e,t){return Cg(e,(i=>e.moveByGroup(i,t)))}function Bg(e,t){return Cg(e,(i=>e.moveVertically(i,t)))}const Qg=e=>Bg(e,!1),Mg=e=>Bg(e,!0);function Tg(e,t){return Cg(e,(i=>e.moveVertically(i,t,vg(e))))}const Dg=e=>Tg(e,!1),Rg=e=>Tg(e,!0),Pg=({state:e,dispatch:t})=>(t(og(e,{anchor:0})),!0),Lg=({state:e,dispatch:t})=>(t(og(e,{anchor:e.doc.length})),!0),Fg=({state:e,dispatch:t})=>(t(og(e,{anchor:e.selection.main.anchor,head:0})),!0),Ug=({state:e,dispatch:t})=>(t(og(e,{anchor:e.selection.main.anchor,head:e.doc.length})),!0);function zg(e,t){if(e.state.readOnly)return!1;let i="delete.selection",{state:s}=e,n=s.changeByRange((s=>{let{from:n,to:r}=s;if(n==r){let s=t(n);s<n?(i="delete.backward",s=Gg(e,s,!1)):s>n&&(i="delete.forward",s=Gg(e,s,!0)),n=Math.min(n,s),r=Math.max(r,s)}else n=Gg(e,n,!1),r=Gg(e,r,!0);return n==r?{range:s}:{changes:{from:n,to:r},range:Do.cursor(n)}}));return!n.changes.empty&&(e.dispatch(s.update(n,{scrollIntoView:!0,userEvent:i,effects:"delete.selection"==i?kd.announce.of(s.phrase("Selection deleted")):void 0})),!0)}function Gg(e,t,i){if(e instanceof kd)for(let s of e.state.facet(kd.atomicRanges).map((t=>t(e))))s.between(t,t,((e,s)=>{e<t&&s>t&&(t=i?s:e)}));return t}const Ng=(e,t)=>zg(e,(i=>{let s,n,{state:r}=e,o=r.doc.lineAt(i);if(!t&&i>o.from&&i<o.from+200&&!/[^ \t]/.test(s=o.text.slice(0,i-o.from))){if("\t"==s[s.length-1])return i-1;let e=Va(s,r.tabSize)%Cf(r)||Cf(r);for(let t=0;t<e&&" "==s[s.length-1-t];t++)i--;n=i}else(n=fo(o.text,i-o.from,t,t)+o.from)==i&&o.number!=(t?r.doc.lines:1)&&(n+=t?1:-1);return n})),Vg=e=>Ng(e,!1),jg=e=>Ng(e,!0),Hg=(e,t)=>zg(e,(i=>{let s=i,{state:n}=e,r=n.doc.lineAt(s),o=n.charCategorizer(s);for(let e=null;;){if(s==(t?r.to:r.from)){s==i&&r.number!=(t?n.doc.lines:1)&&(s+=t?1:-1);break}let a=fo(r.text,s-r.from,t)+r.from,l=r.text.slice(Math.min(s,a)-r.from,Math.max(s,a)-r.from),h=o(l);if(null!=e&&h!=e)break;" "==l&&s==i||(e=h),s=a}return s})),qg=e=>Hg(e,!1),Xg=e=>zg(e,(t=>{let i=e.lineBlockAt(t).to;return t<i?i:Math.min(e.state.doc.length,t+1)}));function Wg(e){let t=[],i=-1;for(let s of e.selection.ranges){let n=e.doc.lineAt(s.from),r=e.doc.lineAt(s.to);if(s.empty||s.to!=r.from||(r=e.doc.lineAt(s.to-1)),i>=n.number){let e=t[t.length-1];e.to=r.to,e.ranges.push(s)}else t.push({from:n.from,to:r.to,ranges:[s]});i=r.number+1}return t}function Zg(e,t,i){if(e.readOnly)return!1;let s=[],n=[];for(let t of Wg(e)){if(i?t.to==e.doc.length:0==t.from)continue;let r=e.doc.lineAt(i?t.to+1:t.from-1),o=r.length+1;if(i){s.push({from:t.to,to:r.to},{from:t.from,insert:r.text+e.lineBreak});for(let i of t.ranges)n.push(Do.range(Math.min(e.doc.length,i.anchor+o),Math.min(e.doc.length,i.head+o)))}else{s.push({from:r.from,to:t.from},{from:t.to,insert:e.lineBreak+r.text});for(let e of t.ranges)n.push(Do.range(e.anchor-o,e.head-o))}}return!!s.length&&(t(e.update({changes:s,scrollIntoView:!0,selection:Do.create(n,e.selection.mainIndex),userEvent:"move.line"})),!0)}function Yg(e,t,i){if(e.readOnly)return!1;let s=[];for(let t of Wg(e))i?s.push({from:t.from,insert:e.doc.slice(t.from,t.to)+e.lineBreak}):s.push({from:t.to,insert:e.lineBreak+e.doc.slice(t.from,t.to)});return t(e.update({changes:s,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const _g=Jg(!1),Kg=Jg(!0);function Jg(e){return({state:t,dispatch:i})=>{if(t.readOnly)return!1;let s=t.changeByRange((i=>{let{from:s,to:n}=i,r=t.doc.lineAt(s),o=!e&&s==n&&function(e,t){if(/\(\)|\[\]|\{\}/.test(e.sliceDoc(t-1,t+1)))return{from:t,to:t};let i,s=uf(e).resolveInner(t),n=s.childBefore(t),r=s.childAfter(t);return n&&r&&n.to<=t&&r.from>=t&&(i=n.type.prop(lp.closedBy))&&i.indexOf(r.name)>-1&&e.doc.lineAt(n.to).from==e.doc.lineAt(r.from).from?{from:n.to,to:r.from}:null}(t,s);e&&(s=n=(n<=r.to?r:t.doc.lineAt(n)).to);let a=new Ef(t,{simulateBreak:s,simulateDoubleBreak:!!o}),l=If(a,s);for(null==l&&(l=/^\s*/.exec(t.doc.lineAt(s).text)[0].length);n<r.to&&/\s/.test(r.text[n-r.from]);)n++;o?({from:s,to:n}=o):s>r.from&&s<r.from+100&&!/\S/.test(r.text.slice(0,s))&&(s=r.from);let h=["",Sf(t,l)];return o&&h.push(Sf(t,a.lineIndent(r.from,-1))),{changes:{from:s,to:n,insert:to.of(h)},range:Do.cursor(s+1+h[1].length)}}));return i(t.update(s,{scrollIntoView:!0,userEvent:"input"})),!0}}function $g(e,t){let i=-1;return e.changeByRange((s=>{let n=[];for(let r=s.from;r<=s.to;){let o=e.doc.lineAt(r);o.number>i&&(s.empty||s.to>o.from)&&(t(o,n,s),i=o.number),r=o.to+1}let r=e.changes(n);return{changes:n,range:Do.range(r.mapPos(s.anchor,1),r.mapPos(s.head,1))}}))}const eA=({state:e,dispatch:t})=>!e.readOnly&&(t(e.update($g(e,((t,i)=>{i.push({from:t.from,insert:e.facet(Of)})})),{userEvent:"input.indent"})),!0),tA=({state:e,dispatch:t})=>!e.readOnly&&(t(e.update($g(e,((t,i)=>{let s=/^\s*/.exec(t.text)[0];if(!s)return;let n=Va(s,e.tabSize),r=0,o=Sf(e,Math.max(0,n-Cf(e)));for(;r<s.length&&r<o.length&&s.charCodeAt(r)==o.charCodeAt(r);)r++;i.push({from:t.from+r,to:t.from+s.length,insert:o.slice(r)})})),{userEvent:"delete.dedent"})),!0),iA=[{key:"Ctrl-b",run:dg,shift:Ig,preventDefault:!0},{key:"Ctrl-f",run:ug,shift:Eg},{key:"Ctrl-p",run:Ag,shift:Qg},{key:"Ctrl-n",run:bg,shift:Mg},{key:"Ctrl-a",run:e=>ag(e,(t=>Do.cursor(e.lineBlockAt(t.head).from,1))),shift:e=>Cg(e,(t=>Do.cursor(e.lineBlockAt(t.head).from)))},{key:"Ctrl-e",run:e=>ag(e,(t=>Do.cursor(e.lineBlockAt(t.head).to,-1))),shift:e=>Cg(e,(t=>Do.cursor(e.lineBlockAt(t.head).to)))},{key:"Ctrl-d",run:jg},{key:"Ctrl-h",run:Vg},{key:"Ctrl-k",run:Xg},{key:"Ctrl-Alt-h",run:qg},{key:"Ctrl-o",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=e.changeByRange((e=>({changes:{from:e.from,to:e.to,insert:to.of(["",""])},range:Do.cursor(e.from)})));return t(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}},{key:"Ctrl-t",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=e.changeByRange((t=>{if(!t.empty||0==t.from||t.from==e.doc.length)return{range:t};let i=t.from,s=e.doc.lineAt(i),n=i==s.from?i-1:fo(s.text,i-s.from,!1)+s.from,r=i==s.to?i+1:fo(s.text,i-s.from,!0)+s.from;return{changes:{from:n,to:r,insert:e.doc.slice(i,r).append(e.doc.slice(n,i))},range:Do.cursor(r)}}));return!i.changes.empty&&(t(e.update(i,{scrollIntoView:!0,userEvent:"move.character"})),!0)}},{key:"Ctrl-v",run:xg}],sA=[{key:"ArrowLeft",run:dg,shift:Ig,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:e=>pg(e,!cg(e)),shift:e=>kg(e,!cg(e)),preventDefault:!0},{mac:"Cmd-ArrowLeft",run:e=>ag(e,(t=>Og(e,t,!cg(e)))),shift:e=>Cg(e,(t=>Og(e,t,!cg(e)))),preventDefault:!0},{key:"ArrowRight",run:ug,shift:Eg,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:e=>pg(e,cg(e)),shift:e=>kg(e,cg(e)),preventDefault:!0},{mac:"Cmd-ArrowRight",run:e=>ag(e,(t=>Og(e,t,cg(e)))),shift:e=>Cg(e,(t=>Og(e,t,cg(e)))),preventDefault:!0},{key:"ArrowUp",run:Ag,shift:Qg,preventDefault:!0},{mac:"Cmd-ArrowUp",run:Pg,shift:Fg},{mac:"Ctrl-ArrowUp",run:wg,shift:Dg},{key:"ArrowDown",run:bg,shift:Mg,preventDefault:!0},{mac:"Cmd-ArrowDown",run:Lg,shift:Ug},{mac:"Ctrl-ArrowDown",run:xg,shift:Rg},{key:"PageUp",run:wg,shift:Dg},{key:"PageDown",run:xg,shift:Rg},{key:"Home",run:e=>ag(e,(t=>Og(e,t,!1))),shift:e=>Cg(e,(t=>Og(e,t,!1))),preventDefault:!0},{key:"Mod-Home",run:Pg,shift:Fg},{key:"End",run:e=>ag(e,(t=>Og(e,t,!0))),shift:e=>Cg(e,(t=>Og(e,t,!0))),preventDefault:!0},{key:"Mod-End",run:Lg,shift:Ug},{key:"Enter",run:_g},{key:"Mod-a",run:({state:e,dispatch:t})=>(t(e.update({selection:{anchor:0,head:e.doc.length},userEvent:"select"})),!0)},{key:"Backspace",run:Vg,shift:Vg},{key:"Delete",run:jg},{key:"Mod-Backspace",mac:"Alt-Backspace",run:qg},{key:"Mod-Delete",mac:"Alt-Delete",run:e=>Hg(e,!0)},{mac:"Mod-Backspace",run:e=>zg(e,(t=>{let i=e.lineBlockAt(t).from;return t>i?i:Math.max(0,t-1)}))},{mac:"Mod-Delete",run:Xg}].concat(iA.map((e=>({mac:e.key,run:e.run,shift:e.shift})))),nA=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:e=>ag(e,(t=>mg(e.state,t,!cg(e)))),shift:e=>Cg(e,(t=>mg(e.state,t,!cg(e))))},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:e=>ag(e,(t=>mg(e.state,t,cg(e)))),shift:e=>Cg(e,(t=>mg(e.state,t,cg(e))))},{key:"Alt-ArrowUp",run:({state:e,dispatch:t})=>Zg(e,t,!1)},{key:"Shift-Alt-ArrowUp",run:({state:e,dispatch:t})=>Yg(e,t,!1)},{key:"Alt-ArrowDown",run:({state:e,dispatch:t})=>Zg(e,t,!0)},{key:"Shift-Alt-ArrowDown",run:({state:e,dispatch:t})=>Yg(e,t,!0)},{key:"Escape",run:({state:e,dispatch:t})=>{let i=e.selection,s=null;return i.ranges.length>1?s=Do.create([i.main]):i.main.empty||(s=Do.create([Do.cursor(i.main.head)])),!!s&&(t(og(e,s)),!0)}},{key:"Mod-Enter",run:Kg},{key:"Alt-l",mac:"Ctrl-l",run:({state:e,dispatch:t})=>{let i=Wg(e).map((({from:t,to:i})=>Do.range(t,Math.min(i+1,e.doc.length))));return t(e.update({selection:Do.create(i),userEvent:"select"})),!0}},{key:"Mod-i",run:({state:e,dispatch:t})=>{let i=rg(e.selection,(t=>{var i;let s=uf(e).resolveInner(t.head,1);for(;!(s.from<t.from&&s.to>=t.to||s.to>t.to&&s.from<=t.from)&&(null===(i=s.parent)||void 0===i?void 0:i.parent);)s=s.parent;return Do.range(s.to,s.from)}));return t(og(e,i)),!0},preventDefault:!0},{key:"Mod-[",run:tA},{key:"Mod-]",run:eA},{key:"Mod-Alt-\\",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=Object.create(null),s=new Ef(e,{overrideIndentation:e=>{let t=i[e];return null==t?-1:t}}),n=$g(e,((t,n,r)=>{let o=If(s,t.from);if(null==o)return;/\S/.test(t.text)||(o=0);let a=/^\s*/.exec(t.text)[0],l=Sf(e,o);(a!=l||r.from<t.from+a.length)&&(i[t.from]=o,n.push({from:t.from,to:t.from+a.length,insert:l}))}));return n.changes.empty||t(e.update(n,{userEvent:"indent"})),!0}},{key:"Shift-Mod-k",run:e=>{if(e.state.readOnly)return!1;let{state:t}=e,i=t.changes(Wg(t).map((({from:e,to:i})=>(e>0?e--:i<t.doc.length&&i++,{from:e,to:i})))),s=rg(t.selection,(t=>e.moveVertically(t,!0))).map(i);return e.dispatch({changes:i,selection:s,scrollIntoView:!0,userEvent:"delete.line"}),!0}},{key:"Shift-Mod-\\",run:({state:e,dispatch:t})=>function(e,t){let i=!1,s=rg(e.selection,(t=>{let s=wm(e,t.head,-1)||wm(e,t.head,1)||t.head>0&&wm(e,t.head-1,1)||t.head<e.doc.length&&wm(e,t.head+1,-1);if(!s||!s.end)return t;i=!0;let n=s.start.from==t.head?s.end.to:s.end.from;return Do.cursor(n)}));return!!i&&(t(og(e,s)),!0)}(e,t)},{key:"Mod-/",run:e=>{let t=Dm(e.state);return t.line?Qm(e):!!t.block&&Tm(e)}},{key:"Alt-A",run:Mm}].concat(sA),rA={key:"Tab",run:eA,shift:tA};class oA{constructor(e,t,i){this.state=e,this.pos=t,this.explicit=i,this.abortListeners=[]}tokenBefore(e){let t=uf(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),i=Math.max(t.from,this.pos-250),s=t.text.slice(i-t.from,this.pos-t.from),n=s.search(dA(e,!1));return n<0?null:{from:i+n,to:this.pos,text:s.slice(n)}}get aborted(){return null==this.abortListeners}addEventListener(e,t){"abort"==e&&this.abortListeners&&this.abortListeners.push(t)}}function aA(e){let t=Object.keys(e).join(""),i=/\w/.test(t);return i&&(t=t.replace(/\w/g,"")),`[${i?"\\w":""}${t.replace(/[^\w\s]/g,"\\$&")}]`}function lA(e){let t=e.map((e=>"string"==typeof e?{label:e}:e)),[i,s]=t.every((e=>/^\w+$/.test(e.label)))?[/\w*$/,/\w+$/]:function(e){let t=Object.create(null),i=Object.create(null);for(let{label:s}of e){t[s[0]]=!0;for(let e=1;e<s.length;e++)i[s[e]]=!0}let s=aA(t)+aA(i)+"*$";return[new RegExp("^"+s),new RegExp(s)]}(t);return e=>{let n=e.matchBefore(s);return n||e.explicit?{from:n?n.from:e.pos,options:t,validFor:i}:null}}class hA{constructor(e,t,i){this.completion=e,this.source=t,this.match=i}}function cA(e){return e.selection.main.head}function dA(e,t){var i;let{source:s}=e,n=t&&"^"!=s[0],r="$"!=s[s.length-1];return n||r?new RegExp(`${n?"^":""}(?:${s})${r?"$":""}`,null!==(i=e.flags)&&void 0!==i?i:e.ignoreCase?"i":""):e}const uA=ha.define();function pA(e,t){const i=t.completion.apply||t.completion.label;let s=t.source;"string"==typeof i?e.dispatch(Object.assign(Object.assign({},function(e,t,i,s){return Object.assign(Object.assign({},e.changeByRange((n=>{if(n==e.selection.main)return{changes:{from:i,to:s,insert:t},range:Do.cursor(i+t.length)};let r=s-i;return!n.empty||r&&e.sliceDoc(n.from-r,n.from)!=e.sliceDoc(i,s)?{range:n}:{changes:{from:n.from-r,to:n.from,insert:t},range:Do.cursor(n.from-r+t.length)}}))),{userEvent:"input.complete"})}(e.state,i,s.from,s.to)),{annotations:uA.of(t.completion)})):i(e,t.completion,s.from,s.to)}const fA=new WeakMap;function mA(e){if(!Array.isArray(e))return e;let t=fA.get(e);return t||fA.set(e,t=lA(e)),t}class gA{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[];for(let t=0;t<e.length;){let i=vo(e,t),s=wo(i);this.chars.push(i);let n=e.slice(t,t+s),r=n.toUpperCase();this.folded.push(vo(r==n?n.toLowerCase():r,0)),t+=s}this.astral=e.length!=this.chars.length}match(e){if(0==this.pattern.length)return[0];if(e.length<this.pattern.length)return null;let{chars:t,folded:i,any:s,precise:n,byWord:r}=this;if(1==t.length){let s=vo(e,0);return s==t[0]?[0,0,wo(s)]:s==i[0]?[-200,0,wo(s)]:null}let o=e.indexOf(this.pattern);if(0==o)return[0,0,this.pattern.length];let a=t.length,l=0;if(o<0){for(let n=0,r=Math.min(e.length,200);n<r&&l<a;){let r=vo(e,n);r!=t[l]&&r!=i[l]||(s[l++]=n),n+=wo(r)}if(l<a)return null}let h=0,c=0,d=!1,u=0,p=-1,f=-1,m=/[a-z]/.test(e),g=!0;for(let s=0,l=Math.min(e.length,200),A=0;s<l&&c<a;){let l=vo(e,s);o<0&&(h<a&&l==t[h]&&(n[h++]=s),u<a&&(l==t[u]||l==i[u]?(0==u&&(p=s),f=s+1,u++):u=0));let b,v=l<255?l>=48&&l<=57||l>=97&&l<=122?2:l>=65&&l<=90?1:0:(b=yo(l))!=b.toLowerCase()?1:b!=b.toUpperCase()?2:0;(!s||1==v&&m||0==A&&0!=v)&&(t[c]==l||i[c]==l&&(d=!0)?r[c++]=s:r.length&&(g=!1)),A=v,s+=wo(l)}return c==a&&0==r[0]&&g?this.result((d?-200:0)-100,r,e):u==a&&0==p?[-200-e.length,0,f]:o>-1?[-700-e.length,o,o+this.pattern.length]:u==a?[-900-e.length,p,f]:c==a?this.result((d?-200:0)-100-700+(g?0:-1100),r,e):2==t.length?null:this.result((s[0]?-700:0)-200-1100,s,e)}result(e,t,i){let s=[e-i.length],n=1;for(let e of t){let t=e+(this.astral?wo(vo(i,e)):1);n>1&&s[n-1]==e?s[n-1]=t:(s[n++]=e,s[n++]=t)}return s}}const AA=Lo.define({combine:e=>Sa(e,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,optionClass:(e,t)=>i=>function(e,t){return e?t?e+" "+t:e:t}(e(i),t(i)),addToOptions:(e,t)=>e.concat(t)})});function bA(e,t,i){if(e<=i)return{from:0,to:e};if(t<0&&(t=0),t<=e>>1){let e=Math.floor(t/i);return{from:e*i,to:(e+1)*i}}let s=Math.floor((e-t)/i);return{from:e-(s+1)*i,to:e-s*i}}class vA{constructor(e,t){this.view=e,this.stateField=t,this.info=null,this.placeInfo={read:()=>this.measureInfo(),write:e=>this.positionInfo(e),key:this},this.space=null;let i=e.state.field(t),{options:s,selected:n}=i.open,r=e.state.facet(AA);this.optionContent=function(e){let t=e.addToOptions.slice();return e.icons&&t.push({render(e){let t=document.createElement("div");return t.classList.add("cm-completionIcon"),e.type&&t.classList.add(...e.type.split(/\s+/g).map((e=>"cm-completionIcon-"+e))),t.setAttribute("aria-hidden","true"),t},position:20}),t.push({render(e,t,i){let s=document.createElement("span");s.className="cm-completionLabel";let{label:n}=e,r=0;for(let e=1;e<i.length;){let t=i[e++],o=i[e++];t>r&&s.appendChild(document.createTextNode(n.slice(r,t)));let a=s.appendChild(document.createElement("span"));a.appendChild(document.createTextNode(n.slice(t,o))),a.className="cm-completionMatchedText",r=o}return r<n.length&&s.appendChild(document.createTextNode(n.slice(r))),s},position:50},{render(e){if(!e.detail)return null;let t=document.createElement("span");return t.className="cm-completionDetail",t.textContent=e.detail,t},position:80}),t.sort(((e,t)=>e.position-t.position)).map((e=>e.render))}(r),this.optionClass=r.optionClass,this.range=bA(s.length,n,r.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.dom.addEventListener("mousedown",(t=>{for(let i,n=t.target;n&&n!=this.dom;n=n.parentNode)if("LI"==n.nodeName&&(i=/-(\d+)$/.exec(n.id))&&+i[1]<s.length)return pA(e,s[+i[1]]),void t.preventDefault()})),this.list=this.dom.appendChild(this.createListBox(s,i.id,this.range)),this.list.addEventListener("scroll",(()=>{this.info&&this.view.requestMeasure(this.placeInfo)}))}mount(){this.updateSel()}update(e){var t,i,s;let n=e.state.field(this.stateField),r=e.startState.field(this.stateField);n!=r&&(this.updateSel(),(null===(t=n.open)||void 0===t?void 0:t.disabled)!=(null===(i=r.open)||void 0===i?void 0:i.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!(null===(s=n.open)||void 0===s?void 0:s.disabled)))}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfo)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=bA(t.options.length,t.selected,this.view.state.facet(AA).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(t.options,e.id,this.range)),this.list.addEventListener("scroll",(()=>{this.info&&this.view.requestMeasure(this.placeInfo)}))),this.updateSelectedOption(t.selected)){this.info&&(this.info.remove(),this.info=null);let{completion:i}=t.options[t.selected],{info:s}=i;if(!s)return;let n="string"==typeof s?document.createTextNode(s):s(i);if(!n)return;"then"in n?n.then((t=>{t&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(t)})).catch((e=>Oh(this.view.state,e,"completion info"))):this.addInfoPane(n)}}addInfoPane(e){let t=this.info=document.createElement("div");t.className="cm-tooltip cm-completionInfo",t.appendChild(e),this.dom.appendChild(t),this.view.requestMeasure(this.placeInfo)}updateSelectedOption(e){let t=null;for(let i=this.list.firstChild,s=this.range.from;i;i=i.nextSibling,s++)s==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),t=i):i.hasAttribute("aria-selected")&&i.removeAttribute("aria-selected");return t&&function(e,t){let i=e.getBoundingClientRect(),s=t.getBoundingClientRect();s.top<i.top?e.scrollTop-=i.top-s.top:s.bottom>i.bottom&&(e.scrollTop+=s.bottom-i.bottom)}(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),s=e.getBoundingClientRect(),n=this.space;if(!n){let e=this.dom.ownerDocument.defaultView||window;n={left:0,top:0,right:e.innerWidth,bottom:e.innerHeight}}if(s.top>Math.min(n.bottom,t.bottom)-10||s.bottom<Math.max(n.top,t.top)+10)return null;let r,o=this.view.textDirection==Fh.RTL,a=o,l=!1,h="",c="",d=t.left-n.left,u=n.right-t.right;if(a&&d<Math.min(i.width,u)?a=!1:!a&&u<Math.min(i.width,d)&&(a=!0),i.width<=(a?d:u))h=Math.max(n.top,Math.min(s.top,n.bottom-i.height))-t.top+"px",r=Math.min(400,a?d:u)+"px";else{l=!0,r=Math.min(400,(o?t.right:n.right-t.left)-30)+"px";let e=n.bottom-t.bottom;e>=i.height||e>t.top?h=s.bottom-t.top+"px":c=t.bottom-s.top+"px"}return{top:h,bottom:c,maxWidth:r,class:l?o?"left-narrow":"right-narrow":a?"left":"right"}}positionInfo(e){this.info&&(e?(this.info.style.top=e.top,this.info.style.bottom=e.bottom,this.info.style.maxWidth=e.maxWidth,this.info.className="cm-tooltip cm-completionInfo cm-completionInfo-"+e.class):this.info.style.top="-1e6px")}createListBox(e,t,i){const s=document.createElement("ul");s.id=t,s.setAttribute("role","listbox"),s.setAttribute("aria-expanded","true"),s.setAttribute("aria-label",this.view.state.phrase("Completions"));for(let n=i.from;n<i.to;n++){let{completion:i,match:r}=e[n];const o=s.appendChild(document.createElement("li"));o.id=t+"-"+n,o.setAttribute("role","option");let a=this.optionClass(i);a&&(o.className=a);for(let e of this.optionContent){let t=e(i,this.view.state,r);t&&o.appendChild(t)}}return i.from&&s.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&s.classList.add("cm-completionListIncompleteBottom"),s}}function yA(e){return t=>new vA(t,e)}function wA(e){return 100*(e.boost||0)+(e.apply?10:0)+(e.info?5:0)+(e.type?1:0)}class xA{constructor(e,t,i,s,n,r){this.options=e,this.attrs=t,this.tooltip=i,this.timestamp=s,this.selected=n,this.disabled=r}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new xA(this.options,SA(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,i,s,n){let r=function(e,t){let i=[],s=0;for(let n of e)if(n.hasResult())if(!1===n.result.filter){let e=n.result.getMatch;for(let t of n.result.options){let r=[1e9-s++];if(e)for(let i of e(t))r.push(i);i.push(new hA(t,n,r))}}else{let e,s=new gA(t.sliceDoc(n.from,n.to));for(let t of n.result.options)(e=s.match(t.label))&&(null!=t.boost&&(e[0]+=t.boost),i.push(new hA(t,n,e)))}let n=[],r=null,o=t.facet(AA).compareCompletions;for(let e of i.sort(((e,t)=>t.match[0]-e.match[0]||o(e.completion,t.completion))))!r||r.label!=e.completion.label||r.detail!=e.completion.detail||null!=r.type&&null!=e.completion.type&&r.type!=e.completion.type||r.apply!=e.completion.apply?n.push(e):wA(e.completion)>wA(r)&&(n[n.length-1]=e),r=e.completion;return n}(e,t);if(!r.length)return s&&e.some((e=>1==e.state))?new xA(s.options,s.attrs,s.tooltip,s.timestamp,s.selected,!0):null;let o=t.facet(AA).selectOnOpen?0:-1;if(s&&s.selected!=o&&-1!=s.selected){let e=s.options[s.selected].completion;for(let t=0;t<r.length;t++)if(r[t].completion==e){o=t;break}}return new xA(r,SA(i,o),{pos:e.reduce(((e,t)=>t.hasResult()?Math.min(e,t.from):e),1e8),create:yA(RA),above:n.aboveCursor},s?s.timestamp:Date.now(),o,!1)}map(e){return new xA(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class OA{constructor(e,t,i){this.active=e,this.id=t,this.open=i}static start(){return new OA(IA,"cm-ac-"+Math.floor(2e6*Math.random()).toString(36),null)}update(e){let{state:t}=e,i=t.facet(AA),s=(i.override||t.languageDataAt("autocomplete",cA(t)).map(mA)).map((t=>(this.active.find((e=>e.source==t))||new kA(t,this.active.some((e=>0!=e.state))?1:0)).update(e,i)));s.length==this.active.length&&s.every(((e,t)=>e==this.active[t]))&&(s=this.active);let n=this.open;e.selection||s.some((t=>t.hasResult()&&e.changes.touchesRange(t.from,t.to)))||!function(e,t){if(e==t)return!0;for(let i=0,s=0;;){for(;i<e.length&&!e[i].hasResult;)i++;for(;s<t.length&&!t[s].hasResult;)s++;let n=i==e.length,r=s==t.length;if(n||r)return n==r;if(e[i++].result!=t[s++].result)return!1}}(s,this.active)?n=xA.build(s,t,this.id,this.open,i):n&&n.disabled&&!s.some((e=>1==e.state))?n=null:n&&e.docChanged&&(n=n.map(e.changes)),!n&&s.every((e=>1!=e.state))&&s.some((e=>e.hasResult()))&&(s=s.map((e=>e.hasResult()?new kA(e.source,0):e)));for(let t of e.effects)t.is(DA)&&(n=n&&n.setSelected(t.value,this.id));return s==this.active&&n==this.open?this:new OA(s,this.id,n)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:CA}}const CA={"aria-autocomplete":"list"};function SA(e,t){let i={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":e};return t>-1&&(i["aria-activedescendant"]=e+"-"+t),i}const IA=[];function EA(e){return e.isUserEvent("input.type")?"input":e.isUserEvent("delete.backward")?"delete":null}class kA{constructor(e,t,i=-1){this.source=e,this.state=t,this.explicitPos=i}hasResult(){return!1}update(e,t){let i=EA(e),s=this;i?s=s.handleUserEvent(e,i,t):e.docChanged?s=s.handleChange(e):e.selection&&0!=s.state&&(s=new kA(s.source,0));for(let t of e.effects)if(t.is(QA))s=new kA(s.source,1,t.value?cA(e.state):-1);else if(t.is(MA))s=new kA(s.source,0);else if(t.is(TA))for(let e of t.value)e.source==s.source&&(s=e);return s}handleUserEvent(e,t,i){return"delete"!=t&&i.activateOnTyping?new kA(this.source,1):this.map(e.changes)}handleChange(e){return e.changes.touchesRange(cA(e.startState))?new kA(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new kA(this.source,this.state,e.mapPos(this.explicitPos))}}class BA extends kA{constructor(e,t,i,s,n){super(e,2,t),this.result=i,this.from=s,this.to=n}hasResult(){return!0}handleUserEvent(e,t,i){var s;let n=e.changes.mapPos(this.from),r=e.changes.mapPos(this.to,1),o=cA(e.state);if((this.explicitPos<0?o<=n:o<this.from)||o>r||"delete"==t&&cA(e.startState)==this.from)return new kA(this.source,"input"==t&&i.activateOnTyping?1:0);let a,l=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos);return function(e,t,i,s){if(!e)return!1;let n=t.sliceDoc(i,s);return"function"==typeof e?e(n,i,s,t):dA(e,!0).test(n)}(this.result.validFor,e.state,n,r)?new BA(this.source,l,this.result,n,r):this.result.update&&(a=this.result.update(this.result,n,r,new oA(e.state,o,l>=0)))?new BA(this.source,l,a,a.from,null!==(s=a.to)&&void 0!==s?s:cA(e.state)):new kA(this.source,1,l)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new kA(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new BA(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))}}const QA=ua.define(),MA=ua.define(),TA=ua.define({map:(e,t)=>e.map((e=>e.map(t)))}),DA=ua.define(),RA=jo.define({create:()=>OA.start(),update:(e,t)=>e.update(t),provide:e=>[Cu.from(e,(e=>e.tooltip)),kd.contentAttributes.from(e,(e=>e.attrs))]});function PA(e,t="option"){return i=>{let s=i.state.field(RA,!1);if(!s||!s.open||s.open.disabled||Date.now()-s.open.timestamp<i.state.facet(AA).interactionDelay)return!1;let n,r=1;"page"==t&&(n=function(e,t){let i=e.plugin(wu);if(!i)return null;let s=i.manager.tooltips.indexOf(t);return s<0?null:i.manager.tooltipViews[s]}(i,s.open.tooltip))&&(r=Math.max(2,Math.floor(n.dom.offsetHeight/n.dom.querySelector("li").offsetHeight)-1));let{length:o}=s.open.options,a=s.open.selected>-1?s.open.selected+r*(e?1:-1):e?0:o-1;return a<0?a="page"==t?0:o-1:a>=o&&(a="page"==t?o-1:0),i.dispatch({effects:DA.of(a)}),!0}}class LA{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}Eh.fromClass(class{constructor(e){this.view=e,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let t of e.state.field(RA).active)1==t.state&&this.startQuery(t)}update(e){let t=e.state.field(RA);if(!e.selectionSet&&!e.docChanged&&e.startState.field(RA)==t)return;let i=e.transactions.some((e=>(e.selection||e.docChanged)&&!EA(e)));for(let t=0;t<this.running.length;t++){let s=this.running[t];if(i||s.updates.length+e.transactions.length>50&&Date.now()-s.time>1e3){for(let t of s.context.abortListeners)try{t()}catch(e){Oh(this.view.state,e)}s.context.abortListeners=null,this.running.splice(t--,1)}else s.updates.push(...e.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=t.active.some((e=>1==e.state&&!this.running.some((t=>t.active.source==e.source))))?setTimeout((()=>this.startUpdate()),50):-1,0!=this.composing)for(let t of e.transactions)"input"==EA(t)?this.composing=2:2==this.composing&&t.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:e}=this.view,t=e.field(RA);for(let e of t.active)1!=e.state||this.running.some((t=>t.active.source==e.source))||this.startQuery(e)}startQuery(e){let{state:t}=this.view,i=cA(t),s=new oA(t,i,e.explicitPos==i),n=new LA(e,s);this.running.push(n),Promise.resolve(e.source(s)).then((e=>{n.context.aborted||(n.done=e||null,this.scheduleAccept())}),(e=>{this.view.dispatch({effects:MA.of(null)}),Oh(this.view.state,e)}))}scheduleAccept(){this.running.every((e=>void 0!==e.done))?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout((()=>this.accept()),50))}accept(){var e;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let t=[],i=this.view.state.facet(AA);for(let s=0;s<this.running.length;s++){let n=this.running[s];if(void 0===n.done)continue;if(this.running.splice(s--,1),n.done){let s=new BA(n.active.source,n.active.explicitPos,n.done,n.done.from,null!==(e=n.done.to)&&void 0!==e?e:cA(n.updates.length?n.updates[0].startState:this.view.state));for(let e of n.updates)s=s.update(e,i);if(s.hasResult()){t.push(s);continue}}let r=this.view.state.field(RA).active.find((e=>e.source==n.active.source));if(r&&1==r.state)if(null==n.done){let e=new kA(n.active.source,0);for(let t of n.updates)e=e.update(t,i);1!=e.state&&t.push(e)}else this.startQuery(r)}t.length&&this.view.dispatch({effects:TA.of(t)})}},{eventHandlers:{blur(){let e=this.view.state.field(RA,!1);e&&e.tooltip&&this.view.state.facet(AA).closeOnBlur&&this.view.dispatch({effects:MA.of(null)})},compositionstart(){this.composing=1},compositionend(){3==this.composing&&setTimeout((()=>this.view.dispatch({effects:QA.of(!1)})),20),this.composing=0}}});const FA=kd.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer",padding:"1px 3px",lineHeight:1.2}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class UA{constructor(e,t,i,s){this.field=e,this.line=t,this.from=i,this.to=s}}class zA{constructor(e,t,i){this.field=e,this.from=t,this.to=i}map(e){let t=e.mapPos(this.from,-1,Oo.TrackDel),i=e.mapPos(this.to,1,Oo.TrackDel);return null==t||null==i?null:new zA(this.field,t,i)}}class GA{constructor(e,t){this.lines=e,this.fieldPositions=t}instantiate(e,t){let i=[],s=[t],n=e.doc.lineAt(t),r=/^\s*/.exec(n.text)[0];for(let n of this.lines){if(i.length){let i=r,o=/^\t*/.exec(n)[0].length;for(let t=0;t<o;t++)i+=e.facet(Of);s.push(t+i.length-o),n=i+n.slice(o)}i.push(n),t+=n.length+1}return{text:i,ranges:this.fieldPositions.map((e=>new zA(e.field,s[e.line]+e.from,s[e.line]+e.to)))}}static parse(e){let t,i=[],s=[],n=[];for(let r of e.split(/\r\n?|\n/)){for(;t=/[#$]\{(?:(\d+)(?::([^}]*))?|([^}]*))\}/.exec(r);){let e=t[1]?+t[1]:null,o=t[2]||t[3]||"",a=-1;for(let t=0;t<i.length;t++)(null!=e?i[t].seq==e:o&&i[t].name==o)&&(a=t);if(a<0){let t=0;for(;t<i.length&&(null==e||null!=i[t].seq&&i[t].seq<e);)t++;i.splice(t,0,{seq:e,name:o}),a=t;for(let e of n)e.field>=a&&e.field++}n.push(new UA(a,s.length,t.index,t.index+o.length)),r=r.slice(0,t.index)+o+r.slice(t.index+t[0].length)}for(let e;e=/\\([{}])/.exec(r);){r=r.slice(0,e.index)+e[1]+r.slice(e.index+e[0].length);for(let t of n)t.line==s.length&&t.from>e.index&&(t.from--,t.to--)}s.push(r)}return new GA(s,n)}}let NA=ih.widget({widget:new class extends eh{toDOM(){let e=document.createElement("span");return e.className="cm-snippetFieldPosition",e}ignoreEvent(){return!1}}}),VA=ih.mark({class:"cm-snippetField"});class jA{constructor(e,t){this.ranges=e,this.active=t,this.deco=ih.set(e.map((e=>(e.from==e.to?NA:VA).range(e.from,e.to))))}map(e){let t=[];for(let i of this.ranges){let s=i.map(e);if(!s)return null;t.push(s)}return new jA(t,this.active)}selectionInsideField(e){return e.ranges.every((e=>this.ranges.some((t=>t.field==this.active&&t.from<=e.from&&t.to>=e.to))))}}const HA=ua.define({map:(e,t)=>e&&e.map(t)}),qA=ua.define(),XA=jo.define({create:()=>null,update(e,t){for(let i of t.effects){if(i.is(HA))return i.value;if(i.is(qA)&&e)return new jA(e.ranges,i.value)}return e&&t.docChanged&&(e=e.map(t.changes)),e&&t.selection&&!e.selectionInsideField(t.selection)&&(e=null),e},provide:e=>kd.decorations.from(e,(e=>e?e.deco:ih.none))});function WA(e,t){return Do.create(e.filter((e=>e.field==t)).map((e=>Do.range(e.from,e.to))))}function ZA(e){let t=GA.parse(e);return(e,i,s,n)=>{let{text:r,ranges:o}=t.instantiate(e.state,s),a={changes:{from:s,to:n,insert:to.of(r)},scrollIntoView:!0};if(o.length&&(a.selection=WA(o,0)),o.length>1){let t=new jA(o,0),i=a.effects=[HA.of(t)];void 0===e.state.field(XA,!1)&&i.push(ua.appendConfig.of([XA,JA,eb,FA]))}e.dispatch(e.state.update(a))}}function YA(e){return({state:t,dispatch:i})=>{let s=t.field(XA,!1);if(!s||e<0&&0==s.active)return!1;let n=s.active+e,r=e>0&&!s.ranges.some((t=>t.field==n+e));return i(t.update({selection:WA(s.ranges,n),effects:HA.of(r?null:new jA(s.ranges,n))})),!0}}const _A=[{key:"Tab",run:YA(1),shift:YA(-1)},{key:"Escape",run:({state:e,dispatch:t})=>!!e.field(XA,!1)&&(t(e.update({effects:HA.of(null)})),!0)}],KA=Lo.define({combine:e=>e.length?e[0]:_A}),JA=Yo.highest(Ld.compute([KA],(e=>e.facet(KA))));function $A(e,t){return Object.assign(Object.assign({},t),{apply:ZA(e)})}const eb=kd.domEventHandlers({mousedown(e,t){let i,s=t.state.field(XA,!1);if(!s||null==(i=t.posAtCoords({x:e.clientX,y:e.clientY})))return!1;let n=s.ranges.find((e=>e.from<=i&&e.to>=i));return!(!n||n.field==s.active||(t.dispatch({selection:WA(s.ranges,n.field),effects:HA.of(s.ranges.some((e=>e.field>n.field))?new jA(s.ranges,n.field):null)}),0))}}),tb={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},ib=ua.define({map(e,t){let i=t.mapPos(e,-1,Oo.TrackAfter);return null==i?void 0:i}}),sb=ua.define({map:(e,t)=>t.mapPos(e)}),nb=new class extends Ia{};nb.startSide=1,nb.endSide=-1;const rb=jo.define({create:()=>Qa.empty,update(e,t){if(t.selection){let i=t.state.doc.lineAt(t.selection.main.head).from,s=t.startState.doc.lineAt(t.startState.selection.main.head).from;i!=t.changes.mapPos(s,-1)&&(e=Qa.empty)}e=e.map(t.changes);for(let i of t.effects)i.is(ib)?e=e.update({add:[nb.range(i.value,i.value+1)]}):i.is(sb)&&(e=e.update({filter:e=>e!=i.value}));return e}});const ob="()[]{}<>";function ab(e){for(let t=0;t<8;t+=2)if(ob.charCodeAt(t)==e)return ob.charAt(t+1);return yo(e<128?e:e+1)}function lb(e,t){return e.languageDataAt("closeBrackets",t)[0]||tb}const hb="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),cb=kd.inputHandler.of(((e,t,i,s)=>{if((hb?e.composing:e.compositionStarted)||e.state.readOnly)return!1;let n=e.state.selection.main;if(s.length>2||2==s.length&&1==wo(vo(s,0))||t!=n.from||i!=n.to)return!1;let r=function(e,t){let i=lb(e,e.selection.main.head),s=i.brackets||tb.brackets;for(let n of s){let r=ab(vo(n,0));if(t==n)return r==n?gb(e,n,s.indexOf(n+n+n)>-1,i):fb(e,n,r,i.before||tb.before);if(t==r&&ub(e,e.selection.main.from))return mb(e,n,r)}return null}(e.state,s);return!!r&&(e.dispatch(r),!0)})),db=[{key:"Backspace",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=lb(e,e.selection.main.head).brackets||tb.brackets,s=null,n=e.changeByRange((t=>{if(t.empty){let s=function(e,t){let i=e.sliceString(t-2,t);return wo(vo(i,0))==i.length?i:i.slice(1)}(e.doc,t.head);for(let n of i)if(n==s&&pb(e.doc,t.head)==ab(vo(n,0)))return{changes:{from:t.head-n.length,to:t.head+n.length},range:Do.cursor(t.head-n.length)}}return{range:s=t}}));return s||t(e.update(n,{scrollIntoView:!0,userEvent:"delete.backward"})),!s}}];function ub(e,t){let i=!1;return e.field(rb).between(0,e.doc.length,(e=>{e==t&&(i=!0)})),i}function pb(e,t){let i=e.sliceString(t,t+2);return i.slice(0,wo(vo(i,0)))}function fb(e,t,i,s){let n=null,r=e.changeByRange((r=>{if(!r.empty)return{changes:[{insert:t,from:r.from},{insert:i,from:r.to}],effects:ib.of(r.to+t.length),range:Do.range(r.anchor+t.length,r.head+t.length)};let o=pb(e.doc,r.head);return!o||/\s/.test(o)||s.indexOf(o)>-1?{changes:{insert:t+i,from:r.head},effects:ib.of(r.head+t.length),range:Do.cursor(r.head+t.length)}:{range:n=r}}));return n?null:e.update(r,{scrollIntoView:!0,userEvent:"input.type"})}function mb(e,t,i){let s=null,n=e.selection.ranges.map((t=>t.empty&&pb(e.doc,t.head)==i?Do.cursor(t.head+i.length):s=t));return s?null:e.update({selection:Do.create(n,e.selection.mainIndex),scrollIntoView:!0,effects:e.selection.ranges.map((({from:e})=>sb.of(e)))})}function gb(e,t,i,s){let n=s.stringPrefixes||tb.stringPrefixes,r=null,o=e.changeByRange((s=>{if(!s.empty)return{changes:[{insert:t,from:s.from},{insert:t,from:s.to}],effects:ib.of(s.to+t.length),range:Do.range(s.anchor+t.length,s.head+t.length)};let o,a=s.head,l=pb(e.doc,a);if(l==t){if(Ab(e,a))return{changes:{insert:t+t,from:a},effects:ib.of(a+t.length),range:Do.cursor(a+t.length)};if(ub(e,a)){let s=i&&e.sliceDoc(a,a+3*t.length)==t+t+t;return{range:Do.cursor(a+t.length*(s?3:1)),effects:sb.of(a)}}}else{if(i&&e.sliceDoc(a-2*t.length,a)==t+t&&(o=bb(e,a-2*t.length,n))>-1&&Ab(e,o))return{changes:{insert:t+t+t+t,from:a},effects:ib.of(a+t.length),range:Do.cursor(a+t.length)};if(e.charCategorizer(a)(l)!=ya.Word&&bb(e,a,n)>-1&&!function(e,t,i,s){let n=uf(e).resolveInner(t,-1),r=s.reduce(((e,t)=>Math.max(e,t.length)),0);for(let o=0;o<5;o++){let o=e.sliceDoc(n.from,Math.min(n.to,n.from+i.length+r)),a=o.indexOf(i);if(!a||a>-1&&s.indexOf(o.slice(0,a))>-1){let t=n.firstChild;for(;t&&t.from==n.from&&t.to-t.from>i.length+a;){if(e.sliceDoc(t.to-i.length,t.to)==i)return!1;t=t.firstChild}return!0}let l=n.to==t&&n.parent;if(!l)break;n=l}return!1}(e,a,t,n))return{changes:{insert:t+t,from:a},effects:ib.of(a+t.length),range:Do.cursor(a+t.length)}}return{range:r=s}}));return r?null:e.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function Ab(e,t){let i=uf(e).resolveInner(t+1);return i.parent&&i.from==t}function bb(e,t,i){let s=e.charCategorizer(t);if(s(e.sliceDoc(t-1,t))!=ya.Word)return t;for(let n of i){let i=t-n.length;if(e.sliceDoc(i,t)==n&&s(e.sliceDoc(i-1,i))!=ya.Word)return i}return-1}const vb=[{key:"Ctrl-Space",run:e=>!!e.state.field(RA,!1)&&(e.dispatch({effects:QA.of(!0)}),!0)},{key:"Escape",run:e=>{let t=e.state.field(RA,!1);return!(!t||!t.active.some((e=>0!=e.state))||(e.dispatch({effects:MA.of(null)}),0))}},{key:"ArrowDown",run:PA(!0)},{key:"ArrowUp",run:PA(!1)},{key:"PageDown",run:PA(!0,"page")},{key:"PageUp",run:PA(!1,"page")},{key:"Enter",run:e=>{let t=e.state.field(RA,!1);return!(e.state.readOnly||!t||!t.open||t.open.selected<0||Date.now()-t.open.timestamp<e.state.facet(AA).interactionDelay||(t.open.disabled||pA(e,t.open.options[t.open.selected]),0))}}];function yb(){var e=arguments[0];"string"==typeof e&&(e=document.createElement(e));var t=1,i=arguments[1];if(i&&"object"==typeof i&&null==i.nodeType&&!Array.isArray(i)){for(var s in i)if(Object.prototype.hasOwnProperty.call(i,s)){var n=i[s];"string"==typeof n?e.setAttribute(s,n):null!=n&&(e[s]=n)}t++}for(;t<arguments.length;t++)wb(e,arguments[t]);return e}function wb(e,t){if("string"==typeof t)e.appendChild(document.createTextNode(t));else if(null==t);else if(null!=t.nodeType)e.appendChild(t);else{if(!Array.isArray(t))throw new RangeError("Unsupported child node: "+t);for(var i=0;i<t.length;i++)wb(e,t[i])}}Yo.highest(Ld.computeN([AA],(e=>e.facet(AA).defaultKeymap?[vb]:[])));class xb{constructor(e,t,i){this.from=e,this.to=t,this.diagnostic=i}}class Ob{constructor(e,t,i){this.diagnostics=e,this.panel=t,this.selected=i}static init(e,t,i){let s=e,n=i.facet(Lb).markerFilter;n&&(s=n(s));let r=ih.set(s.map((e=>e.from==e.to||e.from==e.to-1&&i.doc.lineAt(e.from).to==e.from?ih.widget({widget:new zb(e),diagnostic:e}).range(e.from):ih.mark({attributes:{class:"cm-lintRange cm-lintRange-"+e.severity},diagnostic:e}).range(e.from,e.to))),!0);return new Ob(r,t,Cb(r))}}function Cb(e,t=null,i=0){let s=null;return e.between(i,1e9,((e,i,{spec:n})=>{if(!t||n.diagnostic==t)return s=new xb(e,i,n.diagnostic),!1})),s}function Sb(e,t){return!(!e.effects.some((e=>e.is(Eb)))&&!e.changes.touchesRange(t.pos))}function Ib(e,t){return e.field(Qb,!1)?t:t.concat(ua.appendConfig.of([Qb,kd.decorations.compute([Qb],(e=>{let{selected:t,panel:i}=e.field(Qb);return t&&i&&t.from!=t.to?ih.set([Mb.range(t.from,t.to)]):ih.none})),Qu(Tb,{hideOn:Sb}),Hb]))}const Eb=ua.define(),kb=ua.define(),Bb=ua.define(),Qb=jo.define({create:()=>new Ob(ih.none,null,null),update(e,t){if(t.docChanged){let i=e.diagnostics.map(t.changes),s=null;if(e.selected){let n=t.changes.mapPos(e.selected.from,1);s=Cb(i,e.selected.diagnostic,n)||Cb(i,null,n)}e=new Ob(i,e.panel,s)}for(let i of t.effects)i.is(Eb)?e=Ob.init(i.value,e.panel,t.state):i.is(kb)?e=new Ob(e.diagnostics,i.value?Nb.open:null,e.selected):i.is(Bb)&&(e=new Ob(e.diagnostics,e.panel,i.value));return e},provide:e=>[Lu.from(e,(e=>e.panel)),kd.decorations.from(e,(e=>e.diagnostics))]}),Mb=ih.mark({class:"cm-lintRange cm-lintRange-active"});function Tb(e,t,i){let{diagnostics:s}=e.state.field(Qb),n=[],r=2e8,o=0;s.between(t-(i<0?1:0),t+(i>0?1:0),((e,s,{spec:a})=>{t>=e&&t<=s&&(e==s||(t>e||i>0)&&(t<s||i<0))&&(n.push(a.diagnostic),r=Math.min(e,r),o=Math.max(s,o))}));let a=e.state.facet(Lb).tooltipFilter;return a&&(n=a(n)),n.length?{pos:r,end:o,above:e.state.doc.lineAt(r).to<o,create:()=>({dom:Db(e,n)})}:null}function Db(e,t){return yb("ul",{class:"cm-tooltip-lint"},t.map((t=>Ub(e,t,!1))))}const Rb=e=>{let t=e.state.field(Qb,!1);return!(!t||!t.panel||(e.dispatch({effects:kb.of(!1)}),0))},Pb=Eh.fromClass(class{constructor(e){this.view=e,this.timeout=-1,this.set=!0;let{delay:t}=e.state.facet(Lb);this.lintTime=Date.now()+t,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,t)}run(){let e=Date.now();if(e<this.lintTime-10)setTimeout(this.run,this.lintTime-e);else{this.set=!1;let{state:e}=this.view,{sources:t}=e.facet(Lb);Promise.all(t.map((e=>Promise.resolve(e(this.view))))).then((t=>{let i=t.reduce(((e,t)=>e.concat(t)));this.view.state.doc==e.doc&&this.view.dispatch(function(e,t){return{effects:Ib(e,[Eb.of(t)])}}(this.view.state,i))}),(e=>{Oh(this.view.state,e)}))}}update(e){let t=e.state.facet(Lb);(e.docChanged||t!=e.startState.facet(Lb))&&(this.lintTime=Date.now()+t.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,t.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}}),Lb=Lo.define({combine:e=>Object.assign({sources:e.map((e=>e.source))},Sa(e.map((e=>e.config)),{delay:750,markerFilter:null,tooltipFilter:null})),enables:Pb});function Fb(e){let t=[];if(e)e:for(let{name:i}of e){for(let e=0;e<i.length;e++){let s=i[e];if(/[a-zA-Z]/.test(s)&&!t.some((e=>e.toLowerCase()==s.toLowerCase()))){t.push(s);continue e}}t.push("")}return t}function Ub(e,t,i){var s;let n=i?Fb(t.actions):[];return yb("li",{class:"cm-diagnostic cm-diagnostic-"+t.severity},yb("span",{class:"cm-diagnosticText"},t.renderMessage?t.renderMessage():t.message),null===(s=t.actions)||void 0===s?void 0:s.map(((i,s)=>{let r=s=>{s.preventDefault();let n=Cb(e.state.field(Qb).diagnostics,t);n&&i.apply(e,n.from,n.to)},{name:o}=i,a=n[s]?o.indexOf(n[s]):-1,l=a<0?o:[o.slice(0,a),yb("u",o.slice(a,a+1)),o.slice(a+1)];return yb("button",{type:"button",class:"cm-diagnosticAction",onclick:r,onmousedown:r,"aria-label":` Action: ${o}${a<0?"":` (access key "${n[s]})"`}.`},l)})),t.source&&yb("div",{class:"cm-diagnosticSource"},t.source))}class zb extends eh{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return yb("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class Gb{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(4294967295*Math.random()).toString(16),this.dom=Ub(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Nb{constructor(e){this.view=e,this.items=[],this.list=yb("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t=>{if(27==t.keyCode)Rb(this.view),this.view.focus();else if(38==t.keyCode||33==t.keyCode)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(40==t.keyCode||34==t.keyCode)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(36==t.keyCode)this.moveSelection(0);else if(35==t.keyCode)this.moveSelection(this.items.length-1);else if(13==t.keyCode)this.view.focus();else{if(!(t.keyCode>=65&&t.keyCode<=90&&this.selectedIndex>=0))return;{let{diagnostic:i}=this.items[this.selectedIndex],s=Fb(i.actions);for(let n=0;n<s.length;n++)if(s[n].toUpperCase().charCodeAt(0)==t.keyCode){let t=Cb(this.view.state.field(Qb).diagnostics,i);t&&i.actions[n].apply(e,t.from,t.to)}}}t.preventDefault()},onclick:e=>{for(let t=0;t<this.items.length;t++)this.items[t].dom.contains(e.target)&&this.moveSelection(t)}}),this.dom=yb("div",{class:"cm-panel-lint"},this.list,yb("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>Rb(this.view)},"×")),this.update()}get selectedIndex(){let e=this.view.state.field(Qb).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(Qb),i=0,s=!1,n=null;for(e.between(0,this.view.state.doc.length,((e,r,{spec:o})=>{let a,l=-1;for(let e=i;e<this.items.length;e++)if(this.items[e].diagnostic==o.diagnostic){l=e;break}l<0?(a=new Gb(this.view,o.diagnostic),this.items.splice(i,0,a),s=!0):(a=this.items[l],l>i&&(this.items.splice(i,l-i),s=!0)),t&&a.diagnostic==t.diagnostic?a.dom.hasAttribute("aria-selected")||(a.dom.setAttribute("aria-selected","true"),n=a):a.dom.hasAttribute("aria-selected")&&a.dom.removeAttribute("aria-selected"),i++}));i<this.items.length&&!(1==this.items.length&&this.items[0].diagnostic.from<0);)s=!0,this.items.pop();0==this.items.length&&(this.items.push(new Gb(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),s=!0),n?(this.list.setAttribute("aria-activedescendant",n.id),this.view.requestMeasure({key:this,read:()=>({sel:n.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:e,panel:t})=>{e.top<t.top?this.list.scrollTop-=t.top-e.top:e.bottom>t.bottom&&(this.list.scrollTop+=e.bottom-t.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),s&&this.sync()}sync(){let e=this.list.firstChild;function t(){let t=e;e=t.nextSibling,t.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)t();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=Cb(this.view.state.field(Qb).diagnostics,this.items[e].diagnostic);t&&this.view.dispatch({selection:{anchor:t.from,head:t.to},scrollIntoView:!0,effects:Bb.of(t)})}static open(e){return new Nb(e)}}function Vb(e,t='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${t}>${encodeURIComponent(e)}</svg>')`}function jb(e){return Vb(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${e}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const Hb=kd.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:jb("#d11")},".cm-lintRange-warning":{backgroundImage:jb("orange")},".cm-lintRange-info":{backgroundImage:jb("#999")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});class qb extends Fu{constructor(e){super(),this.diagnostics=e,this.severity=e.reduce(((e,t)=>{let i=t.severity;return"error"==i||"warning"==i&&"info"==e?i:e}),"info")}toDOM(e){let t=document.createElement("div");t.className="cm-lint-marker cm-lint-marker-"+this.severity;let i=this.diagnostics,s=e.state.facet(Jb).tooltipFilter;return s&&(i=s(i)),i.length&&(t.onmouseover=()=>function(e,t,i){function s(){let s=e.elementAtHeight(t.getBoundingClientRect().top+5-e.documentTop);e.coordsAtPos(s.from)&&e.dispatch({effects:Yb.of({pos:s.from,above:!1,create:()=>({dom:Db(e,i),getCoords:()=>t.getBoundingClientRect()})})}),t.onmouseout=t.onmousemove=null,function(e,t){let i=s=>{let n=t.getBoundingClientRect();if(!(s.clientX>n.left-10&&s.clientX<n.right+10&&s.clientY>n.top-10&&s.clientY<n.bottom+10)){for(let e=s.target;e;e=e.parentNode)if(1==e.nodeType&&e.classList.contains("cm-tooltip-lint"))return;window.removeEventListener("mousemove",i),e.state.field(_b)&&e.dispatch({effects:Yb.of(null)})}};window.addEventListener("mousemove",i)}(e,t)}let{hoverTime:n}=e.state.facet(Jb),r=setTimeout(s,n);t.onmouseout=()=>{clearTimeout(r),t.onmouseout=t.onmousemove=null},t.onmousemove=()=>{clearTimeout(r),r=setTimeout(s,n)}}(e,t,i)),t}}function Xb(e,t){let i=Object.create(null);for(let s of t){let t=e.lineAt(s.from);(i[t.from]||(i[t.from]=[])).push(s)}let s=[];for(let e in i)s.push(new qb(i[e]).range(+e));return Qa.of(s,!0)}const Wb=Nu({class:"cm-gutter-lint",markers:e=>e.state.field(Zb)}),Zb=jo.define({create:()=>Qa.empty,update(e,t){e=e.map(t.changes);let i=t.state.facet(Jb).markerFilter;for(let s of t.effects)if(s.is(Eb)){let n=s.value;i&&(n=i(n||[])),e=Xb(t.state.doc,n.slice(0))}return e}}),Yb=ua.define(),_b=jo.define({create:()=>null,update:(e,t)=>(e&&t.docChanged&&(e=Sb(t,e)?null:Object.assign(Object.assign({},e),{pos:t.changes.mapPos(e.pos)})),t.effects.reduce(((e,t)=>t.is(Yb)?t.value:e),e)),provide:e=>Cu.from(e)}),Kb=kd.baseTheme({".cm-gutter-lint":{width:"1.4em","& .cm-gutterElement":{padding:".2em"}},".cm-lint-marker":{width:"1em",height:"1em"},".cm-lint-marker-info":{content:Vb('<path fill="#aaf" stroke="#77e" stroke-width="6" stroke-linejoin="round" d="M5 5L35 5L35 35L5 35Z"/>')},".cm-lint-marker-warning":{content:Vb('<path fill="#fe8" stroke="#fd7" stroke-width="6" stroke-linejoin="round" d="M20 6L37 35L3 35Z"/>')},".cm-lint-marker-error":{content:Vb('<circle cx="20" cy="20" r="15" fill="#f87" stroke="#f43" stroke-width="6"/>')}}),Jb=Lo.define({combine:e=>Sa(e,{hoverTime:300,markerFilter:null,tooltipFilter:null})});function $b(e={}){return[Jb.of(e),Zb,Wb,Kb,_b]}const ev="#a6e22c",tv="#67d8ef",iv="#f8f8f2",sv="#75715e",nv="#ae81ff",rv="#FFFFFF",ov=[kd.theme({"&":{color:iv,backgroundColor:"#282923",fontSize:"15px",lineHeight:"16px",fontFamily:"Consolas, Menlo, Courier, monospace"},"& ::-webkit-scrollbar":{width:"15px",height:"15px"},"& ::-webkit-scrollbar-track":{background:"none"},"& ::-webkit-scrollbar-thumb":{backgroundColor:"#555652",width:"7px",border:"4px solid #282923"},"& ::-webkit-scrollbar-corner":{backgroundColor:"rgba(0,0,0,0)"},".cm-content":{caretColor:rv},"&.cm-editor":{height:"100%",width:"100%",fontSize:"15px",fontFamily:"Consolas, Menlo, Courier, monospace"},".cm-scroller":{lineHeight:"19px"},".cm-cursor, .cm-dropCursor":{borderLeftColor:rv},"&.cm-focused .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:"#3b3b32"},".cm-panels":{backgroundColor:"#21252b",color:iv},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:"#282923",color:"#90918b",border:"none"},".cm-activeLineGutter":{color:"#dadad3",backgroundColor:"#3e3d32"},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:"#353a42"},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:"#353a42",borderBottomColor:"#353a42"},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:"#3e3d32",color:iv}}},{dark:!0}),lm(nm.define([{tag:of.keyword,color:tv},{tag:[of.name,of.deleted,of.character,of.macroName],color:ev},{tag:[of.propertyName,of.punctuation],color:iv},{tag:[of.function(of.variableName),of.labelName],color:tv},{tag:[of.color,of.constant(of.name),of.standard(of.name)],color:"#d19a66"},{tag:[of.definition(of.name),of.separator],color:iv},{tag:[of.typeName,of.className,of.number,of.changed,of.annotation,of.modifier,of.self,of.namespace],color:nv},{tag:[of.logicOperator,of.arithmeticOperator,of.bitwiseOperator,of.typeOperator],color:"#f92472"},{tag:[of.meta,of.comment],color:sv},{tag:of.strong,fontWeight:"bold"},{tag:of.emphasis,fontStyle:"italic"},{tag:of.strikethrough,textDecoration:"line-through"},{tag:of.link,color:sv,textDecoration:"underline"},{tag:of.heading,fontWeight:"bold",color:ev},{tag:[of.atom,of.bool,of.special(of.variableName)],color:nv},{tag:[of.processingInstruction,of.string,of.inserted],color:"#e7db75"},{tag:of.invalid,color:"#ff0000"}]))];class av{constructor(e,t,i,s,n,r,o,a,l,h=0,c){this.p=e,this.stack=t,this.state=i,this.reducePos=s,this.pos=n,this.score=r,this.buffer=o,this.bufferBase=a,this.curContext=l,this.lookAhead=h,this.parent=c}toString(){return`[${this.stack.filter(((e,t)=>t%3==0)).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,i=0){let s=e.parser.context;return new av(e,[],t,i,i,0,[],0,s?new lv(s,s.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){let t=e>>19,i=65535&e,{parser:s}=this.p,n=s.dynamicPrecedence(i);if(n&&(this.score+=n),0==t)return this.pushState(s.getGoto(this.state,i,!0),this.reducePos),i<s.minRepeatTerm&&this.storeNode(i,this.reducePos,this.reducePos,4,!0),void this.reduceContext(i,this.reducePos);let r=this.stack.length-3*(t-1)-(262144&e?6:0),o=this.stack[r-2],a=this.stack[r-1],l=this.bufferBase+this.buffer.length-a;if(i<s.minRepeatTerm||131072&e){let e=s.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(i,o,e,l+4,!0)}if(262144&e)this.state=this.stack[r];else{let e=this.stack[r-3];this.state=s.getGoto(e,i,!0)}for(;this.stack.length>r;)this.stack.pop();this.reduceContext(i,o)}storeNode(e,t,i,s=4,n=!1){if(0==e&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let e=this,s=this.buffer.length;if(0==s&&e.parent&&(s=e.bufferBase-e.parent.bufferBase,e=e.parent),s>0&&0==e.buffer[s-4]&&e.buffer[s-1]>-1){if(t==i)return;if(e.buffer[s-2]>=t)return void(e.buffer[s-2]=i)}}if(n&&this.pos!=i){let n=this.buffer.length;if(n>0&&0!=this.buffer[n-4])for(;n>0&&this.buffer[n-2]>i;)this.buffer[n]=this.buffer[n-4],this.buffer[n+1]=this.buffer[n-3],this.buffer[n+2]=this.buffer[n-2],this.buffer[n+3]=this.buffer[n-1],n-=4,s>4&&(s-=4);this.buffer[n]=e,this.buffer[n+1]=t,this.buffer[n+2]=i,this.buffer[n+3]=s}else this.buffer.push(e,t,i,s)}shift(e,t,i){let s=this.pos;if(131072&e)this.pushState(65535&e,this.pos);else if(262144&e)this.pos=i,this.shiftContext(t,s),t<=this.p.parser.maxNode&&this.buffer.push(t,s,i,4);else{let n=e,{parser:r}=this.p;(i>this.pos||t<=r.maxNode)&&(this.pos=i,r.stateFlag(n,1)||(this.reducePos=i)),this.pushState(n,s),this.shiftContext(t,s),t<=r.maxNode&&this.buffer.push(t,s,i,4)}}apply(e,t,i){65536&e?this.reduce(e):this.shift(e,t,i)}useNode(e,t){let i=this.p.reused.length-1;(i<0||this.p.reused[i]!=e)&&(this.p.reused.push(e),i++);let s=this.pos;this.reducePos=this.pos=s+e.length,this.pushState(t,s),this.buffer.push(i,s,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let i=e.buffer.slice(t),s=e.bufferBase+t;for(;e&&s==e.bufferBase;)e=e.parent;return new av(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,s,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let i=e<=this.p.parser.maxNode;i&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,i?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new cv(this);;){let i=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(0==i)return!1;if(!(65536&i))return!0;t.reduce(i)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let i=[];for(let s,n=0;n<t.length;n+=2)(s=t[n+1])!=this.state&&this.p.parser.hasAction(s,e)&&i.push(t[n],s);if(this.stack.length<120)for(let e=0;i.length<8&&e<t.length;e+=2){let s=t[e+1];i.some(((e,t)=>1&t&&e==s))||i.push(t[e],s)}t=i}let i=[];for(let e=0;e<t.length&&i.length<4;e+=2){let s=t[e+1];if(s==this.state)continue;let n=this.split();n.pushState(s,this.pos),n.storeNode(0,n.pos,n.pos,4,!0),n.shiftContext(t[e],this.pos),n.score-=200,i.push(n)}return i}forceReduce(){let e=this.p.parser.stateSlot(this.state,5);if(!(65536&e))return!1;let{parser:t}=this.p;if(!t.validAction(this.state,e)){let i=e>>19,s=65535&e,n=this.stack.length-3*i;if(n<0||t.getGoto(this.stack[n],s,!1)<0)return!1;this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(e),!0}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(3!=this.stack.length)return!1;let{parser:e}=this.p;return 65535==e.data[e.stateSlot(this.state,1)]&&!e.stateSlot(this.state,4)}restart(){this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||-3!=this.buffer[e])&&this.buffer.push(this.curContext.hash,this.reducePos,this.reducePos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||-4!=this.buffer[e])&&this.buffer.push(this.lookAhead,this.reducePos,this.reducePos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new lv(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class lv{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}var hv;!function(e){e[e.Insert=200]="Insert",e[e.Delete=190]="Delete",e[e.Reduce=100]="Reduce",e[e.MaxNext=4]="MaxNext",e[e.MaxInsertStackDepth=300]="MaxInsertStackDepth",e[e.DampenInsertStackDepth=120]="DampenInsertStackDepth"}(hv||(hv={}));class cv{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=65535&e,i=e>>19;0==i?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=3*(i-1);let s=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=s}}class dv{constructor(e,t,i){this.stack=e,this.pos=t,this.index=i,this.buffer=e.buffer,0==this.index&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new dv(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;null!=e&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,0==this.index&&this.maybeNext()}fork(){return new dv(this.stack,this.pos,this.index)}}class uv{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const pv=new uv;class fv{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=pv,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let i=this.range,s=this.rangeIndex,n=this.pos+e;for(;n<i.from;){if(!s)return null;let e=this.ranges[--s];n-=i.from-e.to,i=e}for(;t<0?n>i.to:n>=i.to;){if(s==this.ranges.length-1)return null;let e=this.ranges[++s];n+=e.from-i.to,i=e}return n}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t,i,s=this.chunkOff+e;if(s>=0&&s<this.chunk.length)t=this.pos+e,i=this.chunk.charCodeAt(s);else{let s=this.resolveOffset(e,1);if(null==s)return-1;if((t=s)>=this.chunk2Pos&&t<this.chunk2Pos+this.chunk2.length)i=this.chunk2.charCodeAt(t-this.chunk2Pos);else{let e=this.rangeIndex,s=this.range;for(;s.to<=t;)s=this.ranges[++e];this.chunk2=this.input.chunk(this.chunk2Pos=t),t+this.chunk2.length>s.to&&(this.chunk2=this.chunk2.slice(0,s.to-t)),i=this.chunk2.charCodeAt(0)}}return t>=this.token.lookAhead&&(this.token.lookAhead=t+1),i}acceptToken(e,t=0){let i=t?this.resolveOffset(t,-1):this.pos;if(null==i||i<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=i}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=pv,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let i="";for(let s of this.ranges){if(s.from>=t)break;s.to>e&&(i+=this.input.read(Math.max(s.from,e),Math.min(s.to,t)))}return i}}class mv{constructor(e,t){this.data=e,this.id=t}token(e,t){!function(e,t,i,s){let n=0,r=1<<s,{parser:o}=i.p,{dialect:a}=o;e:for(;r&e[n];){let i=e[n+1];for(let s=n+3;s<i;s+=2)if((e[s+1]&r)>0){let i=e[s];if(a.allows(i)&&(-1==t.token.value||t.token.value==i||o.overrides(i,t.token.value))){t.acceptToken(i);break}}let s=t.next,l=0,h=e[n+2];if(!(t.next<0&&h>l&&65535==e[i+3*h-3]&&65535==e[i+3*h-3])){for(;l<h;){let r=l+h>>1,o=i+r+(r<<1),a=e[o],c=e[o+1]||65536;if(s<a)h=r;else{if(!(s>=c)){n=e[o+2],t.advance();continue e}l=r+1}}break}n=e[i+3*h-1]}}(this.data,e,t,this.id)}}mv.prototype.contextual=mv.prototype.fallback=mv.prototype.extend=!1;class gv{constructor(e,t={}){this.token=e,this.contextual=!!t.contextual,this.fallback=!!t.fallback,this.extend=!!t.extend}}function Av(e,t=Uint16Array){if("string"!=typeof e)return e;let i=null;for(let s=0,n=0;s<e.length;){let r=0;for(;;){let t=e.charCodeAt(s++),i=!1;if(126==t){r=65535;break}t>=92&&t--,t>=34&&t--;let n=t-32;if(n>=46&&(n-=46,i=!0),r+=n,i)break;r*=46}i?i[n++]=r:i=new t(r)}return i}const bv="undefined"!=typeof process&&process.env&&/\bparse\b/.test(process.env.LOG);let vv=null;var yv,wv;function xv(e,t,i){let s=e.cursor(fp.IncludeAnonymous);for(s.moveTo(t);;)if(!(i<0?s.childBefore(t):s.childAfter(t)))for(;;){if((i<0?s.to<t:s.from>t)&&!s.type.isError)return i<0?Math.max(0,Math.min(s.to-1,t-25)):Math.min(e.length,Math.max(s.from+1,t+25));if(i<0?s.prevSibling():s.nextSibling())break;if(!s.parent())return i<0?0:e.length}}!function(e){e[e.Margin=25]="Margin"}(yv||(yv={}));class Ov{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?xv(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?xv(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let i=this.trees[t],s=this.index[t];if(s==i.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let n=i.children[s],r=this.start[t]+i.positions[s];if(r>e)return this.nextStart=r,null;if(n instanceof mp){if(r==e){if(r<this.safeFrom)return null;let e=r+n.length;if(e<=this.safeTo){let t=n.prop(lp.lookAhead);if(!t||e+t<this.fragment.to)return n}}this.index[t]++,r+n.length>=Math.max(this.safeFrom,e)&&(this.trees.push(n),this.start.push(r),this.index.push(0))}else this.index[t]++,this.nextStart=r+n.length}}}class Cv{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map((e=>new uv))}getActions(e){let t=0,i=null,{parser:s}=e.p,{tokenizers:n}=s,r=s.stateSlot(e.state,3),o=e.curContext?e.curContext.hash:0,a=0;for(let s=0;s<n.length;s++){if(!(1<<s&r))continue;let l=n[s],h=this.tokens[s];if((!i||l.fallback)&&((l.contextual||h.start!=e.pos||h.mask!=r||h.context!=o)&&(this.updateCachedToken(h,l,e),h.mask=r,h.context=o),h.lookAhead>h.end+25&&(a=Math.max(h.lookAhead,a)),0!=h.value)){let s=t;if(h.extended>-1&&(t=this.addActions(e,h.extended,h.end,t)),t=this.addActions(e,h.value,h.end,t),!l.extend&&(i=h,t>s))break}}for(;this.actions.length>t;)this.actions.pop();return a&&e.setLookAhead(a),i||e.pos!=this.stream.end||((i=new uv).value=e.p.parser.eofTerm,i.start=i.end=e.pos,t=this.addActions(e,i.value,i.end,t)),this.mainToken=i,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new uv,{pos:i,p:s}=e;return t.start=i,t.end=Math.min(i+1,s.stream.end),t.value=i==s.stream.end?s.parser.eofTerm:0,t}updateCachedToken(e,t,i){let s=this.stream.clipPos(i.pos);if(t.token(this.stream.reset(s,e),i),e.value>-1){let{parser:t}=i.p;for(let s=0;s<t.specialized.length;s++)if(t.specialized[s]==e.value){let n=t.specializers[s](this.stream.read(e.start,e.end),i);if(n>=0&&i.p.parser.dialect.allows(n>>1)){1&n?e.extended=n>>1:e.value=n>>1;break}}}else e.value=0,e.end=this.stream.clipPos(s+1)}putAction(e,t,i,s){for(let t=0;t<s;t+=3)if(this.actions[t]==e)return s;return this.actions[s++]=e,this.actions[s++]=t,this.actions[s++]=i,s}addActions(e,t,i,s){let{state:n}=e,{parser:r}=e.p,{data:o}=r;for(let e=0;e<2;e++)for(let a=r.stateSlot(n,e?2:1);;a+=3){if(65535==o[a]){if(1!=o[a+1]){0==s&&2==o[a+1]&&(s=this.putAction(Qv(o,a+2),t,i,s));break}a=Qv(o,a+2)}o[a]==t&&(s=this.putAction(Qv(o,a+1),t,i,s))}return s}}!function(e){e[e.Distance=5]="Distance",e[e.MaxRemainingPerStep=3]="MaxRemainingPerStep",e[e.MinBufferLengthPrune=500]="MinBufferLengthPrune",e[e.ForceReduceLimit=10]="ForceReduceLimit",e[e.CutDepth=15e3]="CutDepth",e[e.CutTo=9e3]="CutTo"}(wv||(wv={}));class Sv{constructor(e,t,i,s){this.parser=e,this.input=t,this.ranges=s,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.stream=new fv(t,s),this.tokens=new Cv(e,this.stream),this.topTerm=e.top[1];let{from:n}=s[0];this.stacks=[av.start(this,e.top[0],n)],this.fragments=i.length&&this.stream.end-n>4*e.bufferLength?new Ov(i,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e,t,i=this.stacks,s=this.minStackPos,n=this.stacks=[];for(let r=0;r<i.length;r++){let o=i[r];for(;;){if(this.tokens.mainToken=null,o.pos>s)n.push(o);else{if(this.advanceStack(o,n,i))continue;{e||(e=[],t=[]),e.push(o);let i=this.tokens.getMainToken(o);t.push(i.value,i.end)}}break}}if(!n.length){let t=e&&function(e){let t=null;for(let i of e){let e=i.p.stoppedAt;(i.pos==i.p.stream.end||null!=e&&i.pos>e)&&i.p.parser.stateFlag(i.state,2)&&(!t||t.score<i.score)&&(t=i)}return t}(e);if(t)return this.stackToTree(t);if(this.parser.strict)throw bv&&e&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+s);this.recovering||(this.recovering=5)}if(this.recovering&&e){let i=null!=this.stoppedAt&&e[0].pos>this.stoppedAt?e[0]:this.runRecovery(e,t,n);if(i)return this.stackToTree(i.forceAll())}if(this.recovering){let e=1==this.recovering?1:3*this.recovering;if(n.length>e)for(n.sort(((e,t)=>t.score-e.score));n.length>e;)n.pop();n.some((e=>e.reducePos>s))&&this.recovering--}else if(n.length>1)e:for(let e=0;e<n.length-1;e++){let t=n[e];for(let i=e+1;i<n.length;i++){let s=n[i];if(t.sameState(s)||t.buffer.length>500&&s.buffer.length>500){if(!((t.score-s.score||t.buffer.length-s.buffer.length)>0)){n.splice(e--,1);continue e}n.splice(i--,1)}}}this.minStackPos=n[0].pos;for(let e=1;e<n.length;e++)n[e].pos<this.minStackPos&&(this.minStackPos=n[e].pos);return null}stopAt(e){if(null!=this.stoppedAt&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,i){let s=e.pos,{parser:n}=this,r=bv?this.stackID(e)+" -> ":"";if(null!=this.stoppedAt&&s>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let t=e.curContext&&e.curContext.tracker.strict,i=t?e.curContext.hash:0;for(let o=this.fragments.nodeAt(s);o;){let s=this.parser.nodeSet.types[o.type.id]==o.type?n.getGoto(e.state,o.type.id):-1;if(s>-1&&o.length&&(!t||(o.prop(lp.contextHash)||0)==i))return e.useNode(o,s),bv&&console.log(r+this.stackID(e)+` (via reuse of ${n.getName(o.type.id)})`),!0;if(!(o instanceof mp)||0==o.children.length||o.positions[0]>0)break;let a=o.children[0];if(!(a instanceof mp&&0==o.positions[0]))break;o=a}}let o=n.stateSlot(e.state,4);if(o>0)return e.reduce(o),bv&&console.log(r+this.stackID(e)+` (via always-reduce ${n.getName(65535&o)})`),!0;if(e.stack.length>=15e3)for(;e.stack.length>9e3&&e.forceReduce(););let a=this.tokens.getActions(e);for(let o=0;o<a.length;){let l=a[o++],h=a[o++],c=a[o++],d=o==a.length||!i,u=d?e:e.split();if(u.apply(l,h,c),bv&&console.log(r+this.stackID(u)+` (via ${65536&l?`reduce of ${n.getName(65535&l)}`:"shift"} for ${n.getName(h)} @ ${s}${u==e?"":", split"})`),d)return!0;u.pos>s?t.push(u):i.push(u)}return!1}advanceFully(e,t){let i=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>i)return Iv(e,t),!0}}runRecovery(e,t,i){let s=null,n=!1;for(let r=0;r<e.length;r++){let o=e[r],a=t[r<<1],l=t[1+(r<<1)],h=bv?this.stackID(o)+" -> ":"";if(o.deadEnd){if(n)continue;if(n=!0,o.restart(),bv&&console.log(h+this.stackID(o)+" (restarted)"),this.advanceFully(o,i))continue}let c=o.split(),d=h;for(let e=0;c.forceReduce()&&e<10&&(bv&&console.log(d+this.stackID(c)+" (via force-reduce)"),!this.advanceFully(c,i));e++)bv&&(d=this.stackID(c)+" -> ");for(let e of o.recoverByInsert(a))bv&&console.log(h+this.stackID(e)+" (via recover-insert)"),this.advanceFully(e,i);this.stream.end>o.pos?(l==o.pos&&(l++,a=0),o.recoverByDelete(a,l),bv&&console.log(h+this.stackID(o)+` (via recover-delete ${this.parser.getName(a)})`),Iv(o,i)):(!s||s.score<o.score)&&(s=o)}return s}stackToTree(e){return e.close(),mp.build({buffer:dv.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(vv||(vv=new WeakMap)).get(e);return t||vv.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function Iv(e,t){for(let i=0;i<t.length;i++){let s=t[i];if(s.pos==e.pos&&s.sameState(e))return void(t[i].score<e.score&&(t[i]=e))}t.push(e)}class Ev{constructor(e,t,i){this.source=e,this.flags=t,this.disabled=i}allows(e){return!this.disabled||0==this.disabled[e]}}const kv=e=>e;class Bv extends Tp{constructor(e){if(super(),this.wrappers=[],14!=e.version)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let i=0;i<e.repeatNodeCount;i++)t.push("");let i=Object.keys(e.topRules).map((t=>e.topRules[t][1])),s=[];for(let e=0;e<t.length;e++)s.push([]);function n(e,t,i){s[e].push([t,t.deserialize(String(i))])}if(e.nodeProps)for(let t of e.nodeProps){let e=t[0];"string"==typeof e&&(e=lp[e]);for(let i=1;i<t.length;){let s=t[i++];if(s>=0)n(s,e,t[i++]);else{let r=t[i+-s];for(let o=-s;o>0;o--)n(t[i++],e,r);i++}}}this.nodeSet=new dp(t.map(((t,n)=>cp.define({name:n>=this.minRepeatTerm?void 0:t,id:n,props:s[n],top:i.indexOf(n)>-1,error:0==n,skipped:e.skippedNodes&&e.skippedNodes.indexOf(n)>-1})))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=rp;let r=Av(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let e=0;e<this.specializerSpecs.length;e++)this.specialized[e]=this.specializerSpecs[e].term;this.specializers=this.specializerSpecs.map(Tv),this.states=Av(e.states,Uint32Array),this.data=Av(e.stateData),this.goto=Av(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map((e=>"number"==typeof e?new mv(r,e):e)),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,i){let s=new Sv(this,e,t,i);for(let n of this.wrappers)s=n(s,e,t,i);return s}getGoto(e,t,i=!1){let s=this.goto;if(t>=s[0])return-1;for(let n=s[t+1];;){let t=s[n++],r=1&t,o=s[n++];if(r&&i)return o;for(let i=n+(t>>1);n<i;n++)if(s[n]==e)return o;if(r)return-1}}hasAction(e,t){let i=this.data;for(let s=0;s<2;s++)for(let n,r=this.stateSlot(e,s?2:1);;r+=3){if(65535==(n=i[r])){if(1!=i[r+1]){if(2==i[r+1])return Qv(i,r+2);break}n=i[r=Qv(i,r+2)]}if(n==t||0==n)return Qv(i,r+1)}return 0}stateSlot(e,t){return this.states[6*e+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){if(t==this.stateSlot(e,4))return!0;for(let i=this.stateSlot(e,1);;i+=3){if(65535==this.data[i]){if(1!=this.data[i+1])return!1;i=Qv(this.data,i+2)}if(t==Qv(this.data,i+1))return!0}}nextStates(e){let t=[];for(let i=this.stateSlot(e,1);;i+=3){if(65535==this.data[i]){if(1!=this.data[i+1])break;i=Qv(this.data,i+2)}if(!(1&this.data[i+2])){let e=this.data[i+1];t.some(((t,i)=>1&i&&t==e))||t.push(this.data[i],e)}}return t}overrides(e,t){let i=Mv(this.data,this.tokenPrecTable,t);return i<0||Mv(this.data,this.tokenPrecTable,e)<i}configure(e){let t=Object.assign(Object.create(Bv.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let i=this.topRules[e.top];if(!i)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=i}return e.tokenizers&&(t.tokenizers=this.tokenizers.map((t=>{let i=e.tokenizers.find((e=>e.from==t));return i?i.to:t}))),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map(((i,s)=>{let n=e.specializers.find((e=>e.from==i.external));if(!n)return i;let r=Object.assign(Object.assign({},i),{external:n.to});return t.specializers[s]=Tv(r),r}))),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),null!=e.strict&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),null!=e.bufferLength&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return null==t?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),i=t.map((()=>!1));if(e)for(let s of e.split(" ")){let e=t.indexOf(s);e>=0&&(i[e]=!0)}let s=null;for(let e=0;e<t.length;e++)if(!i[e])for(let i,n=this.dialects[t[e]];65535!=(i=this.data[n++]);)(s||(s=new Uint8Array(this.maxTerm+1)))[i]=1;return new Ev(e,i,s)}static deserialize(e){return new Bv(e)}}function Qv(e,t){return e[t]|e[t+1]<<16}function Mv(e,t,i){for(let s,n=t;65535!=(s=e[n]);n++)if(s==i)return n-t;return-1}function Tv(e){if(e.external){let t=e.extend?1:0;return(i,s)=>e.external(i,s)<<1|t}return e.get}const Dv=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],Rv=new class{constructor(e){this.start=e.start,this.shift=e.shift||kv,this.reduce=e.reduce||kv,this.reuse=e.reuse||kv,this.hash=e.hash||(()=>0),this.strict=!1!==e.strict}}({start:!1,shift:(e,t)=>5==t||6==t||299==t?e:300==t,strict:!1}),Pv=new gv(((e,t)=>{let{next:i}=e;(125==i||-1==i||t.context)&&t.canShift(297)&&e.acceptToken(297)}),{contextual:!0,fallback:!0}),Lv=new gv(((e,t)=>{let i,{next:s}=e;Dv.indexOf(s)>-1||(47!=s||47!=(i=e.peek(1))&&42!=i)&&125!=s&&59!=s&&-1!=s&&!t.context&&t.canShift(294)&&e.acceptToken(294)}),{contextual:!0}),Fv=new gv(((e,t)=>{let{next:i}=e;if((43==i||45==i)&&(e.advance(),i==e.next)){e.advance();let i=!t.context&&t.canShift(2);e.acceptToken(i?2:3)}}),{contextual:!0}),Uv=new gv((e=>{for(let t=!1,i=0;;i++){let{next:s}=e;if(s<0){i&&e.acceptToken(295);break}if(96==s){i?e.acceptToken(295):e.acceptToken(296,1);break}if(123==s&&t){1==i?e.acceptToken(4,1):e.acceptToken(295,-1);break}if(10==s&&i){e.advance(),e.acceptToken(295);break}92==s&&e.advance(),t=36==s,e.advance()}})),zv=new gv(((e,t)=>{if(101==e.next&&t.dialectEnabled(1)){e.advance();for(let t=0;t<6;t++){if(e.next!="xtends".charCodeAt(t))return;e.advance()}e.next>=57&&e.next<=65||e.next>=48&&e.next<=90||95==e.next||e.next>=97&&e.next<=122||e.next>160||e.acceptToken(1)}})),Gv=Up({"get set async static":of.modifier,"for while do if else switch try catch finally return throw break continue default case":of.controlKeyword,"in of await yield void typeof delete instanceof":of.operatorKeyword,"let var const function class extends":of.definitionKeyword,"import export from":of.moduleKeyword,"with debugger as new":of.keyword,TemplateString:of.special(of.string),super:of.atom,BooleanLiteral:of.bool,this:of.self,null:of.null,Star:of.modifier,VariableName:of.variableName,"CallExpression/VariableName TaggedTemplateExpression/VariableName":of.function(of.variableName),VariableDefinition:of.definition(of.variableName),Label:of.labelName,PropertyName:of.propertyName,PrivatePropertyName:of.special(of.propertyName),"CallExpression/MemberExpression/PropertyName":of.function(of.propertyName),"FunctionDeclaration/VariableDefinition":of.function(of.definition(of.variableName)),"ClassDeclaration/VariableDefinition":of.definition(of.className),PropertyDefinition:of.definition(of.propertyName),PrivatePropertyDefinition:of.definition(of.special(of.propertyName)),UpdateOp:of.updateOperator,LineComment:of.lineComment,BlockComment:of.blockComment,Number:of.number,String:of.string,ArithOp:of.arithmeticOperator,LogicOp:of.logicOperator,BitOp:of.bitwiseOperator,CompareOp:of.compareOperator,RegExp:of.regexp,Equals:of.definitionOperator,Arrow:of.function(of.punctuation),": Spread":of.punctuation,"( )":of.paren,"[ ]":of.squareBracket,"{ }":of.brace,"InterpolationStart InterpolationEnd":of.special(of.brace),".":of.derefOperator,", ;":of.separator,"@":of.meta,TypeName:of.typeName,TypeDefinition:of.definition(of.typeName),"type enum interface implements namespace module declare":of.definitionKeyword,"abstract global Privacy readonly override":of.modifier,"is keyof unique infer":of.operatorKeyword,JSXAttributeValue:of.attributeValue,JSXText:of.content,"JSXStartTag JSXStartCloseTag JSXSelfCloseEndTag JSXEndTag":of.angleBracket,"JSXIdentifier JSXNameSpacedName":of.tagName,"JSXAttribute/JSXIdentifier JSXAttribute/JSXNameSpacedName":of.attributeName,"JSXBuiltin/JSXIdentifier":of.standard(of.tagName)}),Nv={__proto__:null,export:18,as:23,from:29,default:32,async:37,function:38,this:50,true:58,false:58,null:68,void:72,typeof:76,super:92,new:126,await:143,yield:145,delete:146,class:156,extends:158,public:213,private:213,protected:213,readonly:215,instanceof:234,satisfies:237,in:238,const:240,import:272,keyof:327,unique:331,infer:337,is:373,abstract:393,implements:395,type:397,let:400,var:402,interface:409,enum:413,namespace:419,module:421,declare:425,global:429,for:450,of:459,while:462,with:466,do:470,if:474,else:476,switch:480,case:486,try:492,catch:496,finally:500,return:504,throw:508,break:512,continue:516,debugger:520},Vv={__proto__:null,async:113,get:115,set:117,public:175,private:175,protected:175,static:177,abstract:179,override:181,readonly:187,accessor:189,new:377},jv={__proto__:null,"<":133},Hv=Bv.deserialize({version:14,states:"$CWO`QdOOO$}QdOOO)WQ(C|O'#ChO)_OWO'#DYO+jQdO'#D_O+zQdO'#DjO$}QdO'#DtO.OQdO'#DzOOQ(C['#ET'#ETO.fQ`O'#EQOOQO'#IW'#IWO.nQ`O'#GgOOQO'#Ee'#EeO.yQ`O'#EdO/OQ`O'#EdO1QQ(C|O'#JQO3nQ(C|O'#JRO4_Q`O'#FSO4dQ!bO'#FkOOQ(C['#F['#F[O4oO#tO'#F[O4}Q&jO'#FrO6bQ`O'#FqOOQ(C['#JR'#JROOQ(CW'#JQ'#JQOOQS'#Jk'#JkO6gQ`O'#H{O6lQ(ChO'#H|OOQS'#Iu'#IuOOQS'#IO'#IOQ`QdOOO$}QdO'#DlO6tQ`O'#GgO6yQ&jO'#CmO7XQ`O'#EcO7dQ`O'#EnO7iQ&jO'#FZO8TQ`O'#GgO8YQ`O'#GkO8eQ`O'#GkO8sQ`O'#GnO8sQ`O'#GoO8sQ`O'#GqO6tQ`O'#GtO9dQ`O'#GwO:uQ`O'#CdO;VQ`O'#HUO;_Q`O'#H[O;_Q`O'#H^O`QdO'#H`O;_Q`O'#HbO;_Q`O'#HeO;dQ`O'#HkO;iQ(CjO'#HqO$}QdO'#HsO;tQ(CjO'#HuO<PQ(CjO'#HwO6lQ(ChO'#HyO<[Q(C|O'#ChO<xQ,UO'#DdQOQ`OOO=mQaO'#D{O6yQ&jO'#EcO={Q`O'#EcO>WQpO'#FZO$}QdO'#DZOOOW'#IQ'#IQO>`OWO,59tOOQ(C[,59t,59tO>kQdO'#IRO?OQ`O'#JSOAQQtO'#JSO)jQdO'#JSOAXQ`O,59yOAoQ`O'#EeOA|Q`O'#J`OBXQ`O'#J_OBXQ`O'#J_OBaQ`O,5;ROBfQ`O'#J^OOQ(C[,5:U,5:UOBmQdO,5:UODnQ(C|O,5:`OE_Q`O,5:fOEdQ`O'#J[OF^Q(ChO'#J]O8YQ`O'#J[OFeQ`O'#J[OFmQ`O,5;QOFrQ`O'#J[OOQ(C]'#Ch'#ChO$}QdO'#DzOGfQpO,5:lOOQO'#JX'#JXOOQO-E<U-E<UO6tQ`O,5=ROG|Q`O,5=ROHRQdO,5;OOJRQ&jO'#E`OKcQ`O,5;OOLxQ&jO'#DnOMPQdO'#DsOMZQ,UO,5;XOMcQ,UO,5;XO$}QdO,5;XOOQS'#Ez'#EzOOQS'#E|'#E|O$}QdO,5;YO$}QdO,5;YO$}QdO,5;YO$}QdO,5;YO$}QdO,5;YO$}QdO,5;YO$}QdO,5;YO$}QdO,5;YO$}QdO,5;YO$}QdO,5;YO$}QdO,5;YOOQS'#FQ'#FQOMqQdO,5;kOOQ(C[,5;p,5;pOOQ(C[,5;q,5;qO! qQ`O,5;qOOQ(C[,5;r,5;rO$}QdO'#I^O! yQ(ChO,5<_OJRQ&jO,5;YO!!hQ&jO,5;YO$}QdO,5;nO!!oQ!bO'#FaO!#lQ!bO'#JdO!#WQ!bO'#JdO!#sQ!bO'#JdOOQO'#Jd'#JdO!$XQ!bO,5;yOOOO,5<V,5<VO!$jQdO'#FmOOOO'#I]'#I]O4oO#tO,5;vO!$qQ!bO'#FoOOQ(C[,5;v,5;vO!%bQ7]O'#CsOOQ(C]'#Cv'#CvO!%uQ`O'#CvO!%zOWO'#CzO!&hQ&kO,5<[O!&oQ`O,5<^O!(RQMhO'#F|O!(`Q`O'#F}O!(eQ`O'#F}O!(jQMhO'#GRO!)iQ,UO'#GVO!*_Q7]O'#I}OOQ(C]'#I}'#I}O!+eQaO'#I|O!+sQ`O'#I{O!+{Q`O'#CrOOQ(C]'#Ct'#CtOOQ(C]'#C}'#C}OOQ(C]'#DP'#DPO.iQ`O'#DROKhQ&jO'#FtOKhQ&jO'#FvO!,TQ`O'#FxO!,YQ`O'#FyO!(eQ`O'#GPOKhQ&jO'#GUO!,_Q`O'#EfO!,yQ`O,5<]O`QdO,5>gOOQS'#Ix'#IxOOQS,5>h,5>hOOQS-E;|-E;|O!.xQ(C|O,5:WOOQ(CX'#Cp'#CpO!/lQ&kO,5=ROOQO'#Cf'#CfO!/}Q(ChO'#IyO6bQ`O'#IyO;dQ`O,59XO!0`Q!bO,59XO!0hQ&jO,59XO6yQ&jO,59XO!0sQ`O,5;OO!0{Q`O'#HTO!1ZQ`O'#JoO$}QdO,5;sO!1cQ,UO,5;uO!1hQ`O,5=nO!1mQ`O,5=nO!1rQ`O,5=nO6lQ(ChO,5=nO!2QQ`O'#EgO!2wQ,UO'#EhOOQ(CW'#J^'#J^O!3OQ(ChO'#JlO6lQ(ChO,5=VO8sQ`O,5=]OOQP'#Cs'#CsO!3ZQ!bO,5=YO!3cQ!cO,5=ZO!3nQ`O,5=]O!3sQpO,5=`O;dQ`O'#GyO6tQ`O'#G{O!3{Q`O'#G{O6yQ&jO'#HOO!4QQ`O'#HOOOQS,5=c,5=cO!4VQ`O'#HPO!4_Q`O'#CmO!4dQ`O,59OO!4nQ`O,59OO!6sQdO,59OOOQS,59O,59OO!7QQ(ChO,59OO$}QdO,59OO!7]QdO'#HWOOQS'#HX'#HXOOQS'#HY'#HYO`QdO,5=pO!7mQ`O,5=pO`QdO,5=vO`QdO,5=xO!7rQ`O,5=zO`QdO,5=|O!7wQ`O,5>PO!7|QdO,5>VOOQS,5>],5>]O$}QdO,5>]O6lQ(ChO,5>_OOQS,5>a,5>aO!<QQ`O,5>aOOQS,5>c,5>cO!<QQ`O,5>cOOQS,5>e,5>eO!<VQ!bO'#DWOOQ(CW'#JU'#JUO$}QdO'#JUO!<tQ!bO'#JUO!=cQ!bO'#DeO!=tQ,UO'#DeO!@PQdO'#DeO!@WQ`O'#JTO!@`Q`O,5:OO!@eQ`O'#EiO!@sQ`O'#JaO!@{Q`O,5;SO!AcQ,UO'#DeO!AmQ,UO'#EOOOQ(C[,5:g,5:gO$}QdO,5:gOJRQ&jO,5:gO!BjQaO,5:gO;dQ`O,5:}O!0`Q!bO,5:}O!0hQ&jO,5:}O6yQ&jO,5:}O!BuQpO,59uOOOW-E<O-E<OOOQ(C[1G/`1G/`O!BzQtO,5>mO)jQdO,5>mOOQO,5>s,5>sO!CUQdO'#IROOQO-E<P-E<PO!CcQ`O,5?nO!CkQtO,5?nO!CrQ`O,5?yOOQ(C[1G/e1G/eO$}QdO,5?zO!CzQ`O'#IXOOQO-E<V-E<VO!CrQ`O,5?yOOQ(CW1G0m1G0mOOQ(C[1G/p1G/pOOQ(C[1G0Q1G0QO!D`Q`O,5?vO8YQ`O,5?vO!DhQ`O,5?vOOQ(CW'#E_'#E_O$}QdO,5?wO!DvQ(ChO,5?wO!EXQ(ChO,5?wO!E`Q`O'#IZO!D`Q`O,5?vOOQ(CW1G0l1G0lOMZQ,UO,5:nOMfQ,UO,5:nOOQO,5:p,5:pO!E}Q`O,5:pO!FVQ&kO1G2mO6tQ`O1G2mOOQ(C[1G0j1G0jO!FhQ(C|O1G0jO!GmQ(CyO,5:zOOQ(C]'#F{'#F{O!JWQ(C}O'#I}OHRQdO1G0jO!J}Q&kO'#JVO!KXQ`O,5:YO!K^QtO'#JWO$}QdO'#JWO!KhQ`O,5:_OOQ(C]'#DW'#DWOOQ(C[1G0s1G0sO$}QdO1G0sOOQ(C[1G1]1G1]O!KmQ`O1G0sO!NUQ(C|O1G0tO!N]Q(C|O1G0tO#!vQ(C|O1G0tO#!}Q(C|O1G0tO#%XQ(C|O1G0tO#%oQ(C|O1G0tO#(iQ(C|O1G0tO#(pQ(C|O1G0tO#+ZQ(C|O1G0tO#+bQ(C|O1G0tO#-YQ(C|O1G0tO#0YQ!LUO'#ChO#2WQ!LUO1G1VO#4UQ!LUO'#JRO! tQ`O1G1]O#4iQ(C|O,5>xOOQ(CW-E<[-E<[O#5]Q(C}O1G0tOOQ(C[1G0t1G0tO#7hQ(C|O1G1YO#8[Q!bO,5;}O#8dQ!bO,5<OO#8lQ!bO'#FfO#9TQ`O'#FeOOQO'#Je'#JeOOQO'#I['#I[O#9YQ!bO1G1eOOQ(C[1G1e1G1eOOOO1G1p1G1pO#9kQ!LUO'#JQO#9uQ`O,5<XOMqQdO,5<XOOOO-E<Z-E<ZOOQ(C[1G1b1G1bOOQ(C[,5<Z,5<ZO#9zQ!bO,5<ZOOQ(C],59b,59bOJRQ&jO'#C|OOOW'#IP'#IPO#:POWO,59fOOQ(C],59f,59fO$}QdO1G1vO!,YQ`O'#I`O#:[Q`O,5<oOOQ(C],5<l,5<lOOQO'#Gb'#GbOKhQ&jO,5<{OOQO'#Gd'#GdOKhQ&jO,5<}OJRQ&jO,5=POOQO1G1x1G1xO#:gQqO'#CpO#:zQqO,5<hO#;RQ`O'#JhO6tQ`O'#JhO#;aQ`O,5<jOKhQ&jO,5<iO#;fQ`O'#GOO#;qQ`O,5<iO#;vQqO'#F{O#<TQqO'#JiO#<_Q`O'#JiOJRQ&jO'#JiO#<dQ`O,5<mOOQ(CW'#Di'#DiO#<iQ!bO'#GWO!)dQ,UO'#GWO#<zQ`O'#GYO#=PQ`O'#G[O!(eQ`O'#G_O#=UQ(ChO'#IbO#=aQ,UO,5<qOOQ(C],5<q,5<qO#=hQ,UO'#GWO#=vQ,UO'#GXO#>OQ,UO'#GXOOQ(C],5=Q,5=QOKhQ&jO,5?hOKhQ&jO,5?hO#>TQ`O'#IcO#>`Q`O,5?gO#>hQ`O,59^O#?XQ&kO,59mOOQ(C],59m,59mO#?zQ&kO,5<`O#@mQ&kO,5<bO#@wQ`O,5<dOOQ(C],5<e,5<eO#@|Q`O,5<kO#ARQ&kO,5<pOHRQdO1G1wO#AcQ`O1G1wOOQS1G4R1G4ROOQ(C[1G/r1G/rO! qQ`O1G/rOOQS1G2m1G2mOJRQ&jO1G2mO$}QdO1G2mOJRQ&jO1G2mO#AhQaO1G2mO#CQQ&jO'#E`OOQ(CW,5?e,5?eO#C[Q(ChO,5?eOOQS1G.s1G.sO;dQ`O1G.sO!0`Q!bO1G.sO!0hQ&jO1G.sO#CmQ`O1G0jO#CrQ`O'#ChO#C}Q`O'#JpO#DVQ`O,5=oO#D[Q`O'#JpO#DaQ`O'#JpO#DiQ`O'#IkO#DwQ`O,5@ZO#EPQtO1G1_OOQ(C[1G1a1G1aO6tQ`O1G3YO#EWQ`O1G3YO#E]Q`O1G3YO#EbQ`O1G3YOOQS1G3Y1G3YO8YQ`O'#J_O8YQ`O'#EiO$}QdO'#EiO8YQ`O'#IeO#EgQ(ChO,5@WOOQS1G2q1G2qO!3nQ`O1G2wOJRQ&jO1G2tO#ErQ`O1G2tOOQS1G2u1G2uOJRQ&jO1G2uO#EwQaO1G2uO#FPQ,UO'#GsOOQS1G2w1G2wO!)dQ,UO'#IgO!3sQpO1G2zOOQS1G2z1G2zOOQS,5=e,5=eO#FXQ&kO,5=gO6tQ`O,5=gO#=PQ`O,5=jO6bQ`O,5=jO!0`Q!bO,5=jO!0hQ&jO,5=jO6yQ&jO,5=jO#FjQ`O'#JnO#FuQ`O,5=kOOQS1G.j1G.jO#FzQ(ChO1G.jO#GVQ`O1G.jO#G[Q`O1G.jO6lQ(ChO1G.jO#GdQtO,5@]O#GnQ`O,5@]O#GyQdO,5=rO#HQQ`O,5=rO8YQ`O,5@]OOQS1G3[1G3[O`QdO1G3[OOQS1G3b1G3bOOQS1G3d1G3dO;_Q`O1G3fO#HVQdO1G3hO#LTQdO'#HgOOQS1G3k1G3kO#LbQ`O'#HmO;dQ`O'#HoOOQS1G3q1G3qO#LjQdO1G3qO6lQ(ChO1G3wOOQS1G3y1G3yOOQ(CW'#GS'#GSO6lQ(ChO1G3{O6lQ(ChO1G3}O$!kQ`O,5?pOMqQdO,5;TO8YQ`O,5;TO;dQ`O,5:POMqQdO,5:PO$}QdO'#JUO!0`Q!bO,5:PO$!pQ!LUO,5:POOQO,5;T,5;TO$!zQ,UO'#ISO$#bQ`O,5?oOOQ(C[1G/j1G/jO$#jQ,UO'#IYO$#tQ`O,5?{OOQ(CW1G0n1G0nO!=tQ,UO,5:PO$#|Q,UO'#E[OOQ(CW'#EZ'#EZO$$sQ(DjO'#E[O$%_Q,UO'#EPOOQO'#IV'#IVO$%pQ,UO,5:jOOQ(C[,5:j,5:jO$&mQ,UO'#EPO$&zQ,UO'#EPO$'[Q,UO'#EbO$'_Q,UO'#E[O$'xQ,UO'#E[O$%_Q,UO'#E[O$(iQ`O1G0RO$(nQqO1G0ROOQ(C[1G0R1G0RO$}QdO1G0ROJRQ&jO1G0ROOQ(C[1G0i1G0iO;dQ`O1G0iO!0`Q!bO1G0iO!0hQ&jO1G0iOOOW1G/a1G/aO$(uQpO,5<_O$(}QtO1G4XOOQO1G4_1G4_O$}QdO,5>mO$)XQ`O1G5YO$)aQ`O1G5eO$)iQtO1G5fO8YQ`O,5>sO$)sQ`O1G5bO$)sQ`O1G5bO8YQ`O1G5bO$){Q(C|O1G5cO$}QdO1G5cO$*]Q(ChO1G5cO$*nQ`O,5>uO8YQ`O,5>uOOQO,5>u,5>uO$+SQ`O,5>uOOQO-E<X-E<XOOQO1G0Y1G0YOOQO1G0[1G0[O! tQ`O1G0[OOQS7+(X7+(XOJRQ&jO7+(XO$}QdO7+(XOJRQ&jO7+(XO$+bQaO7+(XO$+pQ&kO7+(XO$,RQ(C}O,59mO$.ZQ(C}O,5<`O$0fQ(C}O,5<bO$2qQ(C}O,5<pOOQ(C[7+&U7+&UO$5SQ(C|O7+&UO$5vQ&jO'#ITO$6QQ`O,5?qOOQ(C]1G/t1G/tO$6YQdO'#IUO$6gQ`O,5?rO$6oQtO,5?rOOQ(C[1G/y1G/yO$6yQ`O7+&_OOQ(C[7+&_7+&_O$7OQ!LUO,5:`O$}QdO7+&qO$7YQ!LUO,5:WOOQ(C[7+&w7+&wOOQO1G1i1G1iOOQO1G1j1G1jO$7gQ$ISO,5<QOMqQdO,5<POOQO-E<Y-E<YOOQ(C[7+'P7+'POOOO7+'[7+'[OOOO1G1s1G1sO$7rQ`O1G1sOOQ(C[1G1u1G1uO$7wQqO,59hOOOW-E;}-E;}OOQ(C]1G/Q1G/QO$8OQ(C|O7+'bOOQ(C],5>z,5>zO$8rQ`O,5>zOOQ(C]1G2Z1G2ZP$8wQ`O'#I`POQ(C]-E<^-E<^O$9hQ&kO1G2gO$:ZQ&kO1G2iO$:eQqO1G2kOOQ(C]1G2S1G2SO$:lQ`O'#I_O$:zQ`O,5@SO$:zQ`O,5@SO$;SQ`O,5@SO$;_Q`O,5@SOOQO1G2U1G2UO$;mQ&kO1G2TOKhQ&jO1G2TO$;}QMhO'#IaO$<_Q`O,5@TOJRQ&jO,5@TO$<gQqO,5@TOOQ(C]1G2X1G2XOOQ(CW,5<r,5<rOOQ(CW,5<s,5<sO$<qQ`O,5<sO#<uQ`O,5<sO!0`Q!bO,5<rOOQO'#GZ'#GZO$<vQ`O,5<tOOQ(CW,5<v,5<vO$<qQ`O,5<yOOQO,5>|,5>|OOQO-E<`-E<`OOQ(C]1G2]1G2]O!)dQ,UO,5<rO$=OQ`O,5<sO#<zQ`O,5<tO!)dQ,UO,5<sO$=ZQ&kO1G5SO$=eQ&kO1G5SOOQO,5>},5>}OOQO-E<a-E<aOOQP1G.x1G.xO!1cQ,UO,59oO$}QdO,59oO$=rQ`O1G2OOKhQ&jO1G2VO$=wQ(C|O7+'cOOQ(C[7+'c7+'cOHRQdO7+'cOOQ(C[7+%^7+%^O$>kQqO'#JjO$(iQ`O7+(XO$>uQ`O7+(XO$>}QqO7+(XO$?XQ(CyO'#ChO$?lQ(CyO,5<wO$@^Q`O,5<wOOQ(CW1G5P1G5POOQS7+$_7+$_O;dQ`O7+$_O!0`Q!bO7+$_OHRQdO7+&UO$@cQ`O'#IjO$@tQ`O,5@[OOQO1G3Z1G3ZO6tQ`O,5@[O$@tQ`O,5@[O$@|Q`O,5@[OOQO,5?V,5?VOOQO-E<i-E<iOOQ(C[7+&y7+&yO$ARQ`O7+(tO6lQ(ChO7+(tO6tQ`O7+(tO$AWQ`O7+(tO$A]Q`O,5;TOOQ(CW,5?P,5?POOQ(CW-E<c-E<cOOQS7+(c7+(cO$AbQ(CyO7+(`OJRQ&jO7+(`O$AlQqO7+(aOOQS7+(a7+(aOJRQ&jO7+(aO$AsQ`O'#JmO$BOQ`O,5=_OOQO,5?R,5?ROOQO-E<e-E<eOOQS7+(f7+(fO$CUQ,UO'#G|OOQS1G3R1G3ROJRQ&jO1G3RO$}QdO1G3ROJRQ&jO1G3RO$C]QaO1G3RO$CkQ&kO1G3RO6lQ(ChO1G3UO#=PQ`O1G3UO6bQ`O1G3UO!0`Q!bO1G3UO!0hQ&jO1G3UO$C|Q`O'#IiO$DXQ`O,5@YO$DaQ,UO,5@YOOQ(CW1G3V1G3VOOQS7+$U7+$UO$DiQ`O7+$UO6lQ(ChO7+$UO$DnQ`O7+$UO$}QdO1G5wO$}QdO1G5xO$DsQdO1G3^O$DzQ`O1G3^O$EPQdO1G3^O$EWQ(ChO1G5wOOQS7+(v7+(vO6lQ(ChO7+)QO`QdO7+)SOOQS'#Js'#JsOOQS'#Il'#IlO$EbQdO,5>ROOQS,5>R,5>RO$}QdO'#HhO$EoQ`O'#HjOOQS,5>X,5>XO8YQ`O,5>XOOQS,5>Z,5>ZOOQS7+)]7+)]OOQS7+)c7+)cOOQS7+)g7+)gOOQS7+)i7+)iO$EtQ!bO1G5[O$FYQ!LUO1G0oO$FdQ`O1G0oOOQO1G/k1G/kO$FoQ!LUO1G/kO$FyQ`O,5?pO;dQ`O1G/kOMqQdO'#DeOOQO,5>n,5>nOOQO-E<Q-E<QOOQO,5>t,5>tOOQO-E<W-E<WO!0`Q!bO1G/kO$GOQ7[O,5:lO$HOQ(DjO,5:vO$%_Q,UO,5:kO$HjQ,UO,5:kO$HwQ,UO,5:kO$IXQ,UO,5:vO$IrQ,UO,5:vO$%_Q,UO,5:vO;dQ`O,5:kOOQO,5:v,5:vO$}QdO,5:vO$JcQ(ChO,5:vO$JnQ(ChO,5:vO!0`Q!bO,5:kOOQO-E<T-E<TOOQ(C[1G0U1G0UOOQO,5:|,5:|O$J|Q(ChO,5:vOOQ(C[7+%m7+%mO$(iQ`O7+%mO$(nQqO7+%mOOQ(C[7+&T7+&TO;dQ`O7+&TO!0`Q!bO7+&TO$KbQ`O7+*|O$KbQ`O7+*|O$KjQ(C|O7+*}O$}QdO7+*}OOQO1G4a1G4aO8YQ`O1G4aO$KzQ`O1G4aOOQO7+%v7+%vO$(iQ`O<<KsO$LYQ`O<<KsO$LbQqO<<KsOOQS<<Ks<<KsOJRQ&jO<<KsO$}QdO<<KsOJRQ&jO<<KsO$LlQaO<<KsO$LzQ(C}O1G2gO% VQ(C}O1G2iO%#bQ(C}O1G2TO%%sQ&kO,5>oOOQO-E<R-E<RO%%}QtO,5>pO$}QdO,5>pOOQO-E<S-E<SO%&XQ`O1G5^OOQ(C[<<Iy<<IyO%&aQ!LUO1G0jO%(kQ!LUO1G0tO%(rQ!LUO1G0tO%*vQ!LUO1G0tO%*}Q!LUO1G0tO%,rQ!LUO1G0tO%-YQ!LUO1G0tO%/mQ!LUO1G0tO%/tQ!LUO1G0tO%1xQ!LUO1G0tO%2PQ!LUO1G0tO%3wQ!LUO1G0tO%4[Q(C|O<<J]O%5aQ!LVO1G0tO%7VQ!LVO'#I}O%7aQ!LUO1G1YOMqQdO'#FhOOQO'#Jf'#JfOOQO1G1l1G1lO%7nQ`O1G1kO%7sQ!LUO,5>xOOOO7+'_7+'_OOOW1G/S1G/SOOQ(C]1G4f1G4fOKhQ&jO7+(VO%7}Q`O,5>yO6tQ`O,5>yOOQO-E<]-E<]O%8]Q`O1G5nO%8]Q`O1G5nO%8eQ`O1G5nO%8pQ&kO7+'oO%9QQqO,5>{O%9[Q`O,5>{OJRQ&jO,5>{OOQO-E<_-E<_O%9aQqO1G5oO%9kQ`O1G5oOOQ(CW1G2_1G2_O$<qQ`O1G2_OOQ(CW1G2^1G2^O%9sQ`O1G2`OJRQ&jO1G2`OOQ(CW1G2e1G2eO!0`Q!bO1G2^O#<uQ`O1G2_O%9xQ`O1G2`O%:QQ`O1G2_OKhQ&jO7+*nOOQ(C]1G/Z1G/ZO%:]Q`O1G/ZOOQ(C]7+'j7+'jO%:bQ&kO7+'qO%:rQ(C|O<<J}OOQ(C[<<J}<<J}OJRQ&jO'#IdO%;fQ`O,5@UOJRQ&jO1G2cOOQS<<Gy<<GyO;dQ`O<<GyO%;nQ(C|O<<IpOOQ(C[<<Ip<<IpOOQO,5?U,5?UO%<bQ`O,5?UO%<gQ`O,5?UOOQO-E<h-E<hO%<oQ`O1G5vO%<oQ`O1G5vO6tQ`O1G5vO%<wQ`O<<L`OOQS<<L`<<L`O%<|Q`O<<L`O6lQ(ChO<<L`O%=RQ`O1G0oOOQS<<Kz<<KzO$AbQ(CyO<<KzOOQS<<K{<<K{O$AlQqO<<K{O%=WQ,UO'#IfO%=cQ`O,5@XOMqQdO,5@XOOQS1G2y1G2yO%=kQ(DjO'#JUO%>VQdO'#JUO%>^Q,UO'#E[O%>tQ(ChO'#E[O$$sQ(DjO'#E[O$%hQ,UO'#G}OOQO'#Ih'#IhO%?YQ,UO,5=hOOQS,5=h,5=hO%?aQ,UO'#E[O%?rQ,UO'#E[O%@YQ,UO'#E[O%@vQ,UO'#G}O%AXQ`O7+(mO%A^Q`O7+(mO%AfQqO7+(mOOQS7+(m7+(mOJRQ&jO7+(mO$}QdO7+(mOJRQ&jO7+(mO%ApQaO7+(mOOQS7+(p7+(pO6lQ(ChO7+(pO#=PQ`O7+(pO6bQ`O7+(pO!0`Q!bO7+(pO%BOQ`O,5?TOOQO-E<g-E<gOOQO'#HQ'#HQO%BZQ`O1G5tO6lQ(ChO<<GpOOQS<<Gp<<GpO%BcQ`O<<GpO%BhQ`O7++cO%BmQ`O7++dOOQS7+(x7+(xO%BrQ`O7+(xO%BwQdO7+(xO%COQ`O7+(xO$}QdO7++cO$}QdO7++dOOQS<<Ll<<LlOOQS<<Ln<<LnOOQS-E<j-E<jOOQS1G3m1G3mO%CTQ`O,5>SOOQS,5>U,5>UO%CYQ`O1G3sO8YQ`O7+&ZOMqQdO7+&ZOOQ(CW1G5[1G5[OOQO7+%V7+%VO%C_Q!LUO1G5fO;dQ`O7+%VO;dQ`O1G0VOOQO1G0b1G0bO$}QdO1G0bO%CiQ(ChO1G0bO%CtQ(ChO1G0bO!0`Q!bO1G0VO$%_Q,UO1G0VO%DSQ,UO1G0VO%DaQ(DjO1G0bO%D{Q,UO1G0VO$%_Q,UO1G0bO%E]Q,UO1G0bO%EvQ(ChO1G0bOOQO1G0V1G0VO%F[Q(C|O1G0bOOQ(C[<<IX<<IXOOQ(C[<<Io<<IoO;dQ`O<<IoO%FfQ`O<<NhO%FnQ(C|O<<NiOOQO7+){7+){O8YQ`O7+){OOQSANA_ANA_OJRQ&jOANA_O$(iQ`OANA_O%GOQ`OANA_O%GWQqOANA_O$}QdOANA_OJRQ&jOANA_O%GbQ(C}O7+'oO%IsQ(C}O7+'qO%LUQtO1G4[O%L`Q!LUO7+&UO%MUQ!LVO,59mO& YQ!LVO,5<`O&#aQ!LVO,5<bO&%SQ!LVO,5<pO&&xQ!LUO7+'bO&'VQ!LUO7+'cO&'dQ`O,5<SOOQO7+'V7+'VO&'iQ&kO<<KqOOQO1G4e1G4eO&'pQ`O1G4eO&'{Q`O1G4eO&(ZQ`O7++YO&(ZQ`O7++YOJRQ&jO1G4gO&(cQqO1G4gO&(mQ`O7++ZOOQ(CW7+'y7+'yO$<qQ`O7+'zO&(uQqO7+'zOOQ(CW7+'x7+'xO$<qQ`O7+'yO&(|Q`O7+'zOJRQ&jO7+'zO#<uQ`O7+'yO&)RQ&kO<<NYOOQ(C]7+$u7+$uO&)]QqO,5?OOOQO-E<b-E<bO&)gQ(CyO7+'}OOQSAN=eAN=eO6tQ`O1G4pOOQO1G4p1G4pO&)wQ`O1G4pO&)|Q`O7++bO&)|Q`O7++bO6lQ(ChOANAzO&*UQ`OANAzOOQSANAzANAzOOQSANAfANAfOOQSANAgANAgO&*ZQ`O,5?QOOQO-E<d-E<dO&*fQ!LUO1G5sO#=PQ`O,5=iO6bQ`O,5=iO&,vQtO'#ChO&-QQ,UO,5:vO&-[Q,UO,5:vO!0`Q!bO,5=iOOQO-E<f-E<fOOQS1G3S1G3SO%>VQdO,5<tO%=kQ(DjO,5=iO$HOQ(DjO,5:vO$%hQ,UO,5=iO&-lQ,UO,5=iO&-}Q,UO,5:vOOQS<<LX<<LXOJRQ&jO<<LXO%AXQ`O<<LXO&.eQ`O<<LXO&.mQqO<<LXO$}QdO<<LXOJRQ&jO<<LXOOQS<<L[<<L[O6lQ(ChO<<L[O#=PQ`O<<L[O6bQ`O<<L[O&.wQ,UO1G4oO&/PQ`O7++`OOQSAN=[AN=[O6lQ(ChOAN=[OOQS<<N}<<N}OOQS<= O<= OOOQS<<Ld<<LdO&/XQ`O<<LdO&/^QdO<<LdO&/eQ`O<<N}O&/jQ`O<= OOOQS1G3n1G3nO;dQ`O7+)_O&/oQ`O<<IuO&/zQ!LUO<<IuOOQO<<Hq<<HqOOQO7+%q7+%qO%F[Q(C|O7+%|OOQO7+%|7+%|O$}QdO7+%|O&0UQ(ChO7+%|O;dQ`O7+%qO!0`Q!bO7+%qO$%_Q,UO7+%qO&0aQ(ChO7+%|O&0oQ,UO7+%qO&0|Q(ChO7+%|O&1bQ(DjO7+%|O&1lQ,UO7+%qO$%_Q,UO7+%|OOQ(C[AN?ZAN?ZOOQO<<Mg<<MgO$(iQ`OG26yOOQSG26yG26yOJRQ&jOG26yO&1|Q`OG26yO&2UQqOG26yO&2`Q!LUO<<J]O&2mQ!LVO1G2TO&4wQ!LVO1G2gO&7OQ!LVO1G2iO&8qQ!LUO<<J}O&9OQ!LUO<<IpOOQO1G1n1G1nOKhQ&jOANA]OOQO7+*P7+*PO&9]Q`O7+*PO&9hQ`O<<NtO&9pQqO7+*ROOQ(CW<<Kf<<KfO$<qQ`O<<KfOOQ(CW<<Ke<<KeO&9zQqO<<KfO$<qQ`O<<KeOOQO7+*[7+*[O6tQ`O7+*[O&:RQ`O<<N|OOQSG27fG27fO6lQ(ChOG27fOMqQdO1G4lO&:ZQ`O7++_O6lQ(ChO1G3TO#=PQ`O1G3TO&:cQ,UO1G0bO6bQ`O1G3TO!0`Q!bO1G3TO$%hQ,UO1G3TO%=kQ(DjO1G3TO%DaQ(DjO1G0bO&:mQ,UO1G3TO%AXQ`OANAsOOQSANAsANAsOJRQ&jOANAsO&;OQ`OANAsO&;WQqOANAsOOQSANAvANAvO6lQ(ChOANAvO#=PQ`OANAvOOQO'#HR'#HROOQO7+*Z7+*ZOOQSG22vG22vOOQSANBOANBOO&;bQ`OANBOOOQSANDiANDiOOQSANDjANDjOOQS<<Ly<<LyOMqQdOAN?aOOQO<<Ih<<IhO%F[Q(C|O<<IhO$}QdO<<IhOOQO<<I]<<I]O;dQ`O<<I]O!0`Q!bO<<I]O&;gQ(ChO<<IhO$%_Q,UO<<I]O&;rQ(ChO<<IhO&<QQ,UO<<I]O&<_Q(ChO<<IhOOQSLD,eLD,eO$(iQ`OLD,eOJRQ&jOLD,eO&<sQ!LVO7+'oO&>iQ!LVO7+'qO&@_Q&kOG26wOOQO<<Mk<<MkOOQ(CWANAQANAQO$<qQ`OANAQOOQ(CWANAPANAPOOQO<<Mv<<MvOOQSLD-QLD-QO&@oQ!LUO7+*WOOQO7+(o7+(oO6lQ(ChO7+(oO#=PQ`O7+(oO6bQ`O7+(oO!0`Q!bO7+(oO$%hQ,UO7+(oOOQSG27_G27_O%AXQ`OG27_OJRQ&jOG27_OOQSG27bG27bO6lQ(ChOG27bOOQSG27jG27jO&@yQ!LUOG24{OOQOAN?SAN?SO%F[Q(C|OAN?SOOQOAN>wAN>wO;dQ`OAN>wO$}QdOAN?SO!0`Q!bOAN>wO&ATQ(ChOAN?SO$%_Q,UOAN>wO&A`Q(ChOAN?SOOQS!$(!P!$(!PO$(iQ`O!$(!PO&AnQ(C}OG26wOOQ(CWG26lG26lOOQO<<LZ<<LZO6lQ(ChO<<LZO#=PQ`O<<LZO6bQ`O<<LZO!0`Q!bO<<LZOOQSLD,yLD,yO%AXQ`OLD,yOOQSLD,|LD,|OOQOG24nG24nOOQOG24cG24cO%F[Q(C|OG24nO;dQ`OG24cO$}QdOG24nO!0`Q!bOG24cO&DPQ(ChOG24nOOQS!)9Ek!)9EkO&DmQ7]O,5:zOOQOANAuANAuO6lQ(ChOANAuO#=PQ`OANAuO6bQ`OANAuOOQS!$(!e!$(!eOOQOLD*YLD*YOOQOLD)}LD)}O%F[Q(C|OLD*YO;dQ`OLD)}O$}QdOLD*YO&EpQ!LVOG26wO&GfQ7]O,59mO&HfQ7]O,5<`O&IfQ7]O,5<bO&JfQ7]O,5<pOOQOG27aG27aO6lQ(ChOG27aO#=PQ`OG27aOOQO!$'Mt!$'MtOOQO!$'Mi!$'MiO%F[Q(C|O!$'MtO&KiQ7]O1G2gO&LiQ7]O1G2iO&MiQ7]O1G2TOOQOLD,{LD,{O6lQ(ChOLD,{OOQO!)9C`!)9C`O&NlQ7]O7+'oO' oQ7]O7+'qOOQO!$(!g!$(!gO'!rQ7]OG26wOMqQdO'#DtO.fQ`O'#EQO'#uQtO'#JQOMqQdO'#DlO'#|QtO'#ChO'&dQtO'#ChO'&tQdO,5;OO'(tQ&jO'#E`OMqQdO,5;YOMqQdO,5;YOMqQdO,5;YOMqQdO,5;YOMqQdO,5;YOMqQdO,5;YOMqQdO,5;YOMqQdO,5;YOMqQdO,5;YOMqQdO,5;YOMqQdO,5;YOMqQdO'#I^O'*UQ`O,5<_O'*^Q&jO,5;YO'+nQ&jO,5;YOMqQdO,5;nO.iQ`O'#DRO.iQ`O'#DRO.iQ`O'#DROJRQ&jO'#FtO'(tQ&jO'#FtO'*^Q&jO'#FtOJRQ&jO'#FvO'(tQ&jO'#FvO'*^Q&jO'#FvOJRQ&jO'#GUO'(tQ&jO'#GUO'*^Q&jO'#GUOMqQdO,5?zO'&tQdO1G0jO'+uQ!LUO'#ChOMqQdO1G1vOJRQ&jO,5<{O'(tQ&jO,5<{O'*^Q&jO,5<{OJRQ&jO,5<}O'(tQ&jO,5<}O'*^Q&jO,5<}OJRQ&jO,5<iO'(tQ&jO,5<iO'*^Q&jO,5<iO'&tQdO1G1wOMqQdO7+&qOJRQ&jO1G2TO'(tQ&jO1G2TO'*^Q&jO1G2TOJRQ&jO1G2VO'(tQ&jO1G2VO'*^Q&jO1G2VO'&tQdO7+'cO'&tQdO7+&UO',PQ`O7+'zOJRQ&jOANA]O'(tQ&jOANA]O'*^Q&jOANA]O',PQ`O<<KfO',PQ`OANAQO',UQ`O'#EdO',ZQ`O'#EdO',cQ`O'#FSO',hQ`O'#EnO',mQ`O'#J`O',xQ`O'#J^O'-TQ`O,5;OO'-YQ&kO,5<[O'-aQ`O'#F}O'-fQ`O'#F}O'-kQ`O'#F}O'-pQ`O,5<]O'-xQ`O,5;OO'.QQ!LUO1G1VO'.XQ`O,5<iO'.^Q`O,5<iO'.cQ`O,5<iO'.hQ`O,5<kO'.mQ`O,5<kO'.rQ`O,5<kO'.wQ`O1G1wO'.|Q`O1G0jO'/RQ`O1G2`O'/WQ&kO<<KqO'/_Q&kO<<KqO'/fQ&kO<<KqO'/mQqO7+'zO'/tQ`O7+'zO'/yQqO<<KfO4}Q&jO'#FrO6bQ`O'#FqO={Q`O'#EcOMqQdO,5;kO!(eQ`O'#F}O!(eQ`O'#F}O!(eQ`O'#F}O!(eQ`O'#GPO!(eQ`O'#GPO!(eQ`O'#GPO'0QQ`O,5<tOKhQ&jO7+(VOKhQ&jO7+(VOKhQ&jO7+(VOJRQ&jO1G2`O'0YQ`O1G2`OJRQ&jO7+'zO$:eQqO1G2kO$:eQqO1G2kO$:eQqO1G2kOJRQ&jO,5=POJRQ&jO,5=POJRQ&jO,5=P",stateData:"'1c~O'gOS'hOSTOSUOS~OQUORUOX}O]gO_lObrOcqOigOkUOlgOmgOrgOtUOvUO{SO!OgO!PgO!VTO!aoO!fVO!iUO!jUO!kUO!lUO!mUO!ppO!uXO#lwO#|tO$QbO%[uO%^xO%`vO%avO%dyO%fzO%i{O%j{O%l|O%y!OO&P!PO&R!QO&T!RO&V!SO&Y!TO&`!UO&f!VO&h!WO&j!XO&l!YO&n!ZO'jQO'rRO'|WO(ZeO~OQUORUO]gOb!aOc!`OigOkUOlgOmgOrgOtUOvUO{SO!OgO!PgO!V!]O!aoO!fVO!iUO!jUO!kUO!lUO!mUO!p!_O#|!bO$QbO'j![O'rRO'|WO(ZeO~OQ[XZ[X_[Xk[Xx[Xy[X{[X!T[X!c[X!d[X!f[X!l[X#T[X#`dX#c[X#d[X#e[X#f[X#g[X#h[X#i[X#j[X#k[X#m[X#o[X#q[X#r[X#w[X'e[X'r[X'}[X(U[X(V[X~O!_$vX~P&}OS!cO'c!dO'd!fO~OQUORUO]gOb!aOc!`OigOkUOlgOmgOrgOtUOvUO{SO!OgO!PgO!V!]O!aoO!fVO!iUO!jUO!kUO!lUO!mUO!p!_O#|!bO$QbO'j;ZO'rRO'|WO(ZeO~O!S!jO!T!gO!Q'vP!Q(RP~P)jO!U!rO~P`OQUORUO]gOb!aOc!`OigOkUOlgOmgOrgOtUOvUO{SO!OgO!PgO!V!]O!aoO!fVO!iUO!jUO!kUO!lUO!mUO!p!_O#|!bO$QbO'rRO'|WO(ZeO~O!S!xO!uXO#^!{O#_!xO'j;[O!e(OP~P,RO!f!}O'j!|O~O!p#RO!uXO%[#SO~O#`#TO~O!_#UO#`#TO~OQ#lOZ#sOk#aOx#YOy#ZO{#[O!T#pO!c#cO!d#WO!f#XO!l#lO#c#_O#d#`O#e#`O#f#`O#g#bO#h#cO#i#cO#j#rO#k#cO#m#dO#o#fO#q#hO#r#iO'rRO'}#jO(U#]O(V#^O~O_'tX'e'tX'a'tX!e'tX!Q'tX!V'tX%]'tX!_'tX~P/WO#T#tO#w#tOQ'uXZ'uX_'uXk'uXx'uXy'uX{'uX!T'uX!c'uX!d'uX!f'uX!l'uX#c'uX#d'uX#e'uX#f'uX#g'uX#h'uX#i'uX#j'uX#m'uX#o'uX#q'uX#r'uX'r'uX'}'uX(U'uX(V'uX~O#k'uX'e'uX'a'uX!Q'uX!e'uXo'uX!V'uX%]'uX!_'uX~P1nO#T#tO~O$S#vO$U#uO$]#{O~O!V#|O$QbO$`#}O$b$PO~O]$SOi$cOk$TOl$SOm$SOr$dOt$eOv$fO{$[O!V$]O!a$kO!f$XO#_$lO#|$iO$i$gO$k$hO$n$jO'j$RO'n$bO'r$UOe'oP~O!f$mO~O!_$oO~O_$pO'e$pO~O'j$tO~O!f$mO'j$tO'k$vO'n$bO~Oc$|O!f$mO'j$tO~O#k#cO~O]%VOx%RO!V%OO!f%QO%^%UO'j$tO'k$vO^(cP~O!p#RO~O{%WO!V%XO'j$tO~O{%WO!V%XO%f%]O'j$tO~O'j%^O~O#lwO%^xO%`vO%avO%dyO%fzO%i{O%j{O~Ob%gOc%fO!p%dO%[%eO%n%cO~P8xOb%jOcqO!V%iO!ppO!uXO#lwO%[uO%`vO%avO%dyO%fzO%i{O%j{O%l|O~O`%mO#T%pO%^%kO'k$vO~P9wO!f%qO!i%uO~O!f!}O~O!VTO~O_$pO'b%}O'e$pO~O_$pO'b&QO'e$pO~O_$pO'b&SO'e$pO~O'a[Xo[X!Q[X!e[X%}[X!V[X%][X!_[X~P&}O]&XOl&XO{&WO!S&[O!Y&bO!Z&ZO![&ZO'k$vO's&UO!U'wP!U(TP~OP&fO!V&cO!q&eO'j$tO~Oc&kO!f$mO'j$tO~Ox%RO!f%QO~OS!cO'c!dO'd&nO~O!S&pO!Q&uX!Q&{X!T&uX!T&{X~P)jO!T&rO!Q'vX~OQ#lOZ#sOk#aOx#YOy#ZO{#[O!T&rO!c#cO!d#WO!f#XO!l#lO#c#_O#d#`O#e#`O#f#`O#g#bO#h#cO#i#cO#j#rO#k#cO#m#dO#o#fO#q#hO#r#iO'rRO'}#jO(U#]O(V#^O~O!Q'vX~P?WO!Q&wO~O!Q(QX!T(QX!_(QX!e(QX'}(QX~O#T(QX#`#XX!U(QX~PA^O#T&xO!Q(SX!T(SX~O!T&yO!Q(RX~O!Q&|O~O#T#tO~PA^O!U&}O~P`Ox#YOy#ZO{#[O!d#WO!f#XO'rROQ!haZ!hak!ha!T!ha!c!ha!l!ha#c!ha#d!ha#e!ha#f!ha#g!ha#h!ha#i!ha#j!ha#k!ha#m!ha#o!ha#q!ha#r!ha'}!ha(U!ha(V!ha~O_!ha'e!ha'a!ha!Q!ha!e!hao!ha!V!ha%]!ha!_!ha~PBtO!e'OO~O{%WO!V%XO!uXO#^'RO#_'QO'j$tO~O!_#UO#T'TO'}'SO!T(PX_(PX'e(PX~O!e(PX~PExO!T'WO!e(OX~O!e'YO~O{%WO!V%XO#_'QO'j$tO~Ox'ZOy'[O!d#WO!f#XO!u!ta{!ta~O!p!ta%[!ta!V!ta#^!ta#_!ta'j!ta~PGQO!p'`O~OQUORUO]gOb!aOc!`OigOkUOlgOmgOrgOtUOvUO{SO!OgO!PgO!VTO!aoO!fVO!iUO!jUO!kUO!lUO!mUO!p!_O#|!bO$QbO'j![O'rRO'|WO(ZeO~O]$SOi$cOk$TOl$SOm$SOr$dOt$eOv;oO{$[O!V$]O!a=`O!f$XO#_;xO#|$iO$i;rO$k;uO$n$jO'j'dO'n$bO'r$UO~O#`'fO~O]$SOi$cOk$TOl$SOm$SOr$dOt$eOv$fO{$[O!V$]O!a$kO!f$XO#_$lO#|$iO$i$gO$k$hO$n$jO'j'dO'n$bO'r$UO~Oe'yP~PKhO!S'jO!e'zP~P$}O's'lO'|WO~O{'nO!f#XO's'lO'|WO~OQ;VOR;VO]gOb=ZOc!`OigOk;VOlgOmgOrgOt;VOv;VO{SO!OgO!PgO!V!]O!a;YO!fVO!i;VO!j;VO!k;VO!l;VO!m;VO!p!_O#|!bO$QbO'j'|O'rRO'|WO(Z=XO~Oy(PO!f#XO~O!T#pO_$ga'e$ga'a$ga!e$ga!Q$ga!V$ga%]$ga!_$ga~O#l(TO~PJROx(WO!_(VO!V$TX$P$TX$S$TX$U$TX$]$TX~O!_(VO!V(WX$P(WX$S(WX$U(WX$](WX~Ox(WO~P!#WOx(WO!V(WX$P(WX$S(WX$U(WX$](WX~O!V(YO$P(^O$S(XO$U(XO$](_O~O!S(bO~PMqO$S#vO$U#uO$](eO~OP$oXx$oX{$oX!d$oX(U$oX(V$oX~OPgXegXe$oX!TgX#TgX~P!$|Ol(gO~OS(hO'c(iO'd(kO~OP(tOx(mO{(nO(U(pO(V(rO~Oe(lO~P!&VOe(uO~O]$SOi$cOk$TOl$SOm$SOr$dOt$eOv;oO{$[O!V$]O!a=`O!f$XO#_;xO#|$iO$i;rO$k;uO$n$jO'n$bO'r$UO~O!S(yO'j(vO!e([P~P!&tO#`({O~O!f(|O~O!S)RO'j)OO!Q(]P~P!&tOk)`O{)WO!Y)^O!Z)VO![)VO!f(|O#P)_O%S)YO'k$vO's)TO~O!U)]O~P!(wO!d#WOP'qXx'qX{'qX(U'qX(V'qX!T'qX#u'qX!U'qX~Oe'qX#T'qX]'qXl'qX!Y'qX!Z'qX!['qX!u'qX!y'qX!z'qX!{'qX#P'qX#Q'qX'k'qX's'qX'|'qX~P!)pOP)cO#T)bOe'pX!T'pX~O!T)dOe'oX~O'j%^Oe'oP~O!f)kO~O'j'dO~O{%WO!S!xO!V%XO!uXO#^!{O#_!xO'j$tO!e(OP~O!_#UO#`)oO~OQ#lOZ#sOk#aOx#YOy#ZO{#[O!c#cO!d#WO!f#XO!l#lO#c#_O#d#`O#e#`O#f#`O#g#bO#h#cO#i#cO#j#rO#k#cO#m#dO#o#fO#q#hO#r#iO'rRO'}#jO(U#]O(V#^O~O_!`a!T!`a'e!`a'a!`a!Q!`a!e!`ao!`a!V!`a%]!`a!_!`a~P!-ROP)wO!V&cO!q)vO%])uO'n$bO~O!_)yO!V'mX_'mX!T'mX'e'mX~O!f$mO'n$bO~O!f$mO'j$tO'n$bO~O!_#UO#`'fO~O]*UO%^*VO'j*RO!U(dP~O!T*WO^(cX~O's'lO~OZ*[O~O^*]O~O!V%OO'j$tO'k$vO^(cP~O{%WO!S*aO!T&yO!V%XO'j$tO!Q(RP~O]&_Ol&_O{*cO!S*bO's'lO~O!U(TP~P!2fO!T*dO_(`X'e(`X~O#T*hO'n$bO~OP*kO!V$]O'n$bO~O!V*mO~Ox*oO!VTO~O!p*tO~Oc*yO~O'j!|O!U(bP~Oc$|O~O%^xO'j%^O~P9wOZ+PO^+OO~OQUORUO]gObrOcqOigOkUOlgOmgOrgOtUOvUO{SO!OgO!PgO!aoO!fVO!iUO!jUO!kUO!lUO!mUO!ppO!uXO$QbO%[uO'rRO'|WO(ZeO~O!V!]O#|!bO'j![O~P!4vO^+OO_$pO'e$pO~O_+TO#l+VO%`+VO%a+VO~P$}O!f%qO~O&P+[O~O!V+^O~O&b+`O&d+aOQ&_aR&_aX&_a]&_a_&_ab&_ac&_ai&_ak&_al&_am&_ar&_at&_av&_a{&_a!O&_a!P&_a!V&_a!a&_a!f&_a!i&_a!j&_a!k&_a!l&_a!m&_a!p&_a!u&_a#l&_a#|&_a$Q&_a%[&_a%^&_a%`&_a%a&_a%d&_a%f&_a%i&_a%j&_a%l&_a%y&_a&P&_a&R&_a&T&_a&V&_a&Y&_a&`&_a&f&_a&h&_a&j&_a&l&_a&n&_a'a&_a'j&_a'r&_a'|&_a(Z&_a!U&_a&W&_a`&_a&]&_a~O'j+fO~O!TzX!T!]X!UzX!U!]X!_zX!_!]X!f!]X#TzX'n!]X~O!_+kO#T+jO!T#]X!T'xX!U#]X!U'xX!_'xX!f'xX'n'xX~O!_+mO!f$mO'n$bO!T!XX!U!XX~O]&VOl&VO{+nO's)TO~OQ;VOR;VO]gOb=ZOc!`OigOk;VOlgOmgOrgOt;VOv;VO{SO!OgO!PgO!V!]O!a;YO!fVO!i;VO!j;VO!k;VO!l;VO!m;VO!p!_O#|!bO$QbO'rRO'|WO(Z=XO~O'j;}O~P!>SO!T+rO!U'wX~O!U+tO~O!_+kO#T+jO!T#]X!U#]X~O!T+uO!U(TX~O!U+wO~O]&VOl&VO{+nO'k$vO's)TO~O!Z+xO![+xO~P!AQO_+}O!U,PO!Y,QO!Z+|O![+|O!u;WO!y,UO!z,SO!{,TO!|,RO#P,VO#Q,VO'|+zO~P!AQOP,[O!V&cO!q,ZO~Oo,aO~O!Q&ua!T&ua~P!-RO!S,eO!Q&uX!T&uX~P$}O!T&rO!Q'va~O!Q'va~P?WO!T&yO!Q(Ra~O{%WO!S,iO!V%XO'j$tO!Q&{X!T&{X~O!T'WO!e(Oa~O{%WO!V%XO#_,lO'j$tO~O#T,nO!T(Pa!e(Pa_(Pa'e(Pa~O!_#UO~P!DvO{%WO!S,qO!V%XO!uXO#^,sO#_,qO'j$tO!T&}X!e&}X~Oy,wO!f#XO~OP,{O!V&cO!q,zO%],yO'n$bO~O_#Wi!T#Wi'e#Wi'a#Wi!Q#Wi!e#Wio#Wi!V#Wi%]#Wi!_#Wi~P!-ROP=mOx(mO{(nO(U(pO(V(rO~O#`#Sa!T#Sa!e#Sa#T#Sa!V#Sa_#Sa'e#Sa!Q#Sa~P!G[O!d#WOP'qXx'qX{'qX(U'qX(V'qXQ'qXZ'qXk'qXy'qX!T'qX!c'qX!f'qX!l'qX#c'qX#d'qX#e'qX#f'qX#g'qX#h'qX#i'qX#j'qX#k'qX#m'qX#o'qX#q'qX#r'qX'r'qX'}'qX~O#`'qX_'qX'e'qX!e'qX!Q'qX'a'qX!V'qX#T'qXo'qX%]'qX!_'qX~P!HZO!T-UOe'yX~P!&VOe-WO~O!T-XO!e'zX~P!-RO!e-[O~O!Q-^O~OQ#lOx#YOy#ZO{#[O!d#WO!f#XO!l#lO'rROZ#bi_#bik#bi!T#bi!c#bi#d#bi#e#bi#f#bi#g#bi#h#bi#i#bi#j#bi#k#bi#m#bi#o#bi#q#bi#r#bi'e#bi'}#bi(U#bi(V#bi'a#bi!Q#bi!e#bio#bi!V#bi%]#bi!_#bi~O#c#bi~P!KrO#c#_O~P!KrOQ#lOx#YOy#ZO{#[O!d#WO!f#XO!l#lO#c#_O#d#`O#e#`O#f#`O'rROZ#bi_#bi!T#bi!c#bi#g#bi#h#bi#i#bi#j#bi#k#bi#m#bi#o#bi#q#bi#r#bi'e#bi'}#bi(U#bi(V#bi'a#bi!Q#bi!e#bio#bi!V#bi%]#bi!_#bi~Ok#bi~P!NdOk#aO~P!NdOQ#lOk#aOx#YOy#ZO{#[O!d#WO!f#XO!l#lO#c#_O#d#`O#e#`O#f#`O#g#bO'rRO_#bi!T#bi#m#bi#o#bi#q#bi#r#bi'e#bi'}#bi(U#bi(V#bi'a#bi!Q#bi!e#bio#bi!V#bi%]#bi!_#bi~OZ#bi!c#bi#h#bi#i#bi#j#bi#k#bi~P##UOZ#sO!c#cO#h#cO#i#cO#j#rO#k#cO~P##UOQ#lOZ#sOk#aOx#YOy#ZO{#[O!c#cO!d#WO!f#XO!l#lO#c#_O#d#`O#e#`O#f#`O#g#bO#h#cO#i#cO#j#rO#k#cO#m#dO'rRO_#bi!T#bi#o#bi#q#bi#r#bi'e#bi'}#bi(V#bi'a#bi!Q#bi!e#bio#bi!V#bi%]#bi!_#bi~O(U#bi~P#&VO(U#]O~P#&VOQ#lOZ#sOk#aOx#YOy#ZO{#[O!c#cO!d#WO!f#XO!l#lO#c#_O#d#`O#e#`O#f#`O#g#bO#h#cO#i#cO#j#rO#k#cO#m#dO#o#fO'rRO(U#]O_#bi!T#bi#q#bi#r#bi'e#bi'}#bi'a#bi!Q#bi!e#bio#bi!V#bi%]#bi!_#bi~O(V#bi~P#(wO(V#^O~P#(wOQ#lOZ#sOk#aOx#YOy#ZO{#[O!c#cO!d#WO!f#XO!l#lO#c#_O#d#`O#e#`O#f#`O#g#bO#h#cO#i#cO#j#rO#k#cO#m#dO#o#fO#q#hO'rRO(U#]O(V#^O~O_#bi!T#bi#r#bi'e#bi'}#bi'a#bi!Q#bi!e#bio#bi!V#bi%]#bi!_#bi~P#+iOQ[XZ[Xk[Xx[Xy[X{[X!c[X!d[X!f[X!l[X#T[X#`dX#c[X#d[X#e[X#f[X#g[X#h[X#i[X#j[X#k[X#m[X#o[X#q[X#r[X#w[X'r[X'}[X(U[X(V[X!T[X!U[X~O#u[X~P#.SOQ#lOZ;mOk;aOx#YOy#ZO{#[O!c;cO!d#WO!f#XO!l#lO#c;_O#d;`O#e;`O#f;`O#g;bO#h;cO#i;cO#j;lO#k;cO#m;dO#o;fO#q;hO#r;iO'rRO'}#jO(U#]O(V#^O~O#u-`O~P#0aOQ'uXZ'uXk'uXx'uXy'uX{'uX!c'uX!d'uX!f'uX!l'uX#c'uX#d'uX#e'uX#f'uX#g'uX#h'uX#i'uX#j'uX#m'uX#o'uX#q'uX#r'uX'r'uX'}'uX(U'uX(V'uX!T'uX~O#T;nO#w;nO#k'uX#u'uX!U'uX~P#2_O_'Qa!T'Qa'e'Qa'a'Qa!e'Qao'Qa!Q'Qa!V'Qa%]'Qa!_'Qa~P!-ROQ#biZ#bi_#bik#biy#bi!T#bi!c#bi!d#bi!f#bi!l#bi#c#bi#d#bi#e#bi#f#bi#g#bi#h#bi#i#bi#j#bi#k#bi#m#bi#o#bi#q#bi#r#bi'e#bi'r#bi'}#bi'a#bi!Q#bi!e#bio#bi!V#bi%]#bi!_#bi~P!G[O_#vi!T#vi'e#vi'a#vi!Q#vi!e#vio#vi!V#vi%]#vi!_#vi~P!-RO$S-cO$U-cO~O$S-dO$U-dO~O!_(VO#T-eO!V$YX$P$YX$S$YX$U$YX$]$YX~O!S-fO~O!V(YO$P-hO$S(XO$U(XO$]-iO~O!T;jO!U'tX~P#0aO!U-jO~O$]-lO~OS(hO'c(iO'd-oO~O]-rOl-rO!Q-sO~O!TdX!_dX!edX!e$oX'}dX~P!$|O!e-yO~P!G[O!T-zO!_#UO'}'SO!e([X~O!e.PO~O!S(yO'j$tO!e([P~O#`.RO~O!Q$oX!T$oX!_$vX~P!$|O!T.SO!Q(]X~P!G[O!_.UO~O!Q.WO~Ok.[O!_#UO!f$mO'n$bO'}'SO~O'j.^O~O!_)yO~O_$pO!T.bO'e$pO~O!U.dO~P!(wO!Z.eO![.eO'k$vO's)TO~O{.gO's)TO~O#P.hO~O'j%^Oe'VX!T'VX~O!T)dOe'oa~Oe.mO~Ox.nOy.nO{.oOPua(Uua(Vua!Tua#Tua~Oeua#uua~P#>mOx(mO{(nOP$ha(U$ha(V$ha!T$ha#T$ha~Oe$ha#u$ha~P#?cOx(mO{(nOP$ja(U$ja(V$ja!T$ja#T$ja~Oe$ja#u$ja~P#@UO].pO~O#`.qO~Oe$xa!T$xa#T$xa#u$xa~P!&VO#`.tO~OP,{O!V&cO!q,zO%],yO~O]$SOk$TOl$SOm$SOr$dOt$eOv;oO{$[O!V$]O!a=`O!f$XO#_;xO#|$iO$i;rO$k;uO$n$jO'n$bO'r$UO~Oi.{O'j.zO~P#AvO!_)yO!V'ma_'ma!T'ma'e'ma~O#`/RO~OZ[X!TdX!UdX~O!T/SO!U(dX~O!U/UO~OZ/VO~O]/XO'j*RO~O!V%OO'j$tO^'_X!T'_X~O!T*WO^(ca~O!e/[O~P!-RO]/^O~OZ/_O~O^/`O~O!T*dO_(`a'e(`a~O#T/fO~OP/iO!V$]O~O's'lO!U(aP~OP/sO!V/oO!q/rO%]/qO'n$bO~OZ/}O!T/{O!U(bX~O!U0OO~O^0QO_$pO'e$pO~O]0RO~O]0SO'j!|O~O#k0TO%}0UO~P1nO#T#tO#k0TO%}0UO~O_0VO~P$}O_0XO~O&W0]OQ&UiR&UiX&Ui]&Ui_&Uib&Uic&Uii&Uik&Uil&Uim&Uir&Uit&Uiv&Ui{&Ui!O&Ui!P&Ui!V&Ui!a&Ui!f&Ui!i&Ui!j&Ui!k&Ui!l&Ui!m&Ui!p&Ui!u&Ui#l&Ui#|&Ui$Q&Ui%[&Ui%^&Ui%`&Ui%a&Ui%d&Ui%f&Ui%i&Ui%j&Ui%l&Ui%y&Ui&P&Ui&R&Ui&T&Ui&V&Ui&Y&Ui&`&Ui&f&Ui&h&Ui&j&Ui&l&Ui&n&Ui'a&Ui'j&Ui'r&Ui'|&Ui(Z&Ui!U&Ui`&Ui&]&Ui~O`0cO!U0aO&]0bO~P`O!VTO!f0eO~O&d+aOQ&_iR&_iX&_i]&_i_&_ib&_ic&_ii&_ik&_il&_im&_ir&_it&_iv&_i{&_i!O&_i!P&_i!V&_i!a&_i!f&_i!i&_i!j&_i!k&_i!l&_i!m&_i!p&_i!u&_i#l&_i#|&_i$Q&_i%[&_i%^&_i%`&_i%a&_i%d&_i%f&_i%i&_i%j&_i%l&_i%y&_i&P&_i&R&_i&T&_i&V&_i&Y&_i&`&_i&f&_i&h&_i&j&_i&l&_i&n&_i'a&_i'j&_i'r&_i'|&_i(Z&_i!U&_i&W&_i`&_i&]&_i~O!Q0kO~O!T!Xa!U!Xa~P#0aO!S0rO!Y&bO!Z&ZO![&ZO!T&vX!U&vX~P!AQO!T+rO!U'wa~O!T&|X!U&|X~P!2fO!T+uO!U(Ta~O!Y0{O!Z0zO![0zO!u;WO!y1OO!z0}O!{0}O!|0|O#P1PO#Q1PO'|+zO~P!AQO_$pO!_#UO!f$mO!l1UO#T1SO'e$pO'n$bO'}'SO~O]&VOl&VO{+nO's)TO'|+zO~O_+}O!U1XO!Y,QO!Z+|O![+|O!u;WO!y,UO!z,SO!{,TO!|,RO#P,VO#Q,VO'|+zO~P!AQO!Z0zO![0zO'|+zO~P!AQO!Y0{O!Z0zO![0zO'|+zO~P!AQO!VTO!Y0{O!Z0zO![0zO!|0|O#P1PO#Q1PO'|+zO~P!AQO!Y0{O!Z0zO![0zO!z0}O!{0}O!|0|O#P1PO#Q1PO'|+zO~P!AQO!V&cO~O!V&cO~P!G[O!T#pOo$ga~O!Q&ui!T&ui~P!-RO!T&rO!Q'vi~O!T&yO!Q(Ri~O!Q(Si!T(Si~P!-RO!T'WO!e(Oi~O!T(Pi!e(Pi_(Pi'e(Pi~P!-RO#T1eO!T(Pi!e(Pi_(Pi'e(Pi~O{%WO!V%XO!uXO#^1hO#_1gO'j$tO~O{%WO!V%XO#_1gO'j$tO~OP1pO!V&cO!q1oO%]1nO~OP1pO!V&cO!q1oO%]1nO'n$bO~O#`uaQuaZua_uakua!cua!dua!fua!lua#cua#dua#eua#fua#gua#hua#iua#jua#kua#mua#oua#qua#rua'eua'rua'}ua!eua!Qua'aua!Vuaoua%]ua!_ua~P#>mO#`$haQ$haZ$ha_$hak$hay$ha!c$ha!d$ha!f$ha!l$ha#c$ha#d$ha#e$ha#f$ha#g$ha#h$ha#i$ha#j$ha#k$ha#m$ha#o$ha#q$ha#r$ha'e$ha'r$ha'}$ha!e$ha!Q$ha'a$ha!V$hao$ha%]$ha!_$ha~P#?cO#`$jaQ$jaZ$ja_$jak$jay$ja!c$ja!d$ja!f$ja!l$ja#c$ja#d$ja#e$ja#f$ja#g$ja#h$ja#i$ja#j$ja#k$ja#m$ja#o$ja#q$ja#r$ja'e$ja'r$ja'}$ja!e$ja!Q$ja'a$ja!V$jao$ja%]$ja!_$ja~P#@UO#`$xaQ$xaZ$xa_$xak$xay$xa!T$xa!c$xa!d$xa!f$xa!l$xa#c$xa#d$xa#e$xa#f$xa#g$xa#h$xa#i$xa#j$xa#k$xa#m$xa#o$xa#q$xa#r$xa'e$xa'r$xa'}$xa!e$xa!Q$xa'a$xa!V$xa#T$xao$xa%]$xa!_$xa~P!G[O_#Wq!T#Wq'e#Wq'a#Wq!Q#Wq!e#Wqo#Wq!V#Wq%]#Wq!_#Wq~P!-ROe&wX!T&wX~PKhO!T-UOe'ya~O!S1xO!T&xX!e&xX~P$}O!T-XO!e'za~O!T-XO!e'za~P!-RO!Q1{O~O#u!ha!U!ha~PBtO#u!`a!T!`a!U!`a~P#0aO!V2^O$QbO$Z2_O~O!U2cO~Oo2dO~P!G[O_$dq!T$dq'e$dq'a$dq!Q$dq!e$dqo$dq!V$dq%]$dq!_$dq~P!-RO!Q2eO~O]-rOl-rO~Ox(mO{(nO(V(rOP%Ti(U%Ti!T%Ti#T%Ti~Oe%Ti#u%Ti~P$9POx(mO{(nOP%Vi(U%Vi(V%Vi!T%Vi#T%Vi~Oe%Vi#u%Vi~P$9rO'}#jO~P!G[O!S2hO'j$tO!T'RX!e'RX~O!T-zO!e([a~O!T-zO!_#UO!e([a~O!T-zO!_#UO'}'SO!e([a~Oe$qi!T$qi#T$qi#u$qi~P!&VO!S2pO'j)OO!Q'TX!T'TX~P!&tO!T.SO!Q(]a~O!T.SO!Q(]a~P!G[O!_#UO~O!_#UO#k2xO~Ok2{O!_#UO'}'SO~Oe'pi!T'pi~P!&VO#T3OOe'pi!T'pi~P!&VO!e3RO~O_$eq!T$eq'e$eq'a$eq!Q$eq!e$eqo$eq!V$eq%]$eq!_$eq~P!-RO!T3VO!V(^X~P!G[O!V&cO%]1nO~O!V&cO%]1nO~P!G[O!V$oX%Q[X_$oX!T$oX'e$oX~P!$|O%Q3XOPhXxhX{hX!VhX(UhX(VhX_hX!ThX'ehX~O%Q3XO~O]3_O%^3`O'j*RO!T'^X!U'^X~O!T/SO!U(da~OZ3dO~O^3eO~O]3hO~O!Q3iO~O_$pO'e$pO~P!G[O!V$]O~P!G[O!T3nO#T3pO!U(aX~O!U3qO~O]&VOl&VO{3sO!Y4OO!Z3wO![3wO!u;WO!y3}O!z3|O!{3|O#P3{O#Q,VO'k$vO's)TO'|+zO~O!U3zO~P$BTOP4VO!V/oO!q4UO%]4TO~OP4VO!V/oO!q4UO%]4TO'n$bO~O'j!|O!T']X!U']X~O!T/{O!U(ba~O]4aO's4`O~O]4bO~O^4dO~O!e4gO~P$}O_4iO~O_4iO~P$}O#k4kO%}4lO~PExO`0cO!U4pO&]0bO~P`O!_4rO~O!_4tO!T'xi!U'xi!_'xi!f'xi'n'xi~O!T#]i!U#]i~P#0aO#T4uO!T#]i!U#]i~O!T!Xi!U!Xi~P#0aO!Q4vO~O]!tal!ta!Y!ta!Z!ta![!ta!y!ta!z!ta!{!ta!|!ta#P!ta#Q!ta'k!ta's!ta'|!ta~PGQO_$pO!_#UO!f$mO!l5OO#T4|O'e$pO'n$bO'}'SO~O!Z5QO![5QO'|+zO~P!AQO!Y5RO!Z5QO![5QO'|+zO~P!AQO!Y5RO!Z5QO![5QO!|5TO#P5UO#Q5UO'|+zO~P!AQO!Y5RO!Z5QO![5QO!z5VO!{5VO!|5TO#P5UO#Q5UO'|+zO~P!AQO_$pO#T4|O'e$pO~O_$pO!_#UO#T4|O'e$pO~O_$pO!_#UO!l5OO#T4|O'e$pO'}'SO~O!T'WO!e(Oq~O!T(Pq!e(Pq_(Pq'e(Pq~P!-RO{%WO!V%XO#_5aO'j$tO~O!V&cO%]5cO~O!V&cO%]5cO~P!G[OP5hO!V&cO!q5gO%]5cO~O#`%TiQ%TiZ%Ti_%Tik%Tiy%Ti!c%Ti!d%Ti!f%Ti!l%Ti#c%Ti#d%Ti#e%Ti#f%Ti#g%Ti#h%Ti#i%Ti#j%Ti#k%Ti#m%Ti#o%Ti#q%Ti#r%Ti'e%Ti'r%Ti'}%Ti!e%Ti!Q%Ti'a%Ti!V%Tio%Ti%]%Ti!_%Ti~P$9PO#`%ViQ%ViZ%Vi_%Vik%Viy%Vi!c%Vi!d%Vi!f%Vi!l%Vi#c%Vi#d%Vi#e%Vi#f%Vi#g%Vi#h%Vi#i%Vi#j%Vi#k%Vi#m%Vi#o%Vi#q%Vi#r%Vi'e%Vi'r%Vi'}%Vi!e%Vi!Q%Vi'a%Vi!V%Vio%Vi%]%Vi!_%Vi~P$9rO#`$qiQ$qiZ$qi_$qik$qiy$qi!T$qi!c$qi!d$qi!f$qi!l$qi#c$qi#d$qi#e$qi#f$qi#g$qi#h$qi#i$qi#j$qi#k$qi#m$qi#o$qi#q$qi#r$qi'e$qi'r$qi'}$qi!e$qi!Q$qi'a$qi!V$qi#T$qio$qi%]$qi!_$qi~P!G[Oe&wa!T&wa~P!&VO!T&xa!e&xa~P!-RO!T-XO!e'zi~O#u#Wi!T#Wi!U#Wi~P#0aOQ#lOx#YOy#ZO{#[O!d#WO!f#XO!l#lO'rROZ#bik#bi!c#bi#d#bi#e#bi#f#bi#g#bi#h#bi#i#bi#j#bi#k#bi#m#bi#o#bi#q#bi#r#bi#u#bi'}#bi(U#bi(V#bi!T#bi!U#bi~O#c#bi~P%&nO#c;_O~P%&nOQ#lOx#YOy#ZO{#[O!d#WO!f#XO!l#lO#c;_O#d;`O#e;`O#f;`O'rROZ#bi!c#bi#g#bi#h#bi#i#bi#j#bi#k#bi#m#bi#o#bi#q#bi#r#bi#u#bi'}#bi(U#bi(V#bi!T#bi!U#bi~Ok#bi~P%(yOk;aO~P%(yOQ#lOk;aOx#YOy#ZO{#[O!d#WO!f#XO!l#lO#c;_O#d;`O#e;`O#f;`O#g;bO'rRO#m#bi#o#bi#q#bi#r#bi#u#bi'}#bi(U#bi(V#bi!T#bi!U#bi~OZ#bi!c#bi#h#bi#i#bi#j#bi#k#bi~P%+UOZ;mO!c;cO#h;cO#i;cO#j;lO#k;cO~P%+UOQ#lOZ;mOk;aOx#YOy#ZO{#[O!c;cO!d#WO!f#XO!l#lO#c;_O#d;`O#e;`O#f;`O#g;bO#h;cO#i;cO#j;lO#k;cO#m;dO'rRO#o#bi#q#bi#r#bi#u#bi'}#bi(V#bi!T#bi!U#bi~O(U#bi~P%-pO(U#]O~P%-pOQ#lOZ;mOk;aOx#YOy#ZO{#[O!c;cO!d#WO!f#XO!l#lO#c;_O#d;`O#e;`O#f;`O#g;bO#h;cO#i;cO#j;lO#k;cO#m;dO#o;fO'rRO(U#]O#q#bi#r#bi#u#bi'}#bi!T#bi!U#bi~O(V#bi~P%/{O(V#^O~P%/{OQ#lOZ;mOk;aOx#YOy#ZO{#[O!c;cO!d#WO!f#XO!l#lO#c;_O#d;`O#e;`O#f;`O#g;bO#h;cO#i;cO#j;lO#k;cO#m;dO#o;fO#q;hO'rRO(U#]O(V#^O~O#r#bi#u#bi'}#bi!T#bi!U#bi~P%2WO_#sy!T#sy'e#sy'a#sy!Q#sy!e#syo#sy!V#sy%]#sy!_#sy~P!-ROP=oOx(mO{(nO(U(pO(V(rO~OQ#biZ#bik#biy#bi!c#bi!d#bi!f#bi!l#bi#c#bi#d#bi#e#bi#f#bi#g#bi#h#bi#i#bi#j#bi#k#bi#m#bi#o#bi#q#bi#r#bi#u#bi'r#bi'}#bi!T#bi!U#bi~P%5OO#u'qX!U'qX~P!HZO#u#vi!T#vi!U#vi~P#0aO!U5tO~O!T'Qa!U'Qa~P#0aO!_#UO'}'SO!T'Ra!e'Ra~O!T-zO!e([i~O!T-zO!_#UO!e([i~Oe$qq!T$qq#T$qq#u$qq~P!&VO!Q'Ta!T'Ta~P!G[O!_5{O~O!T.SO!Q(]i~P!G[O!T.SO!Q(]i~O!Q6PO~O!_#UO#k6UO~Ok6VO!_#UO'}'SO~O!Q6XO~Oe$sq!T$sq#T$sq#u$sq~P!&VO_$ey!T$ey'e$ey'a$ey!Q$ey!e$eyo$ey!V$ey%]$ey!_$ey~P!-RO!T3VO!V(^a~O_#Wy!T#Wy'e#Wy'a#Wy!Q#Wy!e#Wyo#Wy!V#Wy%]#Wy!_#Wy~P!-ROZ6^O~O]6`O'j*RO~O!T/SO!U(di~O]6cO~O^6dO~O!_4tO~O's'lO!T'YX!U'YX~O!T3nO!U(aa~O!f$mO'n$bO_'xX!_'xX!l'xX#T'xX'e'xX'}'xX~O'j6mO~P,RO!u;WO!y6oO!z6nO!{6nO#P1PO#Q1PO~P$%_O_$pO!_#UO!l1UO#T1SO'e$pO'}'SO~O!U6rO~P$BTO]&VOl&VO{6sO's)TO'|+zO~O!Y6wO!Z6vO![6vO#P1PO#Q1PO'|+zO~P!AQO!Y6wO!Z6vO![6vO!z6xO!{6xO#P1PO#Q1PO'|+zO~P!AQO!Z6vO![6vO'k$vO's)TO'|+zO~O!V/oO~O!V/oO%]6zO~O!V/oO%]6zO~P!G[OP7PO!V/oO!q7OO%]6zO~OZ7UO!T']a!U']a~O!T/{O!U(bi~O]7XO~O!e7YO~O!e7ZO~O!e7[O~O!e7[O~P$}O_7^O~O!_7aO~O!e7bO~O!T(Si!U(Si~P#0aO_$pO#T7iO'e$pO~O_$pO!_#UO#T7iO'e$pO~O!Z7mO![7mO'|+zO~P!AQO_$pO!_#UO!f$mO!l7nO#T7iO'e$pO'n$bO'}'SO~O!Y7oO!Z7mO![7mO'|+zO~P!AQO!Y7oO!Z7mO![7mO!|7rO#P7sO#Q7sO'|+zO~P!AQO_$pO!_#UO!l7nO#T7iO'e$pO'}'SO~O_$pO'e$pO~P!-RO!T'WO!e(Oy~O!T(Py!e(Py_(Py'e(Py~P!-RO!V&cO%]7xO~O!V&cO%]7xO~P!G[O#`$qqQ$qqZ$qq_$qqk$qqy$qq!T$qq!c$qq!d$qq!f$qq!l$qq#c$qq#d$qq#e$qq#f$qq#g$qq#h$qq#i$qq#j$qq#k$qq#m$qq#o$qq#q$qq#r$qq'e$qq'r$qq'}$qq!e$qq!Q$qq'a$qq!V$qq#T$qqo$qq%]$qq!_$qq~P!G[O#`$sqQ$sqZ$sq_$sqk$sqy$sq!T$sq!c$sq!d$sq!f$sq!l$sq#c$sq#d$sq#e$sq#f$sq#g$sq#h$sq#i$sq#j$sq#k$sq#m$sq#o$sq#q$sq#r$sq'e$sq'r$sq'}$sq!e$sq!Q$sq'a$sq!V$sq#T$sqo$sq%]$sq!_$sq~P!G[O!T&xi!e&xi~P!-RO#u#Wq!T#Wq!U#Wq~P#0aOx.nOy.nO{.oOPua(Uua(Vua!Uua~OQuaZuakua!cua!dua!fua!lua#cua#dua#eua#fua#gua#hua#iua#jua#kua#mua#oua#qua#rua#uua'rua'}ua!Tua~P%LmOx(mO{(nOP$ha(U$ha(V$ha!U$ha~OQ$haZ$hak$hay$ha!c$ha!d$ha!f$ha!l$ha#c$ha#d$ha#e$ha#f$ha#g$ha#h$ha#i$ha#j$ha#k$ha#m$ha#o$ha#q$ha#r$ha#u$ha'r$ha'}$ha!T$ha~P%NtOx(mO{(nOP$ja(U$ja(V$ja!U$ja~OQ$jaZ$jak$jay$ja!c$ja!d$ja!f$ja!l$ja#c$ja#d$ja#e$ja#f$ja#g$ja#h$ja#i$ja#j$ja#k$ja#m$ja#o$ja#q$ja#r$ja#u$ja'r$ja'}$ja!T$ja~P&!{OQ$xaZ$xak$xay$xa!c$xa!d$xa!f$xa!l$xa#c$xa#d$xa#e$xa#f$xa#g$xa#h$xa#i$xa#j$xa#k$xa#m$xa#o$xa#q$xa#r$xa#u$xa'r$xa'}$xa!T$xa!U$xa~P%5OO#u$dq!T$dq!U$dq~P#0aO#u$eq!T$eq!U$eq~P#0aO!U8RO~O#u8SO~P!&VO!_#UO!T'Ri!e'Ri~O!_#UO'}'SO!T'Ri!e'Ri~O!T-zO!e([q~O!Q'Ti!T'Ti~P!G[O!T.SO!Q(]q~O!Q8YO~P!G[O!Q8YO~Oe'py!T'py~P!&VO!T'Wa!V'Wa~P!G[O!V%Pq_%Pq!T%Pq'e%Pq~P!G[OZ8_O~O!T/SO!U(dq~O]8bO~O#T8cO!T'Ya!U'Ya~O!T3nO!U(ai~P#0aOQ[XZ[Xk[Xx[Xy[X{[X!Q[X!T[X!c[X!d[X!f[X!l[X#T[X#`dX#c[X#d[X#e[X#f[X#g[X#h[X#i[X#j[X#k[X#m[X#o[X#q[X#r[X#w[X'r[X'}[X(U[X(V[X~O!_$}X#k$}X~P&*pO#P5UO#Q5UO~P$%_O!z8gO!{8gO#P5UO#Q5UO~P$%_O!Z8jO![8jO'k$vO's)TO'|+zO~O!Y8mO!Z8jO![8jO#P5UO#Q5UO'|+zO~P!AQO!V/oO%]8pO~O!V/oO%]8pO~P!G[O]8wO's8vO~O!T/{O!U(bq~O!e8yO~O!e8yO~P$}O!e8{O~O!e8|O~O#T9OO!T#]y!U#]y~O!T#]y!U#]y~P#0aO_$pO#T9RO'e$pO~O_$pO!_#UO#T9RO'e$pO~O!Z9WO![9WO'|+zO~P!AQO_$pO!_#UO!l9XO#T9RO'e$pO'}'SO~O!f$mO'n$bO~P&0|O!Y9YO!Z9WO![9WO'|+zO~P!AQO!V&cO%]9^O~O!V&cO%]9^O~P!G[O#u#sy!T#sy!U#sy~P#0aOQ$qiZ$qik$qiy$qi!c$qi!d$qi!f$qi!l$qi#c$qi#d$qi#e$qi#f$qi#g$qi#h$qi#i$qi#j$qi#k$qi#m$qi#o$qi#q$qi#r$qi#u$qi'r$qi'}$qi!T$qi!U$qi~P%5OOx(mO{(nO(V(rOP%Ti(U%Ti!U%Ti~OQ%TiZ%Tik%Tiy%Ti!c%Ti!d%Ti!f%Ti!l%Ti#c%Ti#d%Ti#e%Ti#f%Ti#g%Ti#h%Ti#i%Ti#j%Ti#k%Ti#m%Ti#o%Ti#q%Ti#r%Ti#u%Ti'r%Ti'}%Ti!T%Ti~P&4cOx(mO{(nOP%Vi(U%Vi(V%Vi!U%Vi~OQ%ViZ%Vik%Viy%Vi!c%Vi!d%Vi!f%Vi!l%Vi#c%Vi#d%Vi#e%Vi#f%Vi#g%Vi#h%Vi#i%Vi#j%Vi#k%Vi#m%Vi#o%Vi#q%Vi#r%Vi#u%Vi'r%Vi'}%Vi!T%Vi~P&6jO#u$ey!T$ey!U$ey~P#0aO#u#Wy!T#Wy!U#Wy~P#0aO!_#UO!T'Rq!e'Rq~O!T-zO!e([y~O!Q'Tq!T'Tq~P!G[O!Q9dO~P!G[O!T/SO!U(dy~O!T3nO!U(aq~O#P7sO#Q7sO~P$%_O!Z9nO![9nO'k$vO's)TO'|+zO~O!V/oO%]9qO~O!V/oO%]9qO~P!G[O!e9tO~O_$pO#T9zO'e$pO~O_$pO!_#UO#T9zO'e$pO~O!Z9}O![9}O'|+zO~P!AQO_$pO!_#UO!l:OO#T9zO'e$pO'}'SO~OQ$qqZ$qqk$qqy$qq!c$qq!d$qq!f$qq!l$qq#c$qq#d$qq#e$qq#f$qq#g$qq#h$qq#i$qq#j$qq#k$qq#m$qq#o$qq#q$qq#r$qq#u$qq'r$qq'}$qq!T$qq!U$qq~P%5OOQ$sqZ$sqk$sqy$sq!c$sq!d$sq!f$sq!l$sq#c$sq#d$sq#e$sq#f$sq#g$sq#h$sq#i$sq#j$sq#k$sq#m$sq#o$sq#q$sq#r$sq#u$sq'r$sq'}$sq!T$sq!U$sq~P%5OOe%X!Z!T%X!Z#T%X!Z#u%X!Z~P!&VO!T'Yq!U'Yq~P#0aO!T#]!Z!U#]!Z~P#0aO_$pO#T:aO'e$pO~O_$pO!_#UO#T:aO'e$pO~O#`%X!ZQ%X!ZZ%X!Z_%X!Zk%X!Zy%X!Z!T%X!Z!c%X!Z!d%X!Z!f%X!Z!l%X!Z#c%X!Z#d%X!Z#e%X!Z#f%X!Z#g%X!Z#h%X!Z#i%X!Z#j%X!Z#k%X!Z#m%X!Z#o%X!Z#q%X!Z#r%X!Z'e%X!Z'r%X!Z'}%X!Z!e%X!Z!Q%X!Z'a%X!Z!V%X!Z#T%X!Zo%X!Z%]%X!Z!_%X!Z~P!G[O_$pO#T:oO'e$pO~OP=nOx(mO{(nO(U(pO(V(rO~O]#Sal#Sa!U#Sa!Y#Sa!Z#Sa![#Sa!u#Sa!y#Sa!z#Sa!{#Sa#P#Sa#Q#Sa'k#Sa's#Sa'|#Sa~P&D[OQ%X!ZZ%X!Zk%X!Zy%X!Z!c%X!Z!d%X!Z!f%X!Z!l%X!Z#c%X!Z#d%X!Z#e%X!Z#f%X!Z#g%X!Z#h%X!Z#i%X!Z#j%X!Z#k%X!Z#m%X!Z#o%X!Z#q%X!Z#r%X!Z#u%X!Z'r%X!Z'}%X!Z!T%X!Z!U%X!Z~P%5OO]ualua!Yua!Zua![ua!uua!yua!zua!{ua#Pua#Qua'kua'sua'|ua~P%LmO]$hal$ha!Y$ha!Z$ha![$ha!u$ha!y$ha!z$ha!{$ha#P$ha#Q$ha'k$ha's$ha'|$ha~P%NtO]$jal$ja!Y$ja!Z$ja![$ja!u$ja!y$ja!z$ja!{$ja#P$ja#Q$ja'k$ja's$ja'|$ja~P&!{O]$xal$xa!U$xa!Y$xa!Z$xa![$xa!u$xa!y$xa!z$xa!{$xa#P$xa#Q$xa'k$xa's$xa'|$xa~P&D[O]%Til%Ti!Y%Ti!Z%Ti![%Ti!u%Ti!y%Ti!z%Ti!{%Ti#P%Ti#Q%Ti'k%Ti's%Ti'|%Ti~P&4cO]%Vil%Vi!Y%Vi!Z%Vi![%Vi!u%Vi!y%Vi!z%Vi!{%Vi#P%Vi#Q%Vi'k%Vi's%Vi'|%Vi~P&6jO]$qil$qi!U$qi!Y$qi!Z$qi![$qi!u$qi!y$qi!z$qi!{$qi#P$qi#Q$qi'k$qi's$qi'|$qi~P&D[O]$qql$qq!U$qq!Y$qq!Z$qq![$qq!u$qq!y$qq!z$qq!{$qq#P$qq#Q$qq'k$qq's$qq'|$qq~P&D[O]$sql$sq!U$sq!Y$sq!Z$sq![$sq!u$sq!y$sq!z$sq!{$sq#P$sq#Q$sq'k$sq's$sq'|$sq~P&D[O]%X!Zl%X!Z!U%X!Z!Y%X!Z!Z%X!Z![%X!Z!u%X!Z!y%X!Z!z%X!Z!{%X!Z#P%X!Z#Q%X!Z'k%X!Z's%X!Z'|%X!Z~P&D[Oo'tX~P/WO!QdX!TdX#TdX~P&*pOQ[XZ[Xk[Xx[Xy[X{[X!T[X!TdX!c[X!d[X!f[X!l[X#T[X#TdX#`dX#c[X#d[X#e[X#f[X#g[X#h[X#i[X#j[X#k[X#m[X#o[X#q[X#r[X#w[X'r[X'}[X(U[X(V[X~O!_dX!e[X!edX'}dX~P'$ZOQ;VOR;VO]gOb=ZOc!`OigOk;VOlgOmgOrgOt;VOv;VO{SO!OgO!PgO!VTO!a;YO!fVO!i;VO!j;VO!k;VO!l;VO!m;VO!p!_O#|!bO$QbO'j'|O'rRO'|WO(Z=XO~O]$SOi$cOk$TOl$SOm$SOr$dOt$eOv;pO{$[O!V$]O!a=aO!f$XO#_;yO#|$iO$i;sO$k;vO$n$jO'j'dO'n$bO'r$UO~O!T;jO!U$ga~O]$SOi$cOk$TOl$SOm$SOr$dOt$eOv;qO{$[O!V$]O!a=bO!f$XO#_;zO#|$iO$i;tO$k;wO$n$jO'j'dO'n$bO'r$UO~O#l(TO~P'*^O!U[X!UdX~P'$ZO!_;^O~O#`;]O~O!_#UO#`;]O~O#T;nO~O#k;cO~O#T;{O!T(SX!U(SX~O#T;nO!T(QX!U(QX~O#`;|O~Oe<OO~P!&VO#`<VO~O#`<WO~O#`<XO~O!_#UO#`<YO~O!_#UO#`;|O~O#u<ZO~P#0aO#`<[O~O#`<]O~O#`<^O~O#`<_O~O#`<`O~O#`<aO~O#`<bO~O#`<cO~O!Q<dO~O#u<eO~P!&VO#u<fO~P!&VO#u<gO~P!&VO!Q<hO~P!G[O!Q<hO~O!Q<iO~P!G[O!_#UO#k=gO~O!_#UO#k=iO~O$Q~!d!y!{!|#P#^#_#j(Z$i$k$n%Q%[%]%^%d%f%i%j%l%n~UT$Q(Z#d!P'g'k#el#c#fkx'h's'h'j$S$U$S~",goto:"$(n(hPPPPPPPP(iP(yP*tPPPP.mPP/SP4y9R9fP9fPPP9fP;l9fP9fP9fP;pPP;vP<a@}PPPARPPPPARC|PPPDSE|PARPHdPPPPJbARPPPPPLlARPP! z!#O!#SP!#s!#w!#sPPPP!&|!(wPP!)P!*VP!#OARAR!-m!0q!5r!5r!9cPPP!9jARPPPPPPPPPPP!<iP!=|PPAR!?]PARPARARARARPAR!@tPP!CvP!FtP!Fx!GQ!GU!GUP!CsP!GY!GYP!JWP!J[ARAR!Jb!M_9fP9fP9f9fP!Ni9f9f#!y9f#%v9f#(Q9f9f#(n#+Q#+Q#+U#+^#+Q#+jP#+QP9f#,f9f#.T9f9f.mPPP#/vPP#0`#0`P#0`P#0u#0`PP#0{P#0rP#0r#1_!({#0r#1|#2S#2V(i#2Y(iP#2a#2a#2aP(iP(iP(iP(iPP(iP#2g#2jP#2j(iP#2nP#2qP(iP(iP(iP(iP(iP(i(iP#2w#3R#3X#3_#3m#3s#3y#4T#4Z#5U#5e#5k#5}#6T#6Z#6i#7O#8w#9V#9]#9c#9i#9o#9y#:P#:V#:a#:s#:yPPPPPPPP#;PPP#;s#?TP#@o#@v#AOPP#Fp#If$ o$ r$ u$#h$#k$#nPP$#t$#x$$q$%q$%u$&ZPP$&_$&e$&iP$&l$&p$&s$'f$'|$(R$(U$(X$(_$(b$(f$(jmlOTn!R!s$o%t%v%w%y+X+^0]0`Q${qQ%StQ%l}S&Z!]+rQ&j!`S)V$])[Q*P$|Q*^%UQ*x%fQ+x&bS+|&c,OQ,`&kQ.e)^Q/z*y[0z+y,Q,R,S,T,US3w/o3yW5Q0{0|0}1OU6v3|3}4OU7m5R5T5VS8j6w6xS9W7o7rQ9n8mR9}9Y%Q`OPSTUVno!R!W!c!g!j!s!}#T#X#[#_#`#a#b#c#d#e#f#g#h#i#p#t$o%Q%m%p%t%v%w%y%}&W&e&p&r&x'T'f'j'n(l)o)v*c+T+X+^+n,Z,e,n,z-X-`.o.t/R/r0T0U0V0X0]0`0b1S1e1o1x3s4U4i4k4l4|5g6s7O7^7i9R9z:a:oS#PX;W!l(O#k#|&[(b+j+m-f0r2^3p4u8c9O;V;Y;];_;`;a;b;c;d;e;f;g;h;i;j;n;{;|<O<Y<Z<b<c=[Q)g$fQ*U%OQ*z%iQ+R%qQ-O;oQ.|)yQ/X*VQ0S+PQ3_/SQ4^/{Q5m;qQ6`3`R:q;ppiOTn}!R!s$o%k%t%v%w%y+X+^0]0`R*|%m&j[OPTUnor!R!W!a!c!s!}#T#X#[#_#`#a#b#c#d#e#f#g#h#i#k#p#t#|$o%Q%m%p%q%t%v%w%y%}&W&e&r&x'T'f'j'n(b(l)o)v*c+T+X+^+j+m+n,Z,e,n,z-X-`-f.o.t/R/r0T0U0V0X0]0`0b0r1S1e1o1x2^3p3s4U4i4k4l4u4|5g6s7O7^7i8c9O9R9z:a:o;V;Y;];_;`;a;b;c;d;e;f;g;h;i;j;n;{;|<O<Y<Z<b<c=Z=[[!lSV!g!j&[&pQ$upQ$zqS%Pt%U!U%Yvw!v!x!{$m%W&y'Q'R'W*a*b*d+V+k,i,l,p,q,s0e1g1h4t5aQ%b{Q&g!_Q&i!`Q'_#RS(x$X(|S*O${$|Q*S%OQ*s%dQ*w%fS,_&j&kQ,}'`Q.O(yQ/Q*PQ/W*VQ/Y*WQ/]*[Q/u*tS/y*x*yQ1a,`Q2g-zQ3^/SQ3b/VQ3g/_Q4]/zQ5x2hQ6_3`Q6b3dQ8^6^R9f8_x$Ze#W$g$h$l(q(s({)b)c-U.R.q2f3O8S=X=d=e=f!^$xq!`$z${$|&Y&i&j&k)U*O*P+o+{,_,`.]/Q0w0y1V1a2z5P5S7l7q9U9{:bQ)x$uQ*i%_Q*l%`Q*v%fQ,|'_Q/t*sU/x*w*x*yQ1q,}Q4W/uS4[/y/zS6l3r3vQ7T4]U8h6p6t6uU9l8i8k8lQ:W9mQ:i:X#b=]#U#r#s$X$[&f(h(t)R)u)w)y*h*k,[,y,{.S.U/f/i/q/s1n1p2p2x3V3X4T4V5c5h5{6U6z7P7x8p9^9q;r;u;x<P<S<V<[<_<e=g=i=m=n=od=^;^;s;v;y<Q<T<W<]<`<fg=_;l;m;t;w;z<R<U<X<^<a<gW$`e$b)d=XS%_x%kQ%`yQ%azR*g%]%X$_e#U#W#r#s$X$[$g$h$l&f(h(q(s(t({)R)b)c)u)w)y*h*k,[,y,{-U.R.S.U.q/f/i/q/s1n1p2f2p2x3O3V3X4T4V5c5h5{6U6z7P7x8S8p9^9q;^;l;m;r;s;t;u;v;w;x;y;z<P<Q<R<S<T<U<V<W<X<[<]<^<_<`<a<e<f<g=X=d=e=f=g=i=m=n=oT(i$U(jX)h$f;o;p;qU&_!]%X+uS'm#Y#ZQ*Z%RS,u'Z'[Q/j*mQ3P.nR6h3n&pgOPSTUVno!R!W!c!g!j!s!}#T#X#[#_#`#a#b#c#d#e#f#g#h#i#k#p#t#|$o%Q%m%p%q%t%v%w%y%}&W&[&e&p&r&x'T'f'j'n(b(l)o)v*c+T+X+^+j+m+n,Z,e,n,z-X-`-f.o.t/R/r0T0U0V0X0]0`0b0r1S1e1o1x2^3p3s4U4i4k4l4u4|5g6s7O7^7i8c9O9R9z:a:o;V;Y;];_;`;a;b;c;d;e;f;g;h;i;j;n;{;|<O<Y<Z<b<c=[$a#o_!i!t$s&o&u'b'i'q'r's't'u'v'w'x'y'z'{'}(Q(U(`*Y+p,c,h,m-T-Z-_-a-p.r0l0o1d1w1|1}2O2P2Q2R2S2T2U2V2W2X2Y2]2b3T3[4x5Y5_5k5l5q5r6j7d7g7{8P8Q9Q9h9u9w:_:m:z;X<wT!dR!e&qgOPSTUVno!R!W!c!g!j!s!}#T#X#[#_#`#a#b#c#d#e#f#g#h#i#k#p#t#|$o%Q%m%p%q%t%v%w%y%}&W&[&e&p&r&x'T'f'j'n(b(l)o)v*c+T+X+^+j+m+n,Z,e,n,z-X-`-f.o.t/R/r0T0U0V0X0]0`0b0r1S1e1o1x2^3p3s4U4i4k4l4u4|5g6s7O7^7i8c9O9R9z:a:o;V;Y;];_;`;a;b;c;d;e;f;g;h;i;j;n;{;|<O<Y<Z<b<c=[Q&]!]R0s+r!n&V!]&Z&b&c+r+x+y+|,O,Q,R,S,T,U,V0z0{0|0}1O1P3t3{5Q5R5T5U5V6n6o7m7o7r7s8g9W9Y9}S)U$])[S.])V)^Q.f)_Q/l*oQ2z.eQ2}.hS3r/o3yS6p3w4OS6t3|3}S8i6v6wQ8k6xS9m8j8mR:X9nllOTn!R!s$o%t%v%w%y+X+^0]0`Q%{!US'a#T;]Q)|$yQ*q%bQ*r%cQ,]&hS-S'f;|S.s)o<YQ/O)}Q/n*pQ0d+`Q0f+aQ0n+lQ1Y,SQ1_,^S3U.t<bQ3Y/PS3]/R<cQ4w0qQ5X1QQ5[1`Q6]3ZQ7e4yQ7f4zQ7t5]Q8}7bQ9S7kQ9x9TQ:^9yQ:l:`R:y:n$[#n_!i!t&o&u'b'i'q'r's't'u'v'w'x'y'z'{'}(Q(U(`*Y+p,c,h,m-T-Z-_-p.r0l0o1d1w1|1}2O2P2Q2R2S2T2U2V2W2X2Y2]2b3T3[4x5Y5_5k5l5q5r6j7d7g7{8P8Q9Q9h9u9w:_:m:z;X<wS'^#O0xU)a$^'e2[T)s$s-a$[#m_!i!t&o&u'b'i'q'r's't'u'v'w'x'y'z'{'}(Q(U(`*Y+p,c,h,m-T-Z-_-p.r0l0o1d1w1|1}2O2P2Q2R2S2T2U2V2W2X2Y2]2b3T3[4x5Y5_5k5l5q5r6j7d7g7{8P8Q9Q9h9u9w:_:m:z;X<wS']#O0xS'o#Z#nS)r$s-aS,v'['^Q-b(PQ.u)sR1i,w&pgOPSTUVno!R!W!c!g!j!s!}#T#X#[#_#`#a#b#c#d#e#f#g#h#i#k#p#t#|$o%Q%m%p%q%t%v%w%y%}&W&[&e&p&r&x'T'f'j'n(b(l)o)v*c+T+X+^+j+m+n,Z,e,n,z-X-`-f.o.t/R/r0T0U0V0X0]0`0b0r1S1e1o1x2^3p3s4U4i4k4l4u4|5g6s7O7^7i8c9O9R9z:a:o;V;Y;];_;`;a;b;c;d;e;f;g;h;i;j;n;{;|<O<Y<Z<b<c=[S#PX;WQ%v!PQ%w!QQ%y!SQ%z!TR0[+[Q&d!_Q)t$uQ,Y&gS,x'_)xS1[,W,XY1m,|,}.w.x.yS5Z1]1^W5b1j1k1l1qU7w5d5e5fU9[7v7y7zQ:P9]R:d:QT+}&c,O!]YOTVZn}!R!s!v$m$o%k%m%t%v%w%y&c'W+X+^+y,O,p/o0]0`3t3yT#PX;W%SsOPSTUVno!R!W!c!g!j!s!}#T#X#[#_#`#a#b#c#d#e#f#g#h#i#p#t$o%Q%m%p%q%t%v%w%y%}&W&e&p&r&x'T'f'j'n(l)o)v*c+T+X+^+n,Z,e,n,z-X-`.o.t/R/r0T0U0V0X0]0`0b1S1e1o1x3s4U4i4k4l4|5g6s7O7^7i9R9z:a:oS'm#Y#ZS,u'Z'[!m<m#k#|&[(b+j+m-f0r2^3p4u8c9O;V;Y;];_;`;a;b;c;d;e;f;g;h;i;j;n;{;|<O<Y<Z<b<c=[S+{&c,OW0y+y,S,T,UU1V+|,Q,RU1Z,V3t3{S3v/o3yU5P0z0{0|S5S0}1OU5W1P6n6oS6p3w4OS6u3|3}U7l5Q5R5TS7p5U8gQ7q5VS8i6v6wQ8l6xU9U7m7o7rQ9Z7sS9m8j8mS9{9W9YQ:X9nR:b9}S+}&c,OT3x/o3yS'V!w0YQ-}(xQ.Z)UU1U+{3u3vQ2l.OS2u.[.fU5O0y1Z6uQ5w2gS6S2{2}U7n5S5W8lQ8U5xQ8]6VS9X7p7qR:O9ZQ#V^S'U!w0YQ)p$nQ)z$wQ*Q$}Q,o'VQ-|(xQ.Y)UQ.`)XQ.}){Q/v*uU1T+{3u3vS2k-}.OS2t.Z.fQ2w._Q2y.aQ4Y/wW4}0y1U1Z6uQ5v2gQ5z2lS6O2u2}Q6T2|Q7R4ZW7j5O5S5W8lS8T5w5xS8X6P<dQ8Z6SQ8e6kQ8t7SU9V7n7p7qQ9b8US9c8Y<hQ9e8]Q9j8fQ9s8uS9|9X9ZS:S9d<iQ:U9kQ:c:OQ:g:VQ:v:hQ;P:wQ<p<kQ=O<uQ=P<vQ=Q=cR=V=h%S]OPSTUVno!R!W!c!g!j!s!}#T#X#[#_#`#a#b#c#d#e#f#g#h#i#p#t$o%Q%m%p%q%t%v%w%y%}&W&e&p&r&x'T'f'j'n(l)o)v*c+T+X+^+n,Z,e,n,z-X-`.o.t/R/r0T0U0V0X0]0`0b1S1e1o1x3s4U4i4k4l4|5g6s7O7^7i9R9z:a:oS#Vr!a!l<j#k#|&[(b+j+m-f0r2^3p4u8c9O;V;Y;];_;`;a;b;c;d;e;f;g;h;i;j;n;{;|<O<Y<Z<b<c=[R<p=Z%S^OPSTUVno!R!W!c!g!j!s!}#T#X#[#_#`#a#b#c#d#e#f#g#h#i#p#t$o%Q%m%p%q%t%v%w%y%}&W&e&p&r&x'T'f'j'n(l)o)v*c+T+X+^+n,Z,e,n,z-X-`.o.t/R/r0T0U0V0X0]0`0b1S1e1o1x3s4U4i4k4l4|5g6s7O7^7i9R9z:a:oQ$nf!^$wq!`$z${$|&Y&i&j&k)U*O*P+o+{,_,`.]/Q0w0y1V1a2z5P5S7l7q9U9{:bS$}r!aQ){$xQ*u%fW/w*v*w*x*yU4Z/x/y/zS6k3r3vS7S4[4]W8f6l6p6t6uQ8u7TW9k8h8i8k8lS:V9l9mS:h:W:XQ:w:i!l<k#k#|&[(b+j+m-f0r2^3p4u8c9O;V;Y;];_;`;a;b;c;d;e;f;g;h;i;j;n;{;|<O<Y<Z<b<c=[Q<u=YR<v=Z$vaOPTUno!R!W!c!s!}#T#X#[#_#`#a#b#c#d#e#f#g#h#i#p#t$o%Q%m%p%t%v%w%y%}&W&e&r&x'T'f'j'n(l)o)v*c+T+X+^+n,Z,e,n,z-X-`.o.t/R/r0T0U0V0X0]0`0b1S1e1o1x3s4U4i4k4l4|5g6s7O7^7i9R9z:a:oY!qSV!g!j&p!U%Yvw!v!x!{$m%W&y'Q'R'W*a*b*d+V+k,i,l,p,q,s0e1g1h4t5aQ+S%q!j<l#k#|(b+j+m-f0r2^3p4u8c9O;V;Y;];_;`;a;b;c;d;e;f;g;h;i;j;n;{;|<O<Y<Z<b<c=[R<o&[S&`!]%XR0u+u%Q`OPSTUVno!R!W!c!g!j!s!}#T#X#[#_#`#a#b#c#d#e#f#g#h#i#p#t$o%Q%m%p%t%v%w%y%}&W&e&p&r&x'T'f'j'n(l)o)v*c+T+X+^+n,Z,e,n,z-X-`.o.t/R/r0T0U0V0X0]0`0b1S1e1o1x3s4U4i4k4l4|5g6s7O7^7i9R9z:a:o!l(O#k#|&[(b+j+m-f0r2^3p4u8c9O;V;Y;];_;`;a;b;c;d;e;f;g;h;i;j;n;{;|<O<Y<Z<b<c=[R+R%q!j#e_!i$s&o&u'b'i'x'y'z'{(Q(U*Y,c,h,m-T-Z-p.r1d1w2Y3T3[5Y5_5k7g9Q9w:_:m:z;X!T;e'}(`+p-a0l0o1|2U2V2W2X2]2b4x5l5q5r6j7d7{8P8Q9h9u<w!f#g_!i$s&o&u'b'i'z'{(Q(U*Y,c,h,m-T-Z-p.r1d1w2Y3T3[5Y5_5k7g9Q9w:_:m:z;X!P;g'}(`+p-a0l0o1|2W2X2]2b4x5l5q5r6j7d7{8P8Q9h9u<w!b#k_!i$s&o&u'b'i(Q(U*Y,c,h,m-T-Z-p.r1d1w2Y3T3[5Y5_5k7g9Q9w:_:m:z;XQ2f-xz=['}(`+p-a0l0o1|2]2b4x5l5q5r6j7d7{8P8Q9h9u<wQ=d=jQ=e=kR=f=l&pgOPSTUVno!R!W!c!g!j!s!}#T#X#[#_#`#a#b#c#d#e#f#g#h#i#k#p#t#|$o%Q%m%p%q%t%v%w%y%}&W&[&e&p&r&x'T'f'j'n(b(l)o)v*c+T+X+^+j+m+n,Z,e,n,z-X-`-f.o.t/R/r0T0U0V0X0]0`0b0r1S1e1o1x2^3p3s4U4i4k4l4u4|5g6s7O7^7i8c9O9R9z:a:o;V;Y;];_;`;a;b;c;d;e;f;g;h;i;j;n;{;|<O<Y<Z<b<c=[S#}d$OR2_-e&wcOPSTUVdno!R!W!c!g!j!s!}#T#X#[#_#`#a#b#c#d#e#f#g#h#i#k#p#t#|$O$o%Q%m%p%q%t%v%w%y%}&W&[&e&p&r&x'T'f'j'n(b(l)o)v*c+T+X+^+j+m+n,Z,e,n,z-X-`-e-f.o.t/R/r0T0U0V0X0]0`0b0r1S1e1o1x2^3p3s4U4i4k4l4u4|5g6s7O7^7i8c9O9R9z:a:o;V;Y;];_;`;a;b;c;d;e;f;g;h;i;j;n;{;|<O<Y<Z<b<c=[T#yb$PS#wb$PT(X#z(]T#xb$PT(Z#z(]&wdOPSTUVdno!R!W!c!g!j!s!}#T#X#[#_#`#a#b#c#d#e#f#g#h#i#k#p#t#|$O$o%Q%m%p%q%t%v%w%y%}&W&[&e&p&r&x'T'f'j'n(b(l)o)v*c+T+X+^+j+m+n,Z,e,n,z-X-`-e-f.o.t/R/r0T0U0V0X0]0`0b0r1S1e1o1x2^3p3s4U4i4k4l4u4|5g6s7O7^7i8c9O9R9z:a:o;V;Y;];_;`;a;b;c;d;e;f;g;h;i;j;n;{;|<O<Y<Z<b<c=[T#}d$OQ$QdR(d$O%SfOPSTUVno!R!W!c!g!j!s!}#T#X#[#_#`#a#b#c#d#e#f#g#h#i#p#t$o%Q%m%p%q%t%v%w%y%}&W&e&p&r&x'T'f'j'n(l)o)v*c+T+X+^+n,Z,e,n,z-X-`.o.t/R/r0T0U0V0X0]0`0b1S1e1o1x3s4U4i4k4l4|5g6s7O7^7i9R9z:a:o!m=Y#k#|&[(b+j+m-f0r2^3p4u8c9O;V;Y;];_;`;a;b;c;d;e;f;g;h;i;j;n;{;|<O<Y<Z<b<c=[#ahOPTVn!R!W!c!s!}#[#|$o%m%p%q%t%v%w%y%}&W&e'n(b)v*c+T+X+^+n,Z,z-f.o/r0T0U0V0X0]0`0b1o2^3s4U4i4k4l5g6s7O7^!^$^e#W$g$h$l(q(s({)b)c-U.R.q2f3O8S;^;s;v;y<Q<T<W<]<`<f=X=d=e=f#b'e#U#r#s$X$[&f(h(t)R)u)w)y*h*k,[,y,{.S.U/f/i/q/s1n1p2p2x3V3X4T4V5c5h5{6U6z7P7x8p9^9q;r;u;x<P<S<V<[<_<e=g=i=m=n=oQ)l$jQ-q(mg2[;l;m;t;w;z<R<U<X<^<a<gx$Ye#W$g$h$l(q(s({)b)c-U.R.q2f3O8S=X=d=e=fQ(}$ZS)X$])[Q)m$kQ.a)Y#b<r#U#r#s$X$[&f(h(t)R)u)w)y*h*k,[,y,{.S.U/f/i/q/s1n1p2p2x3V3X4T4V5c5h5{6U6z7P7x8p9^9q;r;u;x<P<S<V<[<_<e=g=i=m=n=od<s;^;s;v;y<Q<T<W<]<`<ff<t;l;m;t;w;z<R<U<X<^<a<gQ<x=]Q<y=^Q<z=_Q<{=`Q<|=aR<}=b!^$^e#W$g$h$l(q(s({)b)c-U.R.q2f3O8S;^;s;v;y<Q<T<W<]<`<f=X=d=e=f#b'e#U#r#s$X$[&f(h(t)R)u)w)y*h*k,[,y,{.S.U/f/i/q/s1n1p2p2x3V3X4T4V5c5h5{6U6z7P7x8p9^9q;r;u;x<P<S<V<[<_<e=g=i=m=n=og2[;l;m;t;w;z<R<U<X<^<a<gljOTn!R!s$o%t%v%w%y+X+^0]0`Q)Q$[Q+g&QQ+h&SR2o.S%W$_e#U#W#r#s$X$[$g$h$l&f(h(q(s(t({)R)b)c)u)w)y*h*k,[,y,{-U.R.S.U.q/f/i/q/s1n1p2f2p2x3O3V3X4T4V5c5h5{6U6z7P7x8S8p9^9q;^;l;m;r;s;t;u;v;w;x;y;z<P<Q<R<S<T<U<V<W<X<[<]<^<_<`<a<e<f<g=X=d=e=f=g=i=m=n=oQ*j%`Q/h*lQ3l/gR6g3mT)Z$])[S)Z$])[T3x/o3yQ._)WQ2|.gQ=c3sR=h6sQ)z$wQ.`)XQ.}){Q/v*uQ4Y/wQ7R4ZQ8e6kQ8t7SQ9j8fQ9s8uQ:U9kQ:g:VQ:v:hR;P:wp(q$V'g)n.Q.i.j1u2m3S5u6W9a<q=R=S=T!p<P'c(S(w)P,X-R-m-x.V.v.y/e/g1^1l1t2n2r3k3m4R5f5i5j5|6Q6Y6[6}7z8W8[8r:R=U=W=j=k=l[<Q:e:t:};R;S;U]<R2Z5p7|9_9`:pr(s$V'g)n-v.Q.i.j1u2m3S5u6W9a<q=R=S=T!r<S'c(S(w)P,X-R-m-x.V.v.y/e/g1^1l1r1t2n2r3k3m4R5f5i5j5|6Q6Y6[6}7z8W8[8r:R=U=W=j=k=l^<T:e:t:{:};R;S;U_<U2Z5p7|7}9_9`:ppiOTn}!R!s$o%k%t%v%w%y+X+^0]0`Q%h|R+T%qpiOTn}!R!s$o%k%t%v%w%y+X+^0]0`R%h|Q*n%aR/d*gqiOTn}!R!s$o%k%t%v%w%y+X+^0]0`Q/p*sS4S/t/uW6y4P4Q4R4WU8o6{6|6}U9o8n8q8rQ:Y9pR:j:ZQ%o}R*}%kR4a/}R8w7US%Pt%UR/Y*WQ%t!OR+X%uR+_%zT0^+^0`R+c%{Q+b%{R0g+cQnOQ!sTT$rn!sQ(j$UR-n(jQ!eRR&m!eQ!hSU&s!h&t,fQ&t!iR,f&uQ+s&]R0t+sQ-V'gR1v-VQ-Y'iS1y-Y1zR1z-ZQ,O&cR1W,OrZOTn}!R!s$o%k%m%t%v%w%y+X+^0]0`S!vV$mY#QZ!v+y,p3tS+y&c,OQ,p'WT3t/o3yS!nS%WU&z!n&{,gQ&{!oR,g&vQ+v&`R0v+vQ'X!yQ,j'PW,t'X,j1b5^Q1b,kR5^1cQ(]#zR-g(]Q$OdR(c$OQ#q_U(R#q,b;kQ,b;XR;k(`Q-{(xW2i-{2j5y8VU2j-|-}.OS5y2k2lR8V5z$m(o$V'c'g(S(w)P)i)j)n,X-P-Q-R-m-v-w-x.Q.V.i.j.v.y/e/g1^1l1r1s1t1u2Z2m2n2r3S3k3m4R5f5i5j5n5o5p5u5|6Q6W6Y6[6}7z7|7}8O8W8[8r9_9`9a:R:e:p:r:s:t:{:|:};R;S;U<q=R=S=T=U=W=j=k=lQ.T)PU2q.T2s5}Q2s.VR5}2rQ)[$]R.c)[Q)e$aR.l)eQ3W.vR6Z3WQ*e%ZR/c*eQ3o/jS6i3o8dR8d6jQ*p%bR/m*pQ3y/oR6q3yQ/|*zS4_/|7VR7V4aQ/T*SW3a/T3c6a8`Q3c/WQ6a3bR8`6bQ*X%PR/Z*XQ0`+^R4o0`WmOTn!sQ%x!RQ)q$oQ+W%tQ+Y%vQ+Z%wQ+]%yQ0Z+XS0^+^0`R4n0]Q$qkQ%|!VQ&P!XQ&R!YQ&T!ZQ*`%VQ*f%[Q*|%oQ+e&OQ.b)ZS0P*}+QQ0h+dQ0i+gQ0j+hU1R+{3u3vQ3f/^Q3j/eQ4X/vQ4c0RQ4m0[Y4{0y1T1U1Z6uQ6e3hQ6f3kQ7Q4YQ7W4b[7h4}5O5S5W5Y8lQ8a6cQ8s7RQ8x7XY9P7g7j7n7p7qQ9g8bQ9i8eQ9r8tW9v9Q9V9X9ZQ:T9jQ:[9sU:]9w9|:OQ:f:US:k:_:cQ:u:gQ:x:mQ;O:vQ;Q:zR;T;PQ$yqQ&h!`U)}$z${$|Q+l&YU,^&i&j&kQ.X)US/P*O*PQ0q+oQ1Q+{S1`,_,`Q2v.]Q3Z/QQ4y0wS4z0y1VQ5]1aQ6R2zS7k5P5SS9T7l7qQ9y9UQ:`9{R:n:bS$We=XR)f$bU$ae$b=XR.k)dQ$VeS'c#U)yQ'g#WS(S#r#sQ(w$XQ)P$[Q)i$gQ)j$hQ)n$lQ,X&fQ-P;rQ-Q;uQ-R;xQ-m(hQ-v(qQ-w(sQ-x(tQ.Q({Q.V)RQ.i)bQ.j)cf.v)u,y/q1n4T5c6z7x8p9^9qQ.y)wQ/e*hQ/g*kQ1^,[Q1l,{Q1r<PQ1s<SQ1t<VQ1u-US2Z;l;mQ2m.RQ2n.SQ2r.UQ3S.qQ3k/fQ3m/iQ4R/sQ5f1pQ5i<[Q5j<_Q5n;tQ5o;wQ5p;zQ5u2fQ5|2pQ6Q2xQ6W3OQ6Y3VQ6[3XQ6}4VQ7z5hQ7|<XQ7}<RQ8O<UQ8W5{Q8[6UQ8r7PQ9_<^Q9`<aQ9a8SQ:R<eQ:e;^Q:p<gQ:r;sQ:s;vQ:t;yQ:{<QQ:|<TQ:}<WQ;R<]Q;S<`Q;U<fQ<q=XQ=R=dQ=S=eQ=T=fQ=U=gQ=W=iQ=j=mQ=k=nR=l=olkOTn!R!s$o%t%v%w%y+X+^0]0`Q!^PS!uV!}Q&O!WQ&l!cQ'p#[Q(a#|S+Q%m%pQ+U%qQ+d%}Q+i&WQ,W&eQ-]'nQ-k(bQ.x)vQ/a*cQ0W+TU0p+n3s6sQ1],ZQ1k,zQ2a-fQ3Q.oQ4Q/rQ4e0TQ4f0UQ4h0VQ4j0XQ4q0bQ5e1oQ5s2^Q6|4UQ7]4iQ7_4kQ7`4lQ7y5gQ8q7OR8z7^#U_OPTVn!R!W!s!}#[$o%m%p%q%t%v%w%y%}&W&e'n)v*c+T+X+^+n,Z,z.o/r0T0U0V0X0]0`0b1o3s4U4i4k4l5g6s7O7^Q!iSQ!tUQ$soS&o!g&rQ&u!jQ'b#TQ'i#XQ'q#_Q'r#`Q's#aQ't#bQ'u#cQ'v#dQ'w#eQ'x#fQ'y#gQ'z#hQ'{#iQ'}#kQ(Q#pQ(U#tW(`#|(b-f2^Q*Y%QS+p&[0rS,c&p,eQ,h&xQ,m'TQ-T'fQ-Z'jQ-_;VQ-a;YQ-p(lQ.r)oQ0l+jQ0o+mQ1d,nQ1w-XQ1|;]Q1};_Q2O;`Q2P;aQ2Q;bQ2R;cQ2S;dQ2T;eQ2U;fQ2V;gQ2W;hQ2X;iQ2Y-`Q2];nQ2b;jQ3T.tQ3[/RQ4x;{Q5Y1SQ5_1eQ5k1xQ5l;|Q5q<OQ5r<YQ6j3pQ7d4uQ7g4|Q7{<ZQ8P<bQ8Q<cQ9Q7iQ9h8cQ9u9OQ9w9RQ:_9zQ:m:aQ:z:oQ;X!cR<w=[R!kSR&^!]S&Y!]+rS+o&Z&bS+{&c,OQ0w+xW0y+y,S,T,UU1V+|,Q,RY1Z,V3t3{3|3}S3u/o3yU5P0z0{0|S5S0}1OW5W1P6n6o6xU7l5Q5R5TS7p5U8gQ7q5VU9U7m7o7rQ9Z7sS9{9W9YR:b9}R'h#WR'k#XQ#OXR0x;WT!zV$mS!yV$mU%Zvw+VU'P!v!x!{S,k'Q'RQ,r'WQ/b*dQ1c,lU1f,p,q,sS5`1g1hR7u5a`!mS!g!j%W&p&y*a,it!wVvw!v!x!{$m'Q'R'W*d,l,p,q,s1g1h5aQ0Y+VQ0m+kQ4s0eQ7c4tT<n&[*bT!pS%WS!oS%WS&q!g&yS&v!j*aS+q&[*bT,d&p,iT&a!]%XQ#zbR(f$PT([#z(]R2`-eT(z$X(|R)S$[Q.w)uQ1j,yQ4P/qQ5d1nQ6{4TQ7v5cQ8n6zQ9]7xQ9p8pQ:Q9^R:Z9qllOTn!R!s$o%t%v%w%y+X+^0]0`Q%n}R*|%kV%[vw+VR/k*mR*{%iQ%TtR*_%UR*T%OT%r!O%uT%s!O%uT0_+^0`",nodeNames:"⚠ extends ArithOp ArithOp InterpolationStart LineComment BlockComment Script ExportDeclaration export Star as VariableName String from ; default FunctionDeclaration async function VariableDefinition > TypeParamList TypeDefinition ThisType this LiteralType ArithOp Number BooleanLiteral TemplateType InterpolationEnd Interpolation NullType null VoidType void TypeofType typeof MemberExpression . ?. PropertyName [ TemplateString Interpolation super RegExp ] ArrayExpression Spread , } { ObjectExpression Property async get set PropertyDefinition Block : NewExpression new TypeArgList CompareOp < ) ( ArgList UnaryExpression await yield delete LogicOp BitOp ParenthesizedExpression ClassExpression class extends ClassBody MethodDeclaration Decorator @ MemberExpression PrivatePropertyName CallExpression Privacy static abstract override PrivatePropertyDefinition PropertyDeclaration readonly accessor Optional TypeAnnotation Equals StaticBlock FunctionExpression ArrowFunction ParamList ParamList ArrayPattern ObjectPattern PatternProperty Privacy readonly Arrow MemberExpression BinaryExpression ArithOp ArithOp ArithOp ArithOp BitOp CompareOp instanceof satisfies in const CompareOp BitOp BitOp BitOp LogicOp LogicOp ConditionalExpression LogicOp LogicOp AssignmentExpression UpdateOp PostfixExpression CallExpression TaggedTemplateExpression DynamicImport import ImportMeta JSXElement JSXSelfCloseEndTag JSXStartTag JSXSelfClosingTag JSXIdentifier JSXBuiltin JSXIdentifier JSXNamespacedName JSXMemberExpression JSXSpreadAttribute JSXAttribute JSXAttributeValue JSXEscape JSXEndTag JSXOpenTag JSXFragmentTag JSXText JSXEscape JSXStartCloseTag JSXCloseTag PrefixCast ArrowFunction TypeParamList SequenceExpression KeyofType keyof UniqueType unique ImportType InferredType infer TypeName ParenthesizedType FunctionSignature ParamList NewSignature IndexedType TupleType Label ArrayType ReadonlyType ObjectType MethodType PropertyType IndexSignature PropertyDefinition CallSignature TypePredicate is NewSignature new UnionType LogicOp IntersectionType LogicOp ConditionalType ParameterizedType ClassDeclaration abstract implements type VariableDeclaration let var TypeAliasDeclaration InterfaceDeclaration interface EnumDeclaration enum EnumBody NamespaceDeclaration namespace module AmbientDeclaration declare GlobalDeclaration global ClassDeclaration ClassBody MethodDeclaration AmbientFunctionDeclaration ExportGroup VariableName VariableName ImportDeclaration ImportGroup ForStatement for ForSpec ForInSpec ForOfSpec of WhileStatement while WithStatement with DoStatement do IfStatement if else SwitchStatement switch SwitchBody CaseLabel case DefaultLabel TryStatement try CatchClause catch FinallyClause finally ReturnStatement return ThrowStatement throw BreakStatement break ContinueStatement continue DebuggerStatement debugger LabeledStatement ExpressionStatement SingleExpression",maxTerm:345,context:Rv,nodeProps:[["closedBy",4,"InterpolationEnd",43,"]",53,"}",68,")",140,"JSXSelfCloseEndTag JSXEndTag",156,"JSXEndTag"],["group",-26,8,15,17,60,195,199,202,203,205,208,211,222,224,230,232,234,236,239,245,251,253,255,257,259,261,262,"Statement",-30,12,13,25,28,29,34,44,46,47,49,54,62,70,76,77,99,100,109,110,127,130,132,133,134,135,137,138,158,159,161,"Expression",-23,24,26,30,33,35,37,162,164,166,167,169,170,171,173,174,175,177,178,179,189,191,193,194,"Type",-3,81,92,98,"ClassItem"],["openedBy",31,"InterpolationStart",48,"[",52,"{",67,"(",139,"JSXStartTag",151,"JSXStartTag JSXStartCloseTag"]],propSources:[Gv],skippedNodes:[0,5,6],repeatNodeCount:29,tokenData:"#2k~R!bOX%ZXY%uYZ'kZ[%u[]%Z]^'k^p%Zpq%uqr(Rrs)mst7]tu9guv<avw=bwx>lxyJcyzJyz{Ka{|Lm|}MW}!OLm!O!PMn!P!Q!$v!Q!R!Er!R![!G_![!]!Nc!]!^!N{!^!_# c!_!`#!`!`!a##d!a!b#%s!b!c#'h!c!}9g!}#O#(O#O#P%Z#P#Q#(f#Q#R#(|#R#S9g#S#T#)g#T#o#)}#o#p#,w#p#q#,|#q#r#-j#r#s#.S#s$f%Z$f$g%u$g#BY9g#BY#BZ#.j#BZ$IS9g$IS$I_#.j$I_$I|9g$I|$I}#1X$I}$JO#1X$JO$JT9g$JT$JU#.j$JU$KV9g$KV$KW#.j$KW&FU9g&FU&FV#.j&FV;'S9g;'S;=`<Z<%l?HT9g?HT?HU#.j?HUO9gW%`T$`WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%ZW%rP;=`<%l%Z7Z%|i$`W'g7ROX%ZXY%uYZ%ZZ[%u[p%Zpq%uq!^%Z!_#o%Z#p$f%Z$f$g%u$g#BY%Z#BY#BZ%u#BZ$IS%Z$IS$I_%u$I_$JT%Z$JT$JU%u$JU$KV%Z$KV$KW%u$KW&FU%Z&FU&FV%u&FV;'S%Z;'S;=`%o<%l?HT%Z?HT?HU%u?HUO%Z7Z'rT$`W'h7RO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z&y(YU$`W!l&qO!^%Z!_!`(l!`#o%Z#p;'S%Z;'S;=`%o<%lO%Z&t(sU#m&l$`WO!^%Z!_!`)V!`#o%Z#p;'S%Z;'S;=`%o<%lO%Z&t)^T#m&l$`WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z1i)t]$`W]&ZOY)mYZ*mZr)mrs,js!^)m!^!_-S!_#O)m#O#P1q#P#o)m#o#p-S#p;'S)m;'S;=`7V<%lO)m,^*rX$`WOr*mrs+_s!^*m!^!_+u!_#o*m#o#p+u#p;'S*m;'S;=`,d<%lO*m,^+fT$Z,U$`WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z,U+xTOr+urs,Xs;'S+u;'S;=`,^<%lO+u,U,^O$Z,U,U,aP;=`<%l+u,^,gP;=`<%l*m1i,sT$Z,U$`W]&ZO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z1a-XX]&ZOY-SYZ+uZr-Srs-ts#O-S#O#P-{#P;'S-S;'S;=`1k<%lO-S1a-{O$Z,U]&Z1a.OUOr-Srs.bs;'S-S;'S;=`0y;=`<%l/R<%lO-S1a.iW$Z,U]&ZOY/RZr/Rrs/ps#O/R#O#P/u#P;'S/R;'S;=`0s<%lO/R&Z/WW]&ZOY/RZr/Rrs/ps#O/R#O#P/u#P;'S/R;'S;=`0s<%lO/R&Z/uO]&Z&Z/xRO;'S/R;'S;=`0R;=`O/R&Z0WX]&ZOY/RZr/Rrs/ps#O/R#O#P/u#P;'S/R;'S;=`0s;=`<%l/R<%lO/R&Z0vP;=`<%l/R1a1OX]&ZOY/RZr/Rrs/ps#O/R#O#P/u#P;'S/R;'S;=`0s;=`<%l-S<%lO/R1a1nP;=`<%l-S1i1vY$`WOr)mrs2fs!^)m!^!_-S!_#o)m#o#p-S#p;'S)m;'S;=`6e;=`<%l/R<%lO)m1i2o]$Z,U$`W]&ZOY3hYZ%ZZr3hrs4hs!^3h!^!_/R!_#O3h#O#P5O#P#o3h#o#p/R#p;'S3h;'S;=`6_<%lO3h&c3o]$`W]&ZOY3hYZ%ZZr3hrs4hs!^3h!^!_/R!_#O3h#O#P5O#P#o3h#o#p/R#p;'S3h;'S;=`6_<%lO3h&c4oT$`W]&ZO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z&c5TW$`WO!^3h!^!_/R!_#o3h#o#p/R#p;'S3h;'S;=`5m;=`<%l/R<%lO3h&c5rX]&ZOY/RZr/Rrs/ps#O/R#O#P/u#P;'S/R;'S;=`0s;=`<%l3h<%lO/R&c6bP;=`<%l3h1i6jX]&ZOY/RZr/Rrs/ps#O/R#O#P/u#P;'S/R;'S;=`0s;=`<%l)m<%lO/R1i7YP;=`<%l)m#]7b]$`WOt%Ztu8Zu!^%Z!_!c%Z!c!}8Z!}#R%Z#R#S8Z#S#T%Z#T#o8Z#p$g%Z$g;'S8Z;'S;=`9a<%lO8Z#]8b_$`W'|#TOt%Ztu8Zu!Q%Z!Q![8Z![!^%Z!_!c%Z!c!}8Z!}#R%Z#R#S8Z#S#T%Z#T#o8Z#p$g%Z$g;'S8Z;'S;=`9a<%lO8Z#]9dP;=`<%l8Z,T9ra$`W's#S'j)s$SSOt%Ztu9gu}%Z}!O:w!O!Q%Z!Q![9g![!^%Z!_!c%Z!c!}9g!}#R%Z#R#S9g#S#T%Z#T#o9g#p$g%Z$g;'S9g;'S;=`<Z<%lO9g[;Oa$`W$SSOt%Ztu:wu}%Z}!O:w!O!Q%Z!Q![:w![!^%Z!_!c%Z!c!}:w!}#R%Z#R#S:w#S#T%Z#T#o:w#p$g%Z$g;'S:w;'S;=`<T<%lO:w[<WP;=`<%l:w,T<^P;=`<%l9g&t<hU$`W#e&lO!^%Z!_!`<z!`#o%Z#p;'S%Z;'S;=`%o<%lO%Z&t=RT$`W#w&lO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z(h=iW(V(`$`WOv%Zvw>Rw!^%Z!_!`<z!`#o%Z#p;'S%Z;'S;=`%o<%lO%Z&t>YU$`W#q&lO!^%Z!_!`<z!`#o%Z#p;'S%Z;'S;=`%o<%lO%Z1i>s]$`W]&ZOY>lYZ?lZw>lwx,jx!^>l!^!_@|!_#O>l#O#PE_#P#o>l#o#p@|#p;'S>l;'S;=`J]<%lO>l,^?qX$`WOw?lwx+_x!^?l!^!_@^!_#o?l#o#p@^#p;'S?l;'S;=`@v<%lO?l,U@aTOw@^wx,Xx;'S@^;'S;=`@p<%lO@^,U@sP;=`<%l@^,^@yP;=`<%l?l1aARX]&ZOY@|YZ@^Zw@|wx-tx#O@|#O#PAn#P;'S@|;'S;=`EX<%lO@|1aAqUOw@|wxBTx;'S@|;'S;=`Dg;=`<%lBt<%lO@|1aB[W$Z,U]&ZOYBtZwBtwx/px#OBt#O#PCc#P;'SBt;'S;=`Da<%lOBt&ZByW]&ZOYBtZwBtwx/px#OBt#O#PCc#P;'SBt;'S;=`Da<%lOBt&ZCfRO;'SBt;'S;=`Co;=`OBt&ZCtX]&ZOYBtZwBtwx/px#OBt#O#PCc#P;'SBt;'S;=`Da;=`<%lBt<%lOBt&ZDdP;=`<%lBt1aDlX]&ZOYBtZwBtwx/px#OBt#O#PCc#P;'SBt;'S;=`Da;=`<%l@|<%lOBt1aE[P;=`<%l@|1iEdY$`WOw>lwxFSx!^>l!^!_@|!_#o>l#o#p@|#p;'S>l;'S;=`Ik;=`<%lBt<%lO>l1iF]]$Z,U$`W]&ZOYGUYZ%ZZwGUwx4hx!^GU!^!_Bt!_#OGU#O#PHU#P#oGU#o#pBt#p;'SGU;'S;=`Ie<%lOGU&cG]]$`W]&ZOYGUYZ%ZZwGUwx4hx!^GU!^!_Bt!_#OGU#O#PHU#P#oGU#o#pBt#p;'SGU;'S;=`Ie<%lOGU&cHZW$`WO!^GU!^!_Bt!_#oGU#o#pBt#p;'SGU;'S;=`Hs;=`<%lBt<%lOGU&cHxX]&ZOYBtZwBtwx/px#OBt#O#PCc#P;'SBt;'S;=`Da;=`<%lGU<%lOBt&cIhP;=`<%lGU1iIpX]&ZOYBtZwBtwx/px#OBt#O#PCc#P;'SBt;'S;=`Da;=`<%l>l<%lOBt1iJ`P;=`<%l>l,TJjT!f+{$`WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z$PKQT!e#w$`WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z)ZKjW$`W'k#e#f&lOz%Zz{LS{!^%Z!_!`<z!`#o%Z#p;'S%Z;'S;=`%o<%lO%Z&tLZU$`W#c&lO!^%Z!_!`<z!`#o%Z#p;'S%Z;'S;=`%o<%lO%Z*qLtU$`Wk*iO!^%Z!_!`<z!`#o%Z#p;'S%Z;'S;=`%o<%lO%Z,TM_T!T+{$`WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z,TMuX$`Wx(dO!O%Z!O!PNb!P!Q%Z!Q![! d![!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z$oNgV$`WO!O%Z!O!PN|!P!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z$o! TT!S$g$`WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z&c! k]$`Wl&ZO!Q%Z!Q![! d![!^%Z!_!g%Z!g!h!!d!h#R%Z#R#S! d#S#X%Z#X#Y!!d#Y#o%Z#p;'S%Z;'S;=`%o<%lO%Z&c!!i]$`WO{%Z{|!#b|}%Z}!O!#b!O!Q%Z!Q![!$S![!^%Z!_#R%Z#R#S!$S#S#o%Z#p;'S%Z;'S;=`%o<%lO%Z&c!#gX$`WO!Q%Z!Q![!$S![!^%Z!_#R%Z#R#S!$S#S#o%Z#p;'S%Z;'S;=`%o<%lO%Z&c!$ZX$`Wl&ZO!Q%Z!Q![!$S![!^%Z!_#R%Z#R#S!$S#S#o%Z#p;'S%Z;'S;=`%o<%lO%Z7Z!$}b$`W#d&lOY!&VYZ%ZZz!&Vz{!-n{!P!&V!P!Q!BV!Q!^!&V!^!_!(f!_!`!Ch!`!a!Dm!a!}!&V!}#O!+T#O#P!,v#P#o!&V#o#p!(f#p;'S!&V;'S;=`!-h<%lO!&VX!&^^$`W!PPOY!&VYZ%ZZ!P!&V!P!Q!'Y!Q!^!&V!^!_!(f!_!}!&V!}#O!+T#O#P!,v#P#o!&V#o#p!(f#p;'S!&V;'S;=`!-h<%lO!&VX!'aa$`W!PPO!^%Z!_#Z%Z#Z#[!'Y#[#]%Z#]#^!'Y#^#a%Z#a#b!'Y#b#g%Z#g#h!'Y#h#i%Z#i#j!'Y#j#m%Z#m#n!'Y#n#o%Z#p;'S%Z;'S;=`%o<%lO%ZP!(kX!PPOY!(fZ!P!(f!P!Q!)W!Q!}!(f!}#O!)o#O#P!*n#P;'S!(f;'S;=`!*}<%lO!(fP!)]U!PP#Z#[!)W#]#^!)W#a#b!)W#g#h!)W#i#j!)W#m#n!)WP!)rVOY!)oZ#O!)o#O#P!*X#P#Q!(f#Q;'S!)o;'S;=`!*h<%lO!)oP!*[SOY!)oZ;'S!)o;'S;=`!*h<%lO!)oP!*kP;=`<%l!)oP!*qSOY!(fZ;'S!(f;'S;=`!*}<%lO!(fP!+QP;=`<%l!(fX!+Y[$`WOY!+TYZ%ZZ!^!+T!^!_!)o!_#O!+T#O#P!,O#P#Q!&V#Q#o!+T#o#p!)o#p;'S!+T;'S;=`!,p<%lO!+TX!,TX$`WOY!+TYZ%ZZ!^!+T!^!_!)o!_#o!+T#o#p!)o#p;'S!+T;'S;=`!,p<%lO!+TX!,sP;=`<%l!+TX!,{X$`WOY!&VYZ%ZZ!^!&V!^!_!(f!_#o!&V#o#p!(f#p;'S!&V;'S;=`!-h<%lO!&VX!-kP;=`<%l!&V7Z!-u`$`W!PPOY!-nYZ!.wZz!-nz{!2U{!P!-n!P!Q!@m!Q!^!-n!^!_!4m!_!}!-n!}#O!;l#O#P!?o#P#o!-n#o#p!4m#p;'S!-n;'S;=`!@g<%lO!-n7Z!.|X$`WOz!.wz{!/i{!^!.w!^!_!0w!_#o!.w#o#p!0w#p;'S!.w;'S;=`!2O<%lO!.w7Z!/nZ$`WOz!.wz{!/i{!P!.w!P!Q!0a!Q!^!.w!^!_!0w!_#o!.w#o#p!0w#p;'S!.w;'S;=`!2O<%lO!.w7Z!0hT$`WU7RO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z7R!0zTOz!0wz{!1Z{;'S!0w;'S;=`!1x<%lO!0w7R!1^VOz!0wz{!1Z{!P!0w!P!Q!1s!Q;'S!0w;'S;=`!1x<%lO!0w7R!1xOU7R7R!1{P;=`<%l!0w7Z!2RP;=`<%l!.w7Z!2]`$`W!PPOY!-nYZ!.wZz!-nz{!2U{!P!-n!P!Q!3_!Q!^!-n!^!_!4m!_!}!-n!}#O!;l#O#P!?o#P#o!-n#o#p!4m#p;'S!-n;'S;=`!@g<%lO!-n7Z!3ha$`WU7R!PPO!^%Z!_#Z%Z#Z#[!'Y#[#]%Z#]#^!'Y#^#a%Z#a#b!'Y#b#g%Z#g#h!'Y#h#i%Z#i#j!'Y#j#m%Z#m#n!'Y#n#o%Z#p;'S%Z;'S;=`%o<%lO%Z7R!4r[!PPOY!4mYZ!0wZz!4mz{!5h{!P!4m!P!Q!:b!Q!}!4m!}#O!6|#O#P!9r#P;'S!4m;'S;=`!:[<%lO!4m7R!5m[!PPOY!4mYZ!0wZz!4mz{!5h{!P!4m!P!Q!6c!Q!}!4m!}#O!6|#O#P!9r#P;'S!4m;'S;=`!:[<%lO!4m7R!6jUU7R!PP#Z#[!)W#]#^!)W#a#b!)W#g#h!)W#i#j!)W#m#n!)W7R!7PYOY!6|YZ!0wZz!6|z{!7o{#O!6|#O#P!9S#P#Q!4m#Q;'S!6|;'S;=`!9l<%lO!6|7R!7r[OY!6|YZ!0wZz!6|z{!7o{!P!6|!P!Q!8h!Q#O!6|#O#P!9S#P#Q!4m#Q;'S!6|;'S;=`!9l<%lO!6|7R!8mVU7ROY!)oZ#O!)o#O#P!*X#P#Q!(f#Q;'S!)o;'S;=`!*h<%lO!)o7R!9VVOY!6|YZ!0wZz!6|z{!7o{;'S!6|;'S;=`!9l<%lO!6|7R!9oP;=`<%l!6|7R!9uVOY!4mYZ!0wZz!4mz{!5h{;'S!4m;'S;=`!:[<%lO!4m7R!:_P;=`<%l!4m7R!:ga!PPOz!0wz{!1Z{#Z!0w#Z#[!:b#[#]!0w#]#^!:b#^#a!0w#a#b!:b#b#g!0w#g#h!:b#h#i!0w#i#j!:b#j#m!0w#m#n!:b#n;'S!0w;'S;=`!1x<%lO!0w7Z!;q^$`WOY!;lYZ!.wZz!;lz{!<m{!^!;l!^!_!6|!_#O!;l#O#P!>q#P#Q!-n#Q#o!;l#o#p!6|#p;'S!;l;'S;=`!?i<%lO!;l7Z!<r`$`WOY!;lYZ!.wZz!;lz{!<m{!P!;l!P!Q!=t!Q!^!;l!^!_!6|!_#O!;l#O#P!>q#P#Q!-n#Q#o!;l#o#p!6|#p;'S!;l;'S;=`!?i<%lO!;l7Z!={[$`WU7ROY!+TYZ%ZZ!^!+T!^!_!)o!_#O!+T#O#P!,O#P#Q!&V#Q#o!+T#o#p!)o#p;'S!+T;'S;=`!,p<%lO!+T7Z!>vZ$`WOY!;lYZ!.wZz!;lz{!<m{!^!;l!^!_!6|!_#o!;l#o#p!6|#p;'S!;l;'S;=`!?i<%lO!;l7Z!?lP;=`<%l!;l7Z!?tZ$`WOY!-nYZ!.wZz!-nz{!2U{!^!-n!^!_!4m!_#o!-n#o#p!4m#p;'S!-n;'S;=`!@g<%lO!-n7Z!@jP;=`<%l!-n7Z!@te$`W!PPOz!.wz{!/i{!^!.w!^!_!0w!_#Z!.w#Z#[!@m#[#]!.w#]#^!@m#^#a!.w#a#b!@m#b#g!.w#g#h!@m#h#i!.w#i#j!@m#j#m!.w#m#n!@m#n#o!.w#o#p!0w#p;'S!.w;'S;=`!2O<%lO!.w7Z!B^X$`WT7ROY!BVYZ%ZZ!^!BV!^!_!By!_#o!BV#o#p!By#p;'S!BV;'S;=`!Cb<%lO!BV7R!COST7ROY!ByZ;'S!By;'S;=`!C[<%lO!By7R!C_P;=`<%l!By7Z!CeP;=`<%l!BV&u!Cq^$`W#w&l!PPOY!&VYZ%ZZ!P!&V!P!Q!'Y!Q!^!&V!^!_!(f!_!}!&V!}#O!+T#O#P!,v#P#o!&V#o#p!(f#p;'S!&V;'S;=`!-h<%lO!&V]!Dv^$PS$`W!PPOY!&VYZ%ZZ!P!&V!P!Q!'Y!Q!^!&V!^!_!(f!_!}!&V!}#O!+T#O#P!,v#P#o!&V#o#p!(f#p;'S!&V;'S;=`!-h<%lO!&V&c!Eyf$`Wl&ZO!O%Z!O!P! d!P!Q%Z!Q![!G_![!^%Z!_!g%Z!g!h!!d!h#R%Z#R#S!G_#S#U%Z#U#V!IR#V#X%Z#X#Y!!d#Y#b%Z#b#c!Hk#c#d!Js#d#l%Z#l#m!L_#m#o%Z#p;'S%Z;'S;=`%o<%lO%Z&c!Gfa$`Wl&ZO!O%Z!O!P! d!P!Q%Z!Q![!G_![!^%Z!_!g%Z!g!h!!d!h#R%Z#R#S!G_#S#X%Z#X#Y!!d#Y#b%Z#b#c!Hk#c#o%Z#p;'S%Z;'S;=`%o<%lO%Z&c!HrT$`Wl&ZO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z&c!IWY$`WO!Q%Z!Q!R!Iv!R!S!Iv!S!^%Z!_#R%Z#R#S!Iv#S#o%Z#p;'S%Z;'S;=`%o<%lO%Z&c!I}[$`Wl&ZO!Q%Z!Q!R!Iv!R!S!Iv!S!^%Z!_#R%Z#R#S!Iv#S#b%Z#b#c!Hk#c#o%Z#p;'S%Z;'S;=`%o<%lO%Z&c!JxX$`WO!Q%Z!Q!Y!Ke!Y!^%Z!_#R%Z#R#S!Ke#S#o%Z#p;'S%Z;'S;=`%o<%lO%Z&c!KlZ$`Wl&ZO!Q%Z!Q!Y!Ke!Y!^%Z!_#R%Z#R#S!Ke#S#b%Z#b#c!Hk#c#o%Z#p;'S%Z;'S;=`%o<%lO%Z&c!Ld]$`WO!Q%Z!Q![!M]![!^%Z!_!c%Z!c!i!M]!i#R%Z#R#S!M]#S#T%Z#T#Z!M]#Z#o%Z#p;'S%Z;'S;=`%o<%lO%Z&c!Md_$`Wl&ZO!Q%Z!Q![!M]![!^%Z!_!c%Z!c!i!M]!i#R%Z#R#S!M]#S#T%Z#T#Z!M]#Z#b%Z#b#c!Hk#c#o%Z#p;'S%Z;'S;=`%o<%lO%Z(m!NlT!_V$`W#u(^O!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z!P# ST_w$`WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z6i# nR'n$Y!c(O$Q,_(ZP!P!Q# w!^!_# |!_!`#!ZW# |O$bW&l#!RP#g&l!_!`#!U&l#!ZO#w&l&l#!`O#h&l(m#!gV#T(e$`WO!^%Z!_!`(l!`!a#!|!a#o%Z#p;'S%Z;'S;=`%o<%lO%Z&u##TT#`&m$`WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z(m##oVe!s#h&l$]S$`WO!^%Z!_!`#$U!`!a#$l!a#o%Z#p;'S%Z;'S;=`%o<%lO%Z&t#$]T#h&l$`WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z&t#$sV#g&l$`WO!^%Z!_!`<z!`!a#%Y!a#o%Z#p;'S%Z;'S;=`%o<%lO%Z&t#%aU#g&l$`WO!^%Z!_!`<z!`#o%Z#p;'S%Z;'S;=`%o<%lO%Z(m#%zX'}&q$`WO!O%Z!O!P#&g!P!^%Z!_!a%Z!a!b#&}!b#o%Z#p;'S%Z;'S;=`%o<%lO%Z(i#&nTy(a$`WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z&t#'UU$`W#r&lO!^%Z!_!`<z!`#o%Z#p;'S%Z;'S;=`%o<%lO%Z#_#'oT!u#V$`WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z,P#(VT{+w$`WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z$P#(mT!Q#w$`WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z&t#)TU#o&l$`WO!^%Z!_!`<z!`#o%Z#p;'S%Z;'S;=`%o<%lO%Z){#)nT$`W'r)sO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z,T#*Ya$`W's#S'j)s$USOt%Ztu#)}u}%Z}!O#+_!O!Q%Z!Q![#)}![!^%Z!_!c%Z!c!}#)}!}#R%Z#R#S#)}#S#T%Z#T#o#)}#p$g%Z$g;'S#)};'S;=`#,q<%lO#)}[#+fa$`W$USOt%Ztu#+_u}%Z}!O#+_!O!Q%Z!Q![#+_![!^%Z!_!c%Z!c!}#+_!}#R%Z#R#S#+_#S#T%Z#T#o#+_#p$g%Z$g;'S#+_;'S;=`#,k<%lO#+_[#,nP;=`<%l#+_,T#,tP;=`<%l#)}~#,|O!V~(h#-TV(U(`$`WO!^%Z!_!`<z!`#o%Z#p#q#&}#q;'S%Z;'S;=`%o<%lO%Z(}#-sT!U(soQ$`WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%ZX#.ZT!mP$`WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z7Z#.wt$`W'g7R's#S'j)s$SSOX%ZXY%uYZ%ZZ[%u[p%Zpq%uqt%Ztu9gu}%Z}!O:w!O!Q%Z!Q![9g![!^%Z!_!c%Z!c!}9g!}#R%Z#R#S9g#S#T%Z#T#o9g#p$f%Z$f$g%u$g#BY9g#BY#BZ#.j#BZ$IS9g$IS$I_#.j$I_$JT9g$JT$JU#.j$JU$KV9g$KV$KW#.j$KW&FU9g&FU&FV#.j&FV;'S9g;'S;=`<Z<%l?HT9g?HT?HU#.j?HUO9g7Z#1fa$`W'h7R's#S'j)s$SSOt%Ztu9gu}%Z}!O:w!O!Q%Z!Q![9g![!^%Z!_!c%Z!c!}9g!}#R%Z#R#S9g#S#T%Z#T#o9g#p$g%Z$g;'S9g;'S;=`<Z<%lO9g",tokenizers:[zv,Lv,Fv,Uv,0,1,2,3,4,5,6,7,8,9,Pv],topRules:{Script:[0,7],SingleExpression:[1,263]},dialects:{jsx:13404,ts:13406},dynamicPrecedences:{159:1,187:1},specialized:[{term:302,get:e=>Nv[e]||-1},{term:311,get:e=>Vv[e]||-1},{term:65,get:e=>jv[e]||-1}],tokenPrec:13429});$A("function ${name}(${params}) {\n\t${}\n}",{label:"function",detail:"definition",type:"keyword"}),$A("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n\t${}\n}",{label:"for",detail:"loop",type:"keyword"}),$A("for (let ${name} of ${collection}) {\n\t${}\n}",{label:"for",detail:"of loop",type:"keyword"}),$A("do {\n\t${}\n} while (${})",{label:"do",detail:"loop",type:"keyword"}),$A("while (${}) {\n\t${}\n}",{label:"while",detail:"loop",type:"keyword"}),$A("try {\n\t${}\n} catch (${error}) {\n\t${}\n}",{label:"try",detail:"/ catch block",type:"keyword"}),$A("if (${}) {\n\t${}\n}",{label:"if",detail:"block",type:"keyword"}),$A("if (${}) {\n\t${}\n} else {\n\t${}\n}",{label:"if",detail:"/ else block",type:"keyword"}),$A("class ${name} {\n\tconstructor(${params}) {\n\t\t${}\n\t}\n}",{label:"class",detail:"definition",type:"keyword"}),$A('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),$A('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"});const qv=df.define({name:"javascript",parser:Hv.configure({props:[kf.add({IfStatement:Pf({except:/^\s*({|else\b)/}),TryStatement:Pf({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:e=>e.baseIndent,SwitchBody:e=>{let t=e.textAfter,i=/^\s*\}/.test(t),s=/^\s*(case|default)\b/.test(t);return e.baseIndent+(i?0:s?1:2)*e.unit},Block:function({closing:e,align:t=!0,units:i=1}){return s=>Rf(s,t,i,e)}({closing:"}"}),ArrowFunction:e=>e.baseIndent+e.unit,"TemplateString BlockComment":()=>null,"Statement Property":Pf({except:/^{/}),JSXElement(e){let t=/^\s*<\//.test(e.textAfter);return e.lineIndent(e.node.from)+(t?0:e.unit)},JSXEscape(e){let t=/\s*\}/.test(e.textAfter);return e.lineIndent(e.node.from)+(t?0:e.unit)},"JSXOpenTag JSXSelfClosingTag":e=>e.column(e.node.from)+e.unit}),Ff.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression":function(e){let t=e.firstChild,i=e.lastChild;return t&&t.to<i.from?{from:t.to,to:i.type.isError?e.to:i.from}:null},BlockComment:e=>({from:e.from+2,to:e.to-2})})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}});function Xv(e,t,i=e.length){if(!t)return"";let s=t.getChild("JSXIdentifier");return s?e.sliceString(s.from,Math.min(s.to,i)):""}qv.configure({dialect:"ts"},"typescript"),qv.configure({dialect:"jsx"}),qv.configure({dialect:"jsx ts"},"typescript");const Wv="object"==typeof navigator&&/Android\b/.test(navigator.userAgent);kd.inputHandler.of(((e,t,i,s)=>{if((Wv?e.composing:e.compositionStarted)||e.state.readOnly||t!=i||">"!=s&&"/"!=s||!qv.isActiveAt(e.state,t,-1))return!1;let{state:n}=e,r=n.changeByRange((e=>{var t,i,r;let o,{head:a}=e,l=uf(n).resolveInner(a,-1);if("JSXStartTag"==l.name&&(l=l.parent),">"==s&&"JSXFragmentTag"==l.name)return{range:Do.cursor(a+1),changes:{from:a,insert:"><>"}};if(">"==s&&"JSXIdentifier"==l.name){if("JSXEndTag"!=(null===(i=null===(t=l.parent)||void 0===t?void 0:t.lastChild)||void 0===i?void 0:i.name)&&(o=Xv(n.doc,l.parent,a)))return{range:Do.cursor(a+1),changes:{from:a,insert:`></${o}>`}}}else if("/"==s&&"JSXFragmentTag"==l.name){let e=l.parent,t=null==e?void 0:e.parent;if(e.from==a-1&&"JSXEndTag"!=(null===(r=t.lastChild)||void 0===r?void 0:r.name)&&(o=Xv(n.doc,null==t?void 0:t.firstChild,a))){let e=`/${o}>`;return{range:Do.cursor(a+e.length),changes:{from:a,insert:e}}}}return{range:e}}));return!r.changes.empty&&(e.dispatch(r,{userEvent:"input.type",scrollIntoView:!0}),!0)}));let Zv=function(){},Yv=function(){};const _v=jo.define({create:()=>null,update:(e,t)=>(t.docChanged&&Yv(t.newDoc.toString()),null)}),Kv=function(e,t={}){return Lb.of({source:e,config:t})}((e=>{let t=[],i=e.errorLines.length;if(0===i)return t;for(;i--;)t.push({from:e.state.doc.line(e.errorLines[i].lineNumber).from,to:e.state.doc.line(e.errorLines[i].lineNumber).from+2,message:e.errorLines[i].description,severity:"error"});return t}));function Jv(e="",t={}){let i=[tp(),np,uu(),Nm(),im(),Xd(),Of.of("    "),Ca.allowMultipleSelections.of(!0),Ca.transactionFilter.of((e=>{if(!e.docChanged||!e.isUserEvent("input.type")&&!e.isUserEvent("input.complete"))return e;let t=e.startState.languageDataAt("indentOnInput",e.startState.selection.main.head);if(!t.length)return e;let i=e.newDoc,{head:s}=e.newSelection.main,n=i.lineAt(s);if(s>n.from+200)return e;let r=i.sliceString(n.from,s);if(!t.some((e=>e.test(r))))return e;let{state:o}=e,a=-1,l=[];for(let{head:e}of o.selection.ranges){let t=o.doc.lineAt(e);if(t.from==a)continue;a=t.from;let i=If(o,t.from);if(null==i)continue;let s=/^\s*/.exec(t.text)[0],n=Sf(o,i);s!=n&&l.push({from:t.from,to:t.from+s.length,insert:n})}return l.length?[e,{changes:l,sequential:!0}]:e})),vm(),[cb,rb],Ld.of([rA,...db,...nA,...ng,...Yf,...vb]),qv,lm(cm,{fallback:!0}),_v,Kv,$b(),ov];return Ca.create({doc:e,extensions:i})}class $v extends kd{constructor(e,t){super({state:Jv(),parent:e}),this.isEdit=!1,this.errorLines=[],Zv=t,Yv=this.onChange.bind(this)}addError(e){this.errorLines=e}noError(){this.errorLines=[]}setValue(e){this.isEdit=!1,this.dispatch({changes:{from:0,to:this.state.doc.length,insert:e}})}clear(){this.setValue("")}getValue(){return this.state.doc.toString()}onChange(e){const t=this.getValue();""!==t&&(this.isEdit=e!==t),Zv(e)}}class ey{constructor(e=!1){this.esprimaReady=!1,this.loadEsprima(),this.isSolo=e,this.isOpen=!1,this.source=null,this.left=0,this.refresh=!1,this.old="",this.extraCode=[],this.useCodeMirror=!0,this.errorLines=[],this.widgets=[],this.isSolo&&this.open()}message(e){switch(e.data.type){case"connect":this.source=e.source,this.send({type:"connect",msg:"Editor connected !!"});break;case"set":this.set(e.data.code,e.data.name)}}send(e){this.source&&this.source.postMessage(e)}detach(){this.isSolo?this.send({type:"close"}):Main.externEditor()}reset(){let e=this.extraCode.length;for(;e--;)this.extraCode[e].remove();this.extraCode=[]}loadSrcipt(e){const t=e.substring(e.lastIndexOf("/")+1,e.lastIndexOf("."));var i=new XMLHttpRequest;i.open("GET",e),i.overrideMimeType("text/javascript"),i.onreadystatechange=function(){4===i.readyState&&(200===i.status||0===i.status?this.set(i.responseText,t):console.error("Couldn't load ["+t+"] ["+i.status+"]"))}.bind(this),i.send()}loadExtra(e,t){const i=e.substring(e.lastIndexOf("/")+1,e.lastIndexOf("."));var s=new XMLHttpRequest;s.open("GET",e),s.overrideMimeType("text/javascript"),s.onreadystatechange=function(){if(4===s.readyState)if(200===s.status||0===s.status){let e=document.createElement("script");e.language="javascript",e.type="text/javascript",e.charset="utf-8",e.async=!1,e.innerHTML="{"+s.responseText+"}",this.extraCode.push(e),document.getElementsByTagName("head")[0].appendChild(e),t()}else console.error("Couldn't load ["+i+"] ["+s.status+"]")}.bind(this),s.send()}loadEsprima(){var e=new XMLHttpRequest;e.open("GET","./src/libs/esprima.js"),e.overrideMimeType("text/javascript"),e.onreadystatechange=function(){if(4===e.readyState)if(200===e.status||0===e.status){let t=document.createElement("script");t.type="text/javascript",t.async=!0,t.charset="utf-8",t.text=e.responseText,document.getElementsByTagName("head")[0].appendChild(t),this.esprimaReady=!0}else console.error("Couldn't load [esprima] ["+e.status+"]")}.bind(this),e.send()}show(e){this.isOpen&&!e?this.close():this.open(),Main&&Main.setLeft(this.left)}open(){this.left=this.isSolo?window.innerWidth:.5*window.innerWidth-200,this.isOpen=!0;let e="-o-user-select:none; -ms-user-select:none; -khtml-user-select:none; -webkit-user-select:none; -moz-user-select: none; pointer-events:none; ";if(this.content=document.createElement("div"),this.isSolo?this.content.style.cssText="position:absolute; margin:0; padding:0; top:0px; left:0px; width:100%;  height:100%; ":this.content.style.cssText="position:absolute; margin:0; padding:0; top:0px; left:0px; width:"+this.left+"px;  height:100%; ",this.content.style.cssText+="font-size:18px; font-family:'Roboto Mono', 'Source Code Pro', Consolas, monospace; color:#f8f8f2; background:#181915;",document.body.appendChild(this.content),this.codeContent=document.createElement("div"),this.codeContent.style.cssText="font-smooth: antialiased; -webkit-font-smoothing : antialiased; -moz-osx-font-smoothing: grayscale;position:absolute; margin:0; padding:0; top:30px; left:3px; width:calc( 100% - 6px); height:calc( 100% - 60px); border-top: 1px solid #3e4036; border-bottom: 1px solid #3e4036;",this.useCodeMirror?this.code=new $v(this.codeContent,this.onUpdate.bind(this)):(this.code=new eo(this.codeContent,{language:"js",handleTabs:!0,lineNumbers:!0}),this.code.onUpdate(this.onUpdate.bind(this))),this.content.appendChild(this.codeContent),this.title=document.createElement("div"),this.title.style.cssText=e+"position:absolute; top:3px; left:10px; width:calc( 100% - 20px); color:#7c806c; text-shadow: 1px 1px 1px #000;",this.content.appendChild(this.title),this.solo=document.createElement("div"),this.solo.style.cssText=e+"position:absolute; top:0px; right:0px; width:30px; height:30px; pointer-events:auto; cursor: pointer;",this.solo.appendChild(d.dom("path","position:absolute; width:14px; height:14px; left:8px; top:8px; pointer-events:none;",{d:d.svgs.extern,fill:"#DDD",stroke:"none"})),this.content.appendChild(this.solo),this.solo.name="detach",this.saver=document.createElement("div"),this.saver.style.cssText=e+"position:absolute; top:0px; right:30px; width:30px; height:30px; pointer-events:auto; cursor: pointer;",this.saver.appendChild(d.dom("path","position:absolute; width:14px; height:14px; left:8px; top:8px; pointer-events:none;",{d:d.svgs.save,fill:"#DDD",stroke:"none"})),this.content.appendChild(this.saver),this.saver.name="save",this.loader=document.createElement("div"),this.loader.style.cssText=e+"position:absolute; top:0px; right:60px; width:30px; height:30px; pointer-events:auto; cursor: pointer;",this.loader.appendChild(d.dom("path","position:absolute; width:14px; height:14px; left:8px; top:8px; pointer-events:none;",{d:d.svgs.load,fill:"#DDD",stroke:"none"})),this.content.appendChild(this.loader),this.loader.name="load",this.help=document.createElement("div"),this.help.style.cssText=e+"position:absolute; top:3px; right:100px; width:60px; height:30px; pointer-events:none; color:#7c806c; text-shadow: 1px 1px 1px #000; text-align:right",this.content.appendChild(this.help),this.info=document.createElement("div"),this.info.style.cssText=e+"position:absolute; bottom:2px; left:10px; width:calc( 100% - 20px); text-shadow: 1px 1px 1px #000;",this.content.appendChild(this.info),this.separator=document.createElement("div"),this.separator.style.cssText=e+"background:none; position:absolute; top:0px; right:0px; width:3px; height:100%; cursor: e-resize; pointer-events:auto; z-index: 5; display:block; ",this.content.appendChild(this.separator),this.midDown=function(e){this.isDown=!0}.bind(this),this.midUp=function(e){this.isDown=!1,document.body.style.cursor="auto",this.codeContent.style.pointerEvents="auto"}.bind(this),this.midMove=function(e){e.target.name?this.help.innerHTML=e.target.name:this.help.innerHTML="",this.isDown&&(this.codeContent.style.pointerEvents="none",document.body.style.cursor="e-resize",this.left=e.clientX+2,this.content.style.width=this.left+"px",Main&&Main.setLeft(this.left))}.bind(this),this.helpers=function(e){console.log(e.target.name)}.bind(this),this.isSolo||(this.separator.addEventListener("pointerdown",this.midDown,!1),document.addEventListener("pointermove",this.midMove,!1),document.addEventListener("pointerup",this.midUp,!1)),this.saver.addEventListener("pointerdown",this.save.bind(this),!1),this.loader.addEventListener("pointerdown",this.load.bind(this),!1),this.solo.addEventListener("pointerdown",this.detach.bind(this),!1),Main&&(this.setInternCode(Main.getCode()),this.setTitle(Main.getCodeName())),this.isSolo){var t=location.hash.substr(1);""!==t&&this.loadSrcipt("./demos/"+t+".js")}else this.useCodeMirror||this.content.addEventListener("wheel",function(e){this.code.wheel(e)}.bind(this));this.content.addEventListener("dragover",(function(e){e.preventDefault()}),!1),this.content.addEventListener("dragend",(function(e){e.preventDefault()}),!1),this.content.addEventListener("dragleave",(function(e){e.preventDefault()}),!1),this.content.addEventListener("drop",this.drop.bind(this),!1)}setTitle(e){this.codeName=e,this.title.innerHTML="&#x2022;&#160;"+this.codeName}close(){this.left=0,this.isOpen=!1,document.removeEventListener("pointerdown",this.midDown),document.removeEventListener("pointerup",this.midUp),document.removeEventListener("pointermove",this.midMove),this.code.clear(),this.content.innerHTML="",document.body.removeChild(this.content)}onUpdate(e){let t=this.validate(e);this.refresh||(this.refresh=this.code.isEdit),t&&this.refresh&&(Main&&Main.injectCode(e),this.source&&this.send({type:"inject",code:e}),this.refresh=!1)}set(e,t,i){this.isOpen&&(this.setTitle(t),this.isSolo&&(location.hash=t),i&&(this.refresh=i),this.setInternCode(e))}setInternCode(e){this.useCodeMirror?this.code.setValue(e):this.code.updateCode(e),this.code.isEdit=!1}get(){return this.useCodeMirror?this.code.getValue():this.code.getCode()}save(e){u.save({name:this.codeName,data:this.get(),type:"js"})}load(e){u.load({callback:this.onLoad.bind(this),type:"js"})}onLoad(e,t){const i=t.substring(0,t.lastIndexOf("."));this.set(e,i)}setInfo(e,t=0){this.info.style.color=t?"#ff0000":"#7c806c",this.info.innerHTML=e}validate(e){if(!e)return;if(!this.esprimaReady)return!0;let t=[];try{t=esprima.parseModule(e,{tolerant:!0,loc:!0,range:!0,jsx:!0}).errors}catch(e){t.push(e)}let i=t.length;return 0===i?this.setInfo("&#2039;"):this.setInfo("Invalid code. Total issues: "+i,1),this.code.addError(t),0===i}drop(e){if(e.preventDefault(),!e.dataTransfer.items)return;const t=e.dataTransfer.files[0],i=new FileReader,s=t.name,n=s.substring(s.lastIndexOf(".")+1,s.length),r=s.substring(s.lastIndexOf("/")+1,s.lastIndexOf("."));"js"===n&&(i.readAsText(t),i.onload=function(e){this.set(e.target.result,r,!0)}.bind(this))}}
/**
   * postprocessing v6.35.2 build Thu Mar 14 2024
   * https://github.com/pmndrs/postprocessing
   * Copyright 2015-2024 Raoul van Rüschen
   * @license Zlib
   */var ty=.001,iy=class{constructor(){this.startTime=performance.now(),this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1}get autoReset(){return this._autoReset}set autoReset(e){"undefined"!=typeof document&&void 0!==document.hidden&&(e?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=e)}get delta(){return this._delta*ty}get fixedDelta(){return this._fixedDelta*ty}set fixedDelta(e){this._fixedDelta=1e3*e}get elapsed(){return this._elapsed*ty}update(e){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=(void 0!==e?e:performance.now())-this.startTime,this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}reset(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()-this.startTime}getDelta(){return this.delta}getElapsed(){return this.elapsed}handleEvent(e){document.hidden||(this.currentTime=performance.now()-this.startTime)}dispose(){this.autoReset=!1}},sy=new i.Camera,ny=null;var ry=class e{constructor(e="Pass",t=new i.Scene,s=sy){this.name=e,this.renderer=null,this.scene=t,this.camera=s,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(e){if(this.rtt===e){const t=this.fullscreenMaterial;null!==t&&(t.needsUpdate=!0),this.rtt=!e}}set mainScene(e){}set mainCamera(e){}setRenderer(e){this.renderer=e}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}get fullscreenMaterial(){return null!==this.screen?this.screen.material:null}set fullscreenMaterial(e){let t=this.screen;null!==t?t.material=e:(t=new i.Mesh(function(){if(null===ny){const e=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),t=new Float32Array([0,0,2,0,0,2]);void 0!==(ny=new i.BufferGeometry).setAttribute?(ny.setAttribute("position",new i.BufferAttribute(e,3)),ny.setAttribute("uv",new i.BufferAttribute(t,2))):(ny.addAttribute("position",new i.BufferAttribute(e,3)),ny.addAttribute("uv",new i.BufferAttribute(t,2)))}return ny}(),e),t.frustumCulled=!1,null===this.scene&&(this.scene=new i.Scene),this.scene.add(t),this.screen=t)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(e){this.fullscreenMaterial=e}getDepthTexture(){return null}setDepthTexture(e,t=i.BasicDepthPacking){}render(e,t,i,s,n){throw new Error("Render method not implemented!")}setSize(e,t){}initialize(e,t,i){}dispose(){for(const t of Object.keys(this)){const s=this[t];(s instanceof i.WebGLRenderTarget||s instanceof i.Material||s instanceof i.Texture||s instanceof e)&&this[t].dispose()}}},oy=class extends ry{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(e,t,i,s,n){const r=e.state.buffers.stencil;r.setLocked(!1),r.setTest(!1)}},ay=Number(i.REVISION.replace(/\D+/g,""));function ly(e){return ay<154?e.replace("colorspace_fragment","encodings_fragment"):e}var hy="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",cy=class extends i.ShaderMaterial{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new i.Uniform(null),opacity:new i.Uniform(1)},blending:i.NoBlending,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#include <common>\n#include <dithering_pars_fragment>\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nuniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;\n#include <colorspace_fragment>\n#include <dithering_fragment>\n}",vertexShader:hy}),this.fragmentShader=ly(this.fragmentShader)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}getOpacity(e){return this.uniforms.opacity.value}setOpacity(e){this.uniforms.opacity.value=e}},dy=class extends ry{constructor(e,t=!0){super("CopyPass"),this.fullscreenMaterial=new cy,this.needsSwap=!1,this.renderTarget=e,void 0===e&&(this.renderTarget=new i.WebGLRenderTarget(1,1,{minFilter:i.LinearFilter,magFilter:i.LinearFilter,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=t}get resize(){return this.autoResize}set resize(e){this.autoResize=e}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(e){this.autoResize=e}render(e,t,i,s,n){this.fullscreenMaterial.inputBuffer=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){this.autoResize&&this.renderTarget.setSize(e,t)}initialize(e,t,s){void 0!==s&&(this.renderTarget.texture.type=s,s!==i.UnsignedByteType?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":null!==e&&e.outputColorSpace===i.SRGBColorSpace&&(this.renderTarget.texture.colorSpace=i.SRGBColorSpace))}},uy=new i.Color,py=class extends ry{constructor(e=!0,t=!0,i=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=e,this.depth=t,this.stencil=i,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(e,t,i){this.color=e,this.depth=t,this.stencil=i}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(e){this.overrideClearColor=e}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(e){this.overrideClearAlpha=e}render(e,t,i,s,n){const r=this.overrideClearColor,o=this.overrideClearAlpha,a=e.getClearAlpha(),l=null!==r,h=o>=0;l?(e.getClearColor(uy),e.setClearColor(r,h?o:a)):h&&e.setClearAlpha(o),e.setRenderTarget(this.renderToScreen?null:t),e.clear(this.color,this.depth,this.stencil),l?e.setClearColor(uy,a):h&&e.setClearAlpha(a)}},fy=class extends ry{constructor(e,t){super("MaskPass",e,t),this.needsSwap=!1,this.clearPass=new py(!1,!1,!0),this.inverse=!1}set mainScene(e){this.scene=e}set mainCamera(e){this.camera=e}get inverted(){return this.inverse}set inverted(e){this.inverse=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(e){this.inverted=e}render(e,t,i,s,n){const r=e.getContext(),o=e.state.buffers,a=this.scene,l=this.camera,h=this.clearPass,c=this.inverted?0:1,d=1-c;o.color.setMask(!1),o.depth.setMask(!1),o.color.setLocked(!0),o.depth.setLocked(!0),o.stencil.setTest(!0),o.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),o.stencil.setFunc(r.ALWAYS,c,4294967295),o.stencil.setClear(d),o.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?h.render(e,null):(h.render(e,t),h.render(e,i))),this.renderToScreen?(e.setRenderTarget(null),e.render(a,l)):(e.setRenderTarget(t),e.render(a,l),e.setRenderTarget(i),e.render(a,l)),o.color.setLocked(!1),o.depth.setLocked(!1),o.stencil.setLocked(!1),o.stencil.setFunc(r.EQUAL,1,4294967295),o.stencil.setOp(r.KEEP,r.KEEP,r.KEEP),o.stencil.setLocked(!0)}},my=class{constructor(e=null,{depthBuffer:t=!0,stencilBuffer:i=!1,multisampling:s=0,frameBufferType:n}={}){this.renderer=null,this.inputBuffer=this.createBuffer(t,i,n,s),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new dy,this.depthTexture=null,this.passes=[],this.timer=new iy,this.autoRenderToScreen=!0,this.setRenderer(e)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(e){const t=this.inputBuffer,i=this.multisampling;i>0&&e>0?(this.inputBuffer.samples=e,this.outputBuffer.samples=e,this.inputBuffer.dispose(),this.outputBuffer.dispose()):i!==e&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(t.depthBuffer,t.stencilBuffer,t.texture.type,e),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(e){if(this.renderer=e,null!==e){const t=e.getSize(new i.Vector2),s=e.getContext().getContextAttributes().alpha,n=this.inputBuffer.texture.type;n===i.UnsignedByteType&&e.outputColorSpace===i.SRGBColorSpace&&(this.inputBuffer.texture.colorSpace=i.SRGBColorSpace,this.outputBuffer.texture.colorSpace=i.SRGBColorSpace,this.inputBuffer.dispose(),this.outputBuffer.dispose()),e.autoClear=!1,this.setSize(t.width,t.height);for(const t of this.passes)t.initialize(e,s,n)}}replaceRenderer(e,t=!0){const i=this.renderer,s=i.domElement.parentNode;return this.setRenderer(e),t&&null!==s&&(s.removeChild(i.domElement),s.appendChild(e.domElement)),i}createDepthTexture(){const e=this.depthTexture=new i.DepthTexture;return this.inputBuffer.depthTexture=e,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(e.format=i.DepthStencilFormat,e.type=i.UnsignedInt248Type):e.type=i.UnsignedIntType,e}deleteDepthTexture(){if(null!==this.depthTexture){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const e of this.passes)e.setDepthTexture(null)}}createBuffer(e,t,s,n){const r=this.renderer,o=null===r?new i.Vector2:r.getDrawingBufferSize(new i.Vector2),a={minFilter:i.LinearFilter,magFilter:i.LinearFilter,stencilBuffer:t,depthBuffer:e,type:s},l=new i.WebGLRenderTarget(o.width,o.height,a);return n>0&&(l.ignoreDepthForMultisampleCopy=!1,l.samples=n),s===i.UnsignedByteType&&null!==r&&r.outputColorSpace===i.SRGBColorSpace&&(l.texture.colorSpace=i.SRGBColorSpace),l.texture.name="EffectComposer.Buffer",l.texture.generateMipmaps=!1,l}setMainScene(e){for(const t of this.passes)t.mainScene=e}setMainCamera(e){for(const t of this.passes)t.mainCamera=e}addPass(e,t){const s=this.passes,n=this.renderer,r=n.getDrawingBufferSize(new i.Vector2),o=n.getContext().getContextAttributes().alpha,a=this.inputBuffer.texture.type;if(e.setRenderer(n),e.setSize(r.width,r.height),e.initialize(n,o,a),this.autoRenderToScreen&&(s.length>0&&(s[s.length-1].renderToScreen=!1),e.renderToScreen&&(this.autoRenderToScreen=!1)),void 0!==t?s.splice(t,0,e):s.push(e),this.autoRenderToScreen&&(s[s.length-1].renderToScreen=!0),e.needsDepthTexture||null!==this.depthTexture)if(null===this.depthTexture){const t=this.createDepthTexture();for(e of s)e.setDepthTexture(t)}else e.setDepthTexture(this.depthTexture)}removePass(e){const t=this.passes,i=t.indexOf(e);if(-1!==i&&t.splice(i,1).length>0){if(null!==this.depthTexture){const i=(e,t)=>e||t.needsDepthTexture;t.reduce(i,!1)||(e.getDepthTexture()===this.depthTexture&&e.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&i===t.length&&(e.renderToScreen=!1,t.length>0&&(t[t.length-1].renderToScreen=!0))}}removeAllPasses(){const e=this.passes;this.deleteDepthTexture(),e.length>0&&(this.autoRenderToScreen&&(e[e.length-1].renderToScreen=!1),this.passes=[])}render(e){const t=this.renderer,i=this.copyPass;let s,n,r,o=this.inputBuffer,a=this.outputBuffer,l=!1;void 0===e&&(this.timer.update(),e=this.timer.getDelta());for(const h of this.passes)h.enabled&&(h.render(t,o,a,e,l),h.needsSwap&&(l&&(i.renderToScreen=h.renderToScreen,s=t.getContext(),n=t.state.buffers.stencil,n.setFunc(s.NOTEQUAL,1,4294967295),i.render(t,o,a,e,l),n.setFunc(s.EQUAL,1,4294967295)),r=o,o=a,a=r),h instanceof fy?l=!0:h instanceof oy&&(l=!1))}setSize(e,t,s){const n=this.renderer,r=n.getSize(new i.Vector2);void 0!==e&&void 0!==t||(e=r.width,t=r.height),r.width===e&&r.height===t||n.setSize(e,t,s);const o=n.getDrawingBufferSize(new i.Vector2);this.inputBuffer.setSize(o.width,o.height),this.outputBuffer.setSize(o.width,o.height);for(const e of this.passes)e.setSize(o.width,o.height)}reset(){this.dispose(),this.autoRenderToScreen=!0}dispose(){for(const e of this.passes)e.dispose();this.passes=[],null!==this.inputBuffer&&this.inputBuffer.dispose(),null!==this.outputBuffer&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose()}},gy=0,Ay=1,by=2,vy={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},yy=class{constructor(){this.shaderParts=new Map([[vy.FRAGMENT_HEAD,null],[vy.FRAGMENT_MAIN_UV,null],[vy.FRAGMENT_MAIN_IMAGE,null],[vy.VERTEX_HEAD,null],[vy.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=gy,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=i.LinearSRGBColorSpace}},wy=!1,xy=class{constructor(e=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(e),this.meshCount=0,this.replaceMaterial=e=>{if(e.isMesh){let t;if(e.material.flatShading)switch(e.material.side){case i.DoubleSide:t=this.materialsFlatShadedDoubleSide;break;case i.BackSide:t=this.materialsFlatShadedBackSide;break;default:t=this.materialsFlatShaded}else switch(e.material.side){case i.DoubleSide:t=this.materialsDoubleSide;break;case i.BackSide:t=this.materialsBackSide;break;default:t=this.materials}this.originalMaterials.set(e,e.material),e.isSkinnedMesh?e.material=t[2]:e.isInstancedMesh?e.material=t[1]:e.material=t[0],++this.meshCount}}}cloneMaterial(e){if(!(e instanceof i.ShaderMaterial))return e.clone();const t=e.uniforms,s=new Map;for(const e in t){const i=t[e].value;i.isRenderTargetTexture&&(t[e].value=null,s.set(e,i))}const n=e.clone();for(const e of s)t[e[0]].value=e[1],n.uniforms[e[0]].value=e[1];return n}setMaterial(e){if(this.disposeMaterials(),this.material=e,null!==e){const t=this.materials=[this.cloneMaterial(e),this.cloneMaterial(e),this.cloneMaterial(e)];for(const s of t)s.uniforms=Object.assign({},e.uniforms),s.side=i.FrontSide;t[2].skinning=!0,this.materialsBackSide=t.map((t=>{const s=this.cloneMaterial(t);return s.uniforms=Object.assign({},e.uniforms),s.side=i.BackSide,s})),this.materialsDoubleSide=t.map((t=>{const s=this.cloneMaterial(t);return s.uniforms=Object.assign({},e.uniforms),s.side=i.DoubleSide,s})),this.materialsFlatShaded=t.map((t=>{const i=this.cloneMaterial(t);return i.uniforms=Object.assign({},e.uniforms),i.flatShading=!0,i})),this.materialsFlatShadedBackSide=t.map((t=>{const s=this.cloneMaterial(t);return s.uniforms=Object.assign({},e.uniforms),s.flatShading=!0,s.side=i.BackSide,s})),this.materialsFlatShadedDoubleSide=t.map((t=>{const s=this.cloneMaterial(t);return s.uniforms=Object.assign({},e.uniforms),s.flatShading=!0,s.side=i.DoubleSide,s}))}}render(e,t,i){const s=e.shadowMap.enabled;if(e.shadowMap.enabled=!1,wy){const s=this.originalMaterials;this.meshCount=0,t.traverse(this.replaceMaterial),e.render(t,i);for(const e of s)e[0].material=e[1];this.meshCount!==s.size&&s.clear()}else{const s=t.overrideMaterial;t.overrideMaterial=this.material,e.render(t,i),t.overrideMaterial=s}e.shadowMap.enabled=s}disposeMaterials(){if(null!==this.material){const e=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const t of e)t.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return wy}static set workaroundEnabled(e){wy=e}},Oy=-1,Cy=class extends i.EventDispatcher{constructor(e,t=-1,s=-1,n=1){super(),this.resizable=e,this.baseSize=new i.Vector2(1,1),this.preferredSize=new i.Vector2(t,s),this.target=this.preferredSize,this.s=n,this.effectiveSize=new i.Vector2,this.addEventListener("change",(()=>this.updateEffectiveSize())),this.updateEffectiveSize()}updateEffectiveSize(){const e=this.baseSize,t=this.preferredSize,i=this.effectiveSize,s=this.scale;t.width!==Oy?i.width=t.width:t.height!==Oy?i.width=Math.round(t.height*(e.width/Math.max(e.height,1))):i.width=Math.round(e.width*s),t.height!==Oy?i.height=t.height:t.width!==Oy?i.height=Math.round(t.width/Math.max(e.width/Math.max(e.height,1),1)):i.height=Math.round(e.height*s)}get width(){return this.effectiveSize.width}set width(e){this.preferredWidth=e}get height(){return this.effectiveSize.height}set height(e){this.preferredHeight=e}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(e){this.s!==e&&(this.s=e,this.preferredSize.setScalar(Oy),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getScale(){return this.scale}setScale(e){this.scale=e}get baseWidth(){return this.baseSize.width}set baseWidth(e){this.baseSize.width!==e&&(this.baseSize.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseWidth(){return this.baseWidth}setBaseWidth(e){this.baseWidth=e}get baseHeight(){return this.baseSize.height}set baseHeight(e){this.baseSize.height!==e&&(this.baseSize.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(e){this.baseHeight=e}setBaseSize(e,t){this.baseSize.width===e&&this.baseSize.height===t||(this.baseSize.set(e,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}get preferredWidth(){return this.preferredSize.width}set preferredWidth(e){this.preferredSize.width!==e&&(this.preferredSize.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(e){this.preferredWidth=e}get preferredHeight(){return this.preferredSize.height}set preferredHeight(e){this.preferredSize.height!==e&&(this.preferredSize.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(e){this.preferredHeight=e}setPreferredSize(e,t){this.preferredSize.width===e&&this.preferredSize.height===t||(this.preferredSize.set(e,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}copy(e){this.s=e.scale,this.baseSize.set(e.baseWidth,e.baseHeight),this.preferredSize.set(e.preferredWidth,e.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}static get AUTO_SIZE(){return Oy}},Sy=9,Iy=23,Ey=28,ky=30,By=new Map([[0,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y,opacity);}"],[1,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,min(y.a,opacity));}"],[2,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y)*0.5,opacity);}"],[3,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.rg,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}"],[4,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(step(0.0,y)*(1.0-min(vec4(1.0),(1.0-x)/y)),vec4(1.0),step(1.0,x));return mix(x,z,opacity);}"],[5,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=step(0.0,x)*mix(min(vec4(1.0),x/max(1.0-y,1e-9)),vec4(1.0),step(1.0,y));return mix(x,z,opacity);}"],[6,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x,y),opacity);}"],[7,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,abs(x-y),opacity);}"],[8,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x/max(y,1e-12),opacity);}"],[Sy,null],[10,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y-2.0*x*y),opacity);}"],[11,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 a=min(x,1.0),b=min(y,1.0);vec4 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,y));return mix(x,z,opacity);}"],[12,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,step(1.0,x+y),opacity);}"],[13,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.r,xHSL.gb));return vec4(mix(x.rgb,z,opacity),y.a);}"],[14,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-y,opacity);}"],[15,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y*(1.0-x),opacity);}"],[16,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x,y),opacity);}"],[17,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(y+x-1.0,0.0,1.0),opacity);}"],[18,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x+y,1.0),opacity);}"],[19,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(2.0*y+x-1.0,0.0,1.0),opacity);}"],[20,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.rg,yHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}"],[21,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x*y,opacity);}"],[22,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-abs(1.0-x-y),opacity);}"],[Iy,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,opacity);}"],[24,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(2.0*y*x,1.0-2.0*(1.0-y)*(1.0-x),step(0.5,x));return mix(x,z,opacity);}"],[25,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 z=mix(mix(y2,x,step(0.5*x,y)),max(vec4(0.0),y2-1.0),step(x,(y2-1.0)));return mix(x,z,opacity);}"],[26,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(min(x*x/max(1.0-y,1e-12),1.0),y,step(1.0,y));return mix(x,z,opacity);}"],[27,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.r,yHSL.g,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}"],[Ey,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y-min(x*y,1.0),opacity);}"],[29,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 w=step(0.5,y);vec4 z=mix(x-(1.0-y2)*x*(1.0-x),mix(x+(y2-1.0)*(sqrt(x)-x),x+(y2-1.0)*x*((16.0*x-12.0)*x+3.0),w*(1.0-step(0.25,x))),w);return mix(x,z,opacity);}"],[ky,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}"],[31,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x+y-1.0,0.0),opacity);}"],[32,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(max(1.0-min((1.0-x)/(2.0*y),1.0),0.0),min(x/(2.0*(1.0-y)),1.0),step(0.5,y));return mix(x,z,opacity);}"]]),Qy=class extends i.EventDispatcher{constructor(e,t=1){super(),this._blendFunction=e,this.opacity=new i.Uniform(t)}getOpacity(){return this.opacity.value}setOpacity(e){this.opacity.value=e}get blendFunction(){return this._blendFunction}set blendFunction(e){this._blendFunction=e,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(e){this.blendFunction=e}getShaderCode(){return By.get(this.blendFunction)}},My=2,Ty=3,Dy=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],Ry=class extends i.ShaderMaterial{constructor(e=new i.Vector4){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new i.Uniform(null),texelSize:new i.Uniform(new i.Vector4),scale:new i.Uniform(1),kernel:new i.Uniform(0)},blending:i.NoBlending,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nvarying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;\n#include <colorspace_fragment>\n}",vertexShader:"uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}"}),this.fragmentShader=ly(this.fragmentShader),this.setTexelSize(e.x,e.y),this.kernelSize=My}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.inputBuffer=e}get kernelSequence(){return Dy[this.kernelSize]}get scale(){return this.uniforms.scale.value}set scale(e){this.uniforms.scale.value=e}getScale(){return this.uniforms.scale.value}setScale(e){this.uniforms.scale.value=e}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(e){this.uniforms.kernel.value=e}setKernel(e){this.kernel=e}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t,.5*e,.5*t)}setSize(e,t){const i=1/e,s=1/t;this.uniforms.texelSize.value.set(i,s,.5*i,.5*s)}},Py=class extends ry{constructor({kernelSize:e=My,resolutionScale:t=.5,width:s=Cy.AUTO_SIZE,height:n=Cy.AUTO_SIZE,resolutionX:r=s,resolutionY:o=n}={}){super("KawaseBlurPass"),this.renderTargetA=new i.WebGLRenderTarget(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";const a=this.resolution=new Cy(this,r,o,t);a.addEventListener("change",(e=>this.setSize(a.baseWidth,a.baseHeight))),this._blurMaterial=new Ry,this._blurMaterial.kernelSize=e,this.copyMaterial=new cy}getResolution(){return this.resolution}get blurMaterial(){return this._blurMaterial}set blurMaterial(e){this._blurMaterial=e}get dithering(){return this.copyMaterial.dithering}set dithering(e){this.copyMaterial.dithering=e}get kernelSize(){return this.blurMaterial.kernelSize}set kernelSize(e){this.blurMaterial.kernelSize=e}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get scale(){return this.blurMaterial.scale}set scale(e){this.blurMaterial.scale=e}getScale(){return this.blurMaterial.scale}setScale(e){this.blurMaterial.scale=e}getKernelSize(){return this.kernelSize}setKernelSize(e){this.kernelSize=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,t,i,s,n){const r=this.scene,o=this.camera,a=this.renderTargetA,l=this.renderTargetB,h=this.blurMaterial,c=h.kernelSequence;let d=t;this.fullscreenMaterial=h;for(let t=0,i=c.length;t<i;++t){const i=1&t?l:a;h.kernel=c[t],h.inputBuffer=d.texture,e.setRenderTarget(i),e.render(r,o),d=i}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=d.texture,e.setRenderTarget(this.renderToScreen?null:i),e.render(r,o)}setSize(e,t){const i=this.resolution;i.setBaseSize(e,t);const s=i.width,n=i.height;this.renderTargetA.setSize(s,n),this.renderTargetB.setSize(s,n),this.blurMaterial.setSize(e,t)}initialize(e,t,s){void 0!==s&&(this.renderTargetA.texture.type=s,this.renderTargetB.texture.type=s,s!==i.UnsignedByteType?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):null!==e&&e.outputColorSpace===i.SRGBColorSpace&&(this.renderTargetA.texture.colorSpace=i.SRGBColorSpace,this.renderTargetB.texture.colorSpace=i.SRGBColorSpace))}static get AUTO_SIZE(){return Cy.AUTO_SIZE}},Ly=class extends i.ShaderMaterial{constructor(e=!1,t=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:i.REVISION.replace(/\D+/g,"")},uniforms:{inputBuffer:new i.Uniform(null),threshold:new i.Uniform(0),smoothing:new i.Uniform(1),range:new i.Uniform(null)},blending:i.NoBlending,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#include <common>\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\n#ifdef RANGE\nuniform vec2 range;\n#elif defined(THRESHOLD)\nuniform float threshold;uniform float smoothing;\n#endif\nvarying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);\n#ifdef RANGE\nfloat low=step(range.x,l);float high=step(l,range.y);l*=low*high;\n#elif defined(THRESHOLD)\nl=smoothstep(threshold,threshold+smoothing,l)*l;\n#endif\n#ifdef COLOR\ngl_FragColor=vec4(texel.rgb*clamp(l,0.0,1.0),l);\n#else\ngl_FragColor=vec4(l);\n#endif\n}",vertexShader:hy}),this.colorOutput=e,this.luminanceRange=t}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get threshold(){return this.uniforms.threshold.value}set threshold(e){this.smoothing>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=e}getThreshold(){return this.threshold}setThreshold(e){this.threshold=e}get smoothing(){return this.uniforms.smoothing.value}set smoothing(e){this.threshold>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=e}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(e){this.smoothing=e}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(e){}get colorOutput(){return void 0!==this.defines.COLOR}set colorOutput(e){e?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(e){return this.colorOutput}setColorOutputEnabled(e){this.colorOutput=e}get useRange(){return null!==this.luminanceRange}set useRange(e){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(e){null!==e?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=e,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(e){this.luminanceRange=e}},Fy=class extends ry{constructor({renderTarget:e,luminanceRange:t,colorOutput:s,resolutionScale:n=1,width:r=Cy.AUTO_SIZE,height:o=Cy.AUTO_SIZE,resolutionX:a=r,resolutionY:l=o}={}){super("LuminancePass"),this.fullscreenMaterial=new Ly(s,t),this.needsSwap=!1,this.renderTarget=e,void 0===this.renderTarget&&(this.renderTarget=new i.WebGLRenderTarget(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target");const h=this.resolution=new Cy(this,a,l,n);h.addEventListener("change",(e=>this.setSize(h.baseWidth,h.baseHeight)))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(e,t,i,s,n){this.fullscreenMaterial.inputBuffer=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){const i=this.resolution;i.setBaseSize(e,t),this.renderTarget.setSize(i.width,i.height)}initialize(e,t,s){void 0!==s&&s!==i.UnsignedByteType&&(this.renderTarget.texture.type=s,this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},Uy=class extends i.ShaderMaterial{constructor(){super({name:"DownsamplingMaterial",uniforms:{inputBuffer:new i.Uniform(null),texelSize:new i.Uniform(new i.Vector2)},blending:i.NoBlending,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\n#define WEIGHT_INNER 0.125\n#define WEIGHT_OUTER 0.0555555\nvarying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;float clampToBorder(const in vec2 uv){return float(uv.s>=0.0&&uv.s<=1.0&&uv.t>=0.0&&uv.t<=1.0);}void main(){vec4 c=vec4(0.0);vec4 w=WEIGHT_INNER*vec4(clampToBorder(vUv00),clampToBorder(vUv01),clampToBorder(vUv02),clampToBorder(vUv03));c+=w.x*texture2D(inputBuffer,vUv00);c+=w.y*texture2D(inputBuffer,vUv01);c+=w.z*texture2D(inputBuffer,vUv02);c+=w.w*texture2D(inputBuffer,vUv03);w=WEIGHT_OUTER*vec4(clampToBorder(vUv04),clampToBorder(vUv05),clampToBorder(vUv06),clampToBorder(vUv07));c+=w.x*texture2D(inputBuffer,vUv04);c+=w.y*texture2D(inputBuffer,vUv05);c+=w.z*texture2D(inputBuffer,vUv06);c+=w.w*texture2D(inputBuffer,vUv07);w=WEIGHT_OUTER*vec4(clampToBorder(vUv08),clampToBorder(vUv09),clampToBorder(vUv10),clampToBorder(vUv11));c+=w.x*texture2D(inputBuffer,vUv08);c+=w.y*texture2D(inputBuffer,vUv09);c+=w.z*texture2D(inputBuffer,vUv10);c+=w.w*texture2D(inputBuffer,vUv11);c+=WEIGHT_OUTER*texture2D(inputBuffer,vUv);gl_FragColor=c;\n#include <colorspace_fragment>\n}",vertexShader:"uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;void main(){vUv=position.xy*0.5+0.5;vUv00=vUv+texelSize*vec2(-1.0,1.0);vUv01=vUv+texelSize*vec2(1.0,1.0);vUv02=vUv+texelSize*vec2(-1.0,-1.0);vUv03=vUv+texelSize*vec2(1.0,-1.0);vUv04=vUv+texelSize*vec2(-2.0,2.0);vUv05=vUv+texelSize*vec2(0.0,2.0);vUv06=vUv+texelSize*vec2(2.0,2.0);vUv07=vUv+texelSize*vec2(-2.0,0.0);vUv08=vUv+texelSize*vec2(2.0,0.0);vUv09=vUv+texelSize*vec2(-2.0,-2.0);vUv10=vUv+texelSize*vec2(0.0,-2.0);vUv11=vUv+texelSize*vec2(2.0,-2.0);gl_Position=vec4(position.xy,1.0,1.0);}"}),this.fragmentShader=ly(this.fragmentShader)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}},zy=class extends i.ShaderMaterial{constructor(){super({name:"UpsamplingMaterial",uniforms:{inputBuffer:new i.Uniform(null),supportBuffer:new i.Uniform(null),texelSize:new i.Uniform(new i.Vector2),radius:new i.Uniform(.85)},blending:i.NoBlending,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;uniform mediump sampler2D supportBuffer;\n#else\nuniform lowp sampler2D inputBuffer;uniform lowp sampler2D supportBuffer;\n#endif\nuniform float radius;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vec4 c=vec4(0.0);c+=texture2D(inputBuffer,vUv0)*0.0625;c+=texture2D(inputBuffer,vUv1)*0.125;c+=texture2D(inputBuffer,vUv2)*0.0625;c+=texture2D(inputBuffer,vUv3)*0.125;c+=texture2D(inputBuffer,vUv)*0.25;c+=texture2D(inputBuffer,vUv4)*0.125;c+=texture2D(inputBuffer,vUv5)*0.0625;c+=texture2D(inputBuffer,vUv6)*0.125;c+=texture2D(inputBuffer,vUv7)*0.0625;vec4 baseColor=texture2D(supportBuffer,vUv);gl_FragColor=mix(baseColor,c,radius);\n#include <colorspace_fragment>\n}",vertexShader:"uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,1.0);vUv1=vUv+texelSize*vec2(0.0,1.0);vUv2=vUv+texelSize*vec2(1.0,1.0);vUv3=vUv+texelSize*vec2(-1.0,0.0);vUv4=vUv+texelSize*vec2(1.0,0.0);vUv5=vUv+texelSize*vec2(-1.0,-1.0);vUv6=vUv+texelSize*vec2(0.0,-1.0);vUv7=vUv+texelSize*vec2(1.0,-1.0);gl_Position=vec4(position.xy,1.0,1.0);}"}),this.fragmentShader=ly(this.fragmentShader)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}set supportBuffer(e){this.uniforms.supportBuffer.value=e}get radius(){return this.uniforms.radius.value}set radius(e){this.uniforms.radius.value=e}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}},Gy=class extends ry{constructor(){super("MipmapBlurPass"),this.needsSwap=!1,this.renderTarget=new i.WebGLRenderTarget(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Upsampling.Mipmap0",this.downsamplingMipmaps=[],this.upsamplingMipmaps=[],this.downsamplingMaterial=new Uy,this.upsamplingMaterial=new zy,this.resolution=new i.Vector2}get texture(){return this.renderTarget.texture}get levels(){return this.downsamplingMipmaps.length}set levels(e){if(this.levels!==e){const t=this.renderTarget;this.dispose(),this.downsamplingMipmaps=[],this.upsamplingMipmaps=[];for(let i=0;i<e;++i){const e=t.clone();e.texture.name="Downsampling.Mipmap"+i,this.downsamplingMipmaps.push(e)}this.upsamplingMipmaps.push(t);for(let i=1,s=e-1;i<s;++i){const e=t.clone();e.texture.name="Upsampling.Mipmap"+i,this.upsamplingMipmaps.push(e)}this.setSize(this.resolution.x,this.resolution.y)}}get radius(){return this.upsamplingMaterial.radius}set radius(e){this.upsamplingMaterial.radius=e}render(e,t,i,s,n){const{scene:r,camera:o}=this,{downsamplingMaterial:a,upsamplingMaterial:l}=this,{downsamplingMipmaps:h,upsamplingMipmaps:c}=this;let d=t;this.fullscreenMaterial=a;for(let t=0,i=h.length;t<i;++t){const i=h[t];a.setSize(d.width,d.height),a.inputBuffer=d.texture,e.setRenderTarget(i),e.render(r,o),d=i}this.fullscreenMaterial=l;for(let t=c.length-1;t>=0;--t){const i=c[t];l.setSize(d.width,d.height),l.inputBuffer=d.texture,l.supportBuffer=h[t].texture,e.setRenderTarget(i),e.render(r,o),d=i}}setSize(e,t){const i=this.resolution;i.set(e,t);let s=i.width,n=i.height;for(let e=0,t=this.downsamplingMipmaps.length;e<t;++e)s=Math.round(.5*s),n=Math.round(.5*n),this.downsamplingMipmaps[e].setSize(s,n),e<this.upsamplingMipmaps.length&&this.upsamplingMipmaps[e].setSize(s,n)}initialize(e,t,s){if(void 0!==s){const t=this.downsamplingMipmaps.concat(this.upsamplingMipmaps);for(const e of t)e.texture.type=s;if(s!==i.UnsignedByteType)this.downsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.upsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1";else if(null!==e&&e.outputColorSpace===i.SRGBColorSpace)for(const e of t)e.texture.colorSpace=i.SRGBColorSpace}}dispose(){super.dispose();for(const e of this.downsamplingMipmaps.concat(this.upsamplingMipmaps))e.dispose()}},Ny=class extends i.EventDispatcher{constructor(e,t,{attributes:s=gy,blendFunction:n=Iy,defines:r=new Map,uniforms:o=new Map,extensions:a=null,vertexShader:l=null}={}){super(),this.name=e,this.renderer=null,this.attributes=s,this.fragmentShader=t,this.vertexShader=l,this.defines=r,this.uniforms=o,this.extensions=a,this.blendMode=new Qy(n),this.blendMode.addEventListener("change",(e=>this.setChanged())),this._inputColorSpace=i.LinearSRGBColorSpace,this._outputColorSpace=i.NoColorSpace}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(e){this._inputColorSpace=e,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e,this.setChanged()}set mainScene(e){}set mainCamera(e){}getName(){return this.name}setRenderer(e){this.renderer=e}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(e){this.attributes=e,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(e){this.fragmentShader=e,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(e){this.vertexShader=e,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(e,t=i.BasicDepthPacking){}update(e,t,i){}setSize(e,t){}initialize(e,t,i){}dispose(){for(const e of Object.keys(this)){const t=this[e];(t instanceof i.WebGLRenderTarget||t instanceof i.Material||t instanceof i.Texture||t instanceof ry)&&this[e].dispose()}}},Vy=class extends Ny{constructor({blendFunction:e=Ey,luminanceThreshold:t=.9,luminanceSmoothing:s=.025,mipmapBlur:n=!1,intensity:r=1,radius:o=.85,levels:a=8,kernelSize:l=Ty,resolutionScale:h=.5,width:c=Cy.AUTO_SIZE,height:d=Cy.AUTO_SIZE,resolutionX:u=c,resolutionY:p=d}={}){super("BloomEffect","#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D map;\n#else\nuniform lowp sampler2D map;\n#endif\nuniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 texel=texture2D(map,uv);outputColor=vec4(texel.rgb*intensity,texel.a);}",{blendFunction:e,uniforms:new Map([["map",new i.Uniform(null)],["intensity",new i.Uniform(r)]])}),this.renderTarget=new i.WebGLRenderTarget(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.blurPass=new Py({kernelSize:l}),this.luminancePass=new Fy({colorOutput:!0}),this.luminanceMaterial.threshold=t,this.luminanceMaterial.smoothing=s,this.mipmapBlurPass=new Gy,this.mipmapBlurPass.enabled=n,this.mipmapBlurPass.radius=o,this.mipmapBlurPass.levels=a,this.uniforms.get("map").value=n?this.mipmapBlurPass.texture:this.renderTarget.texture;const f=this.resolution=new Cy(this,u,p,h);f.addEventListener("change",(e=>this.setSize(f.baseWidth,f.baseHeight)))}get texture(){return this.mipmapBlurPass.enabled?this.mipmapBlurPass.texture:this.renderTarget.texture}getTexture(){return this.texture}getResolution(){return this.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get dithering(){return this.blurPass.dithering}set dithering(e){this.blurPass.dithering=e}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(e){this.blurPass.kernelSize=e}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(e){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(e){this.uniforms.get("intensity").value=e}getIntensity(){return this.intensity}setIntensity(e){this.intensity=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}update(e,t,i){const s=this.renderTarget,n=this.luminancePass;n.enabled?(n.render(e,t),this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(e,n.renderTarget):this.blurPass.render(e,n.renderTarget,s)):this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(e,t):this.blurPass.render(e,t,s)}setSize(e,t){const i=this.resolution;i.setBaseSize(e,t),this.renderTarget.setSize(i.width,i.height),this.blurPass.resolution.copy(i),this.luminancePass.setSize(e,t),this.mipmapBlurPass.setSize(e,t)}initialize(e,t,s){this.blurPass.initialize(e,t,s),this.luminancePass.initialize(e,t,s),this.mipmapBlurPass.initialize(e,t,s),void 0!==s&&(this.renderTarget.texture.type=s,null!==e&&e.outputColorSpace===i.SRGBColorSpace&&(this.renderTarget.texture.colorSpace=i.SRGBColorSpace))}},jy=class extends ry{constructor(e,t="inputBuffer"){super("ShaderPass"),this.fullscreenMaterial=e,this.input=t}setInput(e){this.input=e}render(e,t,i,s,n){const r=this.fullscreenMaterial.uniforms;null!==t&&void 0!==r&&void 0!==r[this.input]&&(r[this.input].value=t.texture),e.setRenderTarget(this.renderToScreen?null:i),e.render(this.scene,this.camera)}initialize(e,t,s){void 0!==s&&s!==i.UnsignedByteType&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},Hy=class extends ry{constructor(e,t,i=null){super("RenderPass",e,t),this.needsSwap=!1,this.clearPass=new py,this.overrideMaterialManager=null===i?null:new xy(i),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}set mainScene(e){this.scene=e}set mainCamera(e){this.camera=e}get renderToScreen(){return super.renderToScreen}set renderToScreen(e){super.renderToScreen=e,this.clearPass.renderToScreen=e}get overrideMaterial(){const e=this.overrideMaterialManager;return null!==e?e.material:null}set overrideMaterial(e){const t=this.overrideMaterialManager;null!==e?null!==t?t.setMaterial(e):this.overrideMaterialManager=new xy(e):null!==t&&(t.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(e){this.overrideMaterial=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getSelection(){return this.selection}setSelection(e){this.selection=e}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(e){this.ignoreBackground=e}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(e){this.skipShadowMapUpdate=e}getClearPass(){return this.clearPass}render(e,t,i,s,n){const r=this.scene,o=this.camera,a=this.selection,l=o.layers.mask,h=r.background,c=e.shadowMap.autoUpdate,d=this.renderToScreen?null:t;null!==a&&o.layers.set(a.getLayer()),this.skipShadowMapUpdate&&(e.shadowMap.autoUpdate=!1),(this.ignoreBackground||null!==this.clearPass.overrideClearColor)&&(r.background=null),this.clearPass.enabled&&this.clearPass.render(e,t),e.setRenderTarget(d),null!==this.overrideMaterialManager?this.overrideMaterialManager.render(e,r,o):e.render(r,o),o.layers.mask=l,r.background=h,e.shadowMap.autoUpdate=c}},qy="lut.scaleup";function Xy(e,t,i){const s=document.createElement("canvas"),n=s.getContext("2d");if(s.width=e,s.height=t,i instanceof Image)n.drawImage(i,0,0);else{const s=n.createImageData(e,t);s.data.set(i),n.putImageData(s,0,0)}return s}var Wy=class e{constructor(e=0,t=0,i=null){this.width=e,this.height=t,this.data=i}toCanvas(){return"undefined"==typeof document?null:Xy(this.width,this.height,this.data)}static from(t){const{width:i,height:s}=t;let n;if(t instanceof Image){const e=Xy(i,s,t);if(null!==e){n=e.getContext("2d").getImageData(0,0,i,s).data}}else n=t.data;return new e(i,s,n)}},Zy=new i.Color,Yy=class e extends i.Data3DTexture{constructor(e,t){super(e,t,t,t),this.type=i.FloatType,this.format=i.RGBAFormat,this.minFilter=i.LinearFilter,this.magFilter=i.LinearFilter,this.wrapS=i.ClampToEdgeWrapping,this.wrapT=i.ClampToEdgeWrapping,this.wrapR=i.ClampToEdgeWrapping,this.unpackAlignment=1,this.needsUpdate=!0,this.colorSpace=i.LinearSRGBColorSpace,this.domainMin=new i.Vector3(0,0,0),this.domainMax=new i.Vector3(1,1,1)}get isLookupTexture3D(){return!0}scaleUp(t,i=!0){const s=this.image;let n;return n=t<=s.width?Promise.reject(new Error("The target size must be greater than the current size")):new Promise(((n,r)=>{const o=URL.createObjectURL(new Blob(['"use strict";(()=>{var O={SCALE_UP:"lut.scaleup"};var _=[new Float32Array(3),new Float32Array(3)],n=[new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array(3)],Z=[[new Float32Array([0,0,0]),new Float32Array([1,0,0]),new Float32Array([1,1,0]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([1,0,0]),new Float32Array([1,0,1]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([0,0,1]),new Float32Array([1,0,1]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([0,1,0]),new Float32Array([1,1,0]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([0,1,0]),new Float32Array([0,1,1]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([0,0,1]),new Float32Array([0,1,1]),new Float32Array([1,1,1])]];function d(a,t,r,m){let i=r[0]-t[0],e=r[1]-t[1],y=r[2]-t[2],h=a[0]-t[0],A=a[1]-t[1],w=a[2]-t[2],c=e*w-y*A,l=y*h-i*w,x=i*A-e*h,u=Math.sqrt(c*c+l*l+x*x),b=u*.5,s=c/u,F=l/u,f=x/u,p=-(a[0]*s+a[1]*F+a[2]*f),M=m[0]*s+m[1]*F+m[2]*f;return Math.abs(M+p)*b/3}function V(a,t,r,m,i,e){let y=(r+m*t+i*t*t)*4;e[0]=a[y+0],e[1]=a[y+1],e[2]=a[y+2]}function k(a,t,r,m,i,e){let y=r*(t-1),h=m*(t-1),A=i*(t-1),w=Math.floor(y),c=Math.floor(h),l=Math.floor(A),x=Math.ceil(y),u=Math.ceil(h),b=Math.ceil(A),s=y-w,F=h-c,f=A-l;if(w===y&&c===h&&l===A)V(a,t,y,h,A,e);else{let p;s>=F&&F>=f?p=Z[0]:s>=f&&f>=F?p=Z[1]:f>=s&&s>=F?p=Z[2]:F>=s&&s>=f?p=Z[3]:F>=f&&f>=s?p=Z[4]:f>=F&&F>=s&&(p=Z[5]);let[M,g,X,Y]=p,P=_[0];P[0]=s,P[1]=F,P[2]=f;let o=_[1],L=x-w,S=u-c,U=b-l;o[0]=L*M[0]+w,o[1]=S*M[1]+c,o[2]=U*M[2]+l,V(a,t,o[0],o[1],o[2],n[0]),o[0]=L*g[0]+w,o[1]=S*g[1]+c,o[2]=U*g[2]+l,V(a,t,o[0],o[1],o[2],n[1]),o[0]=L*X[0]+w,o[1]=S*X[1]+c,o[2]=U*X[2]+l,V(a,t,o[0],o[1],o[2],n[2]),o[0]=L*Y[0]+w,o[1]=S*Y[1]+c,o[2]=U*Y[2]+l,V(a,t,o[0],o[1],o[2],n[3]);let T=d(g,X,Y,P)*6,q=d(M,X,Y,P)*6,C=d(M,g,Y,P)*6,E=d(M,g,X,P)*6;n[0][0]*=T,n[0][1]*=T,n[0][2]*=T,n[1][0]*=q,n[1][1]*=q,n[1][2]*=q,n[2][0]*=C,n[2][1]*=C,n[2][2]*=C,n[3][0]*=E,n[3][1]*=E,n[3][2]*=E,e[0]=n[0][0]+n[1][0]+n[2][0]+n[3][0],e[1]=n[0][1]+n[1][1]+n[2][1]+n[3][1],e[2]=n[0][2]+n[1][2]+n[2][2]+n[3][2]}}var v=class{static expand(t,r){let m=Math.cbrt(t.length/4),i=new Float32Array(3),e=new t.constructor(r**3*4),y=t instanceof Uint8Array?255:1,h=r**2,A=1/(r-1);for(let w=0;w<r;++w)for(let c=0;c<r;++c)for(let l=0;l<r;++l){let x=l*A,u=c*A,b=w*A,s=Math.round(l+c*r+w*h)*4;k(t,m,x,u,b,i),e[s+0]=i[0],e[s+1]=i[1],e[s+2]=i[2],e[s+3]=y}return e}};self.addEventListener("message",a=>{let t=a.data,r=t.data;switch(t.operation){case O.SCALE_UP:r=v.expand(r,t.size);break}postMessage(r,[r.buffer]),close()});})();\n'],{type:"text/javascript"})),a=new Worker(o);a.addEventListener("error",(e=>r(e.error))),a.addEventListener("message",(i=>{const s=new e(i.data,t);this.colorSpace=s.colorSpace,s.type=this.type,s.name=this.name,URL.revokeObjectURL(o),n(s)}));const l=i?[s.data.buffer]:[];a.postMessage({operation:qy,data:s.data,size:t},l)})),n}applyLUT(e){const t=this.image,s=e.image,n=Math.min(t.width,t.height,t.depth);if(n!==Math.min(s.width,s.height,s.depth))console.error("Size mismatch");else if(e.type!==i.FloatType||this.type!==i.FloatType)console.error("Both LUTs must be FloatType textures");else if(e.format!==i.RGBAFormat||this.format!==i.RGBAFormat)console.error("Both LUTs must be RGBA textures");else{const e=t.data,i=s.data,r=n,o=r**2,a=r-1;for(let t=0,s=r**3;t<s;++t){const s=4*t,n=e[s+0]*a,l=e[s+1]*a,h=e[s+2]*a,c=4*Math.round(n+l*r+h*o);e[s+0]=i[c+0],e[s+1]=i[c+1],e[s+2]=i[c+2]}this.needsUpdate=!0}return this}convertToUint8(){if(this.type===i.FloatType){const e=this.image.data,t=new Uint8Array(e.length);for(let i=0,s=e.length;i<s;++i)t[i]=255*e[i]+.5;this.image.data=t,this.type=i.UnsignedByteType,this.needsUpdate=!0}return this}convertToFloat(){if(this.type===i.UnsignedByteType){const e=this.image.data,t=new Float32Array(e.length);for(let i=0,s=e.length;i<s;++i)t[i]=e[i]/255;this.image.data=t,this.type=i.FloatType,this.needsUpdate=!0}return this}convertToRGBA(){return console.warn("LookupTexture","convertToRGBA() is deprecated, LUTs are now RGBA by default"),this}convertLinearToSRGB(){const e=this.image.data;if(this.type===i.FloatType){for(let t=0,i=e.length;t<i;t+=4)Zy.fromArray(e,t).convertLinearToSRGB().toArray(e,t);this.colorSpace=i.SRGBColorSpace,this.needsUpdate=!0}else console.error("Color space conversion requires FloatType data");return this}convertSRGBToLinear(){const e=this.image.data;if(this.type===i.FloatType){for(let t=0,i=e.length;t<i;t+=4)Zy.fromArray(e,t).convertSRGBToLinear().toArray(e,t);this.colorSpace=i.LinearSRGBColorSpace,this.needsUpdate=!0}else console.error("Color space conversion requires FloatType data");return this}toDataTexture(){const e=this.image.width,t=this.image.height*this.image.depth,s=new i.DataTexture(this.image.data,e,t);return s.name=this.name,s.type=this.type,s.format=this.format,s.minFilter=i.LinearFilter,s.magFilter=i.LinearFilter,s.wrapS=this.wrapS,s.wrapT=this.wrapT,s.generateMipmaps=!1,s.needsUpdate=!0,this.colorSpace=s.colorSpace,s}static from(t){const i=t.image,{width:s,height:n}=i,r=Math.min(s,n);let o;if(i instanceof Image){const e=Wy.from(i).data;if(s>n){o=new Uint8Array(e.length);for(let t=0;t<r;++t)for(let i=0;i<r;++i)for(let s=0;s<r;++s){const n=4*(s+t*r+i*r*r),a=4*(s+i*r+t*r*r);o[a+0]=e[n+0],o[a+1]=e[n+1],o[a+2]=e[n+2],o[a+3]=e[n+3]}}else o=new Uint8Array(e.buffer)}else o=i.data.slice();const a=new e(o,r);return a.type=t.type,a.name=t.name,t.colorSpace=a.colorSpace,a}static createNeutral(t){const i=new Float32Array(t**3*4),s=t**2,n=1/(t-1);for(let e=0;e<t;++e)for(let r=0;r<t;++r)for(let o=0;o<t;++o){const a=4*(e+r*t+o*s);i[a+0]=e*n,i[a+1]=r*n,i[a+2]=o*n,i[a+3]=1}const r=new e(i,t);return r.name="neutral",r}},_y=2,Ky=0,Jy=0,$y=1,ew=2,tw=3,iw=0,sw=1,nw=class extends i.ShaderMaterial{constructor(e=new i.Vector2,t=_y){super({name:"EdgeDetectionMaterial",defines:{THREE_REVISION:i.REVISION.replace(/\D+/g,""),LOCAL_CONTRAST_ADAPTATION_FACTOR:"2.0",EDGE_THRESHOLD:"0.1",DEPTH_THRESHOLD:"0.01",PREDICATION_MODE:"0",PREDICATION_THRESHOLD:"0.01",PREDICATION_SCALE:"2.0",PREDICATION_STRENGTH:"1.0",DEPTH_PACKING:"0"},uniforms:{inputBuffer:new i.Uniform(null),depthBuffer:new i.Uniform(null),predicationBuffer:new i.Uniform(null),texelSize:new i.Uniform(e)},blending:i.NoBlending,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;\n#if EDGE_DETECTION_MODE != 0\nvarying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;\n#endif\n#if EDGE_DETECTION_MODE == 1\n#include <common>\n#endif\n#if EDGE_DETECTION_MODE == 0 || PREDICATION_MODE == 1\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\nfloat readDepth(const in vec2 uv){\n#if DEPTH_PACKING == 3201\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\n#else\nreturn texture2D(depthBuffer,uv).r;\n#endif\n}vec3 gatherNeighbors(){float p=readDepth(vUv);float pLeft=readDepth(vUv0);float pTop=readDepth(vUv1);return vec3(p,pLeft,pTop);}\n#elif PREDICATION_MODE == 2\nuniform sampler2D predicationBuffer;vec3 gatherNeighbors(){float p=texture2D(predicationBuffer,vUv).r;float pLeft=texture2D(predicationBuffer,vUv0).r;float pTop=texture2D(predicationBuffer,vUv1).r;return vec3(p,pLeft,pTop);}\n#endif\n#if PREDICATION_MODE != 0\nvec2 calculatePredicatedThreshold(){vec3 neighbours=gatherNeighbors();vec2 delta=abs(neighbours.xx-neighbours.yz);vec2 edges=step(PREDICATION_THRESHOLD,delta);return PREDICATION_SCALE*EDGE_THRESHOLD*(1.0-PREDICATION_STRENGTH*edges);}\n#endif\n#if EDGE_DETECTION_MODE != 0\nuniform sampler2D inputBuffer;\n#endif\nvoid main(){\n#if EDGE_DETECTION_MODE == 0\nconst vec2 threshold=vec2(DEPTH_THRESHOLD);\n#elif PREDICATION_MODE != 0\nvec2 threshold=calculatePredicatedThreshold();\n#else\nconst vec2 threshold=vec2(EDGE_THRESHOLD);\n#endif\n#if EDGE_DETECTION_MODE == 0\nvec3 neighbors=gatherNeighbors();vec2 delta=abs(neighbors.xx-vec2(neighbors.y,neighbors.z));vec2 edges=step(threshold,delta);if(dot(edges,vec2(1.0))==0.0){discard;}gl_FragColor=vec4(edges,0.0,1.0);\n#elif EDGE_DETECTION_MODE == 1\nfloat l=luminance(texture2D(inputBuffer,vUv).rgb);float lLeft=luminance(texture2D(inputBuffer,vUv0).rgb);float lTop=luminance(texture2D(inputBuffer,vUv1).rgb);vec4 delta;delta.xy=abs(l-vec2(lLeft,lTop));vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}float lRight=luminance(texture2D(inputBuffer,vUv2).rgb);float lBottom=luminance(texture2D(inputBuffer,vUv3).rgb);delta.zw=abs(l-vec2(lRight,lBottom));vec2 maxDelta=max(delta.xy,delta.zw);float lLeftLeft=luminance(texture2D(inputBuffer,vUv4).rgb);float lTopTop=luminance(texture2D(inputBuffer,vUv5).rgb);delta.zw=abs(vec2(lLeft,lTop)-vec2(lLeftLeft,lTopTop));maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges.xy*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);\n#elif EDGE_DETECTION_MODE == 2\nvec4 delta;vec3 c=texture2D(inputBuffer,vUv).rgb;vec3 cLeft=texture2D(inputBuffer,vUv0).rgb;vec3 t=abs(c-cLeft);delta.x=max(max(t.r,t.g),t.b);vec3 cTop=texture2D(inputBuffer,vUv1).rgb;t=abs(c-cTop);delta.y=max(max(t.r,t.g),t.b);vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}vec3 cRight=texture2D(inputBuffer,vUv2).rgb;t=abs(c-cRight);delta.z=max(max(t.r,t.g),t.b);vec3 cBottom=texture2D(inputBuffer,vUv3).rgb;t=abs(c-cBottom);delta.w=max(max(t.r,t.g),t.b);vec2 maxDelta=max(delta.xy,delta.zw);vec3 cLeftLeft=texture2D(inputBuffer,vUv4).rgb;t=abs(c-cLeftLeft);delta.z=max(max(t.r,t.g),t.b);vec3 cTopTop=texture2D(inputBuffer,vUv5).rgb;t=abs(c-cTopTop);delta.w=max(max(t.r,t.g),t.b);maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);\n#endif\n}",vertexShader:"uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;\n#if EDGE_DETECTION_MODE != 0\nvarying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;\n#endif\nvoid main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,0.0);vUv1=vUv+texelSize*vec2(0.0,-1.0);\n#if EDGE_DETECTION_MODE != 0\nvUv2=vUv+texelSize*vec2(1.0,0.0);vUv3=vUv+texelSize*vec2(0.0,1.0);vUv4=vUv+texelSize*vec2(-2.0,0.0);vUv5=vUv+texelSize*vec2(0.0,-2.0);\n#endif\ngl_Position=vec4(position.xy,1.0,1.0);}"}),this.edgeDetectionMode=t}set depthBuffer(e){this.uniforms.depthBuffer.value=e}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=i.BasicDepthPacking){this.depthBuffer=e,this.depthPacking=t}get edgeDetectionMode(){return Number(this.defines.EDGE_DETECTION_MODE)}set edgeDetectionMode(e){this.defines.EDGE_DETECTION_MODE=e.toFixed(0),this.needsUpdate=!0}getEdgeDetectionMode(){return this.edgeDetectionMode}setEdgeDetectionMode(e){this.edgeDetectionMode=e}get localContrastAdaptationFactor(){return Number(this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR)}set localContrastAdaptationFactor(e){this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR=e.toFixed("6"),this.needsUpdate=!0}getLocalContrastAdaptationFactor(){return this.localContrastAdaptationFactor}setLocalContrastAdaptationFactor(e){this.localContrastAdaptationFactor=e}get edgeDetectionThreshold(){return Number(this.defines.EDGE_THRESHOLD)}set edgeDetectionThreshold(e){this.defines.EDGE_THRESHOLD=e.toFixed("6"),this.defines.DEPTH_THRESHOLD=(.1*e).toFixed("6"),this.needsUpdate=!0}getEdgeDetectionThreshold(){return this.edgeDetectionThreshold}setEdgeDetectionThreshold(e){this.edgeDetectionThreshold=e}get predicationMode(){return Number(this.defines.PREDICATION_MODE)}set predicationMode(e){this.defines.PREDICATION_MODE=e.toFixed(0),this.needsUpdate=!0}getPredicationMode(){return this.predicationMode}setPredicationMode(e){this.predicationMode=e}set predicationBuffer(e){this.uniforms.predicationBuffer.value=e}setPredicationBuffer(e){this.uniforms.predicationBuffer.value=e}get predicationThreshold(){return Number(this.defines.PREDICATION_THRESHOLD)}set predicationThreshold(e){this.defines.PREDICATION_THRESHOLD=e.toFixed("6"),this.needsUpdate=!0}getPredicationThreshold(){return this.predicationThreshold}setPredicationThreshold(e){this.predicationThreshold=e}get predicationScale(){return Number(this.defines.PREDICATION_SCALE)}set predicationScale(e){this.defines.PREDICATION_SCALE=e.toFixed("6"),this.needsUpdate=!0}getPredicationScale(){return this.predicationScale}setPredicationScale(e){this.predicationScale=e}get predicationStrength(){return Number(this.defines.PREDICATION_STRENGTH)}set predicationStrength(e){this.defines.PREDICATION_STRENGTH=e.toFixed("6"),this.needsUpdate=!0}getPredicationStrength(){return this.predicationStrength}setPredicationStrength(e){this.predicationStrength=e}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}},rw=class extends i.ShaderMaterial{constructor(e=new i.Vector2,t=new i.Vector2){super({name:"SMAAWeightsMaterial",defines:{MAX_SEARCH_STEPS_INT:"16",MAX_SEARCH_STEPS_FLOAT:"16.0",MAX_SEARCH_STEPS_DIAG_INT:"8",MAX_SEARCH_STEPS_DIAG_FLOAT:"8.0",CORNER_ROUNDING:"25",CORNER_ROUNDING_NORM:"0.25",AREATEX_MAX_DISTANCE:"16.0",AREATEX_MAX_DISTANCE_DIAG:"20.0",AREATEX_PIXEL_SIZE:"(1.0 / vec2(160.0, 560.0))",AREATEX_SUBTEX_SIZE:"(1.0 / 7.0)",SEARCHTEX_SIZE:"vec2(66.0, 33.0)",SEARCHTEX_PACKED_SIZE:"vec2(64.0, 16.0)"},uniforms:{inputBuffer:new i.Uniform(null),searchTexture:new i.Uniform(null),areaTexture:new i.Uniform(null),resolution:new i.Uniform(t),texelSize:new i.Uniform(e)},blending:i.NoBlending,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#define sampleLevelZeroOffset(t, coord, offset) texture2D(t, coord + offset * texelSize)\n#if __VERSION__ < 300\n#define round(v) floor(v + 0.5)\n#endif\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nuniform lowp sampler2D areaTexture;uniform lowp sampler2D searchTexture;uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}vec2 decodeDiagBilinearAccess(in vec2 e){e.r=e.r*abs(5.0*e.r-5.0*0.75);return round(e);}vec4 decodeDiagBilinearAccess(in vec4 e){e.rb=e.rb*abs(5.0*e.rb-5.0*0.75);return round(e);}vec2 searchDiag1(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 searchDiag2(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);coord.x+=0.25*texelSize.x;vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;e=decodeDiagBilinearAccess(e);coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 areaDiag(const in vec2 dist,const in vec2 e,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE_DIAG,AREATEX_MAX_DISTANCE_DIAG)*e+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.x+=0.5;texCoord.y+=AREATEX_SUBTEX_SIZE*offset;return texture2D(areaTexture,texCoord).rg;}vec2 calculateDiagWeights(const in vec2 texCoord,const in vec2 e,const in vec4 subsampleIndices){vec2 weights=vec2(0.0);vec4 d;vec2 end;if(e.r>0.0){d.xz=searchDiag1(texCoord,vec2(-1.0,1.0),end);d.x+=float(end.y>0.9);}else{d.xz=vec2(0.0);}d.yw=searchDiag1(texCoord,vec2(1.0,-1.0),end);if(d.x+d.y>2.0){vec4 coords=vec4(-d.x+0.25,d.x,d.y,-d.y-0.25)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.xy=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).rg;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).rg;c.yxwz=decodeDiagBilinearAccess(c.xyzw);vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.z);}d.xz=searchDiag2(texCoord,vec2(-1.0,-1.0),end);if(sampleLevelZeroOffset(inputBuffer,texCoord,vec2(1,0)).r>0.0){d.yw=searchDiag2(texCoord,vec2(1.0),end);d.y+=float(end.y>0.9);}else{d.yw=vec2(0.0);}if(d.x+d.y>2.0){vec4 coords=vec4(-d.x,-d.x,d.y,d.y)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.x=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).g;c.y=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(0,-1)).r;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).gr;vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.w).gr;}return weights;}float searchLength(const in vec2 e,const in float offset){vec2 scale=SEARCHTEX_SIZE*vec2(0.5,-1.0);vec2 bias=SEARCHTEX_SIZE*vec2(offset,1.0);scale+=vec2(-1.0,1.0);bias+=vec2(0.5,-0.5);scale*=1.0/SEARCHTEX_PACKED_SIZE;bias*=1.0/SEARCHTEX_PACKED_SIZE;return texture2D(searchTexture,scale*e+bias).r;}float searchXLeft(in vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x>end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(-2.0,0.0)*texelSize+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.0)+3.25;return texelSize.x*offset+texCoord.x;}float searchXRight(vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x<end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(2.0,0.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.5)+3.25;return-texelSize.x*offset+texCoord.x;}float searchYUp(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.y>end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=-vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.0)+3.25;return texelSize.y*offset+texCoord.y;}float searchYDown(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;i++){if(!(texCoord.y<end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.5)+3.25;return-texelSize.y*offset+texCoord.y;}vec2 area(const in vec2 dist,const in float e1,const in float e2,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE)*round(4.0*vec2(e1,e2))+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.y=AREATEX_SUBTEX_SIZE*offset+texCoord.y;return texture2D(areaTexture,texCoord).rg;}void detectHorizontalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){\n#if !defined(DISABLE_CORNER_DETECTION)\nvec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,1)).r;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).r;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,-2)).r;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,-2)).r;weights*=clamp(factor,0.0,1.0);\n#endif\n}void detectVerticalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){\n#if !defined(DISABLE_CORNER_DETECTION)\nvec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(1,0)).g;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).g;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(-2,0)).g;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(-2,1)).g;weights*=clamp(factor,0.0,1.0);\n#endif\n}void main(){vec4 weights=vec4(0.0);vec4 subsampleIndices=vec4(0.0);vec2 e=texture2D(inputBuffer,vUv).rg;if(e.g>0.0){\n#if !defined(DISABLE_DIAG_DETECTION)\nweights.rg=calculateDiagWeights(vUv,e,subsampleIndices);if(weights.r==-weights.g){\n#endif\nvec2 d;vec3 coords;coords.x=searchXLeft(vOffset[0].xy,vOffset[2].x);coords.y=vOffset[1].y;d.x=coords.x;float e1=texture2D(inputBuffer,coords.xy).r;coords.z=searchXRight(vOffset[0].zw,vOffset[2].y);d.y=coords.z;d=round(resolution.xx*d+-vPixCoord.xx);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.zy,vec2(1,0)).r;weights.rg=area(sqrtD,e1,e2,subsampleIndices.y);coords.y=vUv.y;detectHorizontalCornerPattern(weights.rg,coords.xyzy,d);\n#if !defined(DISABLE_DIAG_DETECTION)\n}else{e.r=0.0;}\n#endif\n}if(e.r>0.0){vec2 d;vec3 coords;coords.y=searchYUp(vOffset[1].xy,vOffset[2].z);coords.x=vOffset[0].x;d.x=coords.y;float e1=texture2D(inputBuffer,coords.xy).g;coords.z=searchYDown(vOffset[1].zw,vOffset[2].w);d.y=coords.z;d=round(resolution.yy*d-vPixCoord.yy);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.xz,vec2(0,1)).g;weights.ba=area(sqrtD,e1,e2,subsampleIndices.x);coords.x=vUv.x;detectVerticalCornerPattern(weights.ba,coords.xyxz,d);}gl_FragColor=weights;}",vertexShader:"uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void main(){vUv=position.xy*0.5+0.5;vPixCoord=vUv*resolution;vOffset[0]=vUv.xyxy+texelSize.xyxy*vec4(-0.25,-0.125,1.25,-0.125);vOffset[1]=vUv.xyxy+texelSize.xyxy*vec4(-0.125,-0.25,-0.125,1.25);vOffset[2]=vec4(vOffset[0].xz,vOffset[1].yw)+vec4(-2.0,2.0,-2.0,2.0)*texelSize.xxyy*MAX_SEARCH_STEPS_FLOAT;gl_Position=vec4(position.xy,1.0,1.0);}"})}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get searchTexture(){return this.uniforms.searchTexture.value}set searchTexture(e){this.uniforms.searchTexture.value=e}get areaTexture(){return this.uniforms.areaTexture.value}set areaTexture(e){this.uniforms.areaTexture.value=e}setLookupTextures(e,t){this.searchTexture=e,this.areaTexture=t}get orthogonalSearchSteps(){return Number(this.defines.MAX_SEARCH_STEPS_INT)}set orthogonalSearchSteps(e){const t=Math.min(Math.max(e,0),112);this.defines.MAX_SEARCH_STEPS_INT=t.toFixed("0"),this.defines.MAX_SEARCH_STEPS_FLOAT=t.toFixed("1"),this.needsUpdate=!0}setOrthogonalSearchSteps(e){this.orthogonalSearchSteps=e}get diagonalSearchSteps(){return Number(this.defines.MAX_SEARCH_STEPS_DIAG_INT)}set diagonalSearchSteps(e){const t=Math.min(Math.max(e,0),20);this.defines.MAX_SEARCH_STEPS_DIAG_INT=t.toFixed("0"),this.defines.MAX_SEARCH_STEPS_DIAG_FLOAT=t.toFixed("1"),this.needsUpdate=!0}setDiagonalSearchSteps(e){this.diagonalSearchSteps=e}get diagonalDetection(){return void 0===this.defines.DISABLE_DIAG_DETECTION}set diagonalDetection(e){e?delete this.defines.DISABLE_DIAG_DETECTION:this.defines.DISABLE_DIAG_DETECTION="1",this.needsUpdate=!0}isDiagonalDetectionEnabled(){return this.diagonalDetection}setDiagonalDetectionEnabled(e){this.diagonalDetection=e}get cornerRounding(){return Number(this.defines.CORNER_ROUNDING)}set cornerRounding(e){const t=Math.min(Math.max(e,0),100);this.defines.CORNER_ROUNDING=t.toFixed("4"),this.defines.CORNER_ROUNDING_NORM=(t/100).toFixed("4"),this.needsUpdate=!0}setCornerRounding(e){this.cornerRounding=e}get cornerDetection(){return void 0===this.defines.DISABLE_CORNER_DETECTION}set cornerDetection(e){e?delete this.defines.DISABLE_CORNER_DETECTION:this.defines.DISABLE_CORNER_DETECTION="1",this.needsUpdate=!0}isCornerRoundingEnabled(){return this.cornerDetection}setCornerRoundingEnabled(e){this.cornerDetection=e}setSize(e,t){const i=this.uniforms;i.texelSize.value.set(1/e,1/t),i.resolution.value.set(e,t)}},ow="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAQCAYAAACm53kpAAAAeElEQVRYR+2XSwqAMAxEJ168ePEqwRSKhIIiuHjJqiU0gWE+1CQdApcVAMUAuARaMGCX1MIL/Ow13++9lW2s3mW9MWvsnWc/2fvGygwPAN4E8QzAA4CXAB6AHjG4JTHYI1ey3pcx6FHnEfhLDOIBKAmUBK6/ANUDTlROXAHd9EC1AAAAAElFTkSuQmCC",aw="data:image/png;base64,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",lw=class extends Ny{constructor({blendFunction:e=ky,preset:t=$y,edgeDetectionMode:s=_y,predicationMode:n=Ky}={}){let r,o;super("SMAAEffect","uniform sampler2D weightMap;varying vec2 vOffset0;varying vec2 vOffset1;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 a;a.x=texture2D(weightMap,vOffset0).a;a.y=texture2D(weightMap,vOffset1).g;a.wz=texture2D(weightMap,uv).rb;vec4 color=inputColor;if(dot(a,vec4(1.0))>=1e-5){bool h=max(a.x,a.z)>max(a.y,a.w);vec4 blendingOffset=vec4(0.0,a.y,0.0,a.w);vec2 blendingWeight=a.yw;movec(bvec4(h),blendingOffset,vec4(a.x,0.0,a.z,0.0));movec(bvec2(h),blendingWeight,a.xz);blendingWeight/=dot(blendingWeight,vec2(1.0));vec4 blendingCoord=blendingOffset*vec4(texelSize,-texelSize)+uv.xyxy;color=blendingWeight.x*texture2D(inputBuffer,blendingCoord.xy);color+=blendingWeight.y*texture2D(inputBuffer,blendingCoord.zw);}outputColor=color;}",{vertexShader:"varying vec2 vOffset0;varying vec2 vOffset1;void mainSupport(const in vec2 uv){vOffset0=uv+texelSize*vec2(1.0,0.0);vOffset1=uv+texelSize*vec2(0.0,1.0);}",blendFunction:e,attributes:by|Ay,uniforms:new Map([["weightMap",new i.Uniform(null)]])}),arguments.length>1&&(r=arguments[0],o=arguments[1],arguments.length>2&&(t=arguments[2]),arguments.length>3&&(s=arguments[3])),this.renderTargetEdges=new i.WebGLRenderTarget(1,1,{depthBuffer:!1}),this.renderTargetEdges.texture.name="SMAA.Edges",this.renderTargetWeights=this.renderTargetEdges.clone(),this.renderTargetWeights.texture.name="SMAA.Weights",this.uniforms.get("weightMap").value=this.renderTargetWeights.texture,this.clearPass=new py(!0,!1,!1),this.clearPass.overrideClearColor=new i.Color(0),this.clearPass.overrideClearAlpha=1,this.edgeDetectionPass=new jy(new nw),this.edgeDetectionMaterial.edgeDetectionMode=s,this.edgeDetectionMaterial.predicationMode=n,this.weightsPass=new jy(new rw);const a=new i.LoadingManager;a.onLoad=()=>{const e=new i.Texture(r);e.name="SMAA.Search",e.magFilter=i.NearestFilter,e.minFilter=i.NearestFilter,e.generateMipmaps=!1,e.needsUpdate=!0,e.flipY=!0,this.weightsMaterial.searchTexture=e;const t=new i.Texture(o);t.name="SMAA.Area",t.magFilter=i.LinearFilter,t.minFilter=i.LinearFilter,t.generateMipmaps=!1,t.needsUpdate=!0,t.flipY=!1,this.weightsMaterial.areaTexture=t,this.dispatchEvent({type:"load"})},a.itemStart("search"),a.itemStart("area"),void 0!==r&&void 0!==o?(a.itemEnd("search"),a.itemEnd("area")):"undefined"!=typeof Image&&(r=new Image,o=new Image,r.addEventListener("load",(()=>a.itemEnd("search"))),o.addEventListener("load",(()=>a.itemEnd("area"))),r.src=ow,o.src=aw),this.applyPreset(t)}get edgesTexture(){return this.renderTargetEdges.texture}getEdgesTexture(){return this.edgesTexture}get weightsTexture(){return this.renderTargetWeights.texture}getWeightsTexture(){return this.weightsTexture}get edgeDetectionMaterial(){return this.edgeDetectionPass.fullscreenMaterial}get colorEdgesMaterial(){return this.edgeDetectionMaterial}getEdgeDetectionMaterial(){return this.edgeDetectionMaterial}get weightsMaterial(){return this.weightsPass.fullscreenMaterial}getWeightsMaterial(){return this.weightsMaterial}setEdgeDetectionThreshold(e){this.edgeDetectionMaterial.edgeDetectionThreshold=e}setOrthogonalSearchSteps(e){this.weightsMaterial.orthogonalSearchSteps=e}applyPreset(e){const t=this.edgeDetectionMaterial,i=this.weightsMaterial;switch(e){case Jy:t.edgeDetectionThreshold=.15,i.orthogonalSearchSteps=4,i.diagonalDetection=!1,i.cornerDetection=!1;break;case $y:t.edgeDetectionThreshold=.1,i.orthogonalSearchSteps=8,i.diagonalDetection=!1,i.cornerDetection=!1;break;case ew:t.edgeDetectionThreshold=.1,i.orthogonalSearchSteps=16,i.diagonalSearchSteps=8,i.cornerRounding=25,i.diagonalDetection=!0,i.cornerDetection=!0;break;case tw:t.edgeDetectionThreshold=.05,i.orthogonalSearchSteps=32,i.diagonalSearchSteps=16,i.cornerRounding=25,i.diagonalDetection=!0,i.cornerDetection=!0}}setDepthTexture(e,t=i.BasicDepthPacking){this.edgeDetectionMaterial.depthBuffer=e,this.edgeDetectionMaterial.depthPacking=t}update(e,t,i){this.clearPass.render(e,this.renderTargetEdges),this.edgeDetectionPass.render(e,t,this.renderTargetEdges),this.weightsPass.render(e,this.renderTargetEdges,this.renderTargetWeights)}setSize(e,t){this.edgeDetectionMaterial.setSize(e,t),this.weightsMaterial.setSize(e,t),this.renderTargetEdges.setSize(e,t),this.renderTargetWeights.setSize(e,t)}dispose(){const{searchTexture:e,areaTexture:t}=this.weightsMaterial;null!==e&&null!==t&&(e.dispose(),t.dispose()),super.dispose()}static get searchImageDataURL(){return ow}static get areaImageDataURL(){return aw}},hw=class extends Ny{constructor({blendFunction:e,eskil:t=!1,technique:s=(t?sw:iw),offset:n=.5,darkness:r=.5}={}){super("VignetteEffect","uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;\n#if VIGNETTE_TECHNIQUE == 0\nfloat d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));\n#else\nvec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));\n#endif\noutputColor=vec4(color,inputColor.a);}",{blendFunction:e,defines:new Map([["VIGNETTE_TECHNIQUE",s.toFixed(0)]]),uniforms:new Map([["offset",new i.Uniform(n)],["darkness",new i.Uniform(r)]])})}get technique(){return Number(this.defines.get("VIGNETTE_TECHNIQUE"))}set technique(e){this.technique!==e&&(this.defines.set("VIGNETTE_TECHNIQUE",e.toFixed(0)),this.setChanged())}get eskil(){return this.technique===sw}set eskil(e){this.technique=e?sw:iw}getTechnique(){return this.technique}setTechnique(e){this.technique=e}get offset(){return this.uniforms.get("offset").value}set offset(e){this.uniforms.get("offset").value=e}getOffset(){return this.offset}setOffset(e){this.offset=e}get darkness(){return this.uniforms.get("darkness").value}set darkness(e){this.uniforms.get("darkness").value=e}getDarkness(){return this.darkness}setDarkness(e){this.darkness=e}},cw=class extends i.Loader{load(e,t=()=>{},s=()=>{},n=null){const r=this.manager,o=new i.LoadingManager,a=new i.FileLoader(o);return a.setPath(this.path),a.setResponseType("text"),new Promise(((i,l)=>{o.onError=e=>{r.itemError(e),null!==n?(n(`Failed to load ${e}`),i()):l(`Failed to load ${e}`)},r.itemStart(e),a.load(e,(s=>{try{const n=this.parse(s);r.itemEnd(e),t(n),i(n)}catch(t){console.error(t),o.onError(e)}}),s)}))}parse(e){const t=/^([\d.e+-]+) +([\d.e+-]+) +([\d.e+-]+) *$/gm;let i=/^[\d ]+$/m.exec(e);if(null===i)throw new Error("Missing grid information");const s=i[0].trim().split(/\s+/g).map((e=>Number(e))),n=s[1]-s[0],r=s.length,o=r**2;for(let e=1,t=s.length;e<t;++e)if(n!==s[e]-s[e-1])throw new Error("Inconsistent grid size");const a=new Float32Array(r**3*4);let l=0,h=0;for(;null!==(i=t.exec(e));){const e=Number(i[1]),t=Number(i[2]),s=Number(i[3]);l=Math.max(l,e,t,s);const n=4*(h%r*o+Math.floor(h/r)%r*r+Math.floor(h/o)%r);a[n+0]=e,a[n+1]=t,a[n+2]=s,a[n+3]=1,++h}const c=Math.ceil(Math.log2(l)),d=Math.pow(2,c);for(let e=0,t=a.length;e<t;e+=4)a[e+0]/=d,a[e+1]/=d,a[e+2]/=d;return new Yy(a,r)}},dw=class extends i.Loader{load(e,t=()=>{},s=()=>{},n=null){const r=this.manager,o=new i.LoadingManager,a=new i.FileLoader(o);return a.setPath(this.path),a.setResponseType("text"),new Promise(((i,l)=>{o.onError=e=>{r.itemError(e),null!==n?(n(`Failed to load ${e}`),i()):l(`Failed to load ${e}`)},r.itemStart(e),a.load(e,(s=>{try{const n=this.parse(s);r.itemEnd(e),t(n),i(n)}catch(t){console.error(t),o.onError(e)}}),s)}))}parse(e){const t=/^([\d.e+-]+) +([\d.e+-]+) +([\d.e+-]+) *$/gm;let s=/TITLE +"([^"]*)"/.exec(e);const n=null!==s?s[1]:null;if(s=/LUT_3D_SIZE +(\d+)/.exec(e),null===s)throw new Error("Missing LUT_3D_SIZE information");const r=Number(s[1]),o=new Float32Array(r**3*4),a=new i.Vector3(0,0,0),l=new i.Vector3(1,1,1);if(s=/DOMAIN_MIN +([\d.]+) +([\d.]+) +([\d.]+)/.exec(e),null!==s&&a.set(Number(s[1]),Number(s[2]),Number(s[3])),s=/DOMAIN_MAX +([\d.]+) +([\d.]+) +([\d.]+)/.exec(e),null!==s&&l.set(Number(s[1]),Number(s[2]),Number(s[3])),a.x>l.x||a.y>l.y||a.z>l.z)throw a.set(0,0,0),l.set(1,1,1),new Error("Invalid input domain");let h=0;for(;null!==(s=t.exec(e));)o[h++]=Number(s[1]),o[h++]=Number(s[2]),o[h++]=Number(s[3]),o[h++]=1;const c=new Yy(o,r);return c.domainMin.copy(a),c.domainMax.copy(l),null!==n&&(c.name=n),c}},uw=class extends i.ShaderMaterial{constructor(e,t,s,n,r=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:i.REVISION.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new i.Uniform(null),depthBuffer:new i.Uniform(null),resolution:new i.Uniform(new i.Vector2),texelSize:new i.Uniform(new i.Vector2),cameraNear:new i.Uniform(.3),cameraFar:new i.Uniform(1e3),aspect:new i.Uniform(1),time:new i.Uniform(0)},blending:i.NoBlending,toneMapped:!1,depthWrite:!1,depthTest:!1,dithering:r}),e&&this.setShaderParts(e),t&&this.setDefines(t),s&&this.setUniforms(s),this.copyCameraSettings(n)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(e){this.uniforms.depthBuffer.value=e}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=i.BasicDepthPacking){this.depthBuffer=e,this.depthPacking=t}setShaderData(e){this.setShaderParts(e.shaderParts),this.setDefines(e.defines),this.setUniforms(e.uniforms),this.setExtensions(e.extensions)}setShaderParts(e){return this.fragmentShader="#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#define packFloatToRGBA(v) packDepthToRGBA(v)\n#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\n#if DEPTH_PACKING == 3201\nuniform lowp sampler2D depthBuffer;\n#elif defined(GL_FRAGMENT_PRECISION_HIGH)\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\nuniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;\n#if THREE_REVISION < 143\n#define luminance(v) linearToRelativeLuminance(v)\n#endif\n#if THREE_REVISION >= 137\nvec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}\n#endif\nfloat readDepth(const in vec2 uv){\n#if DEPTH_PACKING == 3201\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\n#else\nreturn texture2D(depthBuffer,uv).r;\n#endif\n}float getViewZ(const in float depth){\n#ifdef PERSPECTIVE_CAMERA\nreturn perspectiveDepthToViewZ(depth,cameraNear,cameraFar);\n#else\nreturn orthographicDepthToViewZ(depth,cameraNear,cameraFar);\n#endif\n}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEADvoid main(){FRAGMENT_MAIN_UVvec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGEcolor0.a=clamp(color0.a,0.0,1.0);gl_FragColor=color0;\n#ifdef ENCODE_OUTPUT\n#include <colorspace_fragment>\n#endif\n#include <dithering_fragment>\n}".replace(vy.FRAGMENT_HEAD,e.get(vy.FRAGMENT_HEAD)||"").replace(vy.FRAGMENT_MAIN_UV,e.get(vy.FRAGMENT_MAIN_UV)||"").replace(vy.FRAGMENT_MAIN_IMAGE,e.get(vy.FRAGMENT_MAIN_IMAGE)||""),this.vertexShader="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEADvoid main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORTgl_Position=vec4(position.xy,1.0,1.0);}".replace(vy.VERTEX_HEAD,e.get(vy.VERTEX_HEAD)||"").replace(vy.VERTEX_MAIN_SUPPORT,e.get(vy.VERTEX_MAIN_SUPPORT)||""),this.fragmentShader=ly(this.fragmentShader),this.needsUpdate=!0,this}setDefines(e){for(const t of e.entries())this.defines[t[0]]=t[1];return this.needsUpdate=!0,this}setUniforms(e){for(const t of e.entries())this.uniforms[t[0]]=t[1];return this}setExtensions(e){this.extensions={};for(const t of e)this.extensions[t]=!0;return this}get encodeOutput(){return void 0!==this.defines.ENCODE_OUTPUT}set encodeOutput(e){this.encodeOutput!==e&&(e?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(e){return this.encodeOutput}setOutputEncodingEnabled(e){this.encodeOutput=e}get time(){return this.uniforms.time.value}set time(e){this.uniforms.time.value=e}setDeltaTime(e){this.uniforms.time.value+=e}adoptCameraSettings(e){this.copyCameraSettings(e)}copyCameraSettings(e){e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof i.PerspectiveCamera?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(e,t){const i=this.uniforms;i.resolution.value.set(e,t),i.texelSize.value.set(1/e,1/t),i.aspect.value=e/t}static get Section(){return vy}};function pw(e,t,i){for(const s of t){const t="$1"+e+s.charAt(0).toUpperCase()+s.slice(1),n=new RegExp("([^\\.])(\\b"+s+"\\b)","g");for(const e of i.entries())null!==e[1]&&i.set(e[0],e[1].replace(n,t))}}function fw(e,t,s){let n=t.getFragmentShader(),r=t.getVertexShader();const o=void 0!==n&&/mainImage/.test(n),a=void 0!==n&&/mainUv/.test(n);if(s.attributes|=t.getAttributes(),void 0===n)throw new Error(`Missing fragment shader (${t.name})`);if(a&&s.attributes&by)throw new Error(`Effects that transform UVs are incompatible with convolution effects (${t.name})`);if(!o&&!a)throw new Error(`Could not find mainImage or mainUv function (${t.name})`);{const l=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,h=s.shaderParts;let c=h.get(vy.FRAGMENT_HEAD)||"",d=h.get(vy.FRAGMENT_MAIN_UV)||"",u=h.get(vy.FRAGMENT_MAIN_IMAGE)||"",p=h.get(vy.VERTEX_HEAD)||"",f=h.get(vy.VERTEX_MAIN_SUPPORT)||"";const m=new Set,g=new Set;if(a&&(d+=`\t${e}MainUv(UV);\n`,s.uvTransformation=!0),null!==r&&/mainSupport/.test(r)){const t=/mainSupport *\([\w\s]*?uv\s*?\)/.test(r);f+=`\t${e}MainSupport(`,f+=t?"vUv);\n":");\n";for(const e of r.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g))for(const t of e[1].split(/\s*,\s*/))s.varyings.add(t),m.add(t),g.add(t);for(const e of r.matchAll(l))g.add(e[1])}for(const e of n.matchAll(l))g.add(e[1]);for(const e of t.defines.keys())g.add(e.replace(/\([\w\s,]*\)/g,""));for(const e of t.uniforms.keys())g.add(e);g.delete("while"),g.delete("for"),g.delete("if"),t.uniforms.forEach(((t,i)=>s.uniforms.set(e+i.charAt(0).toUpperCase()+i.slice(1),t))),t.defines.forEach(((t,i)=>s.defines.set(e+i.charAt(0).toUpperCase()+i.slice(1),t)));const A=new Map([["fragment",n],["vertex",r]]);pw(e,g,s.defines),pw(e,g,A),n=A.get("fragment"),r=A.get("vertex");const b=t.blendMode;if(s.blendModes.set(b.blendFunction,b),o){null!==t.inputColorSpace&&t.inputColorSpace!==s.colorSpace&&(u+=t.inputColorSpace===i.SRGBColorSpace?"color0 = LinearTosRGB(color0);\n\t":"color0 = sRGBToLinear(color0);\n\t"),t.outputColorSpace!==i.NoColorSpace?s.colorSpace=t.outputColorSpace:null!==t.inputColorSpace&&(s.colorSpace=t.inputColorSpace);const r=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;u+=`${e}MainImage(color0, UV, `,s.attributes&Ay&&r.test(n)&&(u+="depth, ",s.readDepth=!0),u+="color1);\n\t";const o=e+"BlendOpacity";s.uniforms.set(o,b.opacity),u+=`color0 = blend${b.blendFunction}(color0, color1, ${o});\n\n\t`,c+=`uniform float ${o};\n\n`}if(c+=n+"\n",null!==r&&(p+=r+"\n"),h.set(vy.FRAGMENT_HEAD,c),h.set(vy.FRAGMENT_MAIN_UV,d),h.set(vy.FRAGMENT_MAIN_IMAGE,u),h.set(vy.VERTEX_HEAD,p),h.set(vy.VERTEX_MAIN_SUPPORT,f),null!==t.extensions)for(const e of t.extensions)s.extensions.add(e)}}var mw=class extends ry{constructor(e,...t){super("EffectPass"),this.fullscreenMaterial=new uw(null,null,null,e),this.listener=e=>this.handleEvent(e),this.effects=[],this.setEffects(t),this.skipRendering=!1,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY,this.timeScale=1}set mainScene(e){for(const t of this.effects)t.mainScene=e}set mainCamera(e){this.fullscreenMaterial.copyCameraSettings(e);for(const t of this.effects)t.mainCamera=e}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(e){this.fullscreenMaterial.encodeOutput=e}get dithering(){return this.fullscreenMaterial.dithering}set dithering(e){const t=this.fullscreenMaterial;t.dithering=e,t.needsUpdate=!0}setEffects(e){for(const e of this.effects)e.removeEventListener("change",this.listener);this.effects=e.sort(((e,t)=>t.attributes-e.attributes));for(const e of this.effects)e.addEventListener("change",this.listener)}updateMaterial(){const e=new yy;let t=0;for(const i of this.effects)if(i.blendMode.blendFunction===Sy)e.attributes|=i.getAttributes()&Ay;else{if(e.attributes&i.getAttributes()&by)throw new Error(`Convolution effects cannot be merged (${i.name})`);fw("e"+t++,i,e)}let s=e.shaderParts.get(vy.FRAGMENT_HEAD),n=e.shaderParts.get(vy.FRAGMENT_MAIN_IMAGE),r=e.shaderParts.get(vy.FRAGMENT_MAIN_UV);const o=/\bblend\b/g;for(const t of e.blendModes.values())s+=t.getShaderCode().replace(o,`blend${t.blendFunction}`)+"\n";e.attributes&Ay?(e.readDepth&&(n="float depth = readDepth(UV);\n\n\t"+n),this.needsDepthTexture=null===this.getDepthTexture()):this.needsDepthTexture=!1,e.colorSpace===i.SRGBColorSpace&&(n+="color0 = sRGBToLinear(color0);\n\t"),e.uvTransformation?(r="vec2 transformedUv = vUv;\n"+r,e.defines.set("UV","transformedUv")):e.defines.set("UV","vUv"),e.shaderParts.set(vy.FRAGMENT_HEAD,s),e.shaderParts.set(vy.FRAGMENT_MAIN_IMAGE,n),e.shaderParts.set(vy.FRAGMENT_MAIN_UV,r);for(const[t,i]of e.shaderParts)null!==i&&e.shaderParts.set(t,i.trim().replace(/^#/,"\n#"));this.skipRendering=0===t,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(e)}recompile(){this.updateMaterial()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(e,t=i.BasicDepthPacking){this.fullscreenMaterial.depthBuffer=e,this.fullscreenMaterial.depthPacking=t;for(const i of this.effects)i.setDepthTexture(e,t)}render(e,t,i,s,n){for(const i of this.effects)i.update(e,t,s);if(!this.skipRendering||this.renderToScreen){const n=this.fullscreenMaterial;n.inputBuffer=t.texture,n.time+=s*this.timeScale,e.setRenderTarget(this.renderToScreen?null:i),e.render(this.scene,this.camera)}}setSize(e,t){this.fullscreenMaterial.setSize(e,t);for(const i of this.effects)i.setSize(e,t)}initialize(e,t,s){this.renderer=e;for(const i of this.effects)i.initialize(e,t,s);this.updateMaterial(),void 0!==s&&s!==i.UnsignedByteType&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(const e of this.effects)e.removeEventListener("change",this.listener),e.dispose()}handleEvent(e){if("change"===e.type)this.recompile()}};new i.OrthographicCamera(-1,1,1,-1,0,1);const gw=new i.BufferGeometry;gw.setAttribute("position",new i.Float32BufferAttribute([-1,3,0,-1,-1,0,3,-1,0],3)),gw.setAttribute("uv",new i.Float32BufferAttribute([0,2,0,0,2,0],2));const Aw=new i.BufferGeometry;Aw.setAttribute("position",new i.BufferAttribute(new Float32Array([-1,-1,3,-1,-1,3]),2)),Aw.setAttribute("uv",new i.BufferAttribute(new Float32Array([0,0,2,0,0,2]),2)),Aw.boundingSphere=new i.Sphere,Aw.computeBoundingSphere=function(){};const bw=new i.OrthographicCamera;class vw{constructor(e){this._mesh=new i.Mesh(Aw,e),this._mesh.frustumCulled=!1}render(e){e.render(this._mesh,bw)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}dispose(){this._mesh.material.dispose(),this._mesh.geometry.dispose()}}const yw={uniforms:{sceneDiffuse:{value:null},sceneDepth:{value:null},sceneNormal:{value:null},projMat:{value:new i.Matrix4},viewMat:{value:new i.Matrix4},projViewMat:{value:new i.Matrix4},projectionMatrixInv:{value:new i.Matrix4},viewMatrixInv:{value:new i.Matrix4},cameraPos:{value:new i.Vector3},resolution:{value:new i.Vector2},time:{value:0},samples:{value:[]},bluenoise:{value:null},distanceFalloff:{value:1},radius:{value:5},near:{value:.1},far:{value:1e3},logDepth:{value:!1},ortho:{value:!1},screenSpaceRadius:{value:!1},frame:{value:0}},depthWrite:!1,depthTest:!1,vertexShader:"\nvarying vec2 vUv;\nvoid main() {\n  vUv = uv;\n  gl_Position = vec4(position, 1);\n}",fragmentShader:"\n    #define SAMPLES 16\n    #define FSAMPLES 16.0\nuniform sampler2D sceneDiffuse;\nuniform highp sampler2D sceneNormal;\nuniform highp sampler2D sceneDepth;\nuniform mat4 projectionMatrixInv;\nuniform mat4 viewMatrixInv;\nuniform mat4 projMat;\nuniform mat4 viewMat;\nuniform mat4 projViewMat;\nuniform vec3 cameraPos;\nuniform vec2 resolution;\nuniform float time;\nuniform vec3[SAMPLES] samples;\nuniform float radius;\nuniform float distanceFalloff;\nuniform float near;\nuniform float far;\nuniform float frame;\nuniform bool logDepth;\nuniform bool ortho;\nuniform bool screenSpaceRadius;\nuniform sampler2D bluenoise;\n    varying vec2 vUv;\n    highp float linearize_depth(highp float d, highp float zNear,highp float zFar)\n    {\n        return (zFar * zNear) / (zFar - d * (zFar - zNear));\n    }\n    highp float linearize_depth_ortho(highp float d, highp float nearZ, highp float farZ) {\n      return nearZ + (farZ - nearZ) * d;\n    }\n    highp float linearize_depth_log(highp float d, highp float nearZ,highp float farZ) {\n      float depth = pow(2.0, d * log2(farZ + 1.0)) - 1.0;\n      float a = farZ / (farZ - nearZ);\n      float b = farZ * nearZ / (nearZ - farZ);\n      float linDepth = a + b / depth;\n      return ortho ? linearize_depth_ortho(\n        linDepth,\n        nearZ,\n        farZ\n      ) :linearize_depth(linDepth, nearZ, farZ);\n    }\n\n    vec3 getWorldPosLog(vec3 posS) {\n      vec2 uv = posS.xy;\n      float z = posS.z;\n      float nearZ =near;\n      float farZ = far;\n      float depth = pow(2.0, z * log2(farZ + 1.0)) - 1.0;\n      float a = farZ / (farZ - nearZ);\n      float b = farZ * nearZ / (nearZ - farZ);\n      float linDepth = a + b / depth;\n      vec4 clipVec = vec4(uv, linDepth, 1.0) * 2.0 - 1.0;\n      vec4 wpos = projectionMatrixInv * clipVec;\n      return wpos.xyz / wpos.w;\n    }\n    vec3 getWorldPos(float depth, vec2 coord) {\n      #ifdef LOGDEPTH\n        return getWorldPosLog(vec3(coord, depth));\n      #endif\n      float z = depth * 2.0 - 1.0;\n      vec4 clipSpacePosition = vec4(coord * 2.0 - 1.0, z, 1.0);\n      vec4 viewSpacePosition = projectionMatrixInv * clipSpacePosition;\n      // Perspective division\n     vec4 worldSpacePosition = viewSpacePosition;\n     worldSpacePosition.xyz /= worldSpacePosition.w;\n      return worldSpacePosition.xyz;\n  }\n\n  vec3 computeNormal(vec3 worldPos, vec2 vUv) {\n    ivec2 p = ivec2(vUv * resolution);\n    float c0 = texelFetch(sceneDepth, p, 0).x;\n    float l2 = texelFetch(sceneDepth, p - ivec2(2, 0), 0).x;\n    float l1 = texelFetch(sceneDepth, p - ivec2(1, 0), 0).x;\n    float r1 = texelFetch(sceneDepth, p + ivec2(1, 0), 0).x;\n    float r2 = texelFetch(sceneDepth, p + ivec2(2, 0), 0).x;\n    float b2 = texelFetch(sceneDepth, p - ivec2(0, 2), 0).x;\n    float b1 = texelFetch(sceneDepth, p - ivec2(0, 1), 0).x;\n    float t1 = texelFetch(sceneDepth, p + ivec2(0, 1), 0).x;\n    float t2 = texelFetch(sceneDepth, p + ivec2(0, 2), 0).x;\n\n    float dl = abs((2.0 * l1 - l2) - c0);\n    float dr = abs((2.0 * r1 - r2) - c0);\n    float db = abs((2.0 * b1 - b2) - c0);\n    float dt = abs((2.0 * t1 - t2) - c0);\n\n    vec3 ce = getWorldPos(c0, vUv).xyz;\n\n    vec3 dpdx = (dl < dr) ? ce - getWorldPos(l1, (vUv - vec2(1.0 / resolution.x, 0.0))).xyz\n                          : -ce + getWorldPos(r1, (vUv + vec2(1.0 / resolution.x, 0.0))).xyz;\n    vec3 dpdy = (db < dt) ? ce - getWorldPos(b1, (vUv - vec2(0.0, 1.0 / resolution.y))).xyz\n                          : -ce + getWorldPos(t1, (vUv + vec2(0.0, 1.0 / resolution.y))).xyz;\n\n    return normalize(cross(dpdx, dpdy));\n}\n\nmat3 makeRotationZ(float theta) {\n\tfloat c = cos(theta);\n\tfloat s = sin(theta);\n\treturn mat3(c, - s, 0,\n\t\t\ts,  c, 0,\n\t\t\t0,  0, 1);\n  }\n\nvoid main() {\n      vec4 diffuse = texture2D(sceneDiffuse, vUv);\n      float depth = texture2D(sceneDepth, vUv).x;\n      if (depth == 1.0) {\n        gl_FragColor = vec4(vec3(1.0), 1.0);\n        return;\n      }\n      vec3 worldPos = getWorldPos(depth, vUv);\n      #ifdef HALFRES\n        vec3 normal = texture2D(sceneNormal, vUv).rgb;\n      #else\n        vec3 normal = computeNormal(worldPos, vUv);\n      #endif\n      vec4 noise = texture2D(bluenoise, gl_FragCoord.xy / 128.0);\n      vec2 harmoniousNumbers = vec2(\n        1.618033988749895,\n        1.324717957244746\n      );\n      noise.rg += harmoniousNumbers * frame;\n      noise.rg = fract(noise.rg);\n        vec3 helperVec = vec3(0.0, 1.0, 0.0);\n        if (dot(helperVec, normal) > 0.99) {\n          helperVec = vec3(1.0, 0.0, 0.0);\n        }\n        vec3 tangent = normalize(cross(helperVec, normal));\n        vec3 bitangent = cross(normal, tangent);\n        mat3 tbn = mat3(tangent, bitangent, normal) *  makeRotationZ(noise.r * 2.0 * 3.1415962) ;\n\n      float occluded = 0.0;\n      float totalWeight = 0.0;\n      float radiusToUse = screenSpaceRadius ? distance(\n        worldPos,\n        getWorldPos(depth, vUv +\n          vec2(radius, 0.0) / resolution)\n      ) : radius;\n      float distanceFalloffToUse =screenSpaceRadius ?\n          radiusToUse * distanceFalloff\n      : radiusToUse * distanceFalloff * 0.2;\n      float bias = (min(\n        0.1,\n        distanceFalloffToUse * 0.1\n      ) / near) * fwidth(distance(worldPos, cameraPos)) / radiusToUse;\n      float phi = 1.61803398875;\n      float offsetMove = 0.0;\n      float offsetMoveInv = 1.0 / FSAMPLES;\n      for(float i = 0.0; i < FSAMPLES; i++) {\n        vec3 sampleDirection = tbn * samples[int(i)];\n\n        float moveAmt = fract(noise.g + offsetMove);\n        offsetMove += offsetMoveInv;\n\n        vec3 samplePos = worldPos + radiusToUse * moveAmt * sampleDirection;\n        vec4 offset = projMat * vec4(samplePos, 1.0);\n        offset.xyz /= offset.w;\n        offset.xyz = offset.xyz * 0.5 + 0.5;\n        \n        vec2 diff = gl_FragCoord.xy - floor(offset.xy * resolution);\n        // From Rabbid76's hbao\n        vec2 clipRangeCheck = step(vec2(0.0),offset.xy) * step(offset.xy, vec2(1.0));\n          float sampleDepth = textureLod(sceneDepth, offset.xy, 0.0).x;\n\n          #ifdef LOGDEPTH\n\n          float distSample = linearize_depth_log(sampleDepth, near, far);\n\n          #else\n\n          float distSample = ortho ? linearize_depth_ortho(sampleDepth, near, far) : linearize_depth(sampleDepth, near, far);\n\n          #endif\n\n          float distWorld = ortho ? linearize_depth_ortho(offset.z, near, far) : linearize_depth(offset.z, near, far);\n          \n          float rangeCheck = distSample == distWorld ? 0.0 : smoothstep(0.0, 1.0, distanceFalloffToUse / (abs(distSample - distWorld)));\n          \n          float sampleValid = (clipRangeCheck.x * clipRangeCheck.y);\n          occluded += rangeCheck * float(sampleDepth != depth) * float(distSample + bias < distWorld) * step(\n            1.0,\n            dot(diff, diff)\n          ) * sampleValid;\n          \n          totalWeight += sampleValid;\n      }\n      float occ = clamp(1.0 - occluded / (totalWeight == 0.0 ? 1.0 : totalWeight), 0.0, 1.0);\n      gl_FragColor = vec4(occ, 0.5 + 0.5 * normal);\n}"},ww={uniforms:{sceneDiffuse:{value:null},sceneDepth:{value:null},tDiffuse:{value:null},transparencyDWFalse:{value:null},transparencyDWTrue:{value:null},transparencyDWTrueDepth:{value:null},transparencyAware:{value:!1},projMat:{value:new i.Matrix4},viewMat:{value:new i.Matrix4},projectionMatrixInv:{value:new i.Matrix4},viewMatrixInv:{value:new i.Matrix4},cameraPos:{value:new i.Vector3},resolution:{value:new i.Vector2},color:{value:new i.Vector3(0,0,0)},blueNoise:{value:null},downsampledDepth:{value:null},time:{value:0},intensity:{value:10},renderMode:{value:0},gammaCorrection:{value:!1},logDepth:{value:!1},ortho:{value:!1},near:{value:.1},far:{value:1e3},screenSpaceRadius:{value:!1},radius:{value:0},distanceFalloff:{value:1},fog:{value:!1},fogExp:{value:!1},fogDensity:{value:0},fogNear:{value:1/0},fogFar:{value:1/0},colorMultiply:{value:!0}},depthWrite:!1,depthTest:!1,vertexShader:"\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\t\t\tvUv = uv;\n\t\t\tgl_Position = vec4(position, 1);\n\t\t}",fragmentShader:"\n\t\tuniform sampler2D sceneDiffuse;\n    uniform highp sampler2D sceneDepth;\n    uniform highp sampler2D downsampledDepth;\n    uniform highp sampler2D transparencyDWFalse;\n    uniform highp sampler2D transparencyDWTrue;\n    uniform highp sampler2D transparencyDWTrueDepth;\n    uniform sampler2D tDiffuse;\n    uniform sampler2D blueNoise;\n    uniform vec2 resolution;\n    uniform vec3 color;\n    uniform mat4 projectionMatrixInv;\n    uniform mat4 viewMatrixInv;\n    uniform float intensity;\n    uniform float renderMode;\n    uniform float near;\n    uniform float far;\n    uniform bool gammaCorrection;\n    uniform bool logDepth;\n    uniform bool ortho;\n    uniform bool screenSpaceRadius;\n    uniform bool fog;\n    uniform bool fogExp;\n    uniform bool colorMultiply;\n    uniform bool transparencyAware;\n    uniform float fogDensity;\n    uniform float fogNear;\n    uniform float fogFar;\n    uniform float radius;\n    uniform float distanceFalloff;\n    uniform vec3 cameraPos;\n    varying vec2 vUv;\n    highp float linearize_depth(highp float d, highp float zNear,highp float zFar)\n    {\n        return (zFar * zNear) / (zFar - d * (zFar - zNear));\n    }\n    highp float linearize_depth_ortho(highp float d, highp float nearZ, highp float farZ) {\n      return nearZ + (farZ - nearZ) * d;\n    }\n    highp float linearize_depth_log(highp float d, highp float nearZ,highp float farZ) {\n      float depth = pow(2.0, d * log2(farZ + 1.0)) - 1.0;\n      float a = farZ / (farZ - nearZ);\n      float b = farZ * nearZ / (nearZ - farZ);\n      float linDepth = a + b / depth;\n      return ortho ? linearize_depth_ortho(\n        linDepth,\n        nearZ,\n        farZ\n      ) :linearize_depth(linDepth, nearZ, farZ);\n    }\n    vec3 getWorldPosLog(vec3 posS) {\n        vec2 uv = posS.xy;\n        float z = posS.z;\n        float nearZ =near;\n        float farZ = far;\n        float depth = pow(2.0, z * log2(farZ + 1.0)) - 1.0;\n        float a = farZ / (farZ - nearZ);\n        float b = farZ * nearZ / (nearZ - farZ);\n        float linDepth = a + b / depth;\n        vec4 clipVec = vec4(uv, linDepth, 1.0) * 2.0 - 1.0;\n        vec4 wpos = projectionMatrixInv * clipVec;\n        return wpos.xyz / wpos.w;\n      }\n      vec3 getWorldPos(float depth, vec2 coord) {\n       // if (logDepth) {\n        #ifdef LOGDEPTH\n          return getWorldPosLog(vec3(coord, depth));\n        #endif\n      //  }\n        float z = depth * 2.0 - 1.0;\n        vec4 clipSpacePosition = vec4(coord * 2.0 - 1.0, z, 1.0);\n        vec4 viewSpacePosition = projectionMatrixInv * clipSpacePosition;\n        // Perspective division\n       vec4 worldSpacePosition = viewSpacePosition;\n       worldSpacePosition.xyz /= worldSpacePosition.w;\n        return worldSpacePosition.xyz;\n    }\n  \n    vec3 computeNormal(vec3 worldPos, vec2 vUv) {\n      ivec2 p = ivec2(vUv * resolution);\n      float c0 = texelFetch(sceneDepth, p, 0).x;\n      float l2 = texelFetch(sceneDepth, p - ivec2(2, 0), 0).x;\n      float l1 = texelFetch(sceneDepth, p - ivec2(1, 0), 0).x;\n      float r1 = texelFetch(sceneDepth, p + ivec2(1, 0), 0).x;\n      float r2 = texelFetch(sceneDepth, p + ivec2(2, 0), 0).x;\n      float b2 = texelFetch(sceneDepth, p - ivec2(0, 2), 0).x;\n      float b1 = texelFetch(sceneDepth, p - ivec2(0, 1), 0).x;\n      float t1 = texelFetch(sceneDepth, p + ivec2(0, 1), 0).x;\n      float t2 = texelFetch(sceneDepth, p + ivec2(0, 2), 0).x;\n  \n      float dl = abs((2.0 * l1 - l2) - c0);\n      float dr = abs((2.0 * r1 - r2) - c0);\n      float db = abs((2.0 * b1 - b2) - c0);\n      float dt = abs((2.0 * t1 - t2) - c0);\n  \n      vec3 ce = getWorldPos(c0, vUv).xyz;\n  \n      vec3 dpdx = (dl < dr) ? ce - getWorldPos(l1, (vUv - vec2(1.0 / resolution.x, 0.0))).xyz\n                            : -ce + getWorldPos(r1, (vUv + vec2(1.0 / resolution.x, 0.0))).xyz;\n      vec3 dpdy = (db < dt) ? ce - getWorldPos(b1, (vUv - vec2(0.0, 1.0 / resolution.y))).xyz\n                            : -ce + getWorldPos(t1, (vUv + vec2(0.0, 1.0 / resolution.y))).xyz;\n  \n      return normalize(cross(dpdx, dpdy));\n  }\n\n    #include <common>\n    #include <dithering_pars_fragment>\n    void main() {\n        //vec4 texel = texture2D(tDiffuse, vUv);//vec3(0.0);\n        vec4 sceneTexel = texture2D(sceneDiffuse, vUv);\n        float depth = texture2D(\n            sceneDepth,\n            vUv\n        ).x;\n        #ifdef HALFRES \n        vec4 texel;\n        if (depth == 1.0) {\n            texel = vec4(0.0, 0.0, 0.0, 1.0);\n        } else {\n        vec3 worldPos = getWorldPos(depth, vUv);\n        vec3 normal = computeNormal(getWorldPos(depth, vUv), vUv);\n       // vec4 texel = texture2D(tDiffuse, vUv);\n       // Find closest depth;\n       float totalWeight = 0.0;\n       float radiusToUse = screenSpaceRadius ? distance(\n        worldPos,\n        getWorldPos(depth, vUv +\n          vec2(radius, 0.0) / resolution)\n      ) : radius;\n      float distanceFalloffToUse =screenSpaceRadius ?\n          radiusToUse * distanceFalloff\n      : distanceFalloff;\n        for(float x = -1.0; x <= 1.0; x++) {\n            for(float y = -1.0; y <= 1.0; y++) {\n                vec2 offset = vec2(x, y);\n                ivec2 p = ivec2(\n                    (vUv * resolution * 0.5) + offset\n                );\n                vec2 pUv = vec2(p) / (resolution * 0.5);\n                float sampleDepth = texelFetch(downsampledDepth,p, 0).x;\n                vec4 sampleInfo = texelFetch(tDiffuse, p, 0);\n                vec3 normalSample = sampleInfo.gba * 2.0 - 1.0;\n                vec3 worldPosSample = getWorldPos(sampleDepth, pUv);\n                float tangentPlaneDist = abs(dot(worldPosSample - worldPos, normal));\n                float rangeCheck = exp(-1.0 * tangentPlaneDist * (1.0 / distanceFalloffToUse)) * max(dot(normal, normalSample), 0.0);\n                float weight = rangeCheck;\n                totalWeight += weight;\n                texel += sampleInfo * weight;\n            }\n        }\n        if (totalWeight == 0.0) {\n            texel = texture2D(tDiffuse, vUv);\n        } else {\n            texel /= totalWeight;\n        }\n    }\n        #else\n        vec4 texel = texture2D(tDiffuse, vUv);\n        #endif\n\n        #ifdef LOGDEPTH\n        texel.r = clamp(texel.r, 0.0, 1.0);\n        if (texel.r == 0.0) {\n          texel.r = 1.0;\n        }\n        #endif\n     \n        float finalAo = pow(texel.r, intensity);\n        float fogFactor;\n        float fogDepth = distance(\n            cameraPos,\n            getWorldPos(depth, vUv)\n        );\n        if (fog) {\n            if (fogExp) {\n                fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n            } else {\n                fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n            }\n        }\n        if (transparencyAware) {\n            float transparencyDWOff = texture2D(transparencyDWFalse, vUv).a;\n            float transparencyDWOn = texture2D(transparencyDWTrue, vUv).a;\n            float adjustmentFactorOff = transparencyDWOff;\n            float adjustmentFactorOn = (1.0 - transparencyDWOn) * (\n                texture2D(transparencyDWTrueDepth, vUv).r == texture2D(sceneDepth, vUv).r ? 1.0 : 0.0\n            );\n            float adjustmentFactor = max(adjustmentFactorOff, adjustmentFactorOn);\n            finalAo = mix(finalAo, 1.0, adjustmentFactor);\n        }\n        finalAo = mix(finalAo, 1.0, fogFactor);\n        vec3 aoApplied = color * mix(vec3(1.0), sceneTexel.rgb, float(colorMultiply));\n        if (renderMode == 0.0) {\n            gl_FragColor = vec4( mix(sceneTexel.rgb, aoApplied, 1.0 - finalAo), sceneTexel.a);\n        } else if (renderMode == 1.0) {\n            gl_FragColor = vec4( mix(vec3(1.0), aoApplied, 1.0 - finalAo), sceneTexel.a);\n        } else if (renderMode == 2.0) {\n            gl_FragColor = vec4( sceneTexel.rgb, sceneTexel.a);\n        } else if (renderMode == 3.0) {\n            if (vUv.x < 0.5) {\n                gl_FragColor = vec4( sceneTexel.rgb, sceneTexel.a);\n            } else if (abs(vUv.x - 0.5) < 1.0 / resolution.x) {\n                gl_FragColor = vec4(1.0);\n            } else {\n                gl_FragColor = vec4( mix(sceneTexel.rgb, aoApplied, 1.0 - finalAo), sceneTexel.a);\n            }\n        } else if (renderMode == 4.0) {\n            if (vUv.x < 0.5) {\n                gl_FragColor = vec4( sceneTexel.rgb, sceneTexel.a);\n            } else if (abs(vUv.x - 0.5) < 1.0 / resolution.x) {\n                gl_FragColor = vec4(1.0);\n            } else {\n                gl_FragColor = vec4( mix(vec3(1.0), aoApplied, 1.0 - finalAo), sceneTexel.a);\n            }\n        }\n        #include <dithering_fragment>\n        if (gammaCorrection) {\n            gl_FragColor = sRGBTransferOETF(gl_FragColor);\n        }\n    }\n    "},xw={uniforms:{sceneDiffuse:{value:null},sceneDepth:{value:null},tDiffuse:{value:null},projMat:{value:new i.Matrix4},viewMat:{value:new i.Matrix4},projectionMatrixInv:{value:new i.Matrix4},viewMatrixInv:{value:new i.Matrix4},cameraPos:{value:new i.Vector3},resolution:{value:new i.Vector2},time:{value:0},r:{value:5},blueNoise:{value:null},radius:{value:12},worldRadius:{value:5},index:{value:0},poissonDisk:{value:[]},distanceFalloff:{value:1},near:{value:.1},far:{value:1e3},logDepth:{value:!1},screenSpaceRadius:{value:!1}},depthWrite:!1,depthTest:!1,vertexShader:"\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\t\t\tvUv = uv;\n\t\t\tgl_Position = vec4(position, 1.0);\n\t\t}",fragmentShader:"\n\t\tuniform sampler2D sceneDiffuse;\n    uniform highp sampler2D sceneDepth;\n    uniform sampler2D tDiffuse;\n    uniform sampler2D blueNoise;\n    uniform mat4 projectionMatrixInv;\n    uniform mat4 viewMatrixInv;\n    uniform vec2 resolution;\n    uniform float r;\n    uniform float radius;\n     uniform float worldRadius;\n    uniform float index;\n     uniform float near;\n     uniform float far;\n     uniform float distanceFalloff;\n     uniform bool logDepth;\n     uniform bool screenSpaceRadius;\n    varying vec2 vUv;\n\n    highp float linearize_depth(highp float d, highp float zNear,highp float zFar)\n    {\n        highp float z_n = 2.0 * d - 1.0;\n        return 2.0 * zNear * zFar / (zFar + zNear - z_n * (zFar - zNear));\n    }\n    highp float linearize_depth_log(highp float d, highp float nearZ,highp float farZ) {\n     float depth = pow(2.0, d * log2(farZ + 1.0)) - 1.0;\n     float a = farZ / (farZ - nearZ);\n     float b = farZ * nearZ / (nearZ - farZ);\n     float linDepth = a + b / depth;\n     return linearize_depth(linDepth, nearZ, farZ);\n   }\n   highp float linearize_depth_ortho(highp float d, highp float nearZ, highp float farZ) {\n     return nearZ + (farZ - nearZ) * d;\n   }\n   vec3 getWorldPosLog(vec3 posS) {\n     vec2 uv = posS.xy;\n     float z = posS.z;\n     float nearZ =near;\n     float farZ = far;\n     float depth = pow(2.0, z * log2(farZ + 1.0)) - 1.0;\n     float a = farZ / (farZ - nearZ);\n     float b = farZ * nearZ / (nearZ - farZ);\n     float linDepth = a + b / depth;\n     vec4 clipVec = vec4(uv, linDepth, 1.0) * 2.0 - 1.0;\n     vec4 wpos = projectionMatrixInv * clipVec;\n     return wpos.xyz / wpos.w;\n   }\n    vec3 getWorldPos(float depth, vec2 coord) {\n     #ifdef LOGDEPTH\n          return getWorldPosLog(vec3(coord, depth));\n     #endif\n        \n        float z = depth * 2.0 - 1.0;\n        vec4 clipSpacePosition = vec4(coord * 2.0 - 1.0, z, 1.0);\n        vec4 viewSpacePosition = projectionMatrixInv * clipSpacePosition;\n        // Perspective division\n       vec4 worldSpacePosition = viewSpacePosition;\n       worldSpacePosition.xyz /= worldSpacePosition.w;\n        return worldSpacePosition.xyz;\n    }\n    #include <common>\n    #define NUM_SAMPLES 16\n    uniform vec2 poissonDisk[NUM_SAMPLES];\n    void main() {\n        const float pi = 3.14159;\n        vec2 texelSize = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n        vec2 uv = vUv;\n        vec4 data = texture2D(tDiffuse, vUv);\n        float occlusion = data.r;\n        float baseOcc = data.r;\n        vec3 normal = data.gba * 2.0 - 1.0;\n        float count = 1.0;\n        float d = texture2D(sceneDepth, vUv).x;\n        if (d == 1.0) {\n          gl_FragColor = data;\n          return;\n        }\n        vec3 worldPos = getWorldPos(d, vUv);\n        float size = radius;\n        float angle;\n        if (index == 0.0) {\n             angle = texture2D(blueNoise, gl_FragCoord.xy / 128.0).x * PI2;\n        } else if (index == 1.0) {\n             angle = texture2D(blueNoise, gl_FragCoord.xy / 128.0).y * PI2;\n        } else if (index == 2.0) {\n             angle = texture2D(blueNoise, gl_FragCoord.xy / 128.0).z * PI2;\n        } else {\n             angle = texture2D(blueNoise, gl_FragCoord.xy / 128.0).w * PI2;\n        }\n\n        mat2 rotationMatrix = mat2(cos(angle), -sin(angle), sin(angle), cos(angle));\n        float radiusToUse = screenSpaceRadius ? distance(\n          worldPos,\n          getWorldPos(d, vUv +\n            vec2(worldRadius, 0.0) / resolution)\n        ) : worldRadius;\n        float distanceFalloffToUse =screenSpaceRadius ?\n        radiusToUse * distanceFalloff\n    : radiusToUse * distanceFalloff * 0.2;\n\n\n        for(int i = 0; i < NUM_SAMPLES; i++) {\n            vec2 offset = (rotationMatrix * poissonDisk[i]) * texelSize * size;\n            vec4 dataSample = texture2D(tDiffuse, uv + offset);\n            float occSample = dataSample.r;\n            vec3 normalSample = dataSample.gba * 2.0 - 1.0;\n            float dSample = texture2D(sceneDepth, uv + offset).x;\n            vec3 worldPosSample = getWorldPos(dSample, uv + offset);\n            float tangentPlaneDist = abs(dot(worldPosSample - worldPos, normal));\n            float rangeCheck = dSample == 1.0 ? 0.0 :exp(-1.0 * tangentPlaneDist * (1.0 / distanceFalloffToUse)) * max(dot(normal, normalSample), 0.0) * (1.0 - abs(occSample - baseOcc));\n            occlusion += occSample * rangeCheck;\n            count += rangeCheck;\n        }\n        if (count > 0.0) {\n          occlusion /= count;\n        }\n        #ifdef LOGDEPTH\n          occlusion = clamp(occlusion, 0.0, 1.0);\n          if (occlusion == 0.0) {\n            occlusion = 1.0;\n          }\n        #endif\n        gl_FragColor = vec4(occlusion, 0.5 + 0.5 * normal);\n    }\n    "},Ow={uniforms:{sceneDepth:{value:null},resolution:{value:new i.Vector2},near:{value:.1},far:{value:1e3},viewMatrixInv:{value:new i.Matrix4},projectionMatrixInv:{value:new i.Matrix4},logDepth:{value:!1}},depthWrite:!1,depthTest:!1,vertexShader:"\n    varying vec2 vUv;\n    void main() {\n        vUv = uv;\n        gl_Position = vec4(position, 1);\n    }",fragmentShader:"\n    uniform highp sampler2D sceneDepth;\n    uniform vec2 resolution;\n    uniform float near;\n    uniform float far;\n    uniform bool logDepth;\n    uniform mat4 viewMatrixInv;\n    uniform mat4 projectionMatrixInv;\n    varying vec2 vUv;\n    layout(location = 1) out vec4 gNormal;\n    vec3 getWorldPosLog(vec3 posS) {\n        vec2 uv = posS.xy;\n        float z = posS.z;\n        float nearZ =near;\n        float farZ = far;\n        float depth = pow(2.0, z * log2(farZ + 1.0)) - 1.0;\n        float a = farZ / (farZ - nearZ);\n        float b = farZ * nearZ / (nearZ - farZ);\n        float linDepth = a + b / depth;\n        vec4 clipVec = vec4(uv, linDepth, 1.0) * 2.0 - 1.0;\n        vec4 wpos = projectionMatrixInv * clipVec;\n        return wpos.xyz / wpos.w;\n      }\n      vec3 getWorldPos(float depth, vec2 coord) {\n        if (logDepth) {\n          return getWorldPosLog(vec3(coord, depth));\n        }\n        float z = depth * 2.0 - 1.0;\n        vec4 clipSpacePosition = vec4(coord * 2.0 - 1.0, z, 1.0);\n        vec4 viewSpacePosition = projectionMatrixInv * clipSpacePosition;\n        // Perspective division\n       vec4 worldSpacePosition = viewSpacePosition;\n       worldSpacePosition.xyz /= worldSpacePosition.w;\n        return worldSpacePosition.xyz;\n    }\n  \n    vec3 computeNormal(vec3 worldPos, vec2 vUv) {\n      ivec2 p = ivec2(vUv * resolution);\n      float c0 = texelFetch(sceneDepth, p, 0).x;\n      float l2 = texelFetch(sceneDepth, p - ivec2(2, 0), 0).x;\n      float l1 = texelFetch(sceneDepth, p - ivec2(1, 0), 0).x;\n      float r1 = texelFetch(sceneDepth, p + ivec2(1, 0), 0).x;\n      float r2 = texelFetch(sceneDepth, p + ivec2(2, 0), 0).x;\n      float b2 = texelFetch(sceneDepth, p - ivec2(0, 2), 0).x;\n      float b1 = texelFetch(sceneDepth, p - ivec2(0, 1), 0).x;\n      float t1 = texelFetch(sceneDepth, p + ivec2(0, 1), 0).x;\n      float t2 = texelFetch(sceneDepth, p + ivec2(0, 2), 0).x;\n  \n      float dl = abs((2.0 * l1 - l2) - c0);\n      float dr = abs((2.0 * r1 - r2) - c0);\n      float db = abs((2.0 * b1 - b2) - c0);\n      float dt = abs((2.0 * t1 - t2) - c0);\n  \n      vec3 ce = getWorldPos(c0, vUv).xyz;\n  \n      vec3 dpdx = (dl < dr) ? ce - getWorldPos(l1, (vUv - vec2(1.0 / resolution.x, 0.0))).xyz\n                            : -ce + getWorldPos(r1, (vUv + vec2(1.0 / resolution.x, 0.0))).xyz;\n      vec3 dpdy = (db < dt) ? ce - getWorldPos(b1, (vUv - vec2(0.0, 1.0 / resolution.y))).xyz\n                            : -ce + getWorldPos(t1, (vUv + vec2(0.0, 1.0 / resolution.y))).xyz;\n  \n      return normalize(cross(dpdx, dpdy));\n  }\n    void main() {\n        vec2 uv = vUv - vec2(0.5) / resolution;\n        vec2 pixelSize = vec2(1.0) / resolution;\n        highp vec2[4] uvSamples;\n        uvSamples[0] = uv;\n        uvSamples[1] = uv + vec2(pixelSize.x, 0.0);\n        uvSamples[2] = uv + vec2(0.0, pixelSize.y);\n        uvSamples[3] = uv + pixelSize;\n        float depth00 = texture2D(sceneDepth, uvSamples[0]).r;\n        float depth10 = texture2D(sceneDepth, uvSamples[1]).r;\n        float depth01 = texture2D(sceneDepth, uvSamples[2]).r;\n        float depth11 = texture2D(sceneDepth, uvSamples[3]).r;\n        float minDepth = min(min(depth00, depth10), min(depth01, depth11));\n        float maxDepth = max(max(depth00, depth10), max(depth01, depth11));\n        float targetDepth = minDepth;\n        // Checkerboard pattern to avoid artifacts\n        if (mod(gl_FragCoord.x + gl_FragCoord.y, 2.0) > 0.5) { \n            targetDepth = maxDepth;\n        }\n        int chosenIndex = 0;\n        float[4] samples;\n        samples[0] = depth00;\n        samples[1] = depth10;\n        samples[2] = depth01;\n        samples[3] = depth11;\n        for(int i = 0; i < 4; ++i) {\n            if (samples[i] == targetDepth) {\n                chosenIndex = i;\n                break;\n            }\n        }\n        gl_FragColor = vec4(samples[chosenIndex], 0.0, 0.0, 1.0);\n        gNormal = vec4(computeNormal(\n            getWorldPos(samples[chosenIndex], uvSamples[chosenIndex]), uvSamples[chosenIndex]\n        ), 0.0);\n    }"};var Cw="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";const Sw=Uint8Array.from(atob(Cw),(e=>e.charCodeAt(0)));function Iw(e,t,i){if(t.getQueryParameter(e,t.QUERY_RESULT_AVAILABLE)){const s=t.getQueryParameter(e,t.QUERY_RESULT)/1e6;i.lastTime=s}else setTimeout((()=>{Iw(e,t,i)}),1)}class Ew extends ry{constructor(e,t,s=512,n=512){super(),this.width=s,this.height=n,this.clear=!0,this.camera=t,this.scene=e,this.autosetGamma=!0,this.configuration=new Proxy({aoSamples:16,aoRadius:5,denoiseSamples:8,denoiseRadius:12,distanceFalloff:1,intensity:5,denoiseIterations:2,renderMode:0,color:new i.Color(0,0,0),gammaCorrection:!0,logarithmicDepthBuffer:!1,screenSpaceRadius:!1,halfRes:!1,depthAwareUpsampling:!0,colorMultiply:!0,transparencyAware:!1,accumulate:!1},{set:(e,t,i)=>{const s=e[t];return e[t]=i,i.equals?i.equals(s)||this.firstFrame():s!==i&&this.firstFrame(),"aoSamples"===t&&s!==i&&this.configureAOPass(this.configuration.logarithmicDepthBuffer),"denoiseSamples"===t&&s!==i&&this.configureDenoisePass(this.configuration.logarithmicDepthBuffer),"halfRes"===t&&s!==i&&(this.configureAOPass(this.configuration.logarithmicDepthBuffer),this.configureHalfResTargets(),this.configureEffectCompositer(this.configuration.logarithmicDepthBuffer),this.setSize(this.width,this.height)),"depthAwareUpsampling"===t&&s!==i&&this.configureEffectCompositer(this.configuration.logarithmicDepthBuffer),"gammaCorrection"===t&&(this.autosetGamma=!1),"transparencyAware"===t&&s!==i&&(this.autoDetectTransparency=!1,this.configureTransparencyTarget()),!0}}),this.samples=[],this.samplesDenoise=[],this.autoDetectTransparency=!0,this.frames=0,this.lastViewMatrix=new i.Matrix4,this.lastProjectionMatrix=new i.Matrix4,this.configureEffectCompositer(this.configuration.logarithmicDepthBuffer),this.configureSampleDependentPasses(),this.configureHalfResTargets(),this.detectTransparency(),this.configureTransparencyTarget(),this.copyQuad=new vw(new i.ShaderMaterial({uniforms:{tDiffuse:{value:null}},depthWrite:!1,vertexShader:"\n            varying vec2 vUv;\n            void main() {\n                vUv = uv;\n                gl_Position = vec4(position, 1);\n            }\n            ",fragmentShader:"\n            uniform sampler2D tDiffuse;\n            varying vec2 vUv;\n            void main() {\n                gl_FragColor = texture2D(tDiffuse, vUv);\n            }\n            "})),this.writeTargetInternal=new i.WebGLRenderTarget(this.width,this.height,{minFilter:i.LinearFilter,magFilter:i.LinearFilter,depthBuffer:!1}),this.readTargetInternal=new i.WebGLRenderTarget(this.width,this.height,{minFilter:i.LinearFilter,magFilter:i.LinearFilter,depthBuffer:!1}),this.outputTargetInternal=new i.WebGLRenderTarget(this.width,this.height,{minFilter:i.LinearFilter,magFilter:i.LinearFilter,depthBuffer:!1}),this.accumulationRenderTarget=new i.WebGLRenderTarget(this.width,this.height,{minFilter:i.LinearFilter,magFilter:i.LinearFilter,depthBuffer:!1,format:i.RGBAFormat,type:i.HalfFloatType,stencilBuffer:!1,depthBuffer:!1,alpha:!0}),this.accumulationQuad=new vw(new i.ShaderMaterial({uniforms:{frame:{value:0},tDiffuse:{value:null}},transparent:!0,opacity:1,vertexShader:"\n             varying vec2 vUv;\n             void main() {\n                 vUv = uv;\n                 gl_Position = vec4(position, 1);\n             }",fragmentShader:"\n             uniform sampler2D tDiffuse;\n             uniform float frame;\n                varying vec2 vUv;\n                void main() {\n                    vec4 color = texture2D(tDiffuse, vUv);\n                    gl_FragColor = vec4(color.rgb, 1.0 / (frame + 1.0));\n                }\n                "})),this.bluenoise=new i.DataTexture(Sw,128,128),this.bluenoise.colorSpace=i.NoColorSpace,this.bluenoise.wrapS=i.RepeatWrapping,this.bluenoise.wrapT=i.RepeatWrapping,this.bluenoise.minFilter=i.NearestFilter,this.bluenoise.magFilter=i.NearestFilter,this.bluenoise.needsUpdate=!0,this.lastTime=0,this.needsDepthTexture=!0,this.needsSwap=!0,this._r=new i.Vector2,this._c=new i.Color}configureHalfResTargets(){this.firstFrame(),this.configuration.halfRes?(this.depthDownsampleTarget=i.REVISION>161?new i.WebGLRenderTarget(this.width/2,this.height/2,{count:2}):new i.WebGLRenderTarget(this.width/2,this.height/2,2),i.REVISION<=161&&(this.depthDownsampleTarget.textures=this.depthDownsampleTarget.texture),this.depthDownsampleTarget.textures[0].format=i.RedFormat,this.depthDownsampleTarget.textures[0].type=i.FloatType,this.depthDownsampleTarget.textures[0].minFilter=i.NearestFilter,this.depthDownsampleTarget.textures[0].magFilter=i.NearestFilter,this.depthDownsampleTarget.textures[0].depthBuffer=!1,this.depthDownsampleTarget.textures[1].format=i.RGBAFormat,this.depthDownsampleTarget.textures[1].type=i.HalfFloatType,this.depthDownsampleTarget.textures[1].minFilter=i.NearestFilter,this.depthDownsampleTarget.textures[1].magFilter=i.NearestFilter,this.depthDownsampleTarget.textures[1].depthBuffer=!1,this.depthDownsampleQuad=new vw(new i.ShaderMaterial(Ow))):(this.depthDownsampleTarget&&(this.depthDownsampleTarget.dispose(),this.depthDownsampleTarget=null),this.depthDownsampleQuad&&(this.depthDownsampleQuad.dispose(),this.depthDownsampleQuad=null))}detectTransparency(){if(this.autoDetectTransparency){let e=!1;this.scene.traverse((t=>{t.material&&t.material.transparent&&(e=!0)})),e&&(this.configuration.transparencyAware=!0)}}configureTransparencyTarget(){this.configuration.transparencyAware?(this.transparencyRenderTargetDWFalse=new i.WebGLRenderTarget(this.width,this.height,{minFilter:i.LinearFilter,magFilter:i.NearestFilter,type:i.HalfFloatType,format:i.RGBAFormat}),this.transparencyRenderTargetDWTrue=new i.WebGLRenderTarget(this.width,this.height,{minFilter:i.LinearFilter,magFilter:i.NearestFilter,type:i.HalfFloatType,format:i.RGBAFormat}),this.transparencyRenderTargetDWTrue.depthTexture=new i.DepthTexture(this.width,this.height,i.UnsignedIntType),this.depthCopyPass=new vw(new i.ShaderMaterial({uniforms:{depthTexture:{value:this.depthTexture}},vertexShader:"\n            varying vec2 vUv;\n            void main() {\n                vUv = uv;\n                gl_Position = vec4(position, 1);\n            }",fragmentShader:"\n            uniform sampler2D depthTexture;\n            varying vec2 vUv;\n            void main() {\n               gl_FragDepth = texture2D(depthTexture, vUv).r + 0.00001;\n               gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\n            }\n            "}))):(this.transparencyRenderTargetDWFalse&&(this.transparencyRenderTargetDWFalse.dispose(),this.transparencyRenderTargetDWFalse=null),this.transparencyRenderTargetDWTrue&&(this.transparencyRenderTargetDWTrue.dispose(),this.transparencyRenderTargetDWTrue=null),this.depthCopyPass&&(this.depthCopyPass.dispose(),this.depthCopyPass=null))}renderTransparency(e){const t=this.scene.background,s=e.getClearColor(new i.Color),n=e.getClearAlpha(),r=new Map,o=e.autoClearDepth;this.scene.traverse((e=>{r.set(e,e.visible)})),this.scene.background=null,e.autoClearDepth=!1,e.setClearColor(new i.Color(0,0,0),0),this.depthCopyPass.material.uniforms.depthTexture.value=this.depthTexture,e.setRenderTarget(this.transparencyRenderTargetDWFalse),this.scene.traverse((e=>{e.material&&(e.visible=r.get(e)&&e.material.transparent&&!e.material.depthWrite&&!e.userData.treatAsOpaque)})),e.clear(!0,!0,!0),this.depthCopyPass.render(e),e.render(this.scene,this.camera),e.setRenderTarget(this.transparencyRenderTargetDWTrue),this.scene.traverse((e=>{e.material&&(e.visible=r.get(e)&&e.material.transparent&&e.material.depthWrite&&!e.userData.treatAsOpaque)})),e.clear(!0,!0,!0),this.depthCopyPass.render(e),e.render(this.scene,this.camera),this.scene.traverse((e=>{e.visible=r.get(e)})),e.setClearColor(s,n),this.scene.background=t,e.autoClearDepth=o}configureSampleDependentPasses(){this.configureAOPass(this.configuration.logarithmicDepthBuffer),this.configureDenoisePass(this.configuration.logarithmicDepthBuffer)}configureAOPass(e=!1){this.firstFrame(),this.samples=this.generateHemisphereSamples(this.configuration.aoSamples);const t={...yw};t.fragmentShader=t.fragmentShader.replace("16",this.configuration.aoSamples).replace("16.0",this.configuration.aoSamples+".0"),e&&(t.fragmentShader="#define LOGDEPTH\n"+t.fragmentShader),this.configuration.halfRes&&(t.fragmentShader="#define HALFRES\n"+t.fragmentShader),this.effectShaderQuad?(this.effectShaderQuad.material.dispose(),this.effectShaderQuad.material=new i.ShaderMaterial(t)):this.effectShaderQuad=new vw(new i.ShaderMaterial(t))}configureDenoisePass(e=!1){this.firstFrame(),this.samplesDenoise=this.generateDenoiseSamples(this.configuration.denoiseSamples,11);const t={...xw};t.fragmentShader=t.fragmentShader.replace("16",this.configuration.denoiseSamples),e&&(t.fragmentShader="#define LOGDEPTH\n"+t.fragmentShader),this.poissonBlurQuad?(this.poissonBlurQuad.material.dispose(),this.poissonBlurQuad.material=new i.ShaderMaterial(t)):this.poissonBlurQuad=new vw(new i.ShaderMaterial(t))}configureEffectCompositer(e=!1){this.firstFrame();const t={...ww};e&&(t.fragmentShader="#define LOGDEPTH\n"+t.fragmentShader),this.configuration.halfRes&&this.configuration.depthAwareUpsampling&&(t.fragmentShader="#define HALFRES\n"+t.fragmentShader),this.effectCompositerQuad?(this.effectCompositerQuad.material.dispose(),this.effectCompositerQuad.material=new i.ShaderMaterial(t)):this.effectCompositerQuad=new vw(new i.ShaderMaterial(t))}generateHemisphereSamples(e){const t=[];for(let s=0;s<e;s++){const n=2.399963*s,r=Math.sqrt(s+.5)/Math.sqrt(e),o=r*Math.cos(n),a=r*Math.sin(n),l=Math.sqrt(1-(o*o+a*a));t.push(new i.Vector3(o,a,l))}return t}generateDenoiseSamples(e,t){const s=2*Math.PI*t/e,n=1/e,r=n,o=[];let a=n,l=0;for(let t=0;t<e;t++)o.push(new i.Vector2(Math.cos(l),Math.sin(l)).multiplyScalar(Math.pow(a,.75))),a+=r,l+=s;return o}setSize(e,t){this.firstFrame(),this.width=e,this.height=t;const i=this.configuration.halfRes?.5:1;this.writeTargetInternal.setSize(e*i,t*i),this.readTargetInternal.setSize(e*i,t*i),this.accumulationRenderTarget.setSize(e*i,t*i),this.configuration.halfRes&&this.depthDownsampleTarget.setSize(e*i,t*i),this.configuration.transparencyAware&&(this.transparencyRenderTargetDWFalse.setSize(e,t),this.transparencyRenderTargetDWTrue.setSize(e,t)),this.outputTargetInternal.setSize(e,t)}setDepthTexture(e){this.depthTexture=e}firstFrame(){this.needsFrame=!0}render(e,t,s){const n=e.xr.enabled;let r,o,a;e.xr.enabled=!1,e.capabilities.logarithmicDepthBuffer!==this.configuration.logarithmicDepthBuffer&&(this.configuration.logarithmicDepthBuffer=e.capabilities.logarithmicDepthBuffer,this.configureAOPass(this.configuration.logarithmicDepthBuffer),this.configureDenoisePass(this.configuration.logarithmicDepthBuffer),this.configureEffectCompositer(this.configuration.logarithmicDepthBuffer)),this.detectTransparency(),t.texture.type===this.outputTargetInternal.texture.type&&t.texture.format===this.outputTargetInternal.texture.format||(this.outputTargetInternal.texture.type=t.texture.type,this.outputTargetInternal.texture.format=t.texture.format,this.outputTargetInternal.texture.needsUpdate=!0),this.camera.updateMatrixWorld(),this.lastViewMatrix.equals(this.camera.matrixWorldInverse)&&this.lastProjectionMatrix.equals(this.camera.projectionMatrix)&&this.configuration.accumulate&&!this.needsFrame?this.frame++:(e.setRenderTarget(this.accumulationRenderTarget),e.clear(!0,!0,!0),this.frame=0,this.needsFrame=!1),this.lastViewMatrix.copy(this.camera.matrixWorldInverse),this.lastProjectionMatrix.copy(this.camera.projectionMatrix),this.debugMode&&(r=e.getContext(),o=r.getExtension("EXT_disjoint_timer_query_webgl2"),null===o&&(console.error("EXT_disjoint_timer_query_webgl2 not available, disabling debug mode."),this.debugMode=!1)),this.debugMode&&(a=r.createQuery(),r.beginQuery(o.TIME_ELAPSED_EXT,a)),this.configuration.transparencyAware&&this.renderTransparency(e),this._r.set(this.width,this.height);let l=this.configuration.aoRadius;if(this.configuration.halfRes&&this.configuration.screenSpaceRadius&&(l*=.5),this.frame<1024/this.configuration.aoSamples){this.configuration.halfRes&&(e.setRenderTarget(this.depthDownsampleTarget),this.depthDownsampleQuad.material.uniforms.sceneDepth.value=this.depthTexture,this.depthDownsampleQuad.material.uniforms.resolution.value=this._r,this.depthDownsampleQuad.material.uniforms.near.value=this.camera.near,this.depthDownsampleQuad.material.uniforms.far.value=this.camera.far,this.depthDownsampleQuad.material.uniforms.projectionMatrixInv.value=this.camera.projectionMatrixInverse,this.depthDownsampleQuad.material.uniforms.viewMatrixInv.value=this.camera.matrixWorld,this.depthDownsampleQuad.material.uniforms.logDepth.value=this.configuration.logarithmicDepthBuffer,this.depthDownsampleQuad.render(e)),this.effectShaderQuad.material.uniforms.sceneDiffuse.value=t.texture,this.effectShaderQuad.material.uniforms.sceneDepth.value=this.configuration.halfRes?this.depthDownsampleTarget.textures[0]:this.depthTexture,this.effectShaderQuad.material.uniforms.sceneNormal.value=this.configuration.halfRes?this.depthDownsampleTarget.textures[1]:null,this.effectShaderQuad.material.uniforms.projMat.value=this.camera.projectionMatrix,this.effectShaderQuad.material.uniforms.viewMat.value=this.camera.matrixWorldInverse,this.effectShaderQuad.material.uniforms.projViewMat.value=this.camera.projectionMatrix.clone().multiply(this.camera.matrixWorldInverse.clone()),this.effectShaderQuad.material.uniforms.projectionMatrixInv.value=this.camera.projectionMatrixInverse,this.effectShaderQuad.material.uniforms.viewMatrixInv.value=this.camera.matrixWorld,this.effectShaderQuad.material.uniforms.cameraPos.value=this.camera.getWorldPosition(new i.Vector3),this.effectShaderQuad.material.uniforms.resolution.value=this.configuration.halfRes?this._r.clone().multiplyScalar(.5).floor():this._r,this.effectShaderQuad.material.uniforms.time.value=performance.now()/1e3,this.effectShaderQuad.material.uniforms.samples.value=this.samples,this.effectShaderQuad.material.uniforms.bluenoise.value=this.bluenoise,this.effectShaderQuad.material.uniforms.radius.value=l,this.effectShaderQuad.material.uniforms.distanceFalloff.value=this.configuration.distanceFalloff,this.effectShaderQuad.material.uniforms.near.value=this.camera.near,this.effectShaderQuad.material.uniforms.far.value=this.camera.far,this.effectShaderQuad.material.uniforms.logDepth.value=e.capabilities.logarithmicDepthBuffer,this.effectShaderQuad.material.uniforms.ortho.value=this.camera.isOrthographicCamera,this.effectShaderQuad.material.uniforms.screenSpaceRadius.value=this.configuration.screenSpaceRadius,this.effectShaderQuad.material.uniforms.frame.value=this.frame,e.setRenderTarget(this.writeTargetInternal),this.effectShaderQuad.render(e);for(let t=0;t<this.configuration.denoiseIterations;t++)[this.writeTargetInternal,this.readTargetInternal]=[this.readTargetInternal,this.writeTargetInternal],this.poissonBlurQuad.material.uniforms.tDiffuse.value=this.readTargetInternal.texture,this.poissonBlurQuad.material.uniforms.sceneDepth.value=this.configuration.halfRes?this.depthDownsampleTarget.textures[0]:this.depthTexture,this.poissonBlurQuad.material.uniforms.projMat.value=this.camera.projectionMatrix,this.poissonBlurQuad.material.uniforms.viewMat.value=this.camera.matrixWorldInverse,this.poissonBlurQuad.material.uniforms.projectionMatrixInv.value=this.camera.projectionMatrixInverse,this.poissonBlurQuad.material.uniforms.viewMatrixInv.value=this.camera.matrixWorld,this.poissonBlurQuad.material.uniforms.cameraPos.value=this.camera.getWorldPosition(new i.Vector3),this.poissonBlurQuad.material.uniforms.resolution.value=this.configuration.halfRes?this._r.clone().multiplyScalar(.5).floor():this._r,this.poissonBlurQuad.material.uniforms.time.value=performance.now()/1e3,this.poissonBlurQuad.material.uniforms.blueNoise.value=this.bluenoise,this.poissonBlurQuad.material.uniforms.radius.value=this.configuration.denoiseRadius*(this.configuration.halfRes?.5:1),this.poissonBlurQuad.material.uniforms.worldRadius.value=l,this.poissonBlurQuad.material.uniforms.distanceFalloff.value=this.configuration.distanceFalloff,this.poissonBlurQuad.material.uniforms.index.value=t,this.poissonBlurQuad.material.uniforms.poissonDisk.value=this.samplesDenoise,this.poissonBlurQuad.material.uniforms.near.value=this.camera.near,this.poissonBlurQuad.material.uniforms.far.value=this.camera.far,this.poissonBlurQuad.material.uniforms.logDepth.value=e.capabilities.logarithmicDepthBuffer,this.poissonBlurQuad.material.uniforms.screenSpaceRadius.value=this.configuration.screenSpaceRadius,e.setRenderTarget(this.writeTargetInternal),this.poissonBlurQuad.render(e);e.setRenderTarget(this.accumulationRenderTarget);const s=e.autoClear;e.autoClear=!1,this.accumulationQuad.material.uniforms.tDiffuse.value=this.writeTargetInternal.texture,this.accumulationQuad.material.uniforms.frame.value=this.frame,this.accumulationQuad.render(e),e.autoClear=s}this.configuration.transparencyAware&&(this.effectCompositerQuad.material.uniforms.transparencyDWFalse.value=this.transparencyRenderTargetDWFalse.texture,this.effectCompositerQuad.material.uniforms.transparencyDWTrue.value=this.transparencyRenderTargetDWTrue.texture,this.effectCompositerQuad.material.uniforms.transparencyDWTrueDepth.value=this.transparencyRenderTargetDWTrue.depthTexture,this.effectCompositerQuad.material.uniforms.transparencyAware.value=!0),this.effectCompositerQuad.material.uniforms.sceneDiffuse.value=t.texture,this.effectCompositerQuad.material.uniforms.sceneDepth.value=this.depthTexture,this.effectCompositerQuad.material.uniforms.near.value=this.camera.near,this.effectCompositerQuad.material.uniforms.far.value=this.camera.far,this.effectCompositerQuad.material.uniforms.projectionMatrixInv.value=this.camera.projectionMatrixInverse,this.effectCompositerQuad.material.uniforms.viewMatrixInv.value=this.camera.matrixWorld,this.effectCompositerQuad.material.uniforms.logDepth.value=e.capabilities.logarithmicDepthBuffer,this.effectCompositerQuad.material.uniforms.ortho.value=this.camera.isOrthographicCamera,this.effectCompositerQuad.material.uniforms.downsampledDepth.value=this.configuration.halfRes?this.depthDownsampleTarget.textures[0]:this.depthTexture,this.effectCompositerQuad.material.uniforms.resolution.value=this._r,this.effectCompositerQuad.material.uniforms.blueNoise.value=this.bluenoise,this.effectCompositerQuad.material.uniforms.intensity.value=this.configuration.intensity,this.effectCompositerQuad.material.uniforms.renderMode.value=this.configuration.renderMode,this.effectCompositerQuad.material.uniforms.screenSpaceRadius.value=this.configuration.screenSpaceRadius,this.effectCompositerQuad.material.uniforms.radius.value=l,this.effectCompositerQuad.material.uniforms.distanceFalloff.value=this.configuration.distanceFalloff,this.effectCompositerQuad.material.uniforms.gammaCorrection.value=this.autosetGamma?this.renderToScreen:this.configuration.gammaCorrection,this.effectCompositerQuad.material.uniforms.tDiffuse.value=this.accumulationRenderTarget.texture,this.effectCompositerQuad.material.uniforms.color.value=this._c.copy(this.configuration.color).convertSRGBToLinear(),this.effectCompositerQuad.material.uniforms.colorMultiply.value=this.configuration.colorMultiply,this.effectCompositerQuad.material.uniforms.cameraPos.value=this.camera.getWorldPosition(new i.Vector3),this.effectCompositerQuad.material.uniforms.fog.value=!!this.scene.fog,this.scene.fog&&(this.scene.fog.isFog?(this.effectCompositerQuad.material.uniforms.fogExp.value=!1,this.effectCompositerQuad.material.uniforms.fogNear.value=this.scene.fog.near,this.effectCompositerQuad.material.uniforms.fogFar.value=this.scene.fog.far):this.scene.fog.isFogExp2?(this.effectCompositerQuad.material.uniforms.fogExp.value=!0,this.effectCompositerQuad.material.uniforms.fogDensity.value=this.scene.fog.density):console.error(`Unsupported fog type ${this.scene.fog.constructor.name} in SSAOPass.`)),e.setRenderTarget(this.outputTargetInternal),this.effectCompositerQuad.render(e),e.setRenderTarget(this.renderToScreen?null:s),this.copyQuad.material.uniforms.tDiffuse.value=this.outputTargetInternal.texture,this.copyQuad.render(e),this.debugMode&&(r.endQuery(o.TIME_ELAPSED_EXT),Iw(a,r,this)),e.xr.enabled=n}enableDebugMode(){this.debugMode=!0}disableDebugMode(){this.debugMode=!1}setDisplayMode(e){this.configuration.renderMode=["Combined","AO","No AO","Split","Split AO"].indexOf(e)}setQualityMode(e){"Performance"===e?(this.configuration.aoSamples=8,this.configuration.denoiseSamples=4,this.configuration.denoiseRadius=12):"Low"===e?(this.configuration.aoSamples=16,this.configuration.denoiseSamples=4,this.configuration.denoiseRadius=12):"Medium"===e?(this.configuration.aoSamples=16,this.configuration.denoiseSamples=8,this.configuration.denoiseRadius=12):"High"===e?(this.configuration.aoSamples=64,this.configuration.denoiseSamples=8,this.configuration.denoiseRadius=6):"Ultra"===e&&(this.configuration.aoSamples=64,this.configuration.denoiseSamples=16,this.configuration.denoiseRadius=6)}}Uint8Array.from(atob(Cw),(e=>e.charCodeAt(0)));const kw={useSrgbEncoding:!1,defines:{BAND_MODE:2,CHROMA_SAMPLES:4},uniforms:{tDiffuse:{value:null},baseIor:{value:.95},bandOffset:{value:.001125},jitterIntensity:{value:5},jitterOffset:{value:0}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\t\tvarying vec3 viewDir;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\tviewDir = normalize( ( modelViewMatrix * vec4( position, 1.0 ) ).xyz );\n\n\t\t}\n\n\t",fragmentShader:"\n\n\t\tvarying vec2 vUv;\n\t\tvarying vec3 viewDir;\n\t\tuniform float baseIor;\n\t\tuniform float bandOffset;\n\t\tuniform float jitterIntensity;\n\t\tuniform float jitterOffset;\n\t\tuniform sampler2D tDiffuse;\n\n\t\t#include <common>\n\n\t\tvoid main() {\n\n\t\t\tvec3 normal = vec3( ( 2.0 * vUv - vec2( 1.0 ) ), 1.0 );\n\t\t\tnormal.z = 1.0;\n\t\t\tnormal = normalize( normal );\n\n\t\t\tvec3 color;\n\n\t\t\t// if NO BANDS\n\t\t\t#if BAND_MODE == 0\n\n\t\t\tvec3 refracted = refract( vec3( 0.0, 0.0, - 1.0 ), normal, baseIor );\n\t\t\tcolor = texture2D( tDiffuse, vUv + refracted.xy ).rgb;\n\n\t\t\t// if RGB or RYGCBV BANDS\n\t\t\t#else\n\n\t\t\tfloat index, randValue, offsetValue;\n\t\t\tfloat r, g, b, r_ior, g_ior, b_ior;\n\t\t\tvec3 r_refracted, g_refracted, b_refracted;\n\t\t\tvec4 r_sample, g_sample, b_sample;\n\n\t\t\t#if BAND_MODE == 2\n\t\t\tfloat y, c, v, y_ior, c_ior, v_ior;\n\t\t\tvec3 y_refracted, c_refracted, v_refracted;\n\t\t\tvec4 y_sample, c_sample, v_sample;\n\t\t\t#endif\n\n\t\t\tfor ( int i = 0; i < CHROMA_SAMPLES; i ++ ) {\n\n\t\t\t\tindex = float( i );\n\t\t\t\trandValue = rand( sin( index + 1. ) * gl_FragCoord.xy + vec2( jitterOffset, - jitterOffset ) ) - 0.5;\n\t\t\t\toffsetValue = index / float( CHROMA_SAMPLES ) + randValue * jitterIntensity;\n\t\t\t\t#if BAND_MODE == 1\n\t\t\t\trandValue *= 2.0;\n\t\t\t\t#endif\n\n\t\t\t\t// Paper describing functions for creating yellow, cyan, and violet bands and reforming\n\t\t\t\t// them into RGB:\n\t\t\t\t// https://web.archive.org/web/20061108181225/http://home.iitk.ac.in/~shankars/reports/dispersionraytrace.pdf\n\t\t\t\tr_ior = 1.0 + bandOffset * ( 0.0 + offsetValue );\n\t\t\t\tg_ior = 1.0 + bandOffset * ( 2.0 + offsetValue );\n\t\t\t\tb_ior = 1.0 + bandOffset * ( 4.0 + offsetValue );\n\n\t\t\t\tr_refracted = refract( vec3( 0.0, 0.0, - 1.0 ), normal, baseIor / r_ior );\n\t\t\t\tg_refracted = refract( vec3( 0.0, 0.0, - 1.0 ), normal, baseIor / g_ior );\n\t\t\t\tb_refracted = refract( vec3( 0.0, 0.0, - 1.0 ), normal, baseIor / b_ior );\n\n\t\t\t\tr_sample = texture2D( tDiffuse, vUv + r_refracted.xy );\n\t\t\t\tg_sample = texture2D( tDiffuse, vUv + g_refracted.xy );\n\t\t\t\tb_sample = texture2D( tDiffuse, vUv + b_refracted.xy );\n\n\t\t\t\t#if BAND_MODE == 2\n\t\t\t\ty_ior = 1.0 + bandOffset * ( 1.0 + offsetValue );\n\t\t\t\tc_ior = 1.0 + bandOffset * ( 3.0 + offsetValue );\n\t\t\t\tv_ior = 1.0 + bandOffset * ( 5.0 + offsetValue );\n\n\t\t\t\ty_refracted = refract( vec3( 0.0, 0.0, - 1.0 ), normal, baseIor / y_ior );\n\t\t\t\tc_refracted = refract( vec3( 0.0, 0.0, - 1.0 ), normal, baseIor / c_ior );\n\t\t\t\tv_refracted = refract( vec3( 0.0, 0.0, - 1.0 ), normal, baseIor / v_ior );\n\n\t\t\t\ty_sample = texture2D( tDiffuse, vUv + y_refracted.xy );\n\t\t\t\tc_sample = texture2D( tDiffuse, vUv + c_refracted.xy );\n\t\t\t\tv_sample = texture2D( tDiffuse, vUv + v_refracted.xy );\n\n\t\t\t\tr = r_sample.r / 2.0;\n\t\t\t\ty = ( 2.0 * y_sample.r + 2.0 * y_sample.g - y_sample.b ) / 6.0;\n\t\t\t\tg = g_sample.g / 2.0;\n\t\t\t\tc = ( 2.0 * c_sample.g + 2.0 * c_sample.b - c_sample.r ) / 6.0;\n\t\t\t\tb = b_sample.b / 2.0;\n\t\t\t\tv = ( 2.0 * v_sample.b + 2.0 * v_sample.r - v_sample.g ) / 6.0;\n\n\t\t\t\tcolor.r += r + ( 2.0 * v + 2.0 * y - c ) / 3.0;\n\t\t\t\tcolor.g += g + ( 2.0 * y + 2.0 * c - v ) / 3.0;\n\t\t\t\tcolor.b += b + ( 2.0 * c + 2.0 * v - y ) / 3.0;\n\t\t\t\t#else\n\t\t\t\tcolor.r += r_sample.r;\n\t\t\t\tcolor.g += g_sample.g;\n\t\t\t\tcolor.b += b_sample.b;\n\t\t\t\t#endif\n\n\t\t\t}\n\n\t\t\tcolor /= float( CHROMA_SAMPLES );\n\n\t\t\t#endif\n\n\t\t\tgl_FragColor = vec4( color, 1.0 );\n\n\t\t}\n\n\t",onBeforeCompile(e,...t){"function"==typeof super.onBeforeCompile&&super.onBeforeCompile(e,...t),!0===this.useSrgbEncoding&&(e.fragmentShader=e.fragmentShader.replace("gl_FragColor = vec4( color, 1.0 );","gl_FragColor = LinearTosRGB(vec4( color, 1.0 ));"))}};class Bw extends my{constructor(e,t,s,n,r){e.getPixelRatio(),super(e,{stencilBuffer:!0,depthBuffer:!0,frameBufferType:i.HalfFloatType}),e.autoClear=!1,this.enabled=!1;const o=new Hy(t,s);o.name="render",o.clearPass.setClearFlags(!0,!0,!0),this.addPass(o);const a=new Ew(t,s,r.w,r.h);a.name="n8ao",a.configuration.aoRadius=5,a.configuration.distanceFalloff=1,a.configuration.transparencyAware=!0,a.configuration.intensity=5,a.configuration.aoSamples=16,a.configuration.denoiseRadius=12,a.configuration.denoiseSamples=8,a.configuration.stencil=!0,a.configuration.renderMode=0,a.configuration.color=new i.Color(0,0,0),a.configuration.screenSpaceRadius=!1,a.configuration.halfRes=!1,a.configuration.depthAwareUpsampling=!0,a.configuration.colorMultiply=!0,a.configuration.accumulate=!1,this.addPass(a);const l=new i.ShaderMaterial;Object.assign(l,kw),l.defines.CHROMA_SAMPLES=1,l.uniforms.baseIor.value=.86,l.uniforms.bandOffset.value=0,l.uniforms.jitterIntensity.value=0;const h=new jy(l);h.name="lens";const c=h.render;h.render=(e,t,...i)=>{l.uniforms.tDiffuse.value=t.texture,c.call(h,e,t,...i)},h.enabled=!1,this.addPass(h),new Vy({intensity:1,mipmapBlur:!0,luminanceSmoothing:.5,luminanceThreshold:.75,kernelSize:My}),new hw({darkness:.8,offset:.3});const d=new mw(s,new lw({preset:tw}));d.name="smaa",this.addPass(d),console.log(this.passes)}changeLut(e,t,i){switch(i=i.toLowerCase(),null!==this.lutMap&&(this.lutMap.texture&&this.lutMap.texture.dispose(),this.lutMap.texture3D&&this.lutMap.texture3D.dispose()),i){case"cube":null===this.lutCubeLoader&&(this.lutCubeLoader=new dw),this.lutMap=this.lutCubeLoader.parse(e);break;case"3dl":null===this.lut3DLoader&&(this.lut3DLoader=new cw),this.lutMap=this.lut3DLoader.parse(e)}this.setLut()}loadLut(e,t){switch(t){case"cube":null===this.lutCubeLoader&&(this.lutCubeLoader=new dw),this.lutCubeLoader.load("assets/luts/"+e+".cube",function(e){this.lutMap=e,this.setLut()}.bind(this));break;case"3dl":null===this.lut3DLoader&&(this.lut3DLoader=new cw),this.lut3DLoader.load("assets/luts/"+e+".3dl",function(e){this.lutMap=e,this.setLut()}.bind(this))}}setLut(){this.pass.lut.lut=this.isGl2?this.lutMap.texture:this.lutMap.texture3D}resize(e){this.enabled&&(this.size=e,this.setSize(this.size.w,this.size.h))}dispose(){this.enabled=!1,super.dispose()}getPass(){return this.passes}render(e){super.render(e)}}class Qw extends i.Mesh{constructor(e={}){super(),this.geometry=new i.PlaneGeometry(2,2,1,1),this.material=new i.ShaderMaterial({name:"VignetteShader",uniforms:{color:{value:new i.Color(.01,.01,.01)},darkness:{value:1},offset:{value:1.05},grain:{value:.1}},vertexShader:"\n            \n\n            varying vec2 vUv;\n            varying vec3 pos;\n\n            void main() {\n                vUv = uv;\n                pos = position;\n                gl_Position = vec4(position, 1.);\n            }\n            ",fragmentShader:"\n            #include <common>\n            #include <dithering_pars_fragment>\n\n            uniform vec3 color;\n            uniform float offset;\n            uniform float grain;\n            uniform float darkness;\n\n            varying vec2 vUv;\n            varying vec3 pos;\n\n            void main() {\n                \n                vec2 uv = ( vUv - vec2( 0.5 ) ) * vec2( offset );\n                float alpha = smoothstep( 0.0, 1.0, dot( uv, uv ) )-(1.0 - darkness);\n                gl_FragColor = vec4( color, alpha );\n\n                // film grain noise\n                if(grain!=0.0){\n                    float noise = (fract(sin(dot(uv, vec2(12.9898,78.233)*2.0)) * 43758.5453));\n                    gl_FragColor += vec4(0.0,0.0,0.0, noise * grain )*(0.5+alpha);\n                }\n\n                #include <dithering_fragment>\n                \n            }\n            ",transparent:!0,depthWrite:!1,depthTest:!1,dithering:!0}),Object.defineProperties(this,{color:{enumerable:!0,get:()=>this.material.uniforms.color.value.getHex(),set:e=>{this.material.uniforms.color.value.setHex(e)}},offset:{enumerable:!0,get:()=>this.material.uniforms.offset.value,set:e=>{this.material.uniforms.offset.value=e}},darkness:{enumerable:!0,get:()=>this.material.uniforms.darkness.value,set:e=>{this.material.uniforms.darkness.value=e}},grain:{enumerable:!0,get:()=>this.material.uniforms.grain.value,set:e=>{this.material.uniforms.grain.value=e}}}),this.frustumCulled=!1,this.renderOrder=1/0,this.matrixAutoUpdate=!1}raycast(){}dispose(){this.parent.remove(this),this.geometry.dispose(),this.material.dispose()}}class Mw extends i.Mesh{constructor(e={}){super(),this.geometry=new i.PlaneGeometry(1,1,1,1),this.settings={size:[30,30],gAlpha:!0,opacity:1},this.rotateX(-Math.PI/2),this.castShadow=!1,this.receiveShadow=!0,this.type="Reflector",this.isShow=!0;const t=this;e=e||{},this.map=e.map||null,this.color=e.color||8421504,this.reflect=void 0!==e.reflect?e.reflect:.4,this.isWater=void 0!==e.water&&e.water,this.uv=e.uv||1,this.normalScale=e.normalScale||1,this.multisample=void 0!==e.multisample?e.multisample:4,this.textureSize=e.textureSize||512,this.renderTarget=null;const s=e.clipBias||0,n=new i.Plane,r=new i.Vector3,o=new i.Vector3,a=new i.Vector3,l=new i.Matrix4,h=new i.Vector3(0,0,-1),c=new i.Vector4,d=new i.Vector3,u=new i.Vector3,p=new i.Vector4,f=new i.Matrix4,m=new i.PerspectiveCamera;this.material=new i.MeshStandardMaterial({name:"Ground",color:this.color,roughness:.8,metalness:0,opacity:1,transparent:!0,depthWrite:!1,normalMap:null,dithering:!0}),this.groundAlpha(),this.renderOrder=-1,this.material.userData={reflectif:{value:this.reflect},mirrorMap:{value:null},blackAll:{value:0}},Object.defineProperty(this.material,"reflectif",{get(){return this.userData.reflectif.value},set(e){this.userData.reflectif.value=e}}),this.textureRenderer=null,this.setTarget();const g=this;this.material.onBeforeCompile=function(e){var t=e.uniforms;t.mirrorMap=this.userData.mirrorMap,t.textureMatrix={value:f},t.reflectif=this.userData.reflectif,t.blackAll=this.userData.blackAll,e.uniforms=t;var i=e.vertexShader;i=(i=i.replace("#include <common>",["#include <common>","varying vec4 vUvR;","uniform mat4 textureMatrix;"].join("\n"))).replace("#include <uv_vertex>",["#include <uv_vertex>","vUvR = textureMatrix * vec4( position, 1.0 );"].join("\n")),e.vertexShader=i;var s=e.fragmentShader;s=(s=(s=(s=s.replace("uniform vec3 diffuse;",["uniform vec3 diffuse;","varying vec4 vUvR;","uniform float reflectif;","uniform sampler2D mirrorMap;","uniform int blackAll;"].join("\n"))).replace("#include <lights_fragment_maps>",Tw.lights_fragment_maps)).replace("#include <fog_fragment>",Tw.fog_fragment)).replace("#include <bumpmap_pars_fragment>",""),e.fragmentShader=s},this.onBeforeRender=function(e,i,A){if(!this.isShow)return;if(0===g.reflect)return;g.isWater&&(g.material.normalMap.offset.x+=5e-4,g.material.normalMap.offset.y+=25e-5);let b=e.isWebGPURenderer||!1;if(o.setFromMatrixPosition(t.matrixWorld),a.setFromMatrixPosition(A.matrixWorld),l.extractRotation(t.matrixWorld),r.set(0,0,1),r.applyMatrix4(l),d.subVectors(o,a),d.dot(r)>0)return;d.reflect(r).negate(),d.add(o),l.extractRotation(A.matrixWorld),h.set(0,0,-1),h.applyMatrix4(l),h.add(a),u.subVectors(o,h),u.reflect(r).negate(),u.add(o),m.position.copy(d),m.up.set(0,1,0),m.up.applyMatrix4(l),m.up.reflect(r),m.lookAt(u),m.far=A.far,m.updateMatrixWorld(),m.projectionMatrix.copy(A.projectionMatrix),f.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),f.multiply(m.projectionMatrix),f.multiply(m.matrixWorldInverse),f.multiply(t.matrixWorld),n.setFromNormalAndCoplanarPoint(r,o),n.applyMatrix4(m.matrixWorldInverse),c.set(n.normal.x,n.normal.y,n.normal.z,n.constant);const v=m.projectionMatrix;p.x=(Math.sign(c.x)+v.elements[8])/v.elements[0],p.y=(Math.sign(c.y)+v.elements[9])/v.elements[5],p.z=-1,p.w=(1+v.elements[10])/v.elements[14],c.multiplyScalar(2/c.dot(p)),v.elements[2]=c.x,v.elements[6]=c.y,v.elements[10]=c.z+1-s,v.elements[14]=c.w,t.visible=!1;const y=i.fog,w=e.getRenderTarget(),x=e.xr.enabled,O=e.shadowMap.autoUpdate;i.fog=null,x&&(e.xr.enabled=!1),e.setRenderTarget(t.renderTarget),b||e.state.buffers.depth.setMask(!0),!1===e.autoClear&&e.clear(),e.render(i,m),e.xr.enabled=x,e.shadowMap.autoUpdate=O,i.fog=y,e.setRenderTarget(w);const C=A.viewport;void 0!==C&&e.state.viewport(C),t.visible=!0}}reset(){this.material.map&&this.material.map.dispose(),this.material.normalMap&&this.material.normalMap.dispose(),this.material.map=null,this.material.normalMap=null}dispose(){this.onBeforeRender=function(){},this.material.map&&this.material.map.dispose(),this.material.alphaMap&&this.material.alphaMap.dispose(),this.material.normalMap&&this.material.normalMap.dispose(),this.renderTarget&&this.renderTarget.dispose(),this.parent&&this.parent.remove(this),this.geometry.dispose(),this.material.dispose()}getRenderTarget(){return this.renderTarget}setTarget(){this.renderTarget&&this.renderTarget.dispose();var e={samples:this.multisample,type:i.HalfFloatType};this.renderTarget=new i.WebGLRenderTarget(this.textureSize,this.textureSize,e),this.material.userData.mirrorMap.value=this.renderTarget.texture}setAlphaMap(e=!0){e!==this.settings.gAlpha&&(this.settings.gAlpha=e,this.material.alphaMap=e?this.alphaMap:null,e&&(this.material.alphaMap.needsUpdate=!0),this.material.needsUpdate=!0)}setSize(e=[200,200]){e!==this.settings.size&&(this.settings.size=e,this.scale.set(e[0],e[1],1))}setColor(e,t){this.color=void 0!==e?e:11039282,this.material.color.setHex(this.color)}setMapRepeat(e){this.map&&this.map.repeat.set(e,e)}setMap(e){this.map=e,this.material.map=this.map,this.material.needsUpdate=!0}setWater(e,t,s){if(void 0!==e&&(this.isWater=e),this.isWater){this.uv=30;var n=void 0!==t?t:this.uv,r=void 0!==s?s:this.normalScale;this.material.normalMap=Os.texture({url:"./assets/textures/terrain/water_n.jpg",flip:!1,repeat:[n,n]}),this.material.normalScale.set(r,r),this.material.roughness=0,this.material.metalness=0,this.material.opacity=.8,this.material.side=i.DoubleSide}else this.material.roughness=.8,this.material.metalness=0,this.material.side=i.FrontSide}setOpacity(e=1){e!==this.settings.opacity&&(this.settings.opacity=e,this.material.opacity=this.settings.opacity)}setReflect(e){this.reflect=void 0!==e?e:.35,this.material.userData.reflectif.value=this.reflect}show(e){this.isShow=e,this.visible=e}groundAlpha(){let e=document.createElement("canvas");e.width=e.height=512;let t=e.getContext("2d"),s=t.createRadialGradient(256,256,128,256,256,256);s.addColorStop(0,"white"),s.addColorStop(.2,"white"),s.addColorStop(1,"black"),t.fillStyle=s,t.fillRect(0,0,512,512);var n=new Image(512,512);n.src=e.toDataURL("image/png"),this.alphaMap=new i.Texture(n),this.material.alphaMap=this.alphaMap,n.onload=function(){this.alphaMap.needsUpdate=!0}.bind(this)}setBlack(e){this.isShow=!e,this.material.userData.blackAll.value=e?1:0}}const Tw={lights_fragment_maps:"\n\t#include <lights_fragment_maps>\n\n\tif( reflectif != 0.0 ){\n\t\tvec3 reflector = texture2DProj( mirrorMap, vUvR ).rgb;\n\n\t    //totalEmissiveRadiance.rgb = mix( totalEmissiveRadiance.rgb, totalEmissiveRadiance.rgb + reflector.rgb, reflectif );\n\t    totalEmissiveRadiance.rgb += reflector * reflectif;\n\t}\n\t",fog_fragment:"\n\t#include <fog_fragment>\n\tif( blackAll == 1 ) gl_FragColor = vec4( vec3(0.0), diffuseColor.a );\n\t"};class Dw extends i.MeshStandardMaterial{constructor(e={},t={}){e.metalness=1,e.roughness=.2,e.side=i.DoubleSide,e.envMapIntensity=1,e.normalScale=new i.Vector2(2,2),super(e),this.onBeforeCompile=function(e){var s=e.uniforms;s.insideMap={value:t.insideMap||null},s.wallFreq={value:(new i.Vector3).fromArray(t.freq||[1,1,1])},s.wallsBias={value:t.bias||.01},s.time={value:t.time||1},s.lightning={value:1},s.isNoise={value:1},s.isNoSection={value:0},e.uniforms=s;var n=e.vertexShader;n=(n=n.replace("varying vec3 vViewPosition;",Rw)).replace("#include <fog_vertex>",Pw),e.vertexShader=n;var r=e.fragmentShader;r=(r=(r=(r=r.replace("void main() {",Lw)).replace("#include <map_fragment>",Fw)).replace("#include <normal_fragment_maps>",zw)).replace("#include <emissivemap_fragment>",Uw),e.fragmentShader=r}}}const Rw="\nvarying vec3 vViewPosition;\n\nvarying mat4 invMat;\nvarying mat4 modelMatrixOn;\n\nvarying vec3 oP; // surface position in object space\nvarying vec3 oE; // position of the eye in object space\nvarying vec3 oI; // incident ray direction in object space\nvarying vec3 oN; // surface normal\n\n",Pw="\n#include <fog_vertex>\n\nmat4 modelViewMatrixInverse = inverse( modelViewMatrix );\n\n// surface position in object space\noP = position;\n\n// position of the eye in object space\noE = modelViewMatrixInverse[3].xyz;\n\n// incident ray direction in object space\noI = oP - oE;\n\n// surface normal\noN = normalize( vec3( normal ) );\n\n",Lw="\n\nvarying vec3 oP; // surface position in object space\nvarying vec3 oE; // position of the eye in object space\nvarying vec3 oI; // incident ray direction in object space\nvarying vec3 oN; // surface normal\n\nuniform sampler2D insideMap;\nuniform vec3 wallFreq;\nuniform float wallsBias;\n\nuniform float time;\nuniform float lightning;\nuniform bool isNoise;\nuniform bool isNoSection;\n\nfloat randomized( vec2 co ){\n    return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec2 tileUV( vec2 uv, vec2 pos, vec2 ntile ){\n\n\tpos.y = ntile.y-pos.y-1.0;\n\tvec2 div = 1.0/ntile;\n\tvec2 v = vec2(uv*div)+(pos*div);\n\treturn v;\n\t\n}\n\nvoid main() {\n\n",Fw="\n\n#ifdef USE_MAP\n\n\t//vec4 texelColor = texture2D( map, vUv );\n\n\t//texelColor = mapTexelToLinear( texelColor );\n\t//diffuseColor *= texelColor;\n\n\nvec3 wallFrequencies = wallFreq - wallsBias;\n\n// calculate wall locations\nvec3 wallFrame = floor( oP * wallFrequencies);\nvec3 walls = ( wallFrame + step( vec3( 0.0 ), oI )) / wallFrequencies;\n\n// how much of the ray is needed to get from the oE to each of the walls\n\nvec3 rayFractions = ( walls - oE ) / oI;\n\n// texture-coordinates of intersections\nvec2 uvXY = fract((oE + rayFractions.z * oI).xy * wallFrequencies.xy);\nvec2 uvXZ = fract((oE + rayFractions.y * oI).xz * wallFrequencies.xz);\nvec2 uvZY = fract((oE + rayFractions.x * oI).zy * wallFrequencies.zy);\n\nvec2 nuv = vec2( 2.0, 4.0 );\n\n// floor / ceiling  \n\nvec4 tmp_color_1 = texture2D( insideMap, tileUV( uvXZ, vec2(1.0,0.0), nuv ) );// floor\nvec4 tmp_color_2 = texture2D( insideMap, tileUV( uvXZ, vec2(0.0,0.0), nuv ) );// ceilling\nvec4 verticalColour = mix( tmp_color_1, tmp_color_2, step(0.0, oI.y));\n\ntmp_color_1 = texture2D( insideMap, tileUV( uvXY, vec2(0.0,2.0), nuv ) ); // back\ntmp_color_2 = texture2D( insideMap, tileUV( uvXY, vec2(1.0,2.0), nuv ) ); // front\nvec4 wallXYColour = mix( tmp_color_1, tmp_color_2, step(oI.z, 0.0));\n\ntmp_color_1 = texture2D( insideMap, tileUV( uvZY, vec2(0.0,3.0), nuv ) ); // left\ntmp_color_2 = texture2D( insideMap, tileUV( uvZY, vec2(1.0,3.0), nuv ) ); // right\nvec4 wallZYColour = mix( tmp_color_1, tmp_color_2, step(oI.x, 0.0) );\n\n// add some noise\n\nvec4 noiseColor = vec4( 0.0 );\n\nif( isNoise ){\n\tfloat t = time*0.00000001;\n\tnoiseColor.xyz = vec3( vec3( randomized(wallFrame.xy+t) ) + vec3( randomized(wallFrame.zy) ) + vec3( randomized(wallFrame.xz+t)) ) / 3.0;\n\twallXYColour *= noiseColor;\n    wallZYColour *= noiseColor;\n    verticalColour *= noiseColor;\n}\n\n// intersect walls\n\nvec4 insideColor = vec4(0.0);\nif( isNoSection ){\n\t//insideColor = ( wallXYColour + wallZYColour + verticalColour ) / 3.0;\n\t///insideColor.a = alph;\n\n\tinsideColor = mix( wallXYColour, wallZYColour, step(wallXYColour.a, wallZYColour.a) );\n\tinsideColor = mix( insideColor, verticalColour, step(insideColor.a, verticalColour.a)  );\n\t//insideColor = verticalColour;\n\t//insideColor = mix( insideColor, verticalColour, insideColor.a );\n\n} else {\n\n    float xVSz = step( rayFractions.x, rayFractions.z );\n\tinsideColor = mix( wallXYColour, wallZYColour, xVSz );\n\n\tfloat rayFraction_xVSz = mix( rayFractions.z, rayFractions.x, xVSz );\n\tfloat xzVSy = step( rayFraction_xVSz, rayFractions.y );\n\tinsideColor = mix( verticalColour, insideColor, xzVSy );\n\n}\n\n\n\n// exterior\n\nvec2 nuvo = vec2( 2.0, 4.0 );// texture reapeat\n\nvec4 Ftop = texture2D( map, tileUV( fract( oP.xz * wallFrequencies.xz ) , vec2(1.0,2.0), nuv ) );\nvec4 Fleft = texture2D( map, tileUV( fract( oP.zy * wallFrequencies.zy ) , vec2(1.0,1.0), nuv ) );\nvec4 Ffront = texture2D( map, tileUV( fract( oP.xy * wallFrequencies.xy ) , vec2(0.0,0.0), nuv ) );\n\nfloat n = abs(oN.z) > abs(oN.x) ? 1.0 : 0.0;\nfloat ny = abs(oN.y) > ( abs(oN.x) + abs(oN.z) * 0.5 ) ? 1.0 : 0.0;\n\nvec4 outsideColor =  mix( Fleft, Ffront, n );\n//outsideColor =  mix( outsideColor, Ftop, ny );\n\n\n//vec4 building_color = mapTexelToLinear(vec4( mix( insideColor, outsideColor, outsideColor.a ).xyz, 1.0));\nvec4 building_color = mapTexelToLinear( mix( insideColor, outsideColor, outsideColor.a ));\n\n//if(building_color.a < 0.01) discard;\n\ndiffuseColor *= building_color;\n\n#endif\n\n\n",Uw="\nvec4 emissiveColor = vec4( mix( insideColor, vec4(0.0, 0.0, 0.0, 1.0), outsideColor.a ).xyz, 1.0);\n//emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor.rgb );\ntotalEmissiveRadiance = emissiveColor.xyz*lightning*noiseColor.xyz;\n",zw="\n#ifdef USE_NORMALMAP\n\nvec3 nWallFrequencies = wallFreq - wallsBias;\nvec2 nuvn = vec2( 2.0, 4.0 );\nvec3 Ntop = texture2D( normalMap, tileUV( fract( oP.xz * nWallFrequencies.xz ) , vec2(1.0,2.0), nuvn ) ).rgb;\nvec3 Nleft = texture2D( normalMap, tileUV( fract( oP.zy * nWallFrequencies.zy ) , vec2(1.0,1.0), nuvn ) ).rgb;\nvec3 Nfront = texture2D( normalMap, tileUV( fract( oP.xy * nWallFrequencies.xy ) , vec2(0.0,0.0), nuvn ) ).rgb;\n\nfloat nn = abs(oN.z) > abs(oN.x) ? 1.0 : 0.0;\nfloat nny = abs(oN.y) > ( abs(oN.x) + abs(oN.z) * 0.5 ) ? 1.0 : 0.0;\n\nvec3 tmpNormal =  mix( Nleft, Nfront, nn );\n//tmpNormal =  mix( tmpNormal, Ntop, nny );\ntmpNormal = tmpNormal * 2.0 - 1.0;\n\n\nvec3 eye_pos = -vViewPosition;\nvec3 surf_norm = normal;\n\nvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\nvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\nvec2 st0 = dFdx( vUv.st );\nvec2 st1 = dFdy( vUv.st );\n\nfloat scale = sign( st1.t * st0.s - st0.t * st1.s ); // we do not care about the magnitude\n\nvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\nvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\nvec3 N = normalize( surf_norm );\nmat3 tsn = mat3( S, T, N );\n\nvec3 mapN = tmpNormal;//texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\nmapN.xy *= normalScale;\nmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\nnormal = normalize( tsn * mapN );\n\n#endif\n",Gw=new i.Triangle,Nw=new i.Vector3,Vw=new i.Vector2,jw=new i.Vector2,Hw=new i.Vector2;class qw{constructor(e){this.geometry=e.geometry,this.randomFunction=Math.random,this.indexAttribute=this.geometry.index,this.positionAttribute=this.geometry.getAttribute("position"),this.normalAttribute=this.geometry.getAttribute("normal"),this.colorAttribute=this.geometry.getAttribute("color"),this.uvAttribute=this.geometry.getAttribute("uv"),this.weightAttribute=null,this.distribution=null}setWeightAttribute(e){return this.weightAttribute=e?this.geometry.getAttribute(e):null,this}build(){const e=this.indexAttribute,t=this.positionAttribute,i=this.weightAttribute,s=e?e.count/3:t.count/3,n=new Float32Array(s);for(let r=0;r<s;r++){let s=1,o=3*r,a=3*r+1,l=3*r+2;e&&(o=e.getX(o),a=e.getX(a),l=e.getX(l)),i&&(s=i.getX(o)+i.getX(a)+i.getX(l)),Gw.a.fromBufferAttribute(t,o),Gw.b.fromBufferAttribute(t,a),Gw.c.fromBufferAttribute(t,l),s*=Gw.getArea(),n[r]=s}const r=new Float32Array(s);let o=0;for(let e=0;e<s;e++)o+=n[e],r[e]=o;return this.distribution=r,this}setRandomGenerator(e){return this.randomFunction=e,this}sample(e,t,i,s){const n=this.sampleFaceIndex();return this.sampleFace(n,e,t,i,s)}sampleFaceIndex(){const e=this.distribution[this.distribution.length-1];return this.binarySearch(this.randomFunction()*e)}binarySearch(e){const t=this.distribution;let i=0,s=t.length-1,n=-1;for(;i<=s;){const r=Math.ceil((i+s)/2);if(0===r||t[r-1]<=e&&t[r]>e){n=r;break}e<t[r]?s=r-1:i=r+1}return n}sampleFace(e,t,i,s,n){let r=this.randomFunction(),o=this.randomFunction();r+o>1&&(r=1-r,o=1-o);const a=this.indexAttribute;let l=3*e,h=3*e+1,c=3*e+2;return a&&(l=a.getX(l),h=a.getX(h),c=a.getX(c)),Gw.a.fromBufferAttribute(this.positionAttribute,l),Gw.b.fromBufferAttribute(this.positionAttribute,h),Gw.c.fromBufferAttribute(this.positionAttribute,c),t.set(0,0,0).addScaledVector(Gw.a,r).addScaledVector(Gw.b,o).addScaledVector(Gw.c,1-(r+o)),void 0!==i&&(void 0!==this.normalAttribute?(Gw.a.fromBufferAttribute(this.normalAttribute,l),Gw.b.fromBufferAttribute(this.normalAttribute,h),Gw.c.fromBufferAttribute(this.normalAttribute,c),i.set(0,0,0).addScaledVector(Gw.a,r).addScaledVector(Gw.b,o).addScaledVector(Gw.c,1-(r+o)).normalize()):Gw.getNormal(i)),void 0!==s&&void 0!==this.colorAttribute&&(Gw.a.fromBufferAttribute(this.colorAttribute,l),Gw.b.fromBufferAttribute(this.colorAttribute,h),Gw.c.fromBufferAttribute(this.colorAttribute,c),Nw.set(0,0,0).addScaledVector(Gw.a,r).addScaledVector(Gw.b,o).addScaledVector(Gw.c,1-(r+o)),s.r=Nw.x,s.g=Nw.y,s.b=Nw.z),void 0!==n&&void 0!==this.uvAttribute&&(Vw.fromBufferAttribute(this.uvAttribute,l),jw.fromBufferAttribute(this.uvAttribute,h),Hw.fromBufferAttribute(this.uvAttribute,c),n.set(0,0).addScaledVector(Vw,r).addScaledVector(jw,o).addScaledVector(Hw,1-(r+o))),this}}class Xw extends i.Points{constructor(e={}){super(),this.num=e.num||12,this.controler=e.controler||null,this.sampler=new qw(new i.Mesh((new i.BoxGeometry).toNonIndexed())),this.v=new i.Vector3,this.objectList=e.objectList,this.lng=this.objectList.length,this.numParticle=this.lng*this.num,this.range=e.range||[2,2,2],this.speed=e.speed||[.002,.001],this.disp=e.disp||[.5,.5,.5];let t=new i.Color;this.velocities=[],this.pos=[];let s=[],n=[],r=[],o=[],a=[];this.tt=[];let l,h,c,d=this.numParticle;for(;d--;)o.push(0,0,0),a.push(1,1,1),n.push(ge.rand(.2,1.5)),s.push(ge.rand(0,1)),r.push(0),this.tt.push(ge.randInt(-300,1));for(d=this.lng;d--;)for(this.setSamplerGeometry(this.objectList[d].children[0].geometry),c=this.objectList[d].children[0].material.color,l=this.num;l--;)h=3*(d*this.num+l),this.v.set(ge.rand(-5,5),ge.rand(-5,5),ge.rand(-5,5)),this.sampler.sample(this.v),this.v.toArray(this.pos,h),t.copy(c),a[h]=c.r,a[h+1]=c.g,a[h+2]=c.b;this.positions=new Float32Array(o),this.angles=new Float32Array(r),this.alphas=new Float32Array(s),this.sizes=new Float32Array(n),this.geometry.setAttribute("position",new i.BufferAttribute(this.positions,3)),this.geometry.setAttribute("color",new i.BufferAttribute(new Float32Array(a),3)),this.geometry.setAttribute("sizer",new i.BufferAttribute(this.sizes,1)),this.geometry.setAttribute("alphas",new i.BufferAttribute(this.alphas,1)),this.geometry.setAttribute("angles",new i.BufferAttribute(this.angles,1)),this.texture=this.makeTexture(),this.material=new i.PointsMaterial({name:"snow",size:1,color:16777215,vertexColors:!0,map:this.texture,blending:i.AdditiveBlending,transparent:!0,fog:!1,depthWrite:!1,premultipliedAlpha:!0,alphaToCoverage:!0}),this.material.onBeforeCompile=function(e){var t=e.vertexShader;t=(t=t.replace("#include <clipping_planes_pars_vertex>",Ww)).replace("#include <fog_vertex>",Zw),e.vertexShader=t;var i=e.fragmentShader;i=(i=(i=i.replace("#include <clipping_planes_pars_fragment>",Yw)).replace("#include <output_fragment>","#include <output_fragment>"+_w)).replace("#include <map_particle_fragment>",Kw),e.fragmentShader=i},this.mTime=0,this.castShadow=!1,this.receiveShadow=!1}setSamplerGeometry(e){this.sampler.geometry.dispose(),this.sampler.geometry=e.clone().toNonIndexed(),this.sampler.positionAttribute=this.sampler.geometry.getAttribute("position"),this.sampler.build()}makeTexture(){let e=document.createElement("canvas"),t=e.getContext("2d"),s=64;e.width=s,e.height=s;let n=32,r=t.createRadialGradient(n,n,0,n,n,n);r.addColorStop(0,"rgba(255,255,255,0.4)"),r.addColorStop(.5,"rgba(255,255,255,0.2)"),r.addColorStop(1,"rgba(255,255,255,0)"),t.fillStyle=r,t.fillRect(0,0,s,s),r=t.createRadialGradient(n,n,0,n,n,n),r.addColorStop(0,"rgba(255,255,255,1.0)"),r.addColorStop(.5,"rgba(255,255,255,0.5)"),r.addColorStop(1,"rgba(255,255,255,0)"),t.strokeStyle=r,t.beginPath(),t.moveTo(0,n),t.lineTo(s,n),t.lineWidth=2,t.stroke(),t.beginPath(),t.moveTo(n,0),t.lineTo(n,s),t.lineWidth=2,t.stroke(),r=t.createRadialGradient(n,n,0,n,n,n),r.addColorStop(0,"rgba(255,255,255,0.4)"),r.addColorStop(.5,"rgba(255,255,255,0.2)"),r.addColorStop(1,"rgba(255,255,255,0)"),t.strokeStyle=r,t.beginPath(),t.moveTo(0,0),t.lineTo(s,s),t.lineWidth=1,t.stroke(),t.beginPath(),t.moveTo(s,0),t.lineTo(0,s),t.lineWidth=1,t.stroke();var o=new i.Texture(e);return o.colorSpace=i.SRGBColorSpace,o.needsUpdate=!0,o}updateMatrixWorld(e){let t=.01666,i=this.v;this.mTime+=t;let s=0;this.controler&&(s=this.controler.getAzimuthalAngle());let n,r,o,a,l,h,c=this.lng;for(;c--;)for(r=this.objectList[c].position,a=this.objectList[c].quaternion,n=this.num;n--;)o=c*this.num+n,l=this.alphas[o],h=this.tt[o],0===h?(l+=.1*t,l>.5&&(h=1)):1===h?(l-=.1*t,l<0&&(h=ge.randInt(-300,0),this.sizes[o]=ge.rand(.2,1.5))):h++,this.alphas[o]=ge.clamp(l,0,1),this.tt[o]=h,this.angles[o]=-s,this.alphas[o]>1&&(this.alphas[o]=ge.rand(-5,0)),o*=3,i.fromArray(this.pos,o).applyQuaternion(a).add(r),i.toArray(this.positions,o);this.geometry.attributes.position.needsUpdate=!0,this.geometry.attributes.alphas.needsUpdate=!0,this.geometry.attributes.angles.needsUpdate=!0,this.geometry.attributes.sizer.needsUpdate=!0}dispose(){this.parent.remove(this),this.geometry.dispose(),this.material.map.dispose(),this.material.dispose()}raycast(e,t){}}const Ww="\n#include <clipping_planes_pars_vertex>\n\nattribute float sizer;\nattribute float alphas;\nattribute float angles;\n\nvarying float aaa;\nvarying float ang;\n",Zw="\n#include <fog_vertex>\n\naaa = alphas;\nang = angles;\n\ngl_PointSize *= sizer;\n\n",Yw="\n#include <clipping_planes_pars_fragment>\n\nvarying float aaa;\nvarying float ang;\n\nvec2 rotUV(vec2 uv, float angle){\n    float s = sin(angle);\n    float c = cos(angle);\n    mat2 r = mat2( c, -s, s, c);\n    r *= 0.5; r += 0.5; r = r * 2.0 - 1.0;\n    uv -= 0.5; uv = uv * r; uv += 0.5;\n    return uv;\n}\n",_w="\n\ngl_FragColor.a *= aaa;\n\n//gl_FragColor = vec4( outgoingLight, diffuseColor.a * aaa  );\n//gl_FragColor = vec4( outgoingLight, aaa );\n\n",Kw="\n#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\n#endif\n\n#ifdef USE_MAP\n\n\tvec4 mapTexel = texture2D( map, rotUV( uv, ang ) );\n\tdiffuseColor *= mapTexel;\n\n#endif\n\n#ifdef USE_ALPHAMAP\n\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n\n#endif\n";class Jw extends i.Mesh{constructor(e={}){super(),e=null==e?{}:e,this.radius=void 0!==e.radius?e.radius:100,this.resolution=void 0!==e.resolution?e.resolution:10,this.data={level:e.level||[1,.25],frequency:e.frequency||[.1,.5],expo:e.expo||2,height:e.height||4},this.uvx=e.uv||[2,2];let t=["cliff","crater","desert","ice","plate","rock","rock2","mud","snow"];const s=t[ge.randInt(0,t.length-1)];this.m1=Os.texture({url:"./assets/textures/terrain/"+s+"_c.jpg",flip:!1,repeat:this.uvx,encoding:!0}),this.m2=Os.texture({url:"./assets/textures/terrain/"+s+"_n.jpg",flip:!1,repeat:this.uvx}),this.material=new i.MeshStandardMaterial({name:"planet",vertexColors:!0,map:this.m1,normalMap:this.m2,normalScale:new i.Vector2(1,1),roughness:.6,metalness:.5}),this.makeGeometry(),this.name=e.name||"planet",this.castShadow=!0,this.receiveShadow=!0}makeGeometry(){this.geometry=new i.BoxGeometry(1,1,1,this.resolution,this.resolution,this.resolution),this.lng=this.geometry.attributes.position.count,this.colors=new Float32Array(3*this.lng),this.geometry.setAttribute("color",new i.BufferAttribute(this.colors,3));var e,t=this.lng,s=new i.Vector3;for(this.vertices=this.geometry.attributes.position.array,this.s=[];t--;)e=3*t,s.set(this.vertices[e],this.vertices[e+1],this.vertices[e+2]).normalize().multiplyScalar(this.radius),this.s.push(s.x,s.y,s.z);this.update()}update(){for(var e,t,s,n=this.lng,r=new i.Vector3;n--;)s=3*n,r.set(this.s[s],this.s[s+1],this.s[s+2]),e=ge.noise(r,this.data),e=(e=(e=Math.pow(e,this.data.expo))>1?1:e)<0?0:e,r.normalize().multiplyScalar(e*this.data.height),this.vertices[s]=this.s[s]+r.x,this.vertices[s+1]=this.s[s+1]+r.y,this.vertices[s+2]=this.s[s+2]+r.z,t=.75*e+.25,this.colors[s]=t,this.colors[s+1]=t,this.colors[s+2]=t;this.geometry.attributes.position.needsUpdate=!0,this.geometry.attributes.color.needsUpdate=!0,this.geometry.computeVertexNormals(),ge.resetPerlin()}dispose(){this.geometry.dispose(),this.material.dispose()}}class $w extends i.MeshPhysicalMaterial{constructor(e={},t={}){e.metalness=0,e.roughness=0,e.clearcoat=1,e.iridescenceIOR=2.33,e.iridescence=1,e.reflectivity=1,e.envMapIntensity=1.3,super(e),this.normal=this.cubeNormal(t),this.onBeforeCompile=function(t){var s=t.uniforms;s.normalCube={value:this.normal.texture},s.bDebugBounces={value:0},s.mFresnelBias={value:.02},s.mFresnelScale={value:.1},s.mFresnelPower={value:1},s.aberration={value:.012},s.refraction={value:2.417},s.normalOffset={value:0},s.squashFactor={value:.98},s.distanceOffset={value:0},s.geometryFactor={value:.28},s.absorbption={value:new i.Color(0,0,0)},s.correction={value:new i.Color(e.color||16777215)},s.boost={value:new i.Color(.892,.892,.98595025)},s.radius={value:1.5},s.centreOffset={value:new i.Vector3(0,0,0)},t.uniforms=s;var n=t.vertexShader;n=(n=n.replace("varying vec3 vViewPosition;",ex)).replace("#include <fog_vertex>",tx),t.vertexShader=n;var r=t.fragmentShader;r=(r=r.replace("void main() {",sx)).replace("#include <opaque_fragment>","#include <opaque_fragment>"+ix),t.fragmentShader=r}}cubeNormal(e={}){let t=new i.WebGLCubeRenderTarget(1024,{format:i.RGBAFormat}),s=new i.CubeCamera(.01,10,t),n=new i.Scene;n.add(s);let r=new i.ShaderMaterial({vertexShader:["varying vec3 vNormalm;","void main() {","vNormalm = normal;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["varying vec3 vNormalm;","void main() {","vec3 color = normalize(vNormalm);","color = color * 0.5 + 0.5;","gl_FragColor = vec4( color.xyz, 1.0 );","}"].join("\n"),side:i.BackSide}),o=new i.Mesh(e.geometry,r);return o.scale.set(10,10,10),o.frustumCulled=!1,o.geometry.center(),n.add(o),s.update(window.renderer,n),n.remove(o),n.remove(s),o.material.dispose(),o.geometry.dispose(),t}dispose(){this.normal.dispose(),this.dispatchEvent({type:"dispose"})}}const ex="\nvarying vec3 vViewPosition;\n\nvarying mat4 invMat;\nvarying mat4 modelMatrixOn;\n\nvarying vec3 worldNormal;\nvarying vec3 vecPos;\n//varying vec3 vEye;\nvarying vec3 vI;\n",tx="\n#include <fog_vertex>\n\nmodelMatrixOn = modelMatrix;\ninvMat = inverse( modelMatrix );\nvecPos = worldPosition.xyz;//(modelMatrix * vec4(position, 1.0 )).xyz;\n//worldNormal = (modelMatrix * vec4(normal,0.0)).xyz;\nworldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n//vEye = normalize(-cameraPosition);\nvI = normalize( worldPosition.xyz - cameraPosition );//vecPos - cameraPosition;\n\n",ix="\n#ifdef USE_ENVMAP\nfloat vReflectionFactor = mFresnelBias + mFresnelScale * pow( abs((1.0 + dot( normalize( vI ), vNormal ))), mFresnelPower );\n\nvec3 refractedColor = traceRayTest( vecPos, vI, normalize( worldNormal ) );\n\nvec3 finalColor = mix( refractedColor, refractedColor*outgoingLight, clamp( vReflectionFactor, 0.0, 1.0 ) );\n//vec3 finalColor = outgoingLight * refractedColor;\ngl_FragColor = vec4( finalColor, diffuseColor.a);\n//reflectedColor.rgb = textureCube( envMap, vec3( -vReflect.x, vReflect.yz ) ).rgb;\n#endif\n\n",sx="\n\n#define RAY_BOUNCES 5\n\nvarying mat4 invMat;\nvarying mat4 modelMatrixOn;\nvarying vec3 worldNormal;\nvarying vec3 vecPos;\n//varying vec3 vEye;\nvarying vec3 vI;\n\nuniform samplerCube normalCube;\nuniform bool bDebugBounces;\n\nuniform float mFresnelBias;\nuniform float mFresnelScale;\nuniform float mFresnelPower;\n\nuniform float refraction;\nuniform float aberration;\n\nuniform float normalOffset;\nuniform float squashFactor;\nuniform float distanceOffset;\nuniform float geometryFactor;\n\nuniform vec3 absorbption;\nuniform vec3 correction;\nuniform vec3 boost;\n\nuniform float radius;\nuniform vec3 centreOffset;\n\n#ifdef USE_ENVMAP\n\nvec3 BRDF_Specular_GGX_EnvironmentTest( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n    float dotNV = abs( dot( normal, viewDir ) );\n    const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n    const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n    vec4 r = roughness * c0 + c1; \n    float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n    vec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n    return specularColor * AB.x + AB.y;\n}\n\nvec4 SampleSpecularReflectionTest( vec4 specularColor, vec3 direction ) {\n    direction.x *= -1.0;\n    direction.z *= -1.0;\n    vec4 sampleColorRGB = envMapIntensity * textureCubeUV( envMap, direction, 0.0 );\n    sampleColorRGB = clamp( sampleColorRGB, 0.0, 1.0);\n    return sampleColorRGB;\n}\n\nvec4 SampleSpecularContributionTest( vec4 specularColor, vec3 direction ) { \n    direction = normalize(direction);\n    direction.x *= -1.0; \n    direction.z *= -1.0;\n    vec4 sampleColorRGB = envMapIntensity * textureCubeUV( envMap, direction, 0.0 );\n\n    //sampleColorRGB.a = 1.0;\n\n    sampleColorRGB = clamp( sampleColorRGB, 0.0, 1.0);\n    return sampleColorRGB;\n}\n\nvec3 intersectSphereTest( vec3 origin, vec3 direction ) {\n    origin -= centreOffset;\n    direction.y /= squashFactor;\n    float A = dot(direction, direction);\n    float B = 2.0*dot(origin, direction);\n    float C = dot(origin, origin) - radius * radius;\n    float disc = B*B - 4.0 * A * C;\n    if(disc > 0.0){ \n        disc = sqrt(disc);\n        float t1 = (-B + disc)*geometryFactor/A;\n        float t2 = (-B - disc)*geometryFactor/A;\n        float t = (t1 > t2) ? t1 : t2;\n        direction.y *= squashFactor;\n        return vec3(origin + centreOffset + direction * t);\n     }\n     return vec3(0.0); \n}\n\nvec3 debugBounces( int count ) { \n    vec3 color = vec3(1.,1.,1.);\n    if(count == 1) color = vec3(0.0,1.0,0.0);\n    else if(count == 2) color = vec3(0.0,0.0,1.0);\n    else if(count == 3) color = vec3(1.0,1.0,0.0);\n    else if(count == 4) color = vec3(0.0,1.0,1.0);\n    else color = vec3(0.0,1.0,0.0); \n    if(count == 0) color = vec3(1.0,0.0,0.0);\n    return color;\n}\n\nvec3 traceRayTest( vec3 origin, vec3 direction, vec3 normal ) { \n\n    mat4 invModelMat = invMat;\n\n    vec3 outColor = vec3(0.0); \n    // Reflect/Refract ray entering the diamond \n    const float n1 = 1.0; \n    const float epsilon = 1e-8;\n    float f0 = (2.4- n1)/(2.4 + n1);\n    f0 *= f0;\n    vec3 attenuationFactor = vec3(1.0);\n    vec3 newDirection = refract( direction, normal, n1/refraction ); \n    vec3 reflectedDirection = reflect(direction, normal);\n    vec3 brdfReflected = BRDF_Specular_GGX_EnvironmentTest(reflectedDirection, normal, vec3(f0), 0.0);\n    vec3 brdfRefracted = BRDF_Specular_GGX_EnvironmentTest(newDirection, -normal, vec3(f0), 0.0);\n    attenuationFactor *= ( vec3(1.0) - brdfRefracted);\n    outColor += SampleSpecularReflectionTest(vec4(1.0), reflectedDirection ).rgb * brdfReflected;\n    int count = 0;\n\n    newDirection = (invModelMat * vec4(newDirection, 0.0)).xyz; \n    newDirection = normalize(newDirection);\n    origin = (invModelMat * vec4(origin, 1.0)).xyz;\n\n    // ray bounces \n    for( int i=0; i<RAY_BOUNCES; i++) { \n\n        vec3 intersectedPos = intersectSphereTest(origin + vec3(epsilon), newDirection);\n        vec3 dist = intersectedPos - origin;\n        vec3 d = normalize(intersectedPos - centreOffset);\n        vec3 mappedNormal = textureCube( normalCube, d ).xyz;\n\n        //vec3 mappedNormal = normalize( vNormal ) * -1.0;\n\n\n        mappedNormal = 2. * mappedNormal - 1.0;\n        //mappedNormal.y += normalOffset;\n        mappedNormal = normalize(mappedNormal);\n        dist = (modelMatrixOn * vec4(dist, 1.)).xyz;\n        float r = sqrt(dot(dist, dist));\n        attenuationFactor *= exp(-r*absorbption);\n        // refract the ray at first intersection \n        vec3 oldOrigin = origin;\n        origin = intersectedPos - normalize(intersectedPos - centreOffset) * distanceOffset;\n        vec3 oldDir = newDirection;\n        newDirection = refract(newDirection, mappedNormal, refraction/n1);\n         \n        if( dot(newDirection, newDirection) == 0.0) { // Total Internal Reflection. Continue inside the diamond\n            newDirection = reflect(oldDir, mappedNormal);\n             //If the ray got trapped even after max iterations, simply sample along the outgoing refraction!\n            if( i == RAY_BOUNCES-1 ) {\n                vec3 brdfReflected = BRDF_Specular_GGX_EnvironmentTest(-oldDir, mappedNormal, vec3(f0), 0.0);\n                vec3 d1 = (modelMatrixOn * vec4(oldDir, 0.0)).xyz;\n                outColor += SampleSpecularContributionTest( vec4(1.0), d1 ).rgb * correction * attenuationFactor  * boost * (vec3(1.0) - brdfReflected);\n                //outColor = vec3(1.,0.,0.);\n                //if(d1.y > 0.95) outColor += d1.y * vec3(1.,0.,0) * attenuationFactor * (vec3(1.0) - brdfReflected) * boost;\n            } \n        \n        } else { // Add the contribution from outgoing ray, and continue the reflected ray inside the diamond \n           vec3 brdfRefracted = BRDF_Specular_GGX_EnvironmentTest(newDirection, -mappedNormal, vec3(f0), 0.0);\n           // outgoing(refracted) ray's contribution\n           vec3 d1 = (modelMatrixOn * vec4(newDirection, 0.0)).xyz;\n           vec3 colorG = SampleSpecularContributionTest(vec4(1.0), d1 ).rgb * ( vec3(1.0) - brdfRefracted);\n           vec3 dir1 = refract(oldDir, mappedNormal, (refraction+aberration)/n1);\n           vec3 dir2 = refract(oldDir, mappedNormal, (refraction-aberration)/n1);\n           vec3 d2 = (modelMatrixOn * vec4(dir1, 0.0)).xyz;\n           vec3 d3 = (modelMatrixOn * vec4(dir2, 0.0)).xyz;\n           vec3 colorR = SampleSpecularContributionTest(vec4(1.0), d2 ).rgb * ( vec3(1.0) - brdfRefracted);\n           vec3 colorB = SampleSpecularContributionTest(vec4(1.0), d3 ).rgb * ( vec3(1.0) - brdfRefracted);\n           outColor += vec3(colorR.r, colorG.g, colorB.b) * correction * attenuationFactor * boost;\n           //outColor = oldDir;\n           //new reflected ray inside the diamond\n           newDirection = reflect(oldDir, mappedNormal);\n           vec3 brdfReflected = BRDF_Specular_GGX_EnvironmentTest(newDirection, mappedNormal, vec3(f0), 0.0);\n           attenuationFactor *= brdfReflected * boost;\n           count++;\n        } \n    }\n    if(bDebugBounces) outColor = debugBounces(count); \n    //outColor = (textureCube( tCubeMapNormals, direction )).rgb;\n    //outColor = texture2D( sphereMap, vUv ).rgb\n\n    return outColor;\n    \n}\n#endif\nvoid main() {\n\n";class nx extends i.MeshPhysicalMaterial{constructor(e={},t={}){e.metalness=.5,e.roughness=0,e.clearcoat=1,e.side=i.DoubleSide,e.envMapIntensity=1.2,e.reflectivity=1,e.transparent=!0,e.opacity=.7,e.alphaToCoverage=!0,e.sheenColor=16777215,e.sheen=.5;let s=e.fillAmount||-.5;delete e.fillAmount,super(e),this.fillAmount=s,this.isModif=!1,this.modif(e)}modif(e){if(this.isModif)return;let t=this;this.fillAmount,this.onBeforeCompile=function(e){let s=e.uniforms;s.time={value:0},s.fillAmount={value:-.5},s.topColor={value:new i.Vector4(1,0,0,.7)},s.rimColor={value:new i.Vector4(0,1,0,.5)},s.foamColor={value:new i.Vector4(1,1,1,.9)},s.tint={value:new i.Vector4(1,1,0,.8)},s.rim={value:.1},s.rimPower={value:.5},s.Line={value:.01},s.LineSmooth={value:.1},e.uniforms=s;var n=e.vertexShader;n=(n=(n=rx+n).replace("#include <color_vertex>",ox)).replace("#include <worldpos_vertex>",ax),e.vertexShader=n;var r=e.fragmentShader;r=(r=lx+r).replace("#include <color_fragment>",hx),e.fragmentShader=r,t.userData.shader=e},this.isModif=!0}dispose(){this.dispatchEvent({type:"dispose"})}}const rx="\nuniform float time;\nuniform float fillAmount;\n\n#define PII 3.1415926538\n\nvarying vec3 fillPosition;\nvarying vec4 vvWorldPosition;\n\nvec4 RotateAroundYInDegrees(vec4 vertex, float degrees)\n{\n   float alpha = degrees * PII / 180.0;\n   float sina = sin(alpha);\n   float cosa = cos(alpha);\n   mat2 m = mat2(cosa, sina, -sina, cosa);\n   return vec4(vertex.yz , m * vertex.xz).xzyw ;                \n}\n\nvec3 RotateAround(vec3 In, vec3 Axis, float degrees )\n{\n    float alpha = degrees * PII / 180.0;\n    float s = sin(alpha);\n    float c = cos(alpha);\n    float one_minus_c = 1.0 - c;\n            \n    mat3 rot_mat = mat3(\n        one_minus_c * Axis.x * Axis.x + c, one_minus_c * Axis.x * Axis.y - Axis.z * s, one_minus_c * Axis.z * Axis.x + Axis.y * s,\n        one_minus_c * Axis.x * Axis.y + Axis.z * s, one_minus_c * Axis.y * Axis.y + c, one_minus_c * Axis.y * Axis.z - Axis.x * s,\n        one_minus_c * Axis.z * Axis.x - Axis.y * s, one_minus_c * Axis.y * Axis.z + Axis.x * s, one_minus_c * Axis.z * Axis.z + c\n    );\n\n    vec3 Out = In * rot_mat;\n    return Out;\n\n}\n",ox="\n#ifdef USE_COLOR\n    vColor = color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n    vColor.xyz = instanceColor.xyz;\n#endif\n",ax="\nvec4 worldPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n    worldPosition = instanceMatrix * worldPosition;\n#endif\nworldPosition = modelMatrix * worldPosition;\n\nvec3 filling = vec3(0.0,fillAmount,0.0);\nvec3 worldPosOffset = worldPosition.xyz - filling;\n// rotate it around XY\n//vec3 worldPosX = RotateAroundYInDegrees(vec4(transformed, 0.0), 360.0).xyz;\nvec3 worldPosX = RotateAround( worldPosOffset, vec3(0.0,0.0,1.0), 90.0 );\n// rotate around XZ\n//vec3 worldPosZ = vec3(worldPosX.y, worldPosX.z, worldPosX.x);\nvec3 worldPosZ = RotateAround( worldPosOffset, vec3(1.0,0.0,0.0), 90.0 );\n// combine rotations with worldPos, based on sine wave from script\n#ifdef USE_INSTANCING_COLOR\nvec3 worldPosAdjusted = worldPosition.xyz + (worldPosX * vColor.x) + (worldPosZ * vColor.z);\n// how high up the liquid is\nfillPosition = worldPosAdjusted - filling;\nfillPosition.y -= vColor.y;\n#endif\nvvWorldPosition = worldPosition;\n",lx="\nuniform vec4 topColor;\nuniform vec4 rimColor;\nuniform vec4 foamColor;\nuniform vec4 tint;\nuniform float rim;\nuniform float rimPower;\nuniform float Line;\nuniform float LineSmooth;\n\nvarying vec3 fillPosition;\nvarying vec4 vvWorldPosition;\n\n",hx="\n// -------- INIT LIQUID SHADER --------\nvec4 col = tint;\n//float dotProduct = 1.0 - pow(dot(worldNormal, viewDirection), rimPower);\n//vec4 RimResult = vec4(smoothstep(0.5, 1.0, dotProduct));\n//RimResult *= rimColor;\n//RimResult *= rimColor.w;\n\nfloat wobble = 0.0;//sin((i.fillPosition.x * _Freq) + (i.fillPosition.z * _Freq ) + ( _Time.y)) * (_Amplitude *wobbleIntensity);  \nfloat movingfillPosition = fillPosition.y + wobble;\n\n// foam edge\nfloat cutoffTop = step(movingfillPosition, 0.5);\nfloat foam = cutoffTop * smoothstep(0.5 - Line - LineSmooth, 0.5 - Line , movingfillPosition);\nvec4 foamColored = foam * foamColor;\n\n// rest of the liquid minus the foam\nfloat result = cutoffTop - foam;\nvec4 resultColored = result * col;\n\n\n// both together, with the texture\nvec4 finalResult = resultColored + foamColored;\nvec4 _topColor = topColor * (foam + result);\n//finalResult.rgb += RimResult.rgb;\n//finalResult *= _topColor;\n\ndiffuseColor.rgb *= finalResult.rgb;\n//diffuseColor *= gl_FrontFacing ? finalResult : _topColor;//_topColor;\n//diffuseColor = finalResult;\n",cx=Math.PI,dx=cx/180,ux=180/cx,px=Number.EPSILON,fx=.5*cx,mx={luminousPowers:{"110000 lm (1000W)":11e4,"3500 lm (300W)":3500,"1700 lm (100W)":1700,"800 lm (60W)":800,"400 lm (40W)":400,"180 lm (25W)":180,"20 lm (4W)":20,Off:0},luminousIrradiances:{"0.0001 lx (Moonless Night)":1e-4,"0.002 lx (Night Airglow)":.002,"0.5 lx (Full Moon)":.5,"3.4 lx (City Twilight)":3.4,"50 lx (Living Room)":50,"100 lx (Very Overcast)":100,"350 lx (Office Room)":350,"400 lx (Sunrise/Sunset)":400,"1000 lx (Overcast)":1e3,"18000 lx (Daylight)":18e3,"50000 lx (Direct Sun)":5e4},exposure:e=>Math.pow(e,5),candelaToLumens:e=>4*e*Math.PI,lumensToCandela:e=>e/(4*Math.PI),todeg:ux,torad:dx,toFixed:(e,t=3)=>1*e.toFixed(t),toRound:(e,t=3)=>Math.trunc(e),clamp:(e,t=0,i=1)=>e=(e=e<t?t:e)>i?i:e,clampA:(e,t,i)=>Math.max(t,Math.min(i,e)),lerp:(e,t,i)=>(1-i)*e+i*t,damp:(e,t,i,s)=>mx.lerp(e,t,1-Math.exp(-i*s)),nearAngle:(e,t,i=!1)=>t+Math.atan2(Math.sin(e-t),Math.cos(e-t))*(i?ux:1),unwrapDeg:e=>e-360*Math.floor((e+180)/360),unwrapRad:e=>Math.atan2(Math.sin(e),Math.cos(e)),nearEquals:(e,t,i)=>Math.abs(e-t)<=i,autoSize:(e=[1,1,1],t="box")=>{1===e.length&&(e[1]=e[0]);let i=e[0],s=e[1];return"sphere"===t&&(e=[i,i,i]),"cylinder"!==t&&"wheel"!==t&&"capsule"!==t||(e=[i,s,i]),"cone"!==t&&"pyramid"!==t||(e=[i,s,i]),2===e.length&&(e[2]=e[0]),e},shuffle:e=>{let t=e.map((e=>({value:e,sort:Math.random()}))).sort(((e,t)=>e.sort-t.sort)).map((({value:e})=>e));return t},randomSign:()=>Math.random()<.5?-1:1,randSpread:e=>e*(.5-Math.random()),rand:(e=0,t=1)=>e+Math.random()*(t-e),randInt:(e,t)=>e+Math.floor(Math.random()*(t-e+1)),randIntUnic:(e,t,i)=>{for(var s=[];s.length<i;){var n=mx.randInt(e,t);-1===s.indexOf(n)&&s.push(n)}return s},fromTransform:(e,t,i,s=[0,0,0,1],n=!1)=>{let r=mx.composeMatrixArray(e,t),o=mx.composeMatrixArray(i,s);return n&&(r=mx.invertMatrixArray(r)),r=mx.multiplyMatrixArray(r,o),[r[12],r[13],r[14]]},fromTransformToQ:(e,t,i=!1)=>{let s=mx.composeMatrixArray(e,t),n=mx.decomposeFullMatrixArray(s).q;return i&&(n=mx.quatInvert(n)),n},composeMatrixArray:(e,t,i=[1,1,1])=>{const s=t[0],n=t[1],r=t[2],o=t[3],a=s+s,l=n+n,h=r+r,c=s*a,d=s*l,u=s*h,p=n*l,f=n*h,m=r*h,g=o*a,A=o*l,b=o*h,v=i[0],y=i[1],w=i[2];return[(1-(p+m))*v,(d+b)*v,(u-A)*v,0,(d-b)*y,(1-(c+m))*y,(f+g)*y,0,(u+A)*w,(f-g)*w,(1-(c+p))*w,0,e[0],e[1],e[2],1]},multiplyMatrixArray:(e,t)=>{const i=e,s=t,n=[],r=i[0],o=i[4],a=i[8],l=i[12],h=i[1],c=i[5],d=i[9],u=i[13],p=i[2],f=i[6],m=i[10],g=i[14],A=i[3],b=i[7],v=i[11],y=i[15],w=s[0],x=s[4],O=s[8],C=s[12],S=s[1],I=s[5],E=s[9],k=s[13],B=s[2],Q=s[6],M=s[10],T=s[14],D=s[3],R=s[7],P=s[11],L=s[15];return n[0]=r*w+o*S+a*B+l*D,n[4]=r*x+o*I+a*Q+l*R,n[8]=r*O+o*E+a*M+l*P,n[12]=r*C+o*k+a*T+l*L,n[1]=h*w+c*S+d*B+u*D,n[5]=h*x+c*I+d*Q+u*R,n[9]=h*O+c*E+d*M+u*P,n[13]=h*C+c*k+d*T+u*L,n[2]=p*w+f*S+m*B+g*D,n[6]=p*x+f*I+m*Q+g*R,n[10]=p*O+f*E+m*M+g*P,n[14]=p*C+f*k+m*T+g*L,n[3]=A*w+b*S+v*B+y*D,n[7]=A*x+b*I+v*Q+y*R,n[11]=A*O+b*E+v*M+y*P,n[15]=A*C+b*k+v*T+y*L,n},invertMatrixArray:e=>{const t=e,i=t[0],s=t[1],n=t[2],r=t[3],o=t[4],a=t[5],l=t[6],h=t[7],c=t[8],d=t[9],u=t[10],p=t[11],f=t[12],m=t[13],g=t[14],A=t[15],b=d*g*h-m*u*h+m*l*p-a*g*p-d*l*A+a*u*A,v=f*u*h-c*g*h-f*l*p+o*g*p+c*l*A-o*u*A,y=c*m*h-f*d*h+f*a*p-o*m*p-c*a*A+o*d*A,w=f*d*l-c*m*l-f*a*u+o*m*u+c*a*g-o*d*g,x=i*b+s*v+n*y+r*w;if(0===x)return[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];const O=1/x;return t[0]=b*O,t[1]=(m*u*r-d*g*r-m*n*p+s*g*p+d*n*A-s*u*A)*O,t[2]=(a*g*r-m*l*r+m*n*h-s*g*h-a*n*A+s*l*A)*O,t[3]=(d*l*r-a*u*r-d*n*h+s*u*h+a*n*p-s*l*p)*O,t[4]=v*O,t[5]=(c*g*r-f*u*r+f*n*p-i*g*p-c*n*A+i*u*A)*O,t[6]=(f*l*r-o*g*r-f*n*h+i*g*h+o*n*A-i*l*A)*O,t[7]=(o*u*r-c*l*r+c*n*h-i*u*h-o*n*p+i*l*p)*O,t[8]=y*O,t[9]=(f*d*r-c*m*r-f*s*p+i*m*p+c*s*A-i*d*A)*O,t[10]=(o*m*r-f*a*r+f*s*h-i*m*h-o*s*A+i*a*A)*O,t[11]=(c*a*r-o*d*r-c*s*h+i*d*h+o*s*p-i*a*p)*O,t[12]=w*O,t[13]=(c*m*n-f*d*n+f*s*u-i*m*u-c*s*g+i*d*g)*O,t[14]=(f*a*n-o*m*n-f*s*l+i*m*l+o*s*g-i*a*g)*O,t[15]=(o*d*n-c*a*n+c*s*l-i*d*l-o*s*u+i*a*u)*O,t},matrixArrayDeterminant:e=>{const t=e,i=t[0],s=t[4],n=t[8],r=t[12],o=t[1],a=t[5],l=t[9],h=t[13],c=t[2],d=t[6],u=t[10],p=t[14];return t[3]*(+r*l*d-n*h*d-r*a*u+s*h*u+n*a*p-s*l*p)+t[7]*(+i*l*p-i*h*u+r*o*u-n*o*p+n*h*c-r*l*c)+t[11]*(+i*h*d-i*a*p-r*o*d+s*o*p+r*a*c-s*h*c)+t[15]*(-n*a*c-i*l*d+i*a*u+n*o*d-s*o*u+s*l*c)},decomposeMatrixArray:e=>[e[12],e[13],e[14]],decomposeFullMatrixArray:e=>{const t=e;let i=mx.lengthArray([t[0],t[1],t[2]]);const s=mx.lengthArray([t[4],t[5],t[6]]),n=mx.lengthArray([t[8],t[9],t[10]]);mx.matrixArrayDeterminant(e)<0&&(i=-i);let r=[...e];const o=1/i,a=1/s,l=1/n;r[0]*=o,r[1]*=o,r[2]*=o,r[4]*=a,r[5]*=a,r[6]*=a,r[8]*=l,r[9]*=l,r[10]*=l;let h=mx.quatFromRotationMatrix(r);return{p:[e[12],e[13],e[14]],q:h,s:[i,s,n]}},applyTransformArray:(e,t,i,s=[1,1,1])=>{const n=mx.composeMatrixArray(t,i,s),r=e[0],o=e[1],a=e[2],l=1/(n[3]*r+n[7]*o+n[11]*a+n[15]);return[(n[0]*r+n[4]*o+n[8]*a+n[12])*l,(n[1]*r+n[5]*o+n[9]*a+n[13])*l,(n[2]*r+n[6]*o+n[10]*a+n[14])*l]},slerpQuatArray:(e,t,i)=>{if(0===i)return e;if(1===i)return t;let s=[...e];const n=e[0],r=e[1],o=e[2],a=e[3],l=t[0],h=t[1],c=t[2],d=t[3];let u=a*d+n*l+r*h+o*c;if(u<0?(s=[-l,-h,-c,-d],u=-u):s=[...t],u>=1)return e;const p=1-u*u;if(p<=px){const e=1-i;return s[3]=e*a+i*s[3],s[0]=e*n+i*s[0],s[1]=e*r+i*s[1],s[2]=e*o+i*s[2],mx.quatNomalize(s)}const f=Math.sqrt(p),m=Math.atan2(f,u),g=Math.sin((1-i)*m)/f,A=Math.sin(i*m)/f;return s[3]=a*g+s[3]*A,s[0]=n*g+s[0]*A,s[1]=r*g+s[1]*A,s[2]=o*g+s[2]*A,s},toLocalQuatArray:(e=[0,0,0],t)=>{let i=mx.quatFromEuler(e),s=mx.quatInvert(t.quaternion.toArray());return mx.quatMultiply(s,i)},quatFromRotationMatrix:e=>{let t=[0,0,0,1];const i=e,s=i[0],n=i[4],r=i[8],o=i[1],a=i[5],l=i[9],h=i[2],c=i[6],d=i[10],u=s+a+d;if(u>0){const e=.5/Math.sqrt(u+1);t[3]=.25/e,t[0]=(c-l)*e,t[1]=(r-h)*e,t[2]=(o-n)*e}else if(s>a&&s>d){const e=2*Math.sqrt(1+s-a-d);t[3]=(c-l)/e,t[0]=.25*e,t[1]=(n+o)/e,t[2]=(r+h)/e}else if(a>d){const e=2*Math.sqrt(1+a-s-d);t[3]=(r-h)/e,t[0]=(n+o)/e,t[1]=.25*e,t[2]=(l+c)/e}else{const e=2*Math.sqrt(1+d-s-a);t[3]=(o-n)/e,t[0]=(r+h)/e,t[1]=(l+c)/e,t[2]=.25*e}return t},quatFromEuler:(e=[0,0,0],t=!0)=>{const i=Math.cos,s=Math.sin,n=t?dx:1,r=e[0]*n*.5,o=e[1]*n*.5,a=e[2]*n*.5,l=i(r),h=i(o),c=i(a),d=s(r),u=s(o),p=s(a);return[d*h*c+l*u*p,l*u*c-d*h*p,l*h*p+d*u*c,l*h*c-d*u*p]},quatFromAxis:(e=[0,0,0],t,i=!0)=>{const s=.5*t*(i?dx:1),n=Math.sin(s);return[e[0]*n,e[1]*n,e[2]*n,Math.cos(s)]},quatNomalize:e=>{let t=mx.lengthArray(e);return 0===t?[0,0,0,1]:(t=1/t,mx.scaleArray(e,t,4))},quatInvert:e=>[-e[0],-e[1],-e[2],e[3]],quatMultiply:(e,t)=>{const i=e[0],s=e[1],n=e[2],r=e[3],o=t[0],a=t[1],l=t[2],h=t[3];return[i*h+r*o+s*l-n*a,s*h+r*a+n*o-i*l,n*h+r*l+i*a-s*o,r*h-i*o-s*a-n*l]},quatToAxis:e=>{let t=2*Math.acos(e[3]);const i=Math.sqrt(1-e[3]*e[3]);return i<1e-4?[1,0,0]:[e[0]/i,e[1]/i,e[2]/i,t]},eulerFromMatrix:e=>{const t=e[0],i=e[4],s=e[8];e[1];const n=e[5],r=e[9];e[2];const o=e[6],a=e[10];let l=[0,0,0];return l[1]=Math.asin(mx.clamp(s,-1,1)),Math.abs(s)<.9999999?(l[0]=Math.atan2(-r,a),l[2]=Math.atan2(-i,t)):(l[0]=Math.atan2(o,n),l[2]=0),l},angleTo:(e,t)=>2*Math.acos(Math.abs(mx.clamp(mx.dotArray(e,t),-1,1))),getSize:e=>.001*e.byteLength+"kb",perpendicularArray:e=>{const t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);let i=Math.acos(e[1]/t);const s=Math.atan2(e[2],e[0]);i>fx?i-=fx:i+=fx;return[t*Math.sin(i)*Math.cos(s),t*Math.cos(i),t*Math.sin(i)*Math.sin(s)]},crossArray:(e,t)=>{const i=e[0],s=e[1],n=e[2],r=t[0],o=t[1],a=t[2];return[s*a-n*o,n*r-i*a,i*o-s*r]},applyQuaternion:(e,t)=>{const i=e[0],s=e[1],n=e[2],r=t[0],o=t[1],a=t[2],l=t[3],h=2*(o*n-a*s),c=2*(a*i-r*n),d=2*(r*s-o*i);return[i+l*h+o*d-a*c,s+l*c+a*h-r*d,n+l*d+r*c-o*h]},nullArray:(e,t,i)=>{let s=0;for(;i--;)s+=e[t+i];return s},equalArray:(e,t)=>{let i=e.length;for(;i--;)if(e[i]!==t[i])return!1;return!0},lerpArray:(e,t,i)=>{if(0===i)return e;if(1===i)return t;let s=e.length,n=[];for(;s--;)n[s]=e[s],n[s]+=(t[s]-n[s])*i;return n},zeroArray:(e,t=0,i)=>{for(i=i??e.length;i--;)e[t+i]=0;return e},lengthArray:e=>{let t=e.length,i=0;for(;t--;)i+=e[t]*e[t];return Math.sqrt(i)},dotArray:(e,t)=>{let i=e.length,s=0;for(;i--;)s+=e[i]*t[i];return s},addArray:(e,t,i)=>{i=i??e.length;let s=[];for(;i--;)s[i]=e[i]+t[i];return s},subArray:(e,t,i)=>{i=i??e.length;let s=[];for(;i--;)s[i]=e[i]-t[i];return s},mulArray:(e,t,i)=>{if(t instanceof Array){let s=[];for(i=i??e.length;i--;)s[i]=e[i]*t[i];return s}return e.map((e=>e*t))},divArray:(e,t,i)=>mx.mulArray(e,1/t,i),scaleArray:(e,t,i)=>mx.mulArray(e,t,i),fillArray:(e,t,i=0,s)=>{for(s=s??e.length;s--;)t[i+s]=e[s]},copyArray:(e,t)=>{},cloneArray:e=>[...e],distanceArray:(e,t=[0,0,0])=>mx.lengthArray(mx.subArray(e,t)),normalizeArray:e=>mx.divArray(e,mx.lengthArray(e)||1),normalArray:(e,t=[0,0,0])=>mx.normalizeArray(mx.subArray(t,e)),getVolume:(e,t,i=null)=>{let s=1,n=t;switch(e){case"sphere":s=4*Math.PI*n[0]*n[0]*n[0]/3;break;case"cone":s=Math.PI*n[0]*(.5*n[1])*2;break;case"box":s=.5*n[0]*8*(.5*n[1])*(.5*n[2]);break;case"cylinder":s=Math.PI*n[0]*n[0]*(.5*n[1])*2;break;case"capsule":s=4*Math.PI*n[0]*n[0]*n[0]/3+Math.PI*n[0]*n[0]*(.5*n[1])*2;break;case"convex":case"mesh":s=mx.getConvexVolume(i)}return s},getConvexVolume:e=>{let t,i=e.length/3,s=[0,0,0],n=[0,0,0];for(;i--;)t=3*i,e[t]<s[0]?s[0]=e[t]:e[t]>n[0]&&(n[0]=e[t]),e[t+1]<s[1]?s[1]=e[t+1]:e[t+1]>n[1]&&(n[1]=e[t+1]),e[t+2]<s[2]?s[2]=e[t+2]:e[t+2]>n[2]&&(n[2]=e[t+2]);let r=[n[0]-s[0],n[1]-s[1],n[2]-s[2]];return.5*r[0]*8*(.5*r[1])*(.5*r[2])},massFromDensity:(e,t)=>e*t,densityFromMass:(e,t)=>e/t,toNonIndexed:e=>e.index?e.clone().toNonIndexed():e,getIndex:(e,t)=>!e.index||t?null:e.index.array||null,getVertex:(e,t)=>{let i=e.attributes.position.array;return t&&e.index&&(i=(e=e.clone().toNonIndexed()).attributes.position.array),i},getNormal:e=>e.attributes.normal.array,getFaces:e=>{let t=[];if(e.index){let i=e.getIndex();for(let e=0;e<i.count;e+=3)t.push([i.getX(e),i.getX(e+1),i.getX(e+2)])}else{let i=e.getAttribute("position").count;for(let e=0;e<i;e+=3)t.push([e,e+1,e+2])}return t},reduce:e=>{},barycentric:(e,t)=>{},solve:(e,t)=>{}},gx=mx,Ax=["PHYSX","HAVOK"],bx=4e3,vx=1e3,yx=4e3,wx=100,xx=100,Ox=50,Cx=20,Sx={bodyFull:14,body:8,joint:16,contact:1,ray:11,character:16,vehicle:72,solver:128},Ix=function(e,t=!1){const i={};let s={body:bx*(t?Sx.bodyFull:Sx.body),joint:vx*Sx.joint,ray:wx*Sx.ray,contact:yx*Sx.contact,character:xx*Sx.character};"PHYSX"!==e&&"AMMO"!==e||(s.vehicle=Ox*Sx.vehicle),"PHYSX"===e&&(s.solver=Cx*Sx.solver),"HAVOK"!==e&&"RAPIER"!==e&&"JOLT"!==e||(Sx.joint=0);let n=0;for(let e in s)i[e]=n,n+=s[e];return i.total=n,i};class Ex extends i.LineSegments{constructor(e,t=16776960){const s=new Uint16Array([0,1,1,2,2,3,3,4,4,5,5,0,6,7,7,8,8,9,9,10,10,11,11,6,12,13,13,14,14,15,15,16,16,17,17,12,18,19,20,21,22,23]),n=[.5,0,0,.25,.433,0,-.25,.433,0,-.5,0,0,-.25,-.433,0,.25,-.433,0,.5,0,0,.25,0,.433,-.25,0,.433,-.5,0,0,-.25,0,-.433,.25,0,-.433,0,.5,0,0,.25,.433,0,-.25,.433,0,-.5,0,0,-.25,-.433,0,.25,-.433,0,0,0,.6,0,0,0,0,0,0,.6,0,0,0,0,0,0,.6],r=new i.BufferGeometry;r.setIndex(new i.BufferAttribute(s,1)),r.setAttribute("position",new i.Float32BufferAttribute(n,3)),r.setAttribute("color",new i.Float32BufferAttribute([0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,1,0,0,0,1,0,0,1],3)),super(r,new i.LineBasicMaterial({color:t,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.box=e,this.type="CircleHelper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}let kx=class{constructor(){this.geoN=0,this.geo={}}unic(e){this.geo["geo"+this.geoN++]=e}set(e){this.geo[e.name]=e}get(e,t={}){if(!this.geo[e]){let t;switch(e){case"plane":t=new i.PlaneGeometry(1,1),t.rotateX(.5*-Math.PI);break;case"box":t=new i.BoxGeometry(1,1,1);break;case"sphere":t=new i.SphereGeometry(1,16,12);break;case"cylinder":t=new i.CylinderGeometry(1,1,1,16);break;case"cone":t=new i.CylinderGeometry(.001,1,1,16);break;case"particle":t=new i.SphereGeometry(1,8,6);break;case"joint":t=(new Ex).geometry;break;default:return null}this.geo[e]=t}return this.geo[e]}dispose(){for(let e in this.geo)this.geo[e].isBufferGeometry?this.geo[e].dispose():console.log(this.geo[e]);this.geo={},this.geoN=0}};class Bx{constructor(e,t="rgb(69,69,69)",s="rgb(39,39,39)"){const n=document.createElement("canvas");n.width=n.height=128;const r=n.getContext("2d");if(r.fillStyle=t,r.fillRect(0,0,128,128),e){let i,n,o,a,l=[[0,0],[32,32],[64,64],[96,96],[96,-32]],h=[[0,64],[32,96],[64,128],[96,160],[-32,32]],c=e?"rgb(128,128,255)":t,d=e?"rgb(160,100,255)":s,u=e?"rgba(100,160,255, 0.5)":"rgba(0,0,0, 0.1)";for(r.strokeStyle=u,r.lineWidth=1,i=0;i<5;i++){a=r.createLinearGradient(0,h[i][0],0,h[i][1]),a.addColorStop(0,d),a.addColorStop(1,c),r.beginPath(),r.fillStyle=a,r.rect(l[i][0],l[i][1],32,64),r.fill();for(let e=0;e<8;e++)o=2*(Math.random()-.5),r.beginPath(),r.moveTo(l[i][0]+o+2+4*e,l[i][1]),r.lineTo(l[i][0]+o+2+4*e,l[i][1]+64),r.stroke()}for(l=[[32,0],[64,32],[96,64],[-32,64],[0,96]],h=[[32,96],[64,128],[96,160],[-32,32],[0,64]],i=0;i<5;i++)for(a=r.createLinearGradient(h[i][0],0,h[i][1],0),a.addColorStop(0,c),a.addColorStop(1,d),r.beginPath(),r.fillStyle=a,r.rect(l[i][0],l[i][1],64,32),r.fill(),n=0;n<8;n++)o=2*(Math.random()-.5),r.beginPath(),r.moveTo(l[i][0],l[i][1]+o+2+4*n),r.lineTo(l[i][0]+64,l[i][1]+o+2+4*n),r.stroke()}else r.beginPath(),r.fillStyle=s,r.rect(0,0,32,64),r.rect(32,32,32,64),r.rect(64,64,32,64),r.rect(96,96,32,64),r.rect(96,-32,32,64),r.fill();const o=new i.CanvasTexture(n);return o.wrapS=o.wrapT=i.RepeatWrapping,o.repeat.x=o.repeat.y=60,e||(o.colorSpace=i.SRGBColorSpace),o}}class Qx extends i.MeshPhysicalMaterial{constructor(e){super(),this.defines={STANDARD:"",PHYSICAL:"",SUBSURFACE:"",USE_UV:""},this.extra={},this.addParametre("sssMap",null),this.addParametre("sssColor",new i.Color(0,0,0)),this.addParametre("sssAmbient",.5),this.addParametre("sssDistortion",.6),this.addParametre("sssAttenuation",.1),this.addParametre("sssPower",1),this.addParametre("sssScale",6),this.setValues(e);let t=this;t.onBeforeCompile=function(e){for(let i in t.extra)e.uniforms[i]={value:t.extra[i]};e.fragmentShader=e.fragmentShader.replace("#include <common>",Mx.common),e.fragmentShader=e.fragmentShader.replace("#include <lights_fragment_begin>",t.replaceAll(Tx,"RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );",Mx.light)),t.userData.shader=e}}addParametre(e,t){this.extra[e]=t,Object.defineProperty(this,e,{get:()=>this.extra[e],set:t=>{this.extra[e]=t,this.userData.shader&&(this.userData.shader.uniforms[e].value=this.extra[e])}})}replaceAll(e,t,i){return e.split(t).join(i)}}const Mx={common:"\n\t#include <common>\n\tuniform sampler2D sssMap;\n\tuniform float sssPower;\n\tuniform float sssScale;\n\tuniform float sssDistortion;\n\tuniform float sssAmbient;\n\tuniform float sssAttenuation;\n\tuniform vec3 sssColor;\n\n\tvoid RE_Direct_Scattering(const in IncidentLight directLight, const in vec2 uv, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, inout ReflectedLight reflectedLight) {\n\t\tvec3 thickness = sssColor * texture2D(sssMap, uv).r;\n\t\tvec3 scatteringHalf = normalize(directLight.direction + (geometryNormal * sssDistortion));\n\t\tfloat scatteringDot = pow(saturate(dot(geometryViewDir, -scatteringHalf)), sssPower) * sssScale;\n\t\tvec3 scatteringIllu = (scatteringDot + sssAmbient) * thickness;\n\t\treflectedLight.directDiffuse += scatteringIllu * sssAttenuation * directLight.color;\n\t}\n\t",light:"\n\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t#if defined( SUBSURFACE ) && defined( USE_UV )\n\t\tRE_Direct_Scattering(directLight, vUv, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, reflectedLight);\n\t#endif\n\t"},Tx="\n\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n\n#ifdef USE_CLEARCOAT\n\n\tgeometryClearcoatNormal = clearcoatNormal;\n\n#endif\n\n#ifdef USE_IRIDESCENCE\n\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\n\tif ( material.iridescenceThickness == 0.0 ) {\n\n\t\tmaterial.iridescence = 0.0;\n\n\t} else {\n\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\n\t}\n\n\tif ( material.iridescence > 0.0 ) {\n\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\n\t\t// Iridescence F0 approximation\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\n\t}\n\n#endif\n\nIncidentLight directLight;\n\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\n\t\tpointLight = pointLights[ i ];\n\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\n\t\tspotLight = spotLights[ i ];\n\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\n\t\t// spot lights are ordered [shadows with maps, shadows without maps, maps without shadows, none]\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\n\t\tdirectionalLight = directionalLights[ i ];\n\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\n\tRectAreaLight rectAreaLight;\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n#if defined( RE_IndirectDiffuse )\n\n\tvec3 iblIrradiance = vec3( 0.0 );\n\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\n\t#if defined( USE_LIGHT_PROBES )\n\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\n\t#endif\n\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\n\t\t}\n\t\t#pragma unroll_loop_end\n\n\t#endif\n\n#endif\n\n#if defined( RE_IndirectSpecular )\n\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n\n#endif\n",Dx={metalness:.1,roughness:.9},Rx={body:new i.Color("hsl(45, 15%, 90%)"),sleep:new i.Color("hsl(33, 15%, 54%)"),solid:new i.Color(7105128),base:new i.Color(13224135),black:new i.Color("hsl(220, 8%, 15%)"),gold:new i.Color(.944,.776,.373),gold2:new i.Color(.998,.981,.751),copper:new i.Color(.96467984,.37626296,.25818297),carPaint:new i.Color(.1037792,.59212029,.85064936),clay:new i.Color("hsl(12, 30%, 40%)"),clayWhite:new i.Color(11119017),concrete:new i.Color(11119017),Raw_Fire:new i.Color("hsl(40, 18%, 54%)"),Raw_Buff:new i.Color("hsl(33, 15%, 54%)"),Raw_Terracotta:new i.Color("hsl(12, 30%, 40%)"),Raw_Porcelain:new i.Color("hsl(45, 15%, 90%)")},Px={No:i.NoBlending,Normal:i.NormalBlending,Additive:i.AdditiveBlending,Subtractive:i.SubtractiveBlending,Multiply:i.MultiplyBlending,Eadd:i.AddEquation,Esub:i.SubtractEquation,Erev:i.ReverseSubtractEquation,Emin:i.MinEquation,Emaw:i.MaxEquation,Fzero:i.ZeroFactor,Fone:i.OneFactor,Fcolor:i.SrcColorFactor,Fcolorm:i.OneMinusSrcColorFactor,Falpha:i.SrcAlphaFactor,Falpham:i.OneMinusSrcAlphaFactor,Fdstalpha:i.DstAlphaFactor,Fdstalpham:i.OneMinusDstAlphaFactor,Fdstcolor:i.DstColorFactor,Fdstcolorm:i.OneMinusDstColorFactor,Falphasaturate:i.SrcAlphaSaturateFactor,Front:i.FrontSide,Back:i.BackSide,Double:i.DoubleSide};let Lx=class{constructor(){this.renderMode={value:0},this.depthPacking={value:0},this.extendMat=!1,this.isRealism=!1,this.realismOption={},this.envMapIntensity=1,this.mat={},this.TmpMat=[]}changeRenderMode(e){this.renderMode.value=e}initExtandShader(){}useRealLight(e){}setColor(e){}set(e,t,i=null){i||(i=e.onBeforeCompile),this.mat[e.name]=e}extendShader(e,t=null){}addToTmp(e){this.TmpMat.push(e)}create(e){let t,s=null;if(e.isMaterial)t=e;else{let n=void 0!==e.type?e.type:"Standard";switch(e.type&&delete e.type,s=e.beforeCompile||null,e.beforeCompile&&delete e.beforeCompile,(e.thickness||e.sheen||e.clearcoat||e.transmission||e.specularColor)&&(n="Physical"),e.normalScale&&(e.normalScale.isVector2||(e.normalScale=(new i.Vector2).fromArray(e.normalScale))),e.side&&(e.side=this.findValue(e.side)),e.shadowSide&&(e.shadowSide=this.findValue(e.shadowSide)),e.blending&&(e.blending=this.findValue(e.blending)),e.blendEquation&&(e.blendEquation=this.findValue(e.blendEquation)),e.blendEquationAlpha&&(e.blendEquationAlpha=this.findValue(e.blendEquationAlpha)),e.blendSrc&&(e.blendSrc=this.findValue(e.blendSrc)),e.blendDst&&(e.blendDst=this.findValue(e.blendDst)),e.blendDstAlpha&&(e.blendDstAlpha=this.findValue(e.blendDstAlpha)),e.blendSrcAlpha&&(e.blendSrcAlpha=this.findValue(e.blendSrcAlpha)),e.clearcoatNormalScale&&(e.clearcoatNormalScale.isVector2||(e.clearcoatNormalScale=(new i.Vector2).fromArray(e.clearcoatNormalScale))),n=n.toLowerCase(),n){case"physical":t=new i.MeshPhysicalMaterial(e),t.defines={STANDARD:"",PHYSICAL:"",USE_UV:"",USE_SPECULAR:""};break;case"phong":t=new i.MeshPhongMaterial(e);break;case"lambert":t=new i.MeshLambertMaterial(e);break;case"basic":t=new i.MeshBasicMaterial(e);break;case"line":t=new i.LineBasicMaterial(e);break;case"toon":t=new i.MeshToonMaterial(e);break;case"shadow":t=new i.ShadowMaterial(e);break;case"sss":t=new Qx(e);break;default:t=new i.MeshStandardMaterial(e)}}return this.mat[t.name]?null:(this.set(t,!1,s),t)}findValue(e){return"string"===e?Px[e.charAt(0).toUpperCase()+e.slice(1)]:e}addToMat(e){if(this.isRealism)for(let t in e)e[t].shadowSide=i.DoubleSide,e[t].onBeforeCompile=function(i){EnhanceLighting(i,this.realismOption),e[t].userData.isRealism=!0,e[t].userData.shader=i};this.mat={...this.mat,...e}}changeType(){}directIntensity(e){for(let e in this.mat);}getList(){let e={...this.mat};const t=["line","debug","hide","svg"];let i=t.length;for(;i--;)delete e[t[i]];return e}get(e){if(!this.mat[e])switch(e){case"body":this.create({name:"body",color:Rx.body,...Dx});break;case"sleep":this.create({name:"sleep",color:Rx.sleep,...Dx});break;case"solid":this.create({name:"solid",color:Rx.solid,...Dx});break;case"base":this.create({name:"base",color:Rx.base,...Dx});break;case"clay":this.create({name:"clay",color:Rx.clay,metalness:.1,roughness:.7});break;case"clayWhite":this.create({name:"clayWhite",color:Rx.clayWhite,metalness:.1,roughness:.7});break;case"concrete":this.create({name:"concrete",color:Rx.concrete,metalness:0,roughness:.9});break;case"black":this.create({name:"black",color:Rx.black,metalness:0,roughness:.25});break;case"chrome":this.create({name:"chrome",color:13421772,metalness:1,roughness:.075});break;case"silver":this.create({name:"silver",color:11184810,metalness:.8,roughness:.22});break;case"gold":this.create({name:"gold",color:Rx.gold,specularColor:Rx.gold2,metalness:1,roughness:.02});break;case"copper":this.create({name:"copper",color:Rx.copper,metalness:1,roughness:.25,clearcoat:1,clearcoatRoughness:.2});break;case"carPaint":this.create({name:"carPaint",color:Rx.carPaint,metalness:0,anisotropy:new i.Vector2(.5,.5),roughness:.4,clearcoat:1,clearcoatRoughness:0});break;case"carbon":this.create({name:"carbon",map:new Bx,normalMap:new Bx(!0),clearcoat:1,clearcoatRoughness:.1,roughness:.5});break;case"cloth":this.create({name:"cloth",color:8391119,roughness:.5,sheenColor:13335807,sheen:1,sheenRoughness:.2});break;case"skinny":this.create({name:"skinny",color:14724201,...Dx});break;case"glass":this.create({name:"glass",color:16777215,transparent:!0,roughness:.02,metalness:0,side:i.DoubleSide,alphaToCoverage:!0,premultipliedAlpha:!0,transmission:1,clearcoat:1,thickness:.01});break;case"glassX":this.create({name:"glassX",color:15658734,transparent:!1,opacity:1,roughness:.03,metalness:0,side:i.DoubleSide,transmission:1,clearcoat:1,clearcoatRoughness:0,thickness:.02,ior:1.52,shadowSide:1,reflectivity:.5,iridescence:0});break;case"plexi":this.create({name:"plexi",blending:i.AdditiveBlending,color:65793,transparent:!0,opacity:.7,reflectivity:.3,metalness:.6,roughness:.1,clearcoat:.2,clearcoatRoughness:.02,side:i.DoubleSide,alphaToCoverage:!0,premultipliedAlpha:!0});break;case"plexi2":this.create({name:"plexi2",blending:i.AdditiveBlending,color:65793,transparent:!1,opacity:.7,reflectivity:.3,metalness:.6,roughness:.1,clearcoat:.2,clearcoatRoughness:.02,side:i.DoubleSide,alphaToCoverage:!1,premultipliedAlpha:!0});break;case"glass2":this.create({name:"glass2",color:15658734,transparent:!0,roughness:0,alphaToCoverage:!0,opacity:.3});break;case"glass3":this.create({name:"glass3",color:0,transparent:!0,roughness:0,alphaToCoverage:!0,opacity:.4});break;case"glass_red":this.create({name:"glass_red",color:16711680,transparent:!0,roughness:0,alphaToCoverage:!0,opacity:.8});break;case"car":this.create({name:"car",color:3158064,metalness:1,roughness:.5,clearcoat:1,clearcoatRoughness:.03,sheen:.5});break;case"carGlass":this.create({name:"carGlass",color:16777215,metalness:0,roughness:0,transmission:1,ior:1.52});break;case"outline":this.create({name:"outline",color:16777215,type:"Basic",side:i.BackSide,toneMapped:!1,wireframe:!0,transparent:!0,opacity:.25});break;case"debug":this.create({name:"debug",type:"Basic",color:15953986,wireframe:!0,toneMapped:!1,transparent:!0,opacity:.5});break;case"shadow":this.create({name:"shadow",type:"shadow",color:0,opacity:.5});break;case"bones":this.create({name:"bones",color:16639958,wireframe:!0});break;case"bones2":this.create({name:"bones2",type:"basic",color:14664872,transparent:!0,opacity:.5,depthTest:!0,depthWrite:!1,alphaToCoverage:!0});break;case"button":this.create({name:"button",color:16728139,...Dx});break;case"line":this.create({name:"line",type:"line",vertexColors:!0,toneMapped:!1});break;case"liner":this.create({name:"liner",type:"line",vertexColors:!0,toneMapped:!1,depthTest:!0,depthWrite:!0,alphaToCoverage:!0});break;case"hide":this.create({name:"hide",type:"basic",visible:!1});break;case"particle":this.create({name:"particle",type:"basic",toneMapped:!1,color:65280});break;case"svg":this.create({name:"svg",type:"basic",toneMapped:!1,vertexColors:!0,transparent:!1,side:i.DoubleSide})}return this.mat[e]}dispose(){this.isRealism=!1;for(let e in this.mat)this.mat[e].dispose(),delete this.mat[e];let e=this.TmpMat.length;for(;e--;)this.TmpMat[e].dispose();this.TmpMat=[]}upShader(){let e=this.realismOption;for(let t in this.mat){const i=this.mat[t],s=i.userData.shader;for(let t in e)s&&void 0!==s.uniforms[t]&&(s.uniforms[t].value=e[t]),i[t]&&(i[t]=e[t])}}};class Fx{constructor(e=-1){this.perf=window.performance,this.time={now:0,delta:0,then:0,interval:0,tmp:0,n:0,dt:0},this.fps=0,this.delta=0,this.elapsedTime=0,this.unlimited=!1,this.setFramerate(e),this.force=!1}up(e){let t=this.time;return this.unlimited&&(this.force=!0),t.now=void 0!==e?e:this.now(),t.delta=t.now-t.then,this.force&&(t.delta=t.interval,this.force=!1),!!(t.delta>=t.interval||this.unlimited)&&(t.then=this.unlimited?t.now:t.now-t.delta%t.interval,this.delta=.001*t.interval,this.elapsedTime+=this.delta,!0)}setFramerate(e){this.elapsedTime=0,this.framerate=e,this.unlimited=this.framerate<0,this.time.interval=1e3/e,60===e&&(this.time.interval=16.67)}static now(){return this.perf?this.perf.now():Date.now()}static format_time(e){return e>1e3?e/1e3+" sec":e+" ms"}}class Ux{constructor(){this.key=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.key2=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.gamepad=new zx(this.key),this.useGamepad=!1,this.sameAxis=!0,document.addEventListener("keydown",function(e){this.keyDown(e)}.bind(this),!1),document.addEventListener("keyup",function(e){this.keyUp(e)}.bind(this),!1)}setKey(e,t){this.key[e]=t}update(){return this.gamepad.update(),this.gamepad.ready&&(this.useGamepad||(this.useGamepad=!0),this.gamepad.getValue(0)),this.sameAxis&&(this.key[2]=this.key[0],this.key[3]=this.key[1]),this.key}keyDown(e){var t=this.key,i=this.key2;if(e=e||window.event,this.sameAxis)switch(e.which){case 65:case 81:case 37:t[0]=-1,i[0]=1;break;case 68:case 39:t[0]=1,i[1]=1;break;case 87:case 90:case 38:t[1]=-1;break;case 83:case 40:t[1]=1;break;case 32:t[4]=1;break;case 17:case 67:t[5]=1;break;case 69:t[6]=1;break;case 16:t[7]=1}else switch(e.which){case 65:case 81:t[0]=-1,i[0]=1;break;case 68:t[0]=1,i[1]=1;break;case 87:case 90:t[1]=-1;break;case 83:t[1]=1;break;case 37:t[2]=-1,i[0]=1;break;case 39:t[2]=1,i[1]=1;break;case 38:t[3]=-1;break;case 40:t[3]=1;break;case 32:t[4]=1;break;case 17:case 67:t[5]=1;break;case 69:t[6]=1;break;case 16:t[7]=1}this.gamepad.reset()}keyUp(e){var t=this.key,i=this.key2;if(e=e||window.event,this.sameAxis)switch(e.which){case 65:case 81:case 37:t[0]=t[0]<0?0:t[0],i[0]=0;break;case 68:case 39:t[0]=t[0]>0?0:t[0],i[1]=0;break;case 87:case 90:case 38:t[1]=t[1]<0?0:t[1];break;case 83:case 40:t[1]=t[1]>0?0:t[1];break;case 32:t[4]=0;break;case 17:case 67:t[5]=0;break;case 69:t[6]=0;break;case 16:t[7]=0}else switch(e.which){case 65:case 81:t[0]=t[0]<0?0:t[0],i[0]=0;break;case 68:t[0]=t[0]>0?0:t[0],i[1]=0;break;case 87:case 90:t[1]=t[1]<0?0:t[1];break;case 83:t[1]=t[1]>0?0:t[1];break;case 37:t[2]=t[2]<0?0:t[2],i[0]=0;break;case 39:t[2]=t[2]>0?0:t[2],i[1]=0;break;case 38:t[3]=t[3]<0?0:t[3];break;case 40:t[3]=t[3]>0?0:t[3];break;case 32:t[4]=0;break;case 17:case 67:t[5]=0;break;case 69:t[6]=0;break;case 16:t[7]=0}}}class zx{constructor(e){this.values=[],this.ready=0,this.key=e}update(){var e,t,i,s,n,r,o=this.fix,a=navigator.getGamepads();for(e=0;e<a.length;e++)if(r=a[e])if(i=r.axes.length,s=r.buttons.length){for(this.values[e]||(this.values[e]=[]),t=0;t<i;t++)n=o(r.axes[t],.08),0==this.ready&&0!==n&&(this.ready=1),this.values[e][t]=n;for(t=0;t<s;t++)n=o(r.buttons[t].value),0==this.ready&&0!==n&&(this.ready=1),this.values[e][i+t]=n}else this.values[e]&&(this.values[e]=null)}getValue(e){for(var t,i=19;i--;)t=this.values[e][i],0==this.ready&&0!==t&&(this.ready=1),this.key[i]=t}reset(){this.ready=0}fix(e,t){let i=Number(e.toString().substring(0,5));return t&&i<t&&i>-t&&(i=0),i}}class Gx{constructor(){this.id=0,this.list=[],this.type="item",this.Utils=null}reset(){let e=this.list.length;for(;e--;)this.dispose(this.list[e]);this.list=[],this.id=0}byName(e){return this.Utils.byName(e)}setName(e={}){let t=void 0!==e.name?e.name:this.type+this.id++;return e.id=this.remove(t,!0),e.name=t,t}addToWorld(e,t=-1){this.Utils.add(e),-1!==t?this.list[t]=e:this.list.push(e)}remove(e,t){let i=this.byName(e);return i?this.clear(i,t):-1}clear(e,t){let i=this.list.indexOf(e);return-1===i||t?this.list[i]=null:this.list.splice(i,1),this.dispose(e),i}dispose(e){null!==e&&this.Utils.remove(e)}add(e={}){}set(e={}){}step(e,t){}}class Nx extends Gx{constructor(e){super(),this.motor=e,this.Utils=this.motor.utils,this.type="ray",this.iType="ray"}step(e,t){let i,s,n=this.list.length;for(;n--;)i=this.list[n],s=t+n*Sx.ray,i.update(e,s,this.motor.reflow.ray[n]||null)}add(e={}){this.setName(e);let t=new Vx(e,this.motor);return t.visible=void 0===e.visible||e.visible,this.addToWorld(t,e.id),e.parent&&"string"!=typeof e.parent&&(e.parent=e.parent.name),e.callback&&delete e.callback,this.motor.post({m:"add",o:e}),t}set(e={},t=null){null===t&&(t=this.byName(e.name)),null!==t&&t.setRay(e)}}class Vx extends i.Line{constructor(e={},t){super(new i.BufferGeometry,t.getMat("line")),this.motor=t,this.Utils=this.motor.utils,this.isRay=!0,this.data={hit:!1,body:"",point:[0,0,0],normal:[0,0,0],distance:0,angle:0,parent:null},this.type="ray",this.name=e.name,this.parentMesh=null,e.parent&&(this.parentMesh="string"==typeof e.parent?this.Utils.byName(e.parent):e.parent,this.data.parent=this.parentMesh),this.callback=e.callback||null,this.c0=[.1,.1,.3],this.c1=[.1,.4,.6],this.c2=[1,.1,.1],this.c3=[.1,1,.1],this.begin=new i.Vector3,this.end=new i.Vector3(0,1,0),this.tmp=new i.Vector3,this.vnormal=new i.Vector3,this.vv1=new i.Vector3,this.vv2=new i.Vector3,this.fullDistance=0,this.setRay(e);this.geometry.setAttribute("position",new i.Float32BufferAttribute([0,0,0,0,0,0,0,0,0],3)),this.geometry.setAttribute("color",new i.Float32BufferAttribute([0,0,0,0,0,0,0,0,0],3)),this.vertices=this.geometry.attributes.position,this.colors=this.geometry.attributes.color,this.local=[0,0,0,0,0,0,0,0,0],this.matrixAutoUpdate=!1,this.frustumCulled=!1}setRay(e){e.begin&&this.begin.fromArray(e.begin),e.end&&this.end.fromArray(e.end),this.fullDistance=this.begin.distanceTo(this.end)}update(e,t=0,i=null){if(this.data.hit=0!==e[t],this.data.body=i||"",this.data.distance=e[t+1],this.data.hit)this.local[0]=e[t+2],this.local[1]=e[t+3],this.local[2]=e[t+4],this.tmp.fromArray(e,t+5),this.vnormal.fromArray(e,t+8),this.data.point=this.tmp.toArray(),this.data.normal=this.vnormal.toArray(),this.tmp.toArray(this.local,3),this.vv1.fromArray(this.local).sub(this.tmp).normalize(),this.tmp.addScaledVector(this.vnormal,this.fullDistance-this.data.distance),this.tmp.toArray(this.local,6),this.data.angle=Math.floor(gx.angleTo(this.vv1.toArray(),this.data.normal)*ux);else if(this.parentMesh){const e=this.parentMesh.matrixWorld;this.tmp.copy(this.begin).applyMatrix4(e).toArray(this.local,0),this.tmp.copy(this.end).applyMatrix4(e),this.tmp.toArray(this.local,3),this.tmp.toArray(this.local,6)}else this.begin.toArray(this.local,0),this.end.toArray(this.local,3),this.end.toArray(this.local,6);this.updateGeometry(),this.updateMatrix(),this.callback&&this.callback(this.data)}dispose(){this.callback=null,this.parentMesh=null,this.data={},this.geometry.dispose()}raycast(){}updateGeometry(){if(!this.visible)return;let e=this.vertices.array,t=this.colors.array,i=this.local,s=this.data.hit,n=s?this.c2:this.c1,r=s?this.c3:this.c1;t[3]=n[0],t[4]=n[1],t[5]=n[2],t[6]=r[0],t[7]=r[1],t[8]=r[2],e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],this.vertices.needsUpdate=!0,this.colors.needsUpdate=!0}}let jx=0;const Hx=new i.Vector3,qx=new i.Quaternion,Xx=new i.Matrix4,Wx=new i.Vector3,Zx=new i.Vector3,Yx=new i.Vector3,_x=new i.Quaternion,Kx=new i.Vector3(1,0,0),Jx=new i.Vector3(0,1,0),$x=new i.Vector3(0,0,1),eO={type:"added"},tO={type:"removed"};class iO extends i.EventDispatcher{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:jx++}),this.uuid=i.MathUtils.generateUUID(),this.isRay=!0,this.matrix=new i.Matrix4,this.matrixWorld=new i.Matrix4,this.name="",this.type="Object3D",this.children=[],this.parent=null,this.position=new i.Vector3,this.quaternion=new i.Quaternion,this.tmpRotation=new i.Euler,this.scale=new i.Vector3(1,1,1),this.isKinematic=!1,this.matrixAutoUpdate=!1,this.matrixWorldNeedsUpdate=!1,this.layers=new i.Layers,this.visible=!0,this.isVisible=!0,this.frustumCulled=!0,this.renderOrder=0,this.userData={},this.mass=0,this.density=0,this.inertia=new i.Vector3(1,1,1),this.shapetype="box",this.size=[1,1,1],this.velocity=new i.Vector3,this.angular=new i.Vector3,this.defMat=!1,this.actif=!1,this.auto=!1,this.sleep=!1,this.mesh=null,this.meshSize=1,this.linked=[],this.isOver=!1,this.overMaterial=null}clearOutLine(){this.overMaterial&&this.outline&&(this.remove(this.outline),this.outline=null)}addOutLine(){this.overMaterial&&this.children[0].isMesh&&(this.outline=(new i.Mesh).copy(this.children[0]),this.outline.name="outline",this.outline.material=this.overMaterial,this.outline.matrixAutoUpdate=!1,this.outline.receiveShadow=!1,this.outline.castShadow=!1,this.outline.raycast=()=>!1,this.add(this.outline))}over(e){e&&!this.isOver&&(this.isOver=!0,this.addOutLine()),!e&&this.isOver&&(this.isOver=!1,this.clearOutLine())}select(e){}dispose(){this.clearOutLine(),this.traverse((function(e){e.isMesh&&e.unic&&e.geometry.dispose()})),this.children=[]}set receiveShadow(e){this.traverse((function(t){t.isMesh&&(t.receiveShadow=e)}))}get receiveShadow(){return!!this.children[0]&&this.children[0].receiveShadow}set castShadow(e){this.traverse((function(t){t.isMesh&&(t.castShadow=e)}))}get castShadow(){return!!this.children[0]&&this.children[0].castShadow}set material(e){this.traverse((function(t){t.isMesh&&"outline"!==t.name&&(t.material=e)}))}get material(){return this.children,this.children[0]?this.children[0].material:null}set rotation(e){this.tmpRotation=e,quaternion.setFromEuler(this.tmpRotation,!1)}get rotation(){return this.tmpRotation.setFromQuaternion(this.quaternion,void 0,!1)}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return qx.setFromAxisAngle(e,t),this.quaternion.multiply(qx),this}rotateOnWorldAxis(e,t){return qx.setFromAxisAngle(e,t),this.quaternion.premultiply(qx),this}rotateX(e){return this.rotateOnAxis(Kx,e)}rotateY(e){return this.rotateOnAxis(Jx,e)}rotateZ(e){return this.rotateOnAxis($x,e)}translateOnAxis(e,t){return Hx.copy(e).applyQuaternion(this.quaternion),this.position.add(Hx.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(Kx,e)}translateY(e){return this.translateOnAxis(Jx,e)}translateZ(e){return this.translateOnAxis($x,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(Xx.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?Wx.copy(e):Wx.set(e,t,i);const s=this.parent;this.updateWorldMatrix(!0,!1),Zx.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Xx.lookAt(Zx,Wx,this.up):Xx.lookAt(Wx,Zx,this.up),this.quaternion.setFromRotationMatrix(Xx),s&&(Xx.extractRotation(s.matrixWorld),qx.setFromRotationMatrix(Xx),this.quaternion.premultiply(qx.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(eO)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(tO)),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){const e=this.children;let t=e.length;for(;t--;){const i=e[t];i.parent=null,i.dispatchEvent(tO)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Xx.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Xx.multiply(e.parent.matrixWorld)),e.applyMatrix4(Xx),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;const i=this.children;let s=i.length;for(;s--;){const n=i[s].getObjectByProperty(e,t);if(void 0!==n)return n}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Zx,e,Yx),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Zx,_x,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}setRaycast(e){if(void 0!==e&&(this.isRay=e),!this.isRay){let e=this.children.length;for(;e--;){let t=this.children[e].children.length;for(;t--;)this.children[e].children[t].raycast=()=>{};this.children[e].raycast=()=>{}}}}raycast(e,t){if(!this.isRay)return;const i=this.children;let s=i.length;for(;s--;)i[s].layers.test(e.layers)&&i[s].raycast(e,t)}traverse(e){e(this);const t=this.children;let i=t.length;for(;i--;)t[i].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;let i=t.length;for(;i--;)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;let i=t.length;for(;i--;)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(!0===e&&null!==i&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const e=this.children;let t=e.length;for(;t--;)e[t].updateWorldMatrix(!1,!0)}}}class sO extends i.InstancedMesh{constructor(e,t,s=0){super(e,t,s),this.matrixAutoUpdate=!1,this.tmpMatrix=new i.Matrix4,this.tmpQuat=new i.Quaternion,this.instanceUv=null,this.instanceColor=null,this.needSphereUp=!1,this.isRay=!0,this.overMaterial=null,this.currentOver=-1,this.isOver=!1,this.outline=null,this.tmpElement=[]}clearOutLine(){this.overMaterial&&this.outline&&(this.parent.remove(this.outline),this.outline=null,this.currentOver=-1)}addOutLine(e){this.overMaterial&&(this.outline||(this.outline=new i.Mesh(this.geometry,this.overMaterial)),this.outline.matrixAutoUpdate=!1,this.tmpMatrix.fromArray(this.instanceMatrix.array,16*e.id),this.outline.matrix.copy(this.tmpMatrix),this.outline.matrixWorldNeedsUpdate=!0,this.parent.add(this.outline),this.currentOver=e.id)}over(e){e&&!this.instance.isOver&&(this.instance.isOver=!0,this.instance.addOutLine(this)),!e&&this.instance.isOver&&(this.instance.isOver=!1,this.instance.clearOutLine())}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new i.InstancedBufferAttribute(new Float32Array(3*this.instanceMatrix.count),3)),t.isColor&&(t=t.toArray());let s=3*e;this.instanceColor.array[s]=t[0],this.instanceColor.array[s+1]=t[1],this.instanceColor.array[s+2]=t[2]}add(e,t=[0,0,0],s=[0,0,0,1],n=[1,1,1],r=null,o=null){3===s.length&&(s=this.tmpQuat.setFromEuler({_x:s[0],_y:s[1],_z:s[2],_order:"XYZ"},!1).toArray()),r&&(r.isColor&&(r=r.toArray()),null===this.instanceColor&&(this.instanceColor=new i.InstancedBufferAttribute(new Float32Array(3*this.instanceMatrix.count),3))),this.expand(t,s,n,r,o),this.tmpElement.push(e)}slice(e,t,i){let s=new Float32Array(i-t);for(let n=0;n<t+i;++n)s[n]=e[t+n];return s}remove(e){if(!this.count)return;this.tmpElement.splice(e,1);let t=[...this.instanceMatrix.array];t.splice(16*e,16),this.instanceMatrix=new i.InstancedBufferAttribute(new Float32Array(t),16),null!==this.instanceColor&&(t=[...this.instanceColor.array],t.splice(3*e,3),this.instanceColor=new i.InstancedBufferAttribute(new Float32Array(t),3)),null!==this.instanceUv&&(t=[...this.instanceUv.array],t.splice(2*e,2),this.instanceUv=new i.InstancedBufferAttribute(new Float32Array(t),2)),this.count--,this.reDistribute()}reDistribute(){let e=this.count;for(;e--;)this.tmpElement[e].id=e}getIDName(e){return this.tmpElement[e].name}getBodyList(){let e=[],t=this.count;for(;t--;)e.push(this.tmpElement[t].name);return e}expand(e,t,s,n=[1,1,1],r){let o=null!==this.instanceMatrix?this.instanceMatrix.array:[];this.tmpMatrix.compose({x:e[0],y:e[1],z:e[2]},{_x:t[0],_y:t[1],_z:t[2],_w:t[3]},{x:s[0],y:s[1],z:s[2]}),this.instanceMatrix=new i.InstancedBufferAttribute(new Float32Array([...o,...this.tmpMatrix.toArray()]),16),null!==this.instanceColor&&(o=this.instanceColor.array,this.instanceColor=new i.InstancedBufferAttribute(new Float32Array([...o,...n]),3)),this.count++}setTransformAt(e,t,i,s){this.tmpMatrix.compose({x:t[0],y:t[1],z:t[2]},{_x:i[0],_y:i[1],_z:i[2],_w:i[3]},{x:s[0],y:s[1],z:s[2]}),this.tmpMatrix.toArray(this.instanceMatrix.array,16*e),this.needSphereUp=!0,this.outline&&this.currentOver===e&&(this.outline.matrix.copy(this.tmpMatrix),this.outline.matrixWorldNeedsUpdate=!0)}dispose(){this.clearOutLine(),this.parent.remove(this),this.geometry.dispose(),this.instanceColor=null,this.count=0,this.tmpElement=[],this.dispatchEvent({type:"dispose"})}setRaycast(e){void 0!==e&&(this.isRay=e)}raycast(e,t){this.isRay&&(this.instanceMatrix.needsUpdate=!0,super.raycast(e,t))}update(){this.instanceMatrix&&(this.instanceMatrix.needsUpdate=!0),this.instanceColor&&(this.instanceColor.needsUpdate=!0),this.needSphereUp&&this.computeBoundingSphere(),this.needSphereUp=!1,this.updateMatrix()}}class nO{constructor(e=0,t=0,i=0,s=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=s}set(e,t,i,s){return this._x=e,this._y=t,this._z=i,this._w=s,this}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}}class rO extends i.BufferGeometry{constructor(e=1,t=10,s=10,n=10,r=1){super(),this.type="SphereBox",this.name="SphereBox_"+e+"_"+t+"_"+s+"_"+n+"_"+r,e=e||1,t=Math.floor(t),s=Math.floor(s),n=Math.floor(n);let o,a=new i.BoxGeometry(1,1,1,t,s,n),l=new i.Vector3,h=new i.Vector3,c=a.attributes.position.array,d=a.attributes.normal.array;for(let t=0,i=a.attributes.position.count;t<i;t++)o=3*t,l.set(c[o],c[o+1],c[o+2]),h.copy(l).normalize(),l.lerp(h,r).multiplyScalar(e),c[o]=l.x,c[o+1]=l.y,c[o+2]=l.z,l.normalize(),d[o]=l.x,d[o+1]=l.y,d[o+2]=l.z;this.copy(a)}}class oO extends i.BufferGeometry{constructor(e=1,t=1,s=12,n=1){super(),this.type="CapsuleGeometry";let r=Math.PI,o=e/(2*e+t),a=1-2*o;s=Math.floor(s),n=Math.floor(n);let l=Math.floor(.5*s),h=2*Math.PI,c=.5*Math.PI,d=new i.CylinderGeometry(e,e,t,s,n,!0);dO(d,0,o,1,a);let u=new i.SphereGeometry(e,s,l,0,h,0,c);dO(u,0,1-o,1,o);let p=new i.SphereGeometry(e,s,l,0,h,c,c);dO(p,0,0,1,o);let f=(new i.Matrix4).makeRotationY(.5*-r),m=(new i.Matrix4).makeTranslation(0,.5*t,0),g=(new i.Matrix4).makeTranslation(0,.5*-t,0);d.applyMatrix4(f),u.applyMatrix4(m),p.applyMatrix4(g);let A=xe(ye([d,u,p]));this.copy(A)}}class aO extends i.BufferGeometry{constructor(e=1,t=.4,s=8,n=6,r=2*Math.PI,o=0,a=Math.PI){super(),this.type="TorusGeometryFix",this.parameters={radius:e,tube:t,radialSegments:s,tubularSegments:n,arc:r},s=Math.floor(s),n=Math.floor(n);const l=[],h=[],c=[],d=[],u=new i.Vector3,p=new i.Vector3,f=new i.Vector3;let m,g;for(m=0;m<=s;m++)for(g=0;g<=n;g++){const i=g/n*r,l=m/s*a+o;p.x=(e+t*Math.cos(l))*Math.cos(i),p.y=(e+t*Math.cos(l))*Math.sin(i),p.z=t*Math.sin(l),h.push(p.x,p.y,p.z),u.x=e*Math.cos(i),u.y=e*Math.sin(i),f.subVectors(p,u).normalize(),c.push(f.x,f.y,f.z),d.push(g/n),d.push(m/s)}for(m=1;m<=s;m++)for(g=1;g<=n;g++){const e=(n+1)*m+g-1,t=(n+1)*(m-1)+g-1,i=(n+1)*(m-1)+g,s=(n+1)*m+g;l.push(e,t,s),l.push(t,i,s)}this.setIndex(l),this.setAttribute("position",new i.Float32BufferAttribute(h,3)),this.setAttribute("normal",new i.Float32BufferAttribute(c,3)),this.setAttribute("uv",new i.Float32BufferAttribute(d,2))}}class lO extends i.BufferGeometry{constructor(e=1,t=1,s=1,n=.01,r=12,o=1,a=2){super(),this.type="ChamferCyl",r=Math.floor(r),o=Math.floor(o),a=Math.floor(a);let l=new i.Matrix4,h=new i.Matrix4,c=Math.PI,d=.5*c,u=2*c,p=n/s,f=1-2*p,m=new i.CylinderGeometry(e,t,s-2*n,r,o,!0,0);l.makeRotationY(d),m.applyMatrix4(l),dO(m,0,p,1,f);let g=new aO(e-n,n,a,r,u,0,d),A=new i.CircleGeometry(e-n,r);h.makeTranslation(0,0,n),A.applyMatrix4(h),dO(g,0,1-p,1,p);let b=ye([g,A]);l.makeTranslation(0,0,.5*s-n),h.makeRotationX(-d),b.applyMatrix4(h.multiply(l)),g=new aO(t-n,n,a,r,u,0,d),A=new i.CircleGeometry(t-n,r),h.makeTranslation(0,0,n),A.applyMatrix4(h),dO(g,0,1-p,1,p,!0);let v=ye([g,A]);l.makeTranslation(0,0,.5*s-n),h.makeRotationX(d),v.applyMatrix4(h.multiply(l));let y=xe(ye([b,m,v]));this.copy(y)}}class hO extends i.BufferGeometry{constructor(e=1,t=1,s=1,n=.01,r=1,o=1,a=1,l=2){super(),this.type="ChamferBox",r=Math.floor(r),o=Math.floor(o),a=Math.floor(a),l=Math.floor(l);let h=Math.PI,c=.5*h,d=2*n,u=.5*e,p=.5*t,f=.5*s,m=new i.Matrix4,g=new i.Matrix4,A=new i.Matrix4,b=n/e,v=1-2*b,y=n/t,w=1-2*b,x=n/s,O=1-2*x,C=new i.PlaneGeometry(e-d,t-d,r,o),S=new i.CylinderGeometry(n,n,e-d,l,r,!0,0,c),I=new i.CylinderGeometry(n,n,t-d,l,o,!0,0,c),E=new cO(n,l,l,0,c,0,-c),k=new cO(n,l,l,0,c,0,-c);dO(C,-b,y,v,w),dO(S,0,b,y,v),g.makeTranslation(0,p-n,0),m.makeRotationX(c),E.applyMatrix4(g.multiply(m)),g.makeTranslation(0,-p+n,0),m.makeRotationX(c),A.makeRotationY(-c),k.applyMatrix4(g.multiply(m).multiply(A));let B=ye([I,E,k]),Q=B.clone();g.makeTranslation(u-n,0,-n),B.applyMatrix4(g),g.makeTranslation(-u+n,0,-n),m.makeRotationZ(h),Q.applyMatrix4(g.multiply(m));let M=S.clone();m.makeRotationZ(c),g.makeTranslation(0,p-n,-n),S.applyMatrix4(g.multiply(m)),g.makeTranslation(0,-p+n,-n),m.makeRotationZ(-c),M.applyMatrix4(g.multiply(m));let T=ye([S,M,C,B,Q]),D=T.clone();g.makeTranslation(0,0,f),T.applyMatrix4(g),g.makeTranslation(0,0,-f),m.makeRotationY(h),D.applyMatrix4(g.multiply(m)),C=new i.PlaneGeometry(s-d,t-d,a,o),S=new i.CylinderGeometry(n,n,s-d,l,a,!0,0,c),M=S.clone(),dO(C,-x,y,O,w),g.makeTranslation(0,-(p-n),-n,0),m.makeRotationZ(-c),S.applyMatrix4(g.multiply(m)),g.makeTranslation(0,p-n,-n,0),m.makeRotationZ(c),M.applyMatrix4(g.multiply(m));let R=ye([S,M,C]),P=R.clone();g.makeTranslation(-u,0,0),m.makeRotationY(-c),R.applyMatrix4(g.multiply(m)),g.makeTranslation(u,0,0),m.makeRotationY(c),P.applyMatrix4(g.multiply(m)),C=new i.PlaneGeometry(e-d,s-d,r,a),dO(C,-b,x,v,O);let L=C.clone();g.makeTranslation(0,p,0),m.makeRotationX(-c),C.applyMatrix4(g.multiply(m)),g.makeTranslation(0,-p,0),m.makeRotationX(c),L.applyMatrix4(g.multiply(m));let F=xe(ye([T,D,R,P,C,L]));uO(F,"box"),this.copy(F)}}class cO extends i.BufferGeometry{constructor(e=1,t=8,s=6,n=0,r=2*Math.PI,o=0,a=Math.PI){super(),this.type="SphereGeometryFix",this.parameters={radius:e,widthSegments:t,heightSegments:s,phiStart:n,phiLength:r,thetaStart:o,thetaLength:a},t=Math.floor(t),s=Math.floor(s);const l=Math.min(o+a,Math.PI);let h=0;const c=[],d=new i.Vector3,u=new i.Vector3,p=[],f=[],m=[],g=[];for(let i=0;i<=s;i++){const p=[],A=i/s;let b=0;0==i&&0==o?b=.5/t:i==s&&l==Math.PI&&(b=-.5/t);for(let i=0;i<=t;i++){const s=i/t;d.x=-e*Math.cos(n+s*r)*Math.sin(o+A*a),d.y=e*Math.cos(o+A*a),d.z=e*Math.sin(n+s*r)*Math.sin(o+A*a),f.push(d.x,d.y,d.z),u.copy(d).normalize(),m.push(u.x,u.y,u.z),g.push(s+b,1-A),p.push(h++)}c.push(p)}for(let e=0;e<s;e++)for(let i=0;i<t;i++){const t=c[e][i+1],n=c[e][i],r=c[e+1][i],a=c[e+1][i+1];(0!==e||o>0)&&p.push(t,n,a),(e!==s-1||l<Math.PI)&&p.push(n,r,a)}this.setIndex(p),this.setAttribute("position",new i.Float32BufferAttribute(f,3)),this.setAttribute("normal",new i.Float32BufferAttribute(m,3)),this.setAttribute("uv",new i.Float32BufferAttribute(g,2))}}function dO(e,t=0,i=0,s=1,n=1,r){let o=e.attributes.uv,a=o.array,l=o.count,h=0;for(;l--;)h=2*l,a[h]=a[h]*s-t,a[h+1]=a[h+1]*n+i,r&&(a[h]=1-a[h],a[h+1]=1-a[h+1])}function uO(e,t="sphere",s,n=[0,0,0],r=[0,0,0,1],o){if(void 0===o&&(o=new i.Matrix4),o.compose({x:n[0],y:n[1],z:n[2]},{_x:r[0],_y:r[1],_z:r[2],_w:r[3]},{x:1,y:1,z:1}),void 0===s){e.boundingBox||e.computeBoundingBox();let t=e.boundingBox;s=Math.max(t.max.x-t.min.x,t.max.y-t.min.y,t.max.z-t.min.z)}let a=new i.Box3(new i.Vector3(-s/2,-s/2,-s/2),new i.Vector3(s/2,s/2,s/2)),l=[];l.length=2*e.attributes.position.count,void 0===e.attributes.uv&&e.setAttribute("uv",new i.Float32BufferAttribute(l,2));let h,c,d,u,p,f=function(e,t,s){e.applyMatrix4(o),t.applyMatrix4(o),s.applyMatrix4(o);let n=1/(2*Math.PI),r=1/Math.PI;return e.normalize(),t.normalize(),s.normalize(),{uv0:new i.Vector2(.5-Math.atan(e.z,-e.x)*n,.5-Math.asin(e.y)*r),uv1:new i.Vector2(.5-Math.atan(t.z,-t.x)*n,.5-Math.asin(t.y)*r),uv2:new i.Vector2(.5-Math.atan(s.z,-s.x)*n,.5-Math.asin(s.y)*r)}},m=function(e,t,n){e.applyMatrix4(o),t.applyMatrix4(o),n.applyMatrix4(o);let r=new i.Vector3;r.crossVectors(t.clone().sub(e),t.clone().sub(n)).normalize(),r.x<0||r.y<0||r.z,r.x=Math.abs(r.x),r.y=Math.abs(r.y),r.z=Math.abs(r.z);let l=new i.Vector2,h=new i.Vector2,c=new i.Vector2,d=1/s;return r.y>r.x&&r.y>r.z?(l.set(e.x-a.min.x,a.max.z-e.z).multiplyScalar(d),h.set(t.x-a.min.x,a.max.z-t.z).multiplyScalar(d),c.set(n.x-a.min.x,a.max.z-n.z).multiplyScalar(d)):r.x>r.y&&r.x>r.z?(l.set(e.z-a.min.z,e.y-a.min.y).multiplyScalar(d),h.set(t.z-a.min.z,t.y-a.min.y).multiplyScalar(d),c.set(n.z-a.min.z,n.y-a.min.y).multiplyScalar(d)):r.z>r.y&&r.z>r.x&&(l.set(e.x-a.min.x,e.y-a.min.y).multiplyScalar(d),h.set(t.x-a.min.x,t.y-a.min.y).multiplyScalar(d),c.set(n.x-a.min.x,n.y-a.min.y).multiplyScalar(d)),{uv0:l,uv1:h,uv2:c}},g=new i.Vector3,A=new i.Vector3,b=new i.Vector3;new i.Vector3,new i.Vector3,new i.Vector3;const v=e.getAttribute("position");if(e.getAttribute("normal"),e.index)for(h=0;h<e.index.count;h+=3)c=e.index.getX(h+0),d=e.index.getX(h+1),u=e.index.getX(h+2),g.fromBufferAttribute(v,c),A.fromBufferAttribute(v,d),b.fromBufferAttribute(v,u),p="sphere"===t?f(g,A,b):m(g,A,b),l[2*c]=p.uv0.x,l[2*c+1]=p.uv0.y,l[2*d]=p.uv1.x,l[2*d+1]=p.uv1.y,l[2*u]=p.uv2.x,l[2*u+1]=p.uv2.y;else for(h=0;h<v.count;h+=3){g.fromBufferAttribute(v,h+0),A.fromBufferAttribute(v,h+1),b.fromBufferAttribute(v,h+2),p="sphere"===t?f(g,A,b):m(g,A,b);let e=h,i=h+1,s=h+2;l[2*e]=p.uv0.x,l[2*e+1]=p.uv0.y,l[2*i]=p.uv1.x,l[2*i+1]=p.uv1.y,l[2*s]=p.uv2.x,l[2*s+1]=p.uv2.y}e.attributes.uv.array=new Float32Array(l),e.attributes.uv.needsUpdate=!0}const pO=new i.Vector3,fO=new i.Line3,mO=new i.Plane,gO=new i.Vector3,AO=new i.Triangle;class bO{constructor(){this.tolerance=-1,this.faces=[],this.newFaces=[],this.assigned=new xO,this.unassigned=new xO,this.vertices=[]}setFromPoints(e){if(e.length>=4){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.vertices.push(new wO(e[t]));this.compute()}return this}setFromObject(e){const t=[];return e.updateMatrixWorld(!0),e.traverse((function(e){const s=e.geometry;if(void 0!==s){const n=s.attributes.position;if(void 0!==n)for(let s=0,r=n.count;s<r;s++){const r=new i.Vector3;r.fromBufferAttribute(n,s).applyMatrix4(e.matrixWorld),t.push(r)}}})),this.setFromPoints(t)}containsPoint(e){const t=this.faces;for(let i=0,s=t.length;i<s;i++){if(t[i].distanceToPoint(e)>this.tolerance)return!1}return!0}intersectRay(e,t){const i=this.faces;let s=-1/0,n=1/0;for(let t=0,r=i.length;t<r;t++){const r=i[t],o=r.distanceToPoint(e.origin),a=r.normal.dot(e.direction);if(o>0&&a>=0)return null;const l=0!==a?-o/a:0;if(!(l<=0)&&(a>0?n=Math.min(l,n):s=Math.max(l,s),s>n))return null}return s!==-1/0?e.at(s,t):e.at(n,t),t}intersectsRay(e){return null!==this.intersectRay(e,pO)}makeEmpty(){return this.faces=[],this.vertices=[],this}addVertexToFace(e,t){return e.face=t,null===t.outside?this.assigned.append(e):this.assigned.insertBefore(t.outside,e),t.outside=e,this}removeVertexFromFace(e,t){return e===t.outside&&(null!==e.next&&e.next.face===t?t.outside=e.next:t.outside=null),this.assigned.remove(e),this}removeAllVerticesFromFace(e){if(null!==e.outside){const t=e.outside;let i=e.outside;for(;null!==i.next&&i.next.face===e;)i=i.next;return this.assigned.removeSubList(t,i),t.prev=i.next=null,e.outside=null,t}}deleteFaceVertices(e,t){const i=this.removeAllVerticesFromFace(e);if(void 0!==i)if(void 0===t)this.unassigned.appendChain(i);else{let e=i;do{const i=e.next;t.distanceToPoint(e.point)>this.tolerance?this.addVertexToFace(e,t):this.unassigned.append(e),e=i}while(null!==e)}return this}resolveUnassignedPoints(e){if(!1===this.unassigned.isEmpty()){let t=this.unassigned.first();do{const i=t.next;let s=this.tolerance,n=null;for(let i=0;i<e.length;i++){const r=e[i];if(0===r.mark){const e=r.distanceToPoint(t.point);if(e>s&&(s=e,n=r),s>1e3*this.tolerance)break}}null!==n&&this.addVertexToFace(t,n),t=i}while(null!==t)}return this}computeExtremes(){const e=new i.Vector3,t=new i.Vector3,s=[],n=[];for(let e=0;e<3;e++)s[e]=n[e]=this.vertices[0];e.copy(this.vertices[0].point),t.copy(this.vertices[0].point);for(let i=0,r=this.vertices.length;i<r;i++){const r=this.vertices[i],o=r.point;for(let t=0;t<3;t++)o.getComponent(t)<e.getComponent(t)&&(e.setComponent(t,o.getComponent(t)),s[t]=r);for(let e=0;e<3;e++)o.getComponent(e)>t.getComponent(e)&&(t.setComponent(e,o.getComponent(e)),n[e]=r)}return this.tolerance=3*Number.EPSILON*(Math.max(Math.abs(e.x),Math.abs(t.x))+Math.max(Math.abs(e.y),Math.abs(t.y))+Math.max(Math.abs(e.z),Math.abs(t.z))),{min:s,max:n}}computeInitialHull(){const e=this.vertices,t=this.computeExtremes(),i=t.min,s=t.max;let n=0,r=0;for(let e=0;e<3;e++){const t=s[e].point.getComponent(e)-i[e].point.getComponent(e);t>n&&(n=t,r=e)}const o=i[r],a=s[r];let l,h;n=0,fO.set(o.point,a.point);for(let t=0,i=this.vertices.length;t<i;t++){const i=e[t];if(i!==o&&i!==a){fO.closestPointToPoint(i.point,!0,gO);const e=gO.distanceToSquared(i.point);e>n&&(n=e,l=i)}}n=-1,mO.setFromCoplanarPoints(o.point,a.point,l.point);for(let t=0,i=this.vertices.length;t<i;t++){const i=e[t];if(i!==o&&i!==a&&i!==l){const e=Math.abs(mO.distanceToPoint(i.point));e>n&&(n=e,h=i)}}const c=[];if(mO.distanceToPoint(h.point)<0){c.push(vO.create(o,a,l),vO.create(h,a,o),vO.create(h,l,a),vO.create(h,o,l));for(let e=0;e<3;e++){const t=(e+1)%3;c[e+1].getEdge(2).setTwin(c[0].getEdge(t)),c[e+1].getEdge(1).setTwin(c[t+1].getEdge(0))}}else{c.push(vO.create(o,l,a),vO.create(h,o,a),vO.create(h,a,l),vO.create(h,l,o));for(let e=0;e<3;e++){const t=(e+1)%3;c[e+1].getEdge(2).setTwin(c[0].getEdge((3-e)%3)),c[e+1].getEdge(0).setTwin(c[t+1].getEdge(1))}}for(let e=0;e<4;e++)this.faces.push(c[e]);for(let t=0,i=e.length;t<i;t++){const i=e[t];if(i!==o&&i!==a&&i!==l&&i!==h){n=this.tolerance;let e=null;for(let t=0;t<4;t++){const s=this.faces[t].distanceToPoint(i.point);s>n&&(n=s,e=this.faces[t])}null!==e&&this.addVertexToFace(i,e)}}return this}reindexFaces(){const e=[];for(let t=0;t<this.faces.length;t++){const i=this.faces[t];0===i.mark&&e.push(i)}return this.faces=e,this}nextVertexToAdd(){if(!1===this.assigned.isEmpty()){let e,t=0;const i=this.assigned.first().face;let s=i.outside;do{const n=i.distanceToPoint(s.point);n>t&&(t=n,e=s),s=s.next}while(null!==s&&s.face===i);return e}}computeHorizon(e,t,i,s){let n;this.deleteFaceVertices(i),i.mark=1,n=null===t?t=i.getEdge(0):t.next;do{const t=n.twin,i=t.face;0===i.mark&&(i.distanceToPoint(e)>this.tolerance?this.computeHorizon(e,t,i,s):s.push(n)),n=n.next}while(n!==t);return this}addAdjoiningFace(e,t){const i=vO.create(e,t.tail(),t.head());return this.faces.push(i),i.getEdge(-1).setTwin(t.twin),i.getEdge(0)}addNewFaces(e,t){this.newFaces=[];let i=null,s=null;for(let n=0;n<t.length;n++){const r=t[n],o=this.addAdjoiningFace(e,r);null===i?i=o:o.next.setTwin(s),this.newFaces.push(o.face),s=o}return i.next.setTwin(s),this}addVertexToHull(e){const t=[];return this.unassigned.clear(),this.removeVertexFromFace(e,e.face),this.computeHorizon(e.point,null,e.face,t),this.addNewFaces(e,t),this.resolveUnassignedPoints(this.newFaces),this}cleanup(){return this.assigned.clear(),this.unassigned.clear(),this.newFaces=[],this}compute(){let e;for(this.computeInitialHull();void 0!==(e=this.nextVertexToAdd());)this.addVertexToHull(e);return this.reindexFaces(),this.cleanup(),this}}class vO{constructor(){this.normal=new i.Vector3,this.midpoint=new i.Vector3,this.area=0,this.constant=0,this.outside=null,this.mark=0,this.edge=null}static create(e,t,i){const s=new vO,n=new yO(e,s),r=new yO(t,s),o=new yO(i,s);return n.next=o.prev=r,r.next=n.prev=o,o.next=r.prev=n,s.edge=n,s.compute()}getEdge(e){let t=this.edge;for(;e>0;)t=t.next,e--;for(;e<0;)t=t.prev,e++;return t}compute(){const e=this.edge.tail(),t=this.edge.head(),i=this.edge.next.head();return AO.set(e.point,t.point,i.point),AO.getNormal(this.normal),AO.getMidpoint(this.midpoint),this.area=AO.getArea(),this.constant=this.normal.dot(this.midpoint),this}distanceToPoint(e){return this.normal.dot(e)-this.constant}}class yO{constructor(e,t){this.vertex=e,this.prev=null,this.next=null,this.twin=null,this.face=t}head(){return this.vertex}tail(){return this.prev?this.prev.vertex:null}length(){const e=this.head(),t=this.tail();return null!==t?t.point.distanceTo(e.point):-1}lengthSquared(){const e=this.head(),t=this.tail();return null!==t?t.point.distanceToSquared(e.point):-1}setTwin(e){return this.twin=e,e.twin=this,this}}class wO{constructor(e){this.point=e,this.prev=null,this.next=null,this.face=null}}class xO{constructor(){this.head=null,this.tail=null}first(){return this.head}last(){return this.tail}clear(){return this.head=this.tail=null,this}insertBefore(e,t){return t.prev=e.prev,t.next=e,null===t.prev?this.head=t:t.prev.next=t,e.prev=t,this}insertAfter(e,t){return t.prev=e,t.next=e.next,null===t.next?this.tail=t:t.next.prev=t,e.next=t,this}append(e){return null===this.head?this.head=e:this.tail.next=e,e.prev=this.tail,e.next=null,this.tail=e,this}appendChain(e){for(null===this.head?this.head=e:this.tail.next=e,e.prev=this.tail;null!==e.next;)e=e.next;return this.tail=e,this}remove(e){return null===e.prev?this.head=e.next:e.prev.next=e.next,null===e.next?this.tail=e.prev:e.next.prev=e.prev,this}removeSubList(e,t){return null===e.prev?this.head=t.next:e.prev.next=t.next,null===t.next?this.tail=e.prev:t.next.prev=e.prev,this}isEmpty(){return null===this.head}}class OO extends i.BufferGeometry{constructor(e=[]){super();const t=[],s=[],n=(new bO).setFromPoints(e).faces;for(let e=0;e<n.length;e++){const i=n[e];let r=i.edge;do{const e=r.head().point;t.push(e.x,e.y,e.z),s.push(i.normal.x,i.normal.y,i.normal.z),r=r.next}while(r!==i.edge)}this.setAttribute("position",new i.Float32BufferAttribute(t,3)),this.setAttribute("normal",new i.Float32BufferAttribute(s,3))}}class CO extends i.Object3D{constructor(e,t,s,n,r=[0,1,0],o=[0,.5,0],a=!1){if(super(),!e)return;if(!t)return;const l=new i.BufferGeometry;let h=.5*t-e,c=12,d=.2*e,u=[];const p=[e,h,0,e,-h,0,-e,h,0,-e,-h,0,0,h,e-d,0,h,e+d];u.push(...r,...o,...r,...o,...o,...o),a&&(p.push(0,h,e,0,-h,e,0,h,-e,0,-h,-e),u.push(...r,...o,...r,...o));for(let t=0,i=1;t<c;t++,i++){const s=t/c*Math.PI*2,n=i/c*Math.PI*2;p.push(e*Math.cos(s),h,e*Math.sin(s),e*Math.cos(n),h,e*Math.sin(n),e*Math.cos(s),-h,e*Math.sin(s),e*Math.cos(n),-h,e*Math.sin(n)),u.push(...r,...r,...o,...o)}for(let t=0,i=1;t<c;t++,i++){const s=t/c*Math.PI*2,n=i/c*Math.PI*2;let l=i<=6?1:-1;p.push(e*Math.cos(s),h*l+e*Math.sin(s),0,e*Math.cos(n),h*l+e*Math.sin(n),0),1===l?u.push(...r,...r):u.push(...o,...o),a&&(p.push(0,h*l+e*Math.sin(s),e*Math.cos(s),0,h*l+e*Math.sin(n),e*Math.cos(n)),1===l?u.push(...r,...r):u.push(...o,...o))}if(l.setAttribute("position",new i.Float32BufferAttribute(p,3)),l.setAttribute("color",new i.Float32BufferAttribute(u,3)),l.computeBoundingSphere(),this.colors=l.attributes.color.array,this.colorsbase=[...this.colors],this.geometry=l,this.cone=new i.LineSegments(l,n),this.cone.raycast=function(){return!1},this.cone.updateMorphTargets=()=>{},this.cone.name="cone",this.add(this.cone),this.isOver=!1,this.matrixAutoUpdate=!1,this.type="CapsuleHelper",!s)return;const f=new i.BufferGeometry,m=[.5*d,-h,e-d,.5*d,-h,e+d,.5*-d,-h,e-d,.5*-d,-h,e+d,.5*d,-h,e-d,.5*-d,-h,e-d,.5*-d,-h,e+d,-d,-h,e+d,.5*d,-h,e+d,d,-h,e+d,-d,-h,e+d,0,-h,e+2*d,d,-h,e+d,0,-h,e+2*d];u=[];let g=m.length/3;for(;g--;)u.push(1,0,0);f.setAttribute("position",new i.Float32BufferAttribute(m,3)),f.setAttribute("color",new i.Float32BufferAttribute(u,3)),this.direction=new i.LineSegments(f,n),this.direction.raycast=function(){return!1},this.add(this.direction)}over(e){e?this.isOver||(this.isOver=!0,this.changeColor(this.isOver)):this.isOver&&(this.isOver=!1,this.changeColor(this.isOver))}changeColor(e){let t=this.colors.length;for(;t--;)this.colors[t]=e?1:this.colorsbase[t];this.geometry&&(this.geometry.attributes.color.needsUpdate=!0)}setDirection(e){this.direction&&(this.direction.rotation.y=e)}dispose(){this.geometry.dispose(),this.cone.geometry.dispose(),this.direction&&this.direction.geometry.dispose()}raycast(){return!1}update(){}}let SO=null,IO=null;class EO extends Gx{constructor(e){super(),this.motor=e,this.engine=this.motor.engine,this.Utils=this.motor.utils,SO=this.motor.geo,IO=this.motor.mat,this.type="body",this.num=Sx[this.type],this.full=!1,this.needMatrix="RAPIER"===this.engine||"HAVOK"===this.engine}setFull(e){this.num=Sx[e?"bodyFull":"body"],this.full=e}step(e,t){const i=this.list;let s,n,r,o=i.length;for(;o--;)if(s=i[o],null!==s&&(n=t+o*this.num,s.actif||(s.actif=!0),s.sleep=!(e[n]>0),s.defMat&&(s.isInstance?s.instance.setColorAt(s.id,s.sleep?Rx.sleep:Rx.body):(s.sleep||"sleep"!==s.material.name||(s.material=IO.get("body")),s.sleep&&"body"===s.material.name&&(s.material=IO.get("sleep")))),!s.sleep||s.isKinematic))if(s.position.fromArray(e,n+1),s.quaternion.fromArray(e,n+4),this.full?(s.velocity.fromArray(e,n+8),s.angular.fromArray(e,n+11)):s.getVelocity&&(r=this.motor.reflow.velocity[s.name],r&&(s.velocity.fromArray(r,0),s.angular.fromArray(r,3))),s.isInstance){if(s.speedMat){let t=.01*e[n];s.instance.setColorAt(s.id,[t,t,t])}s.instance.setTransformAt(s.id,[e[n+1],e[n+2],e[n+3]],[e[n+4],e[n+5],e[n+6],e[n+7]],s.noScale?[1,1,1]:s.size),this.needMatrix&&s.matrixWorld.compose(s.position,s.quaternion,{x:1,y:1,z:1})}else s.auto||s.updateMatrix()}geometry(e={},t=null,s=null){let n,r,o,a=e.size,l="",h=e.type,c=!1,d=!1,u=e.seg||16;const p="OIMO"===this.engine||"JOLT"===this.engine||"AMMO"===this.engine||"CANNON"===this.engine;if(e.instance&&"compound"===h&&(h=e.shapes[0].type,a=e.shapes[0].size,e.translate=e.shapes[0].pos),"mesh"!==h&&"convex"!==h||(e.shape?e.shape.isMesh&&(e.shape=e.shape.geometry):e.mesh&&!e.v&&(e.shape=e.mesh.geometry)),e.radius&&(e.breakable||("box"===h&&(h="ChamferBox"),"cylinder"===h&&(h="ChamferCyl"))),e.geometry&&("convex"===h?e.shape=e.geometry:h="direct"),"PHYSX"===this.engine&&"cylinder"===e.type){let t=new i.CylinderGeometry(e.size[0],e.size[0],e.size[1],u,1);e.isWheel&&t.rotateZ(-fx),e.v=gx.getVertex(t),e.type="convex"}if(("PHYSX"===this.engine||"HAVOK"===this.engine||"JOLT"===this.engine)&&"cone"===e.type){let t=new i.CylinderGeometry(0,e.size[0],e.size[1],u,1);e.v=gx.getVertex(t),e.type="convex"}switch("stair"===e.type&&(e.type="box",h="box"),h){case"direct":n=e.geometry.clone(),e.size&&n.scale(e.size[0],e.size[1],e.size[2]),d=!0,c=!0;break;case"convex":if(e.v){if(e.nogeo)n=new i.BufferGeometry;else{let t=[];for(r=Math.floor(e.v.length/3);r--;)o=3*r,t.push(new i.Vector3(e.v[o],e.v[o+1],e.v[o+2]));n=new OO(t)}d=!0,c=!0}if(e.shape){n=e.shape.clone(),e.size&&n.scale(e.size[0],e.size[0],e.size[0]),e.shapeScale&&n.scale(e.shapeScale[0],e.shapeScale[1],e.shapeScale[2]);let t=p?gx.toNonIndexed(n):null;e.v=gx.getVertex(t||n,p),e.index=gx.getIndex(t||n,p),this.engine,d=!0,c=!0}n.boundingBox||n.computeBoundingBox();let t=n.boundingBox;e.boxSize=[-t.min.x+t.max.x,-t.min.y+t.max.y,-t.min.z+t.max.z];break;case"mesh":n=e.shape.clone(),e.size&&n.scale(e.size[0],e.size[0],e.size[0]),e.v=gx.getVertex(n,p),e.index=gx.getIndex(n,p),d=!0,c=!0;break;case"customSphere":l="customSphere_"+a[0],n=SO.get(l),n?l="":(n=new i.SphereGeometry(a[0],e.seg1||32,e.seg2||16),n.name=l),c=!0,e.type="sphere";break;case"highSphere":l="highSphere_"+a[0],n=SO.get(l),n?l="":(n=new rO(a[0]),n.name=l),c=!0,e.type="sphere";break;case"capsule":l="capsule_"+a[0]+"_"+a[1]+"_"+u,n=SO.get(l),n?l="":(n=new oO(a[0],a[1],u),n.name=l),c=!0;break;case"ChamferBox":l="ChamferBox_"+a[0]+"_"+a[1]+"_"+a[2]+"_"+e.radius,n=SO.get(l),n?l="":(n=new hO(a[0],a[1],a[2],e.radius),n.name=l),c=!0;break;case"ChamferCyl":l="ChamferCyl_"+a[0]+"_"+a[1]+"_"+a[2]+"_"+e.radius+"_"+u,n=SO.get(l),n?l="":(n=new lO(a[0],a[0],a[1],e.radius,u),n.name=l),c=!0;break;default:e.breakable?(n=SO.get(h).clone(),n.scale(a[0],a[1],a[2]),d=!0,c=!0):n=SO.get(h)}if(e.translate&&n.translate(e.translate[0],e.translate[1],e.translate[2]),e.shape&&delete e.shape,e.geometry&&delete e.geometry,(void 0===n.attributes.uv||e.autoUV)&&uO(n,"box",5,e.pos,e.quat),""!==l&&SO.set(n),e.isWheel&&(n=n.clone(),n.rotateZ(-fx),d=!0),d&&SO.unic(n),null===t&&null===s)return n.noScale=c,n;e.meshRemplace&&e.debug&&(s=IO.get("debug"));let f=new i.Mesh(n,s);if(e.button&&(f.isButton=!0),e.helper){let t=e.hcolor||[.3,.1,0],i=e.hcolor2||[.8,.2,0],s=new CO(a[0],a[1]+2*a[0],!1,IO.get("liner"),t,i,!0);f.add(s),f.userData.helper=s}e.localRot&&(e.localQuat=gx.quatFromEuler(e.localRot)),e.localPos&&f.position.fromArray(e.localPos),e.localQuat&&f.quaternion.fromArray(e.localQuat),c||f.scale.fromArray(e.size),void 0!==e.ray&&(e.ray||(f.raycast=()=>{})),e.meshRemplace&&!e.debug||(t.add(f),f.userData.helper&&(t.over=e=>{f.userData.helper.over(e)}))}add(e={}){e.worldScale&&delete(e=this.scaler(e,e.worldScale)).worldScale;let t,s,n,r=0;if(e.instance||(n=this.setName(e)),e.type=void 0===e.type?"box":e.type,"plane"!==e.type||e.visible||(e.visible=!1),"stair"===e.type){let t=new i.Vector3(0,0,e.size[2]),s=new i.Vector3(0,.5*e.size[1],.5*e.size[2]),n=t.angleTo(s),r=t.distanceTo(s);e.rot=[n*ux,0,0],e.size[1]*=e.div||.2,e.size[2]=2*r;let o=new i.Vector3(0,.5*-e.size[1],0);o.applyAxisAngle({x:1,y:0,z:0},n),e.pos[1]+=o.y,e.pos[2]+=o.z}if(e.massCenter&&!Ax.indexOf(this.engine))if("compound"!==e.type)e.shapes=[{type:e.type,pos:e.massCenter,size:e.size}],e.seg&&(e.shapes[0].seg=e.seg),e.radius&&(e.shapes[0].radius=e.radius),delete e.size,e.type="compound";else for(t=0;t<e.shapes.length;t++)s=e.shapes[t],s.pos?s.pos=gx.addArray(s.pos,e.massCenter):s.pos=e.massCenter;void 0!==e.collision&&!1===e.collision&&("PHYSX"===this.engine&&(e.flags=0),"OIMO"===this.engine&&(e.mask=0)),e.pos=void 0===e.pos?[0,0,0]:e.pos,e.quat=void 0===e.quat?[0,0,0,1]:e.quat,void 0!==e.rot&&(e.quat=gx.quatFromEuler(e.rot)),void 0!==e.meshRot&&(e.meshQuat=gx.quatFromEuler(e.meshRot)),e.size=gx.autoSize(e.size,e.type),e.meshScale&&(e.meshScale=gx.autoSize(e.meshScale));let o,a=!1;!1===e.visible&&(e.material="hide"),void 0!==e.material?o=e.material.constructor===String?IO.get(e.material):e.material:(a=!0,o=IO.get(this.type),e.instance&&(o=IO.get("base"))),e.unicMat&&(o=o.clone(),IO.addToTmp(o));let l=e.instance?{}:new iO;if(e.mesh&&!e.instance){"terrain"===e.mesh.type&&(e.noClone=!0);let t=e.noClone?e.mesh:e.mesh.clone();if(t.position.fromArray(e.meshPos||[0,0,0]),e.meshQuat&&t.quaternion.fromArray(e.meshQuat),e.meshSize&&t.scale.set(1,1,1).multiplyScalar(e.meshSize),e.meshScale&&t.scale.fromArray(e.meshScale),!a&&(t.material=o,t.children&&!e.nofullmat))for(let e in t.children)t.children[e].material=o;this.motor.tmpMesh.push(t),e.meshRemplace=!0,l.add(t)}switch(e.type){case"null":break;case"compound":for(t=0;t<e.shapes.length;t++)s=e.shapes[t],s.type=void 0===s.type?"box":s.type,s.size=gx.autoSize(s.size,s.type),s.pos&&(s.localPos=s.pos),void 0!==s.rot&&(s.quat=gx.quatFromEuler(s.rot)),s.quat&&(s.localQuat=s.quat),s.debug=e.debug,s.meshRemplace=e.meshRemplace||!1,e.instance?"convex"===s.type&&(s.v=gx.getVertex(s.shape,!1)):this.geometry(s,l,o),r+=gx.getVolume(s.type,s.size,s.v);break;default:e.instance?"convex"===e.type&&(e.v=gx.getVertex(e.shape,!1)):this.geometry(e,l,o),r=gx.getVolume(e.type,e.size,e.v)}if(l.type=this.type,l.size=e.size,l.shapetype=e.type,l.isKinematic=e.kinematic||!1,l.link=0,l.meshSize=e.meshSize?e.meshSize:1,e.button&&(l.isButton=!0),l.isRay=!0,void 0!==e.ray&&l.setRaycast(e.ray),e.instance||l.setRaycast(),l.defMat=!1,l.material&&a&&(l.defMat="body"===l.material.name),e.instance){l.isInstance=!0,l.instance=this.getInstance(e,o),l.instance.isRay=l.isRay,l.over=l.instance.over,l.isRay=!1,l.isOver=!1,l.speedMat=e.speedMat||!1,l.defMat="base"===l.instance.material.name,l.id=l.instance.count,l.name=e.name?e.name:l.instance.name+l.id,e.name=l.name,l.noScale=l.instance.noScale,e.sizeByInstance&&(l.noScale=!1);let t=e.color;l.defMat&&(t=e.sleep?Rx.sleep:Rx.body),l.instance.add(l,e.pos,e.quat,l.noScale?[1,1,1]:l.size,t),l.position=(new i.Vector3).fromArray(e.pos),l.quaternion=(new nO).fromArray(e.quat),l.velocity=new i.Vector3,l.angular=new i.Vector3,this.needMatrix&&(l.matrixWorld=new i.Matrix4),l.instance.v&&(e.v=l.instance.v),l.instance.index&&(e.index=l.instance.index),e.type=l.instance.type}else l.name=n,e.renderOrder&&(l.renderOrder=e.renderOrder),void 0===e.visible&&(e.visible=!0),void 0===e.shadow&&(e.shadow=e.visible),l.visible=void 0===e.visible||e.visible,l.receiveShadow=e.shadow,l.castShadow=e.shadow,l.overMaterial=IO.get("outline"),this.set(e,l);if(e.breakable){this.motor.addBreaker();let t=l.children[0];l.remove(t),l=t,l.name=n,l.type=this.type,l.density=e.density,l.breakable=!0,l.breakOption=void 0!==e.breakOption?e.breakOption:[250,1,2,1]}if(l.mass=e.mass||0,l.density=e.density||0,l.density&&!l.mass?l.mass=gx.massFromDensity(l.density,r):l.mass&&!l.density&&(l.density=gx.densityFromMass(l.mass,r),"RAPIER"!==this.engine&&"OIMO"!==this.engine||(e.density=l.density)),e.massInfo&&console.log("%c"+l.name+" %cdensity:"+l.density+" mass:"+l.mass,"font-size:16px","font-size:12px"),e.getVelocity&&(l.getVelocity=!0),this.addToWorld(l,e.id),e.onlyMakeMesh)return l;if(e.phySize&&(e.size=e.phySize),e.phyPos&&(e.pos=e.phyPos),e.rot&&delete e.rot,e.mesh&&delete e.mesh,e.meshRot&&delete e.meshRot,e.instance&&delete e.instance,e.material&&delete e.material,e.parent&&delete e.parent,e.solver&&"PHYSX"===this.engine){e.mass=l.mass;this.byName(e.solver).addBone(e.name)}return this.motor.post({m:"add",o:e}),l}set(e={},t=null){null===t&&(t=this.byName(e.name)),null!==t&&(void 0!==e.getVelocity&&(t.getVelocity=e.getVelocity),t.isInstance?(e.pos&&t.position.fromArray(e.pos),e.quat&&t.quaternion.fromArray(e.quat),(e.pos||e.quat)&&t.instance.setTransformAt(t.id,t.position,t.quaternion,t.noScale?[1,1,1]:t.size)):(e.pos&&t.position.fromArray(e.pos),e.quat&&t.quaternion.fromArray(e.quat),t.auto=e.auto||!1,t.auto?t.matrixAutoUpdate=!0:(t.matrixAutoUpdate=!1,t.updateMatrix())))}clearInstance(e){let t=this.motor.instanceMesh[e],i=t.getBodyList();this.motor.remove(i),t.dispose(),delete this.motor.instanceMesh[e]}getInstance(e,t){if(this.motor.instanceMesh[e.instance])return this.motor.instanceMesh[e.instance];(e={...e}).sizeByInstance&&(e.size=[1,1,1]);let i=this.geometry(e);e.mesh&&(!e.material&&e.mesh.material&&(t=e.mesh.material),i=e.mesh.isObject3D?e.mesh.geometry.clone():e.mesh.clone(),e.meshSize&&i.scale(e.meshSize,e.meshSize,e.meshSize),e.meshScale&&i.scale(e.meshScale[0],e.meshScale[1],e.meshScale[2]),i.noScale=!0);let s=new sO(i,t,0);return s.type=e.type,s.noScale=i.noScale,"convex"===s.type&&(s.v=e.v),e.index&&(s.index=e.index),s.receiveShadow=void 0===e.shadow||e.shadow,s.castShadow=void 0===e.shadow||e.shadow,s.overMaterial=IO.get("outline"),s.name=e.instance,this.motor.scene.add(s),this.motor.instanceMesh[e.instance]=s,s}scaler(e,t){if(e.size&&(e.size=math.scaleArray(e.size,t)),e.pos&&(e.pos=math.scaleArray(e.pos,t)),"convex"===e.type&&(e.shapeScale=[t,t,t]),e.shapes){let i,s=e.shapes.length;for(;s--;)i=e.shapes[s],i.size&&(i.size=math.scaleArray(i.size,t)),i.pos&&(i.pos=math.scaleArray(i.pos,t)),"convex"===i.type&&(i.shapeScale=[t,t,t])}return e.mesh&&(e.meshScale=[t,t,t]),e}}const kO=i.SRGBColorSpace;class BO extends i.Loader{constructor(e){super(e),this.defaultDPI=90,this.defaultUnit="px"}load(e,t,s,n){const r=this,o=new i.FileLoader(r.manager);o.setPath(r.path),o.setRequestHeader(r.requestHeader),o.setWithCredentials(r.withCredentials),o.load(e,(function(i){try{t(r.parse(i))}catch(t){n?n(t):console.error(t),r.manager.itemError(e)}}),s,n)}parse(e){const t=this;function s(e,t,i,s,r,o,a,l){if(0==t||0==i)return void e.lineTo(l.x,l.y);s=s*Math.PI/180,t=Math.abs(t),i=Math.abs(i);const h=(a.x-l.x)/2,c=(a.y-l.y)/2,d=Math.cos(s)*h+Math.sin(s)*c,u=-Math.sin(s)*h+Math.cos(s)*c;let p=t*t,f=i*i;const m=d*d,g=u*u,A=m/p+g/f;if(A>1){const e=Math.sqrt(A);p=(t*=e)*t,f=(i*=e)*i}const b=p*g+f*m,v=(p*f-b)/b;let y=Math.sqrt(Math.max(0,v));r===o&&(y=-y);const w=y*t*u/i,x=-y*i*d/t,O=Math.cos(s)*w-Math.sin(s)*x+(a.x+l.x)/2,C=Math.sin(s)*w+Math.cos(s)*x+(a.y+l.y)/2,S=n(1,0,(d-w)/t,(u-x)/i),I=n((d-w)/t,(u-x)/i,(-d-w)/t,(-u-x)/i)%(2*Math.PI);e.currentPath.absellipse(O,C,t,i,S,S+I,0===o,s)}function n(e,t,i,s){const n=e*i+t*s,r=Math.sqrt(e*e+t*t)*Math.sqrt(i*i+s*s);let o=Math.acos(Math.max(-1,Math.min(1,n/r)));return e*s-t*i<0&&(o=-o),o}function r(e,t){t=Object.assign({},t);let i={};if(e.hasAttribute("class")){const t=e.getAttribute("class").split(/\s/).filter(Boolean).map((e=>e.trim()));for(let e=0;e<t.length;e++)i=Object.assign(i,g["."+t[e]])}function s(s,n,r){void 0===r&&(r=function(e){return e.startsWith("url")&&console.warn("SVGLoader: url access in attributes is not implemented."),e}),e.hasAttribute(s)&&(t[n]=r(e.getAttribute(s))),i[s]&&(t[n]=r(i[s])),e.style&&""!==e.style[s]&&(t[n]=r(e.style[s]))}function n(e){return Math.max(0,Math.min(1,c(e)))}function r(e){return Math.max(0,c(e))}return e.hasAttribute("id")&&(i=Object.assign(i,g["#"+e.getAttribute("id")])),s("fill","fill"),s("fill-opacity","fillOpacity",n),s("fill-rule","fillRule"),s("opacity","opacity",n),s("stroke","stroke"),s("stroke-opacity","strokeOpacity",n),s("stroke-width","strokeWidth",r),s("stroke-linejoin","strokeLineJoin"),s("stroke-linecap","strokeLineCap"),s("stroke-miterlimit","strokeMiterLimit",r),s("visibility","visibility"),t}function o(e,t){return e-(t-e)}function a(e,t,i){if("string"!=typeof e)throw new TypeError("Invalid input: "+typeof e);const s={WHITESPACE:/[ \t\r\n]/,DIGIT:/[\d]/,SIGN:/[-+]/,POINT:/\./,COMMA:/,/,EXP:/e/i,FLAGS:/[01]/};let n=0,r=!0,o="",a="";const l=[];function h(e,t,i){const s=new SyntaxError('Unexpected character "'+e+'" at index '+t+".");throw s.partial=i,s}function c(){""!==o&&(""===a?l.push(Number(o)):l.push(Number(o)*Math.pow(10,Number(a)))),o="",a=""}let d;const u=e.length;for(let p=0;p<u;p++)if(d=e[p],Array.isArray(t)&&t.includes(l.length%i)&&s.FLAGS.test(d))n=1,o=d,c();else{if(0===n){if(s.WHITESPACE.test(d))continue;if(s.DIGIT.test(d)||s.SIGN.test(d)){n=1,o=d;continue}if(s.POINT.test(d)){n=2,o=d;continue}s.COMMA.test(d)&&(r&&h(d,p,l),r=!0)}if(1===n){if(s.DIGIT.test(d)){o+=d;continue}if(s.POINT.test(d)){o+=d,n=2;continue}if(s.EXP.test(d)){n=3;continue}s.SIGN.test(d)&&1===o.length&&s.SIGN.test(o[0])&&h(d,p,l)}if(2===n){if(s.DIGIT.test(d)){o+=d;continue}if(s.EXP.test(d)){n=3;continue}s.POINT.test(d)&&"."===o[o.length-1]&&h(d,p,l)}if(3===n){if(s.DIGIT.test(d)){a+=d;continue}if(s.SIGN.test(d)){if(""===a){a+=d;continue}1===a.length&&s.SIGN.test(a)&&h(d,p,l)}}s.WHITESPACE.test(d)?(c(),n=0,r=!1):s.COMMA.test(d)?(c(),n=0,r=!0):s.SIGN.test(d)?(c(),n=1,o=d):s.POINT.test(d)?(c(),n=2,o=d):h(d,p,l)}return c(),l}const l=["mm","cm","in","pt","pc","px"],h={mm:{mm:1,cm:.1,in:1/25.4,pt:72/25.4,pc:6/25.4,px:-1},cm:{mm:10,cm:1,in:1/2.54,pt:72/2.54,pc:6/2.54,px:-1},in:{mm:25.4,cm:2.54,in:1,pt:72,pc:6,px:-1},pt:{mm:25.4/72,cm:2.54/72,in:1/72,pt:1,pc:6/72,px:-1},pc:{mm:25.4/6,cm:2.54/6,in:1/6,pt:12,pc:1,px:-1},px:{px:1}};function c(e){let i,s="px";if("string"==typeof e||e instanceof String)for(let t=0,i=l.length;t<i;t++){const i=l[t];if(e.endsWith(i)){s=i,e=e.substring(0,e.length-i.length);break}}return"px"===s&&"px"!==t.defaultUnit?i=h.in[t.defaultUnit]/t.defaultDPI:(i=h[s][t.defaultUnit],i<0&&(i=h[s].in*t.defaultDPI)),i*parseFloat(e)}function d(e){const t=e.elements;return t[0]*t[4]-t[1]*t[3]<0}function u(e){const t=e.elements,i=t[0]*t[3]+t[1]*t[4];if(0===i)return!1;const s=p(e),n=f(e);return Math.abs(i/(s*n))>Number.EPSILON}function p(e){const t=e.elements;return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function f(e){const t=e.elements;return Math.sqrt(t[3]*t[3]+t[4]*t[4])}const m=[],g={},A=[],b=new i.Matrix3,v=new i.Matrix3,y=new i.Matrix3,w=new i.Matrix3,x=new i.Vector2,O=new i.Vector3,C=new i.Matrix3,S=(new DOMParser).parseFromString(e,"image/svg+xml");!function e(t,n){if(1!==t.nodeType)return;const l=function(e){if(!(e.hasAttribute("transform")||"use"===e.nodeName&&(e.hasAttribute("x")||e.hasAttribute("y"))))return null;const t=function(e){const t=new i.Matrix3,s=b;if("use"===e.nodeName&&(e.hasAttribute("x")||e.hasAttribute("y"))){const i=c(e.getAttribute("x")),s=c(e.getAttribute("y"));t.translate(i,s)}if(e.hasAttribute("transform")){const i=e.getAttribute("transform").split(")");for(let e=i.length-1;e>=0;e--){const n=i[e].trim();if(""===n)continue;const r=n.indexOf("("),o=n.length;if(r>0&&r<o){const e=n.slice(0,r),t=a(n.slice(r+1));switch(s.identity(),e){case"translate":if(t.length>=1){const e=t[0];let i=0;t.length>=2&&(i=t[1]),s.translate(e,i)}break;case"rotate":if(t.length>=1){let e=0,i=0,n=0;e=t[0]*Math.PI/180,t.length>=3&&(i=t[1],n=t[2]),v.makeTranslation(-i,-n),y.makeRotation(e),w.multiplyMatrices(y,v),v.makeTranslation(i,n),s.multiplyMatrices(v,w)}break;case"scale":if(t.length>=1){const e=t[0];let i=e;t.length>=2&&(i=t[1]),s.scale(e,i)}break;case"skewX":1===t.length&&s.set(1,Math.tan(t[0]*Math.PI/180),0,0,1,0,0,0,1);break;case"skewY":1===t.length&&s.set(1,0,0,Math.tan(t[0]*Math.PI/180),1,0,0,0,1);break;case"matrix":6===t.length&&s.set(t[0],t[2],t[4],t[1],t[3],t[5],0,0,1)}}t.premultiply(s)}}return t}(e);A.length>0&&t.premultiply(A[A.length-1]);return C.copy(t),A.push(t),t}(t);let h=!1,S=null;switch(t.nodeName){case"svg":case"g":n=r(t,n);break;case"style":!function(e){if(!e.sheet||!e.sheet.cssRules||!e.sheet.cssRules.length)return;for(let t=0;t<e.sheet.cssRules.length;t++){const i=e.sheet.cssRules[t];if(1!==i.type)continue;const s=i.selectorText.split(/,/gm).filter(Boolean).map((e=>e.trim()));for(let e=0;e<s.length;e++){const t=Object.fromEntries(Object.entries(i.style).filter((([,e])=>""!==e)));g[s[e]]=Object.assign(g[s[e]]||{},t)}}}(t);break;case"path":n=r(t,n),t.hasAttribute("d")&&(S=function(e){const t=new i.ShapePath,n=new i.Vector2,r=new i.Vector2,l=new i.Vector2;let h=!0,c=!1;const d=e.getAttribute("d");if(""===d||"none"===d)return null;const u=d.match(/[a-df-z][^a-df-z]*/gi);for(let e=0,i=u.length;e<i;e++){const i=u[e],d=i.charAt(0),p=i.slice(1).trim();let f;switch(!0===h&&(c=!0,h=!1),d){case"M":f=a(p);for(let e=0,i=f.length;e<i;e+=2)n.x=f[e+0],n.y=f[e+1],r.x=n.x,r.y=n.y,0===e?t.moveTo(n.x,n.y):t.lineTo(n.x,n.y),0===e&&l.copy(n);break;case"H":f=a(p);for(let e=0,i=f.length;e<i;e++)n.x=f[e],r.x=n.x,r.y=n.y,t.lineTo(n.x,n.y),0===e&&!0===c&&l.copy(n);break;case"V":f=a(p);for(let e=0,i=f.length;e<i;e++)n.y=f[e],r.x=n.x,r.y=n.y,t.lineTo(n.x,n.y),0===e&&!0===c&&l.copy(n);break;case"L":f=a(p);for(let e=0,i=f.length;e<i;e+=2)n.x=f[e+0],n.y=f[e+1],r.x=n.x,r.y=n.y,t.lineTo(n.x,n.y),0===e&&!0===c&&l.copy(n);break;case"C":f=a(p);for(let e=0,i=f.length;e<i;e+=6)t.bezierCurveTo(f[e+0],f[e+1],f[e+2],f[e+3],f[e+4],f[e+5]),r.x=f[e+2],r.y=f[e+3],n.x=f[e+4],n.y=f[e+5],0===e&&!0===c&&l.copy(n);break;case"S":f=a(p);for(let e=0,i=f.length;e<i;e+=4)t.bezierCurveTo(o(n.x,r.x),o(n.y,r.y),f[e+0],f[e+1],f[e+2],f[e+3]),r.x=f[e+0],r.y=f[e+1],n.x=f[e+2],n.y=f[e+3],0===e&&!0===c&&l.copy(n);break;case"Q":f=a(p);for(let e=0,i=f.length;e<i;e+=4)t.quadraticCurveTo(f[e+0],f[e+1],f[e+2],f[e+3]),r.x=f[e+0],r.y=f[e+1],n.x=f[e+2],n.y=f[e+3],0===e&&!0===c&&l.copy(n);break;case"T":f=a(p);for(let e=0,i=f.length;e<i;e+=2){const i=o(n.x,r.x),s=o(n.y,r.y);t.quadraticCurveTo(i,s,f[e+0],f[e+1]),r.x=i,r.y=s,n.x=f[e+0],n.y=f[e+1],0===e&&!0===c&&l.copy(n)}break;case"A":f=a(p,[3,4],7);for(let e=0,i=f.length;e<i;e+=7){if(f[e+5]==n.x&&f[e+6]==n.y)continue;const i=n.clone();n.x=f[e+5],n.y=f[e+6],r.x=n.x,r.y=n.y,s(t,f[e],f[e+1],f[e+2],f[e+3],f[e+4],i,n),0===e&&!0===c&&l.copy(n)}break;case"m":f=a(p);for(let e=0,i=f.length;e<i;e+=2)n.x+=f[e+0],n.y+=f[e+1],r.x=n.x,r.y=n.y,0===e?t.moveTo(n.x,n.y):t.lineTo(n.x,n.y),0===e&&l.copy(n);break;case"h":f=a(p);for(let e=0,i=f.length;e<i;e++)n.x+=f[e],r.x=n.x,r.y=n.y,t.lineTo(n.x,n.y),0===e&&!0===c&&l.copy(n);break;case"v":f=a(p);for(let e=0,i=f.length;e<i;e++)n.y+=f[e],r.x=n.x,r.y=n.y,t.lineTo(n.x,n.y),0===e&&!0===c&&l.copy(n);break;case"l":f=a(p);for(let e=0,i=f.length;e<i;e+=2)n.x+=f[e+0],n.y+=f[e+1],r.x=n.x,r.y=n.y,t.lineTo(n.x,n.y),0===e&&!0===c&&l.copy(n);break;case"c":f=a(p);for(let e=0,i=f.length;e<i;e+=6)t.bezierCurveTo(n.x+f[e+0],n.y+f[e+1],n.x+f[e+2],n.y+f[e+3],n.x+f[e+4],n.y+f[e+5]),r.x=n.x+f[e+2],r.y=n.y+f[e+3],n.x+=f[e+4],n.y+=f[e+5],0===e&&!0===c&&l.copy(n);break;case"s":f=a(p);for(let e=0,i=f.length;e<i;e+=4)t.bezierCurveTo(o(n.x,r.x),o(n.y,r.y),n.x+f[e+0],n.y+f[e+1],n.x+f[e+2],n.y+f[e+3]),r.x=n.x+f[e+0],r.y=n.y+f[e+1],n.x+=f[e+2],n.y+=f[e+3],0===e&&!0===c&&l.copy(n);break;case"q":f=a(p);for(let e=0,i=f.length;e<i;e+=4)t.quadraticCurveTo(n.x+f[e+0],n.y+f[e+1],n.x+f[e+2],n.y+f[e+3]),r.x=n.x+f[e+0],r.y=n.y+f[e+1],n.x+=f[e+2],n.y+=f[e+3],0===e&&!0===c&&l.copy(n);break;case"t":f=a(p);for(let e=0,i=f.length;e<i;e+=2){const i=o(n.x,r.x),s=o(n.y,r.y);t.quadraticCurveTo(i,s,n.x+f[e+0],n.y+f[e+1]),r.x=i,r.y=s,n.x=n.x+f[e+0],n.y=n.y+f[e+1],0===e&&!0===c&&l.copy(n)}break;case"a":f=a(p,[3,4],7);for(let e=0,i=f.length;e<i;e+=7){if(0==f[e+5]&&0==f[e+6])continue;const i=n.clone();n.x+=f[e+5],n.y+=f[e+6],r.x=n.x,r.y=n.y,s(t,f[e],f[e+1],f[e+2],f[e+3],f[e+4],i,n),0===e&&!0===c&&l.copy(n)}break;case"Z":case"z":t.currentPath.autoClose=!0,t.currentPath.curves.length>0&&(n.copy(l),t.currentPath.currentPoint.copy(n),h=!0);break;default:console.warn(i)}c=!1}return t}(t));break;case"rect":n=r(t,n),S=function(e){const t=c(e.getAttribute("x")||0),s=c(e.getAttribute("y")||0),n=c(e.getAttribute("rx")||e.getAttribute("ry")||0),r=c(e.getAttribute("ry")||e.getAttribute("rx")||0),o=c(e.getAttribute("width")),a=c(e.getAttribute("height")),l=.448084975506,h=new i.ShapePath;h.moveTo(t+n,s),h.lineTo(t+o-n,s),(0!==n||0!==r)&&h.bezierCurveTo(t+o-n*l,s,t+o,s+r*l,t+o,s+r);h.lineTo(t+o,s+a-r),(0!==n||0!==r)&&h.bezierCurveTo(t+o,s+a-r*l,t+o-n*l,s+a,t+o-n,s+a);h.lineTo(t+n,s+a),(0!==n||0!==r)&&h.bezierCurveTo(t+n*l,s+a,t,s+a-r*l,t,s+a-r);h.lineTo(t,s+r),(0!==n||0!==r)&&h.bezierCurveTo(t,s+r*l,t+n*l,s,t+n,s);return h}(t);break;case"polygon":n=r(t,n),S=function(e){function t(e,t,i){const s=c(t),o=c(i);0===r?n.moveTo(s,o):n.lineTo(s,o),r++}const s=/([+-]?\d*\.?\d+(?:e[+-]?\d+)?)(?:,|\s)([+-]?\d*\.?\d+(?:e[+-]?\d+)?)/g,n=new i.ShapePath;let r=0;return e.getAttribute("points").replace(s,t),n.currentPath.autoClose=!0,n}(t);break;case"polyline":n=r(t,n),S=function(e){function t(e,t,i){const s=c(t),o=c(i);0===r?n.moveTo(s,o):n.lineTo(s,o),r++}const s=/([+-]?\d*\.?\d+(?:e[+-]?\d+)?)(?:,|\s)([+-]?\d*\.?\d+(?:e[+-]?\d+)?)/g,n=new i.ShapePath;let r=0;return e.getAttribute("points").replace(s,t),n.currentPath.autoClose=!1,n}(t);break;case"circle":n=r(t,n),S=function(e){const t=c(e.getAttribute("cx")||0),s=c(e.getAttribute("cy")||0),n=c(e.getAttribute("r")||0),r=new i.Path;r.absarc(t,s,n,0,2*Math.PI);const o=new i.ShapePath;return o.subPaths.push(r),o}(t);break;case"ellipse":n=r(t,n),S=function(e){const t=c(e.getAttribute("cx")||0),s=c(e.getAttribute("cy")||0),n=c(e.getAttribute("rx")||0),r=c(e.getAttribute("ry")||0),o=new i.Path;o.absellipse(t,s,n,r,0,2*Math.PI);const a=new i.ShapePath;return a.subPaths.push(o),a}(t);break;case"line":n=r(t,n),S=function(e){const t=c(e.getAttribute("x1")||0),s=c(e.getAttribute("y1")||0),n=c(e.getAttribute("x2")||0),r=c(e.getAttribute("y2")||0),o=new i.ShapePath;return o.moveTo(t,s),o.lineTo(n,r),o.currentPath.autoClose=!1,o}(t);break;case"defs":h=!0;break;case"use":n=r(t,n);const l=(t.getAttributeNS("http://www.w3.org/1999/xlink","href")||"").substring(1),d=t.viewportElement.getElementById(l);d?e(d,n):console.warn("SVGLoader: 'use node' references non-existent node id: "+l)}S&&(void 0!==n.fill&&"none"!==n.fill&&S.color.setStyle(n.fill,kO),function(e,t){function s(e){O.set(e.x,e.y,1).applyMatrix3(t),e.set(O.x,O.y)}function n(e){const s=e.xRadius,n=e.yRadius,r=Math.cos(e.aRotation),o=Math.sin(e.aRotation),a=new i.Vector3(s*r,s*o,0),l=new i.Vector3(-n*o,n*r,0),h=a.applyMatrix3(t),c=l.applyMatrix3(t),u=b.set(h.x,c.x,0,h.y,c.y,0,0,0,1),p=v.copy(u).invert(),f=y.copy(p).transpose().multiply(p).elements,m=function(e,t,i){let s,n,r,o,a;const l=e+i,h=e-i,c=Math.sqrt(h*h+4*t*t);l>0?(s=.5*(l+c),a=1/s,n=e*a*i-t*a*t):l<0?n=.5*(l-c):(s=.5*c,n=-.5*c);r=h>0?h+c:h-c;Math.abs(r)>2*Math.abs(t)?(a=-2*t/r,o=1/Math.sqrt(1+a*a),r=a*o):0===Math.abs(t)?(r=1,o=0):(a=-.5*r/t,r=1/Math.sqrt(1+a*a),o=a*r);h>0&&(a=r,r=-o,o=a);return{rt1:s,rt2:n,cs:r,sn:o}}(f[0],f[1],f[4]),g=Math.sqrt(m.rt1),A=Math.sqrt(m.rt2);e.xRadius=1/g,e.yRadius=1/A,e.aRotation=Math.atan2(m.sn,m.cs);if(!((e.aEndAngle-e.aStartAngle)%(2*Math.PI)<Number.EPSILON)){const s=v.set(g,0,0,0,A,0,0,0,1),n=y.set(m.cs,m.sn,0,-m.sn,m.cs,0,0,0,1),r=s.multiply(n).multiply(u),o=e=>{const{x:t,y:s}=new i.Vector3(Math.cos(e),Math.sin(e),0).applyMatrix3(r);return Math.atan2(s,t)};e.aStartAngle=o(e.aStartAngle),e.aEndAngle=o(e.aEndAngle),d(t)&&(e.aClockwise=!e.aClockwise)}}function r(e){const i=p(t),s=f(t);e.xRadius*=i,e.yRadius*=s;const n=i>Number.EPSILON?Math.atan2(t.elements[1],t.elements[0]):Math.atan2(-t.elements[3],t.elements[4]);e.aRotation+=n,d(t)&&(e.aStartAngle*=-1,e.aEndAngle*=-1,e.aClockwise=!e.aClockwise)}const o=e.subPaths;for(let e=0,i=o.length;e<i;e++){const i=o[e].curves;for(let e=0;e<i.length;e++){const o=i[e];o.isLineCurve?(s(o.v1),s(o.v2)):o.isCubicBezierCurve?(s(o.v0),s(o.v1),s(o.v2),s(o.v3)):o.isQuadraticBezierCurve?(s(o.v0),s(o.v1),s(o.v2)):o.isEllipseCurve&&(x.set(o.aX,o.aY),s(x),o.aX=x.x,o.aY=x.y,u(t)?n(o):r(o))}}}(S,C),m.push(S),S.userData={node:t,style:n});const I=t.childNodes;for(let t=0;t<I.length;t++){const i=I[t];h&&"style"!==i.nodeName&&"defs"!==i.nodeName||e(i,n)}l&&(A.pop(),A.length>0?C.copy(A[A.length-1]):C.identity())}(S.documentElement,{fill:"#000",fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeLineJoin:"miter",strokeLineCap:"butt",strokeMiterLimit:4});return{paths:m,xml:S.documentElement}}static createShapes(e){const t=999999999,s=0,n=1,r=2,o=3,a=4,l=5,h=6,c={loc:s,t:0};function d(e,t,i,n){const o=e.x,a=t.x,l=i.x,h=n.x,d=e.y,p=t.y,f=i.y,m=n.y,g=(h-l)*(d-f)-(m-f)*(o-l),A=(m-f)*(a-o)-(h-l)*(p-d),b=g/A,v=((a-o)*(d-f)-(p-d)*(o-l))/A;if(0===A&&0!==g||b<=0||b>=1||v<0||v>1)return null;if(0===g&&0===A){for(let l=0;l<2;l++){if(u(0===l?i:n,e,t),c.loc==s){const e=0===l?i:n;return{x:e.x,y:e.y,t:c.t}}if(c.loc==r){return{x:+(o+c.t*(a-o)).toPrecision(10),y:+(d+c.t*(p-d)).toPrecision(10),t:c.t}}}return null}for(let r=0;r<2;r++)if(u(0===r?i:n,e,t),c.loc==s){const e=0===r?i:n;return{x:e.x,y:e.y,t:c.t}}return{x:+(o+b*(a-o)).toPrecision(10),y:+(d+b*(p-d)).toPrecision(10),t:b}}function u(e,t,i){const d=i.x-t.x,u=i.y-t.y,p=e.x-t.x,f=e.y-t.y,m=d*f-p*u;if(e.x===t.x&&e.y===t.y)return c.loc=s,void(c.t=0);if(e.x===i.x&&e.y===i.y)return c.loc=n,void(c.t=1);if(m<-Number.EPSILON)return void(c.loc=o);if(m>Number.EPSILON)return void(c.loc=a);if(d*p<0||u*f<0)return void(c.loc=l);if(Math.sqrt(d*d+u*u)<Math.sqrt(p*p+f*f))return void(c.loc=h);let g;g=0!==d?p/d:f/u,c.loc=r,c.t=g}function p(e,t,s){const n=new i.Vector2;t.getCenter(n);const r=[];return s.forEach((t=>{if(t.boundingBox.containsPoint(n)){const s=function(e,t){const s=[],n=[];for(let r=1;r<e.length;r++){const o=e[r-1],a=e[r];for(let e=1;e<t.length;e++){const r=d(o,a,t[e-1],t[e]);null!==r&&void 0===s.find((e=>e.t<=r.t+Number.EPSILON&&e.t>=r.t-Number.EPSILON))&&(s.push(r),n.push(new i.Vector2(r.x,r.y)))}}return n}(e,t.points);s.forEach((e=>{r.push({identifier:t.identifier,isCW:t.isCW,point:e})}))}})),r.sort(((e,t)=>e.point.x-t.point.x)),r}let f=t,m=-999999999,g=e.subPaths.map((e=>{const s=e.getPoints();let n=-999999999,r=t,o=-999999999,a=t;for(let e=0;e<s.length;e++){const t=s[e];t.y>n&&(n=t.y),t.y<r&&(r=t.y),t.x>o&&(o=t.x),t.x<a&&(a=t.x)}return m<=o&&(m=o+1),f>=a&&(f=a-1),{curves:e.curves,points:s,isCW:i.ShapeUtils.isClockWise(s),identifier:-1,boundingBox:new i.Box2(new i.Vector2(a,r),new i.Vector2(o,n))}}));g=g.filter((e=>e.points.length>1));for(let e=0;e<g.length;e++)g[e].identifier=e;const A=g.map((t=>function(e,t,s,n,r){null!=r&&""!==r||(r="nonzero");const o=new i.Vector2;e.boundingBox.getCenter(o);const a=p([new i.Vector2(s,o.y),new i.Vector2(n,o.y)],e.boundingBox,t);a.sort(((e,t)=>e.point.x-t.point.x));const l=[],h=[];a.forEach((t=>{t.identifier===e.identifier?l.push(t):h.push(t)}));const c=l[0].point.x,d=[];let u=0;for(;u<h.length&&h[u].point.x<c;)d.length>0&&d[d.length-1]===h[u].identifier?d.pop():d.push(h[u].identifier),u++;if(d.push(e.identifier),"evenodd"===r){const t=d.length%2==0,i=d[d.length-2];return{identifier:e.identifier,isHole:t,for:i}}if("nonzero"===r){let i=!0,s=null,n=null;for(let e=0;e<d.length;e++){const r=d[e];i?(n=t[r].isCW,i=!1,s=r):n!==t[r].isCW&&(n=t[r].isCW,i=!0)}return{identifier:e.identifier,isHole:i,for:s}}console.warn('fill-rule: "'+r+'" is currently not implemented.')}(t,g,f,m,e.userData?e.userData.style.fillRule:void 0))),b=[];return g.forEach((e=>{if(!A[e.identifier].isHole){const t=new i.Shape;t.curves=e.curves;const s=A.filter((t=>t.isHole&&t.for===e.identifier));s.forEach((e=>{const s=g[e.identifier],n=new i.Path;n.curves=s.curves,t.holes.push(n)})),b.push(t)}})),b}static getStrokeStyle(e,t,i,s,n){return{strokeColor:t=void 0!==t?t:"#000",strokeWidth:e=void 0!==e?e:1,strokeLineJoin:i=void 0!==i?i:"miter",strokeLineCap:s=void 0!==s?s:"butt",strokeMiterLimit:n=void 0!==n?n:4}}static pointsToStroke(e,t,s,n){const r=[],o=[],a=[];if(0===BO.pointsToStrokeWithBuffers(e,t,s,n,r,o,a))return null;const l=new i.BufferGeometry;return l.setAttribute("position",new i.Float32BufferAttribute(r,3)),l.setAttribute("normal",new i.Float32BufferAttribute(o,3)),l.setAttribute("uv",new i.Float32BufferAttribute(a,2)),l}static pointsToStrokeWithBuffers(e,t,s,n,r,o,a,l){const h=new i.Vector2,c=new i.Vector2,d=new i.Vector2,u=new i.Vector2,p=new i.Vector2,f=new i.Vector2,m=new i.Vector2,g=new i.Vector2,A=new i.Vector2,b=new i.Vector2,v=new i.Vector2,y=new i.Vector2,w=new i.Vector2,x=new i.Vector2,O=new i.Vector2,C=new i.Vector2,S=new i.Vector2;s=void 0!==s?s:12,n=void 0!==n?n:.001,l=void 0!==l?l:0,e=function(e){let t=!1;for(let i=1,s=e.length-1;i<s;i++)if(e[i].distanceTo(e[i+1])<n){t=!0;break}if(!t)return e;const i=[];i.push(e[0]);for(let t=1,s=e.length-1;t<s;t++)e[t].distanceTo(e[t+1])>=n&&i.push(e[t]);return i.push(e[e.length-1]),i}(e);const I=e.length;if(I<2)return 0;const E=e[0].equals(e[I-1]);let k,B,Q=e[0];const M=t.strokeWidth/2,T=1/(I-1);let D,R,P,L,F=0,U=!1,z=0,G=3*l,N=2*l;V(e[0],e[1],h).multiplyScalar(M),g.copy(e[0]).sub(h),A.copy(e[0]).add(h),b.copy(g),v.copy(A);for(let i=1;i<I;i++){k=e[i],B=i===I-1?E?e[1]:void 0:e[i+1];const s=h;if(V(Q,k,s),d.copy(s).multiplyScalar(M),y.copy(k).sub(d),w.copy(k).add(d),D=F+T,R=!1,void 0!==B){V(k,B,c),d.copy(c).multiplyScalar(M),x.copy(k).sub(d),O.copy(k).add(d),P=!0,d.subVectors(B,Q),s.dot(d)<0&&(P=!1),1===i&&(U=P),d.subVectors(B,k),d.normalize();const e=Math.abs(s.dot(d));if(e>Number.EPSILON){const i=M/e;d.multiplyScalar(-i),u.subVectors(k,Q),p.copy(u).setLength(i).add(d),C.copy(p).negate();const s=p.length(),n=u.length();u.divideScalar(n),f.subVectors(B,k);const r=f.length();switch(f.divideScalar(r),u.dot(C)<n&&f.dot(C)<r&&(R=!0),S.copy(p).add(k),C.add(k),L=!1,R?P?(O.copy(C),w.copy(C)):(x.copy(C),y.copy(C)):q(),t.strokeLineJoin){case"bevel":X(P,R,D);break;case"round":W(P,R),P?H(k,y,x,D,0):H(k,O,w,D,1);break;default:const e=M*t.strokeMiterLimit/s;if(e<1){if("miter-clip"!==t.strokeLineJoin){X(P,R,D);break}W(P,R),P?(f.subVectors(S,y).multiplyScalar(e).add(y),m.subVectors(S,x).multiplyScalar(e).add(x),j(y,D,0),j(f,D,0),j(k,D,.5),j(k,D,.5),j(f,D,0),j(m,D,0),j(k,D,.5),j(m,D,0),j(x,D,0)):(f.subVectors(S,w).multiplyScalar(e).add(w),m.subVectors(S,O).multiplyScalar(e).add(O),j(w,D,1),j(f,D,1),j(k,D,.5),j(k,D,.5),j(f,D,1),j(m,D,1),j(k,D,.5),j(m,D,1),j(O,D,1))}else R?(P?(j(A,F,1),j(g,F,0),j(S,D,0),j(A,F,1),j(S,D,0),j(C,D,1)):(j(A,F,1),j(g,F,0),j(S,D,1),j(g,F,0),j(C,D,0),j(S,D,1)),P?x.copy(S):O.copy(S)):P?(j(y,D,0),j(S,D,0),j(k,D,.5),j(k,D,.5),j(S,D,0),j(x,D,0)):(j(w,D,1),j(S,D,1),j(k,D,.5),j(k,D,.5),j(S,D,1),j(O,D,1)),L=!0}}else q()}else q();E||i!==I-1||Z(e[0],b,v,P,!0,F),F=D,Q=k,g.copy(x),A.copy(O)}if(E){if(R&&r){let e=S,t=C;U!==P&&(e=C,t=S),P?(L||U)&&(t.toArray(r,0),t.toArray(r,9),L&&e.toArray(r,3)):!L&&U||(t.toArray(r,3),t.toArray(r,9),L&&e.toArray(r,0))}}else Z(k,y,w,P,!1,D);return z;function V(e,t,i){return i.subVectors(t,e),i.set(-i.y,i.x).normalize()}function j(e,t,i){r&&(r[G]=e.x,r[G+1]=e.y,r[G+2]=0,o&&(o[G]=0,o[G+1]=0,o[G+2]=1),G+=3,a&&(a[N]=t,a[N+1]=i,N+=2)),z+=3}function H(e,t,i,n,r){h.copy(t).sub(e).normalize(),c.copy(i).sub(e).normalize();let o=Math.PI;const a=h.dot(c);Math.abs(a)<1&&(o=Math.abs(Math.acos(a))),o/=s,d.copy(t);for(let t=0,i=s-1;t<i;t++)u.copy(d).rotateAround(e,o),j(d,n,r),j(u,n,r),j(e,n,.5),d.copy(u);j(u,n,r),j(i,n,r),j(e,n,.5)}function q(){j(A,F,1),j(g,F,0),j(y,D,0),j(A,F,1),j(y,D,1),j(w,D,0)}function X(e,t,i){t?e?(j(A,F,1),j(g,F,0),j(y,D,0),j(A,F,1),j(y,D,0),j(C,D,1),j(y,i,0),j(x,i,0),j(C,i,.5)):(j(A,F,1),j(g,F,0),j(w,D,1),j(g,F,0),j(C,D,0),j(w,D,1),j(w,i,1),j(O,i,0),j(C,i,.5)):e?(j(y,i,0),j(x,i,0),j(k,i,.5)):(j(w,i,1),j(O,i,0),j(k,i,.5))}function W(e,t){t&&(e?(j(A,F,1),j(g,F,0),j(y,D,0),j(A,F,1),j(y,D,0),j(C,D,1),j(y,F,0),j(k,D,.5),j(C,D,1),j(k,D,.5),j(x,F,0),j(C,D,1)):(j(A,F,1),j(g,F,0),j(w,D,1),j(g,F,0),j(C,D,0),j(w,D,1),j(w,F,1),j(C,D,0),j(k,D,.5),j(k,D,.5),j(C,D,0),j(O,F,1)))}function Z(e,i,s,n,o,a){switch(t.strokeLineCap){case"round":o?H(e,s,i,a,.5):H(e,i,s,a,.5);break;case"square":if(o)h.subVectors(i,e),c.set(h.y,-h.x),d.addVectors(h,c).add(e),u.subVectors(c,h).add(e),n?(d.toArray(r,3),u.toArray(r,0),u.toArray(r,9)):(d.toArray(r,3),d.toArray(r,9),u.toArray(r,0));else{h.subVectors(s,e),c.set(h.y,-h.x),d.addVectors(h,c).add(e),u.subVectors(c,h).add(e);const t=r.length;n?(d.toArray(r,t-3),u.toArray(r,t-6),u.toArray(r,t-12)):(d.toArray(r,t-6),u.toArray(r,t-3),u.toArray(r,t-12))}}}}}class QO extends i.Mesh{constructor(e,t={},s=null){if(super(),this.model=e,this.material=s,this.outMaterial=!!s,this.XML=new XMLSerializer,this.color=new i.Color,this.opacity=1,this.svgLoader=new BO,this.base="http://www.w3.org/2000/svg",this.svg=document.createElementNS(this.base,"svg"),this.layerUp=1e-4,this.fill=!0,this.stroke=!0,this.size=t.size||1,this.scaler=1/this.size,!this.model)return;let n={radius:5,min:90,max:90,strokeSize:.25,...t};switch(this.model){case"angle":this.fill=void 0===n.fill||n.fill,this.stroke=void 0===n.stroke||n.stroke;let e=Math.abs(n.min);this.add("path",{d:this.circle(0,0,n.radius,180,180+n.max,!0),stroke:"none",fill:"#FF0000","fill-opacity":.1}),this.add("path",{d:this.circle(0,0,n.radius,180,180+n.max,!1,!1,.3),stroke:"#FF0000","stroke-opacity":1,"stroke-width":n.strokeSize,fill:"none","stroke-linecap":"round"}),this.add("path",{d:this.circle(0,0,n.radius,180-e,180,!0),stroke:"none",fill:"#0050FF","fill-opacity":.1}),this.add("path",{d:this.circle(0,0,n.radius,180-e,180,!1,!1,.3,!0),stroke:"#0050FF","stroke-opacity":1,"stroke-width":n.strokeSize,fill:"none","stroke-linecap":"round"});break;case"liner":let t=.5*n.radius,i=n.max*this.scaler,s=n.min*this.scaler;this.fill=void 0===n.fill||n.fill,this.stroke=void 0===n.stroke||n.stroke,this.add("path",{d:this.segment({x:-t,y:0},{x:t,y:0}),stroke:"#FFFFFF","stroke-opacity":1,"stroke-width":n.strokeSize,fill:"none","stroke-linecap":"butt"}),this.add("path",{d:this.segment({x:-t,y:i},{x:t,y:i}),stroke:"#FF0000","stroke-opacity":1,"stroke-width":n.strokeSize,fill:"none","stroke-linecap":"butt"}),this.add("path",{d:this.segment({x:-t,y:s},{x:t,y:s}),stroke:"#0050FF","stroke-opacity":1,"stroke-width":n.strokeSize,fill:"none","stroke-linecap":"butt"}),this.add("path",{d:this.segment({x:0,y:0},{x:0,y:i}),stroke:"#FF0000","stroke-opacity":1,"stroke-width":n.strokeSize,fill:"none","stroke-linecap":"butt"}),this.add("path",{d:this.segment({x:0,y:0},{x:0,y:s}),stroke:"#0050FF","stroke-opacity":1,"stroke-width":n.strokeSize,fill:"none","stroke-linecap":"butt"});break;case"needle":this.fill=void 0===n.fill||n.fill,this.stroke=void 0===n.stroke||n.stroke,this.add("path",{d:this.circle(0,0,.7,0,360,!1,!0,0),stroke:"#FFFFFF","stroke-opacity":1,"stroke-width":n.strokeSize,fill:"none","stroke-linecap":"butt"}),this.add("path",{d:this.segment({x:0,y:0},{x:0,y:4.4}),stroke:"#FFFFFF","stroke-opacity":1,"stroke-width":n.strokeSize,fill:"none","stroke-linecap":"round"});break;case"middle":let r=.5*n.radius;this.fill=void 0===n.fill||n.fill,this.stroke=void 0===n.stroke||n.stroke,this.add("path",{d:this.circle(0,0,.7,0,360,!1,!0,0),stroke:"#FFFFFF","stroke-opacity":1,"stroke-width":n.strokeSize,fill:"none","stroke-linecap":"butt"}),this.add("path",{d:this.segment({x:0,y:-r},{x:0,y:r}),stroke:"#FFFFFF","stroke-opacity":1,"stroke-width":n.strokeSize,fill:"none","stroke-linecap":"butt"}),this.add("path",{d:this.segment({x:-r,y:0},{x:r,y:0}),stroke:"#FFFFFF","stroke-opacity":1,"stroke-width":n.strokeSize,fill:"none","stroke-linecap":"butt"})}this.toMesh()}raycast(){return!1}update(e={}){let t={};if("angle"===this.model){t={radius:5,min:-90,max:90,...e};let i=Math.abs(t.min);this.change("d",this.circle(0,0,t.radius,180,180+t.max,!0),0),this.change("d",this.circle(0,0,t.radius,180,180+t.max,!1,!1,.3),1),this.change("d",this.circle(0,0,t.radius,180-i,180,!0),2),this.change("d",this.circle(0,0,t.radius,180-i,180,!1,!1,.3,!0),3)}void 0!==e.wireframe&&(this.material.wireframe=e.wireframe),this.fill=void 0===t.fill||t.fill,this.stroke=void 0===t.stroke||t.stroke,this.toMesh()}set(e={},t){for(let i in e)t?t.setAttributeNS(null,i,e[i]):this.svg.setAttributeNS(null,i,e[i])}add(e,t={}){let i=document.createElementNS(this.base,e);this.set(t,i),this.svg.appendChild(i)}change(e,t,i){this.svg.childNodes[i].setAttributeNS(null,e,t)}getString(){return this.XML.serializeToString(this.svg)}polarToCartesian(e,t,i,s){var n=(s-90)*Math.PI/180;return{x:e+i*Math.cos(n),y:t+i*Math.sin(n)}}circle(e,t,i,s=0,n=360,r=!1,o=!1,a=0,l=!1){0===s&&360===n&&(s=1e-4,o=!0);let h=this.polarToCartesian(e,t,i,n),c=this.polarToCartesian(e,t,i,s),d=n-s<=180?"0":"1",u=["M",h.x,h.y,"A",i,i,0,d,0,c.x,c.y];if(r&&u.push("L",e,t,"L",h.x,h.y),o&&u.push("Z"),0!==a){let r=this.polarToCartesian(e,t,i-a,l?s:n),o=this.polarToCartesian(e,t,i+a,l?s:n);u.push("M",r.x,r.y,"L",o.x,o.y)}return u.join(" ")}segment(e,t){return["M",e.x,e.y,"L",t.x,t.y].join(" ")}geomColor(e,t,s=1){let n=e.attributes.position.count,r=[];for(;n--;)r.push(t.r,t.g,t.b,s);e.setAttribute("color",new i.Float32BufferAttribute(r,4))}toGeometry(){if(!this.fill&&!this.stroke)return null;let e=[],t=0,s=1,n=this.svgLoader.parse(this.getString());for(const r of n.paths){const n=r.userData.style.fill;if(this.fill&&void 0!==n&&"none"!==n){this.color.setStyle(n),s=r.userData.style.fillOpacity,s<this.opacity&&(this.opacity=s);const o=BO.createShapes(r);for(const n of o){const r=new i.ShapeGeometry(n);if(r){this.geomColor(r,this.color,s);let n=(new i.BufferGeometry).copy(r).toNonIndexed();n.translate(0,0,-t*this.layerUp),e.push(n),t++}}}const o=r.userData.style.stroke;if(this.stroke&&void 0!==o&&"none"!==o){this.color.setStyle(o),s=r.userData.style.strokeOpacity,s<this.opacity&&(this.opacity=s);for(const i of r.subPaths){const n=BO.pointsToStroke(i.getPoints(),r.userData.style,6);n&&(this.geomColor(n,this.color,s),n.translate(0,0,-t*this.layerUp),e.push(n),t++)}}}return e}toMesh(){let e=this.size;this.geometry&&this.geometry.dispose();let t=this.toGeometry();t?(this.geometry=ye(t),this.geometry.scale(e,-e,e),this.geometry.rotateY(Math.PI),this.geometry.rotateZ(.5*-Math.PI),this.geometry.rotateY(.5*Math.PI),this.geometry.computeBoundingSphere()):this.geometry=new i.BufferGeometry,null===this.material&&(this.material=new i.MeshBasicMaterial({vertexColors:!0,transparent:1!==this.opacity,side:i.DoubleSide}),this.material.defines={USE_COLOR_ALPHA:""})}dispose(){this.material&&!this.outMaterial&&this.material.dispose(),this.geometry&&this.geometry.dispose()}}class MO extends iO{constructor(e={},t){super(),this.motor=t,this.isJoint=!0,this.type="joint",this.mode=e.mode||"hinge",this.visible=void 0!==e.visible&&e.visible,this.mtx=new i.Matrix4,this.size=e.helperSize||.1;let s,n,r=this.motor.mat.get("line");switch(this.mode){case"prismatic":s=this.motor.mat.get("svg"),n={min:-180,max:180,fill:!1,stroke:!0,wireframe:!1,size:.5*this.size},e.lm&&(n.min=e.lm[0],n.max=e.lm[1]),this.m1=new QO("liner",n,s),this.m2=new QO("middle",n,s),this.m1.geometry.rotateY(90*gx.torad),this.add(this.m1),this.add(this.m2);break;case"hinge":case"cylindrical":s=this.motor.mat.get("svg"),n={min:-180,max:180,fill:!1,stroke:!0,wireframe:!1,size:.5*this.size},e.lm&&(n.min=e.lm[0],n.max=e.lm[1]),e.lmr&&(n.min=e.lmr[0],n.max=e.lmr[1]),this.m1=new QO("angle",n,s),this.m2=new QO("needle",n,s),this.add(this.m1),this.add(this.m2);break;default:const t=this.motor.geo.get("joint");let o=t.clone();o.scale(this.size,this.size,this.size),this.m1=new i.LineSegments(o,r),this.add(this.m1),o=t.clone(),o.scale(.8*this.size,.8*this.size,.8*this.size),this.m2=new i.LineSegments(o,r),this.add(this.m2)}this.m1.matrixAutoUpdate=!1,this.m2.matrixAutoUpdate=!1,this.body1=null,this.body2=null,this.mat1=new i.Matrix4,this.mat2=new i.Matrix4,this.end=new i.Vector3;let o=new i.Quaternion;e.quat1&&this.mat1.makeRotationFromQuaternion(o.fromArray(e.quat1)),e.quat2&&this.mat2.makeRotationFromQuaternion(o.fromArray(e.quat2)),this.mat1.setPosition(e.pos1[0],e.pos1[1],e.pos1[2]),this.mat2.setPosition(e.pos2[0],e.pos2[1],e.pos2[2]);const a=new i.BufferGeometry;a.setAttribute("position",new i.Float32BufferAttribute([0,0,0,0,0,0],3)),a.setAttribute("color",new i.Float32BufferAttribute([1,0,0,1,0,0],3)),a.computeBoundingSphere(),this.m3=new i.LineSegments(a,r),this.add(this.m3),this.m3.matrixAutoUpdate=!1,this.pp=this.m3.geometry.attributes.position}update(){this.visible&&(this.body1?this.matrix.copy(this.body1.matrixWorld).multiply(this.mat1):this.matrix.copy(this.mat1),this.body2?this.m2.matrix.copy(this.body2.matrixWorld).multiply(this.mat2):this.m2.matrix.copy(this.mat2),this.m2.matrix.premultiply(this.matrix.clone().invert()),this.end.setFromMatrixPosition(this.m2.matrix),this.pp.setXYZ(1,this.end.x,this.end.y,this.end.z),this.pp.needsUpdate=!0,"cylindrical"===this.mode&&(this.m1.position.copy(this.end),this.m1.updateMatrix()),this.visible||(this.visible=!0))}updateFromPhy(e,t=0){this.visible&&(this.position.fromArray(e,t),this.quaternion.fromArray(e,t+3),this.updateMatrix(),this.m2.position.fromArray(e,t+7),this.m2.quaternion.fromArray(e,t+10),this.m2.matrix.compose(this.m2.position,this.m2.quaternion,{x:1,y:1,z:1}),this.mtx.copy(this.matrix).invert().multiply(this.m2.matrix),this.mtx.decompose(this.m2.position,this.m2.quaternion,{x:1,y:1,z:1}),this.m2.updateMatrix(),this.pp.setXYZ(1,this.m2.position.x,this.m2.position.y,this.m2.position.z),this.pp.needsUpdate=!0,"cylindrical"===this.mode&&(this.m1.position.copy(this.m2.position),this.m1.updateMatrix()),this.visible||(this.visible=!0))}dispose(){this.body1&&this.body1.link--,this.body2&&this.body2.link--,this.m1.geometry.dispose(),this.m2.geometry.dispose(),this.m3.geometry.dispose(),this.children=[]}}class TO extends Gx{constructor(e){super(),this.motor=e,this.engine=this.motor.engine,this.Utils=this.motor.utils,this.type="joint",this.v1=new i.Vector3,this.v2=new i.Vector3}step(e,t){let i,s,n=this.list.length;for(;n--;)i=this.list[n],s=t+n*Sx.joint,16===Sx.joint?i.updateFromPhy(e,s):i.update()}add(e={}){let t,s=this.setName(e),n=null,r=null,o=!1;if(e.axis1||(e.axis1=[1,0,0]),e.axis2||(e.axis2=[1,0,0]),e.pos1||(e.pos1=[0,0,0]),e.pos2||(e.pos2=[0,0,0]),e.limit?e.lm=e.limit:e.lm&&(e.limit=e.lm),"universal"!==e.mode&&"dof"!==e.mode&&"d6"!==e.mode||(e.mode="generic"),"revolute"===e.mode&&(e.mode="hinge"),"slider"===e.mode&&(e.mode="cylindrical"),e.b1&&(t="string"==typeof e.b1,n=t?this.Utils.byName(e.b1):e.b1,t||(e.b1=e.b1.name),n&&n.link++),e.b2&&(t="string"==typeof e.b2,r=t?this.Utils.byName(e.b2):e.b2,t||(e.b2=e.b2.name),r&&r.link++),e.worldPos&&(e.worldAnchor=e.worldPos),e.worldAnchor&&(e.pos1=n?this.Utils.toLocal(this.v1.fromArray(e.worldAnchor),n).toArray():e.worldAnchor,e.pos2=r?this.Utils.toLocal(this.v2.fromArray(e.worldAnchor),r).toArray():e.worldAnchor,delete e.worldAnchor),e.worldAxis&&(e.axis1=n?this.Utils.toLocal(this.v1.fromArray(e.worldAxis),n,!0).toArray():e.worldAxis,e.axis2=r?this.Utils.toLocal(this.v2.fromArray(e.worldAxis),r,!0).toArray():e.worldAxis,o=!0,delete e.worldAxis),e.worldQuat&&(e.quat1=this.Utils.quatLocal(e.worldQuat,n),e.quat2=this.Utils.quatLocal(e.worldQuat,r),"OIMO"!==this.engine&&"HAVOK"!==this.engine&&"JOLT"!==this.engine||(e.axis1=this.Utils.axisLocal(gx.quatToAxis(e.worldQuat),n),e.axis2=this.Utils.axisLocal(gx.quatToAxis(e.worldQuat),r)),delete e.worldQuat),void 0!==e.rot1&&(e.quat1=gx.quatFromEuler(e.rot1),delete e.rot1),void 0!==e.rot2&&(e.quat2=gx.quatFromEuler(e.rot2),delete e.rot2),e.quat1||(e.quat1=(new i.Quaternion).setFromUnitVectors(new i.Vector3(1,0,0),(new i.Vector3).fromArray(e.axis1).normalize()).toArray()),e.quat2||(e.quat2=(new i.Quaternion).setFromUnitVectors(new i.Vector3(1,0,0),(new i.Vector3).fromArray(e.axis2).normalize()).toArray()),"AMMO"===this.engine&&o&&"hinge"===e.mode){let t=new i.Euler(0,-90*dx,0),s=(new i.Quaternion).setFromEuler(t).toArray();e.quatX=s}e.drivePosition&&void 0!==e.drivePosition.rot&&(e.drivePosition.quat=gx.quatFromEuler(e.drivePosition.rot),delete e.drivePosition.rot);let a=new MO(e,this.motor);return a.name=s,a.body1=n,a.body2=r,void 0===e.visible&&(e.visible=this.motor.jointVisible||!1),this.set(e,a),this.addToWorld(a,e.id),this.motor.post({m:"add",o:e}),a}set(e={},t=null){null===t&&(t=this.byName(e.name)),null!==t&&void 0!==e.visible&&(t.visible=e.visible)}}class DO extends Gx{constructor(e){super(),this.motor=e,this.Utils=this.motor.utils,this.type="contact"}step(e,t){let i,s,n=this.list.length;for(;n--;)i=this.list[n],s=t+n*Sx.contact,i.update(e,s)}add(e={}){this.setName(e);let t=new RO(e);return e.callback&&delete e.callback,this.addToWorld(t,e.id),this.motor.post({m:"add",o:e}),t}}class RO{constructor(e={}){this.type="contact",this.name=e.name,this.callback=e.callback||function(){},this.b1=e.b1||null,this.b2=e.b2||null,this.ignore=e.ignore||[],this.always=void 0===e.always||e.always,this.simple=e.simple||!1,this.data={hit:!1,point:[0,0,0],normal:[0,0,0]}}update(e,t=0){this.data.hit=e[t]>0,this.simple||(this.data.point=[e[t+1],e[t+2],e[t+3]],this.data.normal=[e[t+4],e[t+5],e[t+6]]),(this.data.hit||this.always)&&this.callback(this.data)}}let PO=null;class LO extends Gx{constructor(e){super(),this.motor=e,this.engine=this.motor.engine,this.Utils=this.motor.utils,this.motor.geo,PO=this.motor.mat,this.type="vehicle",this.num=Sx[this.type]}step(e,t){let i,s,n=this.list.length;for(;n--;)s=this.list[n],i=t+n*this.num,s.step(e,i)}add(e={}){this.setName(e);const t=new FO(e,this.motor);return this.addToWorld(t,e.id),this.motor.post({m:"add",o:t.o}),t}set(e={},t=null){null===t&&(t=this.byName(e.name))}}class FO extends iO{constructor(e,t){super(),this.motor=t,this.Utils=this.motor.utils,e.extra&&(this.extra=e.extra,delete e.extra),this.type="vehicle",this.name=e.name||"car",this.isRay=e.ray||!1,this.actif=!1,this.steering=0,this.suspension=[],this.rolling=[],this.init(e)}drive(){}raycast(){}init(e){this.mass=e.mass||2e3,this.model=null,this.size=e.size||[1.7,1,5],this.massCenter=e.massCenter||[0,.55,1.594],this.chassisPos=e.chassisPos||[0,.83,0],this.maxSteering=e.maxSteering||24,this.incSteering=e.incSteering||2,this.s_travel=e.s_travel||.4,this.s_ratio=1/(.5*this.s_travel),this.decaly="PHYSX"===this.engine?.5*this.s_travel:0,this.numWheel=e.numWheel||4,this.radius=e.radius||.35,this.radiusBack=e.radiusBack||this.radius,this.deep=e.deep||.3,this.deepBack=e.deepBack||this.deep;let t=this.numWheel<4?1:2;if(e.wPos||(e.wPos=[.8,.1,1.4]),e.wPos){this.wPos=e.wPos;var i,s,n,r,o,a,l=e.wPos,h=[],c=1,d=0;l.length,l.length;for(let e=0;e<this.numWheel;e++)c=e%2==0?-1:1,s=Math.floor(.5*e),d=e>=t,0===(n=l[1])&&(n=d?this.radiusBack:this.radius),(r=l[0])instanceof Array&&(r=l[0][s]),o=d?-l[2]:l[2],l[2]instanceof Array&&(o=l[2][s]),i=[r*c,n,o],h.push(i);this.wheelsPosition=h,delete e.wPos}e.wheelsPosition&&(this.wheelsPosition=e.wheelsPosition);const u=e.meshScale||1,p=[];e.chassisShape?p.push({type:"convex",shape:e.chassisShape,size:[u],pos:this.chassisPos,filter:[1,-1,0,0],isExclusive:!0,ray:this.isRay}):p.push({type:"box",size:this.size,pos:this.chassisPos});for(let i=0;i<this.numWheel;i++)i<t?p.push({type:"cylinder",size:[this.radius,this.deep],isWheel:!0,radius:e.rad||.05,shadow:!1,ray:!1}):p.push({type:"cylinder",size:[this.radiusBack,this.deepBack],isWheel:!0,radius:e.rad||.05,shadow:!1,ray:!1});var f=PO.get(e.debug?"debug":void 0===e.chassisMesh?"body":"hide");let m,g;for(let e=0;e<p.length;e++)m=p[e],m.pos&&(m.localPos=m.pos),m.size=gx.autoSize(m.size,m.type),this.motor.getGeometryRef(m,this,f);if(e.chassisMesh&&(g=e.noClone?e.chassisMesh:e.chassisMesh.clone(),g.position.set(0,0,0),this.Utils.noRay(g),g.scale.set(u,u,u),this.children[0].add(g),this.model=g,delete e.chassisMesh),e.wheelMesh){for(let i=1;i<this.numWheel+1;i++)d=i>=t+1,g=e.wheelMeshBack&&d?e.wheelMeshBack.clone():e.wheelMesh.clone(),this.Utils.noRay(g),g.position.set(0,0,0),2==i||4==i?g.scale.set(-u,u,u):g.scale.set(u,u,u),this.children[i].add(g);delete e.wheelMesh}if(e.suspensionMesh){this.suspensionMesh=[];for(let t=1;t<this.numWheel+1;t++)g=e.suspensionMesh.clone(),this.Utils.noRay(g),g.position.set(0,0,0),g.position.fromArray(this.wheelsPosition[t-1]),g.position.x=0,2==t||4==t?g.scale.set(u,u,u):g.scale.set(-u,u,u),this.children[0].add(g),this.suspensionMesh.push(g);delete e.suspensionMesh}if(e.brakeMesh){this.brake=[];for(let t=1;t<this.numWheel+1;t++)d=t>2,g=e.brakeMeshBack&&d?e.brakeMeshBack.clone():e.brakeMesh.clone(),this.Utils.noRay(g),g.position.set(0,0,0),g.position.fromArray(this.wheelsPosition[t-1]),a=e.brakeMeshBack||d?u:-u,2==t||4==t?g.scale.set(-u,u,a):g.scale.set(u,u,a),this.children[0].add(g),this.brake.push(g);delete e.brakeMesh}e.mass=this.mass,e.size=e.chassisShape?p[0].boxSize:this.size,e.numWheel=this.numWheel,e.wheelsPosition=this.wheelsPosition,e.radius=this.radius,e.radiusBack=this.radiusBack,e.deep=this.deep,e.deepBack=this.deepBack,e.chassisShape=p[0],e.maxSteering=this.maxSteering,e.incSteering=this.incSteering,e.s_travel=this.s_travel,e.massCenter=this.massCenter,e.chassisPos=this.chassisPos,this.o=e}set(e){e.name=this.name,this.motor.change(e)}respawn(e){(e=e||{}).respawn=!0,e.name=this.name,e.keepRotation&&(e.quat=this.quaternion.toArray()),this.motor.change(e)}move(){}dispose(){}step(e,t){if(!this.actif){if(0===e[t+0]+e[t+1]+e[t+2]+e[t+3]+e[t+4]+e[t+5]+e[t+6]+e[t+7])return;this.actif=!0}this.position.fromArray(e,t+1),this.quaternion.fromArray(e,t+4),this.updateMatrix();let i,s=this.numWheel+1,n=0,r=0,o=[],a=0;for(let l=0;l<s;l++)a=8*l+t,0===l&&(e[a],this.circum),1===l&&(n=e[a]),2===l&&(r=e[a]),i=this.children[l],i&&l>0&&(o[l-1]=this.wheelsPosition[l-1][1]-this.decaly-e[a+2],i.position.fromArray(e,a+1),i.quaternion.fromArray(e,a+4),this.rolling[l-1]=i.rotation.x,this.brake&&(this.brake[l-1].position.copy(i.position),1!=l&&2!=l||(this.brake[l-1].rotation.y=e[a])));for(a=4;a--;)this.suspension[a]=gx.clamp(o[a]*this.s_ratio,-1,1),this.suspensionMesh&&(this.suspension[a]>0?(this.Utils.morph(this.suspensionMesh[a].children[0],"low",this.suspension[a]),this.Utils.morph(this.suspensionMesh[a].children[0],"top",0)):(this.Utils.morph(this.suspensionMesh[a].children[0],"low",0),this.Utils.morph(this.suspensionMesh[a].children[0],"top",-this.suspension[a])));this.steering=Math.round(.5*(n+r)*ux)/this.maxSteering}}const UO=new i.Matrix4,zO=new i.Vector3,GO=new i.Quaternion,NO=new i.Vector3,VO=new i.Matrix4,jO=new i.Matrix4,HO=["hip","abdomen","chest","neck","head","rCollar","lCollar","lShldr","rShldr","lThigh","rThigh","rBreast","lBreast"];class qO extends i.Object3D{constructor(e,t,i,s,n=null,r={}){super(),this.motor=e,this.prefix=t||"yoo_",this.mode="follow",this.withFinger=!1,this.nodes=[],this.bones=s,this.model=i,this.scaler=this.model.scale.x,this.posRef={},this.quatRef={},this.useSolver=!1,"PHYSX"!==this.motor.engine&&(this.useSolver=!1),this.nameList=[],this.jointList=[],this.breast=!1,this.ready=!1,this.matrixAutoUpdate=!1,this.mass=n,this.friction=.5,this.restitution=0,this.option=r,this.useDrive=void 0===r.useDrive||r.useDrive,this.showJoint=void 0!==r.showJoint&&r.showJoint,this.init()}setMass(e){if(e===this.mass)return;this.mass=e;const t=[];let i=this.nodes.length,s=this.mass/i;for(;i--;)t.push({name:this.nodes[i].name,mass:s});this.motor.change(t)}setMode(e){if(e===this.mode)return;this.mode=e;const t=[];let i,s="follow"===this.mode,n=this.nodes.length;for(;n--;)i=this.nodes[n],t.push({name:i.name,kinematic:s}),i.kinematic=s,i.bone.isPhysics=!s;this.motor.change(t)}freeBone(e){e.kinematic&&(e.cc++,20===e.cc&&(e.cc=0,e.kinematic=!1,e.bone.isPhysics=!0,this.motor.change({name:e.name,kinematic:!1})))}isVisible(e){let t=this.nameList.length;for(;t--;)this.motor.byName(this.nameList[t]).visible=e}init(){this.useSolver&&(this.solver=this.motor.add({type:"solver",name:this.prefix+"_solver",iteration:32,fix:!0,needData:!0})),this.useAggregate="PHYSX"===this.motor.engine;const e=[];let t=(new i.Matrix4).makeScale(this.scaler,this.scaler,this.scaler),s=new i.Vector3,n=new i.Vector3,r=new i.Quaternion,o=new i.Euler,a=new i.Matrix4,l=new i.Matrix4,h=new i.Matrix4;VO.copy(this.model.matrixWorld).invert();let c=new i.Vector3,d=new i.Vector3,u=[1,1,1,1,1,1,1];this.option.sizer&&(u=this.option.sizer);let p,f,m,g,A,b,v,y,w,x,O,C,S,I=this.bones.length,E=0;for(this.mass&&(E=this.mass/I),p=0;p<I;p++)if(w=null,g=this.bones[p],f=g.name,A=g.parent,A){m=A.name,jO.multiplyMatrices(VO,g.matrixWorld),c.setFromMatrixPosition(jO),jO.multiplyMatrices(VO,A.matrixWorld),d.setFromMatrixPosition(jO),v=c.distanceTo(d),O=[0,0,.5*v],b=[v,1,1],y=null,x=!0,S=!1,"hip"===m&&"abdomen"===f&&(w="capsule",b=[v*u[0],.08],O=[0,0,-v*u[0]],y=[0,0,90]),"abdomen"===m&&"chest"===f&&(w="capsule",b=[.7*v*u[1],.08],O=[0,0,.5*-v-.06],y=[90,0,0]),"chest"===m&&"neck"===f&&(w="capsule",b=[.4*v*u[2],.04],O=[0,0,.5*-v-.02],y=[0,0,90]),"neck"===m&&"head"===f&&(w="capsule",b=[.06*u[3],v],O=[0,0,.5*-v],y=[90,0,0]),"head"===m&&"End_head"===f&&(w="capsule",b=[.1*u[4],v-.17],O=[0,.02,.5*-v+.02],y=[90,0,0]),"chest"===m&&"rBreast"===f&&"HAVOK"!==this.motor.engine&&(m="rBreast",A=g,w="sphere",b=[.065],O=[.065,0,0],this.breast=!0,S=!0),"chest"===m&&"lBreast"===f&&"HAVOK"!==this.motor.engine&&(m="lBreast",A=g,w="sphere",b=[.065],O=[.065,0,0],this.breast=!0,S=!0);let i=.04*u[5],p=v-i;if("lCollar"===m&&"lShldr"===f&&(w="capsule",b=[i,.3*v],O=[.6*v,0,0],y=[0,0,90]),"lShldr"===m&&"lForeArm"===f&&(w="capsule",b=[i,p],O=[.5*p,0,0],y=[0,0,90]),"lForeArm"===m&&"lHand"===f&&(w="capsule",b=[i,p],O=[.5*p,0,0],y=[0,0,90]),"lHand"===m&&"lMid1"===f&&(w="box",b=[2*v,.09,.05],O=[v,0,0]),"rCollar"===m&&"rShldr"===f&&(w="capsule",b=[i,.3*v],O=[.6*-v,0,0],y=[0,0,90]),"rShldr"===m&&"rForeArm"===f&&(w="capsule",b=[i,p],O=[.5*-p,0,0],y=[0,0,90]),"rForeArm"===m&&"rHand"===f&&(w="capsule",b=[i,p],O=[.5*-p,0,0],y=[0,0,90]),"rHand"===m&&"rMid1"===f&&(w="box",b=[2*v,.09,.05],O=[-v,0,0]),i=.06*u[6],p=v-i,"lThigh"===m&&(w="capsule",b=[i,v],y=[90,0,0],O=[0,0,.5*p]),"lShin"===m&&(w="capsule",b=[i,v],y=[90,0,0],O=[0,0,.5*p]),"lFoot"===m&&(w="capsule",b=[.05,v],O=[0,.5*v-.025,.04]),"rThigh"===m&&(w="capsule",b=[i,v],y=[90,0,0],O=[0,0,.5*p]),"rShin"===m&&(w="capsule",b=[i,v],y=[90,0,0],O=[0,0,.5*p]),"rFoot"===m&&(w="capsule",b=[.05,v],O=[0,.5*v-.025,.04]),i=.04,p=v-i,"rEar_0"===m&&(w="capsule",b=[i,v],y=[0,0,90],O=[.5*p,0,0],HO.push("rEar_0")),"rEar_1"===m&&(w="capsule",b=[i,v],y=[0,0,90],O=[.5*p,0,0],HO.push("rEar_1")),"rEar_2"===m&&(w="capsule",b=[i,v],y=[0,0,90],O=[.5*p,0,0],HO.push("rEar_2")),"rEar_3"===m&&(w="capsule",b=[i,v],y=[0,0,90],O=[.5*p,0,0]),"lEar_0"===m&&(w="capsule",b=[i,v],y=[0,0,90],O=[.5*p,0,0],HO.push("lEar_0")),"lEar_1"===m&&(w="capsule",b=[i,v],y=[0,0,90],O=[.5*p,0,0],HO.push("lEar_1")),"lEar_2"===m&&(w="capsule",b=[i,v],y=[0,0,90],O=[.5*p,0,0],HO.push("lEar_2")),"lEar_3"===m&&(w="capsule",b=[i,v],y=[0,0,90],O=[.5*p,0,0]),this.withFinger&&("lHand"===m&&"lMid1"===f&&(w="box",b=[v,.09,.05],O=[.5*v,0,0]),"rHand"===m&&"rMid1"===f&&(w="box",b=[v,.09,.05],O=[.5*-v,0,0]),"rThumb1"===m&&"rThumb2"===f&&(w="capsule",b=[.02,v],y=[0,0,90]),"rThumb2"===m&&"rThumb3"===f&&(w="capsule",b=[.02,v],y=[0,0,90]),"rHand"===m&&"rMid1"===f&&(w="capsule",b=[.02,v],y=[0,0,90],O=[.6*-v,0,0]),"rMid1"===m&&"rMid2"===f&&(w="capsule",b=[.02,v],y=[0,0,90],O=[.6*-v,0,0]),"rMid2"===m&&"rMid3"===f&&(w="capsule",b=[.02,v],y=[0,0,90],O=[.6*-v,0,0])),null!==w){C=this.prefix+"_bone_"+m,l.makeTranslation(O[0],O[1],O[2]),y&&(h.makeRotationFromEuler(o.set(y[0]*dx,y[1]*dx,y[2]*dx)),l.multiply(h)),A.updateWorldMatrix(!0,!1),jO.multiplyMatrices(VO,A.matrixWorld),a.copy(jO),a.decompose(s,r,n),this.posRef[C]=s.toArray(),"lForeArm"!==m&&"rForeArm"!==m||(GO.setFromAxisAngle({x:0,y:1,z:0},-90*dx),r.multiply(GO)),this.quatRef[C]=r.toArray(),a.multiplyMatrices(jO,l),a.decompose(s,r,n),this.nameList.push(C);let i={name:C,friction:this.friction,restitution:this.restitution,type:w,size:gx.scaleArray(b,this.scaler,3),pos:s.toArray(),quat:r.toArray(),kinematic:x,material:"hide",shadow:!1,neverSleep:!0,helper:!0,hcolor:[0,.5,1],hcolor2:[0,.2,1],penetrationVelocity:3,stabilization:.1,damping:[.25,.5],...this.option};if(this.useAggregate)-1!==HO.indexOf(m)&&(i.aggregate=this.prefix+"__Group",i.aggregateMax=21),i.mask=3;else{let e=3;"lForeArm"!==m&&"rForeArm"!==m&&"lShin"!==m&&"rShin"!==m||(e=35),"rEar_1"!==m&&"rEar_2"!==m&&"rEar_3"!==m&&"lEar_1"!==m&&"lEar_2"!==m&&"lEar_3"!==m||(e=35),"rEar_0"!==m&&"rEar_0"!==m||(e=0),i.group=32,i.mask=e}null!==this.mass?i.mass=E:i.density=1,e.push(i);let c=l.clone().invert().premultiply(t);this.nodes.push({name:C,kinematic:x,motion:S,bone:A,decal:l.clone(),decalinv:c,quat:r.toArray(),pos:s.toArray(),cc:0})}}this.motor.add(e),this.addLink(),this.dispatchEvent({type:"start",message:"go !"}),this.ready=!0}existe(e){return-1!==this.nameList.indexOf(e)}addLink(){let e=[.05,1,0];"PHYSX"===this.motor.engine&&(e=[50,10,0,.5]);let t=2,i=.1,s=1e7,n=!1,r=this.prefix+"_bone_",o=[],a={type:"joint",mode:"d6",lm:[["ry",-180,180,...e],["rz",-180,180,...e]],collision:!1,helperSize:.05,visible:this.showJoint};this.useDrive&&(a.drives=[["rx",t,i,s,n],["ry",t,i,s,n],["rz",t,i,s,n]]);let l=[-.001,.001,100,.2,.5];o.push({...a,b1:r+"hip",b2:r+"abdomen",worldPos:this.posRef[r+"abdomen"],worldQuat:this.quatRef[r+"hip"],lm:[["rx",-20,20,...e],["ry",-20,20,...e],["rz",-20,20,...e]]}),o.push({...a,b1:r+"abdomen",b2:r+"chest",worldPos:this.posRef[r+"chest"],worldQuat:this.quatRef[r+"chest"],lm:[["rx",-20,20,...e],["ry",-20,20,...e],["rz",-20,20,...e]]}),o.push({...a,b1:r+"chest",b2:r+"neck",worldPos:this.posRef[r+"neck"],worldQuat:this.quatRef[r+"neck"],lm:[["rx",0,30,...e],["ry",-1,1,...e],["rz",-30,30,...e]]}),o.push({...a,b1:r+"neck",b2:r+"head",worldPos:this.posRef[r+"head"],worldQuat:this.quatRef[r+"head"],lm:[["rx",0,30,...e],["ry",-1,1,...e],["rz",-30,30,...e]]}),o.push({...a,b1:r+"chest",b2:r+"rCollar",worldPos:this.posRef[r+"rCollar"],worldQuat:this.quatRef[r+"rCollar"],mode:"fixe"}),o.push({...a,b1:r+"chest",b2:r+"lCollar",worldPos:this.posRef[r+"lCollar"],worldQuat:this.quatRef[r+"lCollar"],mode:"fixe"}),o.push({...a,b1:r+"rCollar",b2:r+"rShldr",worldPos:this.posRef[r+"rShldr"],worldQuat:this.quatRef[r+"rShldr"]}),o.push({...a,b1:r+"lCollar",b2:r+"lShldr",worldPos:this.posRef[r+"lShldr"],worldQuat:this.quatRef[r+"lShldr"]}),this.existe(r+"rForeArm")&&o.push({...a,b1:r+"rShldr",b2:r+"rForeArm",worldPos:this.posRef[r+"rForeArm"],worldQuat:this.quatRef[r+"rForeArm"],lm:[["rx",0,160,...e]]}),this.existe(r+"lForeArm")&&o.push({...a,b1:r+"lShldr",b2:r+"lForeArm",worldPos:this.posRef[r+"lForeArm"],worldQuat:this.quatRef[r+"lForeArm"],lm:[["rx",0,160,...e]]}),this.existe(r+"rHand")&&o.push({...a,b1:r+"rForeArm",b2:r+"rHand",worldPos:this.posRef[r+"rHand"],worldQuat:this.quatRef[r+"rHand"],lm:[["rx",0,160,...e],["ry",-10,10,...e]]}),this.existe(r+"lHand")&&o.push({...a,b1:r+"lForeArm",b2:r+"lHand",worldPos:this.posRef[r+"lHand"],worldQuat:this.quatRef[r+"lHand"],lm:[["rx",0,160,...e],["ry",-10,10,...e]]}),o.push({...a,b1:r+"hip",b2:r+"rThigh",worldPos:this.posRef[r+"rThigh"],worldQuat:this.quatRef[r+"rThigh"]}),o.push({...a,b1:r+"hip",b2:r+"lThigh",worldPos:this.posRef[r+"lThigh"],worldQuat:this.quatRef[r+"lThigh"]}),this.existe(r+"rShin")&&o.push({...a,b1:r+"rThigh",b2:r+"rShin",worldPos:this.posRef[r+"rShin"],lm:[["rx",0,160,...e]],worldQuat:this.quatRef[r+"rShin"]}),this.existe(r+"lShin")&&o.push({...a,b1:r+"lThigh",b2:r+"lShin",worldPos:this.posRef[r+"lShin"],lm:[["rx",0,160,...e]],worldQuat:this.quatRef[r+"lShin"]}),this.existe(r+"rFoot")&&o.push({...a,b1:r+"rShin",b2:r+"rFoot",worldPos:this.posRef[r+"rFoot"],lm:[["rx",-10,30,...e],["rz",-10,10,...e]],worldQuat:this.quatRef[r+"rFoot"]}),this.existe(r+"lFoot")&&o.push({...a,b1:r+"lShin",b2:r+"lFoot",worldPos:this.posRef[r+"lFoot"],lm:[["rx",-10,30,...e],["rz",-10,10,...e]],worldQuat:this.quatRef[r+"lFoot"]}),this.breast&&(this.existe(r+"rBreast")&&o.push({...a,b1:r+"chest",b2:r+"rBreast",worldPos:this.posRef[r+"rBreast"],worldQuat:this.quatRef[r+"rBreast"],lm:[["x",...l],["y",...l],["z",...l]]}),this.existe(r+"lBreast")&&o.push({...a,b1:r+"chest",b2:r+"lBreast",worldPos:this.posRef[r+"lBreast"],worldQuat:this.quatRef[r+"lBreast"],lm:[["x",...l],["y",...l],["z",...l]]})),this.existe(r+"lEar_0")&&o.push({...a,b1:r+"head",b2:r+"lEar_0",worldPos:this.posRef[r+"lEar_0"],worldQuat:this.quatRef[r+"lEar_0"],lm:[["rx",-10,30,...e],["rz",-10,10,...e]]}),this.existe(r+"lEar_1")&&o.push({...a,b1:r+"lEar_0",b2:r+"lEar_1",worldPos:this.posRef[r+"lEar_1"],worldQuat:this.quatRef[r+"lEar_1"],lm:[["rx",-10,30,...e],["rz",-10,10,...e]]}),this.existe(r+"lEar_2")&&o.push({...a,b1:r+"lEar_1",b2:r+"lEar_2",worldPos:this.posRef[r+"lEar_2"],worldQuat:this.quatRef[r+"lEar_2"],lm:[["rx",-10,30,...e],["rz",-10,10,...e]]}),this.existe(r+"lEar_3")&&o.push({...a,b1:r+"lEar_2",b2:r+"lEar_3",worldPos:this.posRef[r+"lEar_3"],worldQuat:this.quatRef[r+"lEar_3"],lm:[["rx",-10,30,...e],["rz",-10,10,...e]]}),this.existe(r+"rEar_0")&&o.push({...a,b1:r+"head",b2:r+"rEar_0",worldPos:this.posRef[r+"rEar_0"],worldQuat:this.quatRef[r+"rEar_0"],lm:[["rx",-10,30,...e],["rz",-10,10,...e]]}),this.existe(r+"rEar_1")&&o.push({...a,b1:r+"rEar_0",b2:r+"rEar_1",worldPos:this.posRef[r+"rEar_1"],worldQuat:this.quatRef[r+"rEar_1"],lm:[["rx",-10,30,...e],["rz",-10,10,...e]]}),this.existe(r+"rEar_2")&&o.push({...a,b1:r+"rEar_1",b2:r+"rEar_2",worldPos:this.posRef[r+"rEar_2"],worldQuat:this.quatRef[r+"rEar_2"],lm:[["rx",-10,30,...e],["rz",-10,10,...e]]}),this.existe(r+"rEar_3")&&o.push({...a,b1:r+"rEar_2",b2:r+"rEar_3",worldPos:this.posRef[r+"rEar_3"],worldQuat:this.quatRef[r+"rEar_3"],lm:[["rx",-10,30,...e],["rz",-10,10,...e]]});let h=0;for(let e in o)o[e].name=this.prefix+"_joint_"+h,this.jointList.push(o[e].name),h++;this.motor.add(o)}updateMatrixWorld(e){if(!this.ready)return;let t=[];const i=this.nodes;let s,n,r,o=i.length,a=0;for(;o--;)s=i[a],n=s.bone,a++,s.kinematic?(UO.multiplyMatrices(n.matrixWorld,s.decal),UO.decompose(zO,GO,NO),s.pos=zO.toArray(),s.quat=GO.toArray(),t.push({name:s.name,pos:s.pos,quat:s.quat}),s.motion&&this.freeBone(s)):(r=this.motor.byName(s.name),r&&(UO.copy(r.matrixWorld).multiply(s.decalinv),n.phyMtx.copy(UO),n.isPhysics=!0));0!==t.length&&this.motor.change(t,!0)}dispose(){this.motor.remove(this.jointList),this.motor.remove(this.nameList),this.nodes=[],this.posRef={},this.quatRef={},this.parent.remove(this),this.nameList=[],this.jointList=[]}}function XO(e){const t=new Map,i=new Map,s=e.clone();return WO(e,s,(function(e,s){t.set(s,e),i.set(e,s)})),s.traverse((function(e){if(!e.isSkinnedMesh)return;const s=e,n=t.get(e),r=n.skeleton.bones;s.skeleton=n.skeleton.clone(),s.bindMatrix.copy(n.bindMatrix),s.skeleton.bones=r.map((function(e){return i.get(e)})),s.bind(s.skeleton,s.bindMatrix)})),s}function WO(e,t,i){i(e,t);for(let s=0;s<e.children.length;s++)WO(e.children[s],t.children[s],i)}class ZO{constructor(e,t){this.target=t||e,this.baseGeometry=e.geometry,this.geometry=this.target.geometry,this.V=[new i.Vector3,new i.Vector3,new i.Vector3],this.X=[new i.Vector4,new i.Vector4,new i.Matrix4],this.M=[new i.Vector3,new i.Vector3,new i.Vector3],this.isMorph=!!this.target.morphTargetInfluences,this.isSkin=!!this.target.isSkinnedMesh,this.init()}init(){this.geometry.attributes.position.count===this.baseGeometry.attributes.position.count?(this.length=this.baseGeometry.attributes.position.count,this.indexLength=this.baseGeometry.index.count/3,this.originEdges=new Array(this.length).fill(0),this.targetEdges=new Array(this.length).fill(0),(this.isSkin||this.isMorph)&&(this.back=new Array(3*this.length).fill(0)),this.num=new Array(this.length).fill(0),this.getEdge(this.baseGeometry,this.originEdges),this.addColor(),setTimeout(this.start.bind(this),100)):console.log("object not have same number of vertices !!")}start(){this.ready=!0,this.update()}addColor(){const e=this.geometry;let t=e.attributes.position.array.length;e.setAttribute("color",new i.Float32BufferAttribute(new Array(t).fill(0),3))}resetEdge(e){let t=e.length;for(;t--;)e[t]=0}getEdge(e,t,i=!1,s=!1){let n=e.attributes.position.array;const r=e.index.array;let o,a,l,h,c,d,u,p=this.V[0],f=this.V[1],m=this.V[2],g=0;for(s&&(n=this.getMorph()),i&&(n=this.getSkinned(n)),(i||s)&&this.resetEdge(t),o=this.indexLength;o--;)a=r[g],l=r[g+1],h=r[g+2],p.fromArray(n,3*a),f.fromArray(n,3*l),m.fromArray(n,3*h),c=p.distanceTo(f),d=p.distanceTo(m),u=f.distanceTo(m),t[a]+=.5*(c+d),t[l]+=.5*(c+u),t[h]+=.5*(d+u),g+=3}isZero(e){return 0===e.x&&0===e.y&&0===e.z}getMorph(){const e=this.target.morphTargetInfluences,t=this.geometry.morphAttributes.position,i=e.length,s=this.geometry.attributes.position.array;let n,r,o,a,l=this.geometry.attributes.position.count,h=this.M[0],c=this.M[1],d=this.M[2],u=this.geometry.morphTargetsRelative;for(r=l;r--;){for(n=3*r,c.fromArray(s,n),h.set(0,0,0),o=i;o--;)0!=e[o]&&(a=t[o].data?t[o].data.array:t[o].array,u?h.addScaledVector(d.fromArray(a,n),e[o]):h.addScaledVector(d.fromArray(a,n).sub(c),e[o]));c.add(h),c.toArray(this.back,n)}return this.back}getSkinned(e){const t=this.target.skeleton;t.boneMatrices;const i=this.geometry,s=i.attributes.skinIndex.array,n=i.attributes.skinWeight.array,r=this.target.bindMatrix,o=this.target.bindMatrixInverse;let a,l,h,c,d,u=this.V[0],p=this.V[1],f=this.V[2],m=this.X[0],g=this.X[1],A=this.X[2];for(a=i.attributes.position.count;a--;){for(d=3*a,m.fromArray(s,4*a),g.fromArray(n,4*a),u.fromArray(e,d).applyMatrix4(r),p.set(0,0,0),l=4;l--;)c=g.getComponent(l),c>0&&(h=m.getComponent(l),A.multiplyMatrices(t.bones[h].matrixWorld,t.boneInverses[h]),p.addScaledVector(f.copy(u).applyMatrix4(A),c));p.applyMatrix4(o),p.toArray(this.back,d)}return this.back}update(){if(!this.ready)return;this.getEdge(this.geometry,this.targetEdges,this.isSkin,this.isMorph);const e=this.geometry.attributes.color.array;let t,i,s,n=this.length;for(;n--;)t=this.originEdges[n],i=(t-this.targetEdges[n])/t+.5,s=3*n,e[s]=i>.5?2*(i-.5):0,e[s+1]=0,e[s+2]=i<.5?1-2*i:0;this.geometry.attributes.color.needsUpdate=!0}}class YO extends i.Object3D{constructor(e,t){super(),this.isReady=!1,this.skeleton=t,this.bones=this.skeleton.bones,this.root=e,this.box=new i.BoxGeometry,this.mtxr=new i.Matrix4,this.mtx0=new i.Matrix4,this.mtx1=new i.Matrix4,this.mtx=new i.Matrix4,this.mtx2=new i.Matrix4,this.p=new i.Vector3,this.s=new i.Vector3,this.q=new i.Quaternion,this.e=new i.Euler,this.mat=new i.MeshBasicMaterial({color:13421696,wireframe:!0,toneMapped:!1}),this.init(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){if(!this.isReady)return;let t,i,s=this.children,n=s.length;for(this.mtxr.copy(this.root.matrixWorld).invert();n--;)t=s[n],i=t.userData.bone,this.mtx0.multiplyMatrices(this.mtxr,i.matrixWorld),this.mtx.multiplyMatrices(this.mtx0,t.userData.decal),this.mtx.decompose(this.p,this.q,this.s),t.position.copy(this.p),t.quaternion.copy(this.q),t.updateMatrix();super.updateMatrixWorld(e)}init(){this.mtxr.copy(this.root.matrixWorld).invert();const e=this.bones;let t,s,n,r,o,a,l,h,c,d,u,p=new i.Vector3,f=new i.Vector3,m=e.length;for(t=0;t<m;t++)h=null,r=e[t],s=r.name,o=r.parent,o&&(n=o.name,p.setFromMatrixPosition(o.matrixWorld),f.setFromMatrixPosition(r.matrixWorld),l=p.distanceTo(f),c=[0,0,.5*l],a=[l,1,1],d=[0,0,0],u="_C","head"===n&&"End_head"===s&&(h="box",a=[.16,.2,l],c=[0,.025,.5*-l]),"chest"===n&&"neck"===s&&(h="box",a=[.3,.28,l],c=[0,0,.5*-l]),"abdomen"===n&&(h="box",a=[.28,.24,l+.14],d[2]=0,c=[0,0,.5*-l],c[2]+=.07),"rThigh"===n&&(h="box",a=[.15,.15,l]),"lThigh"===n&&(h="box",a=[.15,.15,l]),"rShin"===n&&(h="box",a=[.12,.12,l+.1],c[2]+=.05),"lShin"===n&&(h="box",a=[.12,.12,l+.1],c[2]+=.05),"rShldr"===n&&(h="box",a=[l+.06,.12,.12],c[0]=.03-c[2],c[2]=0),"lShldr"===n&&(h="box",a=[l+.06,.12,.12],c[0]=c[2]-.03,c[2]=0),"rForeArm"===n&&(h="box",a=[l+.1,.1,.1],c[0]=-c[2]-.05,c[2]=0),"lForeArm"===n&&(h="box",a=[l+.1,.1,.1],c[0]=c[2]+.05,c[2]=0),null!==h&&this.addMesh(o,h,a,c,d,"_C"));this.isReady=!0}addMesh(e,t,s,n,r,o){this.mtx.makeTranslation(n[0],n[1],n[2]);var a=new i.Mesh(this.box,this.mat);a.scale.fromArray(s),a.userData.decal=this.mtx.clone(),a.userData.bone=e,a.userData.size=s,this.add(a)}dispose(){this.children=[],this.box.dispose(),this.mat.dispose(),this.isReady=!1}}const _O={mixRatio:0,threshold:.1,normal:.25,hair:7675906,bow:1049602,sheen:1,sheenRoughness:1,metalness:.6,roughness:.4,vertexColors:!1,alphaTest:.1,h_metal:0,h_rough:.5,clearcoat:1,wireframe:!1,transparent:!1,opacity:1},KO={refSize:1.81,isBreath:!1,isEyeMove:!1,haveHair:!0,haveBlink:!0,haveMorph:!0,morphNormal:!1,morphRelative:!1,haveLOD:!0,levelHigh:["body","Head","crane","eyelash","eyebrow","tear","eye_l","eye_r","eye_l_s","eye_r_s"],levelHair:["hair","hair_man"],levelLow:["body_low"],skeletonRef:"body",fullMorph:["MUSCLE","LOW","BIG","MONSTER"],textureQuality:1,textureRef:"avatar_c",texturePath:"assets/textures/avatar_",textures:["avatar_c.jpg","avatar_n.jpg","avatar_t.jpg","mouth_c.jpg","mouth_a.jpg","mouth_n.jpg","eye_c.jpg","eye_n.jpg","hair.jpg","hair_a.jpg","eyelash_c.jpg","eyelash_a.jpg","eyelash_n.jpg","hair_man.jpg","hair_man_a.jpg","avatar_ao.jpg"],modelPath:"assets/models/avatar/",forceModel:null,setting:_O,materialRef:"skin",materials:{skin:{type:"Sss",map:"avatar_c",normalMap:"avatar_n",roughness:.54,metalness:.14,normalScale:new i.Vector2(_O.normal,-_O.normal),wireframe:_O.wireframe,aoMap:"avatar_ao",aoMapIntensity:1,vertexColors:!1,sssMap:"avatar_t",sssColor:new i.Color(15606563),sssAmbient:.5,sssDistortion:.6,sssAttenuation:.1,sssScale:6},mouth:{type:"Standard",map:"mouth_c",roughness:.02,metalness:0,vertexColors:!1,alphaMap:"mouth_a",alphaTest:.5,normalMap:"mouth_n",normalScale:new i.Vector2(.5,-.5)},sub_eye:{type:"Physical",roughness:0,metalness:1,ior:1.376,opacity:.1,clearcoat:1,transparent:!0},eye:{type:"Physical",map:"eye_c",roughness:.7,metalness:.15,normalMap:"eye_n",normalScale:new i.Vector2(2,-2),clearcoat:.25},hair:{type:"Standard",color:_O.hair,aoMap:"hair",metalnessMap:"hair",roughness:.6,metalness:1,alphaMap:"hair_a",side:i.DoubleSide,emissive:_O.hair,emissiveIntensity:.5,transparent:!0,blending:i.CustomBlending,blendDst:i.ZeroFactor,blendDstAlpha:i.SrcAlphaFactor,alphaToCoverage:!0},hair_man:{type:"Standard",color:_O.hair,aoMap:"hair_man",metalnessMap:"hair_man",roughness:.6,metalness:1,alphaMap:"hair_man_a",side:i.DoubleSide,transparent:!0,blending:i.CustomBlending,blendDst:i.ZeroFactor,blendDstAlpha:i.SrcAlphaFactor,forceSinglePass:!0,alphaToCoverage:!0},eyelash:{type:"Standard",color:_O.hair,map:"eyelash_c",alphaMap:"eyelash_a",transparent:!0,opacity:1,side:i.DoubleSide,alphaToCoverage:!0,polygonOffset:!0,polygonOffsetFactor:-4},tear:{type:"Standard",map:"eyelash_c",roughness:0,metalness:1,alphaMap:"eyelash_a",transparent:!0,alphaToCoverage:!0,opacity:1},low:{type:"Basic"}},changeMaterial:(e={},t=!1)=>{if(!Os.getMaterial(KO.materialRef))return;const i=KO.setting,s=KO.materials;let n,r=!1;for(let t in e)void 0!==i[t]&&i[t]!==e[t]&&(i[t]=e[t],r=!0);if(r)for(let i in s){n=Os.getMaterial(i);for(let r in e)void 0!==n[r]&&(t&&s[i][r]?n[r]=s[i][r]:n[r]=e[r])}},applyMaterial:(e,t)=>{const i=!0,s=Os.getMaterial("skin");//!Human.haveLOD;
e.traverse((e=>{if(e.isMesh)switch(e.name){case"body":case"Head":e.material=s,e.receiveShadow=!0,e.castShadow=!0,e.visible=i;break;case"body_low":e.material=s,e.receiveShadow=!0,e.castShadow=!0,e.visible=!1;break;case"crane":e.material=s,e.receiveShadow=!0,e.castShadow=!1,e.visible=!KO.haveHair;break;case"mouth":e.material=Os.getMaterial("mouth")||s,e.receiveShadow=!0,e.castShadow=!1,e.visible=i,e.geometry.computeVertexNormals();break;case"eyelash":case"eyebrow":e.material=Os.getMaterial("eyelash")||s,e.receiveShadow=!1,e.castShadow=!1,e.visible=i;break;case"tear":e.material=Os.getMaterial("tear")||s,e.receiveShadow=!1,e.castShadow=!1,e.visible=i;break;case"eye_l":case"eye_r":e.material=Os.getMaterial("eye")||s,e.receiveShadow=!1,e.castShadow=!1;break;case"eye_l_s":case"eye_r_s":e.material=Os.getMaterial("sub_eye")||s,e.receiveShadow=!1,e.castShadow=!1,e.visible=i;break;case"hair":e.material=Os.getMaterial("hair")||s,e.receiveShadow=!1,e.castShadow=!1,e.visible=!!KO.haveHair&&i;break;case"hair_man":e.material=Os.getMaterial("hair_man")||s,e.receiveShadow=!1,e.castShadow=!1,e.visible=!!KO.haveHair&&i}}))},adjustment:()=>[{name:"neck",values:[-5,0,0]},{name:"chest",values:[5,0,0]},{name:"lCollar",values:[0,0,-10]},{name:"rCollar",values:[0,0,10]},{name:"lShldr",values:[-20,2,5]},{name:"rShldr",values:[-20,-2,-5]},{name:"lForeArm",values:[0,0,10]},{name:"rForeArm",values:[0,0,-10]},{name:"lHand",values:[0,15,10]},{name:"rHand",values:[0,-15,-10]},{name:"lThumb2",values:[0,25,10]},{name:"rThumb2",values:[0,-25,-10]}]},JO={wireframe:!1,normal:.25,hair:2433041},$O={isBreath:!1,isEyeMove:!1,haveMorph:!0,skeletonRef:"body_low",fullMorph:["MUSCLE","LOW","BIG","MONSTER"],textureRef:"avatar_c_0k",texturePath:"assets/textures/avatar/",textures:["avatar_c_0k.jpg","avatar_n_0k.jpg","avatar_ao_0k.jpg","hair_man_a_0k.jpg","Hair_01_c.png","Hair_01_n.png"],modelPath:"assets/models/avatar/",forceModel:null,setting:JO,materialRef:"skin_low",materials:{skin_low:{type:"Standard",map:"avatar_c_0k",aoMap:"avatar_ao_0k",normalMap:"avatar_n_0k",normalScale:new i.Vector2(JO.normal,-JO.normal),envMapIntensity:.3,roughness:.22,metalness:0,vertexColors:!1},hair_low:{type:"Standard",color:JO.hair,alphaMap:"hair_man_a_0k",transparent:!0},hair_low_2:{type:"Standard",color:JO.hair,map:"Hair_01_c",normalMap:"Hair_01_n"}},changeMaterial:(e={},t=!1)=>{if(!Os.getMaterial($O.materialRef))return;const i=Lee.materials;let s;for(let n in i){s=Os.getMaterial(n);for(let r in e)void 0!==s[r]&&(t&&i[n][r]?s[r]=i[n][r]:s[r]=e[r])}},applyMaterial:(e,t)=>{const i=Os.getMaterial($O.materialRef);e.traverse((e=>{if(e.isMesh)switch(e.name){case"body_low":e.material=i,e.receiveShadow=!0,e.castShadow=!0;break;case"hair_low":e.material=Os.getMaterial("hair_low")||i,e.receiveShadow=!1,e.castShadow=!1;break;case"hair_low_2":e.material=Os.getMaterial("hair_low_2")||i,e.receiveShadow=!1,e.castShadow=!1}}))},adjustment:()=>[{name:"neck",values:[-5,0,0]},{name:"chest",values:[5,0,0]},{name:"lCollar",values:[0,0,-10]},{name:"rCollar",values:[0,0,10]},{name:"lShldr",values:[-20,2,0]},{name:"rShldr",values:[-20,-2,0]}]},eC={metalness:.33,roughness:.11,clearcoat:0,wireframe:!1},tC={decalY:.02,isBreath:!1,isEyeMove:!1,haveMorph:!1,skeletonRef:"eva_SKIN",fullMorph:[],haveQuality:!1,skinRef:"eva_00",texturePath:"assets/textures/eva/",textures:["eva00_c.jpg","eva01_c.jpg","eva02_c.jpg","eva_l.jpg","eva_ao.jpg"],modelPath:"assets/models/",forceModel:"eva",setting:eC,materialRef:"eva00",materials:{eva00:{type:"Physical",map:"eva00_c",emissiveMap:"eva_l",emissive:16777215,roughness:eC.roughness,metalness:eC.metalness,wireframe:eC.wireframe,clearcoat:eC.clearcoat,aoMap:"eva_ao"},eva01:{type:"Physical",map:"eva01_c",emissiveMap:"eva_l",emissive:16777215,roughness:eC.roughness,metalness:eC.metalness,wireframe:eC.wireframe,clearcoat:eC.clearcoat,aoMap:"eva_ao"},eva02:{type:"Physical",map:"eva02_c",emissiveMap:"eva_l",emissive:16777215,roughness:eC.roughness,metalness:eC.metalness,wireframe:eC.wireframe,clearcoat:eC.clearcoat,aoMap:"eva_ao"}},changeMaterial:(e,t=!1)=>{if(!Os.getMaterial(tC.materialRef))return;const i=tC.materials;let s;for(let n in i){s=Os.getMaterial(n);for(let r in e)void 0!==s[r]&&(t&&i[n][r]?s[r]=i[n][r]:s[r]=e[r]);s.needsUpdate=!0}},applyMaterial:(e,t)=>{const i=Os.getMaterial(t);e.traverse((e=>{if(e.isMesh)switch(e.material=i,e.receiveShadow=!0,e.castShadow=!0,e.name){case"eva_2_head":case"eva_2_mach":e.visible="eva02"===t;break;case"eva_L_COLLAR":case"eva_R_COLLAR":e.visible="eva00"!==t;break;case"eva_HEAD":case"eva_MACHOIR":e.visible="eva01"===t;break;case"eva_0_R_COLLAR":case"eva_0_L_COLLAR":case"eva_0_head":case"eva_0_head2":e.visible="eva00"===t;break;case"eva_0_CHEST2":e.visible="eva01"!==t}}))}},iC={metalness:.2,roughness:.8,wireframe:!1},sC={decalY:-.06,isBreath:!1,isEyeMove:!1,haveMorph:!1,skeletonRef:"leeSkin",fullMorph:[],haveQuality:!1,texturePath:"assets/textures/",textures:["lee_c.jpg","lee_ao.jpg"],modelPath:"assets/models/",forceModel:"lee",setting:iC,materialRef:"lee_material",materials:{lee_material:{type:"Physical",map:"lee_c",roughness:.3,metalness:.08,wireframe:iC.wireframe,sheen:2.2,sheenColorMap:"lee_c",sheenColor:16777215,sheenRoughness:.4,envMapIntensity:1}},changeMaterial:(e,t=!1)=>{if(!Os.getMaterial(sC.materialRef))return;const i=sC.materials;let s;for(let n in i){s=Os.getMaterial(n);for(let r in e)void 0!==s[r]&&(t&&i[n][r]?s[r]=i[n][r]:s[r]=e[r])}},applyMaterial:(e,t)=>{const i=Os.getMaterial("lee_material");e.traverse((e=>{e.isMesh&&(e.material=i,e.receiveShadow=!0,e.castShadow=!0)}))},adjustment:()=>[{name:"lHand",values:[-60,0,0]},{name:"rHand",values:[-60,0,0]}]},nC={metalness:.2,roughness:.8,wireframe:!1},rC={decalY:-.06,isBreath:!1,isEyeMove:!1,haveMorph:!1,skeletonRef:"barbados",multyMaterial:!0,fullMorph:[],haveQuality:!1,texturePath:"assets/textures/",textures:[],modelPath:"assets/models/",forceModel:"barbados",setting:nC,materialRef:"bb",materials:{bb:{type:"Physical",roughness:.3,metalness:.08,wireframe:nC.wireframe,sheen:2.2,sheenColor:16777215,sheenRoughness:.4,envMapIntensity:1}},changeMaterial:(e,t=!1)=>{},applyMaterial:(e,t)=>{},adjustment:()=>[]},oC=1/30,aC=Math.PI/180,lC=180/Math.PI,hC=new i.Vector3,cC={tmp:[],model:[],avatar:null,callback:()=>{},add:(e,t)=>{cC.tmp=[...e],cC.callback=t,cC.tmp.length&&cC.loadOne()},loadOne:()=>{let e=cC.tmp[0];cC.avatar=new dC({type:e,callback:cC.next,morph:!0,isPreload:!0})},next:e=>{cC.avatar.dispose(),cC.tmp.shift(),0===cC.tmp.length?cC.callback():cC.loadOne()}};class dC extends i.Group{constructor(e={}){switch(super(),this.isPreload=e.isPreload||!1,this.fixWeight=void 0===e.fixWeight||e.fixWeight,this.rootPath=e.path||"./",this.lzmaPath=this.rootPath+"src/libs/lzma_worker.js",Os.dracoPath=this.rootPath+"src/libs/draco/",this.callback=e.callback||function(){},this.matrixAutoUpdate=!1,this.isPause=!0,this.randomMorph=e.randomMorph||!1,this.randomSize=e.randomSize||!1,this.actionPose=null,this.model=e.type||"man",this.startAnimation=e.anim||"idle",this.bodyMorph=[0,0],this.faceMorph=[0,0],this.ref=null,this.model){case"barbados":this.ref=rC;break;case"lee":this.ref=sC;break;case"man":case"woman":this.ref=KO;break;case"man_low":case"woman_low":this.ref=$O;break;case"eva00":case"eva01":case"eva02":this.ref=tC}this.compact=void 0===e.compact||e.compact,this.haveMorph=void 0!==e.morph&&e.morph,this.fullMaterial=void 0===e.material||e.material,this.size=e.size||1,this.realSize=0,this.baseSize=0,this.fullMorph=this.ref.fullMorph||[],this.randomMorph&&this.fullMorph.length&&(this.haveMorph=!0),this.textureQuality=this.ref.textureQuality||0,this.skeleton=null,this.mixer=null,this.mesh={},this.bones={},this.done=!1,this.isClone=!1,this.isBreath=this.ref.isBreath||!1,this.isEyeMove=this.ref.isEyeMove||!1,this.haveBlink=this.ref.haveBlink||!1,this.haveLOD=this.ref.haveLOD||!1,e.noLOD&&(this.ref.haveLOD=!1,this.haveLOD=!1),this.lod=-1,this.decalY=this.ref.decalY||0,this.tensionTest=!1,this.tensionActive=!1,this.fixToe=!1,this.clipsToesFix=[],this.n=Math.round(1e3*Math.random()),this.actions=new Map,this.current=null,this.old=null,this.breath=0,this.breathSide=-1,this.q=(new i.Quaternion).setFromAxisAngle({x:0,y:1,z:0},.5*Math.PI),this.headBoneLook=new i.Vector3,this.eyeTarget=new i.Group,this.eyeTarget.position.set(0,1,0),this.tmpMtx=new i.Matrix4,this.tmpQ=new i.Quaternion,this.setting={},this.root=Os.get(this.ref.forceModel?this.ref.forceModel:this.model,"O"),this.root?(this.isClone=!0,this.tensionTest=!1,this.root=XO(this.root),this.init()):this.fullMaterial?this.load():this.loadModels()}rand(e=0,t=1){return e+Math.random()*(t-e)}load(){if(this.ref.textures&&this.ref.textures.length)if(this.skin=Os.getTexture(this.ref.textureRef,{quality:this.textureQuality}),this.skin)this.loadModels();else{const e=this.rootPath+this.ref.texturePath+(this.textureQuality?this.textureQuality+"k/":"");Os.load(this.ref.textures,this.loadModels.bind(this),e,"loading images...",this.textureQuality)}else this.loadModels()}loadModels(){const e=this.ref.forceModel?this.ref.forceModel:this.model,t=[e+".glb"],i=this.rootPath+this.ref.modelPath;this.ref.haveMorph&&this.haveMorph&&t.push(e+"_morph.glb"),Os.load(t,this.init.bind(this),i,"loading models...")}update(e){this.done&&this.mixer&&(this.mixer.update(e),this.haveBlink&&this.eyeBlink(),this.isClone||(this.look(10*e),this.breathing(),this.autoToes()),this.tensionActive&&(this.tension1.update(),this.tension2.update()),this.actionPose&&this.actionPose.setEffectiveWeight(this.getAction("idle")._effectiveWeight),window.gui&&window.gui.updateTimeBarre&&this.current&&window.gui.updateTimeBarre(Math.round(30*this.current.time),this.current.frameMax))}eyeBlink(){const e=this.n++;let t=0;e<=10&&(t=.1*e),e>10&&e<=20&&(t=1-.1*(e-10)),this.n>500&&(this.n=0),this.setMorph("EyeBlink",t)}look(e){if(!this.isEyeMove)return;if(this.isPause)return;const t=window.mouse||{x:0,y:0};e>1&&(e=1),this.headBoneLook.lerp({x:-20*t.y*aC,y:0,z:-20*t.x*aC},e),this.eyeTarget.position.lerp({x:.5*t.x,y:1,z:.25*-t.y},e);let i=this.headBoneLook;this.tmpQ.setFromEuler({_x:i.x,_y:i.y,_z:i.z,_order:"XYZ"},!1),this.bones.head.quaternion.multiply(this.tmpQ);let s=this.bones.ER,n=this.bones.EL,r={x:0,y:0,z:1};this.tmpMtx.lookAt(n.position,this.eyeTarget.position.clone().add({x:.03,y:0,z:-.074}),r),n.quaternion.setFromRotationMatrix(this.tmpMtx).multiply(this.q),this.tmpMtx.lookAt(s.position,this.eyeTarget.position.clone().add({x:-.03,y:0,z:-.074}),r),s.quaternion.setFromRotationMatrix(this.tmpMtx).multiply(this.q)}breathing(){if(!this.bones)return;if(!this.isBreath)return;if(!this.skeleton.setScalling)return;let e=.01*this.breath;this.breathSide>0?(this.skeleton.setScalling(this.bones.chest,this.lerp(1,1.02,e),this.lerp(1,1.04,e),1),this.skeleton.setScalling(this.bones.abdomen,1,this.lerp(1,.92,e),1)):(this.skeleton.setScalling(this.bones.chest,this.lerp(1.02,1,e),this.lerp(1.04,1,e),1),this.skeleton.setScalling(this.bones.abdomen,1,this.lerp(.92,1,e),1)),this.breath++,100===this.breath&&(this.breath=0,this.breathSide=this.breathSide>0?-1:1)}setPosition(e,t,i){this.position.set(e,t,i),this.updateMatrix()}setRotation(e,t,i,s){let n=this.lerp(this.rotation.y,t,s);this.rotation.set(e,n,i),this.updateMatrix()}lerp(e,t,i){return(1-i)*e+i*t}onReady(){}initMaterial(){if(Os.getMaterial(this.ref.materialRef))return;if(!this.fullMaterial)return void Os.set(this.ref.materialRef,new i.MeshStandardMaterial);let e,t,s;for(const n in this.ref.materials){s={...this.ref.materials[n]},t=s.type,delete s.type;for(const e in s)"envMapIntensity"!==e&&"normalMapType"!==e&&"aoMapIntensity"!==e&&"aoMapIntensity"!==e&&("map"!==e&&-1===e.search("Map")||(s[e]=Os.getTexture(s[e],{quality:this.textureQuality})));"Basic"===t?e=new i.MeshBasicMaterial(s):"Standard"===t?e=new i.MeshStandardMaterial(s):"Physical"===t?e=new i.MeshPhysicalMaterial(s):"Sss"===t&&(e=new Qx(s)),e.name=n,Os.set(n,e)}this.setting=this.ref.setting}setMaterial(e,t){let i=Os.getMaterial(this.ref.materialRef);if(i)for(let t in e)void 0!==i[t]&&(i[t]=e[t])}setMaterialNormal(e){let t=Os.getMaterial("skin");t&&(e<0&&(e=0),t.normalScale.set(e,-e))}getMaterial(e){return Os.getMaterial(e)}init(){if(this.initMaterial(),!this.isClone){let e=this.ref.forceModel?this.ref.forceModel:this.model;this.ref.multyMaterial&&Os.getMesh(e,!0),this.root=Os.get(e,"O"),this.ref.applyMaterial(this.root,this.model)}this.ref.forceModel&&this.isClone&&this.ref.applyMaterial(this.root,this.model),this.realSize=0,this.root.traverse(function(e){e.raycast=function(){},e.isMesh&&(e.name===this.ref.skeletonRef&&(e.matrixAutoUpdate=!1,this.skeleton=e.skeleton,this.skeleton.resetScalling&&this.skeleton.resetScalling(),this.realSize=e.geometry.boundingBox.max.y),"Head"===e.name&&(this.realSize=e.geometry.boundingBox.max.y),this.mesh[e.name]=e),e.isBone&&(this.bones[e.name]=e)}.bind(this)),this.realSizeRatio=1/this.realSize,this.baseSize=this.realSize,this.ref.isEyeMove&&this.bones.neck.add(this.eyeTarget);for(let e in this.mesh)this.mesh[e].isSkinnedMesh&&e!==this.ref.skeletonRef&&(this.mesh[e].skeleton=this.skeleton);if(this.isClone||(this.haveMorph&&Os.applyMorph(this.model+"_morph",this.mesh,this.ref.morphNormal,this.ref.morphRelative),Os.set(this.model,this.root,"O")),1!==this.size&&this.root.scale.set(1,1,1).multiplyScalar(this.size),this.mixer=new i.AnimationMixer(this),0===Os.clip.length)this.compact?this.loadCompactAnimation(this.rootPath+"assets/animation/animations.bin"):this.loadAnimationJson(this.rootPath+"assets/animation/animations.json",this.start.bind(this));else{let e=Os.clip.length;for(;e--;)this.addAction(Os.clip[e]);this.start()}}setRealSize(e){this.realSize=e;let t=.5+this.baseSize/this.realSize*.5;this.setSize(this.realSize*this.realSizeRatio),this.setHeadSize(t)}setSize(e){this.size=e,this.root.scale.set(1,1,1).multiplyScalar(this.size)}setHeadSize(e){this.bones.head.scale.set(1,1,1).multiplyScalar(e)}addTensionMap(){this.tension1=new ZO(this.mesh.body),this.tension2=new ZO(this.mesh.Head)}setBounding(e){for(let t in this.mesh)this.mesh[t].isMesh&&(this.mesh[t].geometry.boundingSphere.radius=e)}setLevel(e){this.haveLOD&&this.lod!==e&&(this.lod=e,this.hideAll(),0===this.lod?this.setVisible(this.ref.levelLow,!0):(this.setVisible(this.ref.levelHigh,!0),this.ref.haveHair&&this.setVisible(this.ref.levelHair,!0)))}hideAll(){for(let e in this.mesh)this.mesh[e].visible=!1}setVisible(e,t){"string"==typeof e&&(e=[e]);let i,s=e.length;for(;s--;)i=e[s],this.mesh[i]&&(this.mesh[i].visible=t)}setMorph(e,t){t=t<0?0:t,this.haveMorph&&(this.morpher("eyelash",e,t),this.morpher("eyebrow",e,t),this.morpher("tear",e,t),this.morpher("mouth",e,t),this.morpher("body",e,t),this.morpher("Head",e,t),this.morpher("body_low",e,t))}morpher(e,t,i){this.mesh[e]&&this.mesh[e].morphTargetInfluences&&void 0!==this.mesh[e].morphTargetDictionary[t]&&(this.mesh[e].morphTargetInfluences[this.mesh[e].morphTargetDictionary[t]]=i)}lerp(e,t,i){return(1-i)*e+i*t}clone(e){return new this.constructor({type:e.type},this)}dispose(){this.exoskel&&this.addExo(),this.helper&&this.addHelper(),this.stop(),this.mixer.uncacheRoot(this),this.remove(this.root),this.skeleton.dispose(),this.parent&&this.parent.remove(this),this.isClone}start(){this.isPreload?this.callback():this.done||(this.done=!0,this.onReady(),this.play(this.startAnimation),this.ref.adjustment&&this.makePoseTrack("adjustment",this.ref.adjustment(),!0),this.randomMorph&&this.setBodyMorph([this.rand(-1,1),this.rand(-1,1)]),this.randomSize&&this.setRealSize(this.rand(1,2)),setTimeout(function(){this.add(this.root),this.callback()}.bind(this),100))}setBodyMorph(e){if(!this.haveMorph)return;e&&(this.bodyMorph=e);let t=Number(this.bodyMorph[0]),i=Number(this.bodyMorph[1]);this.setMorph("MUSCLE",i<0?-i:0),this.setMorph("LOW",i>=0?i:0),this.setMorph("BIG",t<0?-t:0),this.setMorph("MONSTER",t>=0?t:0);let s=.5*(t+1),n=1-.5*(i+1);this.setMaterialNormal(.5*(n+s))}setFaceMorph(e){if(!this.haveMorph)return;e&&(this.faceMorph=e);let t=Number(this.faceMorph[0]),i=Number(this.faceMorph[1]);this.setMorph("Shock",i<0?-i:0),this.setMorph("Frown",i>=0?i:0),this.setMorph("SmileOpen",t<0?-t:0),this.setMorph("Angry",t>=0?t:0)}addHelper(){this.helper?(this.helper.dispose(),this.remove(this.helper),this.helper=null):(this.helper=new i.SkeletonHelper(this.root),this.helper.raycast=function(){},this.helper.matrix=this.root.matrix,this.add(this.helper))}addExo(){return this.exoskel?(this.exoskel.dispose(),this.remove(this.exoskel),this.exoskel=null):(this.exoskel=new YO(this.root,this.skeleton),this.exoskel.matrix=this.root.matrix,this.add(this.exoskel)),this.exoskel}attachToBone(e,t){e.matrix=t.matrixWorld,e.matrixAutoUpdate=!1}loadAnimationJson(e,t){const i=new XMLHttpRequest;i.open("GET",e,!0),i.onreadystatechange=function(){if(4===i.readyState&&(200===i.status||0===i.status)){let e=JSON.parse(i.responseText);this.urls=[];for(let t in e)"main"===t?this.urls.push(...e[t]):this.urls.push(...e[t].map((e=>t+"/"+e)));this.endCallback=t||function(){},this.loadOne()}}.bind(this),i.send()}loadOne(){let e=this.urls[0];this.loadAnimationFbx(this.rootPath+"assets/animation/fbx/"+e+".fbx",this.next.bind(this))}next(){this.urls.shift(),0===this.urls.length?this.endCallback():this.loadOne()}loadCompactAnimation(e="./assets/models/animations.bin"){var t=new XMLHttpRequest;t.open("GET",e,!0),t.responseType="arraybuffer";const s={animations:[]},n=this;t.onload=function(){ws.decompress(t.response,(e=>{const t=JSON.parse(e);for(let e in t)s.animations.push(i.AnimationClip.parse(t[e]));n.applydAnimation(s),n.start()}))},t.send()}loadAnimationGlb(e,t){let i=e.substring(e.lastIndexOf("/")+1,e.lastIndexOf("."));Os.loaderGLTF().load(e,function(e){this.applydAnimation(e,i),t&&t()}.bind(this),null,t)}directGlb(e,t){Os.loaderGLTF().parse(e,"",function(e){this.stop(),this.applydAnimation(e,t)}.bind(this))}loadAnimationFbx(e,t){let i=e.substring(e.lastIndexOf("/")+1,e.lastIndexOf("."));Os.loaderFBX().load(e,function(e){this.convertFbx(i,e.animations[0]),t&&t()}.bind(this),null,t)}directFbx(e,t){try{let i=Os.loaderFBX().parse(e,"");this.convertFbx(t,i.animations[0],!0)}catch(e){console.error("bug",e)}}applydAnimation(e,t){let i=e.animations.length,s=!1;for(1===i&&(t&&(e.animations[0].name=t),s=!0);i--;)this.addClip(e.animations[i]),this.addAction(e.animations[i],s)}addClip(e,t=!1){t&&i.AnimationUtils.makeClipAdditive(e);let s=Os.clip.length,n=-1;for(;s--;)Os.clip[s].name===e.name&&(n=s);-1!==n&&Os.clip.slice(n,1),Os.clip.push(e)}addAction(e,t){const i=this.mixer.clipAction(e);i.frameMax=Math.round(30*e.duration),i.play(),i.enabled=!0,-1!==e.name.search("idle")&&(i.enabled=!0),"Jumping Up"===e.name&&(i.loop=LoopPingPong),this.actions.set(e.name,i),window.gui&&window.gui.getAnimation&&window.gui.getAnimation()}getAnimation(e=!1,t=!1){let i=[],s=0;if(t){let t=Os.clip.length;for(;t--;)i[s]=e?Os.clip[s].toJSON():Os.clip[s],s++}else this.actions.forEach((function(t,n){i[s]=e?t._clip.toJSON():t._clip,s++}));return i}exportAnimationLzma(e){this.lzma||(this.lzma=new ws(this.lzmaPath));const t=this.getAnimation(!0);this.lzma.compress(JSON.stringify(t),2,(function(t){if(e)e({name:"animations",data:new Uint8Array(t),type:"bin"});else{let e=document.createElement("a");e.style.display="none",document.body.appendChild(e),e.href=URL.createObjectURL(new Blob([new Uint8Array(t)],{type:"application/octet-stream"})),e.download="animations.bin",e.click()}}))}armAngle(){}autoToes(){if(!this.fixToe)return;let e=this.getRot("rFoot"),t=this.getRot("lFoot"),i=this.getWorldPos("hip"),s=this.getWorldPos("rToes"),n=this.getWorldPos("lToes");e[0]>0&&s.z-i.z<0?this.setRot("rToes",1.5*-e[0],0,0):0!==e[0]&&this.setRot("rToes",0,0,0),t[0]>0&&n.z-i.z<0?this.setRot("lToes",1.5*-t[0],0,0):0!==t[0]&&this.setRot("lToes",0,0,0)}resetToes(){this.fixToe&&(this.fixToe=!1,this.setRot("rToes",0,0,0),this.setRot("lToes",0,0,0))}convertFbx(e,t,s){const n=Math.PI/180;let r=new i.Vector3,o=new i.Quaternion,a=(new i.Quaternion).setFromAxisAngle({x:1,y:0,z:0},90*n);const l=t.tracks,h=[];let c,d,u,p,f=l.length,m=0;for(;f--;){if(u=l[m],p=u.name.substring(0,u.name.lastIndexOf(".")),"hip.position"===u.name){let e=[];for(c=u.values.length/3;c--;)d=3*c,r.set(u.values[d],u.values[d+1],0).multiplyScalar(.01),r.toArray(e,d);h.push(new i.VectorKeyframeTrack(u.name,u.times,e))}else{let e=[];for(c=u.values.length/4;c--;)d=4*c,"hip"===p?o.set(u.values[d],u.values[d+1],u.values[d+2],u.values[d+3]).multiply(a):o.set(u.values[d],u.values[d+2],-u.values[d+1],u.values[d+3]),o.toArray(e,d);h.push(new i.QuaternionKeyframeTrack(u.name,u.times,e))}m++}let g=new i.AnimationClip(e,-1,h);g.duration=t.duration,this.stop(),this.addClip(g),this.addAction(g,s)}makePoseTrack(e,t,s=!1){const n=Math.PI/180;let r=new i.Quaternion;const o=t,a=[];let l,h,c,d,u=o.length,p=0;for(;u--;){d=o[u],d.name;let e=[],t=[];for(p=0,l=3;l--;)h=0,c=4*p,t.push(.03333333507180214*p),r.setFromEuler({_x:d.values[0]*n,_y:d.values[1]*n,_z:d.values[2]*n,_order:"XYZ"}),r.toArray(e,c),p++;a.push(new i.QuaternionKeyframeTrack(d.name+".quaternion",t,e))}let f=s?i.AdditiveAnimationBlendMode:i.NormalAnimationBlendMode,m=new i.AnimationClip(e,-1,a,f);m.duration=.10000000521540642;const g=this.mixer.clipAction(m);g.enabled=!0,g.setEffectiveTimeScale(1),g.setEffectiveWeight(1),g.play(),this.actionPose=g}prepareCrossFade(e,t,i){this.isPause=!1,this.unPause(),"idle"!==t._clip.name?this.executeCrossFade(e,t,i):this.synchronizeCrossFade(e,t,i)}synchronizeCrossFade(e,t,i){this.mixer.addEventListener("loop",(function n(r){r.action===e&&(s.mixer.removeEventListener("loop",n),s.executeCrossFade(e,t,i))}));const s=this}executeCrossFade(e,t,i,s=!0){this.setWeight(t,1),t.time=0,e.crossFadeTo(t,i,!0)}pause(){this.actions.forEach((function(e){e.paused=!0})),this.isPause=!0}unPause(){this.actions.forEach((function(e){e.paused=!1})),this.isPause=!1}playAll(){this.actions.forEach((function(e){e.play()}))}setTimescale(e){this.actions.forEach((function(t){t.setEffectiveTimeScale(e)}))}syncro(e){let t=this.getAction(e);if(!t)return;let i=t.time;this.actions.forEach((function(e){e.time=i}))}setWeight(e,t){e.enabled=!0,t<0&&(t=0),t>1&&(t=1),e.setEffectiveWeight(t)}getAnimInfo(e){let t=this.getAction(e);if(t)return{name:e,time:t.time,frame:Math.round(30*t.time),frameMax:t.frameMax,timeScale:t.timeScale}}getAction(e){return this.actions.get(e)}play(e,t=.5){let i=this.getAction(e);if(!i)return!1;if(this.current){if(this.current!==i){this.old=this.current,this.current=i;let s="idle"===this.current.getClip().name;s="idle"===this.old.getClip().name,-1!==this.clipsToesFix.indexOf(e)?this.fixToe=!0:this.resetToes();let n=this.old.getEffectiveWeight(),r=this.current.getEffectiveWeight(),o=this.current.time;if(!s){let e=this.current.getClip().duration/this.old.getClip().duration;o=this.old.time*e}this.current.reset(),this.current.time=o,this.fixWeight?(this.current.weight=1,this.current.stopFading(),this.old.stopFading(),this.old._scheduleFading(t,n,0),this.current._scheduleFading(t,r,1)):this.executeCrossFade(this.old,this.current,t)}}else this.stop(),this.current=i,i.setEffectiveWeight(1);return this.isPause=!1,!0}playFrame(e,t,i=1){let s=this.getAction(e);s&&(s.time=t*oC,s.setEffectiveWeight(i),s.play(),s.paused=!0,this.isPause=!0)}playOne(e,t=1){this.current&&(this.current.time=e*oC,this.current.setEffectiveWeight(t),this.current.play(),this.current.paused=!0,this.isPause=!0)}stop(){this.actions.forEach((function(e){e.setEffectiveWeight(0)}))}setRot(e,t,i,s){let n=this.bones[e];n&&(n.rotation.set(t*aC,i*aC,s*aC,"XYZ"),n.updateMatrix())}setRot2(e,t,s,n){let r=this.bones[e];if(!r)return;let o=(new i.Quaternion).setFromEuler({_x:t*lC,_y:s*lC,_z:n*lC,_order:"XYZ"}).invert();r.quaternion.premultiply(o),r.updateMatrix()}getRot(e){let t=this.bones[e];if(!t)return;let i=t.rotation.toArray();return[Math.round(i[0]*lC),Math.round(i[1]*lC),Math.round(i[2]*lC)]}getWorldPos(e){let t=this.bones[e];if(t)return hC.set(0,0,0),t.localToWorld(hC),{x:hC.x,y:hC.y,z:hC.z}}bodyMask(e={arm:!0,leg:!0,foot:!0,chest:!0}){let t=.25;this.canvas||(this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=256);const s=this.canvas.getContext("2d");s.fillStyle="#FFFFFF",s.fillRect(0,0,256,256),s.fillStyle="black",e.arm&&s.fillRect(196,112,59,46.5),e.leg&&s.fillRect(128,183.5,71.75,72.5),e.foot&&s.fillRect(817*t,205.5,51.5,50),e.chest&&(s.fillRect(120,144,75,40),s.fillRect(553*t,116.5,57,27.5),s.fillRect(533*t,531*t,5,45*t));let n=new Image;n.src=this.canvas.toDataURL(),this.mask&&this.mask.dispose(),this.mask=new i.Texture(n),this.mask.flipY=!1,this.mask.needsUpdate=!0;const r=Os.getMaterial("skin");r.alphaTest=.9,r.alphaMap=this.mask}zeroColor(e){e.isMesh&&(e=e.geometry);let t=e.attributes.position.array.length;e.setAttribute("color",new i.Float32BufferAttribute(new Array(t).fill(0),3))}}class uC extends iO{constructor(e={},t){super(),this.motor=t,this.utils=this.motor.utils,this.isCharacter=!0,this.isPlayer=!1,this.enable=!1,this.useImpulse=e.useImpulse||!1,this.useFloating=e.floating||!1,this.waitRotation=!1;let s=.3,n=e.radius||.3,r=e.height||1.8;this.realHeight=r,this.useFloating&&(r-=s),this.option={debug:!1,capsuleHalfHeight:.5*r,capsuleRadius:n,floatHeight:s,characterInitDir:0,camInitDis:-5,camMaxDis:-7,camMinDis:-.7,maxVelLimit:5,turnVelMultiplier:.2,turnSpeed:15,sprintMult:2,jumpVel:4,jumpForceToGroundMult:5,slopJumpMult:.25,sprintJumpMult:1.2,airDragMultiplier:.2,dragDampingC:.15,accDeltaTime:8,rejectVelMult:4,moveImpulsePointY:.5,camFollowMult:11,fallingGravityScale:2.5,fallingMaxVel:-20,wakeUpDelay:200,rayOriginOffest:{x:0,y:.5*-r,z:0},rayHitForgiveness:.1,rayLength:n+2,rayDir:{x:0,y:-1,z:0},floatingDis:n+s+.08,springK:2,dampingC:.2,showSlopeRayOrigin:!1,slopeMaxAngle:1,slopeRayOriginOffest:n-.03,slopeRayLength:n+3,slopeRayDir:{x:0,y:-1,z:0},slopeUpExtraForce:.1,slopeDownExtraForce:.2,autoBalance:!0,autoBalanceSpringK:1.2,autoBalanceDampingC:.04,autoBalanceSpringOnY:.7,autoBalanceDampingOnY:.05,animated:!1,mode:null},this.v={movingObjectVelocityInCharacterDir:new i.Vector3,movingObjectVelocity:new i.Vector3,standingForcePoint:new i.Vector3,pivotPosition:new i.Vector3,modelQuat:new i.Quaternion,moveImpulse:new i.Vector3,impulseCenter:new i.Vector3,movingDirection:new i.Vector3,moveAccNeeded:new i.Vector3,jumpVelocityVec:new i.Vector3,jumpDirection:new i.Vector3,currentVel:new i.Vector3,currentPos:new i.Vector3,dragForce:new i.Vector3,dragAngForce:new i.Vector3,wantToMoveVel:new i.Vector3,rejectVel:new i.Vector3,floatingForce:null,springDirVec:new i.Vector3,rayOrigin:new i.Vector3,characterMassForce:new i.Vector3,slopeAngle:null,actualSlopeNormal:new i.Vector3,actualSlopeAngle:null,actualSlopeNormalVec:new i.Vector3,floorNormal:new i.Vector3(0,1,0),slopeRayOriginRef:new i.Vector3,slopeRayorigin:new i.Vector3,canJump:!1,isFalling:!1,isOnMovingObject:!1},this.fixWeight=void 0===e.fixWeight||e.fixWeight,this.type="character",this.name=e.name||"hero",e.name=this.name,this.isRay=!1,this.ray=null,this.model=null,this.static=!1,this.moving=!1,this.running=!1,this.wantJump=!1,this.radius=n,this.height=r,this.mass=e.mass||.84,delete e.radius,this.fall=!1,this.floor=!0,this.distance=0,this.rayAngle=0,this.rayStart=-.5*this.height+this.radius,this.rayEnd=this.rayStart-1.2,this.maxRayDistance=this.height,this.contact=!1,this.tmpV1=new i.Vector3,this.tmpV2=new i.Vector3,this.ease=new i.Vector3,this.tmpAcc=0,this.rs=0,this.ts=0,this.diagonal=1/Math.sqrt(2),this.jump=!1,this.crouch=!1,this.toggle=!0,this.oy=0,this.vy=0,this.timeScale=1.25,this.angle=(e.angle||0)*dx,this.speed={idle:1,fight:1,walk:7.8,crouch:7,run:12},this.valheimStyle=!0,this.globalRay=e.ray||!1,this.callback=e.callback||function(){},e.callback&&delete e.callback,this.initPhysic(e)}setHeight(e){this.model&&this.model.setRealSize(e)}reSizePhysics(e){if(e===this.realHeight)return;this.realHeight=e,this.height=this.realHeight-(this.useFloating?this.option.floatHeight:0);let t=this.position.toArray();t[1]+=.5*this.height+(this.useFloating?this.option.floatHeight:0);let i=[this.radius,this.height-2*this.radius];this.phyData.pos=t,this.phyData.size=i,this.motor.post({m:"add",o:this.phyData})}initPhysic(e){e.size||(e.size=[this.radius,this.height-2*this.radius]),e.pos||(e.pos=[0,0,0]),e.pos[1]+=.5*this.height,this.useFloating&&(e.pos[1]+=this.option.floatHeight),this.globalRay&&this.motor.getGeometryRef({...e,type:"capsule",ray:!0},this,this.motor.mat.get("hide")),this.phyData={name:this.name,size:e.size,pos:e.pos,type:"character",shapeType:e.shapeType||"capsule",density:1,mass:this.mass,friction:void 0!==e.friction?e.friction:.5,angularFactor:[0,0,0],group:16,regular:!0,massInfo:e.massInfo},e.mask&&(this.phyData.mask=e.mask),this.motor.getCharacterRef().addToWorld(this,e.id),this.motor.post({m:"add",o:this.phyData}),this.useFloating&&(this.ray=this.motor.add({type:"ray",name:this.name+"_ray",begin:[0,this.rayStart,0],end:[0,this.rayEnd,0],callback:this.selfRay.bind(this),visible:!1,parent:this.name})),e.gender?this.addModel(e):this.showHelper(!0),this.enable=!0}extraRemove(){this.ray&&this.motor.remove(this.name+"_ray")}selfRay(e){e.hit?(this.distance=e.distance,this.rayAngle=e.angle):(this.distance=this.option.rayLength,this.rayAngle=0)}hit(e){this.contact=e}showHelper(e){e?this.helper||(this.helper=new CO(this.radius,this.height,!0,this.motor.mat.get("line"),[1,.6,0],[.6,.2,0]),this.helper.setDirection(this.angle),this.add(this.helper)):this.helper&&(this.remove(this.helper),this.helper.dispose(),this.helper=null),this.ray&&(this.ray.visible=e)}addSkeleton(){this.skeletonBody||this.model&&(this.skeletonBody=new qO(this.motor,this.name,this.model.root,this.model.skeleton.bones),this.motor.scene.add(this.skeletonBody),this.skeletonBody.isVisible(!1))}debugMode(e=!1){this.skeletonBody&&this.skeletonBody.isVisible(e),this.model&&this.skeletonBody&&this.model.setMaterial({transparent:e,opacity:e?.8:1},!e),this.showHelper(e)}setMode(e){this.skeletonBody&&this.skeletonBody.setMode(e)}addModel(e){this.model=new dC({type:e.gender,anim:void 0!==e.anim?e.anim:"idle",compact:!0,material:!e.noMat,morph:e.morph||!1,randomMorph:e.randomMorph||!1,randomSize:e.randomSize||!1,callback:this.callback,fixWeight:this.fixWeight,noLOD:e.noLOD||!1}),this.add(this.model);let t=-.5*this.height;this.useFloating&&(t-=this.option.floatHeight),this.model.setPosition(0,this.model.decalY+t,0),this.model.rotation.y=this.angle,this.model.updateMatrix()}raycast(){}step(e,t){this.position.fromArray(e,t+1),this.quaternion.fromArray(e,t+4),this.velocity.fromArray(e,t+8),this.angular.fromArray(e,t+11),this.fall=this.position.y<this.oy,this.floor=gx.nearEquals(this.position.y,this.oy,.1),this.oy=this.position.y,this.model&&(this.model.update(this.motor.delta),this.getDistanceToCamera()),this.useFloating&&!this.isPlayer&&(this.stopMoving(),this.getFloating(),this.motor.change({name:this.name,impulse:this.v.moveImpulse.toArray(),impulseCenter:this.v.impulseCenter.toArray()})),this.updateMatrix()}getDistanceToCamera(){if(!this.model)return;if(!this.model.haveLOD)return;const e=this.motor.getCamera();this.tmpV1.copy(this.motor.getCurrentCharacterPosition()),this.tmpV2.copy(this.position);let t=this.tmpV1.distanceTo(this.tmpV2)/e.zoom>3?0:1;this.model.setLevel(t)}set(e){e.morph&&this.model&&this.model.setMorph(e.morph,e.value)}dispose(){this.callback=null,this.skeletonBody&&this.skeletonBody.dispose(),this.model&&this.model.dispose(),this.helper&&this.showHelper(),super.dispose()}onFrame(e,t){this.v,this.option}autoBalance(){const e=this.v,t=this.option,i=this.rotation;e.dragAngForce.set(-t.autoBalanceSpringK*i.x-this.angular.x*t.autoBalanceDampingC,-t.autoBalanceSpringK*i.y-this.angular.y*t.autoBalanceDampingOnY,-t.autoBalanceSpringK*i.z-this.angular.z*t.autoBalanceDampingC)}moveCharacter(e,t=0){const i=this.v,s=this.option,n=this.motor.getKey();this.motor.getAzimut(),i.currentPos.copy(this.position),i.slopeAngle=0,i.actualSlopeAngle<s.slopeMaxAngle&&Math.abs(i.slopeAngle)>.2&&Math.abs(i.slopeAngle)<s.slopeMaxAngle?i.movingDirection.set(0,Math.sin(i.slopeAngle),Math.cos(i.slopeAngle)):i.actualSlopeAngle>=s.slopeMaxAngle?i.movingDirection.set(0,Math.sin(i.slopeAngle)>0?0:Math.sin(i.slopeAngle),Math.sin(i.slopeAngle)>0?.1:1):i.movingDirection.set(0,0,1),i.movingDirection.applyAxisAngle({x:0,y:1,z:0},t),i.movingObjectVelocityInCharacterDir.copy(i.movingObjectVelocity).projectOnVector(i.movingDirection).multiply(i.movingDirection);const r=i.movingObjectVelocity.angleTo(i.movingDirection),o=i.currentVel.dot(i.movingDirection);i.wantToMoveVel.set(i.movingDirection.x*o,0,i.movingDirection.z*o),i.rejectVel.copy(i.currentVel).sub(i.wantToMoveVel),i.moveAccNeeded.set((i.movingDirection.x*(s.maxVelLimit*(this.running?s.sprintMult:1)+i.movingObjectVelocityInCharacterDir.x)-(i.currentVel.x-i.movingObjectVelocity.x*Math.sin(r)+i.rejectVel.x*(i.isOnMovingObject?0:s.rejectVelMult)))/s.accDeltaTime,0,(i.movingDirection.z*(s.maxVelLimit*(this.running?s.sprintMult:1)+i.movingObjectVelocityInCharacterDir.z)-(i.currentVel.z-i.movingObjectVelocity.z*Math.sin(r)+i.rejectVel.z*(i.isOnMovingObject?0:s.rejectVelMult)))/s.accDeltaTime);const a=i.moveAccNeeded.multiplyScalar(this.mass);let l=!0;this.waitRotation&&(l=Math.sin(t).toFixed(3)==Math.sin(this.rotation.y).toFixed(3)),l?i.moveImpulse.set(a.x*(i.canJump?1:s.airDragMultiplier),null===i.slopeAngle||0==i.slopeAngle?0:i.movingDirection.y*(i.movingDirection.y>0?s.slopeUpExtraForce:s.slopeDownExtraForce)*(this.running?s.sprintMult:1),a.z*(i.canJump?1:s.airDragMultiplier)):i.moveImpulse.set(a.x*s.turnVelMultiplier*(i.canJump?1:s.airDragMultiplier),null===i.slopeAngle||0==i.slopeAngle?0:i.movingDirection.y*s.turnVelMultiplier*(i.movingDirection.y>0?s.slopeUpExtraForce:s.slopeDownExtraForce)*(this.running?s.sprintMult:1),a.z*s.turnVelMultiplier*(i.canJump?1:s.airDragMultiplier)),i.impulseCenter.set(i.currentPos.x,i.currentPos.y+s.moveImpulsePointY,i.currentPos.z),i.currentVel.copy(this.velocity),n[4]&&i.canJump&&(i.jumpVelocityVec.set(i.currentVel.x,this.running?s.sprintJumpMult*s.jumpVel:s.jumpVel,i.currentVel.z),i.moveImpulse.y=i.jumpVelocityVec.y)}getFloating(){const e=this.v,t=this.option,i=t.springK*(t.floatingDis-this.distance)-this.velocity.y*t.dampingC;e.moveImpulse.y=i*this.mass}stopMoving(){this.v,this.option,this.v.moveImpulse.set(0,0,0),this.tmpV1.copy(this.velocity),this.tmpV1.x*=.9,this.tmpV1.z*=.9,this.tmpV1.x+this.tmpV1.z!==0&&this.motor.change({name:this.name,linearVelocity:this.tmpV1.toArray(),wake:!1})}move(){this.v;const e=this.motor.getKey(),t=this.motor.getAzimut(),i=this.motor.delta;let s=0!==e[7]?"run":"walk";0===e[0]&&0===e[1]&&(s="idle");let n=0!==e[0]&&0!==e[1]?this.diagonal:1;e[5]&&this.toggle&&(this.crouch=!this.crouch,this.toggle=!1),0===e[5]&&(this.toggle=!0),"walk"!==s&&"run"!==s||!this.crouch||(s="crouch"),1===e[6]&&(s="fight"),!this.jump&&e[4]&&(this.vy=22,this.jump=!0),this.jump&&(this.vy-=1,this.vy<=0&&(this.vy=0,this.floor&&(this.jump=!1)));let r="idle";switch(s){case"idle":r=this.crouch?"Crouch Idle":"idle";break;case"walk":r="Jog Forward";break;case"run":r="Standard Run";break;case"crouch":r="Crouch Walk";break;case"fight":r="Attack"}this.moving=0!==e[0]||0!==e[1],this.running=0!==e[7],this.wantJump=0!==e[4];let o=gx.unwrapRad(Math.atan2(e[0],e[1])+t);if(this.useImpulse)this.moving?this.moveCharacter(i,o):this.stopMoving(),this.useFloating&&this.getFloating(),this.motor.change({name:this.name,impulse:this.v.moveImpulse.toArray(),impulseCenter:this.v.impulseCenter.toArray()});else{this.tmpAcc+=4*i;const r=1;let o=this.speed[s]*r;this.moving&&(this.rs=e[0]*o,this.ts=e[1]*o),0===e[0]&&0===e[1]&&(this.tmpAcc=0),this.tmpAcc>1&&(this.tmpAcc=1),this.ease.set(this.rs,0,this.ts).multiplyScalar(this.tmpAcc*n),this.ease.length(),this.static&&(this.ease.x=this.ease.z=0);let a=this.vy-9.81;this.ease.y=a,this.tmpV1.copy(this.ease).applyAxisAngle({x:0,y:1,z:0},t),this.tmpV2.set(0,0,0),this.motor.change({name:this.name,linearVelocity:this.tmpV1.toArray()})}if(this.helper&&(this.helper.updateMatrix(),this.helper.cone.rotation.y=t,"idle"!==s&&this.helper.setDirection(o)),this.model&&(this.jump?this.model.play("Jump",.5):this.model.play(r,.75),"idle"!==s)){let e=gx.unwrapRad(this.model.rotation.y),i=gx.nearAngle(o,e),n=Math.abs(Math.floor((e-i)*math.todeg)/180);this.model.rotation.y="fight"===s?t+Math.PI:gx.lerp(e,i,.2-.1*n),this.model.updateMatrix()}}}class pC extends Gx{constructor(e){super(),this.motor=e,this.Utils=this.motor.utils,this.type="character",this.num=Sx[this.type]}step(e,t){let i,s,n=this.list.length;for(;n--;)s=this.list[n],i=t+n*this.num,s&&s.step(e,i)}add(e={}){this.setName(e);return new uC(e,this.motor)}set(e={},t=null){null===t&&(t=this.byName(e.name)),null!==t&&t.set(e)}}class fC extends i.Mesh{constructor(e={}){super(),this.ready=!1,this.needUpdate=!1,this.type="terrain",this.name=e.name,this.folder=e.folder||"./assets/textures/terrain/",this.mapN=0,this.mapMax=7,this.ttype=e.terrainType||"terrain",this.callback=e.callback||function(){},this.physicsUpdate=()=>{},this.uvx=[e.uv||18,e.uv||18],this.sample=null==e.sample?[128,128]:e.sample,this.size=void 0===e.size?[100,30,100]:e.size;let t=this.sample[0]-1,s=this.sample[1]-1;this.rx=t/this.size[0],this.rz=s/this.size[2],this.zone=e.zone||1;let n=[this.size[0]/t,this.size[2]/s];this.sampleZ=[e.sample[0]*this.zone,e.sample[1]*this.zone],this.sizeZ=[(this.sampleZ[0]-1)*n[0],e.size[1],(this.sampleZ[1]-1)*n[1]],this.lng=this.sample[0]*this.sample[1],this.lngZ=this.sampleZ[0]*this.sampleZ[1],this.getZid(),this.data={level:e.level||[1,.2,.05],frequency:e.frequency||[.016,.05,.2],expo:e.expo||1},this.isWater=e.water||!1,this.isIsland=e.island||!1,this.isBorder=!1,this.wantBorder=e.border||!1,this.isBottom=!1,this.wantBottom=e.bottom||!1,this.wantBorder=e.border||!1,this.colorBase=this.isWater?{r:0,g:.7,b:1}:{r:.25,g:.25,b:.25},this.maxspeed=e.maxSpeed||.1,this.acc=null==e.acc?.01:e.acc,this.dec=null==e.dec?.01:e.dec,this.deep=null==e.deep?0:e.deep,this.ease=new i.Vector2,this.complexity=null==e.complexity?30:e.complexity,this.complexity2=null==e.complexity2?null:e.complexity2,this.local=new i.Vector3,e.local&&this.local.fromArray(e.local),this.pp=new i.Vector3,this.ratioZ=1/this.sampleZ[0],this.ratio=1/this.sample[0],this.ruvx=1/(this.size[0]/this.uvx[0]),this.ruvy=-1/(this.size[2]/this.uvx[1]),this.is64=e.is64||!1,this.isTurn=e.turn||!1,this.heightData=new Float32Array(this.lngZ),this.height=[],this.isAbsolute=e.isAbsolute||!1,this.isTurned=e.isTurned||!1,this.isReverse=e.isReverse||!1,this.changeId=this.isReverse||this.isTurned,this.changeId&&this.getReverseID(),this.colors=new Float32Array(3*this.lng),this.geometry=new i.PlaneGeometry(this.size[0],this.size[2],this.sample[0]-1,this.sample[1]-1),this.geometry.rotateX(-ge.PI90),this.geometry.setAttribute("color",new i.BufferAttribute(this.colors,3)),this.vertices=this.geometry.attributes.position.array;var r=new i.Quaternion(.5,.5,.1,.2);e.maplevels&&r.fromArray(e.maplevels);var o,a=mC,l=e.maps||["sand","grass3","rock"],h={};this.isWater&&(l=["water"]);for(let t in l)o=l[t],h[o+"_c"]=Os.texture({url:this.folder+o+"_c.jpg",flip:!1,repeat:this.uvx,encoding:e.encoding||!0,callback:this.mapcallback.bind(this)}),h[o+"_n"]=Os.texture({url:this.folder+o+"_n.jpg",flip:!1,repeat:this.uvx,callback:this.mapcallback.bind(this)});h.noise=Os.texture({url:this.folder+"noise.png",flip:!1,repeat:[1,1],encoding:!1,callback:this.mapcallback.bind(this)}),this.txt=h,this.material=new i.MeshPhysicalMaterial({name:"terrain",vertexColors:!0,color:16777215,map:h[l[0]+"_c"],normalMap:h[l[0]+"_n"]}),void 0!==e.envmap&&(this.material.envMap=e.envmap),this.isWater?(this.material.transparent=!0,this.material.opacity=e.opacity||.4,this.material.side=i.DoubleSide,this.material.alphaMap=h[l[0]+"_c"],this.material.map=null,this.material.metalness=.9,this.material.roughness=.1):(this.material.reflectivity=0,this.material.metalness=e.metalness||0,this.material.roughness=e.roughness||.3);var c=e.nScale||.5;if(this.material.normalScale.set(c,-c),this.isWater)this.material.onBeforeCompile=function(e){var t=e.fragmentShader;t=t.replace("#include <alphamap_fragment>",a.alphamap),e.fragmentShader=t};else{let e=this;this.material.onBeforeCompile=function(t){let i=t.uniforms;i.clevels={value:r},i.map1={value:h[l[1]+"_c"]},i.map2={value:h[l[2]+"_c"]},i.randomUv={value:1},i.normalMap1={value:h[l[1]+"_n"]},i.normalMap2={value:h[l[2]+"_n"]},i.noiseMap={value:h.noise},i.useNoiseMap={value:1},t.uniforms=i;let s=t.fragmentShader;s=s.replace("#include <clipping_planes_pars_fragment>","#include <clipping_planes_pars_fragment>"+gC+a.fragmentAdd),s=s.replace("#include <map_fragment>",a.map),s=s.replace("#include <normal_fragment_maps>",a.normal),s=s.replace("#include <color_fragment>",""),t.fragmentShader=s,e.material.userData.shader=t},Object.defineProperty(this.material,"randomUv",{get(){return!!this.userData.shader.uniforms.randomUv.value},set(e){this.userData.shader.uniforms.randomUv.value=e?1:0}}),Object.defineProperty(this.material,"map1",{get(){return this.userData.shader.uniforms.map1.value},set(e){this.userData.shader.uniforms.map1.value=e}}),Object.defineProperty(this.material,"map2",{get(){return this.userData.shader.uniforms.map2.value},set(e){this.userData.shader.uniforms.map2.value=e}}),Object.defineProperty(this.material,"normalMap1",{get(){return this.userData.shader.uniforms.normalMap1.value},set(e){this.userData.shader.uniforms.normalMap1.value=e}}),Object.defineProperty(this.material,"normalMap2",{get(){return this.userData.shader.uniforms.normalMap2.value},set(e){this.userData.shader.uniforms.normalMap2.value=e}})}e.debug&&this.debugZone(e),this.wantBorder&&this.addBorder(e),this.wantBottom&&this.addBottom(e),e.pos&&this.position.fromArray(e.pos),e.quat=void 0===e.quat?[0,0,0,1]:e.quat,void 0!==e.rot&&(e.quat=ge.toQuatArray(e.rot),delete e.rot),this.quaternion.fromArray(e.quat),e.decal&&(this.position.y+=e.decal),this.castShadow=!0,this.receiveShadow=!0,Os.set("terrain"+this.name,this.material,"material",!0),this.update()}getZid(){this.zid={};let e=.5*(this.sample[0]-this.sampleZ[0]),t=.5*(this.sample[1]-this.sampleZ[1]),i=this.sample[0]*t+e,s=0;for(let t=0;t<this.lngZ;t++)s=Math.floor(t/this.sampleZ[0]),this.zid[i+t+s*(2*e)]=t}debugZone(e){this.geometryZ=new i.PlaneGeometry(this.sizeZ[0],this.sizeZ[2],this.sampleZ[0]-1,this.sampleZ[1]-1),this.geometryZ.rotateX(-ge.PI90),this.verticesZ=this.geometryZ.attributes.position.array;const t=new i.Mesh(this.geometryZ,new i.MeshBasicMaterial({color:0,wireframe:!0,transparent:!0,opacity:.1}));this.add(t)}mapcallback(){this.mapN++,this.mapN==this.mapMax&&this.callback()}addBottom(e){var t=new i.PlaneGeometry(this.size[0],this.size[2],1,1);t.rotateX(ge.PI90),this.bottomMesh=new i.Mesh(t,this.borderMaterial),this.add(this.bottomMesh),this.isBottom=!0}addBorder(e){this.borderMaterial=new i.MeshStandardMaterial({vertexColors:!0,metalness:this.isWater?.8:.4,roughness:this.isWater?.2:.6,normalScale:this.isWater?[.25,.25]:[2,2],transparent:!!this.isWater,opacity:this.isWater?e.opacity||.8:1,envMap:e.envmap||null});var t=new i.PlaneGeometry(this.size[0],2,this.sample[0]-1,1),s=new i.PlaneGeometry(this.size[0],2,this.sample[0]-1,1),n=new i.PlaneGeometry(this.size[2],2,this.sample[1]-1,1),r=new i.PlaneGeometry(this.size[2],2,this.sample[1]-1,1);t.translate(0,1,.5*this.size[2]),s.rotateY(-ge.Pi),s.translate(0,1,.5*-this.size[2]),n.rotateY(-ge.PI90),n.translate(.5*-this.size[0],1,0),r.rotateY(ge.PI90),r.translate(.5*this.size[0],1,0),this.borderGeometry=xe(ye([t,s,n,r])),this.borderVertices=this.borderGeometry.attributes.position.array,this.lng2=this.borderVertices.length/3,this.list=new Array(this.lng2),this.borderColors=new Float32Array(3*this.lng),this.borderGeometry.setAttribute("color",new i.BufferAttribute(this.borderColors,3)),this.borderMesh=new i.Mesh(this.borderGeometry,this.borderMaterial);for(var o,a,l=this.lng2;l--;)o=3*l,a=this.borderVertices[o+1]>0?this.findPoint(this.borderVertices[o],this.borderVertices[o+2]):-1,this.list[l]=a;this.add(this.borderMesh),this.borderMesh.castShadow=!0,this.borderMesh.receiveShadow=!0,this.isBorder=!0}dispose(){this.isBottom&&(this.remove(this.bottomMesh),this.bottomMesh.geometry.dispose()),this.isBorder&&(this.remove(this.borderMesh),this.borderMesh.geometry.dispose(),this.borderMesh.material.dispose()),this.geometry.dispose(),this.material.dispose();for(let e in this.txt)this.txt[e].dispose()}easing(e,t,i){if(0!==e[0]||0!==e[1]){var s=t||0;e[7]?this.maxspeed=1.5:this.maxspeed=.25,this.ease.y+=e[1]*this.acc,this.ease.x+=e[0]*this.acc,this.ease.x=this.ease.x>this.maxspeed?this.maxspeed:this.ease.x,this.ease.x=this.ease.x<-this.maxspeed?-this.maxspeed:this.ease.x,this.ease.y=this.ease.y>this.maxspeed?this.maxspeed:this.ease.y,this.ease.y=this.ease.y<-this.maxspeed?-this.maxspeed:this.ease.y,e[1]||(this.ease.y>this.dec?this.ease.y-=this.dec:this.ease.y<-this.dec?this.ease.y+=this.dec:this.ease.y=0),e[0]||(this.ease.x>this.dec?this.ease.x-=this.dec:this.ease.x<-this.dec?this.ease.x+=this.dec:this.ease.x=0),(this.ease.x||this.ease.y)&&(this.local.z+=Math.sin(s)*this.ease.x+Math.cos(s)*this.ease.y,this.local.x+=Math.cos(s)*this.ease.x-Math.sin(s)*this.ease.y,this.update(i))}}getTri(){return this.geometry}getHeight(e,t){return e*=this.rx,t*=this.rz,e+=.5*this.sample[0],t+=.5*this.sample[1],e=Math.floor(e),t=Math.floor(t),(this.isTurn?this.height[this.findId2(e,t)]:this.height[this.findId(e,t)])*this.size[1]+this.position.y}findIdZ(e,t){return e+t*this.sampleZ[1]}findId(e,t){return e+t*this.sample[1]}findId2(e,t){return t+-e*this.sample[0]||1}findPoint(e,t){for(var i,s=this.lng;s--;)if(i=3*s,this.vertices[i]===e&&this.vertices[i+2]===t)return s;return-1}getReverseID(){this.invId=[];let e,t,i=this.lngZ;const s=this.sampleZ[1]-1;for(this.sampleZ[0];i--;)e=i%this.sampleZ[0],t=Math.floor(i*this.ratioZ),this.isReverse&&(t=s-t),this.invId[i]=this.isTurned?this.lngZ-1-this.findIdZ(t,e):this.findIdZ(e,t)}set(e){e.ease&&this.easing(e.key,e.azimut),e.decal&&this.decal(e.decal,!0)}decal(e,t){this.local.x+=e[0],this.local.y+=e[1],this.local.z+=e[2],this.update(t)}updateUv(){if(this.isWater)this.material.normalMap.offset.x+=.002,this.material.normalMap.offset.y+=.001;else{let e={x:this.local.x*this.ruvx,y:this.local.z*this.ruvy};this.material.map&&this.material.map.offset.copy(e),this.material.normalMap&&this.material.normalMap.offset.copy(e)}}distance(e,t){const i=e.x-t.x,s=e.y-t.y;return Math.sqrt(i*i+s*s)}clamp(e,t=0,i=1){return e=(e=e<t?t:e)>i?i:e}update(e){let t,i,s,n,r,o,a,l,h,c,d,u=this.pp,p=[1,1,1],f=this.lng;for(;f--;){if(t=3*f,i=f%this.sample[0],s=Math.floor(f*this.ratio),u.set(i+this.local.x*this.rx,this.local.y,s+this.local.z*this.rz),n=ge.noise(u,this.data),this.isIsland){let e=1-this.distance({x:i,y:s},{x:.5*(this.sample[0]-1),y:.5*(this.sample[1]-1)})/(.5*(this.sample[0]-1));e*=4,e=this.clamp(e),n*=e}n=Math.pow(n,this.data.expo),n=this.clamp(n),"road"===this.ttype&&(l===s?n=1===i||2===i||29===i||30===i?h+.1:h:(l=s,h=n)),this.height[f]=n,c=n*this.size[1]+this.deep,this.vertices[t+1]=c,o=this.isAbsolute?n:n*this.size[1],void 0!==this.zid[f]&&(a=this.zid[f],r=this.changeId?this.invId[a]:a,this.heightData[r]=o,this.verticesZ&&(this.verticesZ[3*a+1]=c)),p=this.isWater?[n*this.colorBase.r,n*this.colorBase.g,n*this.colorBase.b]:[n,0,0],d=p[0],this.colors[t]=d,this.colors[t+1]=d,this.colors[t+2]=d}if(this.isBorder){let e,i=this.lng2;for(;i--;)t=3*i,-1!==this.list[i]?(e=this.height[this.list[i]],this.borderVertices[t+1]=e*this.size[1]+this.deep,d=ge.clamp(e+.25,.25,1),this.borderColors[t]=d,this.borderColors[t+1]=d,this.borderColors[t+2]=d):(this.borderColors[t]=this.colorBase.r,this.borderColors[t+1]=this.colorBase.g,this.borderColors[t+2]=this.colorBase.b)}e?this.needUpdate=!0:this.updateGeometry(),this.ready&&this.physicsUpdate(this.name,this.heightData),this.ready=!0}step(e){this.needUpdate&&(this.updateGeometry(),this.needUpdate=!1)}updateGeometry(){this.geometry.attributes.position.needsUpdate=!0,this.geometry.attributes.color.needsUpdate=!0,this.geometry.computeVertexNormals(),this.updateUv(),this.geometryZ&&(this.geometryZ.attributes.position.needsUpdate=!0),this.isBorder&&(this.borderGeometry.attributes.position.needsUpdate=!0,this.borderGeometry.attributes.color.needsUpdate=!0)}}const mC={fragmentAdd:"\n        uniform vec4 clevels;\n        uniform float randomUv;\n\n        uniform sampler2D noise;\n\n        uniform sampler2D normalMap1;\n        uniform sampler2D normalMap2;\n\n        uniform sampler2D roughnessMap1;\n        uniform sampler2D roughnessMap2;\n\n        uniform float aoMapIntensity;\n        uniform sampler2D map1;\n        uniform sampler2D map2;\n\n        vec4 textureMAP( sampler2D mapper, in vec2 uv ){\n            if( randomUv == 1.0 ) return textureNoTile( mapper, uv );\n            else return texture2D( mapper, uv );\n        }\n\n        vec4 MappingMix( float slope, vec4 level, vec4 rocks, vec4 grasss, vec4 sands ){\n            vec4 cc = rocks;\n            if (slope < level.x) cc = grasss;\n            if (slope < level.z) cc = sands;\n            if (slope == 0.0 ) cc = sands;\n            //if (( slope < level.x ) && (slope >= level.y)) cc = mix( grasss , rocks, (slope - level.y) * (1. / (level.x - level.y)));\n            //if (( slope < level.y ) && (slope >= level.z)) cc = mix( sands , grasss, (slope - level.z) * (1. / (level.y - level.z)));\n\n            float d = level.y;\n            float rx = 1.0/level.y;\n\n            if (( slope < level.x + d ) && (slope > level.x)) cc = mix( grasss , rocks, ( slope - (level.x) ) * rx );\n\n            d = level.w;\n            rx = 1.0/level.w;\n            if (( slope < level.z + d ) && (slope > level.z )) cc = mix( sands , grasss, ( slope - (level.z) ) * rx );\n\n            //cc = mix( grasss, cc, smoothstep(0.0,1.0, slope)*20.0 );\n            return cc;\n        }\n    ",map:"\n        #ifdef USE_MAP\n\n            vec4 sand = textureMAP( map, vMapUv );\n            vec4 grass = textureMAP( map1, vMapUv );\n            vec4 rock = textureMAP( map2, vMapUv ); \n\n            vec4 sampledDiffuseColor = MappingMix(vColor.r, clevels, rock, grass, sand);\n\n            diffuseColor *= sampledDiffuseColor;\n\n        #endif\n    ",normal:"\n\n        #ifdef USE_NORMALMAP_OBJECTSPACE\n\n            normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0; // overrides both flatShading and attribute normals\n\n            #ifdef FLIP_SIDED\n\n                normal = - normal;\n\n            #endif\n\n            #ifdef DOUBLE_SIDED\n\n                normal = normal * faceDirection;\n\n            #endif\n\n            normal = normalize( normalMatrix * normal );\n\n        #elif defined( USE_NORMALMAP_TANGENTSPACE )\n\n            vec4 sandN = textureMAP( normalMap, vNormalMapUv );\n            vec4 grassN = textureMAP( normalMap1, vNormalMapUv );\n            vec4 rockN = textureMAP( normalMap2, vNormalMapUv );\n            vec3 mapN = MappingMix(vColor.r, clevels, rockN, grassN, sandN).xyz * 2.0 - 1.0;\n\n            ///vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\n            mapN.xy *= normalScale;\n            normal = normalize( tbn * mapN );\n\n        #elif defined( USE_BUMPMAP )\n\n            normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n\n        #endif\n    ",alphamap:"\n        #ifdef USE_ALPHAMAP\n            diffuseColor.a = opacity +( texture2D( alphaMap, vAlphaMapUv ).g * opacity) * (1.0-opacity);\n        #endif\n    "},gC="\n\nuniform sampler2D noiseMap;\nuniform float useNoiseMap;\n\nfloat directNoise(vec2 p){\n    vec2 ip = floor(p);\n    vec2 u = fract(p);\n    u = u*u*(3.0-2.0*u);\n    \n    float res = mix(\n        mix(rand(ip),rand(ip+vec2(1.0,0.0)),u.x),\n        mix(rand(ip+vec2(0.0,1.0)),rand(ip+vec2(1.0,1.0)),u.x),u.y);\n    return res*res;\n}\n\nfloat sum( vec4 v ) { return v.x+v.y+v.z; }\n\nvec4 textureNoTile( sampler2D mapper, in vec2 uv ){\n\n    // sample variation pattern\n    float k = 0.0;\n    if( useNoiseMap == 1.0 ) k = texture2D( noiseMap, 0.005*uv ).x;\n    else k = directNoise( uv );\n    \n    // compute index    \n    float index = k*8.0;\n    float f = fract( index );\n\n    float ia = floor( index );\n    float ib = ia + 1.0;\n    // or\n    //float ia = floor(index+0.5); // suslik's method (see comments)\n    //float ib = floor(index);\n    //f = min(f, 1.0-f)*2.0;\n\n    // offsets for the different virtual patterns    \n    vec2 offa = sin(vec2(3.0,7.0)*ia); // can replace with any other hash    \n    vec2 offb = sin(vec2(3.0,7.0)*ib); // can replace with any other hash    \n\n    // compute derivatives for mip-mapping    \n    vec2 dx = dFdx(uv);\n    vec2 dy = dFdy(uv);\n    \n    // sample the two closest virtual patterns    \n    vec4 cola = textureGrad( mapper, uv + offa, dx, dy );\n    vec4 colb = textureGrad( mapper, uv + offb, dx, dy );\n\n    // interpolate between the two virtual patterns    \n    return mix( cola, colb, smoothstep(0.2,0.8,f-0.1*sum(cola-colb)) );\n\n}\n";let AC=null;class bC extends Gx{constructor(e){super(),this.motor=e,this.engine=this.motor.engine,this.Utils=this.motor.utils,AC=this.motor.mat,this.type="terrain",this.num=Sx[this.type]}step(e,t){let i,s=this.list.length;for(;s--;)i=this.list[s],i.step()}add(e={}){this.setName(e),"JOLT"===this.engine&&(e.isAbsolute=!0,e.isTurned=!1),"PHYSX"===this.engine&&(e.isAbsolute=!0,e.isTurned=!0),"HAVOK"===this.engine&&(e.isAbsolute=!0,e.isTurned=!0,e.isReverse=!1),"OIMO"!==this.engine&&(e.zone=e.zone||.25);const t=new fC(e);return AC.extendShader(t.material,t.material.onBeforeCompile),t.physicsUpdate=(e,t)=>{this.motor.flow.tmp.push({name:e,heightData:t})},this.addToWorld(t,e.id),this.motor.post({m:"add",o:vC(t,this.engine)}),t}set(e={},t=null){null===t&&(t=this.byName(e.name)),null!==t&&t.set(e)}}const vC=function(e,t){const i={name:e.name,type:e.type,pos:e.position.toArray(),quat:"PHYSX"===t?[0,0,0,1]:e.quaternion.toArray()};return"PHYSX"===t||"AMMO"===t||"HAVOK"===t||"JOLT"===t?(i.type="terrain",i.size=e.sizeZ,i.sample=e.sampleZ,i.zone=e.zone,i.heightData=e.heightData):(i.type="mesh",i.v=gx.getVertex(e.geometry,"OIMO"===t),i.index="OIMO"===t?null:gx.getIndex(e.geometry)),i};class yC extends Gx{constructor(e){super(),this.motor=e,this.Utils=this.motor.utils,this.type="solver"}step(e,t){let i,s=this.list.length;for(;s--;)i=t+s*Sx[this.type],this.list[s].update(e,i)}add(e={}){this.setName(e);let t=new wC(e,this.motor);return this.addToWorld(t,e.id),this.motor.post({m:"add",o:e}),t}set(e={}){}}class wC{constructor(e,t){this.motor=t,this.name=e.name,this.type="solver",this.needData=e.needData||!1,this.bones=[],this.joints=[],this.jid=0,this.speed=1}addBone(e){this.bones.push(e)}dispose(){this.motor.remove(this.bones,!0)}update(e,t){if(!this.needData)return;let i,s,n=this.joints.length;for(;n--;)s=t+7*n,i=this.joints[n],i.data.target.x=e[s+0],i.data.target.y=e[s+1],i.data.target.z=e[s+2],i.data.target.rx=e[s+3],i.data.target.ry=e[s+4],i.data.target.rz=e[s+5],i.data.target.count=e[s+6]}start(){this.motor.post({m:"startArticulation",o:{name:this.name}})}stop(){this.motor.post({m:"stopArticulation",o:{name:this.name}})}commonInit(){this.motor.post({m:"commonInitArticulation",o:{name:this.name}})}addJoint(e){this.jid=this.joints.length,e.name=e.name||this.name+"_Joint_"+this.jid,e.solver=this.name,void 0!==e.rot1&&(e.quat1=gx.quatFromEuler(e.rot1),delete e.rot1),void 0!==e.rot2&&(e.quat2=gx.quatFromEuler(e.rot2),delete e.rot2),"fixe"!==e.type&&this.joints.push(new xC(e,this)),this.motor.post({m:"addSolverJoint",o:e})}driveJoints(e){let t,i,s=!1,n=this.joints.length,r=[];for(;n--;)t=this.joints[n],t.update(e),i=t.isDrive,t.nup&&r.push(t.nup),s=!!i||s;s?this.motor.change(r):this.resolve&&(this.resolve(),delete this.resolve)}setAngles(e,t){if(!e)return;let i=this.joints.length;for(;i--;)this.joints[i].pose(void 0!==e[i]?e[i]:0,void 0!==t?t:this.speed);return new Promise((e=>this.resolve=e))}}class xC{constructor(e,t){if(this.name=e.name,this.solver=t,this.type="solverJoint",this.isDrive=!1,this.current=0,this.tmp=0,this.target=0,this.start=0,this.time=0,this.nup=null,this.data={target:{x:0,y:0,z:0,rx:0,ry:0,rz:0,count:0}},e.limits&&(this.driveType=e.limits[0][0],this.min=e.limits[0][1],this.max=e.limits[0][2]),e.position&&(e.target=e.position),e.target){let t,i=e.target.length;for(;i--;)t=e.target[i],this.data.target[t[0]]=t[1]}}start(){}pose(e,t){this.target=gx.clamp(e,this.min,this.max),this.current=gx.clamp(this.data.target[this.driveType],this.min,this.max),this.target!==this.current&&(this.start=this.current,this.tmp=0,this.time=t,this.isDrive=!0)}update(e){if(this.isDrive){this.tmp+=e*this.time;let t=this.tmp;t=t>1?1:t;let i=gx.lerp(this.start,this.target,t);this.nup={name:this.name,drivesTarget:[[this.driveType,i]]},1===t&&(this.isDrive=!1)}else this.nup=null}}class OC extends i.Mesh{constructor(e={}){super(new i.PlaneGeometry,new i.MeshBasicMaterial({polygonOffset:!0,polygonOffsetFactor:-4})),this.name=e.nam||"text",this.canvas=null,this.w=e.w||0,this.h=e.h||0,this.weight=e.weight??700,this.font=e.font??"'Mulish', sans-serif",this.fontSize=e.fontSize??32,this.backgroundColor=e.backgroundColor??"#00000000",this.fontColor=e.fontColor??"#FFFFFF",this.material.alphaTest=.5,this.set(e.text),e.pos&&this.position.fromArray(e.pos),e.rot&&this.quaternion.fromArray(gx.quatFromEuler(e.rot))}set(e){this.canvas||(this.canvas=document.createElement("canvas"));let t,s,n,r=this.canvas.getContext("2d");r.font=this.weight+" "+this.fontSize+"px "+this.font;let o=r.measureText(e);t=2**Math.ceil(Math.log2(o.width)),s=2**Math.ceil(Math.log2(r.measureText("M").width)),this.canvas.width=t,this.canvas.height=s,r.fillStyle=this.backgroundColor,r.fillRect(0,0,t,s),r.fillStyle=this.fontColor,r.font=this.weight+" "+this.fontSize+"px "+this.font,r.textAlign="center",r.textBaseline="middle",r.fillText(e,.5*t,.5*s),this.material.map=new i.CanvasTexture(this.canvas),0!==this.h?(n=this.h/s,this.scale.set(t*n,this.h,0)):0!==this.w?(n=this.w/s,this.scale.set(this.w,s*n,0)):this.scale.set(.025*t,.025*s,0)}dispose(){this.parent.remove(this),this.material.map.dispose(),this.material.dispose(),this.geometry.dispose()}}let CC=0;class SC{constructor(e={},t){this.motor=t,this.down=!1,this.time=e.time||250,this.p=e.pos||[0,0,0],this.type=e.type||"box",this.name=e.name||"button"+CC++,this.pos=e.pos||[0,0,0],this.size=e.size||[1,1,1],this.radius=e.radius||0,this.axe=void 0!==e.axe?e.axe:1,this.fontSize=e.fontSize||.8,this.fontScale=e.fontScale||1,this.extraForce=!0,this.decal="sphere"===this.type?.5*this.size[1]:.5*this.size[1]-this.radius,"sphere"!==this.type&&(this.pos[this.axe]+=this.decal),this.origin=this.pos[this.axe];let i=this.size[this.axe]-2*this.radius;this.range=[this.origin-i,this.origin],this.value=this.origin,this.target=this.origin,this.speed=this.size[this.axe]/3/this.size[this.axe],this.callback=function(){console.log("action down")},e.callback&&(this.callback=e.callback,delete e.callback),e.button=!0,e.pos=this.pos,e.material||(e.material="button"),e.kinematic=!0,e.mask=1,this.timeout=null,this.b=this.motor.add(e),this.b.userData.action=this.action.bind(this),this.b.userData.out=this.out.bind(this),this.b.userData.direct=this.callback.bind(this),e.text&&this.addText(e.text)}addText(e,t){this.fontSize="box"===this.type?.8*this.size[this.axe]:.8*this.size[0],this.fontSize*=this.fontScale;let i={text:e,pos:[0,.5*this.size[1],0],rot:[-90,0,0],h:this.fontSize};2===this.axe&&(i={text:e,pos:[0,0,.5*this.size[2]],rot:[0,0,0],h:this.fontSize}),this.txt=new OC(i),this.b.add(this.txt)}action(e){this.down||(this.down=!0,this.target=this.range[0],this.extraForce&&this.motor.explosion(e||this.p,2*this.size[0],.01),this.callback())}out(){this.down&&(this.down=!1,this.target=this.range[1],this.extraForce&&this.motor.explosion(this.p,2*this.size[0],.01))}update(){if(this.value!==this.target){this.value=gx.lerp(this.value,this.target,this.speed),gx.nearEquals(this.value,this.target,1e-4)?this.value=this.target:(this.pos[this.axe]=this.value,this.motor.change({name:this.b.name,pos:this.pos}))}}dispose(){this.txt&&this.txt.dispose()}}const IC=new i.Box3;class EC extends i.LineSegments{constructor(e,t=16776960){const s=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),n=new Float32Array(24);let r=new i.Color(t),o=[],a=8;for(;a--;)o.push(r.r,r.g,r.b);const l=new Float32Array(o),h=new i.BufferGeometry;h.setIndex(new i.BufferAttribute(s,1)),h.setAttribute("position",new i.BufferAttribute(n,3)),h.setAttribute("color",new i.BufferAttribute(l,3)),super(h,new i.LineBasicMaterial({vertexColors:!0,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&IC.setFromObject(this.object),IC.isEmpty())return;const t=IC.min,i=IC.max,s=this.geometry.attributes.position,n=s.array;n[0]=i.x,n[1]=i.y,n[2]=i.z,n[3]=t.x,n[4]=i.y,n[5]=i.z,n[6]=t.x,n[7]=t.y,n[8]=i.z,n[9]=i.x,n[10]=t.y,n[11]=i.z,n[12]=i.x,n[13]=i.y,n[14]=t.z,n[15]=t.x,n[16]=i.y,n[17]=t.z,n[18]=t.x,n[19]=t.y,n[20]=t.z,n[21]=i.x,n[22]=t.y,n[23]=t.z,s.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class kC{constructor(e={},t){this.motor=t,this.isCompound=!0,this.remplace=e.remplace||!1,this.init(e)}init(e={}){const t=e.intern||!1;let s=e.size||[5,3,8],n=e.pos||[0,2,0],r=e.wall||.1;void 0!==e.size[3]&&(r=e.size[3]),r<=0&&(r=.01);let o=.5*r,a=2*r;e.face||(e.face={});let l={up:1,down:1,left:1,right:1,front:1,back:1,...e.face};delete e.face;const h=[];t?(1===l.up&&h.push({pos:[0,.5*s[1]+o,0],size:[s[0]+a,r,s[2]+a]}),1===l.down&&h.push({pos:[0,-o-.5*s[1],0],size:[s[0]+a,r,s[2]+a]}),1===l.left&&h.push({pos:[-o-.5*s[0],0,0],size:[r,s[1],s[2]]}),1===l.right&&h.push({pos:[.5*s[0]+o,0,0],size:[r,s[1],s[2]]}),1===l.back&&h.push({pos:[0,0,-o-.5*s[2]],size:[s[0]+a,s[1],r]}),1===l.front&&h.push({pos:[0,0,.5*s[2]+o],size:[s[0]+a,s[1],r]})):(1===l.up&&h.push({pos:[0,.5*s[1]-o,0],size:[s[0],r,s[2]]}),1===l.down&&h.push({pos:[0,o-.5*s[1],0],size:[s[0],r,s[2]]}),1===l.left&&h.push({pos:[o-.5*s[0],0,0],size:[r,s[1]-a,s[2]]}),1===l.right&&h.push({pos:[.5*s[0]-o,0,0],size:[r,s[1]-a,s[2]]}),1===l.back&&h.push({pos:[0,0,o-.5*s[2]],size:[s[0]-a,s[1]-a,r]}),1===l.front&&h.push({pos:[0,0,.5*s[2]-o],size:[s[0]-a,s[1]-a,r]}));const c=[];let d,u,p=h.length,f=0;for(;p--;)u=h[f],d=this.isCompound?u.pos:gx.addArray(n,u.pos),c.push({type:"box",size:u.size,pos:d,material:e.material}),f++;if(this.isCompound){let t=null;this.remplace&&(t=0===e.radius?new i.Mesh(new i.BoxGeometry(s[0],s[1],s[2])):new i.Mesh(new hO(s[0],s[1],s[2],e.radius||o)),e.material&&"debug"===e.material&&(t=new EC(t,e.color),e.material="line")),this.motor.add({...e,mesh:t,shapes:c,type:"compound"})}else this.motor.add(c)}}class BC{constructor(e,t="drag",s){this.motor=s,this.needRay=!1,this.moveDirect=!1,this.moveDeep=!1,this.mode=t,this.option={},this.overObj=null,this.controler=e,this.dom=this.controler.domElement,this.selected=null,this.buttonRef=null,this.release=!1,this.numBullet=0,this.maxBullet=10,this.sticky=!1,this.pz=0,this.isActive=!1,this.raycastTest=!1,this.firstSelect=!1,this.mouseDown=!1,this.mouseDown2=!1,this.mouseMove=!1,this.decal=new i.Vector3,this.tmpPos=new i.Vector3,this.tmpD=new i.Vector3,this.mouse=new i.Vector2,this.oldMouse=new i.Vector2,this.raycast=new i.Raycaster,this.raycast.far=1e3,this.button=0,this.pos=new i.Vector3,this.velocity=new i.Vector3,this.angle=0,this.helper=null,this.dragPlane=null,this.overLock=!1,this.activeDragMouse(!0)}addDrag(){this.dragPlane||(this.helper=new QC(this.motor),this.dragPlane=new i.Mesh(new i.PlaneGeometry(1,1),this.motor.mat.get("hide")),this.dragPlane.castShadow=!1,this.dragPlane.receiveShadow=!1,this.dragPlane.scale.set(1,1,1).multiplyScalar(200),this.motor.scenePlus.add(this.helper),this.motor.scenePlus.add(this.dragPlane))}clearDrag(){this.dragPlane&&(this.motor.scenePlus.remove(this.dragPlane),this.motor.scenePlus.remove(this.helper),this.dragPlane.geometry.dispose(),this.helper.geometry.dispose(),this.dragPlane=null,this.helper=null)}setMode(e,t={}){e!==this.mode&&(this.mode=e,this.option=t,"blast"===this.mode&&this.option.visible&&this.motor.initParticle())}activeDragMouse(e){e?this.isActive||(this.dom.addEventListener("pointermove",this.mousemove.bind(this),!1),this.dom.addEventListener("pointerdown",this.mousedown.bind(this),!1),document.addEventListener("pointerup",this.mouseup.bind(this),!1),this.controler.addEventListener("end",this.controleEnd.bind(this),!1),this.controler.addEventListener("start",this.controleStart.bind(this),!1),this.isActive=!0,this.raycastTest=!0):this.isActive&&(this.dom.removeEventListener("pointermove",this.mousemove.bind(this)),this.dom.removeEventListener("pointerdown",this.mousedown.bind(this)),document.removeEventListener("pointerup",this.mouseup.bind(this)),this.controler.removeEventListener("end",this.controleEnd.bind(this)),this.controler.removeEventListener("start",this.controleStart.bind(this),!1),this.isActive=!1)}controleEnd(e){this.raycastTest=!0,this.controler.getInfo&&this.controler.getInfo()}controleStart(e){this.raycastTest=!1}controleChange(e){}getMouse(e){this.motor.viewSize?(this.mouse.x=e.offsetX/this.motor.viewSize.w*2-1,this.mouse.y=-e.offsetY/this.motor.viewSize.h*2+1):(this.mouse.x=e.offsetX/this.dom.clientWidth*2-1,this.mouse.y=-e.offsetY/this.dom.clientHeight*2+1),this.button="touch"!==e.pointerType?e.button:0}contextmenu(e){}mousedown(e){switch(this.sticky&&(this.unSelect(),console.log("unstick")),this.getMouse(e),this.mode){case"drag":this.drag();break;case"shoot":this.shoot();break;case"blast":this.blast();break;case"build":this.build()}}mouseup(e){this.release=!0,document.body.style.cursor="auto",this.mouseMove=!(this.oldMouse.distanceTo(this.mouse)<.01),this.mouseDown=!1,this.mouseDown2=!1,this.sticky?this.controler.enabled=!0:(this.unSelect(),this.resetButton())}mousemove(e){if("drag"===this.mode)this.getMouse(e),this.needRay=!0}castray(){let e,t,i,s,n,r="auto";if(null!==this.selected)this.raycast.setFromCamera(this.mouse,this.controler.object),e=this.raycast.intersectObject(this.dragPlane),e.length&&this.mouseDown&&this.moveSelect(e[0].point);else{if(!this.raycastTest)return;this.controler.enableRotate=!1,this.controler.enablePan=!1,this.raycast.setFromCamera(this.mouse,this.controler.object),e=this.raycast.intersectObjects(this.motor.scene.children,!0),this.tmpSelected=null,e.length>0?(i=e[0].object,i.isInstancedMesh?(n=e[0].instanceId,t=this.motor.byName(i.getIDName(n))):i.parent!==this.motor.scene?(s=i.parent,t=s.parent!==this.motor.scene?s.parent:s):t=i,this.mouseDown2&&t.extra&&t.extra(t.name),r=t&&!t.isButton?this.select(t,e[0].point):this.actionButton(t,e[0])):(this.resetOver(),this.controler.enableRotate=!0,this.controler.enablePan=!0),this.release&&(this.release=!1,this.controler.enableRotate=!0,this.controler.enablePan=!0,r="auto",this.resetOver()),document.body.style.cursor=r}}drag(){this.mouseDown||(this.firstSelect&&(this.firstSelect=!1),this.oldMouse.copy(this.mouse)),2===this.button&&(this.mouseDown2=!0),this.mouseDown=!0,this.needRay=!0}blast(){let e=null;this.raycast.setFromCamera(this.mouse,this.controler.object);let t=this.raycast.intersectObjects(this.motor.scene.children,!0);t.length>0?t[0].object.isButton?t[0].object.parent.userData.direct():e=t[0]:(t=this.raycast.intersectObjects(this.motor.scenePlus.children,!0),t.length>0&&(e=t[0]));const i=this.option;e&&(this.motor.explosion(e.point,i.radius||3,i.power||.1),i.visible&&this.motor.addParticle({name:"blast",type:"cube",position:e.point.toArray(),numParticles:60,radius:.2,radiusRange:.1,acceleration:[50,5,50],lifeTime:.5,endTime:.5,startTime:0,gravity:[0,.2,0],startSize:.5,endSize:.1,tween:"outQuad"}))}shoot(){this.raycast.setFromCamera(this.mouse,this.controler.object),this.pos.copy(this.raycast.ray.direction).add(this.raycast.ray.origin),this.velocity.copy(this.raycast.ray.direction).multiplyScalar(60),this.motor.add({name:"bullet_"+this.numBullet,type:"sphere",density:20,size:[.2],material:"chrome",pos:this.pos.toArray(),linearVelocity:this.velocity.toArray(),bullet:!0}),this.numBullet++,this.numBullet>this.maxBullet&&(this.numBullet=0)}resetButton(){this.buttonRef&&(this.buttonRef.userData.out&&this.buttonRef.userData.out(),this.buttonRef=null),this.raycastTest=!0,this.selected=null,this.firstSelect=!0,this.controler.enableRotate=!0,this.controler.enablePan=!0}actionButton(e,t){if(this.buttonRef?this.buttonRef.name!==e.name&&(this.buttonRef.userData.out&&this.buttonRef.userData.out(),this.buttonRef=e):this.mouseDown&&(this.buttonRef=e),this.mouseDown&&this.buttonRef.userData.action){let e=t.point;this.buttonRef.userData.action(e)}return"pointer"}setOver(e){e&&(this.overObj&&e.name!==this.overObj.name&&this.resetOver(),this.overObj=e,this.overObj.over&&this.overObj.over(!0))}resetOver(){this.overObj&&(this.overObj.over&&this.overObj.over(!1),this.overObj=null)}select(e,t){if(this.mouseDown||this.setOver(e),!this.mouseDown||this.selected===e)return"grab";this.pz=0;let i=t,s=[0,0,0,1];this.selected=e,this.decal.copy(i).sub(this.selected.position),this.tmpPos.copy(i).sub(this.decal),this.angle=this.controler.getAzimuthalAngle(),s=this.selected.quaternion.toArray(),this.addDrag(),this.dragPlane.rotation.set(0,this.angle,0),this.dragPlane.position.copy(i),this.dragPlane.position.y=0,this.helper.position.copy(i);let n=i.toArray(),r=!1;if(this.motor.change({name:this.selected.name,neverSleep:!0,wake:!0}),this.moveDirect)this.motor.change({name:this.selected.name,kinematic:!1,gravity:!1,damping:[.9,.9]});else{let e=[-.1,.1,600,1],t=[-.1,.1,600,1],i="OIMO"===this.motor.engine||"RAPIER"===this.motor.engine||"JOLT"===this.motor.engine,o=0===this.selected.link?"fixe":"d6";"JOLT"===this.motor.engine&&(o="fixe");let a=[["x",...e],["y",...e],["z",...e],["rx",...t],["ry",...t],["rz",...t]];"HAVOK"===this.motor.engine&&(a=[["x",...e],["y",...e],["z",...e]]),"OIMO"===this.motor.engine&&(r=!0,o=0===this.selected.link?"fixe":"spherical",a=[["x",...e],["y",...e],["z",...e]]),"HAVOK"===this.motor.engine&&(r=!0,o=0===this.selected.link?"fixe":"spherical",a=[-180,180,.1,.1]),this.motor.add([{name:"mouse",type:"null",pos:n,quat:s,kinematic:!i},{name:"mouseJoint",type:"joint",mode:o,lm:a,sd:[4,1],autoDrive:!0,b1:r?this.selected.name:"mouse",b2:r?"mouse":this.selected.name,worldAnchor:n,visible:!1}])}return"grabbing"}moveSelect(e){if(null===this.selected)return;if(e&&this.tmpPos.copy(e).sub(this.decal),this.moveDeep){let e=this.selected.position.y,t=e-this.tmpPos.y;this.tmpPos.y=e,this.tmpD.set(0,0,t).applyAxisAngle({x:0,y:1,z:0},this.angle),this.tmpPos.add(this.tmpD)}this.helper.position.copy(this.tmpPos);let t=this.tmpPos.toArray();this.moveDirect?this.motor.change({name:this.selected.name,pos:t,reset:!0}):this.motor.change({name:"mouse",pos:e.toArray(),lockPos:!0},!0)}unSelect(){null!==this.selected&&(this.resetOver(),this.clearDrag(),this.moveDirect?this.motor.change({name:this.selected.name,kinematic:!1,wake:!0,gravity:!0,damping:[0,.1]}):(this.motor.remove(["mouseJoint","mouse"]),this.motor.change({name:this.selected.name,neverSleep:!1,wake:!0})),this.raycastTest=!0,this.selected=null,this.firstSelect=!0)}step(){if(this.needRay&&this.castray(),this.needRay=!1,null===this.selected)return;let e=this.motor.flow.key;if(0!==e[1]){let t=.1*e[1];this.dragPlane.translateZ(t),this.needRay=!0}this.moveDirect&&this.moveSelect()}}class QC extends i.Line{constructor(e){super(new i.BufferGeometry,e.mat.get("line"));let t=.75;const s=[t,t,t,0,0,0];this.geometry.setAttribute("position",new i.Float32BufferAttribute([0,0,0,0,-100,0],3)),this.geometry.setAttribute("color",new i.Float32BufferAttribute(s,3)),this.vertices=this.geometry.attributes.position,this.colors=this.geometry.attributes.color,this.local=[0,0,0,0,0,0,0,0,0],this.frustumCulled=!1}}const MC=new i.Vector3;class TC{constructor(e=1.4,t=1e-4){this.minSizeForBreak=e,this.smallDelta=t,this.tempLine1=new i.Line3,this.tempPlane1=new i.Plane,this.tempPlane2=new i.Plane,this.tempPlane_Cut=new i.Plane,this.tempCM1=new i.Vector3,this.tempCM2=new i.Vector3,this.tempVector3=new i.Vector3,this.tempVector3_2=new i.Vector3,this.tempVector3_3=new i.Vector3,this.tempVector3_P0=new i.Vector3,this.tempVector3_P1=new i.Vector3,this.tempVector3_P2=new i.Vector3,this.tempVector3_N0=new i.Vector3,this.tempVector3_N1=new i.Vector3,this.tempVector3_AB=new i.Vector3,this.tempVector3_CB=new i.Vector3,this.tempResultObjects={object1:null,object2:null},this.box1=new i.Box3,this.box2=new i.Box3,this.sph1=new i.Sphere,this.sph2=new i.Sphere,this.tt=new i.Vector3,this.s1=new i.Vector3,this.s2=new i.Vector3,this.segments=[];for(let e=0;e<900;e++)this.segments[e]=!1}prepareBreakableObject(e,t,i,s,n){const r=e.userData;r.mass=t,r.velocity=i.clone(),r.angularVelocity=s.clone(),r.breakable=n}subdivideByImpact(e,t,i,s,n){const r=[],o=this.tempPlane1,a=this.tempPlane2;this.tempVector3.addVectors(t,i),o.setFromCoplanarPoints(t,e.position,this.tempVector3);const l=n+s,h=this;return function n(c,d,u,p){if(Math.random()<.05*p||p>l)return void r.push(c);let f=Math.PI;0===p?(a.normal.copy(o.normal),a.constant=o.constant):p<=s?(f=(u-d)*(.2+.6*Math.random())+d,h.tempVector3_2.copy(e.position).sub(t).applyAxisAngle(i,f).add(t),a.setFromCoplanarPoints(t,h.tempVector3,h.tempVector3_2)):(f=(.5*(1&p)+.2*(2-Math.random()))*Math.PI,h.tempVector3_2.copy(t).sub(c.position).applyAxisAngle(i,f).add(c.position),h.tempVector3_3.copy(i).add(c.position),a.setFromCoplanarPoints(c.position,h.tempVector3_3,h.tempVector3_2)),h.cutByPlane(c,a,h.tempResultObjects);const m=h.tempResultObjects.object1,g=h.tempResultObjects.object2;m&&n(m,d,f,p+1),g&&n(g,f,u,p+1)}(e,0,2*Math.PI,0),r}cutByPlane(e,t,s){let n;const r=e.geometry,o=r.attributes.position.array,a=r.attributes.normal.array,l=o.length/3;let h=l/3,c=r.getIndex();function d(e,t){const i=3*e+t;return c?c[i]:i}c&&(c=c.array,h=c.length/3);const u=[],p=[],f=this.smallDelta,m=l*l;for(let e=0;e<m;e++)this.segments[e]=!1;const g=this.tempVector3_P0,A=this.tempVector3_P1,b=this.tempVector3_N0,v=this.tempVector3_N1;for(let e=0;e<h-1;e++){const t=d(e,0),i=d(e,1),s=d(e,2);b.set(a[t],a[t]+1,a[t]+2);for(let n=e+1;n<h;n++){const e=d(n,0),r=d(n,1),o=d(n,2);v.set(a[e],a[e]+1,a[e]+2);1-b.dot(v)<f&&(t===e||t===r||t===o?i===e||i===r||i===o?(this.segments[t*l+i]=!0,this.segments[i*l+t]=!0):(this.segments[s*l+t]=!0,this.segments[t*l+s]=!0):i!==e&&i!==r&&i!==o||(this.segments[s*l+i]=!0,this.segments[i*l+s]=!0))}}const y=this.tempPlane_Cut;e.updateMatrix(),TC.transformPlaneToLocalSpace(t,e.matrix,y);for(let e=0;e<h;e++){const t=d(e,0),n=d(e,1),r=d(e,2);for(let e=0;e<3;e++){const a=0===e?t:1===e?n:r,h=0===e?n:1===e?r:t;if(this.segments[a*l+h])continue;this.segments[a*l+h]=!0,this.segments[h*l+a]=!0,g.set(o[3*a],o[3*a+1],o[3*a+2]),A.set(o[3*h],o[3*h+1],o[3*h+2]);let c=0,d=y.distanceToPoint(g);d>f?(c=2,p.push(g.clone())):d<-f?(c=1,u.push(g.clone())):(c=3,u.push(g.clone()),p.push(g.clone()));let m=0;if(d=y.distanceToPoint(A),d>f?(m=2,p.push(A.clone())):d<-f?(m=1,u.push(A.clone())):(m=3,u.push(A.clone()),p.push(A.clone())),1===c&&2===m||2===c&&1===m){this.tempLine1.start.copy(g),this.tempLine1.end.copy(A);let e=new i.Vector3;if(e=y.intersectLine(this.tempLine1,e),null===e)return console.error("Internal error: segment does not intersect plane."),s.segmentedObject1=null,s.segmentedObject2=null,0;u.push(e),p.push(e.clone())}}}e.userData.mass;let w=this.box1,x=this.box2,O=u.length,C=p.length;for(w.makeEmpty(),x.makeEmpty(),n=O;n--;)w.expandByPoint(u[n]);for(n=C;n--;)x.expandByPoint(p[n]);for(w.getBoundingSphere(this.sph1),x.getBoundingSphere(this.sph2),this.tempCM1.copy(this.sph1.center),this.tempCM2.copy(this.sph2.center),n=O;n--;)u[n].sub(this.tempCM1);for(n=C;n--;)p[n].sub(this.tempCM2);this.tempCM1.add(e.position),this.tempCM2.add(e.position),w.getSize(this.s1),x.getSize(this.s2),2*this.sph1.radius<this.minSizeForBreak&&(O=0),2*this.sph2.radius<this.minSizeForBreak&&(C=0),this.testSize(this.s1)&&(O=0),this.testSize(this.s2)&&(C=0);let S=null,I=null,E=0;return O>4&&(S=new i.Mesh(new OO(u),e.material),S.position.copy(this.tempCM1),S.quaternion.copy(e.quaternion),E++),C>4&&(I=new i.Mesh(new OO(p),e.material),I.position.copy(this.tempCM2),I.quaternion.copy(e.quaternion),E++),s.object1=S,s.object2=I,E}testSize(e){let t=0;return e.x<.01&&t++,e.y<.01&&t++,e.z<.01&&t++,t>1}static transformFreeVector(e,t){const i=e.x,s=e.y,n=e.z,r=t.elements;return e.x=r[0]*i+r[4]*s+r[8]*n,e.y=r[1]*i+r[5]*s+r[9]*n,e.z=r[2]*i+r[6]*s+r[10]*n,e}static transformFreeVectorInverse(e,t){const i=e.x,s=e.y,n=e.z,r=t.elements;return e.x=r[0]*i+r[1]*s+r[2]*n,e.y=r[4]*i+r[5]*s+r[6]*n,e.z=r[8]*i+r[9]*s+r[10]*n,e}static transformTiedVectorInverse(e,t){const i=e.x,s=e.y,n=e.z,r=t.elements;return e.x=r[0]*i+r[1]*s+r[2]*n-r[12],e.y=r[4]*i+r[5]*s+r[6]*n-r[13],e.z=r[8]*i+r[9]*s+r[10]*n-r[14],e}static transformPlaneToLocalSpace(e,t,i){i.normal.copy(e.normal),i.constant=e.constant;const s=TC.transformTiedVectorInverse(e.coplanarPoint(MC),t);TC.transformFreeVectorInverse(i.normal,t),i.constant=-s.dot(i.normal)}}new i.Vector2(1,1),new i.Vector2,new i.Vector3,new i.Vector3,new i.Vector3,new i.Plane,new i.Plane;class DC{constructor(e){this.motor=e,this.convexBreaker=new TC,this.tmpI=new THREE.Vector3,this.tpos=new THREE.Vector3,this.tnormal=new THREE.Vector3,this.nDebris=0,this.maxDebris=300,this.tt=null}step(){let e;for(let t in this.motor.reflow.point)e=this.motor.reflow.point[t],0!==e.distance&&(this.makeBreak(e.b1,e.pos,e.normal,e.impulse,e.v1),this.makeBreak(e.b2,e.pos,e.normal,e.impulse,e.v2))}makeBreak(e,t,i,s,n){let r=this.motor.utils.byName(e);if(!r)return;if(!r.breakable)return;let o=r.breakOption;if(s<o[0])return;let a=this.convexBreaker.subdivideByImpact(r,this.tpos.fromArray(t),this.tnormal.fromArray(i),o[1],o[2]);if(a.length<1)return;o[3]-=1;const l={material:r.material,linearVelocity:[n[0],n[1],n[2]],angularVelocity:[n[3],n[4],n[5]],density:r.density};let h=[],c=a.length,d=0;for(;c--;)h.push(this.addDebris(a[d],o,l)),d++;this.tt=setTimeout((()=>{this.motor.remove(e),this.motor.add(h)}),0)}addDebris(e,t,i){let s=t[3]>0,n={...i,name:"debris_"+this.nDebris++,type:"convex",shape:e.geometry,pos:e.position.toArray(),quat:e.quaternion.toArray(),breakable:s,breakOption:t};return this.nDebris>this.maxDebris&&(this.nDebris=0),n}}new i.Vector3;const RC=new i.Vector3,PC=new i.Vector3,LC=new i.Vector3,FC=new i.Vector3,UC=new i.Vector3;class zC{constructor(e={},t){this.motor=t,this.name=e.name||"ppp",this.particles=[],this.density=.01,this.smoothingRadius=.2,this.speedOfSound=.1,this.viscosity=.03,this.eps=1e-6,this.group=256,this.pressures=[],this.densities=[],this.neighbors=[],this.tv=new i.Vector3,this.tv2=new i.Vector3}add(e){let t=this.motor.add({instance:this.name,type:"particle",flags:"noQuery",size:[.1],pSize:.03,pos:e,inertia:[0,0,0],mass:.001,restitution:0,friction:.5,damping:[.1,.1],material:"hide"});t.force=new i.Vector3,this.particles.push(t),this.neighbors.length<this.particles.length&&this.neighbors.push([])}connect(e){let t=e.length;console.log(t);let i,s,n,r=[],o=0;for(;t--;)i=e[t],this.name,i[0],this.name,i[1],s=this.particles[i[0]].position,n=this.particles[i[1]].position,o=this.tv.copy(s).distanceTo(n),this.tv.copy(n).sub(s),r.push({type:"distance",helperSize:.03,b1:this.name+i[0],b2:this.name+i[1],limit:[.5*o,o],spring:[20,1],friction:0});this.motor.add(r)}getPosition(){let e,t,i=[],s=this.particles.length;for(;s--;)t=3*s,e=this.particles[s],i[t]=e.position.x,i[t+1]=e.position.y,i[t+2]=e.position.z;return i}getNeighbors(e,t){const i=this.particles.length,s=e.id,n=this.smoothingRadius*this.smoothingRadius;let r=0;for(let o=0;o!==i;o++){const i=this.particles[o];r=this.distance(i,e),s!==i.id&&r<n&&t.push(i)}}distance(e,t){const i=e.position.x-t.position.x,s=e.position.y-t.position.y,n=e.position.z-t.position.z;return i*i+s*s+n*n}w(e){const t=this.smoothingRadius;return 315/(64*Math.PI*t**9)*(t*t-e*e)**3}gradw(e,t){const i=e.length(),s=this.smoothingRadius;t.copy(e).multiplyScalar(945/(32*Math.PI*s**9)*(s*s-i*i)**2)}nablaw(e){const t=this.smoothingRadius;return 945/(32*Math.PI*t**9)*(t*t-e*e)*(7*e*e-3*t*t)}update(){const e=[],t=this.particles.length,i=this.speedOfSound,s=this.eps;let n,r=t;for(;r--;){const e=this.particles[r];e.force.set(0,0,0);const t=this.neighbors[r];t.length=0,this.getNeighbors(e,t),t.push(this.particles[r]);let s=0;for(n=t.length;n--;){const i=this.w(this.distance(e,t[n]));s+=t[n].mass*i}this.densities[r]=s,this.pressures[r]=i*i*(this.densities[r]-this.density)}const o=RC,a=PC,l=LC,h=FC,c=UC;for(r=t;r--;){const t=this.particles[r];let i,d;o.set(0,0,0),a.set(0,0,0);const u=this.neighbors[r];for(n=u.length;n--;){const e=u[n];h.copy(t.position).sub(e.position);const p=h.length();i=-e.mass*(this.pressures[r]/(this.densities[r]*this.densities[r]+s)+this.pressures[n]/(this.densities[n]*this.densities[n]+s)),this.gradw(h,l),l.multiplyScalar(i),o.add(l),c.copy(e.velocity).sub(t.velocity),c.multiplyScalar(1/(1e-4+this.densities[r]*this.densities[n])*this.viscosity*e.mass),d=this.nablaw(p),c.multiplyScalar(d),a.add(c)}a.multiplyScalar(t.mass),o.multiplyScalar(t.mass),t.force.add(a),t.force.add(o),e.push({name:t.name,force:t.force.toArray()})}this.motor.change(e)}}const GC=Math.PI/180,NC=[new i.Vector3(1,0,0),new i.Vector3(0,1,0),new i.Vector3(0,0,1)],VC=new i.Vector3,jC=new i.Vector3,HC=new i.Vector3,qC=new i.Vector3,XC=[],WC=[],ZC=new i.Vector3,YC=new i.Vector3,_C=new i.Vector3;new i.Matrix4;class KC{constructor(e={},t){this.motor=t,this.extra={},this.tmp={forwardForce:0,steerValue:0,steerDirection:0,brakeForce:0},this.localWheel=!0,this.maxSpeed=70,this.maxForce=1500,this.maxBrakeForce=45,this.maxSteer=.4,this.steeringIncrement=.15,this.steerRecover=.15,this.name=e.name||"car",this.mass=e.mass||1e3,this.size=e.size||[1.5,.7,3.8],this.pos=e.pos||[0,4,0],this.rot=e.rot||[0,0,0],this.friction=e.friction||.2,this.restitution=e.restitution||.3,this.massCenter=e.massCenter||[0,0,0],this.driveWheel=e.driveWheel||null;let s=[{type:"box",pos:this.massCenter,size:this.size,radius:.02}];e.shapeMesh&&(s=[{type:"convex",shape:e.shapeMesh.geometry,pos:e.shapePos||[0,0,0]}]),this.body=this.motor.add({type:"compound",shapes:s,name:this.name,pos:this.pos,rot:this.rot,friction:this.friction,restitution:this.restitution,mass:this.mass,mesh:e.bodyMesh||null,meshPos:e.meshPos||[0,-1.1,0],material:e.material,damping:[.05,.05],debug:!1}),this.body.inertia.set(283.33331298828125,333.33331298828125,83.33332824707031),this.vehicle=new JC({chassis:this.body},this.motor);let n=e.wheelPosition||[.61,0,1.2];const r=[new i.Vector3(-n[0],n[1],-n[2]),new i.Vector3(n[0],n[1],-n[2]),new i.Vector3(-n[0],n[1],n[2]),new i.Vector3(n[0],n[1],n[2])],o={radius:e.wheelRadius||.31,directionLocal:new i.Vector3(0,-1,0),suspensionStiffness:100,suspensionRestLength:.5,suspensionMaxLength:1,maxSuspensionTravel:.3,frictionSlip:4,dampingRelaxation:2.3,dampingCompression:4.4,maxSuspensionForce:1e5,rollInfluence:.001,axleLocal:new i.Vector3(1,0,0),chassisConnectionPointLocal:new i.Vector3(1,1,0)};let a,l,h;this.addParametre("frictionSlip",4),this.addParametre("maxSuspensionTravel",.3),this.addParametre("suspensionRestLength",.5),this.addParametre("suspensionMaxLength",1),r.forEach((e=>{o.chassisConnectionPointLocal.copy(e),this.vehicle.addWheel(o)}));let c=this.motor.getMat("debug");if(e.wheelMesh?(l=e.wheelMesh,h=e.wheelMesh2?e.wheelMesh2:null,e.material&&(c=e.material||c,l.material=c,h&&(h.material=c))):(a=new i.CylinderGeometry(o.radius,o.radius,e.wheelDepth||.2),a.rotateZ(.5*Math.PI),l=new i.Mesh(a,c),h=null),this.vehicle.localWheel=this.localWheel,this.localWheel){this.vehicle.wheelMeshes=[h||l.clone(),l,h?h.clone():l.clone(),l.clone()];let e=this.vehicle.wheelMeshes.length,t=0;for(;e--;)this.body.add(this.vehicle.wheelMeshes[t++])}else m.matrixAutoUpdate=!1,h&&(h.matrixAutoUpdate=!1),this.vehicle.wheelMeshes=[this.motor.add(h||m.clone()),this.motor.add(m),this.motor.add(h?h.clone():m.clone()),this.motor.add(m.clone())]}step(){this.tmp.forwardForce=0,this.tmp.brakeForce=0,this.tmp.steerDirection=0;let e=this.motor.getDelta();this.motor.getAzimut();let t=this.motor.getKey();this.tmp.forwardForce=t[1],this.tmp.steerDirection=-1*t[0],this.tmp.brakeForce=1===t[4]?this.maxBrakeForce:0,this.tmp.steerValue+=this.tmp.steerDirection*this.steeringIncrement,this.tmp.steerValue=Math.min(Math.max(this.tmp.steerValue,-this.maxSteer),this.maxSteer),this.tmp.steerValue*=1-(1-Math.abs(this.tmp.steerDirection))*this.steerRecover;let i=Math.abs(this.vehicle.currentVehicleSpeedKmHour);i=Math.min(i,this.maxSpeed),this.maxSpeed;const s=1*this.tmp.forwardForce*this.maxForce;this.vehicle.applyEngineForce(s,0),this.vehicle.applyEngineForce(s,1),this.vehicle.applyEngineForce(s,2),this.vehicle.applyEngineForce(s,3),this.vehicle.setSteeringValue(this.tmp.steerValue,2),this.vehicle.setSteeringValue(this.tmp.steerValue,3),this.vehicle.setBrake(this.tmp.brakeForce,0),this.vehicle.setBrake(this.tmp.brakeForce,1),this.vehicle.setBrake(0,2),this.vehicle.setBrake(0,3),this.vehicle.wheelInfos[0].frictionSlip=8,this.vehicle.wheelInfos[1].frictionSlip=8,this.vehicle.wheelInfos[2].frictionSlip=8,this.vehicle.wheelInfos[3].frictionSlip=8,this.vehicle.updateVehicle(e),this.driveWheel&&(this.driveWheel.rotation.y=180*this.tmp.steerValue*GC)}addParametre(e,t){this.extra[e]=t,Object.defineProperty(this,e,{get:()=>this.extra[e],set:t=>{this.extra[e]=t,this.vehicle&&this.vehicle.setWheels(e,this.extra[e])}})}}class JC{constructor(e,t){this.motor=t,this.chassisBody=e.chassis,this.wheelInfos=[],this.sliding=!1,this.world=null,this.indexRightAxis=void 0!==e.indexRightAxis?e.indexRightAxis:0,this.indexForwardAxis=void 0!==e.indexForwardAxis?e.indexForwardAxis:2,this.indexUpAxis=void 0!==e.indexUpAxis?e.indexUpAxis:1,this.wheelMeshes=[],this.brakeMeshs=null,this.localWheel=!1}addWheel(e={}){let t=new tS(e,this.motor),i=this.wheelInfos.length-1;t.chassisBody=this.chassisBody;let s=t.suspensionRestLength+t.radius;return t.ray=this.motor.add({type:"ray",name:this.chassisBody.name+"_wheel_"+i,begin:t.chassisConnectionPointLocal.toArray(),end:[t.chassisConnectionPointLocal.x,-s,t.chassisConnectionPointLocal.z],callback:function(e){t.castRay(e)},visible:!1,parent:this.chassisBody}),this.wheelInfos.push(t),i}setWheels(e,t){let i,s=this.wheelInfos.length;for(;s--;)i=this.wheelInfos[s],i[e]&&(i[e]=t)}setSteeringValue(e,t){this.wheelInfos[t].steering=e}applyEngineForce(e,t){this.wheelInfos[t].engineForce=e}setBrake(e,t){this.wheelInfos[t].brake=e}getVehicleAxisWorld(e,t){return t.set(0===e?1:0,1===e?1:0,2===e?1:0),fS(t,aS(this.chassisBody,new i.Matrix4),t),t}updateVehicle(e){let t=this.wheelInfos,s=t.length,n=this.chassisBody,r=s;for(;r--;)this.updateWheelTransform(r);const o=oS(n,new i.Vector3),a=mS(o,aS(n,new i.Matrix4).invert(),new i.Vector3);this.currentVehicleSpeedKmHour=a.z;let l=new i.Vector3;this.getVehicleAxisWorld(this.indexForwardAxis,l),l.dot(n.velocity)<0&&(this.currentVehicleSpeedKmHour*=-1),this.updateSuspension(e);let h=new i.Vector3;for(new i.Vector3,r=0;r<s;r++){let i=t[r],s=i.suspensionForce;s>i.maxSuspensionForce&&(s=i.maxSuspensionForce),h.copy(i.raycastResult.hitNormalWorld).multiplyScalar(s*e),hS(this.motor,n,h,i.raycastResult.hitPointWorld)}this.updateFriction(e);let c=new i.Vector3,d=new i.Vector3,u=new i.Vector3;for(r=0;r<s;r++){let i=t[r];cS(n,i.chassisConnectionPointWorld,u);let s=1;if(1===this.indexUpAxis)s=-1;if(i.isInContact){this.getVehicleAxisWorld(this.indexForwardAxis,d);let t=uS(d,i.raycastResult.hitNormalWorld);c.copy(i.raycastResult.hitNormalWorld).multiplyScalar(t),d.sub(c);let n=uS(d,u);i.deltaRotation=s*n*e/i.radius}!i.sliding&&i.isInContact||0===i.engineForce||!i.useCustomSlidingRotationalSpeed||(i.deltaRotation=(i.engineForce>0?1:-1)*i.customSlidingRotationalSpeed*e),Math.abs(i.brake)>Math.abs(i.engineForce)&&(i.deltaRotation=0),i.rotation-=i.deltaRotation,i.deltaRotation*=.99}}updateSuspension(e){let t=this.chassisBody,i=sS(t),s=this.wheelInfos,n=s.length;for(let e=0;e<n;e++){let t=s[e];if(t.isInContact){let e,s=t.suspensionRestLength-t.suspensionLength;e=t.suspensionStiffness*s*t.clippedInvContactDotSuspension;let n,r=t.suspensionRelativeVelocity;n=r<0?t.dampingCompression:t.dampingRelaxation,e-=n*r,t.suspensionForce=e*i,t.suspensionForce<0&&(t.suspensionForce=0)}else t.suspensionForce=0}}updateFriction(e){let t,s,n,r=qC,o=this.wheelInfos,a=o.length,l=this.chassisBody,h=XC,c=WC;for(t=0;t<a;t++)if(s=o[t],n=s.raycastResult.body,s.sideImpulse=0,s.forwardImpulse=0,h[t]||(h[t]=new i.Vector3),c[t]||(c[t]=new i.Vector3),n){let e=c[t],i=this.getWheelTransformWorld(t);mS(NC[this.indexRightAxis],i,e);let o=s.raycastResult.hitNormalWorld,a=uS(e,o);r.copy(o).multiplyScalar(a),e.sub(r).normalize(),pS(o,e,h[t]),h[t].normalize(),s.sideImpulse=IS(l,s.raycastResult.hitPointWorld,n,s.raycastResult.hitPointWorld,e),s.sideImpulse*=1}for(this.sliding=!1,t=0;t<a;t++){s=o[t],n=s.raycastResult.body;let i=0;if(s.slipInfo=1,n){let r=0,o=s.brake?s.brake:r;i=AS(l,n,s.raycastResult.hitPointWorld,h[t],o),i+=s.engineForce*e;let a=o/i;s.slipInfo*=a}if(s.forwardImpulse=0,s.skidInfo=1,n){s.skidInfo=1;let t=s.suspensionForce*e*s.frictionSlip,n=t*t;s.forwardImpulse=i;let r=.5*s.forwardImpulse/s.forwardAcceleration,o=1*s.sideImpulse/s.sideAcceleration,a=r*r+o*o;if(s.sliding=!1,a>n){this.sliding=!0,s.sliding=!0;let e=t/Math.sqrt(a);s.skidInfo*=e}}}if(this.sliding)for(let e=0;e<a;e++)s=o[e],0!==s.sideImpulse&&s.skidInfo<1&&(s.forwardImpulse*=s.skidInfo,s.sideImpulse*=s.skidInfo);for(t=0;t<a;t++){s=o[t];let e=new i.Vector3;if(e.copy(s.raycastResult.hitPointWorld).sub(rS(l,new i.Vector3)),0!==s.forwardImpulse){let e=new i.Vector3;e.copy(h[t]).multiplyScalar(s.forwardImpulse),hS(this.motor,l,e,s.raycastResult.hitPointWorld)}if(0!==s.sideImpulse){n=s.raycastResult.body,(new i.Vector3).copy(s.raycastResult.hitPointWorld).sub(rS(n,new i.Vector3));let r=new i.Vector3;r.copy(c[t]).multiplyScalar(s.sideImpulse),mS(e,aS(l,new i.Matrix4).invert(),e),e["xyz"[this.indexUpAxis]]*=s.rollInfluence,mS(e,aS(l,new i.Matrix4),e),hS(this.motor,l,r,rS(l,new i.Vector3).add(e)),r.multiplyScalar(-1),hS(this.motor,n,r,s.raycastResult.hitPointWorld)}}}updateWheelTransformWorld(e){const t=this.chassisBody.matrixWorld;fS(e.chassisConnectionPointLocal,t,e.chassisConnectionPointWorld),mS(e.directionLocal,t,e.directionWorld)}updateWheelTransform(e){let t=ZC,s=YC,n=_C,r=this.wheelInfos[e];this.updateWheelTransformWorld(r),t.copy(r.directionLocal).multiplyScalar(-1),s.copy(r.axleLocal),pS(t,s,n),n.normalize(),s.normalize();let o=r.steering,a=new i.Quaternion;gS(t,o,a);let l=new i.Quaternion;gS(s,r.rotation,l);let h=r.quaternion;lS(this.chassisBody,h),h.multiply(a).multiply(l).normalize();let c=r.position;c.copy(r.directionWorld),c.multiplyScalar(r.suspensionLength);let d=c.clone();c.add(r.chassisConnectionPointWorld),r.matrix.compose(r.position,r.quaternion,{x:1,y:1,z:1}),this.localWheel?(d.add(r.chassisConnectionPointLocal),this.wheelMeshes[e].quaternion.copy(a).multiply(l).normalize(),this.wheelMeshes[e].position.copy(d),this.brakeMeshs&&(2!==e&&3!==e||this.brakeMeshs[e].quaternion.copy(a).normalize(),this.brakeMeshs[e].position.copy(d),this.brakeMeshs[e].updateMatrix())):(this.wheelMeshes[e].position.copy(r.position),this.wheelMeshes[e].quaternion.copy(r.quaternion),this.wheelMeshes[e].updateMatrix())}getWheelTransformWorld(e){return this.wheelInfos[e].matrix}}var $C=new i.Vector3,eS=new i.Vector3;class tS{constructor(e,t){this.motor=t,e=((e,t)=>{for(var i in e=e||{},t)i in e||(e[i]=t[i]);return e})(e,{chassisConnectionPointLocal:new i.Vector3,chassisConnectionPointWorld:new i.Vector3,directionLocal:new i.Vector3,directionWorld:new i.Vector3,axleLocal:new i.Vector3,suspensionRestLength:1,suspensionMaxLength:2,radius:1,suspensionStiffness:100,dampingCompression:10,dampingRelaxation:10,frictionSlip:1e4,forwardAcceleration:1,sideAcceleration:1,steering:0,rotation:0,deltaRotation:0,rollInfluence:.01,maxSuspensionForce:Number.MAX_VALUE,isFrontWheel:!0,clippedInvContactDotSuspension:1,suspensionRelativeVelocity:0,suspensionForce:0,skidInfo:0,suspensionLength:0,maxSuspensionTravel:1,useCustomSlidingRotationalSpeed:!1,customSlidingRotationalSpeed:-.1}),this.maxSuspensionTravel=e.maxSuspensionTravel,this.customSlidingRotationalSpeed=e.customSlidingRotationalSpeed,this.useCustomSlidingRotationalSpeed=e.useCustomSlidingRotationalSpeed,this.sliding=!1,this.chassisConnectionPointLocal=e.chassisConnectionPointLocal.clone(),this.chassisConnectionPointWorld=e.chassisConnectionPointLocal.clone(),this.directionLocal=e.directionLocal.clone(),this.directionWorld=e.directionLocal.clone(),this.axleLocal=e.axleLocal.clone(),this.suspensionRestLength=e.suspensionRestLength,this.suspensionMaxLength=e.suspensionMaxLength,this.radius=e.radius,this.suspensionStiffness=e.suspensionStiffness,this.dampingCompression=e.dampingCompression,this.dampingRelaxation=e.dampingRelaxation,this.frictionSlip=e.frictionSlip,this.forwardAcceleration=e.forwardAcceleration,this.sideAcceleration=e.sideAcceleration,this.steering=0,this.rotation=0,this.deltaRotation=0,this.rollInfluence=e.rollInfluence,this.maxSuspensionForce=e.maxSuspensionForce,this.engineForce=0,this.brake=0,this.isFrontWheel=e.isFrontWheel,this.clippedInvContactDotSuspension=1,this.suspensionRelativeVelocity=0,this.suspensionForce=0,this.skidInfo=0,this.suspensionLength=0,this.sideImpulse=0,this.forwardImpulse=0,this.raycastResult=new iS,this.position=(new i.Vector3).copy(this.chassisConnectionPointLocal),this.quaternion=new i.Quaternion,this.isInContact=!1,this.chassisBody=null,this.ray=null,this.matrix=new i.Matrix4}castRay(e){if(e.hit){this.isInContact=!0;let i=e.distance;this.raycastResult.hitPointWorld.fromArray(e.point),this.raycastResult.hitNormalWorld.fromArray(e.normal),this.raycastResult.body=this.motor.byName(e.body),this.suspensionLength=i-this.radius;let s=this.suspensionRestLength-this.maxSuspensionTravel,n=this.suspensionRestLength+this.maxSuspensionTravel;this.suspensionLength<s&&(this.suspensionLength=s),this.suspensionLength>n&&(this.suspensionLength=n,this.raycastResult.reset());let r=uS(this.raycastResult.hitNormalWorld,this.directionWorld);cS(this.chassisBody,this.raycastResult.hitPointWorld,$C);var t=uS(this.raycastResult.hitNormalWorld,$C);if(r>=-.1)this.suspensionRelativeVelocity=0,this.clippedInvContactDotSuspension=10;else{let e=-1/r;this.suspensionRelativeVelocity=t*e,this.clippedInvContactDotSuspension=e}}else this.isInContact=!1,this.suspensionLength=this.suspensionRestLength+0*this.maxSuspensionTravel,this.suspensionRelativeVelocity=0,this.raycastResult.hitNormalWorld.copy(this.directionWorld).multiplyScalar(-1),this.clippedInvContactDotSuspension=1}updateWheel(e){let t=this.raycastResult;if(this.isInContact){let i=t.hitNormalWorld.dot(t.directionWorld);eS.copy(t.hitPointWorld).sub(e.position),cS(e,eS,$C);let s=t.hitNormalWorld.dot($C);if(i>=-.1)this.suspensionRelativeVelocity=0,this.clippedInvContactDotSuspension=10;else{let e=-1/i;this.suspensionRelativeVelocity=s*e,this.clippedInvContactDotSuspension=e}}else t.suspensionLength=this.suspensionRestLength,this.suspensionRelativeVelocity=0,t.hitNormalWorld.copy(t.directionWorld).scaleInPlace(-1),this.clippedInvContactDotSuspension=1}}class iS{constructor(){this.body=null,this.hitPointWorld=new i.Vector3,this.hitNormalWorld=new i.Vector3,this.directionWorld=new i.Vector3}reset(){this.body=null,this.hitPointWorld=new i.Vector3,this.hitNormalWorld=new i.Vector3,this.directionWorld=new i.Vector3}}const sS=e=>e.mass,nS=e=>e.mass>0?1/e.mass:0,rS=(e,t)=>t.copy(e.position),oS=(e,t)=>t.copy(e.velocity),aS=(e,t)=>t.copy(e.matrixWorld),lS=(e,t)=>t.copy(e.quaternion),hS=(e,t,i,s)=>{e.change({name:t.name,impulse:i.toArray(),impulseCenter:s.toArray()})},cS=(e,t,i)=>(i.copy(t).sub(e.position),i.crossVectors(e.angular,i),i.add(e.velocity),i),dS=(e,t)=>(t.copy(e.inertia),mS(t,e.matrixWorld,t),t.x=t.x>0?1/t.x:0,t.y=t.y>0?1/t.y:0,t.z=t.z>0?1/t.z:0,t),uS=(e,t)=>e.x*t.x+e.y*t.y+e.z*t.z,pS=(e,t,i)=>{const s=e.y*t.z-e.z*t.y,n=e.z*t.x-e.x*t.z,r=e.x*t.y-e.y*t.x;return i.set(s,n,r),i},fS=(e,t,i)=>{const s=e.x,n=e.y,r=e.z,o=t.elements,a=s*o[0]+n*o[4]+r*o[8]+o[12],l=s*o[1]+n*o[5]+r*o[9]+o[13],h=s*o[2]+n*o[6]+r*o[10]+o[14],c=1/(s*o[3]+n*o[7]+r*o[11]+o[15]);return i.x=a*c,i.y=l*c,i.z=h*c,i},mS=(e,t,i)=>{const s=e.x,n=e.y,r=e.z,o=t.elements;return i.x=s*o[0]+n*o[4]+r*o[8],i.y=s*o[1]+n*o[5]+r*o[9],i.z=s*o[2]+n*o[6]+r*o[10],i},gS=(e,t,i)=>{const s=Math.sin(t/2);return e.normalize(),i.w=Math.cos(t/2),i.x=e.x*s,i.y=e.y*s,i.z=e.z*s,i};function AS(e,t,i,s,n){var r=0,o=i,a=VC,l=jC,h=HC;cS(e,o,a),cS(t,o,l),h.copy(a).sub(l);return n<(r=-uS(s,h)*(1/(xS(e,i,s)+xS(t,i,s))))&&(r=n),r<-n&&(r=-n),r}var bS=new i.Vector3,vS=new i.Vector3,yS=new i.Vector3,wS=new i.Vector3;function xS(e,t,s){var n=bS,r=vS,o=yS,a=wS;return n.copy(t).sub(rS(e,new i.Vector3)),pS(n,s,r),a.copy(dS(e,new i.Vector3)).multiply(r),pS(a,n,o),nS(e)+uS(s,o)}var OS=new i.Vector3,CS=new i.Vector3,SS=new i.Vector3;function IS(e,t,i,s,n){if(n.lengthSq()>1.1)return 0;let r=OS,o=CS,a=SS;return cS(e,t,r),cS(i,s,o),a.copy(r).sub(o),-.1*uS(n,a)*(1/(nS(e)+nS(i)))}const ES={sunPosition:new i.Vector3(.27,1,.5),sunTop:new i.Vector3(0,.99,0),saturation:1,noiseMap:null,nightLuminosity:.03,cloud_size:.29,cloud_covr:.1,cloud_dens:.4,cloud_dist:.64,haze:.1,mixRatio:.76,SAMPLE:64,STEP:4,cloudColor:new i.Color(16777209).multiplyScalar(1),skyColor:new i.Color(4348022),fogColor:new i.Color(11253184),groundColor:new i.Color(8421504),sunColor:new i.Color(16777215).multiplyScalar(3)},kS={defines:{USE_NOISE_MAP:!1},uniforms:{lightdir:{value:ES.sunPosition},sunTop:{value:ES.sunTop},noiseMap:{value:ES.noiseMap},mixRatio:{value:ES.mixRatio},cloud_size:{value:ES.cloud_size},cloud_covr:{value:ES.cloud_covr},cloud_dens:{value:ES.cloud_dens},cloud_dist:{value:ES.cloud_dist},nightLuminosity:{value:ES.nightLuminosity},haze:{value:ES.haze},saturation:{value:ES.saturation},SAMPLE:{value:ES.SAMPLE},STEP:{value:ES.STEP},fogy:{value:ES.fogy},t:{value:1},fogColor:{value:ES.fogColor},groundColor:{value:ES.groundColor},cloudColor:{value:ES.cloudColor},skyColor:{value:ES.skyColor},sunColor:{value:ES.sunColor}},vertexShader:"\nvarying vec3 worldPosition;\nvoid main()\t{\n\tworldPosition = ( modelMatrix * vec4( position, 1.0 )).xyz;\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n}\n",fragmentShader:"\n//precision highp float;\nvarying vec3 worldPosition;\n\nuniform vec3 fogColor;\nuniform vec3 groundColor;\nuniform vec3 cloudColor;\nuniform vec3 skyColor;\nuniform vec3 sunColor;\n\nuniform float saturation;\n\nuniform float hue;\nuniform float mixRatio;\nuniform float fogy;\n\nuniform vec3 sunTop;\n\nuniform sampler2D noiseMap;\nuniform vec3 lightdir;\n\nuniform float cloud_size;\nuniform float cloud_covr;\nuniform float cloud_dens;\nuniform float cloud_dist;\n\nuniform float nightLuminosity;\nuniform float haze;\nuniform float t;\n\nuniform int SAMPLE;\nuniform int STEP;\n\n//const float c = 6.36e6;\n//const float d = 6.38e6;\nconst float c = 6.407e6;\nconst float d = 6.416e6;\n\n//const float g = 0.76; // mix ratio\n//const float h = g*g;\nconst float icc = 1.0/8e3;\nconst float jcc = 1.0/1200.0;\nconst float pi = 3.141592653589793;\n\nconst vec3 vm = vec3( 0,-c,0 );\n//const vec3 vn = vec3( 2.1e-5 );\n//const vec3 vo = vec3( 5.8e-6, 1.35e-5, 3.31e-5 );\n\n//const vec3 vn = vec3( 0.000021 );\n//const vec3 vo = vec3( 0.0000058, 0.0000135, 0.0000331 );// sky base color\n\n//const vec3 vo = vec3( 0.000021 );// sky base color\n\n\n#ifdef USE_NOISE_MAP\n\nfloat noise( in vec3 x ){\n    vec3 p = floor(x);\n    vec3 f = fract(x);\n    f = f*f*(3.0-2.0*f);\n    vec2 uv = (p.xy+vec2(37.0,17.0)*p.z) + f.xy;\n    vec2 rg = texture2D( noiseMap, (uv+0.5)/256.0, -16.0 ).yx;\n    return mix( rg.x, rg.y, f.z );\n}\n\n#else\n\nfloat hash( float n ) { return fract(sin(n)*753.5453123); }\nfloat noise( in vec3 x ){\n    vec3 p = floor(x);\n    vec3 f = fract(x);\n    f = f*f*(3.0-2.0*f);\n    float n = p.x + p.y*157.0 + 113.0*p.z;\n    return mix(mix(mix( hash(n+  0.0), hash(n+  1.0),f.x),\n                   mix( hash(n+157.0), hash(n+158.0),f.x),f.y),\n               mix(mix( hash(n+113.0), hash(n+114.0),f.x),\n                   mix( hash(n+270.0), hash(n+271.0),f.x),f.y),f.z);\n}\n\n#endif\n\nfloat NOISE( vec3 r )\n{\n\tr.xz += t;\n\tr *= 0.5;\n\tfloat s;\n\ts = 0.5 * noise(r);\n\tr = r * 2.52;\n\ts += 0.25 * noise(r);\n\tr = r * 2.53;\n\ts += 0.125 * noise(r);\n\tr = r * 2.51;\n\ts += 0.0625 * noise(r);\n\tr = r * 2.53;\n\ts += 0.03125 * noise(r);\n\tr = r * 2.52;\n\ts += 0.015625 * noise(r);\n\treturn s;\n}\n\nfloat MakeNoise( vec3 r )\n{\n\tfloat s,tt;\n\ts = NOISE( r * 2e-4 * ( 1.0 - cloud_size ) );\n\ttt = ( 1.0 - cloud_covr ) * 0.5 + 0.2;\n\ts = smoothstep( tt, tt+.2 , s );\n\ts *= 0.5*(cloud_dens*100.0);\n\treturn s;\n}\n\nvoid clouds( in vec3 r, out vec3 u )\n{\n\tfloat v,w;\n\tv = length( r-vm ) - c;\n\tw = 0.0;\n\tif( 5e3 < v && v < 1e4 ) w = MakeNoise( r ) * (sin( pi*(v-5e3)/5e3 ));\n\tu = vec3( exp(-v*icc), exp(-v*jcc), w );\n}\n\nfloat ca( in vec3 r, in vec3 s, in float t )\n{\n\tvec3 u = r - vm;\n\tfloat v,w,x,y,z,A;\n\tv = dot(u,s);\n\tw = dot(u,u)-t*t;\n\tx = v*v-w;\n\tif( x < 0.0 ) return -1.0;\n\ty = sqrt(x);\n\tz = -v-y;\n\tA = -v+y;\n\treturn z >= 0.0 ? z : A;\n}\n\nvec3 czm_saturation(vec3 rgb, float adjustment)\n{\n    vec3 W = vec3(0.2125, 0.7154, 0.0721);\n    vec3 intensity = vec3(dot(rgb, W));\n    return mix(intensity, rgb, adjustment);\n}\n\n\nvec3 makeSky( in vec3 lightpos, in vec3 r, in vec3 world, out float mask )\n{\n\n\tvec3 vn = vec3( 0.000021 );\n\tvec3 vo = skyColor;\n\tvo *= 0.00005;\n\n\tfloat u,v,w,x,y,z,m, M, N, S, H, F;\n\tvec3 p = lightpos;\n\tu = ca(r,world,d);\n\tv = dot(world,p);\n\tw = 1.0+v*v;\n\n\tfloat gg = mixRatio;\n\tfloat hh = gg*gg;\n\n\tx = 0.0596831*w;\n\ty = 0.0253662*(1.0-hh)*w/((2.0+hh)*pow(abs(1.0+hh-2.0*gg*v),1.5));\n\tz = 50.*pow(abs(1.+dot(world,-p)),2.0)*dot(vec3(0.,1.,0.),p)*(1.0-cloud_covr)*(1.0-min(fogy,1.0));\n\n\tm = 0.0;\n\tvec3 D,E, CB, CM, BB, BM, SX;\n\n\tF = u / float( SAMPLE );\n\n\tBB = vec3(0.0);\n\tBM = vec3(0.0);\n\n\tfloat count = 0.0;\n\n\tfor( int G=0; G<SAMPLE; ++G ){\n\n\t\tH = float(G)*F;\n\t\tvec3 I = r + world * H;\n\t\t//CB = vec3(1.0);\n\t\t//BB = vec3(0.0);\n\t\tclouds( I, CB );\n\t\tCB += fogy;// add fog\n\t\tCB.y += CB.z;// add clound\n\t\tCB.xy *= F;\n\t\tBB += CB;\n\n\t\tM = ca(I,p,d);\n\n\t\tif( M > 0.0 ){\n\n\t\t\tN = M/float(STEP);\n\t\t\tBM = vec3(0.0);\n\n\t\t\tfor( int R=0; R<STEP; ++R ){\n\n\t\t\t\tS = float(R)*N;\n\t\t\t\tvec3 T=I+p*S;\n\t\t\t\tclouds( T, CM );\n\t\t\t\tCM += fogy;// add fog\n\t\t\t\tCM.y += CM.z;// add clound\n\t\t\t\tBM += CM * N;\n\n\t\t\t}\n\n\t\t\tSX = exp(-(vo*(BM.x+BB.x)+vn*(BM.y+BB.y)* cloud_dist));\n\n\t\t\tm += CB.z;\n\t\t\tcount += 1.0;\n\t\t\tD += SX*CB.x;\n\t\t\tE += (SX*CB.y)+z*m;\n\t\t}\n\t\telse return vec3(0.0);\n\t}\n\t//mask = m * 0.0125;\n\t//mask = m / count;\n\tmask = m / float( SAMPLE );\n\n\treturn ((D * vo * x ) + (E * vn * y * sunColor)) * 15.0;\n}\n\n\nvoid main()\n{\n\tvec3 light = normalize( lightdir );\n\tvec3 world = normalize( worldPosition.xyz );\n\n\tfloat uvy = acos( world.y ) / pi;\n\n\t//float luma = smoothstep(0.0, 4.0,  1.0-(abs(world.y)/0.8) );\n    //float mid = smoothstep(0.0, 1.0,  abs(world.y) < haze ? 1.0-(abs(world.y)/(haze*1.0)) : 0.0 );\n    //mid *= nightLuminosity;//pow(  mid, 1.0 );\n\n    // ground reapeat sky\n\t//if( world.y < -0.15) world.y = -0.15+((-world.y-0.15)*0.1);\n\tif( world.y < 0.0) world.y = -world.y;\n\n\tfloat high = smoothstep(1.0, 0.0, (uvy)*10000.0);\n\tfloat top =  smoothstep(1.0, 0.0, (uvy-0.5)*50.0);\n\tfloat middle = uvy > 0.5 ? high : smoothstep(0.0, 1.0, (0.5-uvy)*((1.0-haze)*100.0));\n\n\tfloat middle2 = uvy > 0.5 ? smoothstep(0.0, 1.0, (0.5-uvy)*((1.0-haze)*100.0)) : smoothstep(0.0, 1.0, (0.5-uvy)*((1.0-haze)*100.0));\n\n\tvec3 s = sunTop;\n\tfloat lm = dot( s, light );\n\tfloat day = clamp((lm*4.0), 0.0, (1.0-nightLuminosity) )+nightLuminosity;\n\n\tif(lm <= 0.0) light *= -1.0;\n\tlight.y = abs(light.y);\n\n\t//if(light.y < 0.1) light.y = 0.1;\n\tlight.y = clamp(light.y, 0.1, 1.0 );\n\t//light.y += 0.5;\n\n\tfloat mask = 0.0;\n\n\tvec3 sky = makeSky( light, s, world, mask );\n\tmask = clamp(mask, 0.0, 1.0 );\n\tsky = mix( sky, cloudColor, mask ); //apply cloud color\n\t\n\n\t//sky = mix( sky, groundColor, 1.0-middle ); // apply ground color\n\tsky = mix( sky, fogColor, 1.0-middle2 ); // apply fog color\n\t\n    //float dd = clamp(day+(nightLuminosity*0.5), 0.0, 1.0);\n\t//luma *= 1.0-dd;\n\t//clear = mix( clear, clear+skyColor, luma ); // extra luminosity on night\n\n\tsky *= day;\n\t//sky = czm_saturation(sky, saturation);\n    //sky = clamp(sky, 0.0, 1.0 );\n\n\n \tgl_FragColor = vec4( sky, 1.0 );\n\n}\n",depthWrite:!1,depthTest:!1,side:1,toneMapped:!1,fog:!1},BS=Math.PI/180;class QS{constructor(e={}){this.mainScene=e.scene,this.renderer=e.renderer,this.usePrem=void 0!==e.usePmrem&&e.usePmrem,this.useBackground=void 0===e.useBackground||e.useBackground,this.envBlur=void 0!==e.envBlur?e.envBlur:0,this.callback=e.callback||null,this.isSky=!1,this.usePrem&&(this.pmremGenerator=new i.PMREMGenerator(this.renderer),this.pmremGenerator.compileEquirectangularShader()),e.cube&&this.initCubeEnv(e),e.url&&this.load(e.url)}initCubeEnv(e={}){this.isCubeEnv=!0,this._quality=e.quality||1,this.scene=new i.Scene,e.color&&(this.scene.background=new i.Color(e.color)),this.target=new i.WebGLCubeRenderTarget(256*this._quality,{minFilter:i.LinearFilter,type:i.HalfFloatType,colorSpace:i.SRGBColorSpace,anisotropy:1}),this.camera=new i.CubeCamera(e.near||.1,e.far||100,this.target),this.mainScene.environment=this.target.texture,this.useBackground&&(this.mainScene.background=this.target.texture)}addSky(){let e=new i.IcosahedronGeometry(20,1);const t=new i.ShaderMaterial(kS);this.sky=new i.Mesh(e,t),this.scene.add(this.sky),this.render(),this.isSky=!0}getSkyOtion(){if(this.isSky)return ES}setSkyOtion(e){if(!this.isSky)return;let t=this.sky.material.uniforms;for(let i in e)t[i]&&(t[i].value=e[i]);this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(this.render.bind(this),0)}render(){if(!this.isCubeEnv)return;const e=this.renderer,t=e.toneMapping;e.toneMapping=i.NoToneMapping,this.camera.update(e,this.scene),e.toneMapping=t}load(e){switch(this.name=e.substring(e.lastIndexOf("/")+1,e.lastIndexOf(".")),this.type=e.substring(e.lastIndexOf(".")+1).toLowerCase(),this.loader=null,this.type){case"hdr":this.loader=(new Ui).load(e,this.end.bind(this),null,this.bug.bind(this));break;case"exr":this.loader=(new zi).load(e,this.end.bind(this),null,this.bug.bind(this))}}bug(){console.log("Envmap is not find :",this.name),this.callback&&this.callback()}end(){let e;switch(this.type){case"hdr":case"exr":e=this.loader,e.mapping=i.EquirectangularReflectionMapping;break;case"jpg":e=this.loader.renderTarget.texture,e.mapping=i.EquirectangularReflectionMapping}this.usePrem&&(e=this.pmremGenerator.fromEquirectangular(e).texture,this.pmremGenerator.dispose()),e.needsUpdate=!0;const t=this.isCubeEnv?this.scene:this.mainScene;(this.isCubeEnv||this.useBackground)&&(t.background=e),this.envBlur&&(t.backgroundBlurriness=this.envBlur),t.environment=e,this.loader.dispose(),this.callback&&this.callback()}get intensity(){return this.mainScene.environmentIntensity}set intensity(e){this.mainScene.environmentIntensity=e}get bgIntensity(){return this.mainScene.backgroundIntensity}set bgIntensity(e){this.mainScene.backgroundIntensity=e}get blur(){return this.mainScene.backgroundBlurriness}set blur(e){this.mainScene.backgroundBlurriness=e}rotate(e=0,t=0,i=0){0!==e&&(e*=BS),0!==t&&(t*=BS),0!==i&&(i*=BS),this.mainScene.environmentRotation.set(e,t,i),this.mainScene.backgroundRotation.set(e,t,i)}}class MS{constructor(e={},t){this.motor=t,this.utils=this.motor.utils,this.id=0,this.type="autoRagdoll",this.name=e.name||this.type+this.id++;let i=this.utils.byName(this.name);i&&this.utils.remove(i),this._mode=e.mode||"follow",this._size=e.size||1,this._debug=e.debug||!1;const s=XO(e.model);let n;s.scale.set(1,1,1).multiplyScalar(this._size),e.pos&&s.position.fromArray(e.pos),s.raycast=function(){},s.name=this.name,s.traverse((t=>{t.isMesh&&(t.frustumCulled=!1),t.isSkinnedMesh&&(t.raycast=function(){},t.frustumCulled=!1,t.matrixAutoUpdate=!1,t.receiveShadow=!0,t.castShadow=!0,e.material&&(t.material=e.material),t.skeleton.resetScalling(),n=t.skeleton.bones)}));let r=e.mass||null;return this.skeletonBody=new qO(this.motor,s.name,s,n,r,e.option),this.debug=this._debug,this.mode=this._mode,s.add(this.skeletonBody),this.model=s,this.utils.add(this),this}getRealPosition(){return this.utils.byName(this.skeletonBody.nodes[0].name).position}dispose(){this.skeletonBody&&this.skeletonBody.dispose(),this.model&&this.model.parent.remove(this.model)}get position(){return model.position}get size(){return this._size}set size(e){this._size=e,this.model.scale.set(1,1,1).multiplyScalar(this._size)}get debug(){return this._debug}set debug(e){this._debug=e,this.skeletonBody.isVisible(this._debug)}get mode(){return this._mode}set mode(e){this._mode=e,this.skeletonBody.setMode(this._mode)}}const TS=new i.Matrix4,DS=new i.Matrix4;new i.Vector3;let RS=i.Skeleton.prototype;RS.byName=function(e){let t=this.bones.length;for(;t--;)if(this.bones[t].name===e)return this.bones[t];return null},RS.getId=function(e){let t=this.bones.length;for(;t--;)if(this.bones[t].name===e)return t;return null},RS.setExtraRotation=function(e,t,s,n){(e.isBone?e:this.byName(e))&&i.MathUtils.DEG2RAD},RS.setScalling=function(e,t,s,n){let r=e.isBone?e:this.byName(e);r&&(r.scalling=new i.Vector3(t,s,n))},RS.resetScalling=function(e){this.pose(),this.scalled=!0;for(let e=0,t=this.bones.length;e<t;e++)this.bones[e].isPhysics=!1,this.bones[e].phyMtx=new i.Matrix4;e||this.applyScalling()},RS.childScale=function(e,t){if(!this.scalled)return;e.scalling&&t.scale(e.scalling);let i,s=e.children.length,n=0;for(;s--;)i=e.children[n],n++,i.isBone,i.matrixWorld.multiplyMatrices(t,i.matrix)},RS.applyScalling=function(e){let t,i,s,n=this.bones.length;for(i=0;i<n;i++)t=this.bones[i],s=t.parent||null,null!==s&&s.scalling&&"root"!==t.name&&(t.position.multiply(s.scalling),t.updateMatrixWorld(!0));this.calculateInverses()},RS.update=function(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,s=this.boneTexture;let n,r=e.length,o=0;for(;r--;){n=e[o];const s=n?n.isPhysics?n.phyMtx:n.matrixWorld:DS;this.childScale(n,s),TS.multiplyMatrices(s,t[o]),TS.toArray(i,16*o),o++}null!==s&&(s.needsUpdate=!0)};const PS={PHY:"0.5.0",PHYSX:"5.06.10",HAVOK:"1.2.1",JOLT:"0.35.0",RAPIER:"0.14.0",OIMO:"1.2.4",AMMO:"3.2.6"};class LS extends EO{constructor(e){super(e),this.type="solid"}step(){}}class FS{constructor(e){this.map=new Map,this.motor=e}byName(e){return this.map.has(e)?this.map.get(e):null}add(e,t){if("contact"!==e.type&&!e.isInstance&&e.isObject3D)if(t)t.add(e);else if(e.isButton)this.motor.scene.add(e);else switch(e.type){case"terrain":case"solid":case"joint":case"ray":case"articulation":this.motor.scenePlus.add(e);break;default:this.motor.scene.add(e)}e.isInstance&&e.refName!==e.name&&this.map.set(e.refName,e),this.map.set(e.name,e)}remove(e){e.dispose&&e.dispose(),e.parent&&e.parent.remove(e),e.isInstance&&(e.refName!==e.name&&this.map.delete(e.refName),e.instance.remove(e.id)),this.map.delete(e.name)}noRay(e){e.isObject3D&&(e.raycast=()=>{},e.traverse((e=>{e.isObject3D&&(e.raycast=()=>{})})))}morph(e,t,i){e.morphTargetInfluences&&void 0!==e.morphTargetDictionary[t]&&(e.morphTargetInfluences[e.morphTargetDictionary[t]]=i)}toLocal(e,t,i=!1){i||e.sub(t.position);let s=t.quaternion;return e.applyQuaternion({x:-s._x,y:-s._y,z:-s._z,w:s._w}),e}quatLocal(e,t){t.isObject3D&&t.updateWorldMatrix(!0,!1);let s=(new i.Quaternion).fromArray(e),n=t.quaternion.clone().invert();return s.premultiply(n),s.normalize().toArray()}axisLocal(e,t){t.isObject3D&&t.updateWorldMatrix(!0,!1);let s=(new Matrix3).setFromMatrix4(t.matrixWorld);return(new i.Vector3).fromArray(e).applyMatrix3(s).toArray()}quatToAngular(e,t){t[0]*=-1,t[1]*=-1,t[2]*=-1;let s,n=t[0]*e[3]+t[3]*e[0]+t[1]*e[2]-t[2]*e[1],r=t[1]*e[3]+t[3]*e[1]+t[2]*e[0]-t[0]*e[2],o=t[2]*e[3]+t[3]*e[2]+t[0]*e[1]-t[1]*e[0],a=t[3]*e[3]-t[0]*e[0]-t[1]*e[1]-t[2]*e[2],l=2*Math.acos(a),h=Math.sqrt(1-a*a);s=h<.001?[0,0,0]:[n/h,r/h,o/h];(new i.Vector3).fromArray(s).multiplyScalar(l/1)}refAxis(e,t){let s=(new i.Vector3).fromArray(t),n=new i.Vector3(1,0,0),r=new i.Vector3(0,1,0);Math.abs(t[1])>.9999||n.copy(s).cross(r).normalize(),r.copy(n).cross(s).normalize(),e.makeBasis(n,r,s)}}const US=new class{constructor(e={}){this.geo=new kx,this.mat=new Lx,this.math=gx,this.pool=Os,this.version=PS.PHY,this.Version=PS,this.engine="",this.jointVisible=!1,this.utils=new FS(this),this.viewSize=null,this.debug=!1,this.delta=0;const t=this;let s=!1,r=!1,o=null,a=null,l=null,h=!1,c=!1,d=!1,u=!0,p=!1,f=null,m=!1,g={t1:0,t2:0,t3:0,t4:0},A=null,b=null,v=null,y=!1,w=!0,x=null,O=null,C=0,S=0,I="",E=null,k=null,B=null;const Q=new Ux,M=new Fx(60),T={start:0,end:0,startTime:""};let D=()=>0,R=()=>{},P=()=>{},L=()=>{},F=[],U=[],z=[];const G={fps:60,fixe:!0,full:!1,substep:2,gravity:[0,-9.81,0]};let N=null,V={};this.flow={stamp:0,current:"",key:[],tmp:[],add:[],remove:[]},this.reflow={ray:[],stat:{fps:0,delta:0,ms:0},point:{},velocity:{}};const j={};this.scene=null,this.scenePlus=null,this.garbage=[],this.tmpMesh=[],this.instanceMesh={},this.tmpTex=[],this.disposeTmp=()=>{let e,t,i;for(e in this.tmpMesh){if(i=this.tmpMesh[e],i.children)for(t in i.children)this.disposeMesh(i.children[t]);this.disposeMesh(i),i.parent&&i.parent.remove(i)}for(e in this.tmpMesh=[],this.tmpTex)this.tmpTex[e].dispose();this.tmpTex=[]},this.disposeMesh=e=>{e.geometry&&e.geometry.dispose(),e.dispose&&e.dispose()},this.setStep=e=>{P=e},this.debugMode=e=>{this.setDebugMode(e)},this.setDebugMode=e=>{this.debug=e},this.useRealLight=e=>{this.mat.useRealLight(e)},this.getSetting=()=>G,this.setGravity=e=>{e&&(G.gravity=e),this.post({m:"setGravity",o:{gravity:G.gravity}})},this.set=(e={})=>{G.fixe=void 0===e.fixe||e.fixe,G.full=void 0!==e.full&&e.full,G.gravity=e.gravity?e.gravity:[0,-9.81,0],G.substep=e.substep?e.substep:2,G.fps=e.fps?e.fps:60,e.key&&L(),j.body.setFull(G.full),this.initArray(G.full),S=0,d=h,u=!d,this.jointVisible=e.jointVisible||!1,u&&M.setFramerate(G.fps);const t={...G,ArPos:V,isTimeout:d,outsideStep:u};this.post({m:"set",o:t})},this.activeMouse=(e,t)=>{A||(A=new BC(e,t,this))},this.mouseMode=(e,t)=>{A&&A.setMode(e,t)},this.getTime=()=>Fx.now(),this.readTime=e=>Fx.format_time(e),this.startTime=()=>T.startTime,this.getTimeTest=()=>g,this.setMaxFps=e=>{},this.getMouse=()=>A?A.mouse:null,this.setMaxAnisotropy=e=>{Os.maxAnisotropy=e},this.setAddControl=e=>{L=e},this.setPrevUpdate=e=>{},this.setPostUpdate=e=>{P=null!==e?e:()=>{}},this.setAzimut=e=>{D=e},this.setRenderer=e=>{k=e,Os.renderer=k},this.setKey=(e,t)=>Q.setKey(e,t),this.getKey=()=>Q.key,this.getKey2=()=>Q.key2,this.getAzimut=()=>D(),this.setContent=e=>{m||(B=e,B.add(this.scene),B.add(this.scenePlus),m=!0)},this.message=e=>{let i=e.data;i.Ar&&(N=i.Ar),i.reflow&&(this.reflow=i.reflow,this.reflow.stat.delta&&(S+=this.reflow.stat.delta)),t[i.m](i.o)},this.post=(e,t=null,i=!1)=>{h?(e.o&&("solver"===e.o.type&&(i=!0),void 0!==e.o.solver&&(i=!0)),i?l.postMessage(e,t):"add"===e.m?this.flow.add.push(e.o):"remove"===e.m?this.flow.remove.push(e.o):l.postMessage(e,t)):b({data:e})},this.rayCar=e=>new KC(e,this),this.autoRagdoll=e=>{const t=new MS(e,this);return this.scene.add(t.model),t},this.byName=e=>this.utils.byName(e),this.getScene=()=>this.scene,this.makeView=()=>{},this.resize=e=>{this.viewSize=e},this.init=(e={})=>{"undefined"!=typeof document&&document.currentScript&&document.currentScript.src,T.start=Fx.now();const o=e.compact||!1;let d=document.location.href.replace(/\/[^/]*$/,"/"),u=d.split("/");d=u[0]+"//"+u[2]+"/","https://lo-th.github.io/"===d&&(d="https://lo-th.github.io/phy/");let p=e.path||"";p+=o?"compact/":"build/";let f=e.type||"PHYSX",m=f.toLowerCase(),g=m.charAt(0).toUpperCase()+m.slice(1);if(this.engine=f.toUpperCase(),this.initItems(),Os.materialRoot=this.mat.set.bind(this.mat),e.callback&&(a=e.callback,delete e.callback),h=e.worker||!1,this.scene=new i.Group,this.scene.name="phy_scene",this.scenePlus=new i.Group,this.scenePlus.name="phy_scenePlus",e.scene&&(this.setContent(e.scene),delete e.scene),e.renderer&&(this.setRenderer(e.renderer),delete e.renderer),I=e.envmap||"",r=!!e.useModule&&this.supportModuleWorker(),s=e.useLocal||!1,o)s?r?Os.load(new URL("../"+p+g+".module.hex","undefined"==typeof document&&"undefined"==typeof location?require("url").pathToFileURL(__filename).href:"undefined"==typeof document?location.href:n&&"SCRIPT"===n.tagName.toUpperCase()&&n.src||new URL("Main.min.js",document.baseURI).href),(function(){t.onCompactDone(e)})):Os.load(new URL("../"+p+g+".hex","undefined"==typeof document&&"undefined"==typeof location?require("url").pathToFileURL(__filename).href:"undefined"==typeof document?location.href:n&&"SCRIPT"===n.tagName.toUpperCase()&&n.src||new URL("Main.min.js",document.baseURI).href),(function(){t.onCompactDone(e)})):r?Os.load(d+p+g+".module.hex",(function(){t.onCompactDone(e)})):Os.load(d+p+g+".hex",(function(){t.onCompactDone(e)}));else if(h){l=s?r?new Worker(new URL("./"+g+".module.js","undefined"==typeof document&&"undefined"==typeof location?require("url").pathToFileURL(__filename).href:"undefined"==typeof document?location.href:n&&"SCRIPT"===n.tagName.toUpperCase()&&n.src||new URL("Main.min.js",document.baseURI).href),{type:"module"}):new Worker(new URL("./"+g+".min.js","undefined"==typeof document&&"undefined"==typeof location?require("url").pathToFileURL(__filename).href:"undefined"==typeof document?location.href:n&&"SCRIPT"===n.tagName.toUpperCase()&&n.src||new URL("Main.min.js",document.baseURI).href),{type:"classic"}):r?new Worker(d+p+g+".module.js",{type:"module"}):new Worker(d+p+g+".min.js"),l.postMessage=l.webkitPostMessage||l.postMessage,l.onmessage=this.message;let t=new ArrayBuffer(1);l.postMessage({m:"test",ab:t},[t]),c=!t.byteLength,e.isBuffer=c,this.initPhysics(e)}else e.devMode?this.preLoad(g,e,d):this.preLoadMin(g,e,d)},this.supportModuleWorker=()=>{let e=!1;const t={get type(){e=!0}};try{new Worker("data:,",t).terminate()}finally{return e}},this.onCompactDone=e=>{let t=this.engine.toLowerCase(),i=t.charAt(0).toUpperCase()+t.slice(1),s=r?Os.get(i+".module","H"):Os.get(i,"H");if(h){let t;try{t=new Blob([s],{type:"application/javascript"})}catch(e){window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,t=new BlobBuilder,t.append(s),t=t.getBlob()}l=r?new Worker(URL.createObjectURL(t),{type:"module"}):new Worker(URL.createObjectURL(t)),l.postMessage=l.webkitPostMessage||l.postMessage,l.onmessage=this.message;let i=new ArrayBuffer(1);l.postMessage({m:"test",ab:i},[i]),c=!i.byteLength,e.isBuffer=c,this.initPhysics(e)}else{let i=t.toUpperCase(),n=document.createElement("script");n.language="javascript",n.type="text/javascript",n.charset="utf-8",n.async=!0,n.innerHTML=s,document.getElementsByTagName("head")[0].appendChild(n),b=window[i].engine.message,e.message=this.message,this.initPhysics(e)}},this.loadWasmDirect=(e,t,i,s)=>{let n=document.createElement("script");n.src=s+e,document.body.appendChild(n),n.onload=()=>{this.preLoad(i,t,s)}},this.preLoadMin=(e,t,i)=>{let s=i+"build/"+e+".min.js",n=e.toUpperCase();var r=new XMLHttpRequest;r.open("GET",s),r.overrideMimeType("text/javascript"),r.onreadystatechange=function(){if(4===r.readyState)if(200===r.status||0===r.status){let e=document.createElement("script");e.language="javascript",e.type="text/javascript",e.charset="utf-8",e.async=!0,e.innerHTML=r.responseText,document.getElementsByTagName("head")[0].appendChild(e),b=window[n].engine.message,t.message=this.message,this.initPhysics(t)}else console.error("Couldn't load ["+e+"] ["+r.status+"]")}.bind(this),r.send(null)},this.preLoad=async(e,t,i)=>{let s=i+"build/"+e+".module.js";t.devMode&&(s=i+"src/"+e+".js");let n=await import(s);b=n.engine.message,t.message=this.message,this.initPhysics(t)},this.initPhysics=e=>{""===I?(this.post({m:"init",o:e}),p=!0):this.preloadEnvmap(e)},this.addEnvmap=e=>(E||(E=new QS({renderer:k,scene:B,...e})),E),this.preloadEnvmap=e=>{E=new QS({url:I,renderer:k,scene:B,usePmrem:e.usePmrem,useBackground:void 0===e.useBackground||e.useBackground,envBlur:void 0!==e.envBlur?e.envBlur:0,callback:()=>{I="",this.initPhysics(e)}})},this.getPause=()=>y,this.pause=e=>{e!==y&&(y=e,y?this.pausetimout():this.playtimout(),this.post({m:"pause",o:{value:y}}))},this.flowReset=()=>{this.flow={stamp:0,current:"",key:[],tmp:[],add:[],remove:[]}},this.reset=e=>{if(w)return w=!1,void e();F=[],o=null,v&&v.resetAll(),A&&A.unSelect(),R=e,P=function(){},this.clearText(),this.clearParticleSolver(),this.cleartimout(),this.flowReset(),this.clearInstance(),this.resetItems(),this.geo.dispose(),this.mat.dispose(),this.disposeTmp(),this.garbage=[],null!==f&&(f=null),this.scenePlus.children=[],this.scene.children=[],this.post({m:"reset"})},this.clearGarbage=()=>{this.remove(this.garbage),this.clearInstance(),this.garbage=[]},this.clear=e=>{this.reset(e)},this.resetCallback=()=>{R()},this.dispose=()=>{this.reset((()=>{l&&(l.terminate(),l=null),m&&(t.scene.parent.remove(t.scene),t.scenePlus.parent.remove(t.scenePlus),m=!1)}))},this.ready=()=>{T.end=Fx.now(),T.startTime=Fx.format_time(T.end-T.start),console.log("%c"+this.engine+" %c"+PS[this.engine]+"%c | "+(r?"Module ":"")+(h?"Worker":"Direct")+" "+T.startTime,"font-size:16px","font-size:12px","font-size:12px"),a&&a()},this.start=(e={})=>{this.post({m:"start",o:e})},this.morph=(e,t,i)=>{this.utils.morph(e,t,i)},this.getFps=()=>this.reflow.stat.fps,this.getMs=()=>this.reflow.stat.ms.toFixed(1),this.getDelta2=()=>this.delta,this.getElapsedTime2=()=>S,this.setDelta=e=>{M.delta=e},this.getDelta=()=>M.delta,this.getElapsedTime=()=>M.elapsedTime,this.doStep=e=>{p&&u&&M.up(e)&&this.post({m:"step",o:e})},this.step=()=>{this.delta=this.reflow.stat.delta,this.flow.key=Q.update(),this.flow.current=null!==o?o.name:"",this.stepItems(),A&&A.step(),null!==f&&f.step(),null!==o&&o.move();let e=u?M.delta:this.delta;P(e),this.changes(this.flow.tmp),c?this.post({m:"poststep",flow:this.flow,Ar:N},[N.buffer]):this.post({m:"poststep",flow:this.flow}),this.flowReset()},this.initArray=(e=!1)=>{V={...Ix(this.engine,e)}},this.takeControl=(e=null)=>{this.control(e)},this.control=(e=null)=>{null!==o?null===e?(o.isPlayer&&(o.isPlayer=!1),o=null):e!==o.name&&(o=this.byName(e),o&&(o.isPlayer=!0)):null!==e&&(o=this.byName(e),o&&(o.isPlayer=!0))},this.getAllBody=e=>j.body.list,this.initItems=()=>{j.body=new EO(t),j.ray=new Nx(t),j.joint=new TO(t),j.solid=new LS(t),j.contact=new DO(t),j.terrain=new bC(t),j.character=new pC(t),"PHYSX"!==this.engine&&"AMMO"!==this.engine||(j.vehicle=new LO(t)),"PHYSX"===this.engine&&(j.solver=new yC(t))},this.getBodyRef=()=>j.body,this.getCharacterRef=()=>j.character,this.getGeometryRef=(e,t,i)=>{j.body.geometry(e,t,i)},this.clearBody=()=>{j.body.reset()},this.resetItems=()=>{Object.values(j).forEach((e=>e.reset()))},this.stepItems=()=>{Object.values(j).forEach((e=>e.step(N,V[e.type]))),this.upInstance(),this.upButton()},this.upInstance=()=>{Object.values(this.instanceMesh).forEach((e=>e.update()))},this.clearInstance=()=>{Object.values(this.instanceMesh).forEach((e=>e.dispose())),this.instanceMesh={}},this.adds=(e=[],t=!1)=>{let i=e.length,s=0;for(;i--;)this.add(e[s++],t)},this.add=(e={},t=!1)=>{if(e.isObject3D)return this.addDirect(e);if(e.constructor===Array)return this.adds(e,t);if("container"===e.type)return new kC(e,this);void 0!==e.bounce&&(e.restitution=e.bounce),void 0===e.type&&(e.type="box"),void 0!==e.mode&&(e.type="joint");let i=function(e){switch(e.type){case"plane":case"box":case"sphere":case"highSphere":case"customSphere":case"cylinder":case"stair":case"particle":case"cone":case"capsule":case"mesh":case"convex":case"compound":case"null":return e.mass||e.density||e.kinematic?"body":"solid";case"fixe":case"generic":case"universal":case"dof":case"d6":case"hinge":case"revolute":case"prismatic":case"cylindrical":case"slider":case"spherical":case"ragdoll":case"distance":return"joint";default:return e.type}}(e);"joint"===i&&void 0===e.mode&&(e.mode=e.type,e.type="joint");let s=j[i].add(e);return this.garbage.push(s.name),s},this.addDirect=e=>(this.scenePlus.add(e),this.tmpMesh.push(e),e),this.removes=(e=[],t)=>{let i=e.length,s=0;for(;i--;)this.remove(e[s++],t)},this.remove=(e,t=!1)=>{if(e.constructor===Array)return this.removes(e,t);let i=this.byName(e);null!==i?"autoRagdoll"!==i.type?(i.extraRemove&&i.extraRemove(),j[i.type].clear(i),this.post({m:"remove",o:{name:e,type:i.type}},null,t)):this.utils.remove(i):this.instanceMesh[e]&&j.body.clearInstance(e)},this.changes=(e=[],t=!1)=>{let i=e.length,s=0;for(;i--;)this.changeOne(e[s++],t)},this.change=(e,t=!1)=>{t?e instanceof Array?this.changes(e,!0):this.changeOne(e,!0):e instanceof Array?this.flow.tmp.push(...e):this.flow.tmp.push(e)},this.changeOne=(e={},t=!1)=>{if(e.heightData)return;let i=this.byName(e.name);if(null===i)return null;let s=i.type;switch(e.drivePosition&&void 0!==e.drivePosition.rot&&(e.drivePosition.quat=gx.quatFromEuler(e.drivePosition.rot),delete e.drivePosition.rot),void 0!==e.rot&&(e.quat=gx.quatFromEuler(e.rot),delete e.rot),void 0!==e.localRot&&(e.quat=gx.toLocalQuatArray(e.localRot,i),delete e.localRot),s){case"terrain":i=j.terrain.set(e,i),t=!1;break;case"ray":i=j.ray.set(e,i),t=!1;break;case"character":i=j.character.set(e,i);break;case"solid":i=j.solid.set(e,i);break;case"joint":i=j.joint.set(e,i);break;case"body":i.isKinematic&&j.body.set(e,i),i.actif&&!i.sleep||j.body.set(e,i),e.sleep&&j.body.set(e,i)}t&&this.post({m:"change",o:e},null,t)},this.setControl=e=>{v=e,D=v.getAzimuthalAngle},this.getCurrentCharacterPosition=()=>v.followGroup.position,this.getCamera=(e={})=>v.object,this.setCamera=(e={})=>{v.moveCam(e)},this.follow=(e="",t={})=>{let i=null;"string"==typeof e||e instanceof String?i=""===e?null:this.byName(e):e.isObject3D&&(i=e),null===i?v.resetFollow():v.startFollow(i,t)},this.setTimeout=(e,t=0,i=!1)=>{i?x=setTimeout(e,t):(O=e,C=t,x=setTimeout(O,C))},this.playtimout=()=>{null!==O&&(x=setTimeout(O,C))},this.pausetimout=()=>{null!==x&&clearTimeout(x)},this.cleartimout=(e,t)=>{null!==x&&(O=null,C=0,clearTimeout(x),x=null)},this.texture=(e={})=>Os.texture(e),this.getTexture=(e,t={})=>Os.getTexture(e,t),this.setExtendShader=e=>{this.mat.extendShader=e},this.addMaterial=(e,t)=>{this.mat.set(e,t)},this.directIntensity=e=>{},this.setEnvmapIntensity=e=>{},this.getMatRef=()=>this.mat,this.getMat=e=>this.mat.get(e),this.getMaterial=e=>this.mat.get(e),this.getMaterialList=()=>this.mat.getList(),this.material=(e={})=>this.mat.create(e),this.changeRenderMode=e=>this.mat.changeRenderMode(e),this.load=Os.load,this.get=Os.get,this.getGroup=Os.getGroup,this.getScript=Os.getScript,this.preload=(e,t)=>{cC.add(e,t)},this.applyMorph=(e,t=null,i=!0,s=!0)=>{Os.applyMorph(e,null,!0,!0)},this.getMesh=(e,t,i)=>{if(t){let t=Os.getMaterials(e);for(let e in t)this.addMaterial(t[e])}return Os.getMesh(e,i)},this.getGlb=(e,t,i)=>{if(t){let t=Os.getMaterials(e);for(let e in t)this.addMaterial(t[e])}return Os.getGLB(e,i)},this.getGlbMaterial=e=>{let t=Os.getMaterials(e);return this.mat.addToMat(t),t},this.poolDispose=()=>Os.dispose(),this.setDracoPath=e=>Os.dracoPath=e,this.initParticle=()=>{},this.addParticle=()=>{},this.getParticle=()=>{},this.addParticleSolver=e=>{let t=new zC(e,this);return z.push(t),t},this.updateParticleSolver=()=>{let e=z.length;for(;e--;)z[e].update()},this.clearParticleSolver=()=>{z.length,z=[]},this.addRayCar=e=>new KC(e,this),this.addButton=e=>{let t=new SC(e,this);return F.push(t),t},this.upButton=e=>{for(const e in F)F[e].update()},this.addText=e=>{let t=new OC(e);return e.parent?e.parent.add(t):this.scenePlus.add(t),U.push(t),t},this.clearText=()=>{let e=U.length;for(;e--;)U[e].dispose();U=[]},this.screenshot=()=>{var e=window.open("","");e.document.title="Screenshot",e.document.body.style.cssText="margin:0; padding:0; overflow:hidden;";var t=new Image;k.render(B,this.getCamera()),t.src=k.domElement.toDataURL(),e.document.body.appendChild(t)},this.addBreaker=()=>{null===f&&(f=new DC(this))},this.explosion=(e=[0,0,0],t=10,s=1)=>{let n=[],r=new i.Vector3;e&&(e.isVector3?r.copy(e):r.fromArray(e));let o,a,l=new i.Vector3,h=j.body.list.length;for(;h--;)o=j.body.list[h],l.copy(o.position).sub(r),a=1-l.length()/t,o.isKinematic||a<0||(l.setLength(a),l.multiplyScalar(s),n.push({name:o.name,impulse:l.toArray(),wake:!0}));this.change(n)}}set onStep(e){this.setStep(e)}},zS={getColor(e){let t=e.toString();t=t.substring(t.lastIndexOf(".")+1);let i,s=[255,255,255];switch(t){case"grass":s=[.223,.827,.325],i=[.741,.498,.258];break;case"dirt":s=[.741,.498,.258];break;case"leaves":s=[.152,.682,.376];break;case"sand":s=[.878,.819,.686];break;case"ice":s=[.65,.882,.96];break;case"stone":s=[.537,.64,.65];break;case"cobblestone":s=[.666,.647,.588];break;case"wood":s=[.603,.321,.152];break;case"snow":s=[.905,.976,1]}return i?[s[0],s[1],s[2],i[0],i[1],i[2]]:[s[0],s[1],s[2]]},fire:{type:"star",numParticles:20,position:[0,0,0],colors:[1,1,0,0,1,1,0,1,1,0,0,1,1,0,0,1,1,0,0,.5,0,0,0,0],lifeTime:2,timeRange:2,startSize:.3,endSize:.9,velocity:[0,.8,0],velocityRange:[.15,.15,.15],gravity:[0,-.2,0],spinSpeedRange:4},smoke:{position:[-2,-.2,0],colors:[0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0],numParticles:20,lifeTime:2,timeRange:2,startSize:.5,endSize:2,velocity:[0,1.6,0],velocityRange:[.2,0,.2],gravity:[0,-.25,0],spinSpeedRange:4,blending:"normal"},addBlock:{type:"cube",numParticles:30,lifeTime:1.5,endTime:1.5,startTime:0,startSize:.25,endSize:.5,sizeRange:.25,spinSpeedRange:2,radius:.25,velocity:[1,0,1],velocityRange:[.25,0,.25],acceleration:[1,0,1],accelerationRange:[.25,0,.25],gravity:[0,.05,0],tween:"outQuad",blending:"normal",alphaTest:.1},removeBlock:{type:"cube",lifeTime:1.5,endTime:1.5,startTime:0,startSize:.5,sizeRange:.25,endSize:.1,spinSpeedRange:2,accelerationRange:[.5,.5,.5],gravity:[0,-.1,0],tween:"outQuad",blending:"normal",alphaTest:.1},explosion:{colors:[1,0,0,0,1,0,0,1,1,0,0,1,1,1,0,1,1,1,1,.5,1,1,1,0],type:"cloud",radius:.5,radiusRange:.5,numParticles:400,positionRange:[2,1,2],lifeTime:3,endTime:4,lifeTimeRange:1,startTime:0,startSize:.1,endSize:2,sizeRange:1,accelerationRange:[1,.3,1],acceleration:[.8,.8,.8],gravity:[0,-.5,0],spinSpeedRange:2,luma:!1},playerMove:{trail:!0,colors:[1,1,1,1,.2,.2,.2,0],type:"round",blending:"normal",numParticles:4,maxParticles:1e3,positionRange:[.2,0,.2],lifeTime:1.5,startSize:.5,endSize:1,sizeRange:.25,velocityRange:[.6,0,.6],gravity:[0,.1,0]},vehicleMove:{trail:!0,colors:[.5,.5,.5,.25,.2,.2,.2,0],type:"round",blending:"normal",numParticles:4,maxParticles:2e3,positionRange:[.25,0,.25],lifeTime:1.5,startSize:.5,endSize:1,sizeRange:.25,velocityRange:[.6,0,.6],gravity:[0,.2,0]},vehicleTrack:{trail:!0,colors:[.2,.2,.2,.1,.2,.2,.2,0],type:"Round2",blending:"normal",startSize:.3,endSize:.3,numParticles:4,maxParticles:2e3,position:[0,-.1,0],lifeTime:6,oriented:!0},underWater:{trail:!0,colors:[1,1,1,1,.5,.5,1,0],type:"bubble",blending:"normal",numParticles:1,maxParticles:1e3,positionRange:[.25,0,.25],lifeTime:1.5,startSize:.1,endSize:.5,sizeRange:.05,velocity:[0,1,0],velocityRange:[1,0,1],acceleration:[.2,0,.2],gravity:[0,1,0]},bazookaFire:{trail:!0,colors:[1,0,0,1,1,1,0,.5,1,1,1,0],type:"round",numParticles:2,maxParticles:600,positionRange:[.1,.1,.1],lifeTime:1.5,startSize:.5,endSize:1,sizeRange:.1,velocityRange:[.6,.6,.6],gravity:[0,.1,0],luma:!1}},GS=["pixel","basic","cube","cloud","round","round2","donut","bubble","smoke","circle","field","star","octo"];function NS(){this.parent=null,this.position=[0,0,0],this.rotation=[0,0,0],this.name="default",this.type="round",this.tween="linear",this.trail=!1,this.model="",this.numParticles=1,this.maxParticles=0,this.numFrames=1,this.frameDuration=1,this.frameStart=0,this.frameStartRange=0,this.timeRange=99999999,this.startTime=null,this.lifeTime=1,this.endTime=-1,this.lifeTimeRange=0,this.sizeRange=0,this.startSize=1,this.startSizeRange=0,this.endSize=1,this.endSizeRange=0,this.pposition=[0,0,0],this.positionRange=[0,0,0],this.velocity=[0,0,0],this.velocityRange=[0,0,0],this.acceleration=[0,0,0],this.accelerationRange=[0,0,0],this.spinStart=0,this.spinStartRange=0,this.spinSpeed=0,this.spinSpeedRange=0,this.colorMult=[1,1,1,1],this.colorMultRange=[0,0,0,0],this.worldVelocity=[0,0,0],this.gravity=[0,0,0],this.oriented=!1,this.orientation=[0,0,0,1],this.colors=[1,1,1,1],this.blending="additive",this.radius=0,this.axis="Y",this.radiusRange=0,this.tmpRotation=null,this.alphaTest=0,this.renderOrder=0,this.luma=!0,this.depthWrite=!1,this.transparent=!0}const VS={torad:Math.PI/180,todeg:180/Math.PI,random:()=>Math.random(),rand:(e,t)=>e+VS.random()*(t-e),randInt:(e,t)=>e+Math.floor(VS.random()*(t-e+1)),plusMinus:e=>(VS.random()-.5)*e*2,plusMinusVector:e=>{const t=[];let i=e.length;for(;i--;)t.push(VS.plusMinus(e[i]));return t},toTexture:e=>{let t=new i.Texture(e);return t.minFilter=i.LinearFilter,t.magFilter=i.LinearFilter,t.flipY=!1,t.colorSpace=i.SRGBColorSpace,t.needsUpdate=!0,t},createTextureFromFloats:(e,t,s,n)=>{let r=null;if(null==n){const n=new Uint8Array(s.length);let o;for(let e=0;e<s.length;e++)o=255*s[e],n[e]=o;return r=new i.DataTexture(n,e,t,i.RGBAFormat),r.minFilter=i.LinearFilter,r.magFilter=i.LinearFilter,r.needsUpdate=!0,r}return r=n,r}},jS=function(e){let t;switch(e){case"linear":t="float tween( float k ) { return k; }";break;case"inQuad":t="float tween( float k ) { return k * k; }";break;case"outQuad":t="float tween( float k ) { return k * ( 2.0 - k ); }";break;case"inOutQuad":t="float tween( float k ) { \n\t\t\tif ( ( k *= 2.0 ) < 1.0 ) return 0.5 * k * k;\n            return - 0.5 * ( --k * ( k - 2.0 ) - 1.0 ); \n        }";break;case"inCubic":t="float tween( float k ) { return k * k * k; }";break;case"outCubic":t="float tween( float k ) { return --k * k * k + 1.0; }";break;case"inOutCubic":t="float tween( float k ) { \n\t\t\tif ( ( k *= 2.0 ) < 1.0 ) return 0.5 * k * k * k;\n\t\t\treturn 0.5 * ( ( k -= 2.0 ) * k * k + 2.0 ); \n        }";break;case"inQuart":t="float tween( float k ) { return k * k * k * k; }";break;case"outQuart":t="float tween( float k ) { return 1.0 - ( --k * k * k * k ); }";break;case"inOutQuart":t="float tween( float k ) { \n\t\t\tif ( ( k *= 2.0 ) < 1.0) return 0.5 * k * k * k * k;\n\t\t\treturn - 0.5 * ( ( k -= 2.0 ) * k * k * k - 2.0 ); \n        }";break;case"inQuint":t="float tween( float k ) { return k * k * k * k * k; }";break;case"outQuint":t="float tween( float k ) { return --k * k * k * k * k + 1.0; }";break;case"inOutQuint":t="float tween( float k ) { \n\t\t\tif ( ( k *= 2.0 ) < 1.0 ) return 0.5 * k * k * k * k * k;\n\t\t\treturn 0.5 * ( ( k -= 2.0 ) * k * k * k * k + 2.0 );\n        }";break;case"inSine":t="#define PI_90 1.570796326794896\n        float tween( float k ) { float j = k * PI_90; return 1.0 - cos( j ); }";break;case"outSine":t="#define PI_90 1.570796326794896\n\t\tfloat tween( float k ) { float j = k * PI_90; return sin( j ); }";break;case"inOutSine":t="#define M_PI 3.14159265358979323846\n\t\tfloat tween( float k ) { \n\t\t\tfloat j = k * M_PI; return 0.5 * (1.0-cos(j));\n        }";break;case"inExpo":t="float tween( float k ) { return k == 0.0 ? 0.0 : pow( 1024.0, k - 1.0 ); }";break;case"outExpo":t="float tween( float k ) { return k == 1.0 ? 1.0 : 1.0 - pow( 2.0, - 10.0 * k ); }";break;case"inOutExpo":t="float tween( float k ) { \n\t\t\tif ( k == 0.0 ) return 0.0;\n\t\t    if ( k == 1.0 ) return 1.0;\n\t\t    if ( ( k *= 2.0 ) < 1.0 ) return 0.5 * pow( 1024.0, k - 1.0 );\n\t\t    return 0.5 * ( - pow( 2.0, - 10.0 * ( k - 1.0 ) ) + 2.0 );\n        }";break;case"inCirc":t="float tween( float k ) { return 1.0 - sqrt( 1.0 - k * k ); }";break;case"outCirc":t="float tween( float k ) { return sqrt( 1.0 - ( --k * k ) ); }";break;case"inOutCirc":t="float tween( float k ) { \n\t\t\tif ( ( k *= 2.0 ) < 1.0) return - 0.5 * ( sqrt( 1.0 - k * k ) - 1.0 );\n\t\t\treturn 0.5 * ( sqrt( 1.0 - ( k -= 2.0 ) * k ) + 1.0 ); \n        }";break;case"inElastic":t="#define TWO_PI 6.28318530717958647692\n        float tween(float k) {\n\t\t    float s;\n\t\t    float a = 0.1;\n\t\t    float p = 0.4;\n\t\t    if ( k == 0.0 ) return 0.0;\n\t\t    if ( k == 1.0 ) return 1.0;\n\t\t    if ( a < 1.0 ) { a = 1.0; s = p * 0.25; }\n\t\t    else s = p * asin( 1.0 / a ) / TWO_PI;\n\t\t    return - ( a * pow( 2.0, 10.0 * ( k -= 1.0 ) ) * sin( ( k - s ) * TWO_PI / p ) );\n\t\t}";break;case"outElastic":t="#define TWO_PI 6.28318530717958647692\n\t\tfloat tween(float k) {\n\t\t    float s;\n\t\t    float a = 0.1; \n\t\t    float p = 0.4;\n\t\t    if ( k == 0.0 ) return 0.0;\n\t\t    if ( k == 1.0 ) return 1.0;\n\t\t    if ( a < 1.0 ) { a = 1.0; s = p * 0.25; }\n\t\t    else s = p * asin( 1.0 / a ) / TWO_PI;\n\t\t    return ( a * pow( 2.0, - 10.0 * k) * sin( ( k - s ) * TWO_PI / p ) + 1.0 );\n\t\t}";break;case"inOutElastic":t="#define TWO_PI 6.28318530717958647692\n\t\tfloat tween(float k) {\n\t\t    float s;\n\t\t    float a = 0.1;\n\t\t    float p = 0.4;\n\t\t    if ( k == 0.0 ) return 0.0;\n\t\t    if ( k == 1.0 ) return 1.0;\n\t\t    if ( a < 1.0 ) { a = 1.0; s = p * 0.25; }\n\t\t    else s = p * asin( 1.0 / a ) / TWO_PI;\n\t\t    if ( ( k *= 2.0 ) < 1.0 ) return - 0.5 * ( a * pow( 2.0, 10.0 * ( k -= 1.0 ) ) * sin( ( k - s ) * TWO_PI / p ) );\n\t\t    return a * pow( 2.0, -10.0 * ( k -= 1.0 ) ) * sin( ( k - s ) * TWO_PI / p ) * 0.5 + 1.0;\n\t\t}";break;case"inBack":t="float tween(float k) {\n\t\t    float s = 1.70158;\n\t\t    return k * k * ( ( s + 1.0 ) * k - s );\n\t\t}";break;case"outBack":t="float tween(float k) {\n\t\t    float s = 1.70158;\n\t\t    return --k * k * ( ( s + 1.0 ) * k + s ) + 1.0;\n\t\t}";break;case"inOutBack":t="float tween(float k) {\n\t\t    float s = 1.70158 * 1.525;\n\t\t    if ( ( k *= 2.0 ) < 1.0 ) return 0.5 * ( k * k * ( ( s + 1.0 ) * k - s ) );\n\t\t    return 0.5 * ( ( k -= 2.0 ) * k * ( ( s + 1.0 ) * k + s ) + 2.0 );\n\t\t}";break;case"inBounce":t="float outBounce(float k) {\n\t\t    if ( k < ( 1.0 / 2.75 ) ) return 7.5625 * k * k;\n\t\t    else if ( k < ( 2.0 / 2.75 ) ) return 7.5625 * ( k -= ( 1.5 / 2.75 ) ) * k + 0.75;\n\t\t    else if ( k < ( 2.5 / 2.75 ) ) return 7.5625 * ( k -= ( 2.25 / 2.75 ) ) * k + 0.9375;\n\t\t    else return 7.5625 * ( k -= ( 2.625 / 2.75 ) ) * k + 0.984375;\n\t\t}\n\t\tfloat tween(float k) { return 1.0 - outBounce( 1.0 - k ); }";break;case"outBounce":t="float tween(float k) {\n\t\t    if ( k < ( 1.0 / 2.75 ) ) return 7.5625 * k * k;\n\t\t    else if ( k < ( 2.0 / 2.75 ) ) return 7.5625 * ( k -= ( 1.5 / 2.75 ) ) * k + 0.75;\n\t\t    else if ( k < ( 2.5 / 2.75 ) ) return 7.5625 * ( k -= ( 2.25 / 2.75 ) ) * k + 0.9375;\n\t\t    else return 7.5625 * ( k -= ( 2.625 / 2.75 ) ) * k + 0.984375;\n\t\t}";break;case"inOutBounce":t="float outBounce(float k) {\n\t\t    if ( k < ( 1.0 / 2.75 ) ) return 7.5625 * k * k;\n\t\t    else if ( k < ( 2.0 / 2.75 ) ) return 7.5625 * ( k -= ( 1.5 / 2.75 ) ) * k + 0.75;\n\t\t    else if ( k < ( 2.5 / 2.75 ) ) return 7.5625 * ( k -= ( 2.25 / 2.75 ) ) * k + 0.9375;\n\t\t    else return 7.5625 * ( k -= ( 2.625 / 2.75 ) ) * k + 0.984375;\n\t\t}\n\t\tfloat inBounce(float k) { return 1.0 - outBounce( 1.0 - k ); }\n\t\tfloat tween(float k) {\n\t\t    if ( k < 0.5 ) return inBounce( k * 2.0 ) * 0.5;\n\t\t    return outBounce( k * 2.0 - 1.0 ) * 0.5 + 0.5;\n\t\t}"}return t},HS=[[-.5,-.5],[.5,-.5],[.5,.5],[-.5,.5]],qS=new Float32Array(28);class XS extends i.Points{constructor(e,t){super(),this.pe=e,this.count=0,this.color=null,this.texture=null,this.localTime=0,this.time=0,this.endTime=-1,this.num=0,this.matrixAutoUpdate=!1,this.frustumCulled=!1,this.receiveShadow=!1,this.castShadow=!1,this.birthIndex=0,this.luma=!0,t&&this.setParameters(t)}setParameters(e){this.validateParameters(e),this.geometry&&this.geometry.dispose(),this.material&&this.material.dispose(),this.name=e.name,this.isTrail=e.trail||!1,this.parameters=e;const t=this.isTrail?e.maxParticles:e.numParticles;this.allocateParticles_(t,e),this.isTrail||this.createParticles_(0,t,e),e.parent?e.parent.add(this):this.pe.scene.add(this)}makeGeometry(e){this.geometry=e.oriented?new i.InstancedBufferGeometry:new i.BufferGeometry,this.isMesh=e.oriented}setColorRamp(e){const t=e.length/4;if(t%1!=0)throw"colorRamp must have multiple of 4 entries";this.color=VS.createTextureFromFloats(t,1,e)}validateParameters(e){var t=new NS;for(let i in e)if(void 0===t[i])throw'unknown particle parameter "'+i+'"';for(let i in t)void 0===e[i]&&(e[i]=t[i])}perParticle(e,t){}birthParticles(e,t){var i=this.parameters.numParticles;this.parameters.pposition=e,this.parameters.startTime=this.time,this.endTime=this.time+this.parameters.lifeTime,t&&this.setColorRamp(t),this.createParticles_(this.birthIndex,i,this.parameters),this.birthIndex+=i,this.birthIndex+i>=this.parameters.maxParticles&&(this.birthIndex=0)}createParticles_(e,t,s){const n=VS.plusMinus,r=VS.plusMinusVector,o=this.interleavedBuffer.array;let a,l=t;for(;l--;){this.perParticle(l,s);let h=s.lifeTime+n(s.lifeTimeRange),c=null===s.startTime?l*s.lifeTime/t:s.startTime,d=s.frameStart+n(s.frameStartRange),u=(new i.Vector3).addVectors((new i.Vector3).fromArray(s.pposition),(new i.Vector3).fromArray(r(s.positionRange))),p=(new i.Vector3).addVectors((new i.Vector3).fromArray(s.velocity),(new i.Vector3).fromArray(r(s.velocityRange))),f=(new i.Vector3).addVectors((new i.Vector3).fromArray(s.acceleration),(new i.Vector3).fromArray(r(s.accelerationRange))),m=(new i.Vector4).addVectors((new i.Vector4).fromArray(s.colorMult),(new i.Vector4).fromArray(r(s.colorMultRange))),g=s.spinStart+n(s.spinStartRange),A=s.spinSpeed+n(s.spinSpeedRange),b=s.startSize+n(s.sizeRange||s.startSizeRange),v=s.endSize+n(s.sizeRange||s.endSizeRange),y=(new i.Vector4).fromArray(s.orientation);if(s.positionRange[0],s.positionRange[1],s.positionRange[2],s.radius){let e=s.axis||"Y",t=VS.rand(0,2*Math.PI);s.tmpRotation=[90,-t*VS.todeg,90,"YXZ"];let r=s.radius+n(s.radiusRange),o=Math.cos(t),a=Math.sin(t),l=new i.Vector3;switch(e){case"X":l.y=o,l.z=a;break;case"Y":l.x=o,l.z=a;break;case"Z":l.x=o,l.y=a}switch(l.multiplyScalar(r),e){case"X":l.x=1;break;case"Y":l.y=1;break;case"Z":l.z=1}f.multiply(l),p.multiply(l)}s.tmpRotation&&(y=(new i.Quaternion).setFromEuler(new i.Euler(s.tmpRotation[0]*VS.torad,s.tmpRotation[1]*VS.torad,s.tmpRotation[2]*VS.torad,s.tmpRotation[3]))),a=0+28*l*4+28*e*4,o[0+a]=u.x,o[0+a+1]=u.y,o[0+a+2]=u.z,o[0+a+3]=c,o[4+a]=HS[0][0],o[4+a+1]=HS[0][1],o[4+a+2]=h,o[4+a+3]=d,o[8+a]=p.x,o[8+a+1]=p.y,o[8+a+2]=p.z,o[8+a+3]=b,o[12+a]=f.x,o[12+a+1]=f.y,o[12+a+2]=f.z,o[12+a+3]=v,o[16+a]=g,o[16+a+1]=A,o[16+a+2]=0,o[16+a+3]=0,o[20+a]=y.x,o[20+a+1]=y.y,o[20+a+2]=y.z,o[20+a+3]=y.w,o[24+a]=m.x,o[24+a+1]=m.y,o[24+a+2]=m.z,o[24+a+3]=m.w}this.interleavedBuffer.needsUpdate=!0,this.material.uniforms.worldVelocity.value.fromArray(s.worldVelocity),this.material.uniforms.gravity.value.fromArray(s.gravity),this.material.uniforms.timeRange.value=s.timeRange,this.material.uniforms.frameDuration.value=s.frameDuration,this.material.uniforms.numFrames.value=s.numFrames,this.material.uniforms.rampSampler.value=this.color,this.material.uniforms.colorSampler.value=this.texture,this.material.blending="normal"===s.blending?i.NormalBlending:i.AdditiveBlending,this.updateMatrix()}allocateParticles_(e,t){if(this.count!==e){if(t.oriented||(t.oriented=!1),t.position&&this.position.fromArray(t.position),t.rotation&&this.quaternion.setFromEuler(new i.Euler(t.rotation[0]*VS.torad,t.rotation[1]*VS.torad,t.rotation[2]*VS.torad)),this.setColorRamp(t.colors),this.pe.textures.has(t.type)||-1!==GS.indexOf(t.type)&&this.pe.textures.make(t.type),this.texture=this.pe.textures.get(t.type),this.texture||console.log("this texture is undefined !!"),this.endTime=t.endTime||-1,this.luma=t.luma,this.makeGeometry(t),this.count=e,t.oriented){var s=new i.InterleavedBuffer(new Float32Array([0,0,0,0,-.5,-.5,0,0,0,0,0,0,.5,-.5,0,0,0,0,0,0,.5,.5,0,0,0,0,0,0,-.5,.5,0,0]),8);this.geometry.setAttribute("position",new i.InterleavedBufferAttribute(s,3,0)),this.geometry.setAttribute("uv",new i.InterleavedBufferAttribute(s,2,4)),this.geometry.setIndex(new i.BufferAttribute(new Uint16Array([0,1,2,0,2,3]),1)),this.interleavedBuffer=new i.InstancedInterleavedBuffer(new Float32Array(e*qS.byteLength),28,1).setUsage(i.DynamicDrawUsage)}else this.interleavedBuffer=new i.InterleavedBuffer(new Float32Array(e*qS.byteLength),28).setUsage(i.DynamicDrawUsage);this.geometry.setAttribute("position",new i.InterleavedBufferAttribute(this.interleavedBuffer,3,0)),this.geometry.setAttribute("startTime",new i.InterleavedBufferAttribute(this.interleavedBuffer,1,3)),this.geometry.setAttribute("uvLifeTimeFrameStart",new i.InterleavedBufferAttribute(this.interleavedBuffer,4,4)),this.geometry.setAttribute("velocityStartSize",new i.InterleavedBufferAttribute(this.interleavedBuffer,4,8)),this.geometry.setAttribute("accelerationEndSize",new i.InterleavedBufferAttribute(this.interleavedBuffer,4,12)),this.geometry.setAttribute("spinStartSpinSpeed",new i.InterleavedBufferAttribute(this.interleavedBuffer,4,16)),this.geometry.setAttribute("orientation",new i.InterleavedBufferAttribute(this.interleavedBuffer,4,20)),this.geometry.setAttribute("colorMult",new i.InterleavedBufferAttribute(this.interleavedBuffer,4,24)),this.geometry.boundingSphere=new i.Sphere,this.geometry.boundingSphere.radius=3;let r=i.AdditiveBlending;switch(t.blending){case"sub":case"subtractive":r=i.SubtractiveBlending;break;case"multi":case"multiply":r=i.MultiplyBlending;break;case"normal":r=i.NormalBlending;break;default:r=i.AdditiveBlending}var n={worldVelocity:{value:new i.Vector3},gravity:{value:new i.Vector3},timeRange:{value:0},time:{value:0},timeOffset:{value:0},frameDuration:{value:0},numFrames:{value:0},rampSampler:{value:null},colorSampler:{value:null},scale:{value:.5*window.innerHeight},luma:{value:this.luma?this.pe.luminosity:1},alphaTest:{value:t.alphaTest}};this.material=new i.ShaderMaterial({defines:{USE_ORIENTATION:t.oriented},uniforms:n,vertexShader:(this.pe.isGl2?"":"\nmat4 inverse(mat4 m) {\n\n    float a00 = m[0][0], a01 = m[0][1], a02 = m[0][2], a03 = m[0][3], a10 = m[1][0], a11 = m[1][1], a12 = m[1][2], a13 = m[1][3], a20 = m[2][0], a21 = m[2][1], a22 = m[2][2], a23 = m[2][3], a30 = m[3][0], a31 = m[3][1], a32 = m[3][2], a33 = m[3][3],\n\n    b00 = a00 * a11 - a01 * a10,\n    b01 = a00 * a12 - a02 * a10,\n    b02 = a00 * a13 - a03 * a10,\n    b03 = a01 * a12 - a02 * a11,\n    b04 = a01 * a13 - a03 * a11,\n    b05 = a02 * a13 - a03 * a12,\n    b06 = a20 * a31 - a21 * a30,\n    b07 = a20 * a32 - a22 * a30,\n    b08 = a20 * a33 - a23 * a30,\n    b09 = a21 * a32 - a22 * a31,\n    b10 = a21 * a33 - a23 * a31,\n    b11 = a22 * a33 - a23 * a32,\n\n  det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  return mat4( a11 * b11 - a12 * b10 + a13 * b09, a02 * b10 - a01 * b11 - a03 * b09, a31 * b05 - a32 * b04 + a33 * b03, a22 * b04 - a21 * b05 - a23 * b03, a12 * b08 - a10 * b11 - a13 * b07,\n      a00 * b11 - a02 * b08 + a03 * b07, a32 * b02 - a30 * b05 - a33 * b01, a20 * b05 - a22 * b02 + a23 * b01, a10 * b10 - a11 * b08 + a13 * b06, a01 * b08 - a00 * b10 - a03 * b06,\n      a30 * b04 - a31 * b02 + a33 * b00, a21 * b02 - a20 * b04 - a23 * b00, a11 * b07 - a10 * b09 - a12 * b06, a00 * b09 - a01 * b07 + a02 * b06, a31 * b01 - a30 * b03 - a32 * b00,\n      a20 * b03 - a21 * b01 + a22 * b00) / det;\n}\n")+jS(t.tween||"linear")+"\nprecision mediump float;\nprecision mediump int;\n\n#ifdef USE_ORIENTATION\n\t//uniform mat4 worldViewProjection;\n\t//uniform mat4 world;\n\tattribute vec3 offset;\n\tattribute vec4 orientation;\n#else\n    uniform float scale;\n#endif\n\nuniform vec3 worldVelocity;\nuniform vec3 gravity;\nuniform float timeRange;\nuniform float time;\nuniform float timeOffset;\nuniform float frameDuration;\nuniform float numFrames;\n\nattribute vec4 uvLifeTimeFrameStart;\nattribute float startTime;\nattribute vec4 velocityStartSize;\nattribute vec4 accelerationEndSize;\nattribute vec4 spinStartSpinSpeed;\nattribute vec4 colorMult;\n\nvarying vec2 outputTexcoord;\nvarying float outputPercentLife;\nvarying vec4 outputColorMult;\nvarying mat2 rotationMtx;\n\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n//#include <clipping_planes_pars_vertex>\n\nvec3 lerp( vec3 a, vec3 b, float p ){ return a + (b - a) * p; }\n\nvoid main() \n{\n    float lifeTime = uvLifeTimeFrameStart.z;\n    float frameStart = uvLifeTimeFrameStart.w;\n    float startSize = velocityStartSize.w;\n\n    //vec3 velocity = (modelMatrix * vec4(velocityStartSize.xyz, 0.0)).xyz + worldVelocity;\n\t//vec3 acceleration = (modelMatrix * vec4(accelerationEndSize.xyz, 0.0)).xyz + gravity;\n\n    //vec3 velocity = velocityStartSize.xyz + worldVelocity;\n\t//vec3 acceleration = accelerationEndSize.xyz + gravity;\n\n\tvec3 velocity = velocityStartSize.xyz + (inverse(modelMatrix) * vec4(worldVelocity, 0.0)).xyz;\n\tvec3 acceleration = accelerationEndSize.xyz + (inverse(modelMatrix) * vec4(gravity, 0.0)).xyz;\n\n    float endSize = accelerationEndSize.w;\n    float spinStart = spinStartSpinSpeed.x;\n    float spinSpeed = spinStartSpinSpeed.y;\n\n    float localTime = mod((time - timeOffset - startTime), timeRange);\n    //localTime = tween( localTime );\n    float percentLife = localTime / lifeTime;\n    percentLife = tween( percentLife );\n\n    vec3 posEnd = velocity * lifeTime + acceleration * lifeTime * lifeTime;\n\n    float frame = mod(floor(localTime / frameDuration + frameStart), numFrames);\n    float uOffset = frame / numFrames;\n    float u = uOffset + (uv.x + 0.5) * (1. / numFrames);\n\n    outputTexcoord = vec2(u, uv.y + 0.5);\n    outputColorMult = colorMult;\n\n    float size = mix(startSize, endSize, percentLife);\n\tsize = (percentLife < 0. || percentLife > 1.0) ? 0.0 : size;\n\n\tfloat s = sin(spinStart + spinSpeed * localTime);\n\tfloat c = cos(spinStart + spinSpeed * localTime);\n\n    #ifdef USE_ORIENTATION\n\t\t\n\t\tvec4 rotatedPoint = vec4((uv.x * c + uv.y * s) * size, 0., (uv.x * s - uv.y * c) * size, 1.);\n\t\t//vec3 center = velocity * localTime + acceleration * localTime * localTime + position + offset;\n\t\tvec3 center = (posEnd * percentLife) + position + offset;\n\n\t\tvec4 q2 = orientation + orientation;\n\t\tvec4 qx = orientation.xxxw * q2.xyzx;\n\t\tvec4 qy = orientation.xyyw * q2.xyzy;\n\t\tvec4 qz = orientation.xxzw * q2.xxzz;\n\n\t\tmat4 localMatrix = mat4(\n\t\t    (1.0 - qy.y) - qz.z,  qx.y + qz.w,  qx.z - qy.w, 0,\n\t\t    qx.y - qz.w, (1.0 - qx.x) - qz.z, qy.z + qx.w, 0,\n\t\t    qx.z + qy.w, qy.z - qx.w, (1.0 - qx.x) - qy.y, 0,\n\t\t    center.x, center.y, center.z, 1\n\t\t);\n\t\trotatedPoint = localMatrix * rotatedPoint;\n\t\tgl_Position = projectionMatrix * modelViewMatrix * rotatedPoint;\n\n\t#else\n\n\t    //vec3 pos = position + velocity * localTime + acceleration * localTime * localTime;\n\n\t    vec3 pos = (posEnd * percentLife) + position;\n\t    \n\t    vec4 mvPosition = modelViewMatrix * vec4( pos, 1.0 );\n        //gl_PointSize = size * 1.5 * ( scale / length( mvPosition.xyz ) );\n        gl_PointSize = size * 1.5 * ( scale / - mvPosition.z );\n\n        mat2 r = mat2( c, -s, s, c);\n        r *= 0.5; r += 0.5;  r = r * 2.0 - 1.0;\n        rotationMtx = r;\n\n        gl_Position = projectionMatrix * mvPosition;\n\n\t#endif\n\n\toutputPercentLife = percentLife;\n\n\t#include <logdepthbuf_vertex>\n\t//#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n",fragmentShader:"\nprecision mediump float;\nprecision mediump int;\n\nuniform sampler2D rampSampler;\nuniform sampler2D colorSampler;\nuniform float luma;\nuniform float alphaTest;\n\nvarying vec2 outputTexcoord;\nvarying float outputPercentLife;\nvarying vec4 outputColorMult;\nvarying mat2 rotationMtx;\n\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n//#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t//#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\n\tvec4 diffuseColor = texture2D( rampSampler, vec2(outputPercentLife, 0.5) ) * outputColorMult;\n\n    vec2 uv = vec2(0.0);\n    #ifdef USE_ORIENTATION\n        uv = outputTexcoord;\n\t#else\n\t    uv = gl_PointCoord;\n\t    uv -= 0.5; uv = uv * rotationMtx; uv += 0.5;\n\t#endif\n\n\t// texture\n\tdiffuseColor *= texture2D( colorSampler, uv );\n\n\tif ( diffuseColor.a < alphaTest ) discard;\n\n\tdiffuseColor.rgb *= luma;\n\n\tgl_FragColor = diffuseColor; \n\t#include <fog_fragment>\n\n}\n",side:t.oriented?i.DoubleSide:i.FrontSide,blending:r,depthTest:!0,depthWrite:t.depthWrite,transparent:t.transparent,forceSinglePass:!0}),this.renderOrder=t.renderOrder||0}}draw(e=0){if(!this.material.uniforms)return;const t=this.material.uniforms;this.time+=this.pe.delta,t.time.value=this.time,t.timeOffset.value=e,t.scale.value=this.pe.hscale,t.luma.value=this.luma?this.pe.luminosity:1,-1!==this.endTime&&this.time>=this.endTime&&this.pe.remove(this.name)}dispose(){this.parent.remove(this),this.geometry.dispose(),this.material.dispose(),this.color.dispose()}raycast(){}clone(e){return void 0===e&&(e=this.pe.createEmitter(this.texture)),e.time=0,e.endTime=this.endTime,e.geometry=this.geometry,e.material=this.material.clone(),e.material.uniforms.rampSampler.value=this.color,e.material.uniforms.colorSampler.value=this.texture,super.copy(e),this.num++,e.name=this.name+this.num,e}}class WS extends Map{constructor(){super()}dispose(){this.forEach((e=>{e.dispose()})),this.clear()}add(e,t){this.has(e)||this.set(e,t)}make(e){if(!this.has(e)){let t=this["make"+e[0].toUpperCase()+e.substring(1)]();this.set(e,t)}}makePixel(){const e=[];for(let t=0;t<2;++t)for(let t=0;t<2;++t)e.push(1,1,1,1);return VS.createTextureFromFloats(2,2,e)}makeBasic(){const e=[0,.2,.7,1,.7,.2,0,0],t=[];for(let i=0;i<8;++i)for(let s=0;s<8;++s){let n=e[s]*e[i];t.push(n,n,n,1)}return VS.createTextureFromFloats(8,8,t)}makeCube(){let e=document.createElement("canvas");e.width=e.height=8;const t=e.getContext("2d");return t.fillStyle="rgba(255,255,255,1.0)",t.fillRect(2,2,4,4),VS.toTexture(e)}makeCloud(){let e=16,t=document.createElement("canvas");t.width=t.height=e;const i=t.getContext("2d");let s="rgba(255,255,255,1)",n="rgba(255,255,255,0)",r=i.createRadialGradient(8,6.4,0,8,6.4,6.4);return r.addColorStop(.3,s),r.addColorStop(1,n),i.fillStyle=r,i.fillRect(0,0,e,e),r=i.createRadialGradient(6.4,9.92,0,6.4,9.92,5.6),r.addColorStop(.3,s),r.addColorStop(1,n),i.fillStyle=r,i.fillRect(0,0,e,e),r=i.createRadialGradient(4.32,6.4,0,4.32,6.4,4.16),r.addColorStop(.2,s),r.addColorStop(1,n),i.fillStyle=r,i.fillRect(0,0,e,e),r=i.createRadialGradient(12.16,9.6,0,12.16,9.6,3.68),r.addColorStop(.2,s),r.addColorStop(1,n),i.fillStyle=r,i.fillRect(0,0,e,e),VS.toTexture(t)}makeRound(){let e=document.createElement("canvas");e.width=e.height=16;const t=e.getContext("2d"),i=t.createRadialGradient(8,8,0,8,8,8);return i.addColorStop(0,"rgba(255,255,255,1)"),i.addColorStop(.3,"rgba(255,255,255,0.1)"),i.addColorStop(.9,"rgba(255,255,255,0)"),i.addColorStop(1,"rgba(255,255,255,0)"),t.fillStyle=i,t.fillRect(0,0,16,16),VS.toTexture(e)}makeRound2(){let e=document.createElement("canvas");e.width=e.height=16;const t=e.getContext("2d"),i=t.createRadialGradient(8,8,0,8,8,8);return i.addColorStop(0,"rgba(255,255,255,1)"),i.addColorStop(.9,"rgba(255,255,255,1)"),i.addColorStop(1,"rgba(255,255,255,0)"),t.fillStyle=i,t.fillRect(0,0,16,16),VS.toTexture(e)}makeDonut(){let e=document.createElement("canvas");e.width=e.height=32;const t=e.getContext("2d"),i=t.createRadialGradient(16,16,0,16,16,16);return i.addColorStop(0,"rgba(255,255,255,1)"),i.addColorStop(.9,"rgba(255,255,255,0.1)"),i.addColorStop(1,"rgba(255,255,255,0)"),t.fillStyle=i,t.beginPath(),t.arc(16,16,16,0,2*Math.PI,!1),t.arc(16,16,8,0,2*Math.PI,!0),t.fill(),VS.toTexture(e)}makeBubble(){let e=document.createElement("canvas");e.width=e.height=64;let t="rgba(0,255,255,0)";const i=e.getContext("2d"),s=i.createRadialGradient(25.6,25.6,0,32,32,32);return s.addColorStop(.4,t),s.addColorStop(.9,"rgba(0,255,255,0.6)"),s.addColorStop(.99,"rgba(0,255,255,1)"),s.addColorStop(1,t),i.fillStyle=s,i.fillRect(0,0,64,64),i.fillStyle="rgba(255,255,255,1)",i.beginPath(),i.arc(44.8,25.6,8.96,0,2*Math.PI,!1),i.fill(),i.beginPath(),i.arc(12.8,41.6,3.2,0,2*Math.PI,!1),i.fill(),VS.toTexture(e)}makeSmoke(){let e=document.createElement("canvas");e.width=e.height=64;const t=e.getContext("2d");let i=new Image;i.src=ZS;let s=VS.toTexture(e);return i.onload=function(){t.drawImage(i,0,0),s.needsUpdate=!0},s}makeCircle(){let e=document.createElement("canvas");e.width=e.height=64;const t=e.getContext("2d");return t.strokeStyle="white",t.lineWidth=4,t.beginPath(),t.arc(32,32,30,0,2*Math.PI),t.stroke(),VS.toTexture(e)}makeField(){let e=document.createElement("canvas");e.width=e.height=64;const t=e.getContext("2d"),i=t.createLinearGradient(0,0,0,64);return i.addColorStop(0,"rgba(255,255,255,0)"),i.addColorStop(.8,"rgba(255,255,255,0.4)"),i.addColorStop(1,"rgba(255,255,255,0)"),t.fillStyle=i,t.fillRect(24,0,16,64),VS.toTexture(e)}makeStar(){let e=document.createElement("canvas");e.width=e.height=64;const t=e.getContext("2d"),i=t.createRadialGradient(32,32,0,32,32,32);return i.addColorStop(0,"rgba(255,255,255,0.5)"),i.addColorStop(.5,"rgba(255,255,255,0.1)"),i.addColorStop(.9,"rgba(255,255,255,0)"),t.fillStyle=i,this.star(t,32,6.4,32,32,3),this.star(t,32,25.6,32,32,3),VS.toTexture(e)}makeOcto(){let e=document.createElement("canvas");e.width=e.height=64;const t=e.getContext("2d"),i=t.createRadialGradient(32,32,0,32,32,32);return i.addColorStop(.4,"rgba(255,255,255,0.2)"),i.addColorStop(1,"rgba(255,255,255,0.4)"),t.fillStyle=i,this.star(t,25.6,22.4,32,32,6),t.strokeStyle="rgba(255,255,255,0.1)",t.lineWidth=6,t.stroke(),VS.toTexture(e)}star(e,t,i,s,n,r){let o,a,l;e.beginPath(),e.moveTo(s+t,n);for(var h=1;h<=2*r;h++)h%2==0?(l=h*(2*Math.PI)/(2*r),o=s+t*Math.cos(l),a=n+t*Math.sin(l)):(l=h*(2*Math.PI)/(2*r),o=s+i*Math.cos(l),a=n+i*Math.sin(l)),e.lineTo(o,a);e.closePath(),e.fill()}}const ZS="data:image/png;base64,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\nJRU5ErkJggg==";class YS{constructor(e,t){this.scene=e,this.isGl2=!0,this.emitters=new Map,this.textures=new WS,this.loader=null,this.now=0,this.last=0,this.delta=0,this.num=0,this.hscale=.5*window.innerHeight,this.luminosity=1}get(e){return this.emitters.has(e)?this.emitters.get(e):null}add(e,t){e.name||(e.name="PP"+this.num++),this.remove(e.name),e.model&&zS[e.model]&&(e={...zS[e.model],...e});let i=new XS(this,e);return this.emitters.set(e.name,i),i}addTexture(e,t,s=!0){this.textures.has(e)?console.log("this name of texture is already take !"):"string"==typeof t?(this.loader||(this.loader=new i.TextureLoader),this.loader.load(t,(t=>{t.flipY=!1,s&&(t.colorSpace=i.SRGBColorSpace),this.textures.add(e,t)}))):t.isTexture&&(t.flipY=!1,this.textures.add(e,t))}load(e){const t=e.substring(e.lastIndexOf("/")+1,e.lastIndexOf("."));var i=new XMLHttpRequest;i.open("GET",e),i.onreadystatechange=function(){if(4===i.readyState)if(200===i.status||0===i.status){let e=JSON.parse(i.responseText);for(let t in e)this.add(e[t])}else console.error("Couldn't load ["+t+"] ["+i.status+"]")}.bind(this),i.send()}remove(e){this.emitters.has(e)&&(this.emitters.get(e).dispose(),this.emitters.delete(e))}onresize(e){this.hscale=.5*e}loop(e){this.delta=e,this.emitters.forEach((e=>{e.draw()}))}update(e){this.now=void 0!==e?e:Date.now(),this.delta=.001*(this.now-this.last),this.last=this.now,this.emitters.forEach((e=>{e.draw()}))}dispose(e=!0){this.emitters.forEach((e=>{e.dispose()})),this.emitters.clear(),e&&this.textures.dispose(),this.num=0}addBlock(e,t){let i=e[1]<=4?-2:0,s=zS.getColor(t),n=s[0],r=s[1],o=s[2];s.length>3&&(n=s[3],r=s[4],o=s[5]),e[0]+=.5,e[2]+=.5,this.add({position:e,colors:[n,r,o,1,n,r,o,0],renderOrder:i,...zS.addBlock})}delBlock(e,t){let i=e[1]<=4?-2:0,s=zS.getColor(t),n=s[0],r=s[1],o=s[2];e[0]+=.5,e[2]+=.5,e[1]+=.5;let a=30;s.length>3&&(a=20,this.add({position:[e[0],e[1]+.375,e[2]],positionRange:[.5,.25,.5],colors:[n,r,o,.5,n,r,o,0],numParticles:10,renderOrder:i,...zS.removeBlock}),n=s[3],r=s[4],o=s[5]),this.add({position:e,positionRange:[.5,.5,.5],colors:[n,r,o,.5,n,r,o,0],numParticles:a,renderOrder:i,...zS.removeBlock})}removePlayerTrail(e){this.remove("PlayerTrail_"+e)}onPlayerWalk(e,t,i){let s=this.get("PlayerTrail_"+t);null===s&&(s=this.addTrail({name:"PlayerTrail_"+t,...zS.playerMove}));let n=e.toArray();n[1]+=.2;let r=zS.getColor(i),o=[r[0],r[1],r[2],.75,r[0],r[1],r[2],0];r.length>3&&(o=[r[0],r[1],r[2],.75,r[3],r[4],r[5],0]),s.birthParticles(n,o)}onVehicleDrive(e,t){let i=this.get("VehicleTrail_"+t);null===i&&(i=this.addTrail({name:"VehicleTrail_"+t,...zS.vehicleMove})),i.birthParticles(e.toArray())}onBazookaFire(e,t){let i=this.get("BazookaTrail_"+t);null===i&&(i=this.addTrail({name:"BazookaTrail_"+t,...zS.bazookaFire})),i.birthParticles(e.toArray())}onExplosion(e){this.add({position:e.toArray(),...zS.explosion})}}const _S=US;let KS,JS,$S=!1,eI=!1,tI=!1,iI=0,sI=null,nI=!1,rI=null,oI=null,aI=60,lI=8421504,hI=!0;const cI={theta:0,phi:12,distance:12,fov:50,x:0,y:2,z:0,time:0},dI={envmap:"clear",groundSize:[60,60],groundPos:[0,0,0],groundAlpha:!0,groundOpacity:1,groundReflect:.1,ground:!0,water:!1,fog:!1,vignette:!0,shadow:.75,exposure:.68,direct:3.14,spherical:1,envIntensity:1.3,bgIntensity:1,shadowIntensity:1},uI={renderMode:"color",debug:!1,day:!0,key:!1,mode:"HIGH",quality:2,demo:"start",envmap:"null",substep:1,fps:60,gravity:[0,-9.81,0],tone:"ACESFilmic",exposure:.68,direct:3.14,spherical:1,envIntensity:1.3,bgIntensity:1,envBlur:0,legacy:!1,show_light:!1,show_stat:!1,shadow:.5,shadowType:"PCFSoft",shadowGamma:1,shadowLuma:.5,shadowContrast:2,reflect:.1,fogMode:1,lightSizeUV:.1,nearPlane:3,rings:4,nSample:16,composer:!1};let pI,fI,mI,gI,AI,bI,vI,yI=null,wI=!1,xI=null,OI=null,CI=null,SI="",II=null,EI=null,kI=!0,BI=!0;const QI={w:0,h:0,r:0,left:0},MI={now:0,delta:0,then:0,tmp:0,n:0,dt:0,fps:0},TI={None:o.NoToneMapping,Linear:o.LinearToneMapping,Reinhard:o.ReinhardToneMapping,Cineon:o.CineonToneMapping,Agx:o.AgXToneMapping,ACESFilmic:o.ACESFilmicToneMapping,Uncharted2:o.CustomToneMapping},DI={PCSS:o.BasicShadowMap,PCF:o.PCFShadowMap,PCFSoft:o.PCFSoftShadowMap,VSM:o.VSMShadowMap},RI={Hub:xn,engineType:"",currentDemmo:"",isWorker:!0,devMode:!1,engineList:["OIMO","AMMO","PHYSX","HAVOK","RAPIER","JOLT"],demoList:[],demoLink:[],devLink:[],devDemo:{},envList:[],isMobile:!1,isEditor:!1,motor:_S,start:async(e={})=>{xn.setMain(RI),Gr.setMain(RI,xn.getCorner()),Gr.setTextureConstrutor(o.Texture),$S=e.useWebgpu||!1;const t=await $();switch(RI.isMobile=t.isMobile,(RI.isMobile||t.fps<60)&&(uI.mode="LOW",uI.quality=1),t.tier){case 1:uI.fps=15;break;case 2:uI.fps=30;break;case 3:uI.fps=60}RI.engineType=e.type||"PHYSX",RI.isWorker=!RI.isMobile;let i=new URLSearchParams(window.location.search);if(i.has("E")){let e=i.get("E");RI.isWorker=-1!==e.search("w_"),RI.devMode=-1!==e.search("dev_"),RI.engineType=e.substring(e.lastIndexOf("_")+1).toUpperCase()}let s=RI.engineType.toLowerCase();s.charAt(0).toUpperCase(),s.slice(1),KS=_S.Version[RI.engineType],e.type=RI.engineType,e.devMode=RI.devMode,e.worker=RI.isWorker,e.callback=PI,JS=(RI.isWorker?"WORKER ":"DIRECT ")+RI.engineType+" "+KS,window.engine=RI.engineType,_S.init(e)},getCorner:()=>xn.getCorner(),setComposer:e=>{pE()},showDebugLight:e=>{jI(e)},showStatistic:e=>{dE(e)},setShadow:e=>{qI(e)},setShadowType:()=>{HI()},upShader:()=>{upShader()},getCamera:()=>mI.info,setCamera:e=>{sE(e)},getCode:()=>SI,getScene:()=>gI,getRenderer:()=>AI,getControler:()=>mI,getCodeName:()=>uI.demo,getGround:()=>CI,getHub3d:()=>yI,getDemos:()=>{let e=_S.get("demos","json");if(RI.demoLink=[...e.Basic,...e.Advanced,...e[RI.engineType]],RI.devLink=[...e.Dev],RI.devMode){RI.demoLink=[...RI.demoLink,...e.Dev];let t=e.Dev.length;for(;t--;){let i=e.Dev[t];i=i.substring(i.lastIndexOf("/")+1),i=i.toUpperCase().substring(0,1)+i.substring(1).toLowerCase(),RI.devDemo[i]=!0}}let t,i=RI.demoLink.length;for(;i--;)t=RI.demoLink[i],RI.demoList[i]=t.substring(t.lastIndexOf("/")+1);RI.envList=[...e.Envmap]},lightIntensity:()=>{NI()},changeShadow:e=>{GI(e)},envmapIntensity:()=>{cE()},bgIntensity:()=>{hE()},shadowIntensity:()=>{lE()},setReflect:e=>{tE(e)},getOption:()=>uI,getSetting:()=>dI,getComposer:()=>OI,getToneMappingOptions:()=>TI,setLeft:e=>{QI.left=e,JI()},setCode:e=>{},getMouseDown:()=>mouseDown,externEditor:()=>{rE()},injectCode:e=>{ZI(e)},addParticle:e=>mE(e),getParticle:e=>gE(e),initParticle:()=>fE(),loadDemo:e=>{WI(e)},extraCode:(e,t)=>{II.loadExtra(e,t)},showEditor:e=>{II.show(e)},changeMode:e=>{let t="LOW"===uI.mode;qI(t?0:.5),tE(t?0:.8)},showGui:()=>{Gr.showHide()},resetGui:()=>{Gr.reset()},setEnv:(e,t)=>{nE(e)},setBlur:e=>{Fr.setBlur(uI.envBlur)},setColors:e=>{yI&&(yI.color=Gr.tool.htmlToHex(e.darkVibrant)),lI=Gr.tool.htmlToHex(e.ground),CI&&hI&&CI.setColor(lI);let t=_S.getMatRef();t.isRealism&&t.setColor(e)},debugMode:e=>{uI.debug=e,_S.setDebugMode(uI.debug)},changeRenderMode:e=>{let t=0;"depth"===e&&(t=1),"normal"===e&&(t=2),_S.changeRenderMode(t)}};_S.log=xn.log,_S.changeShadow=RI.changeShadow,_S.initParticle=RI.initParticle,_S.addParticle=RI.addParticle,_S.getParticle=RI.getParticle,_S.getGround=RI.getGround,_S.extraCode=RI.extraCode,_S.debugMode=RI.debugMode,_S.gui=Gr.extraUi,window.phy=_S,window.math=_S.math,window.Main=RI,window.THREE=o,window.hub=xn,window.Planet=Jw,window.Building=Dw,window.Sparkle=Xw,window.Diamond=$w,window.Fluid=nx,window.TWEEN=a;const PI=()=>{eI=$S||!1,eI&&console.log("use webgpu !!");let e=!0;"LOW"===uI.mode&&(e=!1),_S.getScene(),QI.w=window.innerWidth,QI.h=window.innerHeight,QI.r=QI.w/QI.h,AI=eI?new o.WebGPURenderer({antialias:e}):new o.WebGLRenderer({antialias:e,powerPreference:"default",alpha:!1,depth:!0,stencil:!0,premultipliedAlpha:!0,preserveDrawingBuffer:!1,failIfMajorPerformanceCaveat:!1}),AI.setPixelRatio(1),AI.setSize(QI.w,QI.h),AI.setClearColor(0,1),AI.toneMapping=TI[uI.tone],AI.toneMappingExposure=uI.exposure,window.renderer=AI,"LOW"===uI.mode||eI||_S.setMaxAnisotropy(AI.capabilities.getMaxAnisotropy()),_S.setRenderer(AI),document.body.appendChild(AI.domElement),pI=AI.domElement,pI.style.position="absolute",gI=new o.Scene,AI.setClearColor(new o.Color(0)),bI=new o.Group,bI.name="followGroup",gI.add(bI),vI=new o.Group,vI.name="helperGroup",gI.add(vI),gI.helper=vI,VI(),fI=new o.PerspectiveCamera(50,QI.r,.1,1e3),gI.add(fI),mI=new ve(fI,AI.domElement,bI),mI.resetAll(),document.addEventListener("visibilitychange",KI),window.addEventListener("resize",JI),document.body.addEventListener("dragover",(function(e){e.preventDefault()}),!1),document.body.addEventListener("dragend",(function(e){e.preventDefault()}),!1),document.body.addEventListener("dragleave",(function(e){e.preventDefault()}),!1),document.body.addEventListener("drop",LI,!1),xn.init(fI,QI,JS),II=new ey,Fr.init(AI,gI),Fr.setMain(RI),UI(),_S.load("demos.json",FI)},LI=e=>{e.preventDefault();const t=e.dataTransfer.files[0],i=new FileReader,s=t.name,n=s.substring(s.lastIndexOf(".")+1,s.length),r=s.substring(s.lastIndexOf("/")+1,s.lastIndexOf("."));switch(n){case"js":i.readAsText(t);break;case"fbx":case"glb":i.readAsArrayBuffer(t);break;case"hdr":case"exr":uI.envmap=r,Fr.load((window.URL||window.webkitURL).createObjectURL(t),null,n)}i.onload=function(e){if("js"===n)XI(r,e.target.result)}},FI=()=>{RI.getDemos(),_S.setContent(gI),_S.setControl(mI),_S.setAddControl(zI),_S.activeMouse(mI);let e=location.hash.substr(1);""!==e&&(uI.demo=e),xn.endLoading(),WI(uI.demo)},UI=()=>{wI||(eI?AI.setAnimationLoop($I):null===xI&&$I(0),wI=!0)},zI=()=>{RI.isMobile&&xn.addJoystick()},GI=e=>{e.distance,ur.setShadow(ur.byName("sun"),e)},NI=(e,t,i)=>{void 0!==e&&(uI.direct=e),void 0!==t&&(uI.spherical=t),void 0!==i&&(uI.exposure=i),ur.update({sunIntensity:uI.direct,hemiIntensity:uI.spherical}),AI.toneMappingExposure=uI.exposure};_S.lightIntensity=NI;const VI=()=>{ur.define(uI,bI,eI),"LOW"===uI.mode&&(uI.shadow=0,uI.reflect=0),eI||(ur.castShadow(0!==uI.shadow),AI.shadowMap.enabled=0!==uI.shadow,AI.shadowMap.type=DI[uI.shadowType])},jI=e=>{let t=ur.addHelper(e,vI);Fr.preview(t)},HI=()=>{AI.shadowMap.type=DI[uI.shadowType]},qI=e=>{uI.shadow=e,0===uI.shadow?(ur.castShadow(!1),AI.shadowMap.enabled=!1):AI.shadowMap.enabled||(ur.castShadow(!0),AI.shadowMap.enabled=!0)},XI=(e,t)=>{RI.currentDemo=e,uI.demo=e,location.hash=e,xn.upMenu(),ZI(t,!0)},WI=e=>{let t=RI.demoList.indexOf(e),i="";-1!==RI.devLink.indexOf(e)&&(i="dev/"),-1===t&&""===i&&(e="start",t=0),RI.currentDemo=e,uI.demo=e,location.hash=e,xn.upMenu(),_S.load("./demos/"+i+e+".js",ZI)},ZI=(e,t=!1)=>{kI=!e,SI=kI?_S.getScript(uI.demo):e,t&&(kI=!0),window.onReset&&(window.onReset(),window.onReset=null),a.removeAll(),xn.reset(),II.reset(),Gr.resetExtra(),rI&&rI.dispose(),kI&&(ur.update({sunPos:[.27,1,.5],sunColor:16777215,skyColor:16777215,groundColor:8421504}),_S.poolDispose()),_S.mouseMode("drag"),_S.reset(YI)},YI=()=>{null!==EI&&(EI.remove(),EI=null),EI=document.createElement("script"),EI.language="javascript",EI.type="text/javascript",EI.id="demo",EI.async=!1,EI.innerHTML="{"+SI+"}",document.body.appendChild(EI),kI&&_I();let e=SI.search("phy.view"),t=SI.search("//phy.view");-1!==e&&-1===t||iE(dI),-1===SI.search("phy.set")&&_S.set(),window.demo(),Gr.doReset()},_I=()=>{nI?aE({type:"set",code:SI,name:uI.demo}):II.set(SI,uI.demo)},KI=()=>{document.hidden?(tI=_S.getPause(),_S.pause(!0)):_S.pause(tI)},JI=()=>{QI.w=window.innerWidth-QI.left,QI.h=window.innerHeight,QI.r=QI.w/QI.h,BI=!0},$I=(e=0)=>{MI.now=e,MI.delta=MI.now-MI.then,MI.dt=.001*MI.delta,BI&&(pI.style.left=QI.left+"px",fI.aspect=QI.r,fI.updateProjectionMatrix(),AI.setSize(QI.w,QI.h),OI&&OI.resize(QI),rI&&rI.onresize(QI.h),xn.resize(QI),_S.resize(QI),BI=!1),RI.isWorker?_S.setDelta(MI.dt):_S.doStep(e),rI&&rI.update(e),mI&&mI.up(MI.dt),a.update(e),OI&&OI.enabled?OI.render(MI.dt):AI.render(gI,fI),Gr.update(),eE(),eI||(xI=requestAnimationFrame($I))},eE=()=>{MI.now-1e3>MI.tmp&&(MI.tmp=MI.now,MI.fps=MI.n,MI.n=0),MI.n++,MI.then=MI.now,MI.fps>aI&&(aI=MI.fps,_S.setMaxFps(aI)),xn.setFps(MI.fps+" ~ "+_S.getFps()+" | "+_S.getMs()+" ms"),uE()},tE=e=>{void 0!==e&&(uI.reflect=e),CI&&CI.setReflect(uI.reflect)},iE=(e={})=>{e={...dI,...e},hI=!e.groundColor,"LOW"===uI.mode&&(e.shadow=0,e.groundReflect=0,uI.reflect=0,uI.quality=1),uI.direct=e.direct,uI.spherical=e.spherical,uI.exposure=e.exposure,uI.envIntensity=e.envIntensity,uI.bgIntensity=e.bgIntensity,uI.shadowIntensity=e.shadowIntensity,_S.lightIntensity(),Fr.reset(),e.envmap&&(nE(e.envmap),uI.envBlur=e.envblur||0,Fr.setBlur(uI.envBlur),e.background&&Fr.setBackgroud(e.background),e.envFloor&&Fr.project(e.background)),qI(e.shadow);let t=e.fogMode||0;if(e.fog){let i=e.fogRange||[1,50];gI.fog=new o.Fog(Fr.getFogColor().getHex(),i[0],i[1]),uI.fogMode=t}else e.fogexp?(gI.fog=new o.FogExp2(Fr.getFogColor().getHex(),e.fogexp||.01),uI.fogMode=t):gI.fog=null;e.ground?(e=>{void 0!==e.groundReflect&&(uI.reflect=e.groundReflect),void 0!==e.reflect&&(uI.reflect=e.reflect),null===CI?(CI=new Mw({textureSize:1024*uI.quality,clipBias:.003,encoding:!0,reflect:"LOW"===uI.mode?0:uI.reflect,water:e.water,round:!0,normal:!0}),gI.add(CI)):CI.reset(),CI.setSize(e.groundSize),CI.position.fromArray(e.groundPos),void 0!==e.groundColor?(CI.setColor(e.groundColor),hI=!1):CI.setColor(lI),CI.setAlphaMap(e.groundAlpha),CI.setOpacity(e.groundOpacity),void 0!==e.groundReflect&&CI.setReflect(e.groundReflect),CI.setWater(e.water),_S.addMaterial(CI.material,!0)})(e):null!==CI&&(CI.dispose(),CI=null),e.vignette?null!==yI||eI||(yI=new Qw,fI.add(yI)):null!==yI&&(yI.dispose(),yI=null),kI&&sE(e),cE(),hE(),lE()};_S.view=iE;const sE=e=>{mI.moveCam({...cI,...e}),mI.update()},nE=(e,t)=>{e!==uI.envmap&&(isNaN(e)?uI.envmap=e:uI.envmap="null",Fr.set(e))},rE=()=>{if(!sI){let e=location.hash;iI=QI.left||500,nI=!0,sI=window.open("editor.html"+e,"Editor","height="+QI.h+", width="+iI),window.addEventListener("message",oE,!1),sI.onload=()=>{aE({type:"connect"}),II.close(),QI.left=0,JI()}}},oE=e=>{switch(e.data.type){case"connect":console.log("connect");break;case"inject":ZI(e.data.code);break;case"close":aE({type:"close"}),window.removeEventListener("message",oE,!1),sI=null,nI=!1,II.open(),QI.left=iI}},aE=e=>{sI&&sI.postMessage(e,"*")},lE=()=>{ur.setShadow(ur.byName("sun"),{intensity:uI.shadowIntensity})},hE=()=>{gI.backgroundIntensity=uI.bgIntensity},cE=()=>{gI.environmentIntensity=uI.envIntensity},dE=e=>{eI||(e&&!oI&&(oI=new N(AI)),!e&&oI&&(oI=null,xn.setStats()))},uE=()=>{oI&&xn.setStats(oI.get())},pE=e=>{uI.composer?(null===OI&&(OI=new Bw(AI,gI,fI,mI,QI)),OI.enabled=!0,yI&&(yI.visible=!1)):OI&&(OI.dispose(),OI=null,yI&&(yI.visible=!0)),Gr.postprocessEdit()},fE=()=>{rI||(rI=new YS(gI,AI))},mE=(e={})=>(rI||(rI=new YS(gI,AI)),rI.add(e)),gE=e=>(rI||(rI=new YS(gI,AI)),rI.get(e));e.Main=RI}));
